const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Bhwa85yy.js","assets/index.browser.esm-Cr37wTS-.js","assets/index-BlDiaEgJ.js","assets/index-BTKajMfc.css","assets/index-BhVOWNjT.js","assets/index-BErxmjRd.js","assets/index-Do4OYDqa.js","assets/adapter-kYnEUcVy.js","assets/index-Cg58u2IR.js","assets/bignumber-3a8w86ie.js","assets/TransportWebHID-DyHqd2bs.js","assets/signIn-DZMDNVZA.js","assets/index-IUwre2_-.js","assets/index-Ki2NzIeG.js","assets/index-OJYXOFFv.js","assets/index-DriMd9vk.js","assets/solanaEmbed.esm-DkY9XPFY.js","assets/index-D_w94HBA.js","assets/secp256k1-m_cMlnCO.js","assets/secp256k1-DH6Ji6I1.js","assets/basic-Bam4u1Xq.js","assets/index-hSy23uO_.js","assets/dijkstra-COg3n3zL.js","assets/w3m-modal-DjysK44w.js"])))=>i.map(i=>d[i]);
import{P as ht,B as We,K as M1,e as N1,r as ki,b as tt,c as Zm,a as Lj,T as zj}from"./index.browser.esm-Cr37wTS-.js";import{l as Ht,m as la,k as Gn,d as kj,e as Pj,f as Rj,i as Uj,c as $j,b as Bj,a as qj,j as Yj,S as Wj,B as Qj,n as Vj}from"./signIn-DZMDNVZA.js";import{a as ie,i as $r,s as Wt,d as yt,c as Tr,k as Et,b as ut,j as Mr,g as Le,W as Cn,f as On,h as Ye,e as Ar,n as ua,l as Qa,o as Iw,p as Fj}from"./adapter-kYnEUcVy.js";import{_ as pn,j as Vf,k as Gm,p as Be}from"./index-BlDiaEgJ.js";var If;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(If||(If={}));var Hj=function(r,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(r):i?i.value:e.get(r)},Zj=function(r,e,t,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},Ku;function Gj(r){const e=({register:t})=>t(r);try{window.dispatchEvent(new Kj(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class Kj extends Event{get detail(){return Hj(this,Ku,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),Ku.set(this,void 0),Zj(this,Ku,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Ku=new WeakMap;const W_="Alpha";class Jj extends Ht{constructor(e={}){super(),this.name=W_,this.url="https://github.com/alphabatem/alpha-wallet",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAxMDgwIDEwODAiPjxkZWZzPjxzdHlsZT4ua3tmaWxsOiNmZmY7fS5se2ZpbGw6dXJsKCNjKTt9Lm17aXNvbGF0aW9uOmlzb2xhdGU7fS5ue2ZpbGw6dXJsKCNqKTtvcGFjaXR5Oi42Nzt9Lm4sLm97bWl4LWJsZW5kLW1vZGU6bXVsdGlwbHk7fS5ve2ZpbGw6dXJsKCNpKTtvcGFjaXR5Oi40MTt9LnB7ZmlsbDp1cmwoI2YpO30ucXtmaWxsOiMwMGNlN2M7fS5ye2ZpbGw6IzJhN2RlMTt9LnN7ZmlsbDp1cmwoI2cpO30udHtmaWxsOnVybCgjYik7fS51e2ZpbGw6dXJsKCNoKTt9LnZ7ZmlsbDp1cmwoI2QpO30ud3tmaWxsOnVybCgjZSk7fTwvc3R5bGU+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iNjYzLjIyIiB5MT0iMTAuNTIyIiB4Mj0iMzIzLjIwMiIgeTI9IjM1OS4zNzIiIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMSwgMCwgMCwgMSwgMCwgMCkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMyNGNlN2IiLz48c3RvcCBvZmZzZXQ9Ii44MjgiIHN0b3AtY29sb3I9IiMyNTdjZTEiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYyIgeDE9IjMzNi4zNjgiIHkxPSItOTguMjg5IiB4Mj0iODQzLjk1OSIgeTI9IjI4MC41OCIgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxLCAwLCAwLCAxLCAwLCAwKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iLjQ3NiIgc3RvcC1jb2xvcj0iIzI0Y2U3YiIvPjxzdG9wIG9mZnNldD0iLjgyOCIgc3RvcC1jb2xvcj0iIzI1N2NlMSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJkIiB4MT0iMTk2LjU2NCIgeTE9IjIzMS44OTQiIHgyPSI5MzIuODIyIiB5Mj0iMjMxLjg5NCIgeGxpbms6aHJlZj0iI2MiLz48bGluZWFyR3JhZGllbnQgaWQ9ImUiIHgxPSIyMTQuODczIiB5MT0iMjk5LjIwNyIgeDI9IjgwMy44OCIgeTI9IjI5OS4yMDciIHhsaW5rOmhyZWY9IiNjIi8+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4MT0iMjA2LjM4NiIgeTE9IjkzNi4yMDIiIHgyPSI3ODUuNjY0IiB5Mj0iNjMzLjA3IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEsIDAsIDAsIDEsIDAsIDApIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIuMzY3IiBzdG9wLWNvbG9yPSIjMjU3Y2UxIi8+PHN0b3Agb2Zmc2V0PSIuODUiIHN0b3AtY29sb3I9IiMyNGNlN2IiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZyIgeDE9IjIwNC42MTEiIHkxPSI5NTcuMDQzIiB4Mj0iODEyLjQzNiIgeTI9IjYzOC45NzMiIHhsaW5rOmhyZWY9IiNjIi8+PGxpbmVhckdyYWRpZW50IGlkPSJoIiB4MT0iNTc0LjY4NCIgeTE9IjY3NS43MjMiIHgyPSI1NzkuMDU1IiB5Mj0iNjczLjQzNSIgeGxpbms6aHJlZj0iI2MiLz48bGluZWFyR3JhZGllbnQgaWQ9ImkiIHgxPSIxMDQyLjA3IiB5MT0iMTMwOC4zMyIgeDI9IjgzOC43NzciIHkyPSIxNzQ1LjYzIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKC01NDAuMTUxIC02MzEuNDg1KSByb3RhdGUoLjM5KSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwMCIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJqIiB4MT0iMjEzOTcuNjU1IiB5MT0iMTE2MC4zOTIiIHgyPSIyMTE5MS4xNjMiIHkyPSIxNjA0LjU3MyIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSgyMTk3My43NjggLTYzMS40ODUpIHJvdGF0ZSgxNzkuNjEpIHNjYWxlKDEgLTEpIiB4bGluazpocmVmPSIjaSIvPjwvZGVmcz48ZyBjbGFzcz0ibSI+PGcgaWQ9ImEiPjxnPjxnPjxwYXRoIGNsYXNzPSJxIiBkPSJNNTY5LjYyMSw1NDAuMTMxYzQ3LjkzNiwxMDQuNTE0LDk1Ljg3MywyMDkuMDI4LDE0My44MDksMzEzLjU0M2wtMjAyLjcxOSwuMjU4YzE1LjExNCwzNC4xNzUsMzAuMjI5LDY4LjM1LDQ1LjM0MywxMDIuNTI0bDMxNS4zNzIsLjM5OWMtNjYuNDg4LTE0Ni40NTMtMTMyLjk3NS0yOTIuOTA2LTE5OS40NjMtNDM5LjM2LS4wMjEtNjUuOTI5LS4wNDMtMTMxLjg1Ny0uMDY0LTE5Ny43ODYtMzQuMTM2LDE0LjQ0NS02OC4yNzIsMjguODkxLTEwMi40MDgsNDMuMzM2LC4wNDMsNTkuMDI4LC4wODYsMTE4LjA1NywuMTI5LDE3Ny4wODVaIi8+PHBhdGggY2xhc3M9ImsiIGQ9Ik0zNTQuODc0LDg1My41NDVjNDIuMTMyLTEwNC44NTgsODQuMjY1LTIwOS43MTYsMTI2LjM5Ny0zMTQuNTc0LS4wODYtNTguNjQyLS4xNzItMTE3LjI4My0uMjU4LTE3NS45MjQtMzQuMTc5LTE0LjY4Mi02OC4zNTgtMjkuMzY0LTEwMi41MzctNDQuMDQ2LC40Myw2Ni4wNTgsLjg2LDEzMi4xMTUsMS4yOSwxOTguMTczbC0xNzkuNDA3LDQzOS42ODJjMTE4LjU3My0uMTI5LDIzNy4xNDUtLjI1OCwzNTUuNzE4LS4zODctMTUuMDQ3LTM0LjE3OS0zMC4wOTUtNjguMzU4LTQ1LjE0Mi0xMDIuNTM3LTUyLjAyMS0uMTI5LTEwNC4wNDEtLjI1OC0xNTYuMDYyLS4zODdaIi8+PGNpcmNsZSBjbGFzcz0idCIgY3g9IjUyMS40NTgiIGN5PSIxNTUuOTY2IiByPSIzOC43NzIiLz48Y2lyY2xlIGNsYXNzPSJsIiBjeD0iNjU1LjM2NCIgY3k9IjEzOS44MTEiIHI9IjYxLjkyNyIvPjxjaXJjbGUgY2xhc3M9InYiIGN4PSI1ODEuNTkiIGN5PSIyMzEuODk0IiByPSIyOS42MTciLz48Y2lyY2xlIGNsYXNzPSJ3IiBjeD0iNTIyLjg5NCIgY3k9IjI5OS4yMDciIHI9IjIzLjY5NCIvPjxwYXRoIGNsYXNzPSJwIiBkPSJNNTc2LjYxOSw3MzcuNzgxYy0uMzM2LS41OTktMy4zNTctNi4wOS04LjEyNy0xMy4yMTQtMS40MzEtMi4xMzctMy4wNDktNC40NDItNC45MjEtNi45NTItOC43OC0xMS43NjgtNDAuOTY4LTU0LjkxNC02OS45ODctNTEuMDA3LTIuNzY2LC4zNzItNC43MjksLjk3LTYuMzMzLDEuNDgxLTIzLjc1MSw3LjU3Mi0zNC4yNCwzNC41MTUtNDEuMDYsNTEuNTc0LTExLjg0MSwyOS42MTYtMjUuNTM5LDYxLjczMy00Mi4xMzYsMTAwLjMwNSw4NS4zMjcsLjIyOCwxNzAuNjUzLC40NTYsMjU1Ljk4LC42ODQtNTkuOTkzLTU1Ljk4MS04MC4xNTktNzcuMDY1LTgzLjQxNS04Mi44NzFaIi8+PHBhdGggY2xhc3M9InMiIGQ9Ik01MDUuNzc3LDcxNC4zNzljLTEzLjc0Nyw3Ljk5Mi0yNi44OTEsMTEuODU4LTMzLjcwMiwxMy42ODktMTIuNDM0LDMuMzQyLTIzLjIzNCw0LjQ5NC0zMS4wNDUsNC44ODRsLTM2Ljc5Niw4Ny4yNTJjODUuMjY2LC4wNjUsMTcwLjUzMiwuMTI5LDI1NS43OTksLjE5NC0xNC42Ni0zNS45ODQtMjkuMzIxLTcxLjk2OS00My45ODEtMTA3Ljk1NC0xMC41OTgtMjAuNzAyLTIwLjE4NC0zMi4zMTgtMjguNDg4LTM4LjU4NS02LjI4MS00Ljc0LTExLjgyOC02LjQyLTE2LjUyNi02LjY1Ni0uMzQ4LS4wMTgtLjY5Mi0uMDI3LTEuMDMtLjAzLTIwLjc4MS0uMTQ1LTI5LjUwNiwyNy4wMTgtNjQuMjMsNDcuMjA1WiIvPjxwYXRoIGNsYXNzPSJyIiBkPSJNNTM4LjkyNCw5NjguMTgxYzEuNDYzLDAsMS40NjUtMi4yNzMsMC0yLjI3M3MtMS40NjUsMi4yNzMsMCwyLjI3M2gwWiIvPjxsaW5lIGNsYXNzPSJ1IiB4MT0iNTc4LjAwNCIgeTE9IjY3NC42NTQiIHgyPSI1NzUuOTQxIiB5Mj0iNjc0LjM5NiIvPjwvZz48cGF0aCBjbGFzcz0ibyIgZD0iTTM3OS44MzEsNTE3LjEwOWMzMy44MzUsNy4yODcsNjcuNjcsMTQuNTc0LDEwMS41MDUsMjEuODYybC0xMjYuNDUsMzE0LjU2MiwxNTYuMDY2LC4zOTljMTUuMDQ2LDM0LjE3OSwzMC4wOTIsNjguMzU4LDQ1LjEzOCwxMDIuNTM3LTExOC41NzcsLjE1LTIzNy4xNTMsLjMwMS0zNTUuNzMsLjQ1MSw1OS44MjQtMTQ2LjYwNCwxMTkuNjQ4LTI5My4yMDcsMTc5LjQ3MS00MzkuODExWiIvPjxwYXRoIGNsYXNzPSJuIiBkPSJNNjcxLjkyOCw1MTcuNTMyYy0zNC4xMTQsNy41MjktNjguMjI5LDE1LjA1OC0xMDIuMzQzLDIyLjU4Nyw0Ny45NDcsMTA0LjUxNiw5NS44OTQsMjA5LjAzMSwxNDMuODQxLDMxMy41NDctNjcuNDk2LC4wODktMTM0Ljk5MSwuMTc3LTIwMi40ODcsLjI2NiwxNS4wNDksMzQuMTgzLDMwLjA5OSw2OC4zNjcsNDUuMTQ4LDEwMi41NSwxMDUuMTE1LC4xMjYsMjEwLjIzLC4yNTMsMzE1LjM0NSwuMzc5LTY2LjUwMi0xNDYuNDQzLTEzMy4wMDMtMjkyLjg4Ni0xOTkuNTA1LTQzOS4zMjlaIi8+PC9nPjwvZz48L2c+PC9zdmc+",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.alpha?.isAlpha?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.alpha;if(!e.isConnected)try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const Q_="Avana";class Xj extends Ht{constructor(e={}){super(),this.name=Q_,this.url="https://www.avanawallet.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNi4yLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAyODkuNzg3ODEgMjg5Ljc4NzgxIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyODkuNzg3ODEgMjg5Ljc4NzgxIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGw9IiMxQzFDMUMiIGQ9Ik0yMTguNDM5MDEsMjg5Ljc4NzgxSDcxLjM0ODhDMzEuOTQzOTUsMjg5Ljc4NzgxLDAsMjU3Ljg0Mzg3LDAsMjE4LjQzOTAxVjcxLjM0ODgNCglDMCwzMS45NDM5NSwzMS45NDM5NSwwLDcxLjM0ODgsMGgxNDcuMDkwMjFjMzkuNDA0ODYsMCw3MS4zNDg4LDMxLjk0Mzk1LDcxLjM0ODgsNzEuMzQ4OHYxNDcuMDkwMjENCglDMjg5Ljc4NzgxLDI1Ny44NDM4NywyNTcuODQzODcsMjg5Ljc4NzgxLDIxOC40MzkwMSwyODkuNzg3ODF6Ii8+DQo8bGluZWFyR3JhZGllbnQgaWQ9IlNWR0lEXzFfIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjczLjU4NTUzIiB5MT0iMjE3Ljk4MDgzIiB4Mj0iMjA4LjY0NzQ5IiB5Mj0iLTY0LjU5NzU2IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDAgMjkwLjc5MzAzKSI+DQoJPHN0b3AgIG9mZnNldD0iMCIgc3R5bGU9InN0b3AtY29sb3I6IzE2RkVBOCIvPg0KCTxzdG9wICBvZmZzZXQ9IjAuNCIgc3R5bGU9InN0b3AtY29sb3I6IzAwREFGRiIvPg0KCTxzdG9wICBvZmZzZXQ9IjAuOTIiIHN0eWxlPSJzdG9wLWNvbG9yOiNEQzFGRkYiLz4NCgk8c3RvcCAgb2Zmc2V0PSIxIiBzdHlsZT0ic3RvcC1jb2xvcjojREMxRkZGIi8+DQo8L2xpbmVhckdyYWRpZW50Pg0KPHBhdGggZmlsbD0idXJsKCNTVkdJRF8xXykiIGQ9Ik0yMzUuNzgxMjIsMjE3LjA0NTMzTDE1Ny43MjQ0Myw0OC40NTUyMmMtNS4wMzU4MS0xMC45MjA1NC0yMC41Mzk3Ni0xMC45MjA1NC0yNS41NzU1OSwwDQoJbC0zOS4xODM4OSw4NC41OTIxNGMtMS4xMDM0MiwyLjQwNDcyLTEuNjQwOTcsNC45NzkzNy0xLjY0MDk3LDcuNDY5MDZjMCw3LjEwMTA3LDQuMjQzNzUsMTMuODkxMTMsMTEuNDAxNDQsMTYuNjYzNjQNCgljOC44ODM2NCwzLjQ1MTY4LDE4LjkyNzEzLTEuMTAzMjMsMjIuOTQ0NjYtOS43NjA0OGw5Ljc4ODgyLTIxLjEzMzk2YzMuNzM0NTEtOC4wOTEzOCwxNS4yMjA5Mi04LjA5MTM4LDE4Ljk1NTQ2LDANCglsMTYuNDQ4MiwzNS41NTM0M2MyLjQxMjAyLDUuMjEzNjctMS43MDg5MiwxMS4wMjA4My03LjQzNzA5LDEwLjU4NzAxYy02Ny42NzI1LTUuMTI0OTQtMTA1LjA3MzAzLDM4LjcwMzA5LTEwNi4xNjQ3Niw0MC4wMDc3NA0KCWMtMC4wMjgxNCwwLjAyODMxLTAuMDI4MTQsMC4wMjgzMS0wLjAyODE0LDAuMDI4MzFjLTMuMDI3MjMsMy4xOTY5OS00Ljg5NDU4LDcuNDY5MDYtNC44OTQ1OCwxMi4yNTAxOA0KCWMwLDkuODE3MzEsNy45NDk5NCwxNy43NjcyNiwxNy43Mzg5MywxNy43NjcyNmM1LjE3NzQzLDAsOS44NDU0NS0yLjIzNDk5LDEzLjA5OTA1LTUuNzcxNDRjMCwwLDAuMDg0NzktMC4xMTMzLDAuMjU0NTMtMC4zMTEzNg0KCWMwLjExMzI4LTAuMTEzMTEsMC4yNTQ3MS0wLjI1NDUzLDAuMzk2MTMtMC40MjQyNmM0Ljk0NjEtNS4zMDEyNSwzNy42MTI0LTM3LjM5MDI3LDkyLjA2NjE1LTI2LjM1OTA3DQoJYzEyLjAxNzc4LDIuNDM0NTQsMjIuMDQ5NjgsMTAuNjgxNywyNy4yMTE2MiwyMS44MDQxNGwwLDBjMy4wMjcyMiw2LjUzNTM3LDkuNTA1OTcsMTEuMDYxOTgsMTYuNzIwMjksMTAuOTc3MDENCglDMjMyLjcyNTY2LDI0Mi4yMjQ4MiwyNDEuMjEzMTcsMjI4Ljc4NjI1LDIzNS43ODEyMiwyMTcuMDQ1MzN6Ii8+DQo8L3N2Zz4NCg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.avana?.solana?.isAvana?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.avana.solana;if(!e.isConnected)try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const Km="Bitget";class V_ extends Ht{constructor(e={}){super(),this.name=Km,this.url="https://web3.bitget.com",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSIjMDAxRjI5Ii8+CjxwYXRoIGQ9Ik0yMTkuOTQ4IDk1LjcwMjJDMjAxLjYyMyA5NS42OTI5IDE4My4zMyA5NS42ODM1IDE2NC45NDEgOTUuNzExNkMxNTMuODIyIDk1LjcxMTYgMTQ5LjY1MSAxMDkuNjcxIDE1Ny45MjEgMTE3LjkzOUwyODMuMDk4IDI0My4xMTdDMjg3LjAwNCAyNDYuNjkgMjg5LjQ0MSAyNTAuNTc0IDI4OS41MyAyNTUuNjkzQzI4OS40NDEgMjYwLjgxMiAyODcuMDA0IDI2NC42OTYgMjgzLjA5OCAyNjguMjY5TDE1Ny45MjEgMzkzLjQ0NkMxNDkuNjUxIDQwMS43MTUgMTUzLjgyMiA0MTUuNjc0IDE2NC45NDEgNDE1LjY3NEMxODMuMzMgNDE1LjcwMiAyMDEuNjIzIDQxNS42OTMgMjE5Ljk0OCA0MTUuNjgzQzIyOS4xMjIgNDE1LjY3OSAyMzguMzA1IDQxNS42NzQgMjQ3LjUxMSA0MTUuNjc0QzI1OS41NTUgNDE1LjY3NCAyNjYuNzIgNDA5LjI0IDI3My4xNTQgNDAyLjgwNUwzODYuMDQ3IDI4OS45MTJDMzk1LjA1NyAyODAuOTAyIDQwMy4xMTkgMjY4LjkzOSA0MDMuMDA5IDI1NS42OTNDNDAzLjExOSAyNDIuNDQ3IDM5NS4wNTcgMjMwLjQ4NCAzODYuMDQ3IDIyMS40NzRMMjczLjE1NCAxMDguNThDMjY2LjcyIDEwMi4xNDYgMjU5LjU1NSA5NS43MTE2IDI0Ny41MTEgOTUuNzExNkMyMzguMzA1IDk1LjcxMTYgMjI5LjEyMiA5NS43MDY5IDIxOS45NDggOTUuNzAyMloiIGZpbGw9IiMwMEYwRkYiLz4KPC9zdmc+Cg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.bitkeep?.solana?.isBitKeep?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.bitkeep.solana;let t;try{t=await e.getAccount()}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const eC=Km,tC=V_,F_="Bitpie";class rC extends la{constructor(e={}){super(),this.name=F_,this.url="https://bitpiecn.com",this.icon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjY0IiB2aWV3Qm94PSIwIDAgNjQgNjQiIHdpZHRoPSI2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMxZTNkYTAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMzNzUwZGUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjUyLjU0NTc1JSIgeDI9IjUyLjU0NTc1JSIgeGxpbms6aHJlZj0iI2EiIHkxPSIxMDAlIiB5Mj0iMCUiLz48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSI1MCUiIHgyPSI1MCUiIHkxPSIwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzFkM2JhMyIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMTczNzkzIiBzdG9wLW9wYWNpdHk9Ii42NTI5MzgiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZCIgeDE9IjUwJSIgeDI9IjUwJSIgeGxpbms6aHJlZj0iI2EiIHkxPSIxMDAlIiB5Mj0iMCUiLz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Im0xOCAwaDI4YzkuOTQxMTI1NSAwIDE4IDguMDU4ODc0NSAxOCAxOHYyOGMwIDkuOTQxMTI1NS04LjA1ODg3NDUgMTgtMTggMThoLTI4Yy05Ljk0MTEyNTUgMC0xOC04LjA1ODg3NDUtMTgtMTh2LTI4YzAtOS45NDExMjU1IDguMDU4ODc0NS0xOCAxOC0xOHoiIGZpbGw9InVybCgjYikiLz48Y2lyY2xlIGN4PSIzMi4yODU3MTQiIGN5PSIzMi4yODU3MTQiIGZpbGw9IiNmZmYiIHI9IjI0LjI4NTcxNCIvPjxwYXRoIGQ9Im0zMiAwYzE3LjY3MzExMiAwIDMyIDE0LjMyNjg4OCAzMiAzMnMtMTQuMzI2ODg4IDMyLTMyIDMyLTMyLTE0LjMyNjg4OC0zMi0zMiAxNC4zMjY4ODgtMzIgMzItMzJ6bS0uMTQzNDk3OCA3LjYwNTM4MTE3Yy0xMy40NzI3NzU5IDAtMjQuMzk0NjE4NzkgMTAuOTIxODQyODMtMjQuMzk0NjE4NzkgMjQuMzk0NjE4ODNzMTAuOTIxODQyODkgMjQuMzk0NjE4OCAyNC4zOTQ2MTg3OSAyNC4zOTQ2MTg4YzEzLjQ3Mjc3NiAwIDI0LjM5NDYxODktMTAuOTIxODQyOCAyNC4zOTQ2MTg5LTI0LjM5NDYxODhzLTEwLjkyMTg0MjktMjQuMzk0NjE4ODMtMjQuMzk0NjE4OS0yNC4zOTQ2MTg4M3oiIGZpbGw9InVybCgjYykiLz48cGF0aCBkPSJtMjkuMDkwOTA5MSA0NC4zNjM2MzY0YzAgMi4wMDgzMDgxLTEuNjI4MDU1NSAzLjYzNjM2MzYtMy42MzYzNjM2IDMuNjM2MzYzNi0yLjAwODMwODIgMC0zLjYzNjM2MzctMS42MjgwNTU1LTMuNjM2MzYzNy0zLjYzNjM2MzZsLS4wMDAxODE4LTIuMTgyNjM2NC0yLjE4MTYzNjQuMDAwODE4MmMtMi4wMDgzMDgxIDAtMy42MzYzNjM2LTEuNjI4MDU1NS0zLjYzNjM2MzYtMy42MzYzNjM3IDAtMi4wMDgzMDgxIDEuNjI4MDU1NS0zLjYzNjM2MzYgMy42MzYzNjM2LTMuNjM2MzYzNmwyLjE4MTYzNjQtLjAwMDA5MDl2LTUuODE5bC0yLjE4MTYzNjQuMDAwOTA5MWMtMi4wMDgzMDgxIDAtMy42MzYzNjM2LTEuNjI4MDU1NS0zLjYzNjM2MzYtMy42MzYzNjM2IDAtMi4wMDgzMDgyIDEuNjI4MDU1NS0zLjYzNjM2MzcgMy42MzYzNjM2LTMuNjM2MzYzN2wyLjE4MTYzNjQtLjAwMDE4MTguMDAwMTgxOC0yLjE4MTYzNjRjMC0yLjAwODMwODEgMS42MjgwNTU1LTMuNjM2MzYzNiAzLjYzNjM2MzctMy42MzYzNjM2IDIuMDA4MzA4MSAwIDMuNjM2MzYzNiAxLjYyODA1NTUgMy42MzYzNjM2IDMuNjM2MzYzNmwtLjAwMDkwOTEgMi4xODE2MzY0aDUuODE5bC4wMDAwOTA5LTIuMTgxNjM2NGMwLTIuMDA4MzA4MSAxLjYyODA1NTUtMy42MzYzNjM2IDMuNjM2MzYzNi0zLjYzNjM2MzYgMi4wMDgzMDgyIDAgMy42MzYzNjM3IDEuNjI4MDU1NSAzLjYzNjM2MzcgMy42MzYzNjM2bC0uMDAwODE4MiAyLjE4MTYzNjQgMi4xODI2MzY0LjAwMDE4MThjMi4wMDgzMDgxIDAgMy42MzYzNjM2IDEuNjI4MDU1NSAzLjYzNjM2MzYgMy42MzYzNjM3IDAgMi4wMDgzMDgxLTEuNjI4MDU1NSAzLjYzNjM2MzYtMy42MzYzNjM2IDMuNjM2MzYzNmwtMi4xODI2MzY0LS4wMDA5MDkxdjUuODE5bDIuMTgyNjM2NC4wMDAwOTA5YzIuMDA4MzA4MSAwIDMuNjM2MzYzNiAxLjYyODA1NTUgMy42MzYzNjM2IDMuNjM2MzYzNiAwIDIuMDA4MzA4Mi0xLjYyODA1NTUgMy42MzYzNjM3LTMuNjM2MzYzNiAzLjYzNjM2MzdsLTIuMTgyNjM2NC0uMDAwODE4Mi4wMDA4MTgyIDIuMTgyNjM2NGMwIDIuMDA4MzA4MS0xLjYyODA1NTUgMy42MzYzNjM2LTMuNjM2MzYzNyAzLjYzNjM2MzYtMi4wMDgzMDgxIDAtMy42MzYzNjM2LTEuNjI4MDU1NS0zLjYzNjM2MzYtMy42MzYzNjM2bC0uMDAwMDkwOS0yLjE4MjYzNjRoLTUuODE5em0tLjAwMDkwOTEtOS40NTQ2MzY0aDUuODE5di01LjgxOWgtNS44MTl6IiBmaWxsPSJ1cmwoI2QpIiB0cmFuc2Zvcm09Im1hdHJpeCguODY2MDI1NCAtLjUgLjUgLjg2NjAyNTQgLTExLjcxMjgxMyAyMC4yODcxODcpIi8+PC9nPjwvc3ZnPg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.bitpie?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.bitpie;let t;try{t=await e.getAccount()}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const H_="Clover";class iC extends Ht{constructor(e={}){super(),this.name=H_,this.url="https://clv.org",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTM2LjQ4IDBIMTEuNTJDNS4xNTc2OCAwIDAgNS4xNTc2OCAwIDExLjUyVjM2LjQ4QzAgNDIuODQyMyA1LjE1NzY4IDQ4IDExLjUyIDQ4SDM2LjQ4QzQyLjg0MjMgNDggNDggNDIuODQyMyA0OCAzNi40OFYxMS41MkM0OCA1LjE1NzY4IDQyLjg0MjMgMCAzNi40OCAwWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzc5MTBfMTYzMzUxKSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI0LjAwMDYgMzkuMzYwNkMzMi40ODM3IDM5LjM2MDYgMzkuMzYwNiAzMi40ODM3IDM5LjM2MDYgMjQuMDAwNkMzOS4zNjA2IDE1LjUxNzUgMzIuNDgzNyA4LjY0MDYyIDI0LjAwMDYgOC42NDA2MkMxNS41MTc1IDguNjQwNjIgOC42NDA2MiAxNS41MTc1IDguNjQwNjIgMjQuMDAwNkM4LjY0MDYyIDMyLjQ4MzcgMTUuNTE3NSAzOS4zNjA2IDI0LjAwMDYgMzkuMzYwNlpNMjEuMjg5OSAxNS44Njg4SDI2LjcxMVYyMS4zNDdIMjEuMjkwNFYyNi42NTRIMjYuNzExVjMyLjEzMjJIMjEuMjg5OVYyNi44MjUySDE1Ljg2OTNWMjEuMzQ3SDIxLjI4OTlWMTUuODY4OFpNMjYuNzEyIDIxLjM0N0gzMi4xMzMxVjI2LjgyNTJIMjYuNzEyVjIxLjM0N1oiIGZpbGw9ImJsYWNrIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfNzkxMF8xNjMzNTEiIHgxPSI0OCIgeTE9Ii0xLjQzMDUxZS0wNiIgeDI9IjEuNDMwNTFlLTA2IiB5Mj0iNDgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0E5RkZFMCIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM4NkQ1RkYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4=",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.clover_solana?.isCloverWallet?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.clover_solana;let t;try{t=await e.getAccount()}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return Uint8Array.from(i)}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}function nC(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<r.length;f++){const g=r.charAt(f),m=g.charCodeAt(0);if(e[m]!==255)throw new TypeError(g+" is ambiguous");e[m]=f}const t=r.length,i=r.charAt(0),s=Math.log(t)/Math.log(256),n=Math.log(256)/Math.log(t);function c(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let g=0,m=0,N=0;const A=f.length;for(;N!==A&&f[N]===0;)N++,g++;const _=(A-N)*n+1>>>0,E=new Uint8Array(_);for(;N!==A;){let D=f[N],C=0;for(let j=_-1;(D!==0||C<m)&&j!==-1;j--,C++)D+=256*E[j]>>>0,E[j]=D%t>>>0,D=D/t>>>0;if(D!==0)throw new Error("Non-zero carry");m=C,N++}let x=_-m;for(;x!==_&&E[x]===0;)x++;let S=i.repeat(g);for(;x<_;++x)S+=r.charAt(E[x]);return S}function l(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let g=0,m=0,N=0;for(;f[g]===i;)m++,g++;const A=(f.length-g)*s+1>>>0,_=new Uint8Array(A);for(;g<f.length;){const D=f.charCodeAt(g);if(D>255)return;let C=e[D];if(C===255)return;let j=0;for(let k=A-1;(C!==0||j<N)&&k!==-1;k--,j++)C+=t*_[k]>>>0,_[k]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");N=j,g++}let E=A-N;for(;E!==A&&_[E]===0;)E++;const x=new Uint8Array(m+(A-E));let S=m;for(;E!==A;)x[S++]=_[E++];return x}function u(f){const g=l(f);if(g)return g;throw new Error("Non-base"+t+" character")}return{encode:c,decodeUnsafe:l,decode:u}}var sC="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const xd=nC(sC),Z_="Coin98";class aC extends Ht{constructor(e={}){super(),this.name=Z_,this.url="https://coin98.com",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3NiA3NSI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIxMDEuNjgxJSIgeDI9Ii0xLjU1NyUiIHkxPSIxNS4yNjglIiB5Mj0iODQuOTE3JSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGMUQ5NjEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjQ0RBMTQ2Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPHJlY3Qgd2lkdGg9Ijc1IiBoZWlnaHQ9Ijc1IiBmaWxsPSIjMDAwIiByeD0iMTYiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjYSkiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTYxLjQ0IDBhMTMuNzE0IDEzLjcxNCAwIDAgMSA5LjY4IDQuMDEgMTMuNjYxIDEzLjY2MSAwIDAgMSA0LjAwOCA5LjY2OHY0Ny42NDZhMTMuNjYgMTMuNjYgMCAwIDEtNC4wMDcgOS42NjZBMTMuNzEzIDEzLjcxMyAwIDAgMSA2MS40NCA3NUgxMy42ODZhMTMuNzEzIDEzLjcxMyAwIDAgMS05LjY4LTQuMDFBMTMuNjYgMTMuNjYgMCAwIDEgMCA2MS4zMjRWMTMuNjc4YzAtMy42MjUgMS40NC03LjEwMiA0LjAwNy05LjY2N0ExMy43MTQgMTMuNzE0IDAgMCAxIDEzLjY4NyAwWk0yMC4wNjMgNDYuMjMxaC00LjgyNWExMC4wMzIgMTAuMDMyIDAgMCAwIDIuOTQ2IDcuMDg2IDEwLjA3IDEwLjA3IDAgMCAwIDcuMSAyLjk0MiAxMC4wNjUgMTAuMDY1IDAgMCAwIDcuMTA4LTIuOTM1IDEwLjAzIDEwLjAzIDAgMCAwIDIuOTQ2LTcuMDkzaC00LjgyNGE1LjIwNyA1LjIwNyAwIDAgMS0xLjUzIDMuNjg4IDUuMjI1IDUuMjI1IDAgMCAxLTMuNjk2IDEuNTI4IDUuMjM0IDUuMjM0IDAgMCAxLTMuNjk1LTEuNTI4IDUuMjEzIDUuMjEzIDAgMCAxLTEuNTMtMy42ODhaTTU0LjMzIDMzLjcxNmExMS43NjMgMTEuNzYzIDAgMCAwLTEyLjc5OSAyLjUzOEExMS42OTcgMTEuNjk3IDAgMCAwIDM4Ljk5IDQ5LjAzYTExLjcyMyAxMS43MjMgMCAwIDAgNC4zMjggNS4yNTkgMTEuNzU3IDExLjc1NyAwIDAgMCA2LjUyNiAxLjk3IDExLjc2NiAxMS43NjYgMCAwIDAgOC4yOS0zLjQzNSAxMS43MiAxMS43MiAwIDAgMCAzLjQ0Mi04LjI3NCAxMS43MDIgMTEuNzAyIDAgMCAwLTEuOTc1LTYuNTE0IDExLjczNiAxMS43MzYgMCAwIDAtNS4yNjktNC4zMlptLTQuNDg4IDMuOTJhNi45MzcgNi45MzcgMCAwIDEgNC45IDIuMDI1IDYuOTEgNi45MSAwIDAgMSAyLjAyOCA0Ljg5MiA2Ljg5NyA2Ljg5NyAwIDAgMS0xLjE3IDMuODM0IDYuOTMyIDYuOTMyIDAgMCAxLTEwLjY0MyAxLjA0MiA2LjkwMiA2LjkwMiAwIDAgMS0xLjUtNy41MjIgNi45MDkgNi45MDkgMCAwIDEgMi41NDQtMy4xIDYuOTI4IDYuOTI4IDAgMCAxIDMuODQxLTEuMTY3Wm0uMTcgNC41NTJhMi40MzEgMi40MzEgMCAwIDAtMi4yNDEgMS4xNTQgMi40MTggMi40MTggMCAwIDAtLjM1NiAxLjI1NyAyLjM5NSAyLjM5NSAwIDAgMCAxLjYxOSAyLjI5djEuNzUzaDEuNjE4di0xLjc1NGEyLjQyNyAyLjQyNyAwIDAgMCAxLjU5NC0xLjk1IDIuNDE4IDIuNDE4IDAgMCAwLTEtMi4zMSAyLjQzMSAyLjQzMSAwIDAgMC0xLjIzNC0uNDRabS0yMC4yMi0yMi41NTJhMTEuNzYyIDExLjc2MiAwIDAgMC0xMi43OTYgMi41MzEgMTEuNjk3IDExLjY5NyAwIDAgMC0yLjU1NCAxMi43NjkgMTEuNzIzIDExLjcyMyAwIDAgMCA0LjMyIDUuMjYyIDExLjc1NyAxMS43NTcgMCAwIDAgMTQuODI1LTEuNDQ2IDExLjcxNyAxMS43MTcgMCAwIDAgMy40NDUtOC4yODQgMTEuNzAzIDExLjcwMyAwIDAgMC0xLjk3NC02LjUxMiAxMS43MzYgMTEuNzM2IDAgMCAwLTUuMjY2LTQuMzJabS00LjUxIDMuOTE3YTYuOTQ1IDYuOTQ1IDAgMCAxIDQuODk3IDIuMDI5IDYuOTE4IDYuOTE4IDAgMCAxIDIuMDMyIDQuODg2IDYuOTA2IDYuOTA2IDAgMCAxLTEuMTY4IDMuODQyIDYuOTQgNi45NCAwIDAgMS0xMC42NiAxLjA0OCA2LjkxMSA2LjkxMSAwIDAgMS0xLjUtNy41MzYgNi45MTggNi45MTggMCAwIDEgMi41NS0zLjEwMyA2LjkzNyA2LjkzNyAwIDAgMSAzLjg1LTEuMTY2Wm0yNC41Ni00LjgxYTEwLjA1OSAxMC4wNTkgMCAwIDAtNy4xMDMgMi45NCAxMC4wMiAxMC4wMiAwIDAgMC0yLjk0IDcuMDkgOS45IDkuOSAwIDAgMCAxLjIzIDQuNzk1IDEzLjU3NSAxMy41NzUgMCAwIDEgNC4yMTQtMi4zMjIgNS4wODIgNS4wODIgMCAwIDEtLjYyNS0yLjQ3NyA1LjIwNiA1LjIwNiAwIDAgMSAxLjUwMy0zLjczNiA1LjIyMyA1LjIyMyAwIDAgMSAzLjcyMi0xLjU1NCA1LjIzNCA1LjIzNCAwIDAgMSAzLjcyIDEuNTU0IDUuMjEzIDUuMjEzIDAgMCAxIDEuNTA1IDMuNzM2IDUuMjc5IDUuMjc5IDAgMCAxLS42MjMgMi40NzMgMTMuNTc0IDEzLjU3NCAwIDAgMSA0LjIxMyAyLjMyMiA5LjkwMyA5LjkwMyAwIDAgMCAxLjIzLTQuNzk1IDEwLjAzMiAxMC4wMzIgMCAwIDAtMi45NDYtNy4wODYgMTAuMDcgMTAuMDcgMCAwIDAtNy4xLTIuOTRabS0yMy43NSA3Ljk5aC0xLjYxN3YxLjc1YTIuNDE5IDIuNDE5IDAgMCAwLTEuNTgyIDIuNjg3IDIuNDE0IDIuNDE0IDAgMCAwIDIuMzkgMi4wMDYgMi40NSAyLjQ1IDAgMCAwIDEuNTU1LS41NzQgMi40MTQgMi40MTQgMCAwIDAtLjc0Ni00LjExOXYtMS43NVoiLz4KICA8L2c+Cjwvc3ZnPgo=",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.coin98?.sol?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected()}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.coin98.sol;let t;try{t=(await e.connect())[0]}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{const i=await t.request({method:"sol_sign",params:[e]}),s=new ht(i.publicKey),n=xd.decode(i.signature);return e.addSignature(s,We.from(n)),e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{const i=await t.request({method:"sol_signAllTransactions",params:[e]}),s=new ht(i.publicKey),n=i.signatures;return e.map((c,l)=>{const u=xd.decode(n[l]);return c.addSignature(s,We.from(u)),c})}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const i=await t.request({method:"sol_signMessage",params:[e]});return xd.decode(i.signature)}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const G_="Coinbase Wallet";class oC extends Ht{constructor(e={}){super(),this.name=G_,this.url="https://chrome.google.com/webstore/detail/coinbase-wallet-extension/hnfanknocfeofbddgcijnmhnfnkdnaad",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window?.coinbaseSolana?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.coinbaseSolana;try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;Gn(e)?n?.length&&e.sign(n):(e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n)),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const K_="Coinhub";class cC extends la{constructor(e={}){super(),this.name=K_,this.url="https://coinhub.org",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTAwcHgiIGhlaWdodD0iMTAwcHgiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPuefqeW9ojwvdGl0bGU+CiAgICA8ZyBpZD0i6aG16Z2iLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLkuIvovb3pobVpb3MiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMzguMDAwMDAwLCAtOTQuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJDb2luaHViLSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM4LjAwMDAwMCwgOTQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2iIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCI+PC9yZWN0PgogICAgICAgICAgICAgICAgPGcgaWQ9Iue8lue7hCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMy4zMzMzMzMsIDMuMzMzMzMzKSIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTcuOTU2MzU0Miw0MC43MDQ2MzE2IEM1Ny45NTYzNTQyLDQwLjcwNDYzMTYgNjIuNzc2ODc1LDU2LjM0NTIxMDUgODEuNjE1OTg5Niw1OC41MTY2ODQyIEM4NC43MzEzNTQyLDU4Ljg3NTUyNjMgODguMjYwNTIwOCw1OS4yNjM4NDIxIDkxLjg2ODQzNzUsNTguMTg4MDUyNiBDOTIuMDIyMjkxNyw1OC4xOTc2MzE2IDkyLjE3MjUsNTguMjQwNzM2OCA5Mi4zMDgxMjUsNTguMzE0MDUyNiBDOTIuNDQ0MTE0Niw1OC4zODczNjg0IDkyLjU2Mjk2ODgsNTguNDg5MDUyNiA5Mi42NTY2NjY3LDU4LjYxMjg0MjEgQzkyLjc1LDU4LjczNjYzMTYgOTIuODE1OTg5Niw1OC44Nzk1Nzg5IDkyLjg1MDI2MDQsNTkuMDMxMzY4NCBDOTIuODg0NTMxMyw1OS4xODMxNTc5IDkyLjg4NTYyNSw1OS4zNDA0NzM3IDkyLjg1NDI3MDgsNTkuNDkzIEM5Mi4zMjM4MDIxLDYzLjE1MTc4OTUgOTEuMTIzNTkzNyw2Ni42Nzg2ODQyIDg5LjMxNTI2MDQsNjkuODkzNTI2MyBDODQuNzQxMTk3OSw3OC4xMTE4OTQ3IDc0LjY5NTQ2ODgsODguOTgwNjg0MiA1Mi4wMTE4MjI5LDkyLjgwNiBDNTAuODA5MDYyNSw5Mi44MDYgNDguNDMzMDcyOSw5MS43NDAxNTc5IDQ3LjMyOTExNDYsOTEuOTI5NTI2MyBDNDcuMzI5MTE0Niw5MS45MDkyNjMyIDE5Ljk3MjUzMTIsNjcuNjUyMDUyNiA1Ny45NTYzNTQyLDQwLjcwNDYzMTYgWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0NGQkZBMyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01Mi4wMTE0NTgzLDkyLjgwNiBDNTIuMDExNDU4Myw5Mi44MDYgMzIuMTk2NSw2NC4xNzUyNjMyIDYzLjMwOTE2NjcsNDkuNTExIEw1OS40MzQ3Mzk2LDQ0LjQxMDU3ODkgQzU5LjQzNDczOTYsNDQuNDEwNTc4OSAxOS4xNDQxOTc5LDY1LjE5MTM2ODQgNTIuMDExNDU4Myw5Mi44MDYgWiIgaWQ9Iui3r+W+hCIgZmlsbD0iI0I5QTc5OCI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05Mi44NTQ2MzU0LDU5LjUzMzE1NzkgQzkyLjIzOTU4MzMsNjMuMzYxMDUyNiA5MC45NDAyMDgzLDY3LjA0Mzc4OTUgODkuMDE5OTQ3OSw3MC40MDE1Nzg5IEw4My4yNjI0NDc5LDU4LjY5NjEwNTMgQzg1LjkzMDEwNDIsNTkuMDU0OTQ3NCA4OC42Mzk2ODc1LDU4LjkxNjQyMTEgOTEuMjU3NzYwNCw1OC4yODc4OTQ3IEM5Mi41MDk3Mzk2LDU3Ljk5OTA1MjYgOTMuMDUxODc1LDU4LjQxNzIxMDUgOTIuODU0NjM1NCw1OS41MzMxNTc5IFoiIGlkPSLot6/lvoQiIGZpbGw9IiM4QzY3NDIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTkuNzk5Njg3NSw2Ny41MzIzMTU4IEM2Mi4wMTU2MjUsNjcuNTMyMzE1OCA2My44MTE5MjcxLDY1LjcxNzEwNTMgNjMuODExOTI3MSw2My40Nzc4NDIxIEM2My44MTE5MjcxLDYxLjIzODU3ODkgNjIuMDE1NjI1LDU5LjQyMzM2ODQgNTkuNzk5Njg3NSw1OS40MjMzNjg0IEM1Ny41ODM3NSw1OS40MjMzNjg0IDU1Ljc4NzQ0NzksNjEuMjM4NTc4OSA1NS43ODc0NDc5LDYzLjQ3Nzg0MjEgQzU1Ljc4NzQ0NzksNjUuNzE3MTA1MyA1Ny41ODM3NSw2Ny41MzIzMTU4IDU5Ljc5OTY4NzUsNjcuNTMyMzE1OCBaIiBpZD0i6Lev5b6EIiBmaWxsPSIjMjIyMjIyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYwLjU1OTExNDYsNi44MTQwMjEwNSBMNjMuODkxMDQxNywxLjI3NTEzNDc0IEM1OC4yNzI4MTI1LDIuMjE4NjEzMTYgNTIuNzc3MDgzMywzLjc5NTg0MjExIDQ3LjUwNjY2NjcsNS45NzcxODk0NyBDNDYuMTIzODAyMSw2LjEwODQ5NDc0IDQ0Ljc0ODU5MzcsNi4zMTEzMTA1MyA0My4zODYxNDU4LDYuNTg0ODYzMTYgTDUwLjA2MDIwODMsMy40NjI0NjIyOWUtMTMgQzQzLjQ2MzA3MjksMS42MzEzMDk0NyAzNy40ODkzNzUsNS4xOTM3NDIxMSAzMi44ODcwNTczLDEwLjI0MDkyNjMgQzMyLjIwNjgxNzcsMTAuNTc5NjUyNiAzMS41MzY0NTgzLDEwLjk0ODI1NzkgMzAuOTE1MzkwNiwxMS4zMzY3NTc5IEwzNi4xNTAxMTQ2LDEuNTkzOTI1NzkgQzI5LjA0OTE5NzksNS40NjMyNDIxMSAyMy40ODAzMzMzLDExLjY4MTYzNjggMjAuMzc2OTYzNSwxOS4yMDY3NDc0IEwyMy42MTA0NTMxLDcuODUwMDU3ODkgQzIzLjYxMDQ1MzEsNy44NTAwNTc4OSAxNS40Mzc5ODk2LDE0LjEwNjIxNTggMTMuOTg4ODQzNywyOS41MzczNDc0IEMxMy44MDE1MjA4LDI5LjkxNTkgMTMuNjE0MTk3OSwzMC4yOTQ0NTI2IDEzLjQzNjc1NTIsMzAuNjgyOTUyNiBMMTIuNTQ5NTQxNywxNi44NTU3MDUzIEMxMi41NDk1NDE3LDE2Ljg1NTcwNTMgNC42MDM4MTI1LDI5LjY1Njg2MzIgOS43MTAzNDg5Niw0NC4xMzE2ODQyIEw0LjE2MDE4NzUsMzAuMTg0ODQ3NCBDNC4xNjAxODc1LDMwLjE4NDg0NzQgMC43MTk2NTEwNDIsNDEuMTQzMDUyNiA5LjA4OTI4MTI1LDU1LjM0OSBMLTIuNzYzMjIxNzVlLTE0LDQ0LjcwOTM2ODQgQy0yLjc2MzIyMTc1ZS0xNCw0NC43MDkzNjg0IDAuODc3MzgwNzI5LDYzLjA2OTI2MzIgMTEuMjY3OTU4Myw3My4wMDE1MjYzIEMxMS4yNjc5NTgzLDczLjAwMTUyNjMgMTUuMDA0MjA4Myw3MS44NzYgMTcuMzAxMTkyNyw3NC41NDU1Nzg5IEMyMC45NjAyMjQsNzkuOTIzNDIxMSAyNS44MDI5NDc5LDg0LjM3MSAzMS40NDkxNzcxLDg3LjUzOTQyMTEgQzM3LjA5NTI2MDQsOTAuNzA3NDczNyA0My4zOTE2MTQ2LDkyLjUxMDUyNjMgNDkuODQzMjgxMiw5Mi44MDYgQzUwLjM4NTQxNjcsOTIuODA2IDUxLjQ2OTY4NzUsOTIuODA2IDUxLjQ2OTY4NzUsOTIuODA2IEM1MS40Njk2ODc1LDkyLjgwNiAzMi4xODcwOTM3LDc1Ljk4MDIxMDUgNTAuNzY5Njg3NSw1MS45NjE3MzY4IEM2OS4zNjIzNDM3LDI5Ljg1NjEwNTMgOTMuMzg2OTI3MSw0NS4yMjczNjg0IDkzLjE2MDE1NjIsNDMuMjQ0ODk0NyBDOTIuMDM3NjA0MiwzNC41NDI2Nzg5IDg4LjMxNTU3MjksMjYuMzkzMjA1MyA4Mi40OTA2MjUsMTkuODgzOTc4OSBDNzYuNjY1Njc3MSwxMy4zNzQ3NTI2IDY5LjAxNDg5NTgsOC44MTUzMjEwNSA2MC41NTkxMTQ2LDYuODE0MDIxMDUgTDYwLjU1OTExNDYsNi44MTQwMjEwNSBaIiBpZD0i6Lev5b6EIiBmaWxsPSIjMjJBMDc5Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQzLjM0NjQwNjMsNzguNTgwMTU3OSBDNDMuMzQ2NDA2Myw3OC41ODAxNTc5IDIyLjA2MjQzMjMsODYuMDgxNTc4OSAyLjI4NjgzNDM4LDU3LjAzMjMxNTggQzQuNDA4MTc3MDgsNjQuNjU0MjEwNSA4LjIwNjE1MTA0LDcxLjY5MzI2MzIgMTMuMzk3MDUyMSw3Ny42MjM3MzY4IEMyMC42MjMxMzAyLDg2LjAyMTg5NDcgMzQuOTc2NzM5Niw5My4zMTQwNTI2IDUyLjAxMTgyMjksOTIuNzg2MTA1MyBDNDkuOTUzNzUsOTEuMTc5NDIxMSA0OC4yMzcyOTE3LDg5LjE3MDQyMTEgNDYuOTY0MTY2Nyw4Ni44Nzg0NzM3IEM0NS40OTM4MDIxLDg0LjIzOCA0NC4yODE5MjcxLDgxLjQ1OSA0My4zNDY0MDYzLDc4LjU4MDE1NzkgTDQzLjM0NjQwNjMsNzguNTgwMTU3OSBaIiBpZD0i6Lev5b6EIiBmaWxsPSIjMUI4MDYxIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.coinhub?.isCoinhubWallet?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.coinhub;let t;try{t=await e.getAccount()}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const J_="Fractal";class hC extends Ht{constructor(e={}){super(),this.name=J_,this.url="https://developers.fractal.is/wallet-adapters/solana",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAwIDEwMDAiPjxwYXRoIGQ9Ik0zNDIuMjQgNzYzLjkzVjI0My44Mkg3MTV2MTEyLjY5SDQ4MXYxMTUuNThoMTgydjExMi42OUg0ODF2MTc5LjE1WiIgc3R5bGU9ImZpbGw6I2RlMzU5YyIvPjwvc3ZnPg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.Loadable,this._connecting=!1,this._wallet=null,this._publicKey=null}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Loadable)throw new yt;this._connecting=!0;let e;try{e=(await pn(async()=>{const{FractalWalletAdapterImpl:n}=await import("./index-Bhwa85yy.js");return{FractalWalletAdapterImpl:n}},__vite__mapDeps([0,1,2,3,4,5,6,7]))).FractalWalletAdapterImpl}catch(n){throw new ua(n?.message,n)}let t;try{t=new e}catch(n){throw new Qa(n?.message,n)}if(!t.getPublicKey())try{await t.connect()}catch(n){throw new Tr(n?.message,n)}let s;try{s=new ht(t.getPublicKey().toBytes())}catch(n){throw new ut(n?.message,n)}this._wallet=t,this._publicKey=s,this.emit("connect",s)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return t.signTransaction(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return t.signAllTransactions(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{return t.signMessage(e)}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const X_="HuobiWallet";class lC extends Ht{constructor(e={}){super(),this.name=X_,this.url="https://www.huobiwallet.io",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjI0IiBoZWlnaHQ9IjIyNCIgdmlld0JveD0iMCAwIDIyNCAyMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAwTDIyNCAwVjIyNEgwTDAgMFoiIGZpbGw9IiMyMTU3RTIiLz4KPHBhdGggZD0iTTEzMS4wNTkgODEuMTc3MUMxMzEuMDU5IDU3Ljc1MzEgMTE5LjQ1OCAzNy42MzE1IDExMC42MjUgMzEuMDcyOEMxMTAuNjI1IDMxLjA3MjggMTA5Ljk1MyAzMC43MDQyIDExMCAzMS42MjU4VjMxLjYyNThDMTA5LjI2NSA3Ni44MzAzIDg1Ljc2NzIgODkuMDg3NSA3Mi44MzggMTA1LjU4NEM0My4wMjQxIDE0My42NzcgNzAuNzU4NyAxODUuNDU2IDk4Ljk5MzUgMTkzLjEzNkMxMTQuNzk5IDE5Ny40NTIgOTUuMzUwOCAxODUuNDU2IDkyLjg0OTQgMTYwLjIzNUM4OS44MDA3IDEyOS43NDUgMTMxLjA1OSAxMDYuNDQ0IDEzMS4wNTkgODEuMTc3MVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8xMTAxXzEyNSkiLz4KPHBhdGggZD0iTTE0My41OTcgOTYuMzE3NEMxNDMuNDA5IDk2LjE5NDMgMTQzLjE1OCA5Ni4xMDIgMTQyLjk4NiA5Ni4zOTQzQzE0Mi40ODQgMTAyLjEwMiAxMzYuNTYgMTE0LjI4NiAxMjkuMDM3IDEyNS40ODZDMTAzLjU1MiAxNjMuNDU1IDExOC4wNjUgMTgxLjc2MiAxMjYuMjQ3IDE5MS42MzlDMTMwLjk0OSAxOTcuMzQ3IDEyNi4yNDcgMTkxLjYzOSAxMzguMDk2IDE4NS44MDhDMTUyLjczNSAxNzcuMDkyIDE2Mi4yMzQgMTYyLjAyIDE2My42NDMgMTQ1LjI3QzE2NS4yMzMgMTI2Ljc1OCAxNTcuNzk4IDEwOC42IDE0My41OTcgOTYuMzE3NFoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcl8xMTAxXzEyNSkiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMTAxXzEyNSIgeDE9IjEyMi40MDEiIHkxPSIyMDkuMjk1IiB4Mj0iMTc4LjY2MiIgeTI9IjExMC40NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y3RjZGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8xMTAxXzEyNSIgeDE9IjE1Ny44NjEiIHkxPSIyMDMuMTc3IiB4Mj0iMTg5LjAxNCIgeTI9IjE0MC4wMjIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y3RjZGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.huobiWallet?.isHuobiWallet?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.huobiWallet;try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("disconnect"))}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const eE="HyperPay";class uC extends Ht{constructor(e={}){super(),this.name=eE,this.url="https://hyperpay.io",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTIwcHgiIGhlaWdodD0iNTIwcHgiIHZpZXdCb3g9IjAgMCA1MjAgNTIwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPkh5cGVyUGF5PC90aXRsZT4KICAgIDxnIGlkPSLpobXpnaItMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9Iue8lue7hC0zMyIgZmlsbD0iIzFBNzJGRSIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTI2MCwwIEM0MDMuNTIsMCA1MjAsMTE1Ljk0MTI1NSA1MjAsMjU5LjY1Mjg3IEM1MjAsNDAzLjM2NDQ4NiA0MDMuNTIsNTIwIDI2MCw1MjAgQzExNi40OCw1MjAgMCw0MDQuMDU4NzQ1IDAsMjYwLjM0NzEzIEMwLDExNi42MzU1MTQgMTE2LjQ4LDAgMjYwLDAgWiBNMTIzLjQ2Mzk4NSwxMjIuNjQ3NzM3IEwxMjMuNDEzMzMzLDEyMi42NDc1MyBMMTA2LjA4LDE4My42MjQ4MzMgTDIyMS44NjY2NjcsMTgzLjYyNDgzMyBMMjA4LDI0OC43NTk2OCBMMjc5LjQxMzMzMywyNDguNzU5NjggTDI3OS40MTMzMzMsMjQ4Ljc1OTY4IEwyNzkuNDEzODUzLDI0OC43MDU5NzggQzI3OS40MjM3MzMsMjQ4LjAxNDc4NiAyNzkuNjIxMzMzLDI0MC40NDQ1OTMgMjgzLjU3MzMzMywyMTQuMTEzNDg1IEMyODkuODEzMzMzLDE3MC40NTkyNzkgMzY1LjM4NjY2NywxNjcuNjg3NTgzIDM2NC42OTMzMzMsMjE2Ljg4NTE4IEMzNjQsMjUyLjkxNzIyMyAzMzYuMjY2NjY3LDI1Ny4wNzQ3NjYgMzE4LjI0LDI1Ny43Njc2OSBDMzEyLjQ3MTQ2NywyNTcuOTg5NDI2IDI4Ni4xODQ3MDQsMjU4LjA2OTI1MSAyNTMuMTAyMDc3LDI1OC4wNzUyODIgTDI0My42Mjk3MDcsMjU4LjA3NTA4OSBDMTc0LjA4NzMzMywyNTguMDYwNDUxIDgxLjgxMzMzMzMsMjU3Ljc2NzY5IDgxLjgxMzMzMzMsMjU3Ljc2NzY5IEw4MS44MTMzMzMzLDI1Ny43Njc2OSBMNjEuNzA2NjY2NywzMTguMDUyMDY5IEwxODcuMiwzMTguMDUyMDY5IEwxNjguNDgsMzkxLjUwMjAwMyBMMjQ4LjkwNjY2NywzOTEuNTAyMDAzIEwyNjguMzIsMzE2LjY2NjIyMiBDMjY4LjMyLDMxNi42NjYyMjIgMjgzLjc5NTIsMzE2LjQxNjc2OSAyOTkuOTE5MzYsMzE2LjIxNzIwNyBMMzAyLjM0MDk5OCwzMTYuMTg3Njg0IEMzMTIuMzAxMzkyLDMxNi4wNjgxNTkgMzIyLjIyNjY2NywzMTUuOTczMjk4IDMyOC42NCwzMTUuOTczMjk4IEMzNTkuODQsMzE1Ljk3MzI5OCA0NDIuMzQ2NjY3LDI5NS44Nzg1MDUgNDQyLjM0NjY2NywyMDkuOTU1OTQxIEM0NDIuMzQ2NjY3LDEzMS42NTU1NDEgMzU3LjA2NjY2NywxMjMuMzQwNDU0IDMyNS4xNzMzMzMsMTIzLjM0MDQ1NCBDMjkzLjI4LDEyMy4zNDA0NTQgMTIzLjQxMzMzMywxMjIuNjQ3NTMgMTIzLjQxMzMzMywxMjIuNjQ3NTMgWiIgaWQ9IuW9oueKtue7k+WQiCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.hyperPay?.solana?.isHyperPay?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.hyperPay.solana;try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("disconnect"))}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const tE="Keystone";class fC extends Ht{get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}constructor(e={}){super(),this.name=tE,this.url="https://keyst.one",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjE2IiBmaWxsPSJ3aGl0ZSIvPgogICAgPHJlY3QgeD0iNSIgeT0iNSIgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIxIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0LjY5NjUgNS40MzQ4N0MxNS4wOTEgNC43NTMxNiAxNi4wNzQ5IDQuNzUyMTEgMTYuNDcwOCA1LjQzMjk5TDE3LjMzOTggNi45MjcxOUMxNy42NDkgNy40NTg5NiAxNy42NDg3IDguMTE1ODggMTcuMzM4OSA4LjY0NzM0TDkuNjMxMjEgMjEuODcxQzkuMjE4NTEgMjIuNTc5MSA4LjE5NjIzIDIyLjU4MTEgNy43ODA3NiAyMS44NzQ2QzcuNzMxMzIgMjEuNzkwNiA3LjY5MzU4IDIxLjcwMDEgNy42Njg1OCAyMS42MDU4TDcuMzcwODggMjAuNDgyOUM3LjA5MjY2IDE5LjQzMzQgNy4yNDE4IDE4LjMxNjQgNy43ODU2MyAxNy4zNzY3TDE0LjY5NjUgNS40MzQ4N1pNMTIuNjYzNiAxOS4yODU4QzEzLjA2MzUgMTguNTk5NyAxNC4wMDM1IDE4LjQ3NTcgMTQuNTY3NyAxOS4wMzQ1TDE3LjQyODggMjEuODY4NkMxOC44NjA1IDIzLjI4NjcgMTguODU2NSAyNS42MDE2IDE3LjQyIDI3LjAxNDlDMTcuMjA0NSAyNy4yMjY5IDE2Ljg3OTggMjcuMjgyNSAxNi42MDYgMjcuMTU0MkwxMS42MDAyIDI0LjgwODFDMTAuNjkwNyAyNC4zODE5IDEwLjM0MyAyMy4yNjcxIDEwLjg0ODcgMjIuMzk5NEwxMi42NjM2IDE5LjI4NThaTTIwLjQzNSAxNi4zMzcyQzIxLjQ4OTcgMTYuMzM3MiAyMi4xNDc0IDE1LjE5MzkgMjEuNjE3MiAxNC4yODIyTDE5Ljc4MjggMTEuMTI4QzE5LjI1NTggMTAuMjIxOCAxNy45NDcxIDEwLjIyMTIgMTcuNDE5MiAxMS4xMjY5TDE1LjQzMDkgMTQuNTM4MUMxNC45NjYgMTUuMzM1OCAxNS41NDE0IDE2LjMzNzIgMTYuNDY0NyAxNi4zMzcyTDIwLjQzNSAxNi4zMzcyWiIgZmlsbD0iYmxhY2siLz4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjEuNzMwMyAxNy42NDU5QzIyLjg3MTMgMTcuNjQ1OSAyMy45MjYxIDE4LjI1MjcgMjQuNDk5OCAxOS4yMzlWMTkuMjM5QzI0LjY3NjMgMTkuNTQyNyAyNC42MjQ3IDE5LjkyNzQgMjQuMzc0MyAyMC4xNzM3TDIyLjA1MTEgMjIuNDU5QzIxLjQ1MDkgMjMuMDQ5NCAyMC40ODc3IDIzLjA0NzggMTkuODg5NSAyMi40NTUzTDE2LjUxMDEgMTkuMTA3OEMxNS45Njc3IDE4LjU3MDYgMTYuMzQ4MSAxNy42NDU5IDE3LjExMTYgMTcuNjQ1OUwyMS43MzAzIDE3LjY0NTlaIiBmaWxsPSIjMjE2MUZGIi8+Cjwvc3ZnPgo=",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.Loadable,this._keyring=null,this._publicKey=null,this._connecting=!1}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Loadable)throw new yt;this._connecting=!0;let e;try{const{DefaultKeyring:s}=await pn(async()=>{const{DefaultKeyring:n}=await import("./index-Cg58u2IR.js").then(c=>c.i);return{DefaultKeyring:n}},__vite__mapDeps([8,2,3,1,4,9,6]));e=s.getEmptyKeyring()}catch(s){throw new ua(s?.message,s)}let t;try{await e.readKeyring(),t=e.getAccounts()[0].pubKey}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._keyring=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._keyring&&(this._keyring=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{const t=this._keyring,i=this._publicKey;if(!t||!i)throw new Le;try{if(Gn(e)){const s=e.serialize(),n=await t.signTransaction(i.toString(),s);e.addSignature(i,n)}else{const s=e.serializeMessage(),n=await t.signTransaction(i.toString(),s);e.addSignature(i,We.from(n))}return e}catch(s){throw new Ye(s?.message,s)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._keyring,i=this._publicKey?.toString();if(!t||!i)throw new Le;try{return t.signMessage(i,e)}catch(s){throw new Ye(s?.message,s)}}catch(t){throw this.emit("error",t),t}}}const rE="Krystal";class dC extends Ht{constructor(e={}){super(),this.name=rE,this.url="https://krystal.app",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSIjMDEwMTAxIi8+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iMTAwIiBmaWxsPSIjMDEwMTAxIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjkxLjg4NyA4MC44NDA3QzI5MS44ODcgNzUuMDgyNiAyOTcuNTg1IDcxLjA1NzYgMzAzLjAxMiA3Mi45ODJMMzc3LjYxOCA5OS40Mzc2QzM4My4wMyAxMDEuMzU3IDM4NC45MjggMTA4LjA0MyAzODEuMzMxIDExMi41MTlMMzA2LjcyNSAyMDUuMzcyQzMwMS43OTQgMjExLjUxIDI5MS44ODcgMjA4LjAyMyAyOTEuODg3IDIwMC4xNVY4MC44NDA3Wk0xNTIuMzUzIDE3Mi4zM0MxNDYuMjg1IDE3NS44NDYgMTQ3LjAwNiAxODQuODI4IDE1My41NTcgMTg3LjMzM0wyNjYuMTEyIDIzMC4zNTNDMjcxLjU3MSAyMzIuNDQgMjc3LjQyNyAyMjguNDA5IDI3Ny40MjcgMjIyLjU2NVYxMTQuMzE5QzI3Ny40MjcgMTA3Ljg5NSAyNzAuNDY3IDEwMy44ODQgMjY0LjkwOCAxMDcuMTA1TDE1Mi4zNTMgMTcyLjMzWk03Mi41MjcyIDI5MC40NzJDNzIuMDY0MSAyOTYuMTg5IDc3LjM3NzUgMzAwLjY1NSA4Mi45Mjk3IDI5OS4yMTdMMjQ5LjkwNyAyNTUuOTQ1QzI1Ny43NjkgMjUzLjkwOCAyNTguMzc1IDI0Mi45NzcgMjUwLjc4NyAyNDAuMDgzTDkyLjIxMiAxNzkuNjEzQzg3LjAxOTEgMTc3LjYzMyA4MS4zNzg5IDE4MS4xOTEgODAuOTMwMiAxODYuNzNMNzIuNTI3MiAyOTAuNDcyWk0yNDkuOTA4IDI4Ni45M0MyNTIuMTQ2IDI4MC42MjcgMjQ2LjQyNCAyNzQuMzg3IDIzOS45NSAyNzYuMDcyTDEyNy42NDkgMzA1LjMwMkMxMjEuMzU3IDMwNi45MzkgMTE5LjI3NyAzMTQuODI5IDEyMy45NDQgMzE5LjM1NkwxOTkuNzYgMzkyLjkwNEMyMDQuMTE5IDM5Ny4xMzIgMjExLjM5MiAzOTUuNDMyIDIxMy40MjQgMzg5LjcwOEwyNDkuOTA4IDI4Ni45M1pNMzExLjk0MyAyNDQuMTQ3QzMwNS44MzEgMjQyLjg5NiAzMDMuMjA4IDIzNS42MjMgMzA3LjExNCAyMzAuNzU4TDM4NS43MDMgMTMyLjg4MkMzOTAuMTMyIDEyNy4zNjUgMzk4Ljk4NyAxMjkuNTI1IDQwMC4zNzkgMTM2LjQ2MUw0MjQuMjI5IDI1NS4zMTJDNDI1LjQwMyAyNjEuMTY0IDQyMC4yMjggMjY2LjMxOCA0MTQuMzgxIDI2NS4xMjFMMzExLjk0MyAyNDQuMTQ3Wk0zMjEuMjA0IDI2NC4wNjhDMzEzLjI5MSAyNjIuNDQyIDMwNy45MjEgMjcxLjg5MiAzMTMuMzY4IDI3Ny44NThMNDE1Ljc3OSAzOTAuMDMxQzQyMC41NDMgMzk1LjI0OSA0MjkuMjMxIDM5Mi41NDggNDMwLjE5NyAzODUuNTQ5TDQ0Mi40MjIgMjk2LjkzMkM0NDMuMDIyIDI5Mi41OCA0NDAuMTQzIDI4OC41MDkgNDM1Ljg0IDI4Ny42MjVMMzIxLjIwNCAyNjQuMDY4Wk0yNzYuMjQ3IDMwMi44MDhDMjc2LjA3NSAyOTMuNTM3IDI2My4xNzEgMjkxLjQyOCAyNjAuMDU2IDMwMC4xNjFMMjE1LjA1MiA0MjYuMzYyQzIxMi44NzUgNDMyLjQ2NSAyMTguMTg4IDQzOC42MTEgMjI0LjU0MyA0MzcuMzM4TDI3MS43MDcgNDI3Ljg5M0MyNzUuNjYgNDI3LjEwMiAyNzguNDgxIDQyMy41OTUgMjc4LjQwNiA0MTkuNTYzTDI3Ni4yNDcgMzAyLjgwOFpNMjkyLjI5NiAzMDQuMDM2QzI5Mi4xNTMgMjk2LjM2OSAzMDEuNTYzIDI5Mi41OTEgMzA2Ljc2MiAyOTguMjI4TDM4MS43NjUgMzc5LjU2QzM4Ni4yMTggMzg0LjM4OCAzODMuNTk5IDM5Mi4yMyAzNzcuMTM5IDM5My40MTRMMzAzLjkgNDA2LjgzM0MyOTguODQxIDQwNy43NiAyOTQuMTU3IDQwMy45MyAyOTQuMDYxIDM5OC43ODdMMjkyLjI5NiAzMDQuMDM2WiIgZmlsbD0iIzFERTlCNiIvPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.krystal?.solana?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected()}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.krystal.solana;let t;try{t=(await e.connect())[0]}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}var ru={exports:{}},I1;function fa(){if(I1)return ru.exports;I1=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(k,P,Q){return Function.prototype.apply.call(k,P,Q)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:t=function(k){return Object.getOwnPropertyNames(k)};function i(j){console&&console.warn&&console.warn(j)}var s=Number.isNaN||function(k){return k!==k};function n(){n.init.call(this)}ru.exports=n,ru.exports.once=S,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var c=10;function l(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(j){if(typeof j!="number"||j<0||s(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");c=j}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||s(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function u(j){return j._maxListeners===void 0?n.defaultMaxListeners:j._maxListeners}n.prototype.getMaxListeners=function(){return u(this)},n.prototype.emit=function(k){for(var P=[],Q=1;Q<arguments.length;Q++)P.push(arguments[Q]);var F=k==="error",$=this._events;if($!==void 0)F=F&&$.error===void 0;else if(!F)return!1;if(F){var Z;if(P.length>0&&(Z=P[0]),Z instanceof Error)throw Z;var M=new Error("Unhandled error."+(Z?" ("+Z.message+")":""));throw M.context=Z,M}var a=$[k];if(a===void 0)return!1;if(typeof a=="function")e(a,this,P);else for(var h=a.length,d=_(a,h),Q=0;Q<h;++Q)e(d[Q],this,P);return!0};function f(j,k,P,Q){var F,$,Z;if(l(P),$=j._events,$===void 0?($=j._events=Object.create(null),j._eventsCount=0):($.newListener!==void 0&&(j.emit("newListener",k,P.listener?P.listener:P),$=j._events),Z=$[k]),Z===void 0)Z=$[k]=P,++j._eventsCount;else if(typeof Z=="function"?Z=$[k]=Q?[P,Z]:[Z,P]:Q?Z.unshift(P):Z.push(P),F=u(j),F>0&&Z.length>F&&!Z.warned){Z.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+Z.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=j,M.type=k,M.count=Z.length,i(M)}return j}n.prototype.addListener=function(k,P){return f(this,k,P,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(k,P){return f(this,k,P,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(j,k,P){var Q={fired:!1,wrapFn:void 0,target:j,type:k,listener:P},F=g.bind(Q);return F.listener=P,Q.wrapFn=F,F}n.prototype.once=function(k,P){return l(P),this.on(k,m(this,k,P)),this},n.prototype.prependOnceListener=function(k,P){return l(P),this.prependListener(k,m(this,k,P)),this},n.prototype.removeListener=function(k,P){var Q,F,$,Z,M;if(l(P),F=this._events,F===void 0)return this;if(Q=F[k],Q===void 0)return this;if(Q===P||Q.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete F[k],F.removeListener&&this.emit("removeListener",k,Q.listener||P));else if(typeof Q!="function"){for($=-1,Z=Q.length-1;Z>=0;Z--)if(Q[Z]===P||Q[Z].listener===P){M=Q[Z].listener,$=Z;break}if($<0)return this;$===0?Q.shift():E(Q,$),Q.length===1&&(F[k]=Q[0]),F.removeListener!==void 0&&this.emit("removeListener",k,M||P)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(k){var P,Q,F;if(Q=this._events,Q===void 0)return this;if(Q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Q[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Q[k]),this;if(arguments.length===0){var $=Object.keys(Q),Z;for(F=0;F<$.length;++F)Z=$[F],Z!=="removeListener"&&this.removeAllListeners(Z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=Q[k],typeof P=="function")this.removeListener(k,P);else if(P!==void 0)for(F=P.length-1;F>=0;F--)this.removeListener(k,P[F]);return this};function N(j,k,P){var Q=j._events;if(Q===void 0)return[];var F=Q[k];return F===void 0?[]:typeof F=="function"?P?[F.listener||F]:[F]:P?x(F):_(F,F.length)}n.prototype.listeners=function(k){return N(this,k,!0)},n.prototype.rawListeners=function(k){return N(this,k,!1)},n.listenerCount=function(j,k){return typeof j.listenerCount=="function"?j.listenerCount(k):A.call(j,k)},n.prototype.listenerCount=A;function A(j){var k=this._events;if(k!==void 0){var P=k[j];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function _(j,k){for(var P=new Array(k),Q=0;Q<k;++Q)P[Q]=j[Q];return P}function E(j,k){for(;k+1<j.length;k++)j[k]=j[k+1];j.pop()}function x(j){for(var k=new Array(j.length),P=0;P<k.length;++P)k[P]=j[P].listener||j[P];return k}function S(j,k){return new Promise(function(P,Q){function F(Z){j.removeListener(k,$),Q(Z)}function $(){typeof j.removeListener=="function"&&j.removeListener("error",F),P([].slice.call(arguments))}C(j,k,$,{once:!0}),k!=="error"&&D(j,F,{once:!0})})}function D(j,k,P){typeof j.on=="function"&&C(j,"error",k,P)}function C(j,k,P,Q){if(typeof j.on=="function")Q.once?j.once(k,P):j.on(k,P);else if(typeof j.addEventListener=="function")j.addEventListener(k,function F($){Q.once&&j.removeEventListener(k,F),P($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}return ru.exports}var ii=fa();const jc=Vf(ii),pC={},iE=(r,e)=>{pC[r]=e},Ff=r=>{class e extends Error{cause;constructor(i,s,n){if(super(i||r,n),Object.setPrototypeOf(this,e.prototype),this.name=r,s)for(const c in s)this[c]=s[c];if(n&&gC(n)&&"cause"in n&&!this.cause){const c=n.cause;this.cause=c,"stack"in c&&(this.stack=this.stack+`
CAUSE: `+c.stack)}}}return e};function gC(r){return typeof r=="object"}const Cue=Ff("DisconnectedDevice"),Oue=Ff("DisconnectedDeviceDuringOperation"),Lue=Ff("TransportOpenUserCancelled"),zue=Ff("TransportRaceCondition");var A1;(function(r){r.Unknown="Unknown",r.LocationServicesDisabled="LocationServicesDisabled",r.LocationServicesUnauthorized="LocationServicesUnauthorized",r.BluetoothScanStartFailed="BluetoothScanStartFailed"})(A1||(A1={}));class yC extends Error{id;constructor(e,t){const i="TransportError";super(e||i),this.name=i,this.message=e,this.stack=new Error(e).stack,this.id=t}}iE("TransportError",r=>new yC(r.message,r.id));const jh={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063};function wC(r){switch(r){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=r&&r<=28671)return"Internal error, please report"}class _l extends Error{statusCode;statusText;constructor(e,{canBeMappedToChildError:t=!0}={}){const i=Object.keys(jh).find(l=>jh[l]===e)||"UNKNOWN_ERROR",s=wC(e)||i,n=e.toString(16),c=`Ledger device: ${s} (0x${n})`;if(super(c),this.name="TransportStatusError",this.statusCode=e,this.statusText=i,Object.setPrototypeOf(this,_l.prototype),t&&e===jh.LOCKED_DEVICE)return new Jm(c)}}class Jm extends _l{constructor(e){super(jh.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,Jm.prototype)}}iE("TransportStatusError",r=>new _l(r.statusCode));let nE=0;const Zs=[],kue=(r,e,t)=>{const i={type:r,id:String(++nE),date:new Date};e&&(i.message=e),sE(i)},mC=({type:r,message:e,data:t,context:i})=>{const s={type:r,id:String(++nE),date:new Date};e&&(s.message=e),t&&(s.data=t),i&&(s.context=i),sE(s)};class Ju{type;context;constructor(e,t){this.type=e,this.context=t}trace(e,t){mC({type:this.type,message:e,data:t,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context={...this.context,...e}}getType(){return this.type}setType(e){this.type=e}withType(e){return new Ju(e,this.context)}withContext(e){return new Ju(this.type,e)}withUpdatedContext(e){return new Ju(this.type,{...this.context,...e})}}const vC=r=>(Zs.push(r),()=>{const e=Zs.indexOf(r);e!==-1&&(Zs[e]=Zs[Zs.length-1],Zs.pop())});function sE(r){for(let e=0;e<Zs.length;e++)try{Zs[e](r)}catch(t){console.error(t)}}typeof window<"u"&&(window.__ledgerLogsListen=vC);function aE(r,e){const t=r!==void 0?e===void 0?3:4:2,i=We.alloc(1+t*4);let s=i.writeUInt8(t,0);return s=i.writeUInt32BE(iu(44),s),s=i.writeUInt32BE(iu(501),s),r!==void 0&&(s=i.writeUInt32BE(iu(r),s),e!==void 0&&i.writeUInt32BE(iu(e),s)),i}const bC=1<<31>>>0;function iu(r){return(r|bC)>>>0}const MC=5,NC=6,IC=0,AC=1,_C=1,EC=2,nu=255,_1=224;async function DC(r,e){const t=await oE(r,MC,IC,e);return new ht(t)}async function SC(r,e,t){const i=We.alloc(1);i.writeUInt8(1,0);const s=Gn(e)?e.message.serialize():e.serializeMessage(),n=We.concat([i,t,s]);return await oE(r,NC,AC,n)}async function oE(r,e,t,i){let s=0,n=0;if(i.length>nu)for(;i.length-n>nu;){const u=i.slice(n,n+nu);if((await r.send(_1,e,t,s|EC,u)).length!==2)throw new _l(jh.INCORRECT_DATA);s|=_C,n+=nu}const c=i.slice(n),l=await r.send(_1,e,t,s,c);return l.slice(0,l.length-2)}const cE="Ledger";class xC extends la{constructor(e={}){super(),this.name=cE,this.url="https://ledger.com",this.icon="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzUgMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0ibTIzLjU4OCAwaC0xNnYyMS41ODNoMjEuNnYtMTZhNS41ODUgNS41ODUgMCAwIDAgLTUuNi01LjU4M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5KSIvPjxwYXRoIGQ9Im04LjM0MiAwaC0yLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCAtNS41ODUgNS41ODV2Mi43NTdoOC4zNDJ6Ii8+PHBhdGggZD0ibTAgNy41OWg4LjM0MnY4LjM0MmgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUuNzM5KSIvPjxwYXRoIGQ9Im0xNS4xOCAyMy40NTFoMi43NTdhNS41ODUgNS41ODUgMCAwIDAgNS41ODUtNS42di0yLjY3MWgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS40NzggMTEuNDc4KSIvPjxwYXRoIGQ9Im03LjU5IDE1LjE4aDguMzQydjguMzQyaC04LjM0MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5IDExLjQ3OCkiLz48cGF0aCBkPSJtMCAxNS4xOHYyLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCA1LjU4NSA1LjU4NWgyLjc1N3YtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExLjQ3OCkiLz48L2c+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"||typeof navigator>"u"||!navigator.hid?ie.Unsupported:ie.Loadable,this._disconnected=()=>{const t=this._transport;t&&(t.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._derivationPath=e.derivationPath||aE(0,0),this._connecting=!1,this._transport=null,this._publicKey=null}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Loadable)throw new yt;this._connecting=!0;let e;try{e=(await pn(async()=>{const{default:s}=await import("./TransportWebHID-DyHqd2bs.js");return{default:s}},__vite__mapDeps([10,1,2,3,4,11,7]))).default}catch(s){throw new ua(s?.message,s)}let t;try{t=await e.create()}catch(s){throw new Tr(s?.message,s)}let i;try{i=await DC(t,this._derivationPath)}catch(s){throw new ut(s?.message,s)}t.on("disconnect",this._disconnected),this._transport=t,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._transport;if(e){e.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null;try{await e.close()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._transport,i=this._publicKey;if(!t||!i)throw new Le;try{const s=await SC(t,e,this._derivationPath);e.addSignature(i,s)}catch(s){throw new Ye(s?.message,s)}return e}catch(t){throw this.emit("error",t),t}}}const hE="MathWallet";class TC extends la{constructor(e={}){super(),this.name=hE,this.url="https://mathwallet.org",this.icon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIHdpZHRoPSIxMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJtMCAwaDEyOHYxMjhoLTEyOHoiIG9wYWNpdHk9IjAiLz48cGF0aCBkPSJtOTAuODQ3MDA4NiA1Ny43NjEwMDIzYy0yLjI3NzAzNjMtMi4yNzcwMzYzLTIuMjc3MDM2My01Ljk2ODg0MTYgMC04LjI0NTg3NzggMi4yNzcwMzYyLTIuMjc3MDM2MyA1Ljk2ODg0MTUtMi4yNzcwMzYzIDguMjQ1ODc3OCAwIDIuMjc3MDM2NiAyLjI3NzAzNjIgMi4yNzcwMzY2IDUuOTY4ODQxNSAwIDguMjQ1ODc3OC0yLjI3NzAzNjMgMi4yNzcwMzYyLTUuOTY4ODQxNiAyLjI3NzAzNjItOC4yNDU4Nzc4IDB6bS0xOS41ODM5NTk4IDE5LjU4Mzk1OTdjLTEuNzA3Nzc3Mi0xLjcwNzc3NzItMS43MDc3NzcyLTQuNDc2NjMxMSAwLTYuMTg0NDA4M3M0LjQ3NjYzMTEtMS43MDc3NzcyIDYuMTg0NDA4MyAwIDEuNzA3Nzc3MiA0LjQ3NjYzMTEgMCA2LjE4NDQwODMtNC40NzY2MzExIDEuNzA3Nzc3Mi02LjE4NDQwODMgMHptMzAuOTIyMDQyMi0xMC4zMDczNDcyYy0xLjcwNzc3OC0xLjcwNzc3NzItMS43MDc3NzgtNC40NzY2MzEyIDAtNi4xODQ0MDg0IDEuNzA3Nzc3LTEuNzA3Nzc3MiA0LjQ3NjYzMS0xLjcwNzc3NzIgNi4xODQ0MDggMHMxLjcwNzc3NyA0LjQ3NjYzMTIgMCA2LjE4NDQwODQtNC40NzY2MzEgMS43MDc3NzcyLTYuMTg0NDA4IDB6bS0xMC4zMDczNDc3IDEwLjMwNzM0NzJjLTEuNzA3Nzc3Mi0xLjcwNzc3NzItMS43MDc3NzcyLTQuNDc2NjMxMSAwLTYuMTg0NDA4M3M0LjQ3NjYzMTEtMS43MDc3NzcyIDYuMTg0NDA4MyAwIDEuNzA3Nzc3MiA0LjQ3NjYzMTEgMCA2LjE4NDQwODMtNC40NzY2MzExIDEuNzA3Nzc3Mi02LjE4NDQwODMgMHptMjEuNjQ1NDI4Ny0xLjAzMDczNDdjLTEuMTM4NTE4LTEuMTM4NTE4MS0xLjEzODUxOC0yLjk4NDQyMDggMC00LjEyMjkzODkgMS4xMzg1MTktMS4xMzg1MTgxIDIuOTg0NDIxLTEuMTM4NTE4MSA0LjEyMjkzOSAwIDEuMTM4NTE5IDEuMTM4NTE4MSAxLjEzODUxOSAyLjk4NDQyMDggMCA0LjEyMjkzODktMS4xMzg1MTggMS4xMzg1MTgxLTIuOTg0NDIgMS4xMzg1MTgxLTQuMTIyOTM5IDB6bS0xMC4zMDczNDcgMTAuMzA3MzQ3MmMtMS4xMzg1MTgtMS4xMzg1MTgxLTEuMTM4NTE4LTIuOTg0NDIwNyAwLTQuMTIyOTM4OSAxLjEzODUxOC0xLjEzODUxODEgMi45ODQ0MjEtMS4xMzg1MTgxIDQuMTIyOTM5IDAgMS4xMzg1MTggMS4xMzg1MTgyIDEuMTM4NTE4IDIuOTg0NDIwOCAwIDQuMTIyOTM4OS0xLjEzODUxOCAxLjEzODUxODItMi45ODQ0MjEgMS4xMzg1MTgyLTQuMTIyOTM5IDB6bS0yMi42NzYxNjM3LTE4LjU1MzIyNWMtMi4yNzcwMzYzLTIuMjc3MDM2My0yLjI3NzAzNjMtNS45Njg4NDE1IDAtOC4yNDU4Nzc4czUuOTY4ODQxNS0yLjI3NzAzNjMgOC4yNDU4Nzc4IDAgMi4yNzcwMzYzIDUuOTY4ODQxNSAwIDguMjQ1ODc3OC01Ljk2ODg0MTUgMi4yNzcwMzYzLTguMjQ1ODc3OCAwem0wLTIwLjYxNDY5NDVjLTIuMjc3MDM2My0yLjI3NzAzNjMtMi4yNzcwMzYzLTUuOTY4ODQxNSAwLTguMjQ1ODc3OHM1Ljk2ODg0MTUtMi4yNzcwMzYzIDguMjQ1ODc3OCAwIDIuMjc3MDM2MyA1Ljk2ODg0MTUgMCA4LjI0NTg3NzgtNS45Njg4NDE1IDIuMjc3MDM2My04LjI0NTg3NzggMHptLTEwLjMwNzM0NzIgMTAuMzA3MzQ3M2MtMi4yNzcwMzYzLTIuMjc3MDM2My0yLjI3NzAzNjMtNS45Njg4NDE2IDAtOC4yNDU4Nzc4IDIuMjc3MDM2Mi0yLjI3NzAzNjMgNS45Njg4NDE1LTIuMjc3MDM2MyA4LjI0NTg3NzggMCAyLjI3NzAzNjIgMi4yNzcwMzYyIDIuMjc3MDM2MiA1Ljk2ODg0MTUgMCA4LjI0NTg3NzgtMi4yNzcwMzYzIDIuMjc3MDM2Mi01Ljk2ODg0MTYgMi4yNzcwMzYyLTguMjQ1ODc3OCAwem0tMjAuNzEwNTA2IDBjLTIuMjc3MDM2Mi0yLjI3NzAzNjMtMi4yNzcwMzYyLTUuOTY4ODQxNiAwLTguMjQ1ODc3OCAyLjI3NzAzNjMtMi4yNzcwMzYzIDUuOTY4ODQxNi0yLjI3NzAzNjMgOC4yNDU4Nzc4IDAgMi4yNzcwMzYzIDIuMjc3MDM2MiAyLjI3NzAzNjMgNS45Njg4NDE1IDAgOC4yNDU4Nzc4LTIuMjc3MDM2MiAyLjI3NzAzNjItNS45Njg4NDE1IDIuMjc3MDM2Mi04LjI0NTg3NzggMHptLTE5LjU4Mzk1OTcgMTkuNTgzOTU5N2MtMS43MDc3NzcyLTEuNzA3Nzc3Mi0xLjcwNzc3NzItNC40NzY2MzExIDAtNi4xODQ0MDgzczQuNDc2NjMxMS0xLjcwNzc3NzIgNi4xODQ0MDgzIDAgMS43MDc3NzcyIDQuNDc2NjMxMSAwIDYuMTg0NDA4My00LjQ3NjYzMTEgMS43MDc3NzcyLTYuMTg0NDA4MyAwem0zMC45MjIwNDE3LTEwLjMwNzM0NzJjLTEuNzA3Nzc3Mi0xLjcwNzc3NzItMS43MDc3NzcyLTQuNDc2NjMxMiAwLTYuMTg0NDA4NHM0LjQ3NjYzMTItMS43MDc3NzcyIDYuMTg0NDA4NCAwIDEuNzA3Nzc3MiA0LjQ3NjYzMTIgMCA2LjE4NDQwODQtNC40NzY2MzEyIDEuNzA3Nzc3Mi02LjE4NDQwODQgMHptLTEwLjMwNzM0NzIgMTAuMzA3MzQ3MmMtMS43MDc3NzcyLTEuNzA3Nzc3Mi0xLjcwNzc3NzItNC40NzY2MzExIDAtNi4xODQ0MDgzczQuNDc2NjMxMS0xLjcwNzc3NzIgNi4xODQ0MDgzIDAgMS43MDc3NzcyIDQuNDc2NjMxMSAwIDYuMTg0NDA4My00LjQ3NjYzMTEgMS43MDc3NzcyLTYuMTg0NDA4MyAwem0tNDAuMTk4NjU0My0xLjAzMDczNDdjLTEuMTM4NTE4MTMtMS4xMzg1MTgxLTEuMTM4NTE4MTMtMi45ODQ0MjA4IDAtNC4xMjI5Mzg5IDEuMTM4NTE4MS0xLjEzODUxODEgMi45ODQ0MjA4LTEuMTM4NTE4MSA0LjEyMjkzODkgMHMxLjEzODUxODEgMi45ODQ0MjA4IDAgNC4xMjI5Mzg5LTIuOTg0NDIwOCAxLjEzODUxODEtNC4xMjI5Mzg5IDB6bTEwLjMwNzM0NzMgMTAuMzA3MzQ3MmMtMS4xMzg1MTgyLTEuMTM4NTE4MS0xLjEzODUxODItMi45ODQ0MjA3IDAtNC4xMjI5Mzg5IDEuMTM4NTE4MS0xLjEzODUxODEgMi45ODQ0MjA3LTEuMTM4NTE4MSA0LjEyMjkzODggMCAxLjEzODUxODIgMS4xMzg1MTgyIDEuMTM4NTE4MiAyLjk4NDQyMDggMCA0LjEyMjkzODktMS4xMzg1MTgxIDEuMTM4NTE4Mi0yLjk4NDQyMDcgMS4xMzg1MTgyLTQuMTIyOTM4OCAwem00MS4yMjkzODg5IDBjLTEuMTM4NTE4MS0xLjEzODUxODEtMS4xMzg1MTgxLTIuOTg0NDIwNyAwLTQuMTIyOTM4OSAxLjEzODUxODItMS4xMzg1MTgxIDIuOTg0NDIwOC0xLjEzODUxODEgNC4xMjI5Mzg5IDAgMS4xMzg1MTgyIDEuMTM4NTE4MiAxLjEzODUxODIgMi45ODQ0MjA4IDAgNC4xMjI5Mzg5LTEuMTM4NTE4MSAxLjEzODUxODItMi45ODQ0MjA3IDEuMTM4NTE4Mi00LjEyMjkzODkgMHptLTQyLjI2MDEyMzctMTkuNTgzOTU5N2MtMS43MDc3NzcyLTEuNzA3Nzc3Mi0xLjcwNzc3NzItNC40NzY2MzEyIDAtNi4xODQ0MDg0czQuNDc2NjMxMi0xLjcwNzc3NzIgNi4xODQ0MDg0IDAgMS43MDc3NzcyIDQuNDc2NjMxMiAwIDYuMTg0NDA4NC00LjQ3NjYzMTIgMS43MDc3NzcyLTYuMTg0NDA4NCAwem0xOS41ODM5NTk4IDEuMDMwNzM0N2MtMi4yNzcwMzYzLTIuMjc3MDM2My0yLjI3NzAzNjMtNS45Njg4NDE1IDAtOC4yNDU4Nzc4czUuOTY4ODQxNS0yLjI3NzAzNjMgOC4yNDU4Nzc4IDAgMi4yNzcwMzYzIDUuOTY4ODQxNSAwIDguMjQ1ODc3OC01Ljk2ODg0MTUgMi4yNzcwMzYzLTguMjQ1ODc3OCAwem0wLTIwLjYxNDY5NDVjLTIuMjc3MDM2My0yLjI3NzAzNjMtMi4yNzcwMzYzLTUuOTY4ODQxNSAwLTguMjQ1ODc3OHM1Ljk2ODg0MTUtMi4yNzcwMzYzIDguMjQ1ODc3OCAwIDIuMjc3MDM2MyA1Ljk2ODg0MTUgMCA4LjI0NTg3NzgtNS45Njg4NDE1IDIuMjc3MDM2My04LjI0NTg3NzggMHptLTEwLjMwNzM0NzMgMTAuMzA3MzQ3M2MtMi4yNzcwMzYyLTIuMjc3MDM2My0yLjI3NzAzNjItNS45Njg4NDE2IDAtOC4yNDU4Nzc4IDIuMjc3MDM2My0yLjI3NzAzNjMgNS45Njg4NDE2LTIuMjc3MDM2MyA4LjI0NTg3NzggMCAyLjI3NzAzNjMgMi4yNzcwMzYyIDIuMjc3MDM2MyA1Ljk2ODg0MTUgMCA4LjI0NTg3NzgtMi4yNzcwMzYyIDIuMjc3MDM2Mi01Ljk2ODg0MTUgMi4yNzcwMzYyLTguMjQ1ODc3OCAweiIvPjwvZz48L3N2Zz4=",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._messaged=t=>{const i=t.data;i&&i.origin==="mathwallet_internal"&&i.type==="lockStatusChanged"&&!i.payload&&this._disconnected()},this._disconnected=()=>{this._wallet&&(window.removeEventListener("message",this._messaged),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.solana?.isMathWallet?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.solana;let t;try{t=await e.getAccount()}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}window.addEventListener("message",this._messaged),this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(window.removeEventListener("message",this._messaged),this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const lE="Neko";class jC extends Ht{constructor(e={}){super(),this.name=lE,this.url="https://nekowallet.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyNDRweCIgaGVpZ2h0PSIyNjBweCIgdmlld0JveD0iMCAwIDI0NCAyNjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0NCAyNjAiIHhtbDpzcGFjZT0icHJlc2VydmUiPiAgPGltYWdlIGlkPSJpbWFnZTAiIHdpZHRoPSIyNDQiIGhlaWdodD0iMjYwIiB4PSIwIiB5PSIwIgogICAgaHJlZj0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFQUUFBQUVFQ0FNQUFBQW9GT2xoQUFBQUJHZEJUVUVBQUxHUEMveGhCUUFBQUNCalNGSk4KQUFCNkpnQUFnSVFBQVBvQUFBQ0E2QUFBZFRBQUFPcGdBQUE2bUFBQUYzQ2N1bEU4QUFBQjQxQk1WRVVBQUFEL2Z5RC9jQ0QvZ0NyLwpmeXIvZ0VEL2dBRC9iU1QvY0JEM2JCajViUnI0YlJuNGJScjViaHI0YmhuNWJCbjRiaG40YlJyNmJodjNiQmo0YlJyM2NCajRiUm41CmJoci9jUno0Ynh2NWJocjNhQmovY3huNWJocjFhaHYzYkJyL2JSdjNiUnIyYkJ2M2JSdjRiQnI0YmhydmNDRDRiUm40YlJyM2NCajQKYmhmM2JSdjRieG4zYkJyM2JCbjRiQm41YlJyNWJScjRiQm4vZGgzNGJocjZhaHY0YXhuL2RTRDNiaHIzYlJqL2JCMzNhQmowYWh2MwpiUnIvYnhINGJCbjRiUnYvYnhENGJSbjZhaFg0YlJyMWJCbjRiUnI2YmhqNGJScjRiUm40YkJuNGJCcjNiUmo0YmhuNGJCcjRiUnI0CmJodjRiUnY5MnNiN3Y1cjVkaWo2bW1INnJYNzh5S245MGJqOHY1djd0b3o1aUVYKzQ5VCs3T1ArOXZILy8vLzVrVlA1ZGluN28zRDcKdG8zNnBIRDVpRWI1ZnpiKzdlTDdyWC81ZnpmLzl2SCs3ZVA3djV2KzdlSC8vLzcrNU5UN3BIRCs0OVA4dG8zOTJzWDZtMkw1ZnpqLwo5dkQ1Z0RqN3JYNzZwSEg4eUtqKzdPSC8vdjc4djVuNGRpbi85ZkQ4djVyNmlFYjd0b3Y5NDlQOHRveis1TlA5MExmNmtWUDRkeW42CmtWVDZtbUQ0ZGlqOTBiZis3T0Q3dFl2KzlmRDdtbUQ4dnBuOHRZdjgwYmo2bzNEOTVOVDZtbUw3bzNIKzl2RDZpRVg4ckgvNm0ySDcKcllEOTI4WDdtbUg4ckg3N3JIN1dKTE5MQUFBQVQzUlNUbE1BQUFBQUFBQUFBQkJBbjkvdno1QlFiOTlmUWQ0Z3YzOEJqODRnQVlBeApnQUh1a0dIUHpoQncvaUZQWUkrZ29JK2VyNzRCenpCd0FZQmdBU0V3N3hDUWp4QytNTEJRcjErdTNyK3VYNC9Pd0xqT0dBQUFBQUZpClMwZEVYM1BSVVMwQUFBQUpjRWhaY3dBQUN4TUFBQXNUQVFDYW5CZ0FBQUFIZEVsTlJRZm1CaHdHRkNaaGFHR2lBQUFPMTBsRVFWUjQKMnUyZCsyTVVWeFhIbDFacU5vWGF0QW1VaDRhdEJiYUNiVVNMSWxTMFZTeDlPTTAweXo2U3pTNGh6UVBMMGhwVEVaWUVBelZxMGFxawppbS8rVkdkMlp2WTVNK2Q3WnM2ZG05MzAreVBNenIyZm5Edm5mdStkZSsra1Vnd05wWWVmM0dQczJUdWM1dnhLb1hhbG43SXFaT3dkCi9vcXlJcDYyN3U5cTVCbmR2RGJ5c3lQTkNvMnFxZERZUHFOZCszVWpwNTQ3MEZHaGc0Y1VNSThZblJyV3pIeDR1S3RDbytMVVE5M00KdW1QOTJGZDdLalE2SkZ6R0FhTlhPdFBaNDEvenFkQzRiQmxqUGtVWSt6UkNIeG54cVZCR050VFArMEZyRFBXWHZ1NWJJZGxRditCYgp4b2cyYU45QUc4WlJ5VEtPR2Y0NnJvazVJTkJHVnJKOXB3T2c5MGpuUzB5N1h4d0pnSmJzdFlLZ3BmTWxLSi91eW9YK2htQXBKNEtnCnRZUjY5NHRCMWNtZUVDeG1QS2dVNDZRRzZNUGZES3lPWk10N0tiQVVRNEhqSlJRY2FNTjRXYkNjZmNIRkpPOVFRZ0p0VENRRG5iaEQKMmZWc1NHVWtPK3FSa0hLU0R2V1JzTXFNQ2haa2hDblpVQWY1RWtkWnVZTEdRcUgzSmdvZEdtaEpTNVlPaFRhU25Eb0tEN1NrSlNPZwpFM1FvZ1FiVWc1YXpaQ2ZDb1JNMG80RUcxSU9XczJUakJIUmlvUTd6SmRKLy8rZVRLeXBjWWI3RWtad2wreFpWVkVKbWxBNjBvQ1hiClI1YVZ6SHd3SFdqamxGaGhJMlJaaVRnVTN4blFMc2xaTXJxc1JNem90NzlEMXlNalZkZ3h1cXdrUWszNEVrZGlsdXdWQkZwOXFJOEEKVDVtY0pVc0RoYWszbzFDZ2pheFVpNk1NbWFNUnhRNEZDclNjSlJ1SG9CVTdGTXFBZXRDbmhjb2pEWmtqcFdhVUdtazBKV1hKYUVPbQpQdFNBTDNFMElWUWdiY2pjVUtzem80QUJkU1ZseWNDR3BkS013b0VXczJSb2Vlb2NDaDVvS1VzR0dUSkhxaHpLZDlFblRNeVNRWVpNCmFhZ3hYK0pDeXlRV3pKQ3BERFhtUzF4b21iODdac2hjcVRDam5FQkxXYkp4RHJRS004b0p0SlFsQXcyWkszbUhBaHBRVHpLV0REVmsKanNUTktHeEFYVTJJbElwM0YwcENqZnNTUnpLV2pQZUhsamFqREYvaVNNYVNNUXNWTnFQY1FCdVpKd1JLWlJneVY1SU9oUjFvR1V2RwpNV1NPSkIwS3c0QjYwQktQRjhlUWlZZWE1VXRjYUluU1dZWk1PdFFzWCtKQ1MxaXljVDYwOGIwelFqckFMMXZFa3ZFTTJUYVFoQ1hqCkdiSnRvQWtCYUhiNjFDMEpTOFpQSlpvbFljbDBNN0FsWU1uNGhreTNCQ3daMzVEcGxvQWxpMkRJZEVQSHQyUVJESmx1NlBpV2JGdzMKQXg4NnZpWHJPME1tWWNuNnpwQkpXTEsrTTJTV0pkc1Zrem5kZDRiTWNpZnB4Mkl4NzljTkVFblovZC9mSFJsNXFBL2J0cU9EWjZOUwpuK3ZEcHUxcDlPeVhJekUvc3lkKzJmcjA2dkVvRDNaL1BzNHRaZmZ6cWZ1ZDJhWitic2N4V3pwNW1NVThITC9FN2FCaERuV0VtZGZ0CnFXRzhoUTlFMjNaMEVzMW1BOFJzWlRPc3YzNWFkMFZscVk4anc0LytteDhpcU5PMEl4M3JZKy9wcjh4WmFrNTRhT0NZZ2RPckJxYXoKYXRkd2VESWJyQ1RtS1hzODdMRWU2K3VCVmJBeVowT2dCL0NCZG5RdzJLTU1raXZwMG5oUUF4K0xmMjlWZXJkZGs1T1Q3QnNFdnVBaQo5bSthb041ci9XUXFkeWxmc1A0cFh5emxwcm4xdEg4OFU1NnRkR3UyYkJaSzFjdE04SDMrR1p4NmExVUJOZWRWK29yWldkbkMvQlJjCngycHhoaWhtcHZnK2h6dDczTStpa0xZRWhWNXdrV2Q5L2krL0FNWFk5N2U5V3B5L2pGTm5maEFsaTRITVp1UGlwYUJxMDlqTGVReTUKZ1gxbEdhWWU3dzAxbmNYQWV0aXRlOG9NL3YrclMrRlJMc0xFYnJUUlJ1NXp3T1pMNUkvQVdsaVJYUDU1NkJVZmhEemFTM2lVUFYxRApnMzF5Tnp2UUlMUkpNbHM1S0lqNnNnbVYwYVhhRWwxNVd6M2RGaDFvRUhxT1pnNmtmcC8rcGI4K3dKcjQrU2U0Z1FhaEY0enJ3RlY1CnZ3SSs1RGR0VHg5QmFid3JnZjlRQ3JwZy9BSzZ6cWRGWWo4TUVQWmdkeVp3WktRQkZUNVh4U3A1dGFmbmlzVU14anJ6STRZWnc2R24KME1mU2xHV3VWRllBaEk0MU9OQjdhS1RrQWw3M2FzZk5meG1YMmNwbUFNTnJqek9IVjBqQkpieU9IYUZlalo3RG1rSjZydXpyVFdocwoyUlJRN3RVOG81SnR3NjdKcUgxVmh6NEdqUDA0SzQxQjBOVElxRU9sMXExalA5Q09nTWM2NDAzOWc5UDdNaFZyYWJGNTUxOEozUkZvCjRNMkZvK0NpUUdub1p2dVdhZHkyUHFZSDdPZGQ2QmZJSzlWQTMzQnYvR3U1VzVaSWl0SGRyS2t4Y2VpYnJFRFhrSXZvVUx1akRuUngKc3pqMExVNmdiODFEbDVHaGR2MEp1dVJWSExyZUNNc2tOcHk4dlFaZHRrNWkvTGdCamI3VmtJZHU5S3RZNnE3bHNLZWdWcVV3TXZaRApEVy9TRUlldTVlemIzc0d1clU0V29BdnpGRWJqb2Y2SlB1aDVBMDVqOWFsSnpPMlI3YnV4MndGZXVpOFBiZmRadjhHdXJSc0c1dXZyCnBCYzlqNDZ3bEVCWE5xeTdMbUdYV3BuK2hoRDBhNHc4aGtNWDBlazlDeHA4VWl0M0RRUHJzOGptYldjeWZJY2RERDEvandIOUNYYnAKQ2pyay9pM0pZV1V5ZkRFUkRyMkpRLzhPdk5TQy9qMXlYZTBQTlBUcmpNMW1NSFQxVXh3YXpHT1YreUQwSDJrT0szMlBLNEEyd0dIVApCa2hTYWZoMHhNWFFhY3l3SnhLQVdYNCtORGlCc29HUHNERG8rcDhRa0FuR3Zpc0dOSlpvYldpd3g4S2dNV2JqZ2dyb0JXTVpoa1puCkVoRm9rTms0eWxoUXhJQTJzTWxOV2VqUC9neUNqQ3FDeHV5SlpQT3Uvd1ZlMnpIS09QSUFocmF1eGV3Skk1RVZER00xK0g5cm4vMFYKV3RmaEtLc0lHck1uRzR3M0d5Vmo3VUhBUXpPYnorRXJlQlJDWS9hRVlVNHNlMkxGY25xdWFKYmIvN0g4b0xqRlhxdWxDaHF6Snd3YgphdW1xTi8rMU1MM1owSUovazZibkJoVkFOeWJ4SVh1eXdaenpYbHdpbjl5RlMrWXRiZENRUGJHaE9XKy9MSm56d2R6VFczbTc3ZC9YCkJnM1pFOFlrUXB0bThwZXFuZVJUMC9hS1NqZk4xVzVRSUNxZ1AyOWNqZGdUR3hyUFpKMHFtNlpaeU9kTmM2YmMrUjgxTXJHcGdIWmUKUENQMnhJYVdlNUhsaW55a0ZVSWo5bVFEdlpDam14cWhFWHZTZ0VaSDFLRG8xcTBFdXRDNEdyRW5EV2p3dFE0cXVuVXJnWGJmTVFEUAphZ1BhK0pza2MyMk9CbEVJRFhUQURyUm9LZ01DclFUNmpuTTVZRThjYU9QdmNzeElvSlZBdXhZWnNDY3V0T0JUalFSYUpUUmdUMXhvCnVRUU9wRzdGMEhUOFBHandkUzJ0MnhDSUNtalArOUt1b3dtOXhscUFGcWhiMkZ5Q0N1aDU5M3JhbmpTaFJaWkpWaDZDVTBZcW9XbDcKMG9LVzZLeHJINElnS3FCejNnL0kvcmNOV3NDQ2I2QWdLcUNiUzExSWU5SlJ6YmpVTUxOYWFITHBRR2M5NDFIanpHcWgvOEdzNkQragpJOVBUSllxaFd3YUJTc25kMFltOFJlbmhKb05aQ1hTcjQ2RHNTVStUWEgwUWlYbUY4WHBET1RSbHRIeWV3emwrc0djNVRWczk5TC80CjBNWXljMDY0Y3BQMVNrY1ZkT3NYbEQzeHo3Z3M3QUw3cFk1cWFNcWVCSFV6eTNtc2tjL2VZMGM1QVdnaVppRjk2MmFlR29PVWk2eVUKblJ3MFlVL0NEY1Z5cnZUQUxQdjhyRHlUTC9KZXprYUhIaGg5QWIxVDlBWDBUaEVIdXN5Ui95Mm10MHI1d2t6WlRzbmw4b3haS0FWYgppNm5wcldMZTlMbXo5YlBpcFdxTTVLMW16VW1sZDB1NEJWRXRtajJqcnFDNStlb1ZreHFoelJUSmZUbEpRM2VOQWFhMi9DRjhOeFJOClhTbGpoU3plNUkydVZFTjNOTnRxTVNoczlkNVdXbVVOT0ZhaWhGc1I5R0xiejZvaG8rcTczV1h3QjlUTXNiUkM2TmFPc09WUWlxNkYKUU9qcFZKMWlOM0pGME0zOFJCeEYxR20rbzg0V1hadkhJUlJDdTMvN1pXSytxSlpydi8rL295SGJvcmROcTRkMkZsVVpWYXF4dHI5awp2TXlkTWVuUVI1d21yZ2JhZVMxUEw0dGJiMk8rSG9mWmF1SzZsejQ3TTkvQWlSYXQweXBXWXpLenFOVkFnOHl0MThtWEJaYWQ0TlJLCm9HMFBpaXo1Ykw2V21Md2VuNWxCclFUYVlwbEdydk5NNkNUeldNRWdJVWMyS1lPZVJnNmZxN1JNYUl5K3FsUHZZU0NLbGo1ank0WGMKcFVBaXF4QWFvZzlFVUFhZFJ6ZmdPYzFSY3UwY3R1aEVCZlFjMXJnOUV5cld1RzFCRFZ6SnV5elFXemttZEZWMHZUZlV3QlZBZnc1dQp0SFJNS0hjUEJ5WG8wRDE1NkRzb1J0MitLWG9xMXl6WUlKQlFLNENHYy9GZFRxRHo2UDVFSU5TcXBvc1EyVE1JYU9xdTVkQW1VYWNUCnVFYm9oZ2xGNDFlYmZoZHRRZlF5STUzUVZjYWk1enJlbmE5dloyaTdIY0k3TFcvQnA4QUFxVXdqdEIwUmVDUHhDcU52STl1M1J1Z1YKVGllOWdoOGtRT2R2amRDMzhUTjhHanZNWUdneWYrdUR0bDlqNFp1bmJ6TE9uQ1QzTkdpRXJuTDJiakJPVDNET2R0dWUwTFlKeFk5Ngo1a0NUT3puMFFkc21GRDhqbW5IS0ViM0ZWQiswYlVMeFRUb3NhQ3A5NjRObUhRMWdQNlk0OUYwQ1JCOTBUaDAwdFExUEUvVHN6SU9GCkhRTnRMM0RjeWkyNDdtSEFvV2ZOZk1tQzdicWhLdWh0a3NnS3ZqZGtRTi9vUTJqN0tUYUxwYTNxZEljdlZ0UlBVNmU3SkovSUxQcTgKVFcvZkVUZFpuUE9zdHE4ajQ1d0RYR0Y2YjJvamkxNUhwbWlVUlUyZDZJTmVOeml2c1FabFBGM2xwTy83REdqS2hlcWNPV0VkVWNXWgpJeVBQOGRFN1I3Ynpaa1B0UncrZTkxN25YTHFOb1J0dmF0SDJYVitBMzNEb09hVUtsZTBoMWtDVVdnNTlFb0RYbGpxaDdjRVFuSjVLCnFDSFRja3JWOWYrZzBJMnp1RkZIdlhnZHUwN1BLVlVsZENHQ1l4ZUZUeVBUZEVwVkNWeFBWWEdIZ0ZJZkNIUC9rSHBPcVNxQjM4dW8KZUoyTDFMbEZEWkZuaHFxQy9oVHRYSnhFdXlhNHZBZzZzbDhKdElGNkovZWxxdURKaXRoaEowcWcwYzl3ZVBNNllnMGNYQkdyQkJvOAp2TDQ1Q0p5VU9aZ0xYdnVzQmhvOWtNZDd2eWl6YWhBOW1Vc1JOTnkrUFo4c1FWMkRqMGhRQXcxMzFldmV2ZU5UdzZlUktZTkd1K3BXCkZ4T1grdUYvY1JCRjBPZ1hoZG9tTHVOUlgrT2M4WklWL3c2SHN4a09iZDl0bmN4YWpQWEFuN0MyVzJiRW9aMk5hR2dxVzIrZnVmeGYKMUgwTjJNbVpUUjJGUCtXSlFqc2JhbEVyMmpua1g0VzlYRWVZdVNmYm5NSS9kc2lDaGwxV1Y1RDRKM094RCtZeWpKZkZ2NHptUXFQdAp1MmVTbW9jZDVjaW03RS94RDVqeW9OR1BvL204anBpRGQ4dWJqNkljZ21GL1YxNzRFNDhlTkdoRmZWZTZMYytSaDE5WXhQZWlIUU5oCkplOFUvajA0SGpUYVZRZk4yRzQrS3BvQnAyQ1VaL0tQTnFNZmRETEIrUHkwSGkzMEtNNnhMcmFzUnpxVk9nYTM3OEZRcHZIOWFielQKR2doTk5LRHhiNWdPZ3R4dnlqTStlRGdBdXVBdzc2aFFlNEZPcFM3b3JrcHltdkNZVTJNN0pvRm5tb0ZPcFU3cnJreEN5cDVPdFdtSAo1TEkzMnBsVHg1N1VYWjhrZFBGUUIzVHEzQTU0ckROZHpEdWgzOHFlUy9Yb2pPNUtxV1kra2ZKUmVxQmJlQ2FkOHRYWUFHZXppK2RTCkFSb2JXR3QyYWlnVnJOTUQyY1F6cDFPaEdvTm5qL3BIYnh4S1VYcmxUZDJWbE5XYmFSTFppZmJBTlBKWG44S1FiUTJkZVN1VHplcXUKY1R4bHM1bUp0NGRnWkVmbnpyeHo2bWNXZWovcTRzVzMzbms3c0pOSy9SOXZRRFNYcURYRjdRQUFBQ1YwUlZoMFpHRjBaVHBqY21WaApkR1VBTWpBeU1pMHdOaTB5T0ZRd05Eb3lNRG96T0Nzd01qb3dNSmVEK2JFQUFBQWxkRVZZZEdSaGRHVTZiVzlrYVdaNUFESXdNakl0Ck1EWXRNamhVTURRNk1qQTZNemdyTURJNk1ERG0za0VOQUFBQUFFbEZUa1N1UW1DQyIgLz4KPC9zdmc+Cg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.neko?.isNeko?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.neko;if(!e.isConnected)try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const uE="Nightly";class CC extends Ht{constructor(){super(),this.name=uE,this.url="https://nightly.app",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHZpZXdCb3g9IjAgMCA5NiA5NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQ4IDk2Qzc0LjUwOTcgOTYgOTYgNzQuNTA5NyA5NiA0OEM5NiAyMS40OTAzIDc0LjUwOTcgMCA0OCAwQzIxLjQ5MDMgMCAwIDIxLjQ5MDMgMCA0OEMwIDc0LjUwOTcgMjEuNDkwMyA5NiA0OCA5NloiIGZpbGw9IiM2RDczRjgiLz4KPHBhdGggZD0iTTQ4IDg1LjYzNTZDNDggODUuNjM1NiA1Mi40NTMzIDg1LjYzNTYgNTUuNDQgODIuNTg2N0M1OC45MTU1IDc5LjI4MDEgNTcuMzUxMSA3NS40MzEyIDYyLjI3NTUgNzEuNDMxMkM2Ni45ODY2IDY3LjY0NDUgNzIuOTI0NCA3MC4zMzc5IDcyLjkyNDQgNzAuMzM3OUM3Ny4wMjIyIDYyLjEyNDUgNzQuNzkxMSA1Mi41NjkgNzQuNzkxMSA1Mi41NjlDODEuNzY4OCAzNC4yNTc5IDc1Ljk2NDQgMjEuMTU1NyA3NC40NDQ0IDE3LjM2MDFDNjkuNDQ4OCAyNC4zMzc5IDYzLjE5MTEgMjkuMTczNCA1NS43OTU1IDMyLjQwOUM1My4yMjY2IDMxLjcwNjggNTAuNTk1NSAzMS4zMzM0IDQ4IDMxLjM2MDFDNDUuNDEzMyAzMS4zMzM0IDQyLjc3MzMgMzEuNzA2OCA0MC4yMDQ0IDMyLjQwOUMzMi44MTc3IDI5LjE2NDUgMjYuNTUxMSAyNC4zMzc5IDIxLjU1NTUgMTcuMzYwMUMyMC4wMzU1IDIxLjE1NTcgMTQuMjMxMSAzNC4yNTc5IDIxLjIwODkgNTIuNTY5QzIxLjIwODkgNTIuNTY5IDE4Ljk3NzggNjIuMTI0NSAyMy4wNzU1IDcwLjMzNzlDMjMuMDc1NSA3MC4zMzc5IDI5LjAxMzMgNjcuNjQ0NSAzMy43MjQ0IDcxLjQzMTJDMzguNjU3NyA3NS40MzEyIDM3LjA4NDQgNzkuMjgwMSA0MC41NiA4Mi41ODY3QzQzLjU0NjYgODUuNjM1NiA0OCA4NS42MzU2IDQ4IDg1LjYzNTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNDIuNDc5OSA2NS4yOThDNDIuMjkzMyA1OS4yMTggMzYuMzAyMSA1Ny4yNjI0IDMyLjIxMzMgNTkuODIyNEMzMi4yMTMzIDU5LjgyMjQgMzIuODUzMyA2Mi40MzU4IDM1LjgzOTkgNjMuNzUxM0MzOC4yNzU1IDY0LjgyNjkgMzkuMzI0NCA2My4zODY5IDQyLjQ3OTkgNjUuMjk4WiIgZmlsbD0iIzdCODFGOSIvPgo8cGF0aCBkPSJNMjIuNDk3NyAyMy4wOTM1QzIwLjA4ODggMzEuNTQ2OCAyMS4xMjg4IDQyLjI0MDIgMjQuOTMzMyA1MC4wMjY5QzI4LjgyNjYgNDcuMjcxMyAzMi45MTU1IDQzLjAxMzUgMzUuMDkzMyAzOC41MDY5QzI5Ljk2NDQgMzQuNzExMyAyNS42NjIyIDMxLjEwMjQgMjIuNDk3NyAyMy4wOTM1WiIgZmlsbD0iIzdCODFGOSIvPgo8cGF0aCBkPSJNNTMuNTE5OSA2NS4yOThDNTMuNzA2NiA1OS4yMTggNTkuNjk3NyA1Ny4yNjI0IDYzLjc4NjYgNTkuODIyNEM2My43ODY2IDU5LjgyMjQgNjMuMTQ2NiA2Mi40MzU4IDYwLjE1OTkgNjMuNzUxM0M1Ny43MjQzIDY0LjgyNjkgNTYuNjc1NSA2My4zODY5IDUzLjUxOTkgNjUuMjk4WiIgZmlsbD0iIzdCODFGOSIvPgo8cGF0aCBkPSJNNzMuNTAyMiAyMy4wOTM1Qzc1LjkxMTEgMzEuNTQ2OCA3NC44NzExIDQyLjI0MDIgNzEuMDY2NiA1MC4wMjY5QzY3LjE3MzMgNDcuMjcxMyA2My4wODQ0IDQzLjAxMzUgNjAuOTA2NiAzOC41MDY5QzY2LjAzNTUgMzQuNzExMyA3MC4zMzc3IDMxLjEwMjQgNzMuNTAyMiAyMy4wOTM1WiIgZmlsbD0iIzdCODFGOSIvPgo8cGF0aCBkPSJNNDcuOTk5OSA4NS4zMDY5QzUwLjE0MDQgODUuMzA2OSA1MS44NzU1IDgzLjc3ODcgNTEuODc1NSA4MS44OTM2QzUxLjg3NTUgODAuMDA4NCA1MC4xNDA0IDc4LjQ4MDIgNDcuOTk5OSA3OC40ODAyQzQ1Ljg1OTUgNzguNDgwMiA0NC4xMjQ0IDgwLjAwODQgNDQuMTI0NCA4MS44OTM2QzQ0LjEyNDQgODMuNzc4NyA0NS44NTk1IDg1LjMwNjkgNDcuOTk5OSA4NS4zMDY5WiIgZmlsbD0iIzdCODFGOSIvPgo8L3N2Zz4K",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._publicKey=null,this._wallet=null,this._readyState!==ie.Unsupported&&Wt(()=>window?.nightly?.solana?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get connecting(){return this._connecting}get readyState(){return this._readyState}get publicKey(){return this._publicKey}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.nightly.solana;try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(e.publicKey.toString()==="11111111111111111111111111111111")throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch{this.emit("error",new $r)}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{return t.signMessage(new TextDecoder().decode(e))}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const fE="NuFi";class OC extends Ht{constructor(e={}){super(),this.name=fE,this.url="https://nu.fi",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjMiIHZpZXdCb3g9IjAgMCAyMiAyMyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iIzIxMjEyMSIgLz4KPHBhdGggZD0iTTQuMzA5OTkgOS4wMDAwOEM1LjMwODc3IDYuMjA0MDEgNy45ODA2OSA0LjIwMzA4IDExLjEyIDQuMjAzMDhDMTQuMjU5MiA0LjIwMzA4IDE2LjkzMTEgNi4yMDQwMSAxNy45Mjk5IDkuMDAwMDhDMTcuOTc5IDkuMTM3NDcgMTguMTA3NCA5LjIzMjE4IDE4LjI1MzMgOS4yMzIxOEgyMS4wNTk0QzIxLjI3MjUgOS4yMzIxOCAyMS40MzE3IDkuMDM1NzYgMjEuMzc5NCA4LjgyOTE5QzIwLjIxOTUgNC4yNDM2MiAxNi4wNjYgMC44NTAzNDIgMTEuMTIgMC44NTAzNDJDNi4xNzM5MSAwLjg1MDM0MiAyLjAyMDQyIDQuMjQzNjIgMC44NjA0NjggOC44MjkxOEMwLjgwODIxMyA5LjAzNTc2IDAuOTY3NDM0IDkuMjMyMTggMS4xODA1MiA5LjIzMjE4SDMuOTg2NTlDNC4xMzI0OSA5LjIzMjE4IDQuMjYwOTEgOS4xMzc0NyA0LjMwOTk5IDkuMDAwMDhaIiBmaWxsPSIjQzZGRjAwIi8+CjxwYXRoIGQ9Ik0zLjk4NjU5IDEzLjYzMjdDNC4xMzI0OSAxMy42MzI3IDQuMjYwOTEgMTMuNzI3NCA0LjMwOTk5IDEzLjg2NDhDNS4zMDg3NyAxNi42NjA4IDcuOTgwNjkgMTguNjYxOCAxMS4xMiAxOC42NjE4QzE0LjI1OTIgMTguNjYxOCAxNi45MzExIDE2LjY2MDggMTcuOTI5OSAxMy44NjQ4QzE3Ljk3OSAxMy43Mjc0IDE4LjEwNzQgMTMuNjMyNyAxOC4yNTMzIDEzLjYzMjdIMjEuMDU5NEMyMS4yNzI1IDEzLjYzMjcgMjEuNDMxNyAxMy44MjkxIDIxLjM3OTQgMTQuMDM1N0MyMC4yMTk1IDE4LjYyMTIgMTYuMDY2IDIyLjAxNDUgMTEuMTIgMjIuMDE0NUM2LjE3MzkxIDIyLjAxNDUgMi4wMjA0MiAxOC42MjEyIDAuODYwNDY4IDE0LjAzNTdDMC44MDgyMTMgMTMuODI5MSAwLjk2NzQzNCAxMy42MzI3IDEuMTgwNTIgMTMuNjMyN0gzLjk4NjU5WiIgZmlsbD0iI0M2RkYwMCIvPgo8cGF0aCBkPSJNOS4yNTQ5OSA5LjIzMjE4QzkuMDY5ODMgOS4yMzIxOCA4LjkxOTcyIDkuMzgyMjkgOC45MTk3MiA5LjU2NzQ2VjEzLjI5NzRDOC45MTk3MiAxMy40ODI1IDkuMDY5ODMgMTMuNjMyNyA5LjI1NDk5IDEzLjYzMjdIMTIuOTg0OUMxMy4xNzAxIDEzLjYzMjcgMTMuMzIwMiAxMy40ODI1IDEzLjMyMDIgMTMuMjk3NFY5LjU2NzQ2QzEzLjMyMDIgOS4zODIyOSAxMy4xNzAxIDkuMjMyMTggMTIuOTg0OSA5LjIzMjE4SDkuMjU0OTlaIiBmaWxsPSIjQzZGRjAwIi8+Cjwvc3ZnPgo=",this.supportedTransactionVersions=new Set(["legacy",0]),this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._readyState!==ie.Unsupported&&Wt(()=>window.nufiSolana?.isNufi?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.nufiSolana;if(!e.isConnected)try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;Gn(e)?n?.length&&e.sign(n):(e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n)),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const dE="ONTO";class LC extends Ht{constructor(e={}){super(),this.name=dE,this.url="https://onto.app",this.icon="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyODggMjg4Ij4KICA8dGl0bGU+T05UTyBMT0dPXzI4OHgyODg8L3RpdGxlPgogIDxnIGlkPSJMT0dPIj4KICAgIDxwYXRoIGlkPSLlvaLnirbnu5PlkIgiIGQ9Ik0zMCwxMS4xNSw3MS4xOSw1Mi4zMkExMTUsMTE1LDAsMCwxLDI1OCwxMzguNjdMMjU4LDE0MlYyNzYuODVsLTQxLjE5LTQxLjE2QTExNSwxMTUsMCwwLDEsMzAuMDUsMTQ5LjM0TDMwLDE0NlptMjguMTcsNjhWMTQ2YTg2Ljc5LDg2Ljc5LDAsMCwwLDEzNS4xNSw3MmwyLjIzLTEuNTVMNjMuNjcsODQuNjVaTTk0LjY4LDcwbC0yLjIzLDEuNTVMMjI0LjMzLDIwMy4zNmw1LjUsNS41VjE0MkE4Ni43OSw4Ni43OSwwLDAsMCw5NC42OCw3MFoiLz4KICA8L2c+Cjwvc3ZnPg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.onto?.solana?.isONTO?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.onto.solana;let t;try{t=await e.getAccount()}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const pE="Particle";class zC extends Ht{constructor(e={}){super(),this.name=pE,this.url="https://particle.network",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgdmlld0JveD0iMCAwIDE0MCAxNDAiPjxkZWZzPjxmaWx0ZXIgaWQ9ImEiIHg9IjAiIHk9IjAiIHdpZHRoPSIxNDAiIGhlaWdodD0iMTQwIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiPjxmZUltYWdlIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHdpZHRoPSIxNDAiIGhlaWdodD0iMTQwIiByZXN1bHQ9ImltYWdlIiB4bGluazpocmVmPSJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjNhV1IwYUQwaU1UUXdJaUJvWldsbmFIUTlJakUwTUNJZ2RtbGxkMEp2ZUQwaU1DQXdJREUwTUNBeE5EQWlQZ29nSUR4a1pXWnpQZ29nSUNBZ1BITjBlV3hsUGdvZ0lDQWdJQ0F1WTJ4ekxURWdld29nSUNBZ0lDQWdJR1pwYkd3NklIVnliQ2dqYkdsdVpXRnlMV2R5WVdScFpXNTBLVHNLSUNBZ0lDQWdmUW9nSUNBZ1BDOXpkSGxzWlQ0S0lDQWdJRHhzYVc1bFlYSkhjbUZrYVdWdWRDQnBaRDBpYkdsdVpXRnlMV2R5WVdScFpXNTBJaUI0TVQwaU1UUXdJaUI1TVQwaU1UUXdJaUI0TWowaU1DSWdaM0poWkdsbGJuUlZibWwwY3owaWRYTmxjbE53WVdObFQyNVZjMlVpUGdvZ0lDQWdJQ0E4YzNSdmNDQnZabVp6WlhROUlqQWlJSE4wYjNBdFkyOXNiM0k5SWlObE1EUXdaRGNpTHo0S0lDQWdJQ0FnUEhOMGIzQWdiMlptYzJWMFBTSXhJaUJ6ZEc5d0xXTnZiRzl5UFNJak5qSXlOMlUySWk4K0NpQWdJQ0E4TDJ4cGJtVmhja2R5WVdScFpXNTBQZ29nSUR3dlpHVm1jejRLSUNBOGNtVmpkQ0JqYkdGemN6MGlZMnh6TFRFaUlIZHBaSFJvUFNJeE5EQWlJR2hsYVdkb2REMGlNVFF3SWk4K0Nqd3ZjM1puUGdvPSIvPjxmZUNvbXBvc2l0ZSByZXN1bHQ9ImNvbXBvc2l0ZSIgb3BlcmF0b3I9ImluIiBpbjI9IlNvdXJjZUdyYXBoaWMiLz48ZmVCbGVuZCByZXN1bHQ9ImJsZW5kIiBpbjI9IlNvdXJjZUdyYXBoaWMiLz48L2ZpbHRlcj48L2RlZnM+PHJlY3QgZGF0YS1uYW1lPSLlnIbop5Lnn6nlvaIgMSIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiIHJ4PSI0MCIgcnk9IjQwIiBmaWx0ZXI9InVybCgjYSkiLz48cGF0aCBkYXRhLW5hbWU9IuakreWchiAzIOaLt+i0nSIgZD0iTTM0LjkxIDMwLjhhNi42MTQgNi42MTQgMCAxIDAgNi41NTMgNi42MTRBNi41ODQgNi41ODQgMCAwIDAgMzQuOTEgMzAuOHptMTMuNjE1LTcuODJhNi41NTIgNi41NTIgMCAwIDAtOC4yNzIgNC4yNTQgNi42MzkgNi42MzkgMCAwIDAgNC4yMTUgOC4zNDkgNi41NTIgNi41NTIgMCAwIDAgOC4yNzItNC4yNTQgNi42MzkgNi42MzkgMCAwIDAtNC4yMTUtOC4zNDl6bTE1LjMxMS0zLjI0OGE2LjUyNSA2LjUyNSAwIDAgMC05LjE3IDEuNDY4IDYuNjY2IDYuNjY2IDAgMCAwIDEuNDUyIDkuMjU1IDYuNTI1IDYuNTI1IDAgMCAwIDkuMTY5LTEuNDY2IDYuNjY2IDYuNjY2IDAgMCAwLTEuNDUxLTkuMjU3em0xNS41NTYgMS42ODdhNi41MjUgNi41MjUgMCAwIDAtOS4xNjktMS40NjYgNi42NjYgNi42NjYgMCAwIDAtMS40NTIgOS4yNTUgNi41MjUgNi41MjUgMCAwIDAgOS4xNjkgMS40NjYgNi42NjYgNi42NjYgMCAwIDAgMS40NTEtOS4yNTZ6bTE0LjI3OCA2LjQ1NWE2LjU1MiA2LjU1MiAwIDAgMC04LjI3LTQuMjU0IDYuNjM5IDYuNjM5IDAgMCAwLTQuMjE1IDguMzQ5IDYuNTUyIDYuNTUyIDAgMCAwIDguMjcyIDQuMjU0IDYuNjM5IDYuNjM5IDAgMCAwIDQuMjEzLTguMzQ5em0xMS42IDEwLjU5NGE2LjU2NCA2LjU2NCAwIDEgMC02LjU2NCA2LjYyNiA2LjYgNi42IDAgMCAwIDYuNTY2LTYuNjI2em03Ljc5MiAxMy42OTRhNi42MzkgNi42MzkgMCAwIDAtNC4yMTQtOC4zNDkgNi41NTIgNi41NTIgMCAwIDAtOC4yNzIgNC4yNTQgNi42MzkgNi42MzkgMCAwIDAgNC4yMTUgOC4zNDkgNi41NTEgNi41NTEgMCAwIDAgOC4yNzMtNC4yNTN6bTMuMjE4IDE1LjQ1NWE2LjY2NiA2LjY2NiAwIDAgMC0xLjQ1Mi05LjI1NSA2LjUyNSA2LjUyNSAwIDAgMC05LjE2OSAxLjQ2NiA2LjY2NiA2LjY2NiAwIDAgMCAxLjQ1MiA5LjI1NSA2LjUyNSA2LjUyNSAwIDAgMCA5LjE3MS0xLjQ2NnptLTEuNjcxIDE1LjdhNi42NjYgNi42NjYgMCAwIDAgMS40NTItOS4yNTUgNi41MjUgNi41MjUgMCAwIDAtOS4xNjktMS40NjYgNi42NjYgNi42NjYgMCAwIDAtMS40NTIgOS4yNTUgNi41MjUgNi41MjUgMCAwIDAgOS4xNzEgMS40Njh6bS02LjQgMTQuNDEyYTYuNjM4IDYuNjM4IDAgMCAwIDQuMjE0LTguMzQ5IDYuNTUxIDYuNTUxIDAgMCAwLTguMjcxLTQuMjU0IDYuNjM5IDYuNjM5IDAgMCAwLTQuMjE1IDguMzQ5IDYuNTUyIDYuNTUyIDAgMCAwIDguMjc4IDQuMjU2em0tMTAuNSAxMS43MTFhNi42MjYgNi42MjYgMCAxIDAtNi41NjQtNi42MjYgNi42IDYuNiAwIDAgMCA2LjU3NSA2LjYyOHptLTEzLjU2NyA3Ljg2NWE2LjU1MiA2LjU1MiAwIDAgMCA4LjI3Mi00LjI1NCA2LjYzOSA2LjYzOSAwIDAgMC00LjIxNS04LjM0OSA2LjU1MiA2LjU1MiAwIDAgMC04LjI3MiA0LjI1NCA2LjYzOSA2LjYzOSAwIDAgMCA0LjIyNSA4LjM1MXptLTE1LjMxMSAzLjI0OEE2LjUyNSA2LjUyNSAwIDAgMCA3OCAxMTkuMDg3YTYuNjY2IDYuNjY2IDAgMCAwLTEuNDUyLTkuMjU1IDYuNTI1IDYuNTI1IDAgMCAwLTkuMTY5IDEuNDY2IDYuNjY2IDYuNjY2IDAgMCAwIDEuNDYyIDkuMjU3em0tMTUuNTU2LTEuNjg2YTYuNTI1IDYuNTI1IDAgMCAwIDkuMTY5IDEuNDY1IDYuNjY2IDYuNjY2IDAgMCAwIDEuNDUyLTkuMjU1IDYuNTI1IDYuNTI1IDAgMCAwLTkuMTY5LTEuNDY2IDYuNjY3IDYuNjY3IDAgMCAwLTEuNDQxIDkuMjU4em0tMTQuMjc4LTYuNDU3YTYuNTUyIDYuNTUyIDAgMCAwIDguMjcyIDQuMjU1IDYuNjQgNi42NCAwIDAgMCA0LjIxNS04LjM1IDYuNTUyIDYuNTUyIDAgMCAwLTguMjcyLTQuMjU0IDYuNjM5IDYuNjM5IDAgMCAwLTQuMjA1IDguMzUxek0yNy40IDEwMS44MTlhNi41NjUgNi41NjUgMCAxIDAgNi41NjQtNi42MjYgNi42IDYuNiAwIDAgMC02LjU2NCA2LjYyNnptMTguNzgtNTYuNDY2YTMuOTY5IDMuOTY5IDAgMSAwIDMuOTMyIDMuOTY4IDMuOTUgMy45NSAwIDAgMC0zLjkzMi0zLjk2OHptOC40NTUtNS4wMjlhMy45MzEgMy45MzEgMCAwIDAtNC45NjMgMi41NTIgMy45ODMgMy45ODMgMCAwIDAgMi41MjkgNS4wMSAzLjkzMSAzLjkzMSAwIDAgMCA0Ljk2My0yLjU1MiAzLjk4NCAzLjk4NCAwIDAgMC0yLjUyOS01LjAxem05LjUzNy0yLjIzMmEzLjkxNSAzLjkxNSAwIDAgMC01LjUuODggNCA0IDAgMCAwIC44NzEgNS41NTMgMy45MTUgMy45MTUgMCAwIDAgNS41LS44OCA0IDQgMCAwIDAtLjg3MS01LjU1M3ptOS43NTMuODUyYTMuOTE1IDMuOTE1IDAgMCAwLTUuNS0uODggNCA0IDAgMCAwLS44NzEgNS41NTMgMy45MTUgMy45MTUgMCAwIDAgNS41Ljg4IDQgNCAwIDAgMCAuODcxLTUuNTUzem05LjAxNiAzLjg1NmEzLjkzMSAzLjkzMSAwIDAgMC00Ljk2My0yLjU1MyAzLjk4NCAzLjk4NCAwIDAgMC0yLjUyOSA1LjAxIDMuOTMxIDMuOTMxIDAgMCAwIDQuOTYzIDIuNTUzIDMuOTg0IDMuOTg0IDAgMCAwIDIuNTI5LTUuMDF6bTcuMzk1IDYuNDc2YTMuOTM5IDMuOTM5IDAgMSAwLTMuOTM2IDMuOTcyIDMuOTU3IDMuOTU3IDAgMCAwIDMuOTM1LTMuOTc2em01LjA1IDguNDY1YTMuOTgzIDMuOTgzIDAgMCAwLTIuNTI5LTUuMDEgMy45MzEgMy45MzEgMCAwIDAtNC45NjMgMi41NTIgMy45ODQgMy45ODQgMCAwIDAgMi41MjkgNS4wMSAzLjkzMSAzLjkzMSAwIDAgMCA0Ljk2Mi0yLjU1NnptMi4yMTQgOS42MjNhNCA0IDAgMCAwLS44NzEtNS41NTMgMy45MTUgMy45MTUgMCAwIDAtNS41Ljg4IDQgNCAwIDAgMCAuODcxIDUuNTUzIDMuOTE1IDMuOTE1IDAgMCAwIDUuNS0uODh6bS0uODQ0IDkuODQ1YTQgNCAwIDAgMCAuODcxLTUuNTUzIDMuOTE1IDMuOTE1IDAgMCAwLTUuNS0uODggNCA0IDAgMCAwLS44NzEgNS41NTMgMy45MTUgMy45MTUgMCAwIDAgNS40OTcuODh6bS0zLjgxNyA5LjFhMy45ODMgMy45ODMgMCAwIDAgMi41MjktNS4wMSAzLjkzMSAzLjkzMSAwIDAgMC00Ljk2OC0yLjU1MyAzLjk4MyAzLjk4MyAwIDAgMC0yLjUyOSA1LjAwOSAzLjkzMSAzLjkzMSAwIDAgMCA0Ljk2NSAyLjU1M3ptLTYuNDE5IDcuNDYzYTMuOTc2IDMuOTc2IDAgMSAwLTMuOTM4LTMuOTcyIDMuOTU3IDMuOTU3IDAgMCAwIDMuOTM4IDMuOTcyem0tOC4zODcgNS4xYTMuOTMxIDMuOTMxIDAgMCAwIDQuOTY3LTIuNTU1IDMuOTgzIDMuOTgzIDAgMCAwLTIuNTI5LTUuMDFBMy45MzEgMy45MzEgMCAwIDAgNzUuNiA5My44NmEzLjk4MyAzLjk4MyAwIDAgMCAyLjUzNCA1LjAxek02OC42IDEwMS4xYTMuOTE1IDMuOTE1IDAgMCAwIDUuNS0uODggNCA0IDAgMCAwLS44NzEtNS41NTMgMy45MTUgMy45MTUgMCAwIDAtNS41Ljg4IDQgNCAwIDAgMCAuODcxIDUuNTUzem0tOS43NTMtLjg1MmEzLjkxNiAzLjkxNiAwIDAgMCA1LjUuODggNCA0IDAgMCAwIC44NzEtNS41NTQgMy45MTUgMy45MTUgMCAwIDAtNS41LS44OCA0IDQgMCAwIDAtLjg3NSA1LjU1NnpNNDkuODI4IDk2LjRhMy45MzEgMy45MzEgMCAwIDAgNC45NjMgMi41NTMgMy45ODQgMy45ODQgMCAwIDAgMi41MjktNS4wMSAzLjkzMSAzLjkzMSAwIDAgMC00Ljk2My0yLjU1MyAzLjk4MyAzLjk4MyAwIDAgMC0yLjUyOSA1LjAxem0tNy4zOTUtNi40NzZhMy45MzkgMy45MzkgMCAxIDAgMy45MzktMy45NzYgMy45NTcgMy45NTcgMCAwIDAtMy45MzggMy45NzR6TTUzLjUxOSA1Ni4yYTIuMTE3IDIuMTE3IDAgMSAwIDIuMSAyLjExNyAyLjEwNyAyLjEwNyAwIDAgMC0yLjEtMi4xMTd6bTQuNjM5LTIuNzIzYTIuMSAyLjEgMCAwIDAtMi42NDcgMS4zNjEgMi4xMjUgMi4xMjUgMCAwIDAgMS4zNDkgMi42NzIgMi4xIDIuMSAwIDAgMCAyLjY0Ny0xLjM2MSAyLjEyNCAyLjEyNCAwIDAgMC0xLjM0OS0yLjY3MnptNS4yLTEuMjUyYTIuMDg4IDIuMDg4IDAgMCAwLTIuOTM0LjQ2OSAyLjEzMyAyLjEzMyAwIDAgMCAuNDY1IDIuOTYyIDIuMDg4IDIuMDg4IDAgMCAwIDIuOTM0LS40NjkgMi4xMzMgMi4xMzMgMCAwIDAtLjQ3LTIuOTYxem01LjMyNC40M2EyLjA4OCAyLjA4OCAwIDAgMC0yLjkzNC0uNDY5IDIuMTMzIDIuMTMzIDAgMCAwLS40NjUgMi45NjIgMi4wODggMi4wODggMCAwIDAgMi45MzQuNDY5IDIuMTMzIDIuMTMzIDAgMCAwIC40Ni0yLjk2MXptNC45MzIgMi4wN2EyLjEgMi4xIDAgMCAwLTIuNjQ3LTEuMzYxIDIuMTI0IDIuMTI0IDAgMCAwLTEuMzQ5IDIuNjcyQTIuMSAyLjEgMCAwIDAgNzIuMjYgNTcuNGEyLjEyNCAyLjEyNCAwIDAgMCAxLjM0OS0yLjY3NHptNC4wNTcgMy41MDdhMi4xIDIuMSAwIDEgMC0yLjEgMi4xMiAyLjExMSAyLjExMSAwIDAgMCAyLjA5NS0yLjEyem0yLjc4NSA0LjZhMi4xMjUgMi4xMjUgMCAwIDAtMS4zNTYtMi42NzEgMi4xIDIuMSAwIDAgMC0yLjY0NyAxLjM2MSAyLjEyNSAyLjEyNSAwIDAgMCAxLjM0NyAyLjY3MiAyLjEgMi4xIDAgMCAwIDIuNjUxLTEuMzYxem0xLjI0IDUuMjQ0YTIuMTMzIDIuMTMzIDAgMCAwLS40NjUtMi45NjIgMi4wODggMi4wODggMCAwIDAtMi45MzQuNDY5IDIuMTMzIDIuMTMzIDAgMCAwIC40NjUgMi45NjIgMi4wODggMi4wODggMCAwIDAgMi45MjktLjQ2OHptLS40MjYgNS4zNzRhMi4xMzMgMi4xMzMgMCAwIDAgLjQ2NS0yLjk2MiAyLjA4OCAyLjA4OCAwIDAgMC0yLjkzNS0uNDY4IDIuMTMzIDIuMTMzIDAgMCAwLS40NjUgMi45NjIgMi4wODggMi4wODggMCAwIDAgMi45MjkuNDY5em0tMi4wNSA0Ljk3OGEyLjEyNSAyLjEyNSAwIDAgMCAxLjM0OS0yLjY3MiAyLjEgMi4xIDAgMCAwLTIuNjUzLTEuMzU2IDIuMTI0IDIuMTI0IDAgMCAwLTEuMzQ5IDIuNjcyIDIuMSAyLjEgMCAwIDAgMi42NDcgMS4zNTd6bS0zLjQ4IDQuMDk1YTIuMTIgMi4xMiAwIDEgMC0yLjEtMi4xMiAyLjExMSAyLjExMSAwIDAgMCAyLjEgMi4xMnptLTQuNTU4IDIuODExYTIuMSAyLjEgMCAwIDAgMi42NDctMS4zNjFBMi4xMjUgMi4xMjUgMCAwIDAgNzIuNDggODEuM2EyLjEgMi4xIDAgMCAwLTIuNjQ3IDEuMzYxIDIuMTI1IDIuMTI1IDAgMCAwIDEuMzQ5IDIuNjczem0tNS4yIDEuMjUyYTIuMDg4IDIuMDg4IDAgMCAwIDIuOTM0LS40NjkgMi4xMzMgMi4xMzMgMCAwIDAtLjQ2NS0yLjk2MiAyLjA4OCAyLjA4OCAwIDAgMC0yLjkzNC40NjkgMi4xMzMgMi4xMzMgMCAwIDAgLjQ3IDIuOTYyem0tNS4zMjQtLjQzYTIuMDg4IDIuMDg4IDAgMCAwIDIuOTM0LjQ2OSAyLjEzMyAyLjEzMyAwIDAgMCAuNDY1LTIuOTYyIDIuMDg4IDIuMDg4IDAgMCAwLTIuOTM0LS40NjkgMi4xMzMgMi4xMzMgMCAwIDAtLjQ2IDIuOTYyem0tNC45MzItMi4wN2EyLjEgMi4xIDAgMCAwIDIuNjQ3IDEuMzYxIDIuMTI1IDIuMTI1IDAgMCAwIDEuMzQ5LTIuNjcyIDIuMSAyLjEgMCAwIDAtMi42NDctMS4zNjEgMi4xMjQgMi4xMjQgMCAwIDAtMS4zNDQgMi42NzJ6bS00LjA1Ny0zLjUwN2EyLjEgMi4xIDAgMSAwIDIuMS0yLjEyIDIuMTExIDIuMTExIDAgMCAwLTIuMDk1IDIuMTJ6IiBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"?ie.Unsupported:ie.Loadable,this._particle=null,this._connecting=!1,this._publicKey=null,this._wallet=null,this._config={config:{projectId:"",clientKey:"",appId:"",...e.config,chainId:e.config?.chainId??101,chainName:e.config?.chainName??"solana"},login:e.login}}get particle(){return this._particle}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Loadable)throw new yt;this._connecting=!0;let e,t;try{({ParticleNetwork:e,SolanaWallet:t}=await pn(()=>import("./index-IUwre2_-.js"),__vite__mapDeps([12,2,3,1,4,11,7])))}catch(l){throw new ua(l?.message,l)}let i;try{i=new e(this._config.config),i.auth.isLogin()||await i.auth.login(this._config.login)}catch(l){throw new Qa(l?.message,l)}let s;try{s=new t(i.auth)}catch(l){throw new Qa(l?.message,l)}const n=s.publicKey;if(!n)throw new Et;let c;try{c=new ht(n.toBytes())}catch(l){throw new ut(l?.message,l)}this._particle=i,this._wallet=s,this._publicKey=c,this.emit("connect",c)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signMessage(e)}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const gE="Phantom";class kC extends Ht{constructor(e={}){super(),this.name=gE,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._accountChanged=t=>{const i=this._publicKey;if(i){try{t=new ht(t.toBytes())}catch(s){this.emit("error",new ut(s?.message,s));return}i.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&(Iw()?(this._readyState=ie.Loadable,this.emit("readyStateChange",this._readyState)):Wt(()=>window.phantom?.solana?.isPhantom||window.solana?.isPhantom?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===ie.Installed&&await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this.readyState===ie.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.phantom?.solana||window.solana;if(!e.isConnected)try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),e.on("accountChanged",this._accountChanged),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;Gn(e)?n?.length&&e.sign(n):(e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n)),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const yE="SafePal";class PC extends la{constructor(e={}){super(),this.name=yE,this.url="https://safepal.io",this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAP1BMVEUAAABKIe9MIO9LIO9KIe5KIO9KIe9KIO5JIO1KIu1KIO1KIe////+kkPfo4/1hPfFgPfGZgvaOdPWDZvRVL/CpQHckAAAAC3RSTlMA7yC/oDDfgJCQkAOmnXUAAADnSURBVEjHlZbtjoJAEAR7BwTvmvUO9f2f1USNk81MRrp+VxFY9gsvbJ0aC9r0Y3Bs5gHmT3JqPMRy0nyyPQtbeJhmAGYKzIBRwvBLiRUTJSY0SjQw4X7tI//8kAV/l22k04HoE6JPiD4h+oToE8HfWYLwfNZg9EOQvpL7Mag+et+SoBrWWxaUP64nQT01ehLUk6/nwXYLgRdpsIfAiyy4VAuoc8B9D0rcPxbs7sfAB8oJPiH6hOgTok+IPiH4YQH1keudCfJmrG/3KyXO8pGlH4ow4bMX0w/2Z7EIvnY5cez87fqzvvUH/qNgaUlN588AAAAASUVORK5CYII=",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.safepal?.isSafePalWallet?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.safepal;let t;try{t=await e.getAccount()}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const wE="Saifu";class RC extends Ht{constructor(e={}){super(),this.name=wE,this.url="https://saifuwallet.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTQxcHgiIGhlaWdodD0iNTQxcHgiIHZpZXdCb3g9IjAgMCA1NDEgNTQxIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPkFydGJvYXJkIENvcHkgOTwvdGl0bGU+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjEuNzk5ODcyMTYlIiB5MT0iMCUiIHgyPSI5OC4zOTcxMDUxJSIgeTI9Ijk3Ljk5MDI5MSUiIGlkPSJsaW5lYXJHcmFkaWVudC0xIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZCOTIzQyIgb2Zmc2V0PSIwJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRUM0ODk5IiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPC9kZWZzPgogICAgPGcgaWQ9IkFydGJvYXJkLUNvcHktOSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTIzMi4yNzAwNDQsLTcuODU2NzI5NzFlLTE1IEwzMDcuNzI5OTU2LDcuODU2NzI5NzFlLTE1IEMzNzkuNDY1Mzc2LC01LjMyMDg1MzMyZS0xNSA0MTIuMzM3Mzc5LDguODE4NDMzMDYgNDQzLjMwMDM0MiwyNS4zNzc2MDY5IEM0NzQuMjYzMzA1LDQxLjkzNjc4MDcgNDk4LjU2MzIxOSw2Ni4yMzY2OTUyIDUxNS4xMjIzOTMsOTcuMTk5NjU4MiBDNTMxLjY4MTU2NywxMjguMTYyNjIxIDU0MC41LDE2MS4wMzQ2MjQgNTQwLjUsMjMyLjc3MDA0NCBMNTQwLjUsMzA4LjIyOTk1NiBDNTQwLjUsMzc5Ljk2NTM3NiA1MzEuNjgxNTY3LDQxMi44MzczNzkgNTE1LjEyMjM5Myw0NDMuODAwMzQyIEM0OTguNTYzMjE5LDQ3NC43NjMzMDUgNDc0LjI2MzMwNSw0OTkuMDYzMjE5IDQ0My4zMDAzNDIsNTE1LjYyMjM5MyBDNDEyLjMzNzM3OSw1MzIuMTgxNTY3IDM3OS40NjUzNzYsNTQxIDMwNy43Mjk5NTYsNTQxIEwyMzIuMjcwMDQ0LDU0MSBDMTYwLjUzNDYyNCw1NDEgMTI3LjY2MjYyMSw1MzIuMTgxNTY3IDk2LjY5OTY1ODIsNTE1LjYyMjM5MyBDNjUuNzM2Njk1Miw0OTkuMDYzMjE5IDQxLjQzNjc4MDcsNDc0Ljc2MzMwNSAyNC44Nzc2MDY5LDQ0My44MDAzNDIgQzguMzE4NDMzMDYsNDEyLjgzNzM3OSAtMC41LDM3OS45NjUzNzYgLTAuNSwzMDguMjI5OTU2IEwtMC41LDIzMi43NzAwNDQgQy0wLjUsMTYxLjAzNDYyNCA4LjMxODQzMzA2LDEyOC4xNjI2MjEgMjQuODc3NjA2OSw5Ny4xOTk2NTgyIEM0MS40MzY3ODA3LDY2LjIzNjY5NTIgNjUuNzM2Njk1Miw0MS45MzY3ODA3IDk2LjY5OTY1ODIsMjUuMzc3NjA2OSBDMTI3LjY2MjYyMSw4LjgxODQzMzA2IDE2MC41MzQ2MjQsNS4zMjA4NTMzMmUtMTUgMjMyLjI3MDA0NCwtNy44NTY3Mjk3MWUtMTUgWiIgaWQ9IlJlY3RhbmdsZSIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudC0xKSI+PC9wYXRoPgogICAgICAgIDxnIGlkPSJMYXllciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA3LjUwMjc2NCwgODcuMDIxNTg5KSIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjEuMzI1MTQ3LDMyMy44NjM0MjEgQzE0Mi44Mjk2OTQsMzIzLjc5NzY1NSAxMjMuMjczNDA1LDMyMy4xODE2MjggMTE1LjYyMDA1NCwzMjIuNDIzNjkzIEMxMDguMjYyNjAyLDMyMS42OTUwNTUgOTYuMTg1MjU1MywzMTkuOTI1MzEgODguNzgxNTA3MywzMTguNDkwODYyIEM4MS4zNzc3NjAzLDMxNy4wNTY0NDQgNzAuNTIyNDg5MywzMTQuMzEyMjczIDY0LjY1ODY4OTMsMzEyLjM5MjcxOCBDNTguNzk0ODg5MywzMTAuNDczMTMxIDUwLjMxNDQ1MTMsMzA3LjEyMTE3MiA0NS44MTMyNzYzLDMwNC45NDM4NjUgQzQxLjMxMjA5MzMsMzAyLjc2NjU4OCAzMy45ODIzODIzLDI5OC4yMzcxMzkgMjkuNTI1MDMwMywyOTQuODc4NDM1IEMyNS4wNjc2NzEzLDI5MS41MTk3MDEgMTkuMTY5NTMxMywyODYuMDA1Njk0IDE2LjQxODA0MzMsMjgyLjYyNTAxNyBDMTMuNjY2NTU1MywyNzkuMjQ0NDAyIDkuNjgzMDk2MjksMjczLjAzNzM3MSA3LjU2NTkwMTI5LDI2OC44MzE2MjEgQzUuNDQ4NzEzMjksMjY0LjYyNTg3MiAyLjg3OTY0NDI5LDI1Ny42NTA4OTYgMS44NTY4NTUyOSwyNTMuMzMxNjIxIEMwLjU0MDkzNzI4NywyNDcuNzc0NDkzIDAsMjQxLjY3NzU2OSAwLDIzMi40Nzg0MTEgQzAsMjIzLjk1Mzc1MyAwLjYyMzY5MzI4NywyMTYuMzgwMDgzIDEuODA2NDE3MjksMjEwLjQ3ODQxMSBDMi43OTg0MjkyOSwyMDUuNTI4Mzk5IDQuOTYyNzg5MjksMTk3LjQyODQyMyA2LjYxNjExNzI5LDE5Mi40Nzg0MTEgQzguMjY5NDQ1MjksMTg3LjUyODM5OSAxMS4zNzA1MjczLDE3OS41MzcwOTYgMTMuNTA3NDIxMywxNzQuNzE5OTI3IEMxNy4zOTI2NjgzLDE2NS45NjE0NDMgMTcuMzkyNjY4MywxNjUuOTYxNDQzIDE0Ljg0OTI0MTMsMTYxLjA1OTA5OSBDMTMuMjU3MzY4MywxNTcuOTkwODMyIDEyLjI0ODA5MDMsMTU0LjMwNjUwNSAxMi4xNTE1MjUzLDE1MS4yMTExODQgQzEyLjA2NjY2MzMsMTQ4LjQ5MTEyMiAxMi42MjU5NTkzLDE0NC41MTM1MDYgMTMuMzk0Mzk5MywxNDIuMzcyMDI3IEMxNC4xNjI4NDAzLDE0MC4yMzA1NDcgMTcuOTQ4MTk0MywxMzQuMjE2NDc5IDIxLjgwNjMwMzMsMTI5LjAwNzQzMyBDMjUuNjY0NDExMywxMjMuNzk4Mzg4IDMzLjEzNTY4NzMsMTE1LjA3NTYwOSAzOC40MDkxMzkzLDEwOS42MjM0OTIgQzQzLjY4MjU5MjMsMTA0LjE3MTM3NCA1MS41OTcyNDIzLDk2LjY3NTczODQgNTUuOTk3MjM2Myw5Mi45NjY0Nzk0IEM2MC4zOTcyMzAzLDg5LjI1NzI1MDQgNjcuODIyMjMzMyw4My42Nzk5MTk0IDcyLjQ5NzIzNjMsODAuNTcyNDM2NCBDNzcuMTcyMjM5Myw3Ny40NjQ5MjI0IDg1LjQwNTkyNzMsNzIuNjU0Mzc1NCA5MC43OTQzMjUzLDY5Ljg4MjMxMTQgQzk2LjE4MjcyMjMsNjcuMTEwMjQ3NCAxMDQuNTg1OTgxLDYzLjM1NzEwNDQgMTA5LjQ2ODIxNCw2MS41NDE5NDk0IEMxMTQuMzUwNDYyLDU5LjcyNjgyNDQgMTIxLjQxNjc2MSw1Ny40MzYzMjc0IDEyNS4xNzExMjUsNTYuNDUxOTgzNCBDMTI4LjkyNTQ4OSw1NS40Njc2MDg0IDEzMi4zNzk0MzgsNTQuMzI4NjYxNCAxMzIuODQ2NTcxLDUzLjkyMDk3NzQgQzEzMy4zMTM3MDMsNTMuNTEzMjkzNCAxMzMuMzkzNDkxLDUyLjIyNjg4NTQgMTMzLjAyMzg2Myw1MS4wNjIzMDQ0IEMxMzIuNjU0MjM0LDQ5Ljg5NzcyMzQgMTMwLjY1NDQzMiw0OC4wNzg5MzY0IDEyOC41Nzk4NDcsNDcuMDIwNTU2NCBDMTI2LjUwNTI2Miw0NS45NjIxNzY0IDEyMy4zMzE2OTMsNDMuNDE0OTY1NCAxMjEuNTI3NDY0LDQxLjM2MDA2NDQgQzExOS43MjMyMzQsMzkuMzA1MTYzNCAxMTcuNjI4MzQsMzYuMTQzMDg0NCAxMTYuODcyMTQ0LDM0LjMzMzI2OTQgQzExNi4xMTU5NDksMzIuNTIzNDI0NCAxMTUuNDk3MjM2LDI4LjMxMzczODQgMTE1LjQ5NzIzNiwyNC45Nzg0MTE0IEMxMTUuNDk3MjM2LDIxLjY0MzA4NDQgMTE2LjE4NjE1NSwxNy4yNjUzMzc0IDExNy4wMjgxODEsMTUuMjUwMTA5NCBDMTE3Ljg3MDE5MSwxMy4yMzQ4ODE0IDExOS42OTgxMDMsMTAuMDkyNzkxNCAxMjEuMDkwMTkzLDguMjY3NjU3NDMgQzEyMi40ODIyNjcsNi40NDI1NTM0MyAxMjUuODI4Mzk3LDMuODMwODI4NDMgMTI4LjUyNTk5OSwyLjQ2MzgyNDQzIEMxMzIuMzM4NDIzLDAuNTMxOTM5NDI1IDEzNC45NDE0MTksLTAuMDE2NzA1NTc0NiAxNDAuMjEzOTg3LDAgQzE0NC42MTc5NDgsMC4wMTQ2MzU0MjU0IDE0OC40MTM4NDcsMC42NjU4MTk0MjUgMTUxLjAzNTk0OCwxLjg1Njg5MDQzIEMxNTMuMjU3MjMxLDIuODY1ODkzNDMgMTU2Ljk2OTc0LDUuODQ0MzQ3NDMgMTU5LjI4NTk0OCw4LjQ3NTcyNTQzIEMxNjMuNDk3MjM2LDEzLjI1OTk5NzQgMTYzLjQ5NzIzNiwxMy4yNTk5OTc0IDE2Ny43MDg1MjQsOC40NzU3MjU0MyBDMTcwLjAyNDczMiw1Ljg0NDM0NzQzIDE3My43MzcyNDEsMi44NjU4OTM0MyAxNzUuOTU4NTI0LDEuODU2ODkwNDMgQzE3OC41ODA2MjUsMC42NjU4MTk0MjUgMTgyLjM3NjUzOSwwLjAxNDYzNTQyNTQgMTg2Ljc4MDQ3LDAgQzE5Mi4wNTMwNTMsLTAuMDE2NzA1NTc0NiAxOTQuNjU2MDQ5LDAuNTMxOTM5NDI1IDE5OC40Njg0NTgsMi40NjM4MjQ0MyBDMjAxLjE2NjA5LDMuODMwODI4NDMgMjA0LjQ3MzAwNSw2LjQxODMyMjQzIDIwNS44MTcxODIsOC4yMTM4MjQ0MyBDMjA3LjE2MTM2LDEwLjAwOTM1NjQgMjA4Ljk4OTI0LDEyLjkxODU2NjQgMjA5Ljg3OTE5NCwxNC42Nzg3NTk0IEMyMTAuODgxODgsMTYuNjYxOTQ0NCAyMTEuNDk3MjM2LDIwLjM4MjIyMDQgMjExLjQ5NzIzNiwyNC40NjA4NjM0IEMyMTEuNDk3MjM2LDI4LjA4MDg1OTQgMjEwLjg3ODUyMywzMi41MjM0MjQ0IDIxMC4xMjIzMjgsMzQuMzMzMjY5NCBDMjA5LjM2NjEzMiwzNi4xNDMwODQ0IDIwNy4yNzEyNTMsMzkuMzA1MTYzNCAyMDUuNDY3MDI0LDQxLjM2MDA2NDQgQzIwMy42NjI3OTQsNDMuNDE0OTY1NCAyMDAuNDg5MjEsNDUuOTYyMTc2NCAxOTguNDE0NjI1LDQ3LjAyMDU1NjQgQzE5Ni4zNDAwNCw0OC4wNzg5MzY0IDE5NC4zNDAyMjMsNDkuODk3NzIzNCAxOTMuOTcwNjI1LDUxLjA2MjMwNDQgQzE5My42MDA5OTYsNTIuMjI2ODg1NCAxOTMuNjgwNzY5LDUzLjUwODI4ODQgMTk0LjE0NzkwMSw1My45MDk4Mzg0IEMxOTQuNjE1MDM0LDU0LjMxMTM4ODQgMTk3LjY5NzI0OCw1NS4zNzA1MzE0IDIwMC45OTcyMzYsNTYuMjYzNDQ1NCBDMjA0LjI5NzIyNCw1Ny4xNTYzNTk0IDIxMC4xNTMwODksNTguOTY5NDM5NCAyMTQuMDEwMjA2LDYwLjI5MjQ5ODQgQzIxNy44NjczNTMsNjEuNjE1NTI2NCAyMjQuMzY0NzI5LDY0LjE2NDYyOTQgMjI4LjQ0ODgzNSw2NS45NTcxNzE0IEMyMzIuNTMyOTQyLDY3Ljc0OTcxMjQgMjQwLjI5MjA2Niw3MS44MzkzNzM0IDI0NS42OTEyOTcsNzUuMDQ1MzM2NCBDMjUxLjA5MDUyOCw3OC4yNTEyOTk0IDI1OC45OTMxNDcsODMuNDY0MjgxNCAyNjMuMjUyNjY4LDg2LjYyOTcxNzQgQzI2Ny41MTIxOSw4OS43OTUxODM0IDI3Ny4xMTY2ODIsOTguNDgxMDk3NCAyODQuNTk2MDIxLDEwNS45MzE3NSBDMjkyLjA3NTM2MSwxMTMuMzgyNDAzIDMwMS40MTI0MjgsMTIzLjgzNTQ2NyAzMDUuMzQ1MDc1LDEyOS4xNjA3ODQgQzMwOS4yNzc2OTMsMTM0LjQ4NjA3MSAzMTIuOTQ1NzUzLDE0MC4wMjc4OCAzMTMuNDk2MjU5LDE0MS40NzU4NzggQzMxNC4wNDY3OTcsMTQyLjkyMzg3NiAzMTQuNDk3MjM2LDE0Ni45MzcyODkgMzE0LjQ5NzIzNiwxNTAuMzk0NTY0IEMzMTQuNDk3MjM2LDE1NS4xMzAxMjkgMzEzLjg5ODExNSwxNTcuODA3Mjk5IDMxMi4wNjgxODksMTYxLjI0ODkxOSBDMzA5LjYzOTE3MywxNjUuODE3MzI0IDMwOS42MzkxNzMsMTY1LjgxNzMyNCAzMTQuNjI4MjE3LDE3Ny41ODk4MzEgQzMxNy4zNzIxNzUsMTg0LjA2NDcxNSAzMjAuNzM4NzUyLDE5My4yMTM0NTcgMzIyLjEwOTQ0OSwxOTcuOTIwMzY3IEMzMjMuNDgwMTc3LDIwMi42MjcyNzYgMzI1LjI5ODAxNywyMTAuOTc4NDExIDMyNi4xNDkwOTEsMjE2LjQ3ODQxMSBDMzI3LjIxNTAwOSwyMjMuMzY2Njg2IDMyNy41MTg4NDIsMjI5LjkwMTMyNCAzMjcuMTI1NTAxLDIzNy40Nzg0MTEgQzMyNi43OTc0MzcsMjQzLjc5NzY4NiAzMjUuNjgwNDY0LDI1MS41OTY4OCAzMjQuNTAwNTYyLDI1NS44MDcwMjQgQzMyMy4zNzA4OTMsMjU5LjgzNzc4NiAzMjEuMTU2ODEyLDI2NS42OTA3ODMgMzE5LjU4MDM5NiwyNjguODEzNjc3IEMzMTguMDAzOTUsMjcxLjkzNjYwMiAzMTQuNTU1NzA4LDI3Ny4zNjMwNTUgMzExLjkxNzY0NiwyODAuODcyNDU0IEMzMDkuMjc5NTU0LDI4NC4zODE4ODQgMzAzLjgyNDc4MSwyODkuODcyNjk4IDI5OS43OTU5NDIsMjkzLjA3NDI5NyBDMjk1Ljc2NzA3MiwyOTYuMjc1ODY2IDI4OS42NjQxOTgsMzAwLjQ2Mzg4NSAyODYuMjMzOTkxLDMwMi4zODA5NjggQzI4Mi44MDM3ODUsMzA0LjI5ODA4MyAyNzUuODc1MDEzLDMwNy40NTc3NTEgMjcwLjgzNjc0NCwzMDkuNDAyNDgzIEMyNjUuNzk4NDc1LDMxMS4zNDcyNDYgMjU3LjI0ODQ1NywzMTQuMDkwNTk0IDI1MS44MzY3NDQsMzE1LjQ5ODgyNyBDMjQ2LjQyNTAwMSwzMTYuOTA3MDYxIDIzNi41OTcyNDIsMzE4LjkxNDY5IDIyOS45OTcyMzYsMzE5Ljk2MDI4NCBDMjIzLjM5NzIzLDMyMS4wMDU4NDYgMjEyLjUxOTc4OCwzMjIuMzM3NjY0IDIwNS44MjUxNDcsMzIyLjkxOTg0OCBDMTk5LjEzMDUwNiwzMjMuNTAyMDYyIDE3OS4xMDU0OTcsMzIzLjkyNjY4NCAxNjEuMzI1MTQ3LDMyMy44NjM0MjEgWiIgaWQ9IlNoYXBlIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.saifu?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.saifu;if(!e.isConnected)try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;if(s.signAndSendTransaction)try{const{signers:n,...c}=i;e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}return await super.sendTransaction(e,t,i)}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const mE="Salmon";class UC extends Ht{constructor({network:e=If.Mainnet}={}){super(),this.name=mE,this.url="https://salmonwallet.io",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA4OCA4OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9Ijg4IiBoZWlnaHQ9Ijg4IiByeD0iMzAiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl84NTVfNTgwKSIvPgo8cGF0aCBkPSJNNTkuODA1NSAyNy42M0M1Ni43OTU1IDI1LjgyMzkgNTMuNjIyMiAyNC41Mzg4IDUwLjM1OTcgMjMuODE0NEw0Ni45MDQyIDE2LjEyODdDNDYuNDkzMyAxNC44NTg1IDQ1LjMwMDIgMTQuMDAwMSA0My45NTM3IDE0LjAwMDFINDMuODE1QzQyLjQ2ODUgMTQuMDAwMSA0MS4yNzU0IDE0Ljg2MzUgNDAuODY0NSAxNi4xMjg3TDM3LjQwOSAyMy44MDk1QzM0LjE0MTYgMjQuNTM4OCAzMC45NTgzIDI1LjgyODkgMjcuOTQzNCAyNy42MzQ5QzIxLjk1MzIgMzkuMjYwMyAyMC4zMjk0IDUwLjU5MjggMjEuMTQxMyA2MS43NjY2QzI0LjY1MTMgNjUuMTY1NCAzMi40MzM2IDY5LjM2OCAzNi42MDcgNzEuMDMwMkMzOS4wNTI2IDcyLjAwMjcgMzkuODAwMSA3Mi40OTM5IDQyLjI1MDYgNzIuOTAwN0M0NC40Mjg5IDczLjUxNiA0NS4wODczIDczLjI3NzggNDYuNzU1NyA3My4xMDQyQzQ5LjMyNTEgNzIuNDE5NSA1MC4zOTQ0IDcxLjcyNDggNTEuNDM0IDcxLjE2NDFDNTUuODQ5OSA2OC44NzY4IDYzLjExNzQgNjUuMTcwNCA2Ni42Mjc0IDYxLjc3MTZDNjcuNTc3OSA0OC44MTE2IDY0Ljk5ODYgMzcuNTgzMiA1OS44MDU1IDI3LjYyNVYyNy42M1pNMzcuNTI3OCA1MS4xNDg1QzM1LjY0MTYgNTEuMTQ4NSAzNC4wODIyIDQ4LjkwMDkgMzQuMDgyMiA0Ni4xMzIyQzM0LjA4MjIgNDMuMzYzNiAzNS41ODcxIDQxLjA5NjEgMzcuNTE3OSA0MS4wOTYxQzM5LjQ0ODYgNDEuMDk2MSA0MC45OTgxIDQzLjM2MzYgNDAuOTYzNSA0Ni4xMzIyQzQwLjkyODggNDguOTAwOSAzOS40NDM3IDUxLjE0ODUgMzcuNTIyOCA1MS4xNDg1SDM3LjUyNzhaTTUwLjIzMSA1MS4xNDg1QzQ4LjMzOTkgNTEuMTQ4NSA0Ni43OTAzIDQ4LjkwMDkgNDYuNzkwMyA0Ni4xMzIyQzQ2Ljc5MDMgNDMuMzYzNiA0OC4yOTUzIDQxLjA5NjEgNTAuMjMxIDQxLjA5NjFDNTIuMTY2NyA0MS4wOTYxIDUzLjcwMTQgNDMuMzYzNiA1My42NjY3IDQ2LjEzMjJDNTMuNjMyMSA0OC45MDA5IDUyLjE1MTggNTEuMTQ4NSA1MC4yMzEgNTEuMTQ4NVoiIGZpbGw9IiNGQ0ZDRkMiLz4KPHBhdGggZD0iTTc1LjQwNTEgNTYuMTIwM0w3MC45NzkzIDQyLjE3MjlDNzAuNDM0NyA0MC40NjYxIDY4Ljg1NTUgMzkuMzA1MSA2Ny4wNjMzIDM5LjMwNTFDNjYuNTI4NyAzOS4zMDUxIDY2LjAwODkgMzkuNDA5MiA2NS41Mjg3IDM5LjYwMjhDNjcuNTQ4NSA0Ni4zMjU5IDY4LjM2MDQgNTMuNTc5OSA2Ny43MjY3IDYxLjQ4NEg3MS40ODQyQzc0LjI2NjUgNjEuNDg0IDc2LjI0MTcgNTguNzc0OSA3NS40MDAxIDU2LjEyMDNINzUuNDA1MVoiIGZpbGw9IiNGQ0ZDRkMiLz4KPHBhdGggZD0iTTEyLjE5MDggNTYuMzgzNUwxNi42MTY2IDQyLjQzNjFDMTcuMTYxMiA0MC43MjkyIDE4Ljc0MDUgMzkuNTY4MiAyMC41MzI2IDM5LjU2ODJDMjEuMDY3MiAzOS41NjgyIDIxLjU4NyAzOS42NzI0IDIyLjA2NzMgMzkuODY1OUMyMC4wNDc0IDQ2LjU4OSAxOS4yMzU1IDUzLjg0MzEgMTkuODY5MiA2MS43NDcxSDE2LjExMTdDMTMuMzI5NSA2MS43NDcxIDExLjM1NDIgNTkuMDM4IDEyLjE5NTggNTYuMzgzNUgxMi4xOTA4WiIgZmlsbD0iI0ZDRkNGQyIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzg1NV81ODAiIHgxPSI0NCIgeTE9IjAiIHgyPSI0NCIgeTI9Ijg4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRjgxNzAiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkY1QzQ1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.Loadable,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._network=e,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.salmon?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.connected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Loadable&&this._readyState!==ie.Installed)throw new yt;this._connecting=!0;let e;try{e=(await pn(async()=>{const{default:s}=await import("./index-Ki2NzIeG.js");return{default:s}},__vite__mapDeps([13,2,3,1,4]))).default}catch(s){throw new ua(s?.message,s)}let t;try{t=new e({network:this._network})}catch(s){throw new Qa(s?.message,s)}if(!t.connected)try{await t.connect()}catch(s){throw new Tr(s?.message,s)}if(!t.publicKey)throw new Et;let i;try{i=new ht(t.publicKey.toBytes())}catch(s){throw new ut(s?.message,s)}t.on("disconnect",this._disconnected),this._wallet=t,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signMessage(e,"utf8")}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const vE="SKY Wallet";class $C extends Ht{constructor(e={}){super(),this.name=vE,this.url="https://getsky.app",this.icon="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDY2IDY2IiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxkZWZzPjxpbWFnZSAgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBpZD0iaW1nMSIgaHJlZj0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFFQUFBQUJBQ0FZQUFBQ3FhWEhlQUFBQUFYTlNSMElCMmNrc2Z3QUFFWGhKUkVGVWVKekZXd2x3RlZVVy9ZRUVRaEx5MTdCbGcwaEVrYzJFZ0d5akFoWUtLb2lvaUN3aUlpaWlvcWdnaTRBb0lBNmhCQUVabGtFREptSGZ3aFlNUzFCUjJVVUUwUUZucG5TbVpzWlNTNjJwS2JsenprdS84TkxwL2dSSndxODYxZjI3KzNmM3ZlOHU1OTczdnNkVGhaOTkrL1pGQXgwT0hEZ3c4cU9QUGxyd3lTZWZGSHo2NmFkSGdYOGRQbnhZamg0OVdvcGp4NDc5RXpnQ2JENSsvUGc4NEZFZ0M2aFZsZTlZcVorZE8zZDZkdTNhbGZEKysrL2ZzM2Z2M29VUS9PakJnd2QvZ09BWERoMDZKT0ZBaFJ3NWNrUXJReUQ0aFJNblRuei8yV2VmSFFMZUJPNEVBamgzdGNVcy95a29LUEJzMjdZdEZRcDR1YWlvNkFRRXZ3REJCU1A5dTZHVlFvVkFFUUxoTDV3OGVmSVFNQTVvaU85WFcyeVBaOU9tVFJHYk4yOU9nL0J6Q3dzTC93dkJCYU45UllLSFV3Z3RBNExMNTU5Ly9pdndHcEFFUkZ3VjRkZXRXeGNMQlV5RThQL1p2MzkvbFFudXBBaGFCYXhBVHAwNjlSMHdHcWhkYllMbjUrZEhyRm16cHQzR2pSdFB3OWZsNDQ4L3JoYkIzU3dDRmtCRkhBTmFBbFVyZkY1ZUhoVXdDV2IvWTNGeGNZVkgvWU1QUHBCbHk1YkpDeSs4SUE4OTlKRGNmZmZkMHFWTEY3bnBwcHNVdU4rN2QyOFpPSENnakI4L1hsYXNXQ0hJR2hXNk4rTUUzZUtMTDc3NEhuaXF5b1IvNzczM1FsREFTcGg4aFY0T0FWR21UWnNtUFh2MmxFYU5Hb25mNzVkQUlGQUtyOWNyb1ZCSWdmczhGZ3dHMVhWRWNuS3kzSFhYWFRKanhnelp2WHYzSlo5SGE0QUNMZ0NMQUc5bEM1K0lrVis5ZmZ2MnNOR2RGckZod3dZWk9YS2t0R3paVWhJU0VrcUZwWEJPd2pvcGhlZjBiK3JWcXlkdDJyU1IwYU5IQ3l3dnJOVXhOc0FOZmp0OSt2UnlLQ0ZRV2NMSDVPYm03dURJaC9OM3BEOTU4c2tuSlRVMVZiMDRFUjhmcjdZVXp1ZnpsUkdZNTdRRmNGOGY1M1dFcVJSOXY3UzBOSG51dWVlRTd1ZjJIdVFTbGhKeW9JU29LeFUrRHNJWFVIaTNrYWM3dlBIR0c1S1NrbEw2b3RxTTlVZzdtWHNnakFYbzY4cmR6L3JldEdsVG1UOS92dXVBV0VvUUtDRVhpUDVkd3E5Y3VaSUtXQWF6Y3pWNzBGd1Z1TFNnNWN5WUx3MFREalpzS0w0R0RjU1BXQkJNVEpRQTRNWDNFUHc4bEp5RS9mbzRobk5KU2VMRHRYNUFYWWZyZVYwd0tWR2Q4OWF2TDBIZWcxdTQxL0RISGhOeUR6Y2x3QUpvQ2JOL3o4aEhBSThqMTdzR3ZLMWJ0MHFuVHAxS0JlY0lxWDBDTHhob25Dcis2NitUbEU0ZHBYblBPNlJ0djN1bDNmMzlKS1B2UFdxLzdYMzNTdWE5ZlNXVCt4WXk4SjNYWk4zSDYvcXFiVnNnczE5ZkJWNlRpZDhuZGV3Z2dmU21Fb1RpdW5YdkpxRGZyakVCQ3JnQTNBOWxYSllDTWhEeGZ5VEJjYnJ4amgwN1ZHRFNKc3l0TWxtTXRpOGxXZnh0V3N2OVk1Nld4ZSt0a2kzSUJqdDNGOHB1Y0liM0t3Rzh6MVlJUEdMeVpBbEF3ZjU2Q1dvZzNONFZOWVdjT1hQbTMxQkNzNG9LVDc4L3pEVG1OdkkzM25oanFYOXFmdzQwYkNEZTY1cEpuMUZQeU5xdFcxVHFBbE5VV2FHeUFSSW1LTFprTUhoRjRKbzBDWVNDMHFGREIxZExJRm1DRW9xZ2hQQ01FY0xYQUo3bFE1ejhuZy90MkxGamFkRFNaay8vam9Qd1kxK2ZoZEd1T3NIdFNzaUJpeVpsdFZWeGh1L1RyVnMzeHd4aHhRTzZ3eU9BZSswQTRhL0Y2SDlEUVoyaVBWbWNFaGhwU2xrQW96VlFCNlB3L096WDFhaFh0ZUFtQ3ZjVVNhdmJlMGdBQTZEZmFjU0lFWTdaZ1JVbHJPQVVGSkRrSmp5UnpkRnpNaU9tT2pPWGN4c0h2NDlxMUVENlAvZXM4cy9xRkY0QjZia0pncXlmbWNZYUdMN2JnZ1VMeXIwL2F3ZkxDbDZHSXB4SEg0SHY3MDZqejVGbDBDdERYUERBNkdCQWtycDBrbUp3Zlpwa2RRcFBiakp4YnJZa0lCQUdrQkpORHNINndpa29NaUJDQVY4Q0RaMFVNSk9qNzBRMVNXMDFPZEYrejlHdjBhaWh2RFJuam16WnN1V1Mva29heSt1dUZBekNaSjEveXN1VnhQYnR3QTNxbGZJUXpTSkp3Y2VPSGV0b0JTQklUSXZqbklMZjF6UmpwOEJIZXF0OVRDc2lLaTVPNWVOdGhZVmhoZWM5VitPbFIwMmZKbzlPbmlURHJ4QkR4bytUTGdNZWxIcXRXNVVRSzd5UG5UTHpYZFBUMHgwNWpCVUxqdGdWMEd2dDJyV09QeGcyYkZnWm5xNGZGZ0hjK2Rod1Y5L25xQmZDZFI1QWZJaEt2MFpxZ2h4RkltZlh4T2h3V3dPcGk5dElqS0RlVitjU1NyWVhyd3VWWEFjLzV6WVdqTkVMcGhpdytiMm15MllkTVdiTUdNZU1ZSkdqVEZNQkt3b0tDc3FaLzU0OWUrVDY2Njh2SXp3ZldpY21Sang0NmFlbnZ5TDhuYU9QYnQ4dTB4Y3VFQjk4MUVlQ0ZNQUw4ajcra3EyWDk3T1lZenlEcTNWT3cydGN4NjM1Rzc4bHNGbEhhQXNOR09jWXQreHBrVzVBWGdBRlpHdmhvNEZUOUN1N3R1YkF2ODJINkJ0SDE2a2pIdERRYWZQbktkOTJVc0FPa0pMdVF4K1dJSmloejRvYjloR3ozN2VVVGhzQzJhOXpPdWEwSmVpdVM1WXNjUXVHbnlJcjFLUUNya1B1LzlYSi9HKysrZWFMMVp0aEJiVnExeFlQbU4rckM5NXlKVDFiUVpmYjN0TUhETEZoR2VzeDcyY1h3aHhGOHpwdDNsb0Jaay9CTkhtN0FuaU9UUlVYTi9nQkNraW1BZ2JULzUwcVBVWlQrNGdRVWJWcWlRZStPM0hPSDEwendDNEV4MzVQajVaZ2s4WXFVSm5sY1VVNlF1WjFadkMxbDhqNnV6MEk2dnV4RzJWbnRSWW5ZUGVvaHljbkoyYzV6WmpzeVFSN2VQYVgwemVPam80V0QzejZFVVJrRmtaT0NxQmljdGF2azRZZDJvc1hwV3dJRmhNQ1kvTnlkQmpBRUJUOTdCaFJ5YXdlY2N4TFFlRmFJWHpudmpvSGFKKzNDOHYzTTRYVlFUQmtaUVk5YVBuNStlWGtZelpBTEpqcFdiNTgrWDZhTVVmY3hJUUpFeHlEREtFVUVCY3JIVkNxTWsyNnBVQXFaMEZPanZ3QmFTc1ZqQzI1WFpZa0kzY250MnNuamRwbVN1cE43U1VGNEQ2UHB3Qkp1SWI4bnRjMnVMR04rSzVObDJCYWs1SitnR0ZCZGtzeDM4K3VsRm16WnBXVGowcEF1YnpKczNEaHdxL3BBdHNSdFUwTUdqVEkxUUxJQkNQZ0JyNldMV1RWaHZVcTVibUJXV0l2V0ZudXBvM3lMb3FYZC9Bc2J0OWRwN2NYOXkrZVd5Y3IxcXlSSmJtNU12UHRSVEpzd2t2U3VsZFBWZjRHazVOVmhqQ3R3VzRCZGpkanE4NHVINE0rNHQ1aER5TDlqeXRYcmhRcXdjU3R0OTVhSnFDWVprY0YxSXlNRkErK0QzeCtyTklveStlcUF0TXgyOTl6VjZ5UXJINTlKUUNyOElFVDJHT0YyVkExQjYxUG56N2w1S1BiNDc3ZmVkaDJYcnAwcVNBV2xFRldWcGFqQmVpSHhzVEdpZ2V1VUFkbDhPNERKWE1FZGorcmJEQjRuVGg1VWg2Wk9FRVNZSDBoVUhGdm1CaWdsZEsrZmZ0eThpSHpLVXZ3VEpreVJlQUdLbCthMEIwZmU0b3lGUkVaRlNXZStMcHl3NTI5NUlzdnY1U3paODlXQzg2ZlB5K3ZMbjViUWkxYXFGTFlMUWJvV0VGWjdQSng4b1V1NnBrOGViTHFzQzVldkxnTStDTTdjZEg3ZWh1SGVxQUdsWkFRa3B1SERKTHozM3lqWHZCTEtLT3FjZTdjT1hucXRWZkZEODdQYkdGeUJmdWdzWU5sbDQ5WmJ2MzY5ZUtaT25XcUxGcTBTQjB3a1pHUlVZNVkyQ2MwVkU4QVNtQkFKRFhPNm5ldjdFQTg0Q3hOVmJzRTczOEloT2EyaDRkSUlEV2xITGt5MzcwZHNvNWR2bmZlZWFmRUFwQWlma0lxRkJDaU1tQVFkTHFaMlJIUzU2aUVtbVNIZnAvVVIvcDZjZlpzMlZxNFM0b1BIRkRGVWlGSUVmdDFsNHRMQlVmMktSYkNuK3UxYVMwK3krK2RCbzN6am5iNTFpRExiTnUyN1Z2UHZIbnp6dkVBbzZLSi92Mzd1L0p1T3pmbmZ0MjZkYVUyYW9TSTJCaFZKNUFBOVIvempMenkxbnhabXBjbmVlQWFhMUVXczJHNmh0aFNndFZiTmdONkMrRForWnRMamhYQm1oaW93cVZaOWlDN3dmMDRkK0JtQVd5VDJlVWpSMEVXT09wQlFOaEhYMkJlTk1GWldwTzZta0hHY2RiR2VtZ3Nza01kSUJLSThJSXZnT0Y1OEhJZW1LbW5jV29aUkZpNHVKK2k0Q0dhcEVwMHE1WXlQbnVPS3F6Y09rNVUwTVRzYlBFMkxxSGNUa1NJbWM0dUgyZXM0VW9iU1lXWDhlYmt5eWFZR3UxcDBPd0k2YmtBblh2MVBLRFptVkhYWUJzREYvSHhPQnVvc0pSNEhtZFh5ZWVWdWpoUGhzZGpNYmdIcjRuSDkwaXlUWlRkRWFnbW41ZzZSYm1Fa3dMSVlwZmw1MG13eFEwbHo3QVJJZTdud1FMdDhsbHJrV2F5R0JwQ2Y3RDNBa2h1ekZFMml4Y3RyT2JpNWtQMXBLZVRVa3lYNFRrV1d3VGRSNWV2NXYzcXNPd0dHRmZXdS9RZE9IaWJZQVh4VUFCckRYUFF1TjhBeDV5S0lhNDVRajF3dXlxSGdWOC8vUEREY2hYaExiZmNVcTd3c1BOdiszUjJ5S3I4N01VTGp5ZFl6Y3R3bFIrdk1mdVBOWkJoSXVFZWI2NzRzM3Q3SENZZHpNeFF4Wlc5R0hJcWg2MUZGVDlBQWFvY3JnT2NjZW9Ic29pdzl3THNOYjA5OTVwVDR2WmVnbm1kM2FMY3Jxc0pDNGhERFVBemQ3T0FIUWlFM3RZdDFWeWgrWDY4TjBtZTA1d2hoRDl5L1BqeFNOMFZXc1Z1cTkwTnFCUTJGKzFLY0dwZ3FIMUw4MzZUTjFpV0V3eFpOWDFwSzh5NnhtcHhCYlQvMHFMNEd6NUQ5UVpEMGhuVjVPNGk5OTVqL3VaTjRnYzE5aHZsTWRFQ1ROR3BQVzZ0UTV4djlnVDdyRjY5V3B6Y1lQRGd3ZVVzb0F6VnBBQ3M3Vkd1Qm1HcVhsUnJiSUlFRUpXNXo2MGZ4MzBrSzV3eFRrMVZXeStDbXlwekFmTTZubGZBOXhpY1MrOXhtNm9XM1ZwdjdEdGtMMXNxUHM0V0c2YlA3YWhSb3h6Tm40c3dvWVNPcGdKcUFuOTFXb3RERXBORTRXeWNnQ1BJR1puQU5kZElzKzdkNUo0blI4blFsOGJMTUJRcWJGMC9iTzBQUlNuTDc5d2ZObWtpam8rVFIzRHNVZXp6ZXA1bnU3dmsydkdsN1crZW16QTNXL1pnQk4yRVYvNlA5Mk81SEtCaURjdmphaEtudFFNMGZ5amc1SkVqWlR2amFscU1OM1NhR0JrNmRHZ1p2MVQ3TU9rWWpDSWJuMFg3OTZrMHhkbWFpb0E5Z29vZ25PRGEvTmZCZGROdStZT3lRdE05MlFOd21oaWgrVU1KTHp2TkRMVkFpZmdQcCs0d3lRYjl5UXlDdGJIZnFsZFBLZHE3dDlxbnhUUm9zU05mbnF3V1M1aWQ1OHpNVE5WRGNHcUdRdmh6MktZNktZQ3JRaGFRRlRwWndmVHAweTkyaEtBQUZqL1B2RHBkamVqVkVKNit2eFNaSVJFY3djOWxORVphelFZenRMKy9ObjhJUHdOeG9QemtxTFlDNEZ1bldFRHF5TTRLSTdscWk5ZXZKNitFbVJlb1NqQmpyZCsrVFpyZDFsMkNLU2txZzJnZXdsYWUwOW9Hamo3d0ZZUlBjNWIrWWpDYzREWk5Sc1d3VEs1TkJTQUlqa1N3Y3VzS1Z3VlV6c2Z6MkMvTTZIMjN5alkrbzB6bjRnMHlXQ2ZmcHdJZy9DZ2cvT0pxS01EUG1TSnEyY21NdUhDS0VaWThQYjNyclZKUTZGNm9WS2JnYWxZWThXWWFxa3RPeXZxNUZpbDRjWmtPR3podTcwemhvWVNEUUd4WTRRMGxkQVIrZGdxSUJGOHFDYWJud1lNeit2U1dkWWpZYWdFVExLUXl3WHZ1Z0lKWklsUHd0RzVkeGQrc21YZzVyMkJNcWpEb3VTMm5aZDdIbG4vYWFGVWg0UzBGTUNDK3lBa0Z0M1Y0SkU1TjhUSWVWSFJzakRhN3ZZZTBlK0IrYVUvMHYzTHdYczN2N0NXTk9uV1VXRkRoZUZoZFBGT2ROVnVsQTE3bnpwMWRSNTZtenkxaXduQ1V2cGYzdjRKVnExWlJDV3RZS1RveFJFMlM3dWpaVTZKUjd0WkM3Yy9VV012dlUxc2lDbG1qZHBESC9GSXI0TGZPbDJ5anpPdlV2dDg2VjNLZXEwL3FjbGFaWklzelNKYXBteDJwQVFNR2lOT0tGZ01YRU12ZXhpQmVsdXltSmZpQS9VeU5ia3BnZG1CbnVZSFZuZFZ0YXI5QlNjMjFSZWF4MG1yUnZNNmxBV3ZXOTJTbU0yZk9ETHRxblgzRDR1TGlBZ2hmTWIrL2hCS0t3eW1CWUhUbVlvckV4TVF5ZlFTemQyanVtK1d5S2FUOWV2TTZya2QrL1BISHhhbHl0UWwvQVVYUVJsaEh6QlVKYnlnaERTaWdFdHhpZ3RZNlhFZmw0bWFJRDA2bGRMajFBZmJxVXYrbWVmUG1Tcm1NTzVmNmt3YXNnc0xuUS9qNmxTSzhvWVJHd0JiR2hFdjRuUUpiVmVQR2pWTnJEUFQvQm9KRzJxTFF1cGxpbnpvbitEOEJMbnljTkdtU3Fnc3U5VHdxNWtCSkZ6b1hDRldxOFBwakJjWnMxQXkvc0Q2bzZOOWFhTEt6Wjg5VzNWbitYYVpyMTY1cXNxSlZxMWJTdW5WcnRVOWh5VFJwNHFTeUZWR3lNZXBzZFA2MGMrZk9xWERGS3BHOTlHT2x5QjdBMzBpS0x1ZEY3U05tVG5MOG5udnd0MlIrRVBvcjFDU2RnZXI3QzUzRkdHY0RQNUtwVmVkZjV5ZzRGUStCdjBjdE1nV0ZVVnkxQ1c1VEF0Y1gzZ0Rrd0MxK295SllobGFWSW1qcWRDY0kvRDg4YXpFWWFUcFE0Nm9JYjFORWhLV0lPY0EzREpRTVhGUkdSZU9FMjBnenNKSG1zdnlGeTUzRnZWOUROa2pIOW1xTDdmeXhyS0lQRzYzc05uTUZHcXRMS29TQzBIUXBGRGtGbGFOQlFrVTNZdjNCZVQrVzJSRHlsN3k4dkZOY3h3amNRVVZmYmZrdTYyTzEzRG52TUFSWUFod0F6a0VwUDNPMnhnU08vUVQ4QmVmM0FXOEREd0xwWE1kWWxlLzRmLzRNQmw2a1JRUjRBQUFBQUVsRlRrU3VRbUNDIi8+PC9kZWZzPjxzdHlsZT48L3N0eWxlPjx1c2UgIGhyZWY9IiNpbWcxIiB4PSIxIiB5PSIxIi8+PC9zdmc+",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.skySolana?.isSkyWallet?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.skySolana;try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const BC="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var kt=function(r,e,t,i){if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(r):i?i.value:e.get(r)},qC=function(r,e,t,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},Xu,Ra,Aw,_w,Ew,Oi,Dw,bE,ME,Sw,xw,Tw,jw,Cw;class YC{constructor(){Xu.add(this),Ra.set(this,{}),Aw.set(this,"1.0.0"),_w.set(this,"MetaMask"),Ew.set(this,BC),Oi.set(this,null),Dw.set(this,(e,t)=>(kt(this,Ra,"f")[e]?.push(t)||(kt(this,Ra,"f")[e]=[t]),()=>kt(this,Xu,"m",ME).call(this,e,t))),Sw.set(this,async()=>{if(!kt(this,Oi,"f")){let e;try{e=(await pn(async()=>{const{default:t}=await import("./index-OJYXOFFv.js");return{default:t}},__vite__mapDeps([14,1,2,3,4,5,6,11,7]))).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}qC(this,Oi,new e,"f"),kt(this,Oi,"f").on("standard_change",t=>kt(this,Xu,"m",bE).call(this,"change",t))}return this.accounts.length||await kt(this,Oi,"f").connect(),{accounts:this.accounts}}),xw.set(this,async()=>{kt(this,Oi,"f")&&await kt(this,Oi,"f").disconnect()}),Tw.set(this,async(...e)=>{if(!kt(this,Oi,"f"))throw new Le;return await kt(this,Oi,"f").standardSignAndSendTransaction(...e)}),jw.set(this,async(...e)=>{if(!kt(this,Oi,"f"))throw new Le;return await kt(this,Oi,"f").standardSignTransaction(...e)}),Cw.set(this,async(...e)=>{if(!kt(this,Oi,"f"))throw new Le;return await kt(this,Oi,"f").standardSignMessage(...e)})}get version(){return kt(this,Aw,"f")}get name(){return kt(this,_w,"f")}get icon(){return kt(this,Ew,"f")}get chains(){return[kj,Pj,Rj]}get features(){return{[Wj]:{version:"1.0.0",connect:kt(this,Sw,"f")},[Yj]:{version:"1.0.0",disconnect:kt(this,xw,"f")},[qj]:{version:"1.0.0",on:kt(this,Dw,"f")},[Bj]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:kt(this,Tw,"f")},[$j]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:kt(this,jw,"f")},[Uj]:{version:"1.0.0",signMessage:kt(this,Cw,"f")}}}get accounts(){return kt(this,Oi,"f")?kt(this,Oi,"f").standardAccounts:[]}}Ra=new WeakMap,Aw=new WeakMap,_w=new WeakMap,Ew=new WeakMap,Oi=new WeakMap,Dw=new WeakMap,Sw=new WeakMap,xw=new WeakMap,Tw=new WeakMap,jw=new WeakMap,Cw=new WeakMap,Xu=new WeakSet,bE=function(e,...t){kt(this,Ra,"f")[e]?.forEach(i=>i.apply(null,t))},ME=function(e,t){kt(this,Ra,"f")[e]=kt(this,Ra,"f")[e]?.filter(i=>t!==i)};let E1=!1;function WC(){E1||(Gj(new YC),E1=!0)}async function QC(){const r="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:r,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function t(i){const s=i.data;s?.target==="metamask-inpage"&&s.data?.name==="metamask-provider"&&(s.data.data?.id===r?(window.removeEventListener("message",t),s.data.data.error||WC()):e())}window.addEventListener("message",t),window.setTimeout(()=>window.removeEventListener("message",t),5e3),e()}const NE="Solflare";class VC extends Ht{constructor(e={}){super(),this.name=NE,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.Loadable,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._accountChanged=t=>{if(!t)return;const i=this._publicKey;if(i){try{t=new ht(t.toBytes())}catch(s){this.emit("error",new ut(s?.message,s));return}i.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==ie.Unsupported&&(Wt(()=>window.solflare?.isSolflare||window.SolflareApp?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1),QC())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.connected}get readyState(){return this._readyState}async autoConnect(){this.readyState===ie.Loadable&&Iw()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Loadable&&this._readyState!==ie.Installed)throw new yt;if(this.readyState===ie.Loadable&&Iw()){const s=encodeURIComponent(window.location.href),n=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${s}?ref=${n}`;return}let e;try{e=(await pn(async()=>{const{default:s}=await import("./index-DriMd9vk.js");return{default:s}},__vite__mapDeps([15,1,2,3,4,5,6]))).default}catch(s){throw new ua(s?.message,s)}let t;try{t=new e({network:this._config.network})}catch(s){throw new Qa(s?.message,s)}if(this._connecting=!0,!t.connected)try{await t.connect()}catch(s){throw new Tr(s?.message,s)}if(!t.publicKey)throw new Tr;let i;try{i=new ht(t.publicKey.toBytes())}catch(s){throw new ut(s?.message,s)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;return Gn(e)?n?.length&&e.sign(n):(e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n)),c.preflightCommitment=c.preflightCommitment||t.commitment,await s.signAndSendTransaction(e,c)}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signMessage(e,"utf8")}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const IE="Solong";class FC extends la{constructor(e={}){super(),this.name=IE,this.url="https://solongwallet.io",this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAGlklEQVR4Ae3bA5DsyhfH8TNr49r2/du2bdu2bdu2zcdNrm3b9toz533rvctUn3Umk9p01WfdvVW/6nROBxJVS1rSkpa0pCUtaUlLWtKSpl4VXos3GJ4sujQFuUKfWl+qT730arzB8Ex9YksKcgXjFOCVeIPhBYydB8mawQ+yiGC8n0EN6zAVcgXhpQjoq1DDdsyDAAB9Pwo1HMC9INk0FIM8Bt1Qh9WohQQCvD+BtEMdtmC8I7y5aIE67MV0SBwDvB3qsE/UHwMJIpC/QB1OYiLEEeCPoQ7nMRcSwwDrao3Zl8aTIEGEUYlL0IAMXuQOr66UvsegDm+ExDJAPNiafSg0AlyIbmjAWX1aQzEkiH6T0QkNaEdpnAN8NNRhPcSF9e9el2ebBhyAuNBvGtLQgIuQOAd4D6jDMRQbM3AmOqEBDfq0xjJIEP3GohkakEFVjAP0y401sAsLnAE+pb6EsC5AA9J4sHsG+kX0PQR1eFJ8AwTWQh0+DjFm4a1Qh2/AOoz/BHX4ZdwD/CDU4aioX2GUMW+AOnB2bqiBBDHe86EOTYw5GRKJwQ/ijUM91OGTxgysxSmowzeNw7j08m5DHX4l7Igg2TY0g9hbLBZ+f7oxC98CdWjDvYzD+MVQh07GfEQsZyDgVWA71OGvorfnQQCAcqaYUFZDHW6j/itAoB70GcergzqsEa0rhGTTEA7mP0koK4xdyeOMmvBBhJU2zsjPMw7lu9O3zShpXheHk4hhcZ4w26AOG4RSxDiUfwZ12KdPqy+FBDHeV6EOZxizIg6HsMGbiQ5jdjzBXRfeefGg3tgbv9BYC0fhZE7sjUMY9Pf9rdcI5XtQh39BjBA/C3VYnM0zcgiDek+GOhzh93mQoMs7kIxze/eMhnxIEOPNM9bcFtTEeAb6I419axu/m2CsgxU4Aw1A/UxIUM/bO/9+cVkDDd5x42x8N1iH8Taow0NhHcZLoQ5Pi/MMzDMW+DTu7g6vIY9AdkAdHmaUMyn6roA6PD22AeLB6DbWplHG7LubfY+kfiIkiH5T0AJ1uFtMA1xUzOc1UIclzvCeXF+o7DygDlvds29RgVVzYj+K4xhgEX4NdcjgecE++rSL+ZdLmIxRB77Ose7l4XPIQB3eF8M60C/n8++ghltE/QLIFfqUiyUE8kOoYSW7jmLIFXeN4X0NaajDDlG/NG6XswrxKdxu+G/weh27j3wCej9uN9zEOjc3sObl4S243XBLhDfWE0mAMQjwZfhxDng7pG/8Sj4/ER/Gd/BdfBhPRGW2A/wxNAfcBOnFCHwZZ6GGs/gqapMAb/QEnIT20Uk8IQkQeB7aof3UihcM9wDvhyboANHXv1+IdWBOB2hsIftto+iSPEif8aGPcjrA50GHyPMiOIT9B/N5apaMgQT8D2poxMdwt8s+hkao4X9ZDxBTIdHwy/h8AeqQxhMhAU9BB9ThPMqHTYCYjU6owy3uPstSfL4Z6uZPC+Mk8gOomz8DEg3vXshAHb4MMXwZarhXGDPwa739w2j48623BPAniOFPUMPsMAL8INTw9AgDrLZOCmjFPEjA3WD1aUJVGAG+CGr4ECRCy6GGg3iyaF0+n/PwFByEGpaJ+qkw1sB7QA3/hUTozdBetFymvXhTWGVMOc7bp36/FhKRamNW9dcxZmpZiI+32ad+vAQSoWejGzpAXXh22Fek3wY1rDD2kVnijR3ExYQMPgkJOUB/nFW0Is3vnw6JhlHX9a4N70Iq/ACBv0MNu7J9WxHw7jaA2deFOtw32zeVHtHLWvMN0dtSkOzwS3spYy7iH1hx2d/wYdyTvnkR3BdeQjjerVBDN14JyZIfQWH5RC7e1rw32npZV54LCc+SPD5/HgqYD3WW5+gTqt6X+rA4v0701hRkKF0+bL+HTM9Hgv/MHH60wyvHWigsafwA1ZAhMguLoL34kbDcQEI1uAH8mcbuxPHImf8i5EMGxqvER9EI7cUqVMTl0Y6HoxHaBzvxNkyC9EEe7oEv4Sy0D/YQ+IS4ver1JNT38z7sWnwbb8TT8Cg8Gs/Gu/Ar7EEXtI/2ud7Ni0GAYCbiJDQiazA57k9nTcdqaJb9UtSvitXbmjavCJ9AMzRkJ/B80boUJBLhDe7Nw1/QCR1i9fgKRg6HByzvjZ/hInQQMjiCT2PSMHxC1a/l8wvwGxyG9kEaW/EtPI4xiiE5JcLrd6PxcLwM78SH8EG8Fc/H/UUXVUByGh8SSYBJgEmASYCJJMAkwBi6A3xCqZhiBz8+AAAAAElFTkSuQmCC",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.solong?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.currentAccount}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.solong;let t;try{t=await e.selectAccount()}catch(s){throw new Et(s?.message,s)}let i;try{i=new ht(t)}catch(s){throw new ut(s?.message,s)}this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){this._wallet&&(this._wallet=null,this._publicKey=null),this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const AE="Spot";class HC extends Ht{constructor(e={}){super(),this.name=AE,this.url="https://spot-wallet.com",this.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAABWCAYAAABVVmH3AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAVqADAAQAAAABAAAAVgAAAAA6XCzdAAAmhUlEQVR4Aa2dC8xmR3nf57yX79tdr9d3e218JQRwguKAcGMVtw0tqtQgimhap4oUxQ1JS6kaqZIVpVJFBVJviKYlEa6KQgIFkcShTiOD6AVCiG3VsY3bdc1N0GKvCWvA1/Xuer/L+779//7PPOfM++77re0kA/PNzDPPzJn5nec8Z86c86678qcIf2exGP+XY+WG2U65sXTltYtSrlE3lyteXBbloNKD3bxMu65MulkZS1bG81I60lnkRzV1ebeUicoj6UzJK1ouGeVxldFmgzxtV9Js4zrVU57MFrUfpeo7jk1+oWMtZpOy2O3mi51JmZ0YL7rny2L21HgxOzYu3WOjbvE1jeeBS99y3pFbbtEsXmboXo7+9NuLm2az8m7xeZvanb9nWykAc6REgCOvMnlPsE4SUBPlDbmCCiADOJepU1wCuwO4kAMs25FyjCivgBXQMbAXgJ0r5WQq1WDHi7lOPDLVqTwqtVwWz467xV2j8eL2X/gPh+/bc84rFS8J7OTbizfP5uV9Ot7NK+3XFwGrMCIFqCdQwSoPCEMGiGKCnSq/CsmAKljqsNi04N5ya30PGrAARJ5WK6gTwHIiBVMWa4gABWxn0JIvQzVgQ7Z8cc+0K+/52Q9f+QVP8Cx/zgr23G8vLjo5Lx/QSbz1LH2srxJAoKbV9nAlM0xNEFBEW64hBDQA2/KUTtMylSZY1yXM2i5PADrT3QAYfSgvGZc/YA3UECMvdyADmAVYDRmII8EmHWO1PeiwYkPuuo8e2hjf9rc+dOVT6ycf815bt3F08boTu+UhHePWtQovUQhfQpv2eZ1W8dXga1DG+SqwXl+ZSstpVpNm5GBcEZ0sImRKax6LTL3ID3VAXI70mfXZzifi1pPbWw/99ru++brl0QwlDOqMMHl88eM783KvKq52ZZI4Q/NFBMygDTkjpQsidVVGmZDyPGSm1GH14uOG5N2ElLNDqsgN0FdJ1bderQMuHYyATGqQ+FLy9Ic8rRSQRMphwekSkMudXD3fWdz7Wz//jR9X0zPCGWCxVN2gfl+ah5a0NaY/TaCZoQEy4SGjM8qKulJdN0eHvKLrSM8WrBiq+HMgurXzQBLkCtLgnEe/wlW6BNgA5ToMM6C6PXo1+mRU+F2ZHRrNZ79/5zu/coblLoHFp+7Mymc0umWoOTkPPAsvklaIaCVQDIuQAIFnGUCr/tJJqHIOu+7QrTVaQUpYb0Ju69NKDai3VgGT3zVodbAMcfC1fT3A7X8TOtY8OzQvi8/c+Y++epEnV/8sgT25U/6t5FfnIFvFPr9uhn3lS8gAkKgj05XWugFVKcCpQ94eps2rypUtNJTdVMD61DKVkSnaBahpWDD6A6R0Cb5xqTOD7AHiJsIVtIB9oqRLW938rh6d3vmAx1b/DGAfXbxZh//ZtpIBrw17ydcqV1AJrQGHddp6kVFPIM1owfKfrEp1ai3jjq98WitpQvTkDQALC1BO7Y+RYZ0BKfKABHCkkTdAQw6rzTpSn6RbP/1z//vNOdoBrNap9cRmXaR7QdxLvtw6Zt3I8tJv3QFk6M6gldpyKdeIVWfAUrOCfIBk0jqUOg8LXU2pB1TAHkBW0Krr/aotNWClpcYJCt3BFXAiKlROgtrpbvG+HGeA/dbiJtXdnEIAL4XVclbuJc/6Bkj6Ts8OuWJaKd2Q73VWymccpvbrblSZsNtywKBOkwcqEatWOay1gjFIoEcZwLZAl0N/pNvrcDJqO8kMVv3Gutfpzf/j5790E9MPsIvybgpt+HOD23Za8y2oHih1CVfZVqc2W0oSJkIDJTVAytkaYFEmHVzCmTLaAI+Quu7PfQVM6lMv3UOckGhLfjbfNUvVL3ii49k/ZsOY6rjWws0xu0H9s07W1tcuU43UUTPoZTXfy5ld6kW2/2uotdTDBKpk4R6wHi57rBUZ5QpHCrZgLLO31rBS5GmxUQfI0HMf5G2p9EU/UbaO6/S0Nl+8bXHHYjwp3yw3qHVsqNTJeMzMkMmSkl1TFzX1b9VfkmWBtrUfiyjTd43kU97LqqhPUkf9kA2AkZJ3bHxsQiVlY4Vo66rugMs4/KrgGVCFmyArKNqHVVbIPdCw0tZyw8Ln59/92ftumKjVjUuTzpkw+gYWgF8SXNonhOyrpkADgOFlnWSUc3WQ4gRM2gfGo2CIZIAlGc//YaFYabVI6iTvLVp3ttDD2gJ2AuutNGFmaqgAjzaG2J+EFbAcV3pY76IsbmQP4rWKy4HJIMuUWuXV1qEHnO3ayaORbck3fSAGVA+XPqss4c7l9XPFsIg7AL30wYdSI8PNVLVRFgTJAq5S9U4XeZNhJysuX2BhgboB9aBC1pdX5ByXzZqEFydF/UuPfJadX8xfO1H/16rNEgCX2z/0CgHPSlkmVPNWa+r6ZikjbUPTV2+V1Lf9kV8pZ3fZVfhNqWGZquxhYjmOQMQFhHX2Mk049lyXIQf8FbjSzZOS4OKERN+dDtyCDsCALtdONNDDYTZ1MkyohZHlTOvMUqUHvDpz9FKJfG3fq3ED1pZf0XagDKeMlD8g2T4pHFDcP1ZeVRtqN1V+U1GzKHPpL7QtuNhWWSltO+25JmD8ZUAfAOcNCCi2WoABnHKVoWOXILlh+iYVAAMmEKmLy90pJ1CyANpa7fwwFnuxhthP3Pl15awAEKESUt+D9SIjpE6Uhr/UA3FLp3Rayht15B8+V2dWp/dygTsHiFLhbBMzv5qy878lwCdOdeX/PbYof3zvonz/cU1MJ8a7W7bYeoevVmsoPYi6BtUk4tJnnZp54PE+KU6QYSvPhNs+EvASVGBYb3FxV76yOKZeD0syAEkwL5Y2bXrLdUdNX5Qr0OkLpbxFWxXvuERgIdcEDnU2mMBtAbd5jPnUC4vyrW8syh/9993yJ0d3y4ZgbMgnsrk9mSsljzUqDStt0/S1wAs/mv40rDSsEpjpU9NSB8DCx9WCTrd4oitfXjyvcR2UJAJp5pG05ZTvlaKeddlWUDtZ6Os3S/nFq0q5Agp7hL3AJtSEuaH2mSdt73ELWc2xb87LXf/phfLMk7vSm5WpJgzUyWJ3CSqwDVJ1aZlhlVhtxrBUuxdB8w3PKXKVdbzBagOsrqgTWOxp1WvaNSQY0nV51F5E3sPVFTSRlf7Dq/X2UZf8iwUA7QWxla/mczht/3NZ6tH7t8tnP3mizE4LMK+LsVYAc6nbctNSB7DIY8EfQMMX5yUOOHQrTEMdrLmH3HVbXfd/dCvopLs6uiyTtnlG35bbfM5MMvzdfkH9Z68q5UbuQi8h0FVaLVZJPq1zNQVu6ii7Z9g5OSuf/ZWnyrHHtnQjBEpADbhhlcjOsFRbMQBDJ60y9AbQZ1qtrXgGWLQiaGYsgZYC5ZS1aZunQaPn5c/pUt77A6X82MuACqiMq1YJZLwIMYGjexbPotoIeoVSHvzN75cv33dCcAVWEddgoL0bqHABKZn9aQM1AKZ11rR1A21eALruSAXbgGE4BpzwELT1KV8js0hLoXe9Qjep82i4d8A7XKhICkgC7RNgLO7DhyKnnIfEGjKv7NmDlBdyDY//t6fL3Xc8WTb0Wji+JBlcAZbYL8V6oAPksNgKvIWYeV0NMR6lOh5PXjFC0sxXEeUecNYzhXZGTRuqdFWVH5EpvWP9yx2r4NCvVTygeFLt79Ya9qunSnlct9GnT2qtqpudv4hRX/vlUja1TiUeVoPrdLKu1pm47lBXLuVq6B268utCHXenQV/91y8qbzq1XR749FO2Wix3WAVgwYAbYuwhhD9NKzZgWTQI0OUhARlPTXETjXKAXTegKqODDL2bqIN1742CXYCg/ONXqUUjz/akWKgWBwb6S8dKueNegRQ8P4pK7m8ABDQ/NdrQZRxRbkJXwsaWIGsNO92aaSmzKO/4K6PyN//yuBzUNlK3CjnH2aTXvO1wee7xk+XokeOGGzenAWb4UMANNy+7AZWXQDPZaq081RHSqpl61z3kWlf4TwLJFKE1Q6W34CgOddLpZHl/VV9u/fI1WbmcXqDitYpHBPLvfb6U7z2nscm6u3MEVr5gLB8w0Rj5oAOwmwK5ub0o+08LpvL7tFbdOKWo8lTp4oTSLX0ktj0vN71mVP7+uzbL5sGwG4xor7jQSfmf/+LL5fknTpapnih6q8VabY3Veis438AyXy00LLdaM9B9MHBEvuu+tAJW43FoYBoswka2DvBY1vrBHyrlNdxVVgKi6xW/Kqh/41N6GtVlvLhcsfrh/DpmU0AnssgNRaDuU5+A3SdLPaD0gODuF8wDp+eSa2kkwDP5k23FiQD/wk9ulje8fb+GqsHqWHvBnT1zuvzBLz8kf7sjy8UvhoXiDtIyfakDiptZAk3ACVApFk0IuOhLhkWzNHJdnmW0yKc805SpTJuM6JK/THNZB5XurlUUk/Izf6DtAcHcfbUOgQmrjf6/FDiMB+CKKOUa0Zcq315pskA4qO+ILtu/U645d6ucLx/xiU+dKHe+/2nfrOz0aK6xLc1PsvH5G+WGn7iEDy9009rVzUZrXR4g6vo2l2Vjye17gUtkuaYO2+gxSeYx1XElbFHWBDPmQOr8esjIs64ZMO3YUHmjHldhsQpKV3oh/pvvl3JMy7DZdSpw61c7msYfMsq2gihIWn1eBcoGRzxJ6e6ux1WAnNPtlKv3n1Z8oTz48AvlI7f9ScCtx1kat+BpJ6dc8teuLBN95RZ9xI0MwPH4C1DWvDxQAF7HcgQqcKkbIm1SHieAiawCkygt2VbpyTLrGlO/SfGvr2uWVy1cDFNXdfn43eJ/TeWoslZA/YmCIceU55RQQQLKHqTyXgpVqxmnlWkyPKYSp3MsbqdcNDldXn3gRHniia3yxV/5jlY16oS1HN2qXZFOxN3S7V+U173jGu2OAWiwWEAmJD9ICFBY6gASfXTsnz0ulm6UpevVBgdcjQks5SrnZU8ag2zSKrtixbem9bJOfVg6L+jOvdDqXuNw7K2otk+4XPYxJsEVfcNV6lcshiorVRowA+qGYGC5U6WHtDnxQ/ueK/c/cLx859O6TLifsdxIqD6wZLq2Dt58WZlqj3JUQSVQ0oAaMG2RaZUAzJOcIAUGvwrYXA8PFssE6ySX4CXgmqYVYwxEt9G4L+WRaE1gufk1uYA5pksbHcPtap4m9qGCx0Ke/gJm+C1/z8qkvEslC5V12lKxUsUNAZvOt8uGNmuJ5A9ob/L6zWfLb33su2Whx1ptFugoSh3ylOu4k1G54scuFwxAcsnLEskDWjGviP6yxwXUpzevgwXYT3FOq0VrAnVtUo8HJGICznRVtqJnwBrzecu9uVNcHNN4VA8ABFt89qsU69U4HTmu+6pw850V68T0e1NN2pYpmABdikX7AYst7SiF/DztAL1q85nyyG98Sx1rFFN8AqMhDHDPf/0VPpH2ocAELgB1LF/qFSSXuG9kGmje0Hp3IP3Y+eJ+AFgmmaDa1AevdeisRk5+tlUKsInGmsPN4QOW8IzWoUDUmMNwlOKXbUS8Aeijrloue31Cji+dyP9NZpqs0qnSqX74kJa5Kevc1KsEYBqo8lGWrES8anKifOmPvlfmz+lgkzzNOboY7eQH9Jgoo5iov7DQcAM89sYNC6CRT8uNfd2Qx6qAExFuAAuOVUECasEiy9jK2zz1AFacIl8JDDuN+IVqlZwA3B1fcYelAlWKmjeykV63dLsaIGCVTpRODTXAbgBWcXMmy9QlT9xX4xLUCnkqwD+48XR57sGn1LlG1DGiABrD1YpXbuLiH71SYxUcrJJIniirteXWNOWsTKI+YdY3FpKHxSaohLiaUp+yvXQl54lpXWAKBPGp4FRIS1U61k16pMdW3nmNlQJzzKfuyk92ZSX6rnSqdGM3gBqqNhNsrfPTSskr4gLaaLewrZvZdrlYVvvIXY8yDA20BZuj68o51x8OiHYDemioPjZWAyy5ADlE7gF5k0In3YBdh8pYrU9gHsIHb/8IGE9Zrt8DHupaRp412HcCtAl+QlHZ76l0+fPefyKoE8GdAlRxY0c3px1BFdhNxX27stBZxLBWyXQJ75O/3RSMWB1wQ6mXribpy/KYll56cuumAquTFmGY9eTwIVssAD1W+0fmrTb9mIFBOdtHfVZ7q6JWxSYM+lm7Rzp03ig0QrJNsVEKOb9WsU+tegw+vwGwexBUllCGWsFubAfYTcHdFFzAbgK1gQvkzXoT26wPC7yOiQU7l2csjS4ZH9fegtauF7Y3MIYZox5fcMD+FP2QBJGEmPNDCkAvCWtz5uKQqQqcoKUQnQ6i1fJQM+R80BexWLS53HMQtlYNBGudANQ3rGqtgFXcBOyWoG7LIok7Ferulqx2q+wHMtZaLXbDFhuXITcdL9l01kaKh3Tw+fHtMrpoFWzMo9P79Q4/qnYmq7EtW6vKhqEK19X5K9+aZfKahNlXpdXEjZaFhihRdpCmnjepZe1BD4C4C1/29KvoDyoMNFYCUzniDQHdkE/dlBvY3N4VTEXB3bctiNsCqrgpsI7cvOwCcANyF/KPLMfyxpILdu5ZY1HZfWarTF7Jw3U/+mG4G2NBZZkVlhYQGecAwUaRlpG9uDp1hn4NduidjpZKg4UtddTopP6K5TcaznK5s2vllQB+SmX/mE3t+ZHbRkYslQhYRcBisQEZq90p++UKsNa4cQmoLDafunADeZPBtxJteVoNzPkYgdBTi6L/ij5LKHayMqRaugOfkJxvr4RAKwvLh7YTJticBKub+2oH2RFp1inFUmV0AazVWcn7XgxYHSx+aqlUDblhGSowZbGGaovFr0YE7n7cQHUFmwK7AVhFL78E1k9fguqnIMMFKksfpg3ckVdblPYKI7mLEZdUzk+6CTfaeDMyslUnegPAcq8T+ulD32EvaQ4iWXZGP02epRY/r2xDHsdAVeFfDmpPlWWkgcqV+WMKWapdgFPeDgAYS424fxeoslSlEQMoKwLghrXKYnUZx0oglkT4VVsrY2WwXr+2Izwz36mNY1+lWdC0LzeZvYTSJ/SrApeqkLzBrSnTn8eJEgclKut1KHXIFTJl+4DnnX26/Kd6+sICOJn8WJgfKA9Q5wKny98xLNf+VUA3HVkRyDIz1t2siXxrQOVRFP/K8qpCZRyeiI6ZA5VsrxAno7U0aXoiOZthXtlHdJ/1FYYqeWrrLRHlOo6llGYpT5i2XsBXuJqPAeYh3EbV+RCJPx0LLFbkfLXQaVpqdQX7lAI4rBPQAqtHWcp+KFCeuz9bhN7dsqVqQV9vPN4Y0WDj8ldaB9RvR2pMa4P0eGJiod836hWjk/bvchUgFPqXgoDVhA2t1tVxWJbyHmpzMt2OziTjcl9okyUh0kdGZNSzwzWRKyCfLsBrVvlY+9XevwosrgDLFUTXsYOVj7Veq+rhQXBjs0R+UYPwpoigBBwuaR1Lg8j5cHOvU9QI9ghcSkzMofrTvlH2RGWbD+1oMsgnPJ870IEiEwckxQSbI2JBb52aUm8dxqIbU+4a0n3GBHuBNhNwBXyewyog44aetLhp7TNYYNZosJHfAKbkpLHLVe/8osX7Kj8EkCqydsVa+xuXB8h4ZLPDvDXCM4NPSn/TqcqeK3kyQxIzRBB6cWVIpx4kwAKobUS5yhKmx5dypViqdZCR181L63y99awnpx6SfolXard7Qy8G8XVsrHiJpct+Q3mvXQHbRlyDQG5w6avjaYWa61Tf/StIQ8RCgKr+e6vVccMSlMT8LXGeOawE37gAazgo1EaePMoq9+2yvhdEfdW1K0hlZG1Ebr118gRLqsi8jgvuZXqLwHCItn6lHPq6g3q3pLerYwnj9TarAcGuMA3YeWCGdfL0NZVVxjup+nSm3niwWPKh6tPjroONOh00J6ZcjgmpA4IMDJDQTtYtmLgUs96ZtidV9HXIs6C5AqTtz8ejHmAcSyn6HnibIgcoMqVsBT4rP8vrmTw0YImsxF6Dxer19EgNuGHFQwGXuNaxtk6sNy955auVYqnsIfg9lw4IVKzebxxINTg2xH0gJaTIcpJwQfesN68cMBMxDDWnj7Rc6h3cmXJKOQShB4+gKmIMAOnHoboeII3qcXysJm8LRRdZjSy3vvusXijqvVYC5TDked65SJlrL9K3q98VWIHCHdhKAah8+NCQBcwAyj5C/pzIT1KA1YB9QtUvx/B0GAdQc8KSO0g/IK1W1PomCU1OVg19Z/Uo7os6aVqJP+SVunv+uEInH4tVxHKJgPZGtEABK2PK8t9jIc06/xMhKh85EjewvGGREvW6S8fuyj/9mWmZ8hWLXtmyH8A/MbKhBwHy6WsDMpd9+GFbquFitdUNCKLnwzyIlDMy+ZRnquqYOJmzBTUQTN7stk37g6QVAdzQU4uzSkSuVGd9lEATqkEntIStMhvSCRCgLiNTJA/4B+9Xx5pYAs2Ucwjc1x/WB8h/aeJPglgN4AISJJvZWKpXAIYqsLoZ9daqfn35e07k1SGx/+2SHIDyRF/C1BEADXQlHQ5+ryCXZCX0rRywDFkHwyvYM9ggWx06VpNWrgPyeNzv7KcFJmSs0pZZAWd9As56Q9bAXhC9hx9XGx1nNQKWhdAv3jIuP3h4ZLiGab8qwIJpFwHUGvMdkm9WGj9YgGtQyhssiWeNQEHVwQYSlCMF+OiC/VZZ+0cnuTaI6oRlK1RH1Vqx5YQcKQehLScCPWUVB4uVPK3Xl326BKBWwMiBmoAHuaxUVruh3ZXfuQMfGGAzNWQdU17A23f/7r37y0+99Rw9ickitTfgF4aCyevt/tLXYt+vPmS18SpcjeUKcuwxF1koswtzMUTKEWOuBi2op6fnl/E1+mJPc1gXZs9ty13pGA5K03Lj7Eha6zwAIFaQS6DRkVyRx+MlcAmVdaktV6ktFNAVcAJdtVw2Y77+9VK+8ugyXG40+VCjvWsNqis/+bc3yq/96iXlLX/xUPXpGozcA98Q8G9g1fEpFaiZVqZK5/rZ4kxxt42zUdlReWc2VtSzmNLdXaU17ig9ObmwHPzgbfqGQCdBc1gXtr+jj3Mru75+tbxOoQctZeX95Y0O0131qzo1TJxO6knIkwEMP4jQhroaE1LUy4okZ1PFcj1dXbCxKB/5wEg/gmOPM/pwqkP0VqwMN1MCA5jp9wo7x+dl59Rc+6bqUP0JqdqTSld5+1hS5E5DbuuqfVnZnUpPLw67Q5ulu3yfVgxSACqRua6Exz98b7ni4d+THpNVZfaHXptfardXRbuOBRoQ6Fd5UoNGXmNfl2Xu0ugSZYkjwdA/V1eeeqaUD//mvPyTn9MeqC5N2gE0oZLSp4PGxophos2EiT712W/vXOv+PJI6D72sjauAPuGBvIbF89vl6fv/uLxC33K18h5o6p7BMSuyp1TQOhYgrTX3QNXGKwRSReslUGSC6jcAtHceyJKp7hztB/7Xz5Xyykt1yf8EW8wD2MznUDwRtVmaEOV1YS85uuvq1smy3wbu0Tu+XK4ayRrQb+RWTVYUXJ+dqqKtc33Wab6CM7MvxeJ0mfRrWuXTEr0yoCwdfDDv/fubmKyUR1Tvr9Z0qhEc3JiX//ix7fKpO3ndwaWr9oqrY2E8a6G44s/4Z+3Bmj5Vf+qB75ajX7yvXDA+FVdRsiHN2DeRoJdlpkk5nqIuwBmrgl1g2TqV+sZkQACM2Mq43AEckGWh1tWNx6nKgo4l75fpnyu4H/3t0+Xff3C7bOmr4z3B9gOvk2nLf9b8WeDOjp0q99z+ufLqze/pKKFoFwUrQjLDbaXMFU1dlp3WBt1iF7A7aaW+tNUJkHrQQESm6H8i1ADRqVB1B6eOZ39/FiTrzCXTOTLlQ4qfv2e7vPMfHC//6/5dLeBXRrhSXBrnyymcBeC6bk7e+0T53C/dWa7UT4kvHfGrVwUv3TR3zae/B1RWAXnlIFkXrdu/O931710cUyeH7UfVIR1kxwBL/+t/naKW7UuBzyVe/SswuYNzclh/+oMJUslniqe2dIfWIvzKS0blnX/3QPmRv6DHW36IsQp2tdwO92x16J2tvtbN9Qr8sU8+Ur5+98PlgunJ8sbNo97UscF6suqHlCCOZ/xjFLD1jcga8QdZw1w34ye6H/7ni28I5Kt8hgSFNgarNC3Vn1NSV+uBiU7AzLRaqtr5QzLB5JHU76EMeFZO7XZlW2vSkQAD/PpXTsrNb9xXrnrFpJx3mVYEh0ZlrLXmSDvmfKjmsXqOLLEUnI+58JdlVxuSR8q4OhZ6CJk/u1VeOPp8+c79j5ZvPfRNbV3Oy1XTZ8pr5ALYg+2hcBBDU78VlI0YH5YBuePysUMWSvKx32B360nN22AZGPAYL5aXgEkDsiyUY6psqMjV2FaLtdpiI/WXLerQj6WCyKuTC+UWOnW0pVGw+vm/j+2Uo4+ekO/V46xftdQ3BHo84ifxU8n9WaXK/hW3FqGctHxpyIcZ+fLQbxE0cL+iMWGNVQP1ulRy1syUL5xslesmT5ZLxic0T+BAiUlFQtbK1EnmrjRPA04dqVjQWi7tCOiU7ik2uo/Zn9KPOki45L04R6bIzhJ1RLb86JP63hUIMDr+WEIg/R5KEHoZ9dLHRZyjHW5ALgRZTex32fVnogEOoAGZN7D5LVa+4naZR15FwPqYau9jKmUtrc5Crsnt00+Ozh2dLpeNny/ndqfNjel7A8dwKjESPeEFBKV0Q1/6v5O8+yInpC7tCMiJo3KMt7SPGSgggVg74fJ3GblkRD4OTtiGWmEmYFsvsNV7As5Jx3M/EIAXEPjB8FTPzlMtO/LzoPj+ijexfIQRcuoiH1+8WBeZwQb4gEy/vGTkFQ3zU1mTw2pjH4BZQ0EpUJgUIocqd6I/nHFAYqo+UUrEgua933VbNxi6oMmiPMYDwtcMs4LlQD1U+nYULKDqYOgGSA1aeayQcr+9BzisxlYLZCyVCYeciXIC3I6JS97HelL4zMePsKoLP6oDEUj6eWTN4GlDS2VR5cZab/K1HUSkke0z7QUcoAqd6E+r31aL1dngjrruqxON4QE/GEh5sFbBq2UAcKYMto7Ll7fyvaUCB1hKgeofYzgPcEBGyiXqevR7qAE3HiICZF5xzC/nE3SqQAACosrKkAcmYNyDiSKNcir5t7a2xAotQZLSHJApo2yrriIlPhCQ9H/cp+G6HZVkCNSPHhy98sZyRLrPAs+Xui0zwNpCWcc2PpW1quV2FQFN/+pvAANivVHZauUn7R6wWoNEv0YNYIAbVluxaIjgGQL5KEeO6RPiNFSZYMIlZFFvk7WydEirCZtfHiHNWvP3UVLP7SRCTsxypmjDrCmj0y26Z8tbbjwy+l39xxPk5u6Km1AFqiO7DFQAqoGtE3mNWGK4gbDUkAuaAaZetWJgVhcQ9ehJp4lYbAs2EQXQYfRDbsCfp8GpFVRnC45eAmj0NMBrYCU4UgJ9ADwP5nyWM7WmoRtwLWoMd3W33KLNTAXtrt2e9A0RoOrUl6dBVsAVcvhHhsilDSDVOwaskAU8dADItAJkppItwYz+0CNkGqUz/+ach5raQhXUqesIaZGpmOWst5y22X6PI7vTrFPatidfT8qoG99OlwZ77691943m3T2GWV2Bb2BAVYOwWuXVQW9lttiAx40q7/SGSp0tV/q2Vtqiq0ifBq28riPbXQu4zVuvnYFGrGJKpFo16CXlmpLhpUyp5mDdbAhEN2gAZQeps1oPrSVZ07bWjWbdPd2vv/8+igZLRq9P3mMfq0HYUu1DAVOhqFPnJQ9LDqgBirt4dQkGmgBXZRywttMo4yTFCiCt2aBVN/iunCmjVHAxtNLGQ0MT5TQlMyvnH4RRn3BcxMqyAaoWKuWmRaeOTR6dpTbZLxUK4/F7ItOA/eKHuy/o1cpHmdCZfhWowAJKWCfvsXroyDSK3udyMlyWvjoM+MiGZRSyAWLkGXUiY1agIGQapZhv5jPlLUS0RlJ7XvKzapewUEmIyDiCU2UBR1gHPGpCN9tbVz3ov+bR/cb7v5AqvcVasH90myZ81Je8/SmWU8FUWGFZyAAdsNLyAjqyqGd6fZ1023J8YxXwKgbpBpIcHDMw1Jz0UOGce1Rd2nxW929t+8nXU5Pltj/yLifcTJHvkedAtKmWrd2No+WcjdsQZ1gC+/kPdU9tTsZv1T7BcUMTjLDCAJQW2ddpSnlpUxcLe6ZZ5V4J8CEw7ZFFP0yTvEH75ESewVKXJ4C8BaR9sNQl86gtEEQvUZ9vatGJKLkyy9BrX7683WX8aYGmW6Cmlbus4S2643rmfmv3oX+lnz4OYQks4s98pHtEl/nbVdHDHaDgBgTHMBIgT1/KK+IOWlgBsroM1Q2A08bQH2Cm5dbpepRcMYEm/lIK9KEVc+VU1jLacgGh5wINFLLXmgK5l6naDVSXDVuIe+R1mONaU729+8gHHvEhmj9ngKXu05+Y/qE+x3yTDnM0rcyXPo+pmmi/2NcoDFUp8NPS3Kb3rcijrgXH9FzmpKh9ljk++ZhhztKCpT/JwVbkGrwsIVrX3qtsgNicp/CneQjS7DRl2Zfr1G/KBVr/O1q6jTd1n/jXf8hRV8NasCj93sc3Hzlvsu8NUvhY+tmcfIKgMfm0TPK2aKWrukN5mHLIEkW24ehtnvJyyPkhHfLtEbIHNJBnyHymyJv80Fk0aMvOS1epoH5MG8dv6D7+L8+w1NUjZXlt+tM//fyb9QXE+wTw5nALuQogxT3ErhVWTZm9SH4z5f1S11V53eLLrb7cGnSb1GfHyvnYEvTea9aRKvI7g9w6ZMOcL7n5bJ7jMT6njIVxVBkLBAwgnUa/wS05BiFfFnMPaxnKcK91+jbhHk3sPd0nh7v/WmA02atinfzWn3rqJp2ydwvg2zT48w2SidbB+zFXeX++XmGkjMnm1l6fao8BecJLef5WCzkAV/doAZvt/O2syj459cTRj68cyQGbvj/g8jsFJq47Vr1e+0+LAEhllQNUxWeV3iXZ7d3vxOJ/HZtV2csCm43v0L/z/8X//OQNi9nOjdpLfa1uXNdq7XtYm7sXa916UFZ1UL54Oul29Tuyuf6bAAE1Jt8AlrWF9VZLlB5vDfItAfr+50nzBPhkDRDjhKCvWK04QHIMrhrkabWCpNlSb/fln8foVyOjbkf8TmhHRa8yFk/KZz8hpUcVv6bGD5T5jx7pfvcWPeS/vPD/AUg2fXs/C6zNAAAAAElFTkSuQmCC",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.spotSolWallet?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.spotSolWallet;try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const _E="Tokenary";class ZC extends Ht{constructor(e={}){super(),this.name=_E,this.url="https://tokenary.io/get",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMzRweCIgaGVpZ2h0PSIzNHB4IiB2aWV3Qm94PSIwIDAgMzQgMzQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+T3ZhbDwvdGl0bGU+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBmaWxsPSIjMkM3Q0Y1IiBjeD0iMTciIGN5PSIxNyIgcj0iMTciPjwvY2lyY2xlPgogICAgPC9nPgo8L3N2Zz4=",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.tokenarySolana?.isTokenary?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.tokenarySolana;try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const EE="TokenPocket";class GC extends Ht{constructor(e={}){super(),this.name=EE,this.url="https://tokenpocket.pro",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGc+CjxwYXRoIGQ9Ik0xMDQxLjUyIDBILTI3VjEwMjRIMTA0MS41MlYwWiIgZmlsbD0iIzI5ODBGRSIvPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNDA4XzIyNSkiPgo8cGF0aCBkPSJNNDA2Ljc5NiA0MzguNjQzSDQwNi45MjdDNDA2Ljc5NiA0MzcuODU3IDQwNi43OTYgNDM2Ljk0IDQwNi43OTYgNDM2LjE1NFY0MzguNjQzWiIgZmlsbD0iIzI5QUVGRiIvPgo8cGF0aCBkPSJNNjY3LjYwMiA0NjMuNTMzSDUyMy4yNDlWNzI0LjA3NkM1MjMuMjQ5IDczNi4zODkgNTMzLjIwNCA3NDYuMzQ1IDU0NS41MTcgNzQ2LjM0NUg2NDUuMzMzQzY1Ny42NDcgNzQ2LjM0NSA2NjcuNjAyIDczNi4zODkgNjY3LjYwMiA3MjQuMDc2VjQ2My41MzNaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNDUzLjU2MyAyNzdINDQ4LjcxNkgxOTAuMjY5QzE3Ny45NTUgMjc3IDE2OCAyODYuOTU1IDE2OCAyOTkuMjY5VjM4OS42NTNDMTY4IDQwMS45NjcgMTc3Ljk1NSA0MTEuOTIyIDE5MC4yNjkgNDExLjkyMkgyNTAuOTE4SDI3NS4wMjFWNDM4LjY0NFY3MjQuNzMxQzI3NS4wMjEgNzM3LjA0NSAyODQuOTc2IDc0NyAyOTcuMjg5IDc0N0gzOTIuMTI4QzQwNC40NDEgNzQ3IDQxNC4zOTYgNzM3LjA0NSA0MTQuMzk2IDcyNC43MzFWNDM4LjY0NFY0MzYuMTU2VjQxMS45MjJINDM4LjQ5OUg0NDguMzIzSDQ1My4xN0M0OTAuMzcyIDQxMS45MjIgNTIwLjYzMSAzODEuNjYzIDUyMC42MzEgMzQ0LjQ2MUM1MjEuMDI0IDMwNy4yNTkgNDkwLjc2NSAyNzcgNDUzLjU2MyAyNzdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNjY3LjczNSA0NjMuNTMzVjY0NS4zNUM2NzIuNzEzIDY0Ni41MjkgNjc3LjgyMSA2NDcuNDQ2IDY4My4wNjEgNjQ4LjIzMkM2OTAuMzk3IDY0OS4yOCA2OTcuOTk0IDY0OS45MzUgNzA1LjU5MiA2NTAuMDY2QzcwNS45ODUgNjUwLjA2NiA3MDYuMzc4IDY1MC4wNjYgNzA2LjkwMiA2NTAuMDY2VjUwNS40NUM2ODUuMDI2IDUwNC4wMDkgNjY3LjczNSA0ODUuODAxIDY2Ny43MzUgNDYzLjUzM1oiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl80MDhfMjI1KSIvPgo8cGF0aCBkPSJNNzA5Ljc4MSAyNzdDNjA2LjgyMiAyNzcgNTIzLjI0OSAzNjAuNTczIDUyMy4yNDkgNDYzLjUzM0M1MjMuMjQ5IDU1Mi4wODQgNTg0Ljk0NiA2MjYuMjI1IDY2Ny43MzMgNjQ1LjM1VjQ2My41MzNDNjY3LjczMyA0NDAuMzQ3IDY4Ni41OTYgNDIxLjQ4NCA3MDkuNzgxIDQyMS40ODRDNzMyLjk2NyA0MjEuNDg0IDc1MS44MyA0NDAuMzQ3IDc1MS44MyA0NjMuNTMzQzc1MS44MyA0ODMuMDUxIDczOC42IDQ5OS40MjUgNzIwLjUyMyA1MDQuMTRDNzE3LjExNyA1MDUuMDU3IDcxMy40NDkgNTA1LjU4MSA3MDkuNzgxIDUwNS41ODFWNjUwLjA2NkM3MTMuNDQ5IDY1MC4wNjYgNzE2Ljk4NiA2NDkuOTM1IDcyMC41MjMgNjQ5LjgwNEM4MTguNTA1IDY0NC4xNzEgODk2LjMxNCA1NjIuOTU2IDg5Ni4zMTQgNDYzLjUzM0M4OTYuNDQ1IDM2MC41NzMgODEyLjg3MiAyNzcgNzA5Ljc4MSAyNzdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNzA5Ljc4IDY1MC4wNjZWNTA1LjU4MUM3MDguNzMzIDUwNS41ODEgNzA3LjgxNiA1MDUuNTgxIDcwNi43NjggNTA1LjQ1VjY1MC4wNjZDNzA3LjgxNiA2NTAuMDY2IDcwOC44NjQgNjUwLjA2NiA3MDkuNzggNjUwLjA2NloiIGZpbGw9IndoaXRlIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzQwOF8yMjUiIHgxPSI3MDkuODQ0IiB5MT0iNTU2LjgyNyIgeDI9IjY2Ny43NTMiIHkyPSI1NTYuODI3IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IndoaXRlIi8+CjxzdG9wIG9mZnNldD0iMC45NjY3IiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwLjMyMzMiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwLjMiLz4KPC9saW5lYXJHcmFkaWVudD4KPGNsaXBQYXRoIGlkPSJjbGlwMF80MDhfMjI1Ij4KPHJlY3Qgd2lkdGg9IjcyOC40NDgiIGhlaWdodD0iNDcwIiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY4IDI3NykiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.solana?.isTokenPocket?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.solana;try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("disconnect"))}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;Gn(e)?n?.length&&e.sign(n):(e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n)),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const DE="Torus";class KC extends Ht{constructor({params:e={showTorusButton:!1}}={params:{showTorusButton:!1}}){super(),this.name=DE,this.url="https://tor.us",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMyAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYuNSIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzAzNjRGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjIxODYgOS40OTIxOUMxMC40NTM5IDkuNDkyMTkgOS44MzM5OCAxMC4xMTIxIDkuODMzOTggMTAuODc2OFYxMi40ODk4QzkuODMzOTggMTMuMjU0NSAxMC40NTM5IDEzLjg3NDQgMTEuMjE4NiAxMy44NzQ0SDEzLjY2ODRWMjIuODk3NkMxMy42Njg0IDIzLjY2MjMgMTQuMjg4MyAyNC4yODIyIDE1LjA1MyAyNC4yODIySDE2LjY2NkMxNy40MzA3IDI0LjI4MjIgMTguMDUwNiAyMy42NjIzIDE4LjA1MDYgMjIuODk3NlYxMi41MDE1QzE4LjA1MDYgMTIuNDk3NiAxOC4wNTA2IDEyLjQ5MzcgMTguMDUwNiAxMi40ODk4VjEwLjg3NjhDMTguMDUwNiAxMC4xMTIxIDE3LjQzMDcgOS40OTIxOSAxNi42NjYgOS40OTIxOUgxNS4wNTNIMTEuMjE4NloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMS4zMzc2IDEzLjg3NDRDMjIuNTQ3NyAxMy44NzQ0IDIzLjUyODcgMTIuODkzNCAyMy41Mjg3IDExLjY4MzNDMjMuNTI4NyAxMC40NzMyIDIyLjU0NzcgOS40OTIxOSAyMS4zMzc2IDkuNDkyMTlDMjAuMTI3NSA5LjQ5MjE5IDE5LjE0NjUgMTAuNDczMiAxOS4xNDY1IDExLjY4MzNDMTkuMTQ2NSAxMi44OTM0IDIwLjEyNzUgMTMuODc0NCAyMS4zMzc2IDEzLjg3NDRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.Loadable,this._connecting=!1,this._wallet=null,this._publicKey=null,this._params=e}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isLoggedIn}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Loadable)throw new yt;this._connecting=!0;let e;try{e=(await pn(async()=>{const{default:n}=await import("./solanaEmbed.esm-DkY9XPFY.js");return{default:n}},__vite__mapDeps([16,1,2,3,4,11,7]))).default}catch(n){throw new ua(n?.message,n)}let t;try{t=window.torus||new e}catch(n){throw new Qa(n?.message,n)}if(!t.isInitialized)try{await t.init(this._params)}catch(n){throw new Tr(n?.message,n)}let i;try{i=await t.login()}catch(n){throw new Et(n?.message,n)}let s;try{s=new ht(i[0])}catch(n){throw new ut(n?.message,n)}this._wallet=t,this._publicKey=s,this.emit("connect",s)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{e.isLoggedIn&&await e.cleanUp()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signMessage(e)}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const SE="Trezor";class JC extends la{constructor(e={}){super(),this.name=SE,this.url="https://trezor.io",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEwOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGQ9Ik01NCAwYzI5LjgyNCAwIDU0IDI0LjE3NiA1NCA1NHMtMjQuMTc2IDU0LTU0IDU0UzAgODMuODI0IDAgNTQgMjQuMTc2IDAgNTQgMHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNNzUuMjUgMzMuMzA1Qzc1LjI1IDIyLjIwNSA2NS42NjIgMTMgNTQgMTNjLTExLjY3MiAwLTIxLjI1OCA5LjIxMi0yMS4yNTggMjAuMzA1djYuNDlIMjR2NDYuNjgzTDUzLjk5IDEwMC41IDg0IDg2LjQ3NXYtNDYuNDdoLTguNzQ1bC0uMDA3LTYuNjk4LjAwMi0uMDAyem0tMzEuNjcgMGMwLTUuMjMyIDQuNTg1LTkuNDIgMTAuNDE4LTkuNDIgNS44MzUgMCAxMC40MTcgNC4xODggMTAuNDE3IDkuNDJ2Ni40OUg0My41OHYtNi40OXptMjguMzM1IDQ1LjYzN0w1My45OSA4Ny4zMmwtMTcuOTItOC4zNzJWNTAuODloMzUuODQ1djI4LjA1MnoiIGZpbGw9IiMxNzE3MTciLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDEwOHYxMDhIMHoiLz48L2NsaXBQYXRoPjwvZGVmcz48L3N2Zz4=",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.Loadable,this._onDeviceEvent=t=>{t.type==="device-disconnect"&&this._disconnected()},this._disconnected=async()=>{const t=this._wallet;if(t){this._wallet=null,this._publicKey=null;try{t.off("DEVICE_EVENT",this._onDeviceEvent),t.dispose()}catch(i){this.emit("error",new Mr(i?.message,i))}this.emit("error",new $r),this.emit("disconnect")}},this._derivationPath=e.derivationPath||"m/44'/501'/0'/0'",this._wallet=null,this._connectUrl=e.connectUrl?.replace(/\/*$/,"/"),this._connecting=!1,this._publicKey=null,this._appName=e.appName||"Wallet Adapter",this._email=e.email||"noreply@anza.xyz"}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Loadable)throw new yt;this._connecting=!0;let e;try{const{default:s}=await pn(async()=>{const{default:n}=await import("./index-D_w94HBA.js").then(c=>c.i);return{default:n}},__vite__mapDeps([17,2,3,9,1,4]));e=s.default}catch(s){throw new ua(s?.message,s)}try{await e.init({manifest:{appName:this._appName,email:this._email,appUrl:window.location.href},lazyLoad:!0,...this._connectUrl?{connectSrc:this._connectUrl,iframeSrc:this._connectUrl}:{}})}catch(s){throw new Qa(s?.message,s)}let t;try{t=await e.solanaGetPublicKey({path:this._derivationPath})}catch(s){throw new Et(s?.message,s)}if(!t.success)throw new Et(t.payload?.error,t.payload);let i;try{i=new ht(We.from(t.payload.publicKey,"hex"))}catch(s){throw new ut(s?.message,s)}e.on("DEVICE_EVENT",this._onDeviceEvent),this._wallet=e,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{e.off("DEVICE_EVENT",this._onDeviceEvent),await e.dispose()}catch(t){this.emit("error",new Mr(t?.message,t))}this.emit("disconnect")}}async signTransaction(e){try{const t=this._wallet,i=this._publicKey;if(!t||!i)throw new Le;const s=Gn(e)?e.message.serialize():e.serializeMessage();let n;try{n=await t.solanaSignTransaction({path:this._derivationPath,serializedTx:We.from(s).toString("hex")})}catch(c){throw new Ye(c?.message,c)}if(!n.success)throw new Ye(n.payload?.error,n.payload);try{const c=We.from(n.payload.signature,"hex");e.addSignature(i,c)}catch(c){throw new Ye(c?.message,c)}return e}catch(t){throw this.emit("error",t),t}}}const xE="Trust";class XC extends Ht{constructor(e={}){super(),this.name=xE,this.url="https://trustwallet.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTkyMCAxMDgwIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6dXJsKCNsaW5lYXItZ3JhZGllbnQpO30uY2xzLTJ7ZmlsbDojMDUwMGZmO308L3N0eWxlPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iMTEyMy4yNiIgeTE9IjE4NjUuNzgiIHgyPSI5NTQuNjEiIHkyPSIxMzM3LjUiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAyMTgyKSBzY2FsZSgxIC0xKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iLjAyIiBzdG9wLWNvbG9yPSJibHVlIi8+PHN0b3Agb2Zmc2V0PSIuMDgiIHN0b3AtY29sb3I9IiMwMDk0ZmYiLz48c3RvcCBvZmZzZXQ9Ii4xNiIgc3RvcC1jb2xvcj0iIzQ4ZmY5MSIvPjxzdG9wIG9mZnNldD0iLjQyIiBzdG9wLWNvbG9yPSIjMDA5NGZmIi8+PHN0b3Agb2Zmc2V0PSIuNjgiIHN0b3AtY29sb3I9IiMwMDM4ZmYiLz48c3RvcCBvZmZzZXQ9Ii45IiBzdG9wLWNvbG9yPSIjMDUwMGZmIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJtNzM4LjcxLDQyMy40MWwyMjEuNDUtNzIuM3Y1MDAuNTJjLTE1OC4xOC02Ni43NC0yMjEuNDUtMTk0LjY1LTIyMS40NS0yNjYuOTR2LTE2MS4yOFoiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Im0xMTgxLjYyLDQyMy40MWwtMjIxLjQ1LTcyLjN2NTAwLjUyYzE1OC4xOC02Ni43NCwyMjEuNDUtMTk0LjY1LDIyMS40NS0yNjYuOTR2LTE2MS4yOFoiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Im04MjUuOTEsMjMwLjg1aDMwLjl2MTcuMzFjMTAuMTMtMTUuNTYsMjEuNzgtMTcuMzEsMzguODQtMTcuMzF2MzAuNmgtNy43N2MtMjAuNDQsMC0zMC4yMyw5LjYyLTMwLjIzLDI4LjY3djMyLjUyaC0zMS43NXYtOTEuNzlaIi8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJtOTk4Ljc4LDMyMi42M2gtMzEuNzV2LTguNzVjLTYuOTMsOC4wNS0xNi4zOCwxMS41NC0yOC4wMywxMS41NC0yMi4xMiwwLTM0LjYyLTEzLjExLTM0LjYyLTM3LjI0di01Ny4zNGgzMS43NXY1MC4xOGMwLDExLjM2LDUuNTcsMTgsMTUuMDIsMThzMTUuODgtNi40NywxNS44OC0xNy40OHYtNTAuN2gzMS43NXY5MS43OVoiLz48cGF0aCBjbGFzcz0iY2xzLTIiIGQ9Im0xMDA2LjU0LDI5NC4zaDI5LjczYzEuMzYsNi42NCw1LjkxLDkuNDMsMTYuODgsOS40Myw4Ljk1LDAsMTQuMTktMi4wOSwxNC4xOS01Ljk0LDAtMi45OC0yLjU0LTQuOS05Ljc5LTYuNDdsLTIzLjk4LTUuNDJjLTE2LjA0LTMuNjYtMjQuMTUtMTIuOTMtMjQuMTUtMjcuOCwwLTE5LjU5LDE0LjM1LTI5LjczLDQyLjIxLTI5LjczczQxLjU0LDkuODgsNDMuOTEsMzEuMDRoLTI5LjU1Yy0uNS01LjU5LTYuMjUtOS4wMS0xNS43LTkuMDEtNy41OSwwLTEyLjQ5LDIuNDQtMTIuNDksNi4xMiwwLDMuMTQsMy4yLDUuNTksOS42Myw3LjE4bDI1LjE2LDYuMTJjMTYuNTQsNC4wMSwyNC40OSwxMi40MSwyNC40OSwyNi4wNSwwLDE4Ljg5LTE2LjM4LDMwLjA4LTQ0LjIzLDMwLjA4cy00Ni4yNy0xMi4wNi00Ni4yNy0zMS42NWgtLjAzWiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0ibTExODEuNjIsMjU5LjR2LTI4LjU1aC03OC4zNXYyOC41NmgyMy4zOHY2My4yMmgzMS41OHYtNjMuMjRoMjMuMzlaIi8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJtODE3LjA4LDI1OS40di0yOC41NWgtNzguMzV2MjguNTZoMjMuMzh2NjMuMjJoMzEuNTh2LTYzLjI0aDIzLjM4WiIvPjwvc3ZnPg==",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.trustwallet?.solana?.isTrust?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.trustwallet.solana;if(!e.isConnected)try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,i={}){try{const s=this._wallet;if(!s)throw new Le;try{const{signers:n,...c}=i;e=await this.prepareTransaction(e,t,c),n?.length&&e.partialSign(...n),c.preflightCommitment=c.preflightCommitment||t.commitment;const{signature:l}=await s.signAndSendTransaction(e,c);return l}catch(n){throw n instanceof Cn?n:new On(n?.message,n)}}catch(s){throw this.emit("error",s),s}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const TE="Burner Wallet";class e6 extends Qj{constructor(){super(),this.name=TE,this.url="https://github.com/anza-xyz/wallet-adapter#usage",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zNCAxMC42djIuN2wtOS41IDE2LjVoLTQuNmw2LTEwLjVhMi4xIDIuMSAwIDEgMCAyLTMuNGw0LjgtOC4zYTQgNCAwIDAgMSAxLjMgM1ptLTQuMyAxOS4xaC0uNmw0LjktOC40djQuMmMwIDIuMy0yIDQuMy00LjMgNC4zWm0yLTI4LjRjLS4zLS44LTEtMS4zLTItMS4zaC0xLjlsLTIuNCA0LjNIMzBsMS43LTNabS0zIDVoLTQuNkwxMC42IDI5LjhoNC43TDI4LjggNi40Wk0xOC43IDBoNC42bC0yLjUgNC4zaC00LjZMMTguNiAwWk0xNSA2LjRoNC42TDYgMjkuOEg0LjJjLS44IDAtMS43LS4zLTIuNC0uOEwxNSA2LjRaTTE0IDBIOS40TDcgNC4zaDQuNkwxNCAwWm0tMy42IDYuNEg1LjdMMCAxNi4ydjhMMTAuMyA2LjRaTTQuMyAwaC40TDAgOC4ydi00QzAgMiAxLjkgMCA0LjMgMFoiIGZpbGw9IiM5OTQ1RkYiLz48L3N2Zz4=",this.supportedTransactionVersions=new Set(["legacy",0]),this._keypair=null,console.warn("Your application is presently configured to use the `UnsafeBurnerWalletAdapter`. Find and remove it, then replace it with a list of adapters for wallets you would like your application to support. See https://github.com/anza-xyz/wallet-adapter#usage for an example.")}get connecting(){return!1}get publicKey(){return this._keypair&&this._keypair.publicKey}get readyState(){return ie.Loadable}async connect(){this._keypair=new M1,this.emit("connect",this._keypair.publicKey)}async disconnect(){this._keypair=null,this.emit("disconnect")}async signTransaction(e){if(!this._keypair)throw new Le;return Gn(e)?e.sign([this._keypair]):e.partialSign(this._keypair),e}async signMessage(e){if(!this._keypair)throw new Le;return N1.sign(e,this._keypair.secretKey.slice(0,32))}async signIn(e={}){const{publicKey:t,secretKey:i}=this._keypair||(this._keypair=new M1),s=e.domain||window.location.host,n=e.address||t.toBase58(),c=Vj({...e,domain:s,address:n}),l=N1.sign(c,i.slice(0,32));return this.emit("connect",t),{account:{address:n,publicKey:t.toBytes(),chains:[],features:[]},signedMessage:c,signature:l}}}var Af;(function(r){r.Mainnet="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",r.Devnet="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",r.Deprecated_Mainnet="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",r.Deprecated_Devnet="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"})(Af||(Af={}));var jn;(function(r){r.signTransaction="solana_signTransaction",r.signMessage="solana_signMessage",r.signAndSendTransaction="solana_signAndSendTransaction",r.signAndSendAllTransactions="solana_signAndSendAllTransactions",r.signAllTransactions="solana_signAllTransactions"})(jn||(jn={}));const ei={Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"};var Td={};var Ow=function(r,e){return Ow=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Ow(r,e)};function t6(r,e){Ow(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Lw=function(){return Lw=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Lw.apply(this,arguments)};function r6(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t}function i6(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var l=r.length-1;l>=0;l--)(c=r[l])&&(n=(s<3?c(n):s>3?c(e,t,n):c(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n}function n6(r,e){return function(t,i){e(t,i,r)}}function s6(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function a6(r,e,t,i){function s(n){return n instanceof t?n:new t(function(c){c(n)})}return new(t||(t=Promise))(function(n,c){function l(g){try{f(i.next(g))}catch(m){c(m)}}function u(g){try{f(i.throw(g))}catch(m){c(m)}}function f(g){g.done?n(g.value):s(g.value).then(l,u)}f((i=i.apply(r,e||[])).next())})}function o6(r,e){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(g){return u([f,g])}}function u(f){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,s&&(n=f[0]&2?s.return:f[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,f[1])).done)return n;switch(s=0,n&&(f=[f[0]&2,n.value]),f[0]){case 0:case 1:n=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,s=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!n||f[1]>n[0]&&f[1]<n[3])){t.label=f[1];break}if(f[0]===6&&t.label<n[1]){t.label=n[1],n=f;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(f);break}n[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(g){f=[6,g],s=0}finally{i=n=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function c6(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function h6(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function zw(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jE(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),s,n=[],c;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(l){c={error:l}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n}function l6(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(jE(arguments[e]));return r}function u6(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),s=0,e=0;e<t;e++)for(var n=arguments[e],c=0,l=n.length;c<l;c++,s++)i[s]=n[c];return i}function Yh(r){return this instanceof Yh?(this.v=r,this):new Yh(r)}function f6(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),s,n=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(N){i[N]&&(s[N]=function(A){return new Promise(function(_,E){n.push([N,A,_,E])>1||l(N,A)})})}function l(N,A){try{u(i[N](A))}catch(_){m(n[0][3],_)}}function u(N){N.value instanceof Yh?Promise.resolve(N.value.v).then(f,g):m(n[0][2],N)}function f(N){l("next",N)}function g(N){l("throw",N)}function m(N,A){N(A),n.shift(),n.length&&l(n[0][0],n[0][1])}}function d6(r){var e,t;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,n){e[s]=r[s]?function(c){return(t=!t)?{value:Yh(r[s](c)),done:s==="return"}:n?n(c):c}:n}}function p6(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof zw=="function"?zw(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=r[n]&&function(c){return new Promise(function(l,u){c=r[n](c),s(l,u,c.done,c.value)})}}function s(n,c,l,u){Promise.resolve(u).then(function(f){n({value:f,done:l})},c)}}function g6(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function y6(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function w6(r){return r&&r.__esModule?r:{default:r}}function m6(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function v6(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const b6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Lw},__asyncDelegator:d6,__asyncGenerator:f6,__asyncValues:p6,__await:Yh,__awaiter:a6,__classPrivateFieldGet:m6,__classPrivateFieldSet:v6,__createBinding:c6,__decorate:i6,__exportStar:h6,__extends:t6,__generator:o6,__importDefault:w6,__importStar:y6,__makeTemplateObject:g6,__metadata:s6,__param:n6,__read:jE,__rest:r6,__spread:l6,__spreadArrays:u6,__values:zw},Symbol.toStringTag,{value:"Module"})),Hf=Gm(b6);var jd={},Kc={},D1;function M6(){if(D1)return Kc;D1=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Kc.delay=r,Kc}var Ma={},Cd={},Na={},S1;function N6(){return S1||(S1=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.ONE_THOUSAND=Na.ONE_HUNDRED=void 0,Na.ONE_HUNDRED=100,Na.ONE_THOUSAND=1e3),Na}var Od={},x1;function I6(){return x1||(x1=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365})(Od)),Od}var T1;function CE(){return T1||(T1=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Hf;e.__exportStar(N6(),r),e.__exportStar(I6(),r)})(Cd)),Cd}var j1;function A6(){if(j1)return Ma;j1=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.fromMiliseconds=Ma.toMiliseconds=void 0;const r=CE();function e(i){return i*r.ONE_THOUSAND}Ma.toMiliseconds=e;function t(i){return Math.floor(i/r.ONE_THOUSAND)}return Ma.fromMiliseconds=t,Ma}var C1;function _6(){return C1||(C1=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Hf;e.__exportStar(M6(),r),e.__exportStar(A6(),r)})(jd)),jd}var go={},O1;function E6(){if(O1)return go;O1=1,Object.defineProperty(go,"__esModule",{value:!0}),go.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const i=this.get(t);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const s=Date.now()-i.started;this.timestamps.set(t,{started:i.started,elapsed:s})}get(t){const i=this.timestamps.get(t);if(typeof i>"u")throw new Error(`No timestamp found for label: ${t}`);return i}elapsed(t){const i=this.get(t);return i.elapsed||Date.now()-i.started}}return go.Watch=r,go.default=r,go}var Ld={},Jc={},L1;function D6(){if(L1)return Jc;L1=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.IWatch=void 0;class r{}return Jc.IWatch=r,Jc}var z1;function S6(){return z1||(z1=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),Hf.__exportStar(D6(),r)})(Ld)),Ld}var k1;function x6(){return k1||(k1=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Hf;e.__exportStar(_6(),r),e.__exportStar(E6(),r),e.__exportStar(S6(),r),e.__exportStar(CE(),r)})(Td)),Td}var ne=x6();class wn{}let T6=class extends wn{constructor(e){super()}};const P1=ne.FIVE_SECONDS,Kn={pulse:"heartbeat_pulse"};let OE=class LE extends T6{constructor(e){super(e),this.events=new ii.EventEmitter,this.interval=P1,this.interval=e?.interval||P1}static async init(e){const t=new LE(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ne.toMiliseconds(this.interval))}pulse(){this.events.emit(Kn.pulse)}};const j6=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,C6=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,O6=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function L6(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){z6(r);return}return e}function z6(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function su(r,e={}){if(typeof r!="string")return r;if(r[0]==='"'&&r[r.length-1]==='"'&&r.indexOf("\\")===-1)return r.slice(1,-1);const t=r.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!O6.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(j6.test(r)||C6.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,L6)}return JSON.parse(r)}catch(i){if(e.strict)throw i;return r}}function k6(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function hi(r,...e){try{return k6(r(...e))}catch(t){return Promise.reject(t)}}function P6(r){const e=typeof r;return r===null||e!=="object"&&e!=="function"}function R6(r){const e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function ef(r){if(P6(r))return String(r);if(R6(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return ef(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const kw="base64:";function U6(r){return typeof r=="string"?r:kw+q6(r)}function $6(r){return typeof r!="string"||!r.startsWith(kw)?r:B6(r.slice(kw.length))}function B6(r){return globalThis.Buffer?We.from(r,"base64"):Uint8Array.from(globalThis.atob(r),e=>e.codePointAt(0))}function q6(r){return globalThis.Buffer?We.from(r).toString("base64"):globalThis.btoa(String.fromCodePoint(...r))}function Hi(r){return r&&r.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function Y6(...r){return Hi(r.join(":"))}function au(r){return r=Hi(r),r?r+":":""}function W6(r,e){if(e===void 0)return!0;let t=0,i=r.indexOf(":");for(;i>-1;)t++,i=r.indexOf(":",i+1);return t<=e}function Q6(r,e){return e?r.startsWith(e)&&r[r.length-1]!=="$":r[r.length-1]!=="$"}const V6="memory",F6=()=>{const r=new Map;return{name:V6,getInstance:()=>r,hasItem(e){return r.has(e)},getItem(e){return r.get(e)??null},getItemRaw(e){return r.get(e)??null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return[...r.keys()]},clear(){r.clear()},dispose(){r.clear()}}};function H6(r={}){const e={mounts:{"":r.driver||F6()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=f=>{for(const g of e.mountpoints)if(f.startsWith(g))return{base:g,relativeKey:f.slice(g.length),driver:e.mounts[g]};return{base:"",relativeKey:f,driver:e.mounts[""]}},i=(f,g)=>e.mountpoints.filter(m=>m.startsWith(f)||g&&f.startsWith(m)).map(m=>({relativeBase:f.length>m.length?f.slice(m.length):void 0,mountpoint:m,driver:e.mounts[m]})),s=(f,g)=>{if(e.watching){g=Hi(g);for(const m of e.watchListeners)m(f,g)}},n=async()=>{if(!e.watching){e.watching=!0;for(const f in e.mounts)e.unwatch[f]=await R1(e.mounts[f],s,f)}},c=async()=>{if(e.watching){for(const f in e.unwatch)await e.unwatch[f]();e.unwatch={},e.watching=!1}},l=(f,g,m)=>{const N=new Map,A=_=>{let E=N.get(_.base);return E||(E={driver:_.driver,base:_.base,items:[]},N.set(_.base,E)),E};for(const _ of f){const E=typeof _=="string",x=Hi(E?_:_.key),S=E?void 0:_.value,D=E||!_.options?g:{...g,..._.options},C=t(x);A(C).items.push({key:x,value:S,relativeKey:C.relativeKey,options:D})}return Promise.all([...N.values()].map(_=>m(_))).then(_=>_.flat())},u={hasItem(f,g={}){f=Hi(f);const{relativeKey:m,driver:N}=t(f);return hi(N.hasItem,m,g)},getItem(f,g={}){f=Hi(f);const{relativeKey:m,driver:N}=t(f);return hi(N.getItem,m,g).then(A=>su(A))},getItems(f,g={}){return l(f,g,m=>m.driver.getItems?hi(m.driver.getItems,m.items.map(N=>({key:N.relativeKey,options:N.options})),g).then(N=>N.map(A=>({key:Y6(m.base,A.key),value:su(A.value)}))):Promise.all(m.items.map(N=>hi(m.driver.getItem,N.relativeKey,N.options).then(A=>({key:N.key,value:su(A)})))))},getItemRaw(f,g={}){f=Hi(f);const{relativeKey:m,driver:N}=t(f);return N.getItemRaw?hi(N.getItemRaw,m,g):hi(N.getItem,m,g).then(A=>$6(A))},async setItem(f,g,m={}){if(g===void 0)return u.removeItem(f);f=Hi(f);const{relativeKey:N,driver:A}=t(f);A.setItem&&(await hi(A.setItem,N,ef(g),m),A.watch||s("update",f))},async setItems(f,g){await l(f,g,async m=>{if(m.driver.setItems)return hi(m.driver.setItems,m.items.map(N=>({key:N.relativeKey,value:ef(N.value),options:N.options})),g);m.driver.setItem&&await Promise.all(m.items.map(N=>hi(m.driver.setItem,N.relativeKey,ef(N.value),N.options)))})},async setItemRaw(f,g,m={}){if(g===void 0)return u.removeItem(f,m);f=Hi(f);const{relativeKey:N,driver:A}=t(f);if(A.setItemRaw)await hi(A.setItemRaw,N,g,m);else if(A.setItem)await hi(A.setItem,N,U6(g),m);else return;A.watch||s("update",f)},async removeItem(f,g={}){typeof g=="boolean"&&(g={removeMeta:g}),f=Hi(f);const{relativeKey:m,driver:N}=t(f);N.removeItem&&(await hi(N.removeItem,m,g),(g.removeMeta||g.removeMata)&&await hi(N.removeItem,m+"$",g),N.watch||s("remove",f))},async getMeta(f,g={}){typeof g=="boolean"&&(g={nativeOnly:g}),f=Hi(f);const{relativeKey:m,driver:N}=t(f),A=Object.create(null);if(N.getMeta&&Object.assign(A,await hi(N.getMeta,m,g)),!g.nativeOnly){const _=await hi(N.getItem,m+"$",g).then(E=>su(E));_&&typeof _=="object"&&(typeof _.atime=="string"&&(_.atime=new Date(_.atime)),typeof _.mtime=="string"&&(_.mtime=new Date(_.mtime)),Object.assign(A,_))}return A},setMeta(f,g,m={}){return this.setItem(f+"$",g,m)},removeMeta(f,g={}){return this.removeItem(f+"$",g)},async getKeys(f,g={}){f=au(f);const m=i(f,!0);let N=[];const A=[];let _=!0;for(const x of m){x.driver.flags?.maxDepth||(_=!1);const S=await hi(x.driver.getKeys,x.relativeBase,g);for(const D of S){const C=x.mountpoint+Hi(D);N.some(j=>C.startsWith(j))||A.push(C)}N=[x.mountpoint,...N.filter(D=>!D.startsWith(x.mountpoint))]}const E=g.maxDepth!==void 0&&!_;return A.filter(x=>(!E||W6(x,g.maxDepth))&&Q6(x,f))},async clear(f,g={}){f=au(f),await Promise.all(i(f,!1).map(async m=>{if(m.driver.clear)return hi(m.driver.clear,m.relativeBase,g);if(m.driver.removeItem){const N=await m.driver.getKeys(m.relativeBase||"",g);return Promise.all(N.map(A=>m.driver.removeItem(A,g)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(f=>U1(f)))},async watch(f){return await n(),e.watchListeners.push(f),async()=>{e.watchListeners=e.watchListeners.filter(g=>g!==f),e.watchListeners.length===0&&await c()}},async unwatch(){e.watchListeners=[],await c()},mount(f,g){if(f=au(f),f&&e.mounts[f])throw new Error(`already mounted at ${f}`);return f&&(e.mountpoints.push(f),e.mountpoints.sort((m,N)=>N.length-m.length)),e.mounts[f]=g,e.watching&&Promise.resolve(R1(g,s,f)).then(m=>{e.unwatch[f]=m}).catch(console.error),u},async unmount(f,g=!0){f=au(f),!(!f||!e.mounts[f])&&(e.watching&&f in e.unwatch&&(e.unwatch[f]?.(),delete e.unwatch[f]),g&&await U1(e.mounts[f]),e.mountpoints=e.mountpoints.filter(m=>m!==f),delete e.mounts[f])},getMount(f=""){f=Hi(f)+":";const g=t(f);return{driver:g.driver,base:g.base}},getMounts(f="",g={}){return f=Hi(f),i(f,g.parents).map(N=>({driver:N.driver,base:N.mountpoint}))},keys:(f,g={})=>u.getKeys(f,g),get:(f,g={})=>u.getItem(f,g),set:(f,g,m={})=>u.setItem(f,g,m),has:(f,g={})=>u.hasItem(f,g),del:(f,g={})=>u.removeItem(f,g),remove:(f,g={})=>u.removeItem(f,g)};return u}function R1(r,e,t){return r.watch?r.watch((i,s)=>e(i,t+s)):()=>{}}async function U1(r){typeof r.dispose=="function"&&await hi(r.dispose)}function io(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function zE(r,e){let t;const i=()=>{if(t)return t;const s=indexedDB.open(r);return s.onupgradeneeded=()=>s.result.createObjectStore(e),t=io(s),t.then(n=>{n.onclose=()=>t=void 0},()=>{}),t};return(s,n)=>i().then(c=>n(c.transaction(e,s).objectStore(e)))}let zd;function El(){return zd||(zd=zE("keyval-store","keyval")),zd}function $1(r,e=El()){return e("readonly",t=>io(t.get(r)))}function Z6(r,e,t=El()){return t("readwrite",i=>(i.put(e,r),io(i.transaction)))}function G6(r,e=El()){return e("readwrite",t=>(t.delete(r),io(t.transaction)))}function K6(r=El()){return r("readwrite",e=>(e.clear(),io(e.transaction)))}function J6(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},io(r.transaction)}function X6(r=El()){return r("readonly",e=>{if(e.getAllKeys)return io(e.getAllKeys());const t=[];return J6(e,i=>t.push(i.key)).then(()=>t)})}const eO=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),tO=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function zs(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return tO(r)}catch{return r}}function fs(r){return typeof r=="string"?r:eO(r)||""}const rO="idb-keyval";var iO=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=s=>e+s;let i;return r.dbName&&r.storeName&&(i=zE(r.dbName,r.storeName)),{name:rO,options:r,async hasItem(s){return!(typeof await $1(t(s),i)>"u")},async getItem(s){return await $1(t(s),i)??null},setItem(s,n){return Z6(t(s),n,i)},removeItem(s){return G6(t(s),i)},getKeys(){return X6(i)},clear(){return K6(i)}}};const nO="WALLET_CONNECT_V2_INDEXED_DB",sO="keyvaluestorage";let aO=class{constructor(){this.indexedDb=H6({driver:iO({dbName:nO,storeName:sO})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,fs(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},tf={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,i){this[t]=String(i)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof kd<"u"&&kd.localStorage?tf.exports=kd.localStorage:typeof window<"u"&&window.localStorage?tf.exports=window.localStorage:tf.exports=new e})();function oO(r){var e;return[r[0],zs((e=r[1])!=null?e:"")]}let cO=class{constructor(){this.localStorage=tf.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(oO)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return zs(t)}async setItem(e,t){this.localStorage.setItem(e,fs(t))}async removeItem(e){this.localStorage.removeItem(e)}};const hO="wc_storage_version",B1=1,lO=async(r,e,t)=>{const i=hO,s=await e.getItem(i);if(s&&s>=B1){t(e);return}const n=await r.getKeys();if(!n.length){t(e);return}const c=[];for(;n.length;){const l=n.shift();if(!l)continue;const u=l.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){const f=await r.getItem(l);await e.setItem(l,f),c.push(l)}}await e.setItem(i,B1),t(e),uO(r,c)},uO=async(r,e)=>{e.length&&e.forEach(async t=>{await r.removeItem(t)})};let kE=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new cO;this.storage=e;try{const t=new aO;lO(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Pd,q1;function fO(){if(q1)return Pd;q1=1;function r(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Pd=e;function e(t,i,s){var n=s&&s.stringify||r,c=1;if(typeof t=="object"&&t!==null){var l=i.length+c;if(l===1)return t;var u=new Array(l);u[0]=n(t);for(var f=1;f<l;f++)u[f]=n(i[f]);return u.join(" ")}if(typeof t!="string")return t;var g=i.length;if(g===0)return t;for(var m="",N=1-c,A=-1,_=t&&t.length||0,E=0;E<_;){if(t.charCodeAt(E)===37&&E+1<_){switch(A=A>-1?A:0,t.charCodeAt(E+1)){case 100:case 102:if(N>=g||i[N]==null)break;A<E&&(m+=t.slice(A,E)),m+=Number(i[N]),A=E+2,E++;break;case 105:if(N>=g||i[N]==null)break;A<E&&(m+=t.slice(A,E)),m+=Math.floor(Number(i[N])),A=E+2,E++;break;case 79:case 111:case 106:if(N>=g||i[N]===void 0)break;A<E&&(m+=t.slice(A,E));var x=typeof i[N];if(x==="string"){m+="'"+i[N]+"'",A=E+2,E++;break}if(x==="function"){m+=i[N].name||"<anonymous>",A=E+2,E++;break}m+=n(i[N]),A=E+2,E++;break;case 115:if(N>=g)break;A<E&&(m+=t.slice(A,E)),m+=String(i[N]),A=E+2,E++;break;case 37:A<E&&(m+=t.slice(A,E)),m+="%",A=E+2,E++,N--;break}++N}++E}return A===-1?t:(A<_&&(m+=t.slice(A)),m)}return Pd}var Rd,Y1;function dO(){if(Y1)return Rd;Y1=1;const r=fO();Rd=s;const e=k().console||{},t={mapHttpRequest:_,mapHttpResponse:_,wrapRequestSerializer:E,wrapResponseSerializer:E,wrapErrorSerializer:E,req:_,res:_,err:N};function i(P,Q){return Array.isArray(P)?P.filter(function($){return $!=="!stdSerializers.err"}):P===!0?Object.keys(Q):!1}function s(P){P=P||{},P.browser=P.browser||{};const Q=P.browser.transmit;if(Q&&typeof Q.send!="function")throw Error("pino: transmit option must have a send function");const F=P.browser.write||e;P.browser.write&&(P.browser.asObject=!0);const $=P.serializers||{},Z=i(P.browser.serialize,$);let M=P.browser.serialize;Array.isArray(P.browser.serialize)&&P.browser.serialize.indexOf("!stdSerializers.err")>-1&&(M=!1);const a=["error","fatal","warn","info","debug","trace"];typeof F=="function"&&(F.error=F.fatal=F.warn=F.info=F.debug=F.trace=F),P.enabled===!1&&(P.level="silent");const h=P.level||"info",d=Object.create(F);d.log||(d.log=x),Object.defineProperty(d,"levelVal",{get:w}),Object.defineProperty(d,"level",{get:b,set:I});const p={transmit:Q,serialize:Z,asObject:P.browser.asObject,levels:a,timestamp:A(P)};d.levels=s.levels,d.level=h,d.setMaxListeners=d.getMaxListeners=d.emit=d.addListener=d.on=d.prependListener=d.once=d.prependOnceListener=d.removeListener=d.removeAllListeners=d.listeners=d.listenerCount=d.eventNames=d.write=d.flush=x,d.serializers=$,d._serialize=Z,d._stdErrSerialize=M,d.child=y,Q&&(d._logEvent=m());function w(){return this.level==="silent"?1/0:this.levels.values[this.level]}function b(){return this._level}function I(o){if(o!=="silent"&&!this.levels.values[o])throw Error("unknown level "+o);this._level=o,n(p,d,"error","log"),n(p,d,"fatal","error"),n(p,d,"warn","error"),n(p,d,"info","log"),n(p,d,"debug","log"),n(p,d,"trace","log")}function y(o,v){if(!o)throw new Error("missing bindings for child Pino");v=v||{},Z&&o.serializers&&(v.serializers=o.serializers);const R=v.serializers;if(Z&&R){var L=Object.assign({},$,R),z=P.browser.serialize===!0?Object.keys(L):Z;delete o.serializers,u([o],z,L,this._stdErrSerialize)}function q(Y){this._childLevel=(Y._childLevel|0)+1,this.error=f(Y,o,"error"),this.fatal=f(Y,o,"fatal"),this.warn=f(Y,o,"warn"),this.info=f(Y,o,"info"),this.debug=f(Y,o,"debug"),this.trace=f(Y,o,"trace"),L&&(this.serializers=L,this._serialize=z),Q&&(this._logEvent=m([].concat(Y._logEvent.bindings,o)))}return q.prototype=this,new q(this)}return d}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=t,s.stdTimeFunctions=Object.assign({},{nullTime:S,epochTime:D,unixTime:C,isoTime:j});function n(P,Q,F,$){const Z=Object.getPrototypeOf(Q);Q[F]=Q.levelVal>Q.levels.values[F]?x:Z[F]?Z[F]:e[F]||e[$]||x,c(P,Q,F)}function c(P,Q,F){!P.transmit&&Q[F]===x||(Q[F]=(function($){return function(){const M=P.timestamp(),a=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var d=0;d<a.length;d++)a[d]=arguments[d];if(P.serialize&&!P.asObject&&u(a,this._serialize,this.serializers,this._stdErrSerialize),P.asObject?$.call(h,l(this,F,a,M)):$.apply(h,a),P.transmit){const p=P.transmit.level||Q.level,w=s.levels.values[p],b=s.levels.values[F];if(b<w)return;g(this,{ts:M,methodLevel:F,methodValue:b,transmitValue:s.levels.values[P.transmit.level||Q.level],send:P.transmit.send,val:Q.levelVal},a)}}})(Q[F]))}function l(P,Q,F,$){P._serialize&&u(F,P._serialize,P.serializers,P._stdErrSerialize);const Z=F.slice();let M=Z[0];const a={};$&&(a.time=$),a.level=s.levels.values[Q];let h=(P._childLevel|0)+1;if(h<1&&(h=1),M!==null&&typeof M=="object"){for(;h--&&typeof Z[0]=="object";)Object.assign(a,Z.shift());M=Z.length?r(Z.shift(),Z):void 0}else typeof M=="string"&&(M=r(Z.shift(),Z));return M!==void 0&&(a.msg=M),a}function u(P,Q,F,$){for(const Z in P)if($&&P[Z]instanceof Error)P[Z]=s.stdSerializers.err(P[Z]);else if(typeof P[Z]=="object"&&!Array.isArray(P[Z]))for(const M in P[Z])Q&&Q.indexOf(M)>-1&&M in F&&(P[Z][M]=F[M](P[Z][M]))}function f(P,Q,F){return function(){const $=new Array(1+arguments.length);$[0]=Q;for(var Z=1;Z<$.length;Z++)$[Z]=arguments[Z-1];return P[F].apply(this,$)}}function g(P,Q,F){const $=Q.send,Z=Q.ts,M=Q.methodLevel,a=Q.methodValue,h=Q.val,d=P._logEvent.bindings;u(F,P._serialize||Object.keys(P.serializers),P.serializers,P._stdErrSerialize===void 0?!0:P._stdErrSerialize),P._logEvent.ts=Z,P._logEvent.messages=F.filter(function(p){return d.indexOf(p)===-1}),P._logEvent.level.label=M,P._logEvent.level.value=a,$(M,P._logEvent,h),P._logEvent=m(d)}function m(P){return{ts:0,messages:[],bindings:P||[],level:{label:"",value:0}}}function N(P){const Q={type:P.constructor.name,msg:P.message,stack:P.stack};for(const F in P)Q[F]===void 0&&(Q[F]=P[F]);return Q}function A(P){return typeof P.timestamp=="function"?P.timestamp:P.timestamp===!1?S:D}function _(){return{}}function E(P){return P}function x(){}function S(){return!1}function D(){return Date.now()}function C(){return Math.round(Date.now()/1e3)}function j(){return new Date(Date.now()).toISOString()}function k(){function P(Q){return typeof Q<"u"&&Q}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return P(self)||P(window)||P(this)||{}}}return Rd}var Ko=dO();const da=Vf(Ko),pO={level:"info"},Dl="custom_context",Xm=1e3*1024;let gO=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},W1=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new gO(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}},PE=class{constructor(e,t=Xm){this.level=e??"error",this.levelValue=Ko.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new W1(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Ko.levels.values.error?console.error(e):t===Ko.levels.values.warn?console.warn(e):t===Ko.levels.values.debug?console.debug(e):t===Ko.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(fs({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new W1(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(fs({extraMetadata:e})),new Blob(t,{type:"application/json"})}},yO=class{constructor(e,t=Xm){this.baseChunkLogger=new PE(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=t,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}},wO=class{constructor(e,t=Xm){this.baseChunkLogger=new PE(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var mO=Object.defineProperty,vO=Object.defineProperties,bO=Object.getOwnPropertyDescriptors,Q1=Object.getOwnPropertySymbols,MO=Object.prototype.hasOwnProperty,NO=Object.prototype.propertyIsEnumerable,V1=(r,e,t)=>e in r?mO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,_f=(r,e)=>{for(var t in e||(e={}))MO.call(e,t)&&V1(r,t,e[t]);if(Q1)for(var t of Q1(e))NO.call(e,t)&&V1(r,t,e[t]);return r},Ef=(r,e)=>vO(r,bO(e));function ks(r){return Ef(_f({},r),{level:r?.level||pO.level})}function IO(r,e=Dl){return r[e]||""}function AO(r,e,t=Dl){return r[t]=e,r}function Zt(r,e=Dl){let t="";return typeof r.bindings>"u"?t=IO(r,e):t=r.bindings().context||"",t}function _O(r,e,t=Dl){const i=Zt(r,t);return i.trim()?`${i}/${e}`:e}function Ot(r,e,t=Dl){const i=_O(r,e,t),s=r.child({context:i});return AO(s,i,t)}function EO(r){var e,t;const i=new yO((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:da(Ef(_f({},r.opts),{level:"trace",browser:Ef(_f({},(t=r.opts)==null?void 0:t.browser),{write:s=>i.write(s)})})),chunkLoggerController:i}}function DO(r){var e;const t=new wO((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:da(Ef(_f({},r.opts),{level:"trace"}),t),chunkLoggerController:t}}function ev(r){return typeof r.loggerOverride<"u"&&typeof r.loggerOverride!="string"?{logger:r.loggerOverride,chunkLoggerController:null}:typeof window<"u"?EO(r):DO(r)}var SO=Object.defineProperty,xO=(r,e,t)=>e in r?SO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,F1=(r,e,t)=>xO(r,typeof e!="symbol"?e+"":e,t);let TO=class extends wn{constructor(e){super(),this.opts=e,F1(this,"protocol","wc"),F1(this,"version",2)}};var jO=Object.defineProperty,CO=(r,e,t)=>e in r?jO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,OO=(r,e,t)=>CO(r,e+"",t);let LO=class extends wn{constructor(e,t){super(),this.core=e,this.logger=t,OO(this,"records",new Map)}},zO=class{constructor(e,t){this.logger=e,this.core=t}},kO=class extends wn{constructor(e,t){super(),this.relayer=e,this.logger=t}},PO=class extends wn{constructor(e){super()}},RO=class{constructor(e,t,i,s){this.core=e,this.logger=t,this.name=i}},UO=class extends wn{constructor(e,t){super(),this.relayer=e,this.logger=t}},$O=class extends wn{constructor(e,t){super(),this.core=e,this.logger=t}},BO=class{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}},qO=class{constructor(e,t){this.projectId=e,this.logger=t}},YO=class{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}};function WO(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function RE(r,...e){if(!WO(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function H1(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function QO(r,e){RE(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const yo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const Ud=r=>new DataView(r.buffer,r.byteOffset,r.byteLength);function VO(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function UE(r){return typeof r=="string"&&(r=VO(r)),RE(r),r}let FO=class{clone(){return this._cloneInto()}};function HO(r){const e=i=>r().update(UE(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function $E(r=32){if(yo&&typeof yo.getRandomValues=="function")return yo.getRandomValues(new Uint8Array(r));if(yo&&typeof yo.randomBytes=="function")return yo.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function ZO(r,e,t,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,i);const s=BigInt(32),n=BigInt(4294967295),c=Number(t>>s&n),l=Number(t&n),u=i?4:0,f=i?0:4;r.setUint32(e+u,c,i),r.setUint32(e+f,l,i)}let GO=class extends FO{constructor(e,t,i,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ud(this.buffer)}update(e){H1(this);const{view:t,buffer:i,blockLen:s}=this;e=UE(e);const n=e.length;for(let c=0;c<n;){const l=Math.min(s-this.pos,n-c);if(l===s){const u=Ud(e);for(;s<=n-c;c+=s)this.process(u,c);continue}i.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){H1(this),QO(e,this),this.finished=!0;const{buffer:t,view:i,blockLen:s,isLE:n}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>s-c&&(this.process(i,0),c=0);for(let m=c;m<s;m++)t[m]=0;ZO(i,s-8,BigInt(this.length*8),n),this.process(i,0);const l=Ud(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,g=this.get();if(f>g.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<f;m++)l.setUint32(4*m,g[m],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const i=e.slice(0,t);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:i,length:s,finished:n,destroyed:c,pos:l}=this;return e.length=s,e.pos=l,e.finished=n,e.destroyed=c,s%t&&e.buffer.set(i),e}};const ou=BigInt(2**32-1),Pw=BigInt(32);function BE(r,e=!1){return e?{h:Number(r&ou),l:Number(r>>Pw&ou)}:{h:Number(r>>Pw&ou)|0,l:Number(r&ou)|0}}function KO(r,e=!1){let t=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:n,l:c}=BE(r[s],e);[t[s],i[s]]=[n,c]}return[t,i]}const JO=(r,e)=>BigInt(r>>>0)<<Pw|BigInt(e>>>0),XO=(r,e,t)=>r>>>t,e8=(r,e,t)=>r<<32-t|e>>>t,t8=(r,e,t)=>r>>>t|e<<32-t,r8=(r,e,t)=>r<<32-t|e>>>t,i8=(r,e,t)=>r<<64-t|e>>>t-32,n8=(r,e,t)=>r>>>t-32|e<<64-t,s8=(r,e)=>e,a8=(r,e)=>r,o8=(r,e,t)=>r<<t|e>>>32-t,c8=(r,e,t)=>e<<t|r>>>32-t,h8=(r,e,t)=>e<<t-32|r>>>64-t,l8=(r,e,t)=>r<<t-32|e>>>64-t;function u8(r,e,t,i){const s=(e>>>0)+(i>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const f8=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),d8=(r,e,t,i)=>e+t+i+(r/2**32|0)|0,p8=(r,e,t,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0),g8=(r,e,t,i,s)=>e+t+i+s+(r/2**32|0)|0,y8=(r,e,t,i,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(i>>>0)+(s>>>0),w8=(r,e,t,i,s,n)=>e+t+i+s+n+(r/2**32|0)|0,st={fromBig:BE,split:KO,toBig:JO,shrSH:XO,shrSL:e8,rotrSH:t8,rotrSL:r8,rotrBH:i8,rotrBL:n8,rotr32H:s8,rotr32L:a8,rotlSH:o8,rotlSL:c8,rotlBH:h8,rotlBL:l8,add:u8,add3L:f8,add3H:d8,add4L:p8,add4H:g8,add5H:w8,add5L:y8},[m8,v8]=st.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),$s=new Uint32Array(80),Bs=new Uint32Array(80);let b8=class extends GO{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:i,Bl:s,Ch:n,Cl:c,Dh:l,Dl:u,Eh:f,El:g,Fh:m,Fl:N,Gh:A,Gl:_,Hh:E,Hl:x}=this;return[e,t,i,s,n,c,l,u,f,g,m,N,A,_,E,x]}set(e,t,i,s,n,c,l,u,f,g,m,N,A,_,E,x){this.Ah=e|0,this.Al=t|0,this.Bh=i|0,this.Bl=s|0,this.Ch=n|0,this.Cl=c|0,this.Dh=l|0,this.Dl=u|0,this.Eh=f|0,this.El=g|0,this.Fh=m|0,this.Fl=N|0,this.Gh=A|0,this.Gl=_|0,this.Hh=E|0,this.Hl=x|0}process(e,t){for(let C=0;C<16;C++,t+=4)$s[C]=e.getUint32(t),Bs[C]=e.getUint32(t+=4);for(let C=16;C<80;C++){const j=$s[C-15]|0,k=Bs[C-15]|0,P=st.rotrSH(j,k,1)^st.rotrSH(j,k,8)^st.shrSH(j,k,7),Q=st.rotrSL(j,k,1)^st.rotrSL(j,k,8)^st.shrSL(j,k,7),F=$s[C-2]|0,$=Bs[C-2]|0,Z=st.rotrSH(F,$,19)^st.rotrBH(F,$,61)^st.shrSH(F,$,6),M=st.rotrSL(F,$,19)^st.rotrBL(F,$,61)^st.shrSL(F,$,6),a=st.add4L(Q,M,Bs[C-7],Bs[C-16]),h=st.add4H(a,P,Z,$s[C-7],$s[C-16]);$s[C]=h|0,Bs[C]=a|0}let{Ah:i,Al:s,Bh:n,Bl:c,Ch:l,Cl:u,Dh:f,Dl:g,Eh:m,El:N,Fh:A,Fl:_,Gh:E,Gl:x,Hh:S,Hl:D}=this;for(let C=0;C<80;C++){const j=st.rotrSH(m,N,14)^st.rotrSH(m,N,18)^st.rotrBH(m,N,41),k=st.rotrSL(m,N,14)^st.rotrSL(m,N,18)^st.rotrBL(m,N,41),P=m&A^~m&E,Q=N&_^~N&x,F=st.add5L(D,k,Q,v8[C],Bs[C]),$=st.add5H(F,S,j,P,m8[C],$s[C]),Z=F|0,M=st.rotrSH(i,s,28)^st.rotrBH(i,s,34)^st.rotrBH(i,s,39),a=st.rotrSL(i,s,28)^st.rotrBL(i,s,34)^st.rotrBL(i,s,39),h=i&n^i&l^n&l,d=s&c^s&u^c&u;S=E|0,D=x|0,E=A|0,x=_|0,A=m|0,_=N|0,{h:m,l:N}=st.add(f|0,g|0,$|0,Z|0),f=l|0,g=u|0,l=n|0,u=c|0,n=i|0,c=s|0;const p=st.add3L(Z,a,d);i=st.add3H(p,$,M,h),s=p|0}({h:i,l:s}=st.add(this.Ah|0,this.Al|0,i|0,s|0)),{h:n,l:c}=st.add(this.Bh|0,this.Bl|0,n|0,c|0),{h:l,l:u}=st.add(this.Ch|0,this.Cl|0,l|0,u|0),{h:f,l:g}=st.add(this.Dh|0,this.Dl|0,f|0,g|0),{h:m,l:N}=st.add(this.Eh|0,this.El|0,m|0,N|0),{h:A,l:_}=st.add(this.Fh|0,this.Fl|0,A|0,_|0),{h:E,l:x}=st.add(this.Gh|0,this.Gl|0,E|0,x|0),{h:S,l:D}=st.add(this.Hh|0,this.Hl|0,S|0,D|0),this.set(i,s,n,c,l,u,f,g,m,N,A,_,E,x,S,D)}roundClean(){$s.fill(0),Bs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const M8=HO(()=>new b8);const tv=BigInt(0),qE=BigInt(1),N8=BigInt(2);function rv(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function iv(r){if(!rv(r))throw new Error("Uint8Array expected")}function $d(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}const I8=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function nv(r){iv(r);let e="";for(let t=0;t<r.length;t++)e+=I8[r[t]];return e}function YE(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?tv:BigInt("0x"+r)}const vs={_0:48,_9:57,A:65,F:70,a:97,f:102};function Z1(r){if(r>=vs._0&&r<=vs._9)return r-vs._0;if(r>=vs.A&&r<=vs.F)return r-(vs.A-10);if(r>=vs.a&&r<=vs.f)return r-(vs.a-10)}function WE(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(t);for(let s=0,n=0;s<t;s++,n+=2){const c=Z1(r.charCodeAt(n)),l=Z1(r.charCodeAt(n+1));if(c===void 0||l===void 0){const u=r[n]+r[n+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+n)}i[s]=c*16+l}return i}function A8(r){return YE(nv(r))}function rf(r){return iv(r),YE(nv(Uint8Array.from(r).reverse()))}function QE(r,e){return WE(r.toString(16).padStart(e*2,"0"))}function Rw(r,e){return QE(r,e).reverse()}function bs(r,e,t){let i;if(typeof e=="string")try{i=WE(e)}catch(n){throw new Error(r+" must be hex string or Uint8Array, cause: "+n)}else if(rv(e))i=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=i.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return i}function G1(...r){let e=0;for(let i=0;i<r.length;i++){const s=r[i];iv(s),e+=s.length}const t=new Uint8Array(e);for(let i=0,s=0;i<r.length;i++){const n=r[i];t.set(n,s),s+=n.length}return t}const Bd=r=>typeof r=="bigint"&&tv<=r;function _8(r,e,t){return Bd(r)&&Bd(e)&&Bd(t)&&e<=r&&r<t}function Xc(r,e,t,i){if(!_8(e,t,i))throw new Error("expected valid "+r+": "+t+" <= n < "+i+", got "+e)}function E8(r){let e;for(e=0;r>tv;r>>=qE,e+=1);return e}const D8=r=>(N8<<BigInt(r-1))-qE,S8={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||rv(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function sv(r,e,t={}){const i=(s,n,c)=>{const l=S8[n];if(typeof l!="function")throw new Error("invalid validator function");const u=r[s];if(!(c&&u===void 0)&&!l(u,r))throw new Error("param "+String(s)+" is invalid. Expected "+n+", got "+u)};for(const[s,n]of Object.entries(e))i(s,n,!1);for(const[s,n]of Object.entries(t))i(s,n,!0);return r}function K1(r){const e=new WeakMap;return(t,...i)=>{const s=e.get(t);if(s!==void 0)return s;const n=r(t,...i);return e.set(t,n),n}}const pi=BigInt(0),Ur=BigInt(1),La=BigInt(2),x8=BigInt(3),Uw=BigInt(4),J1=BigInt(5),X1=BigInt(8);function ti(r,e){const t=r%e;return t>=pi?t:e+t}function T8(r,e,t){if(e<pi)throw new Error("invalid exponent, negatives unsupported");if(t<=pi)throw new Error("invalid modulus");if(t===Ur)return pi;let i=Ur;for(;e>pi;)e&Ur&&(i=i*r%t),r=r*r%t,e>>=Ur;return i}function Jn(r,e,t){let i=r;for(;e-- >pi;)i*=i,i%=t;return i}function eb(r,e){if(r===pi)throw new Error("invert: expected non-zero number");if(e<=pi)throw new Error("invert: expected positive modulus, got "+e);let t=ti(r,e),i=e,s=pi,n=Ur;for(;t!==pi;){const c=i/t,l=i%t,u=s-n*c;i=t,t=l,s=n,n=u}if(i!==Ur)throw new Error("invert: does not exist");return ti(s,e)}function j8(r){const e=(r-Ur)/La;let t,i,s;for(t=r-Ur,i=0;t%La===pi;t/=La,i++);for(s=La;s<r&&T8(s,e,r)!==r-Ur;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){const c=(r+Ur)/Uw;return function(l,u){const f=l.pow(u,c);if(!l.eql(l.sqr(f),u))throw new Error("Cannot find square root");return f}}const n=(t+Ur)/La;return function(c,l){if(c.pow(l,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let u=i,f=c.pow(c.mul(c.ONE,s),t),g=c.pow(l,n),m=c.pow(l,t);for(;!c.eql(m,c.ONE);){if(c.eql(m,c.ZERO))return c.ZERO;let N=1;for(let _=c.sqr(m);N<u&&!c.eql(_,c.ONE);N++)_=c.sqr(_);const A=c.pow(f,Ur<<BigInt(u-N-1));f=c.sqr(A),g=c.mul(g,A),m=c.mul(m,f),u=N}return g}}function C8(r){if(r%Uw===x8){const e=(r+Ur)/Uw;return function(t,i){const s=t.pow(i,e);if(!t.eql(t.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%X1===J1){const e=(r-J1)/X1;return function(t,i){const s=t.mul(i,La),n=t.pow(s,e),c=t.mul(i,n),l=t.mul(t.mul(c,La),n),u=t.mul(c,t.sub(l,t.ONE));if(!t.eql(t.sqr(u),i))throw new Error("Cannot find square root");return u}}return j8(r)}const O8=(r,e)=>(ti(r,e)&Ur)===Ur,L8=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function z8(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=L8.reduce((i,s)=>(i[s]="function",i),e);return sv(r,t)}function k8(r,e,t){if(t<pi)throw new Error("invalid exponent, negatives unsupported");if(t===pi)return r.ONE;if(t===Ur)return e;let i=r.ONE,s=e;for(;t>pi;)t&Ur&&(i=r.mul(i,s)),s=r.sqr(s),t>>=Ur;return i}function P8(r,e){const t=new Array(e.length),i=e.reduce((n,c,l)=>r.is0(c)?n:(t[l]=n,r.mul(n,c)),r.ONE),s=r.inv(i);return e.reduceRight((n,c,l)=>r.is0(c)?n:(t[l]=r.mul(n,t[l]),r.mul(n,c)),s),t}function VE(r,e){const t=e!==void 0?e:r.toString(2).length,i=Math.ceil(t/8);return{nBitLength:t,nByteLength:i}}function FE(r,e,t=!1,i={}){if(r<=pi)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:s,nByteLength:n}=VE(r,e);if(n>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:r,isLE:t,BITS:s,BYTES:n,MASK:D8(s),ZERO:pi,ONE:Ur,create:u=>ti(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return pi<=u&&u<r},is0:u=>u===pi,isOdd:u=>(u&Ur)===Ur,neg:u=>ti(-u,r),eql:(u,f)=>u===f,sqr:u=>ti(u*u,r),add:(u,f)=>ti(u+f,r),sub:(u,f)=>ti(u-f,r),mul:(u,f)=>ti(u*f,r),pow:(u,f)=>k8(l,u,f),div:(u,f)=>ti(u*eb(f,r),r),sqrN:u=>u*u,addN:(u,f)=>u+f,subN:(u,f)=>u-f,mulN:(u,f)=>u*f,inv:u=>eb(u,r),sqrt:i.sqrt||(u=>(c||(c=C8(r)),c(l,u))),invertBatch:u=>P8(l,u),cmov:(u,f,g)=>g?f:u,toBytes:u=>t?Rw(u,n):QE(u,n),fromBytes:u=>{if(u.length!==n)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+u.length);return t?rf(u):A8(u)}});return Object.freeze(l)}const tb=BigInt(0),cu=BigInt(1);function qd(r,e){const t=e.negate();return r?t:e}function HE(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Yd(r,e){HE(r,e);const t=Math.ceil(e/r)+1,i=2**(r-1);return{windows:t,windowSize:i}}function R8(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,i)=>{if(!(t instanceof e))throw new Error("invalid point at index "+i)})}function U8(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,i)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+i)})}const Wd=new WeakMap,ZE=new WeakMap;function Qd(r){return ZE.get(r)||1}function $8(r,e){return{constTimeNegate:qd,hasPrecomputes(t){return Qd(t)!==1},unsafeLadder(t,i,s=r.ZERO){let n=t;for(;i>tb;)i&cu&&(s=s.add(n)),n=n.double(),i>>=cu;return s},precomputeWindow(t,i){const{windows:s,windowSize:n}=Yd(i,e),c=[];let l=t,u=l;for(let f=0;f<s;f++){u=l,c.push(u);for(let g=1;g<n;g++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(t,i,s){const{windows:n,windowSize:c}=Yd(t,e);let l=r.ZERO,u=r.BASE;const f=BigInt(2**t-1),g=2**t,m=BigInt(t);for(let N=0;N<n;N++){const A=N*c;let _=Number(s&f);s>>=m,_>c&&(_-=g,s+=cu);const E=A,x=A+Math.abs(_)-1,S=N%2!==0,D=_<0;_===0?u=u.add(qd(S,i[E])):l=l.add(qd(D,i[x]))}return{p:l,f:u}},wNAFUnsafe(t,i,s,n=r.ZERO){const{windows:c,windowSize:l}=Yd(t,e),u=BigInt(2**t-1),f=2**t,g=BigInt(t);for(let m=0;m<c;m++){const N=m*l;if(s===tb)break;let A=Number(s&u);if(s>>=g,A>l&&(A-=f,s+=cu),A===0)continue;let _=i[N+Math.abs(A)-1];A<0&&(_=_.negate()),n=n.add(_)}return n},getPrecomputes(t,i,s){let n=Wd.get(i);return n||(n=this.precomputeWindow(i,t),t!==1&&Wd.set(i,s(n))),n},wNAFCached(t,i,s){const n=Qd(t);return this.wNAF(n,this.getPrecomputes(n,t,s),i)},wNAFCachedUnsafe(t,i,s,n){const c=Qd(t);return c===1?this.unsafeLadder(t,i,n):this.wNAFUnsafe(c,this.getPrecomputes(c,t,s),i,n)},setWindowSize(t,i){HE(i,e),ZE.set(t,i),Wd.delete(t)}}}function B8(r,e,t,i){if(R8(t,r),U8(i,e),t.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const s=r.ZERO,n=E8(BigInt(t.length)),c=n>12?n-3:n>4?n-2:n?2:1,l=(1<<c)-1,u=new Array(l+1).fill(s),f=Math.floor((e.BITS-1)/c)*c;let g=s;for(let m=f;m>=0;m-=c){u.fill(s);for(let A=0;A<i.length;A++){const _=i[A],E=Number(_>>BigInt(m)&BigInt(l));u[E]=u[E].add(t[A])}let N=s;for(let A=u.length-1,_=s;A>0;A--)_=_.add(u[A]),N=N.add(_);if(g=g.add(N),m!==0)for(let A=0;A<c;A++)g=g.double()}return g}function q8(r){return z8(r.Fp),sv(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...VE(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}const Un=BigInt(0),qi=BigInt(1),hu=BigInt(2),Y8=BigInt(8),W8={zip215:!0};function Q8(r){const e=q8(r);return sv(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function V8(r){const e=Q8(r),{Fp:t,n:i,prehash:s,hash:n,randomBytes:c,nByteLength:l,h:u}=e,f=hu<<BigInt(l*8)-qi,g=t.create,m=FE(e.n,e.nBitLength),N=e.uvRatio||((p,w)=>{try{return{isValid:!0,value:t.sqrt(p*t.inv(w))}}catch{return{isValid:!1,value:Un}}}),A=e.adjustScalarBytes||(p=>p),_=e.domain||((p,w,b)=>{if($d("phflag",b),w.length||b)throw new Error("Contexts/pre-hash are not supported");return p});function E(p,w){Xc("coordinate "+p,w,Un,f)}function x(p){if(!(p instanceof C))throw new Error("ExtendedPoint expected")}const S=K1((p,w)=>{const{ex:b,ey:I,ez:y}=p,o=p.is0();w==null&&(w=o?Y8:t.inv(y));const v=g(b*w),R=g(I*w),L=g(y*w);if(o)return{x:Un,y:qi};if(L!==qi)throw new Error("invZ was invalid");return{x:v,y:R}}),D=K1(p=>{const{a:w,d:b}=e;if(p.is0())throw new Error("bad point: ZERO");const{ex:I,ey:y,ez:o,et:v}=p,R=g(I*I),L=g(y*y),z=g(o*o),q=g(z*z),Y=g(R*w),T=g(z*g(Y+L)),O=g(q+g(b*g(R*L)));if(T!==O)throw new Error("bad point: equation left != right (1)");const B=g(I*y),W=g(o*v);if(B!==W)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(w,b,I,y){this.ex=w,this.ey=b,this.ez=I,this.et=y,E("x",w),E("y",b),E("z",I),E("t",y),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof C)throw new Error("extended point not allowed");const{x:b,y:I}=w||{};return E("x",b),E("y",I),new C(b,I,qi,g(b*I))}static normalizeZ(w){const b=t.invertBatch(w.map(I=>I.ez));return w.map((I,y)=>I.toAffine(b[y])).map(C.fromAffine)}static msm(w,b){return B8(C,m,w,b)}_setWindowSize(w){P.setWindowSize(this,w)}assertValidity(){D(this)}equals(w){x(w);const{ex:b,ey:I,ez:y}=this,{ex:o,ey:v,ez:R}=w,L=g(b*R),z=g(o*y),q=g(I*R),Y=g(v*y);return L===z&&q===Y}is0(){return this.equals(C.ZERO)}negate(){return new C(g(-this.ex),this.ey,this.ez,g(-this.et))}double(){const{a:w}=e,{ex:b,ey:I,ez:y}=this,o=g(b*b),v=g(I*I),R=g(hu*g(y*y)),L=g(w*o),z=b+I,q=g(g(z*z)-o-v),Y=L+v,T=Y-R,O=L-v,B=g(q*T),W=g(Y*O),V=g(q*O),U=g(T*Y);return new C(B,W,U,V)}add(w){x(w);const{a:b,d:I}=e,{ex:y,ey:o,ez:v,et:R}=this,{ex:L,ey:z,ez:q,et:Y}=w;if(b===BigInt(-1)){const K=g((o-y)*(z+L)),et=g((o+y)*(z-L)),re=g(et-K);if(re===Un)return this.double();const ae=g(v*hu*Y),Ke=g(R*hu*q),se=Ke+ae,ce=et+K,Dt=Ke-ae,he=g(se*re),le=g(ce*Dt),Cr=g(se*Dt),ue=g(re*ce);return new C(he,le,ue,Cr)}const T=g(y*L),O=g(o*z),B=g(R*I*Y),W=g(v*q),V=g((y+o)*(L+z)-T-O),U=W-B,H=W+B,de=g(O-b*T),ee=g(V*U),J=g(H*de),Qe=g(V*de),oe=g(U*H);return new C(ee,J,oe,Qe)}subtract(w){return this.add(w.negate())}wNAF(w){return P.wNAFCached(this,w,C.normalizeZ)}multiply(w){const b=w;Xc("scalar",b,qi,i);const{p:I,f:y}=this.wNAF(b);return C.normalizeZ([I,y])[0]}multiplyUnsafe(w,b=C.ZERO){const I=w;return Xc("scalar",I,Un,i),I===Un?k:this.is0()||I===qi?this:P.wNAFCachedUnsafe(this,I,C.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return P.unsafeLadder(this,i).is0()}toAffine(w){return S(this,w)}clearCofactor(){const{h:w}=e;return w===qi?this:this.multiplyUnsafe(w)}static fromHex(w,b=!1){const{d:I,a:y}=e,o=t.BYTES;w=bs("pointHex",w,o),$d("zip215",b);const v=w.slice(),R=w[o-1];v[o-1]=R&-129;const L=rf(v),z=b?f:t.ORDER;Xc("pointHex.y",L,Un,z);const q=g(L*L),Y=g(q-qi),T=g(I*q-y);let{isValid:O,value:B}=N(Y,T);if(!O)throw new Error("Point.fromHex: invalid y coordinate");const W=(B&qi)===qi,V=(R&128)!==0;if(!b&&B===Un&&V)throw new Error("Point.fromHex: x=0 and x_0=1");return V!==W&&(B=g(-B)),C.fromAffine({x:B,y:L})}static fromPrivateKey(w){return $(w).point}toRawBytes(){const{x:w,y:b}=this.toAffine(),I=Rw(b,t.BYTES);return I[I.length-1]|=w&qi?128:0,I}toHex(){return nv(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,qi,g(e.Gx*e.Gy)),C.ZERO=new C(Un,qi,qi,Un);const{BASE:j,ZERO:k}=C,P=$8(C,l*8);function Q(p){return ti(p,i)}function F(p){return Q(rf(p))}function $(p){const w=t.BYTES;p=bs("private key",p,w);const b=bs("hashed private key",n(p),2*w),I=A(b.slice(0,w)),y=b.slice(w,2*w),o=F(I),v=j.multiply(o),R=v.toRawBytes();return{head:I,prefix:y,scalar:o,point:v,pointBytes:R}}function Z(p){return $(p).pointBytes}function M(p=new Uint8Array,...w){const b=G1(...w);return F(n(_(b,bs("context",p),!!s)))}function a(p,w,b={}){p=bs("message",p),s&&(p=s(p));const{prefix:I,scalar:y,pointBytes:o}=$(w),v=M(b.context,I,p),R=j.multiply(v).toRawBytes(),L=M(b.context,R,o,p),z=Q(v+L*y);Xc("signature.s",z,Un,i);const q=G1(R,Rw(z,t.BYTES));return bs("result",q,t.BYTES*2)}const h=W8;function d(p,w,b,I=h){const{context:y,zip215:o}=I,v=t.BYTES;p=bs("signature",p,2*v),w=bs("message",w),b=bs("publicKey",b,v),o!==void 0&&$d("zip215",o),s&&(w=s(w));const R=rf(p.slice(v,2*v));let L,z,q;try{L=C.fromHex(b,o),z=C.fromHex(p.slice(0,v),o),q=j.multiplyUnsafe(R)}catch{return!1}if(!o&&L.isSmallOrder())return!1;const Y=M(y,z.toRawBytes(),L.toRawBytes(),w);return z.add(L.multiplyUnsafe(Y)).subtract(q).clearCofactor().equals(C.ZERO)}return j._setWindowSize(8),{CURVE:e,getPublicKey:Z,sign:a,verify:d,ExtendedPoint:C,utils:{getExtendedPublicKey:$,randomPrivateKey:()=>c(t.BYTES),precompute(p=8,w=C.BASE){return w._setWindowSize(p),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const av=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),rb=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const F8=BigInt(1),ib=BigInt(2);BigInt(3);const H8=BigInt(5),Z8=BigInt(8);function G8(r){const e=BigInt(10),t=BigInt(20),i=BigInt(40),s=BigInt(80),n=av,c=r*r%n*r%n,l=Jn(c,ib,n)*c%n,u=Jn(l,F8,n)*r%n,f=Jn(u,H8,n)*u%n,g=Jn(f,e,n)*f%n,m=Jn(g,t,n)*g%n,N=Jn(m,i,n)*m%n,A=Jn(N,s,n)*N%n,_=Jn(A,s,n)*N%n,E=Jn(_,e,n)*f%n;return{pow_p_5_8:Jn(E,ib,n)*r%n,b2:c}}function K8(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function J8(r,e){const t=av,i=ti(e*e*e,t),s=ti(i*i*e,t),n=G8(r*s).pow_p_5_8;let c=ti(r*i*n,t);const l=ti(e*c*c,t),u=c,f=ti(c*rb,t),g=l===r,m=l===ti(-r,t),N=l===ti(-r*rb,t);return g&&(c=u),(m||N)&&(c=f),O8(c,t)&&(c=ti(-c,t)),{isValid:g||m,value:c}}const X8=FE(av,void 0,!0),eL={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:X8,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Z8,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:M8,randomBytes:$E,adjustScalarBytes:K8,uvRatio:J8},GE=V8(eL),tL="EdDSA",rL="JWT",Df=".",Zf="base64url",KE="utf8",JE="utf8",iL=":",nL="did",sL="key",nb="base58btc",aL="z",oL="K36",cL=32;function ov(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function XE(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ov(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function eD(r,e){e||(e=r.reduce((s,n)=>s+n.length,0));const t=XE(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return ov(t)}function hL(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),c=n.charCodeAt(0);if(t[c]!==255)throw new TypeError(n+" is ambiguous");t[c]=s}var l=r.length,u=r.charAt(0),f=Math.log(l)/Math.log(256),g=Math.log(256)/Math.log(l);function m(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var E=0,x=0,S=0,D=_.length;S!==D&&_[S]===0;)S++,E++;for(var C=(D-S)*g+1>>>0,j=new Uint8Array(C);S!==D;){for(var k=_[S],P=0,Q=C-1;(k!==0||P<x)&&Q!==-1;Q--,P++)k+=256*j[Q]>>>0,j[Q]=k%l>>>0,k=k/l>>>0;if(k!==0)throw new Error("Non-zero carry");x=P,S++}for(var F=C-x;F!==C&&j[F]===0;)F++;for(var $=u.repeat(E);F<C;++F)$+=r.charAt(j[F]);return $}function N(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var E=0;if(_[E]!==" "){for(var x=0,S=0;_[E]===u;)x++,E++;for(var D=(_.length-E)*f+1>>>0,C=new Uint8Array(D);_[E];){var j=t[_.charCodeAt(E)];if(j===255)return;for(var k=0,P=D-1;(j!==0||k<S)&&P!==-1;P--,k++)j+=l*C[P]>>>0,C[P]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");S=k,E++}if(_[E]!==" "){for(var Q=D-S;Q!==D&&C[Q]===0;)Q++;for(var F=new Uint8Array(x+(D-Q)),$=x;Q!==D;)F[$++]=C[Q++];return F}}}function A(_){var E=N(_);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:N,decode:A}}var lL=hL,uL=lL;const tD=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},fL=r=>new TextEncoder().encode(r),dL=r=>new TextDecoder().decode(r);let pL=class{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},gL=class{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return rD(this,e)}},yL=class{constructor(e){this.decoders=e}or(e){return rD(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const rD=(r,e)=>new yL({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let wL=class{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new pL(e,t,i),this.decoder=new gL(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Gf=({name:r,prefix:e,encode:t,decode:i})=>new wL(r,e,t,i),Sl=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=uL(t,e);return Gf({prefix:r,name:e,encode:i,decode:n=>tD(s(n))})},mL=(r,e,t,i)=>{const s={};for(let g=0;g<e.length;++g)s[e[g]]=g;let n=r.length;for(;r[n-1]==="=";)--n;const c=new Uint8Array(n*t/8|0);let l=0,u=0,f=0;for(let g=0;g<n;++g){const m=s[r[g]];if(m===void 0)throw new SyntaxError(`Non-${i} character`);u=u<<t|m,l+=t,l>=8&&(l-=8,c[f++]=255&u>>l)}if(l>=t||255&u<<8-l)throw new SyntaxError("Unexpected end of data");return c},vL=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let n="",c=0,l=0;for(let u=0;u<r.length;++u)for(l=l<<8|r[u],c+=8;c>t;)c-=t,n+=e[s&l>>c];if(c&&(n+=e[s&l<<t-c]),i)for(;n.length*t&7;)n+="=";return n},_i=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>Gf({prefix:e,name:r,encode(s){return vL(s,i,t)},decode(s){return mL(s,i,t,r)}}),bL=Gf({prefix:"\0",name:"identity",encode:r=>dL(r),decode:r=>fL(r)});var ML=Object.freeze({__proto__:null,identity:bL});const NL=_i({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var IL=Object.freeze({__proto__:null,base2:NL});const AL=_i({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var _L=Object.freeze({__proto__:null,base8:AL});const EL=Sl({prefix:"9",name:"base10",alphabet:"0123456789"});var DL=Object.freeze({__proto__:null,base10:EL});const SL=_i({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xL=_i({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var TL=Object.freeze({__proto__:null,base16:SL,base16upper:xL});const jL=_i({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),CL=_i({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),OL=_i({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),LL=_i({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),zL=_i({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kL=_i({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),PL=_i({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),RL=_i({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),UL=_i({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var $L=Object.freeze({__proto__:null,base32:jL,base32upper:CL,base32pad:OL,base32padupper:LL,base32hex:zL,base32hexupper:kL,base32hexpad:PL,base32hexpadupper:RL,base32z:UL});const BL=Sl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),qL=Sl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var YL=Object.freeze({__proto__:null,base36:BL,base36upper:qL});const WL=Sl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),QL=Sl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var VL=Object.freeze({__proto__:null,base58btc:WL,base58flickr:QL});const FL=_i({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),HL=_i({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ZL=_i({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),GL=_i({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var KL=Object.freeze({__proto__:null,base64:FL,base64pad:HL,base64url:ZL,base64urlpad:GL});const iD=Array.from(""),JL=iD.reduce((r,e,t)=>(r[t]=e,r),[]),XL=iD.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function ez(r){return r.reduce((e,t)=>(e+=JL[t],e),"")}function tz(r){const e=[];for(const t of r){const i=XL[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const rz=Gf({prefix:"",name:"base256emoji",encode:ez,decode:tz});var iz=Object.freeze({__proto__:null,base256emoji:rz}),nz=nD,sb=128,sz=-128,az=Math.pow(2,31);function nD(r,e,t){e=e||[],t=t||0;for(var i=t;r>=az;)e[t++]=r&255|sb,r/=128;for(;r&sz;)e[t++]=r&255|sb,r>>>=7;return e[t]=r|0,nD.bytes=t-i+1,e}var oz=$w,cz=128,ab=127;function $w(r,i){var t=0,i=i||0,s=0,n=i,c,l=r.length;do{if(n>=l)throw $w.bytes=0,new RangeError("Could not decode varint");c=r[n++],t+=s<28?(c&ab)<<s:(c&ab)*Math.pow(2,s),s+=7}while(c>=cz);return $w.bytes=n-i,t}var hz=Math.pow(2,7),lz=Math.pow(2,14),uz=Math.pow(2,21),fz=Math.pow(2,28),dz=Math.pow(2,35),pz=Math.pow(2,42),gz=Math.pow(2,49),yz=Math.pow(2,56),wz=Math.pow(2,63),mz=function(r){return r<hz?1:r<lz?2:r<uz?3:r<fz?4:r<dz?5:r<pz?6:r<gz?7:r<yz?8:r<wz?9:10},vz={encode:nz,decode:oz,encodingLength:mz},sD=vz;const ob=(r,e,t=0)=>(sD.encode(r,e,t),e),cb=r=>sD.encodingLength(r),Bw=(r,e)=>{const t=e.byteLength,i=cb(r),s=i+cb(t),n=new Uint8Array(s+t);return ob(r,n,0),ob(t,n,i),n.set(e,s),new bz(r,t,e,n)};let bz=class{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}};const aD=({name:r,code:e,encode:t})=>new Mz(r,e,t);let Mz=class{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Bw(this.code,t):t.then(i=>Bw(this.code,i))}else throw Error("Unknown type, must be binary type")}};const oD=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Nz=aD({name:"sha2-256",code:18,encode:oD("SHA-256")}),Iz=aD({name:"sha2-512",code:19,encode:oD("SHA-512")});var Az=Object.freeze({__proto__:null,sha256:Nz,sha512:Iz});const cD=0,_z="identity",hD=tD,Ez=r=>Bw(cD,hD(r)),Dz={code:cD,name:_z,encode:hD,digest:Ez};var Sz=Object.freeze({__proto__:null,identity:Dz});new TextEncoder,new TextDecoder;const hb={...ML,...IL,..._L,...DL,...TL,...$L,...YL,...VL,...KL,...iz};({...Az,...Sz});function lD(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const lb=lD("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Vd=lD("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=XE(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),uD={utf8:lb,"utf-8":lb,hex:hb.base16,latin1:Vd,ascii:Vd,binary:Vd,...hb};function Kf(r,e="utf8"){const t=uD[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function Cc(r,e="utf8"){const t=uD[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ov(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function ub(r){return zs(Kf(Cc(r,Zf),KE))}function Sf(r){return Kf(Cc(fs(r),KE),Zf)}function cv(r){const e=Cc(oL,nb),t=aL+Kf(eD([e,r]),nb);return[nL,sL,t].join(iL)}function xz(r){return Kf(r,Zf)}function Tz(r){return Cc(r,Zf)}function jz(r){return Cc([Sf(r.header),Sf(r.payload)].join(Df),JE)}function Cz(r){return[Sf(r.header),Sf(r.payload),xz(r.signature)].join(Df)}function gc(r){const e=r.split(Df),t=ub(e[0]),i=ub(e[1]),s=Tz(e[2]),n=Cc(e.slice(0,2).join(Df),JE);return{header:t,payload:i,signature:s,data:n}}function xf(r=$E(cL)){const e=GE.getPublicKey(r);return{secretKey:eD([r,e]),publicKey:e}}async function fD(r,e,t,i,s=ne.fromMiliseconds(Date.now())){const n={alg:tL,typ:rL},c=cv(i.publicKey),l=s+t,u={iss:c,sub:r,aud:e,iat:s,exp:l},f=jz({header:n,payload:u}),g=GE.sign(f,i.secretKey.slice(0,32));return Cz({header:n,payload:u,signature:g})}var fb=function(r,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,n;i<s;i++)(n||!(i in e))&&(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return r.concat(n||Array.prototype.slice.call(e))},Oz=(function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r})(),Lz=(function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=Be.platform}return r})(),zz=(function(){function r(e,t,i,s){this.name=e,this.version=t,this.os=i,this.bot=s,this.type="bot-device"}return r})(),kz=(function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r})(),Pz=(function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r})(),Rz=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Uz=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,db=3,$z=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Rz]],pb=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function dD(r){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Pz:typeof navigator<"u"?qz(navigator.userAgent):Wz()}function Bz(r){return r!==""&&$z.reduce(function(e,t){var i=t[0],s=t[1];if(e)return e;var n=s.exec(r);return!!n&&[i,n]},!1)}function qz(r){var e=Bz(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new kz;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<db&&(s=fb(fb([],s,!0),Qz(db-s.length),!0)):s=[];var n=s.join("."),c=Yz(r),l=Uz.exec(r);return l&&l[1]?new zz(t,n,c,l[1]):new Oz(t,n,c)}function Yz(r){for(var e=0,t=pb.length;e<t;e++){var i=pb[e],s=i[0],n=i[1],c=n.exec(r);if(c)return s}return null}function Wz(){var r=typeof Be<"u"&&Be.version;return r?new Lz(Be.version.slice(1)):null}function Qz(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var Qt={},gb;function pD(){if(gb)return Qt;gb=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.getLocalStorage=Qt.getLocalStorageOrThrow=Qt.getCrypto=Qt.getCryptoOrThrow=Qt.getLocation=Qt.getLocationOrThrow=Qt.getNavigator=Qt.getNavigatorOrThrow=Qt.getDocument=Qt.getDocumentOrThrow=Qt.getFromWindowOrThrow=Qt.getFromWindow=void 0;function r(N){let A;return typeof window<"u"&&typeof window[N]<"u"&&(A=window[N]),A}Qt.getFromWindow=r;function e(N){const A=r(N);if(!A)throw new Error(`${N} is not defined in Window`);return A}Qt.getFromWindowOrThrow=e;function t(){return e("document")}Qt.getDocumentOrThrow=t;function i(){return r("document")}Qt.getDocument=i;function s(){return e("navigator")}Qt.getNavigatorOrThrow=s;function n(){return r("navigator")}Qt.getNavigator=n;function c(){return e("location")}Qt.getLocationOrThrow=c;function l(){return r("location")}Qt.getLocation=l;function u(){return e("crypto")}Qt.getCryptoOrThrow=u;function f(){return r("crypto")}Qt.getCrypto=f;function g(){return e("localStorage")}Qt.getLocalStorageOrThrow=g;function m(){return r("localStorage")}return Qt.getLocalStorage=m,Qt}var Ji=pD(),eh={},yb;function Vz(){if(yb)return eh;yb=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.getWindowMetadata=void 0;const r=pD();function e(){let t,i;try{t=r.getDocumentOrThrow(),i=r.getLocationOrThrow()}catch{return null}function s(){const A=t.getElementsByTagName("link"),_=[];for(let E=0;E<A.length;E++){const x=A[E],S=x.getAttribute("rel");if(S&&S.toLowerCase().indexOf("icon")>-1){const D=x.getAttribute("href");if(D)if(D.toLowerCase().indexOf("https:")===-1&&D.toLowerCase().indexOf("http:")===-1&&D.indexOf("//")!==0){let C=i.protocol+"//"+i.host;if(D.indexOf("/")===0)C+=D;else{const j=i.pathname.split("/");j.pop();const k=j.join("/");C+=k+"/"+D}_.push(C)}else if(D.indexOf("//")===0){const C=i.protocol+D;_.push(C)}else _.push(D)}}return _}function n(...A){const _=t.getElementsByTagName("meta");for(let E=0;E<_.length;E++){const x=_[E],S=["itemprop","property","name"].map(D=>x.getAttribute(D)).filter(D=>D?A.includes(D):!1);if(S.length&&S){const D=x.getAttribute("content");if(D)return D}}return""}function c(){let A=n("name","og:site_name","og:title","twitter:title");return A||(A=t.title),A}function l(){return n("description","og:description","twitter:description","keywords")}const u=c(),f=l(),g=i.origin,m=s();return{description:f,url:g,icons:m,name:u}}return eh.getWindowMetadata=e,eh}var gD=Vz();function Wh(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}function wb(r){return Wh(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}const yD="2.23.2";let Fd={getDocsUrl:({docsBaseUrl:r,docsPath:e="",docsSlug:t})=>e?`${r??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${yD}`},Jf=class qw extends Error{constructor(e,t={}){const i=t.cause instanceof qw?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof qw&&t.cause.docsPath||t.docsPath,n=Fd.getDocsUrl?.({...t,docsPath:s}),c=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...i?[`Details: ${i}`]:[],...Fd.version?[`Version: ${Fd.version}`]:[]].join(`
`);super(c,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=yD}walk(e){return wD(this,e)}};function wD(r,e){return e?.(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause!==void 0?wD(r.cause,e):e?null:r}let mD=class extends Jf{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};function Oc(r,{dir:e,size:t=32}={}){return typeof r=="string"?Fz(r,{dir:e,size:t}):Hz(r,{dir:e,size:t})}function Fz(r,{dir:e,size:t=32}={}){if(t===null)return r;const i=r.replace("0x","");if(i.length>t*2)throw new mD({size:Math.ceil(i.length/2),targetSize:t,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function Hz(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new mD({size:r.length,targetSize:t,type:"bytes"});const i=new Uint8Array(t);for(let s=0;s<t;s++){const n=e==="right";i[n?s:t-s-1]=r[n?s:r.length-s-1]}return i}let Zz=class extends Jf{constructor({max:e,min:t,signed:i,size:s,value:n}){super(`Number "${n}" is not in safe ${s?`${s*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},Gz=class extends Jf{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Lc(r,{size:e}){if(wb(r)>e)throw new Gz({givenSize:wb(r),maxSize:e})}function Yw(r,e={}){const{signed:t}=e;e.size&&Lc(r,{size:e.size});const i=BigInt(r);if(!t)return i;const s=(r.length-2)/2,n=(1n<<BigInt(s)*8n-1n)-1n;return i<=n?i:i-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Kz(r,e={}){return Number(Yw(r,e))}const Jz=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Ww(r,e={}){return typeof r=="number"||typeof r=="bigint"?bD(r,e):typeof r=="string"?tk(r,e):typeof r=="boolean"?Xz(r,e):vD(r,e)}function Xz(r,e={}){const t=`0x${Number(r)}`;return typeof e.size=="number"?(Lc(t,{size:e.size}),Oc(t,{size:e.size})):t}function vD(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=Jz[r[s]];const i=`0x${t}`;return typeof e.size=="number"?(Lc(i,{size:e.size}),Oc(i,{dir:"right",size:e.size})):i}function bD(r,e={}){const{signed:t,size:i}=e,s=BigInt(r);let n;i?t?n=(1n<<BigInt(i)*8n-1n)-1n:n=2n**(BigInt(i)*8n)-1n:typeof r=="number"&&(n=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof n=="bigint"&&t?-n-1n:0;if(n&&s>n||s<c){const u=typeof r=="bigint"?"n":"";throw new Zz({max:n?`${n}${u}`:void 0,min:`${c}${u}`,signed:t,size:i,value:`${r}${u}`})}const l=`0x${(t&&s<0?(1n<<BigInt(i*8))+BigInt(s):s).toString(16)}`;return i?Oc(l,{size:i}):l}const ek=new TextEncoder;function tk(r,e={}){const t=ek.encode(r);return vD(t,e)}const rk=new TextEncoder;function ik(r,e={}){return typeof r=="number"||typeof r=="bigint"?sk(r,e):typeof r=="boolean"?nk(r,e):Wh(r)?MD(r,e):ND(r,e)}function nk(r,e={}){const t=new Uint8Array(1);return t[0]=Number(r),typeof e.size=="number"?(Lc(t,{size:e.size}),Oc(t,{size:e.size})):t}const Ms={zero:48,nine:57,A:65,F:70,a:97,f:102};function mb(r){if(r>=Ms.zero&&r<=Ms.nine)return r-Ms.zero;if(r>=Ms.A&&r<=Ms.F)return r-(Ms.A-10);if(r>=Ms.a&&r<=Ms.f)return r-(Ms.a-10)}function MD(r,e={}){let t=r;e.size&&(Lc(t,{size:e.size}),t=Oc(t,{dir:"right",size:e.size}));let i=t.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,n=new Uint8Array(s);for(let c=0,l=0;c<s;c++){const u=mb(i.charCodeAt(l++)),f=mb(i.charCodeAt(l++));if(u===void 0||f===void 0)throw new Jf(`Invalid byte sequence ("${i[l-2]}${i[l-1]}" in "${i}").`);n[c]=u*16+f}return n}function sk(r,e){const t=bD(r,e);return MD(t)}function ND(r,e={}){const t=rk.encode(r);return typeof e.size=="number"?(Lc(t,{size:e.size}),Oc(t,{dir:"right",size:e.size})):t}function Tf(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function ak(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Xf(r,...e){if(!ak(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function gfe(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Tf(r.outputLen),Tf(r.blockLen)}function vb(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function ok(r,e){Xf(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const lu=BigInt(2**32-1),bb=BigInt(32);function ck(r,e=!1){return e?{h:Number(r&lu),l:Number(r>>bb&lu)}:{h:Number(r>>bb&lu)|0,l:Number(r&lu)|0}}function hk(r,e=!1){let t=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:n,l:c}=ck(r[s],e);[t[s],i[s]]=[n,c]}return[t,i]}const lk=(r,e,t)=>r<<t|e>>>32-t,uk=(r,e,t)=>e<<t|r>>>32-t,fk=(r,e,t)=>e<<t-32|r>>>64-t,dk=(r,e,t)=>r<<t-32|e>>>64-t,wo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function pk(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function yfe(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function wfe(r,e){return r<<32-e|r>>>e}const Mb=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function gk(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function Nb(r){for(let e=0;e<r.length;e++)r[e]=gk(r[e])}function yk(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function ID(r){return typeof r=="string"&&(r=yk(r)),Xf(r),r}function mfe(...r){let e=0;for(let i=0;i<r.length;i++){const s=r[i];Xf(s),e+=s.length}const t=new Uint8Array(e);for(let i=0,s=0;i<r.length;i++){const n=r[i];t.set(n,s),s+=n.length}return t}let wk=class{clone(){return this._cloneInto()}};function mk(r){const e=i=>r().update(ID(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function bfe(r=32){if(wo&&typeof wo.getRandomValues=="function")return wo.getRandomValues(new Uint8Array(r));if(wo&&typeof wo.randomBytes=="function")return wo.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}const AD=[],_D=[],ED=[],vk=BigInt(0),th=BigInt(1),bk=BigInt(2),Mk=BigInt(7),Nk=BigInt(256),Ik=BigInt(113);for(let r=0,e=th,t=1,i=0;r<24;r++){[t,i]=[i,(2*t+3*i)%5],AD.push(2*(5*i+t)),_D.push((r+1)*(r+2)/2%64);let s=vk;for(let n=0;n<7;n++)e=(e<<th^(e>>Mk)*Ik)%Nk,e&bk&&(s^=th<<(th<<BigInt(n))-th);ED.push(s)}const[Ak,_k]=hk(ED,!0),Ib=(r,e,t)=>t>32?fk(r,e,t):lk(r,e,t),Ab=(r,e,t)=>t>32?dk(r,e,t):uk(r,e,t);function Ek(r,e=24){const t=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let c=0;c<10;c++)t[c]=r[c]^r[c+10]^r[c+20]^r[c+30]^r[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,u=(c+2)%10,f=t[u],g=t[u+1],m=Ib(f,g,1)^t[l],N=Ab(f,g,1)^t[l+1];for(let A=0;A<50;A+=10)r[c+A]^=m,r[c+A+1]^=N}let s=r[2],n=r[3];for(let c=0;c<24;c++){const l=_D[c],u=Ib(s,n,l),f=Ab(s,n,l),g=AD[c];s=r[g],n=r[g+1],r[g]=u,r[g+1]=f}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)t[l]=r[c+l];for(let l=0;l<10;l++)r[c+l]^=~t[(l+2)%10]&t[(l+4)%10]}r[0]^=Ak[i],r[1]^=_k[i]}t.fill(0)}let Dk=class DD extends wk{constructor(e,t,i,s=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=s,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Tf(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=pk(this.state)}keccak(){Mb||Nb(this.state32),Ek(this.state32,this.rounds),Mb||Nb(this.state32),this.posOut=0,this.pos=0}update(e){vb(this);const{blockLen:t,state:i}=this;e=ID(e);const s=e.length;for(let n=0;n<s;){const c=Math.min(t-this.pos,s-n);for(let l=0;l<c;l++)i[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:i,blockLen:s}=this;e[i]^=t,(t&128)!==0&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){vb(this,!1),Xf(e),this.finish();const t=this.state,{blockLen:i}=this;for(let s=0,n=e.length;s<n;){this.posOut>=i&&this.keccak();const c=Math.min(i-this.posOut,n-s);e.set(t.subarray(this.posOut,this.posOut+c),s),this.posOut+=c,s+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Tf(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ok(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:i,outputLen:s,rounds:n,enableXOF:c}=this;return e||(e=new DD(t,i,s,c,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=i,e.outputLen=s,e.enableXOF=c,e.destroyed=this.destroyed,e}};const Sk=(r,e,t)=>mk(()=>new Dk(e,r,t)),xk=Sk(1,136,256/8);function SD(r,e){const t=e||"hex",i=xk(Wh(r,{strict:!1})?ik(r):r);return t==="bytes"?i:Ww(i)}let Tk=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const i=this.keys().next().value;i&&this.delete(i)}return this}};const Hd=new Tk(8192);function jk(r,e){if(Hd.has(`${r}.${e}`))return Hd.get(`${r}.${e}`);const t=r.substring(2).toLowerCase(),i=SD(ND(t),"bytes"),s=t.split("");for(let c=0;c<40;c+=2)i[c>>1]>>4>=8&&s[c]&&(s[c]=s[c].toUpperCase()),(i[c>>1]&15)>=8&&s[c+1]&&(s[c+1]=s[c+1].toUpperCase());const n=`0x${s.join("")}`;return Hd.set(`${r}.${e}`,n),n}function Ck(r){const e=SD(`0x${r.substring(4)}`).substring(26);return jk(`0x${e}`)}async function Ok({hash:r,signature:e}){const t=Wh(r)?r:Ww(r),{secp256k1:i}=await pn(async()=>{const{secp256k1:c}=await import("./secp256k1-m_cMlnCO.js");return{secp256k1:c}},__vite__mapDeps([18,1,2,3,4,11,7]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:f,s:g,v:m,yParity:N}=e,A=Number(N??m),_=_b(A);return new i.Signature(Yw(f),Yw(g)).addRecoveryBit(_)}const c=Wh(e)?e:Ww(e),l=Kz(`0x${c.slice(130)}`),u=_b(l);return i.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function _b(r){if(r===0||r===1)return r;if(r===27)return 0;if(r===28)return 1;throw new Error("Invalid yParityOrV value")}async function Lk({hash:r,signature:e}){return Ck(await Ok({hash:r,signature:e}))}function xD(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function lc(r,e){e||(e=r.reduce((s,n)=>s+n.length,0));const t=xD(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return t}function zk(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),c=n.charCodeAt(0);if(t[c]!==255)throw new TypeError(n+" is ambiguous");t[c]=s}var l=r.length,u=r.charAt(0),f=Math.log(l)/Math.log(256),g=Math.log(256)/Math.log(l);function m(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var E=0,x=0,S=0,D=_.length;S!==D&&_[S]===0;)S++,E++;for(var C=(D-S)*g+1>>>0,j=new Uint8Array(C);S!==D;){for(var k=_[S],P=0,Q=C-1;(k!==0||P<x)&&Q!==-1;Q--,P++)k+=256*j[Q]>>>0,j[Q]=k%l>>>0,k=k/l>>>0;if(k!==0)throw new Error("Non-zero carry");x=P,S++}for(var F=C-x;F!==C&&j[F]===0;)F++;for(var $=u.repeat(E);F<C;++F)$+=r.charAt(j[F]);return $}function N(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var E=0;if(_[E]!==" "){for(var x=0,S=0;_[E]===u;)x++,E++;for(var D=(_.length-E)*f+1>>>0,C=new Uint8Array(D);_[E];){var j=t[_.charCodeAt(E)];if(j===255)return;for(var k=0,P=D-1;(j!==0||k<S)&&P!==-1;P--,k++)j+=l*C[P]>>>0,C[P]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");S=k,E++}if(_[E]!==" "){for(var Q=D-S;Q!==D&&C[Q]===0;)Q++;for(var F=new Uint8Array(x+(D-Q)),$=x;Q!==D;)F[$++]=C[Q++];return F}}}function A(_){var E=N(_);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:N,decode:A}}var kk=zk,Pk=kk;const Rk=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Uk=r=>new TextEncoder().encode(r),$k=r=>new TextDecoder().decode(r);class Bk{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class qk{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return TD(this,e)}}class Yk{constructor(e){this.decoders=e}or(e){return TD(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const TD=(r,e)=>new Yk({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Wk{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new Bk(e,t,i),this.decoder=new qk(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ed=({name:r,prefix:e,encode:t,decode:i})=>new Wk(r,e,t,i),xl=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=Pk(t,e);return ed({prefix:r,name:e,encode:i,decode:n=>Rk(s(n))})},Qk=(r,e,t,i)=>{const s={};for(let g=0;g<e.length;++g)s[e[g]]=g;let n=r.length;for(;r[n-1]==="=";)--n;const c=new Uint8Array(n*t/8|0);let l=0,u=0,f=0;for(let g=0;g<n;++g){const m=s[r[g]];if(m===void 0)throw new SyntaxError(`Non-${i} character`);u=u<<t|m,l+=t,l>=8&&(l-=8,c[f++]=255&u>>l)}if(l>=t||255&u<<8-l)throw new SyntaxError("Unexpected end of data");return c},Vk=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let n="",c=0,l=0;for(let u=0;u<r.length;++u)for(l=l<<8|r[u],c+=8;c>t;)c-=t,n+=e[s&l>>c];if(c&&(n+=e[s&l<<t-c]),i)for(;n.length*t&7;)n+="=";return n},Ei=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>ed({prefix:e,name:r,encode(s){return Vk(s,i,t)},decode(s){return Qk(s,i,t,r)}}),Fk=ed({prefix:"\0",name:"identity",encode:r=>$k(r),decode:r=>Uk(r)}),Hk=Object.freeze(Object.defineProperty({__proto__:null,identity:Fk},Symbol.toStringTag,{value:"Module"})),Zk=Ei({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Gk=Object.freeze(Object.defineProperty({__proto__:null,base2:Zk},Symbol.toStringTag,{value:"Module"})),Kk=Ei({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Jk=Object.freeze(Object.defineProperty({__proto__:null,base8:Kk},Symbol.toStringTag,{value:"Module"})),Xk=xl({prefix:"9",name:"base10",alphabet:"0123456789"}),e9=Object.freeze(Object.defineProperty({__proto__:null,base10:Xk},Symbol.toStringTag,{value:"Module"})),t9=Ei({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),r9=Ei({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),i9=Object.freeze(Object.defineProperty({__proto__:null,base16:t9,base16upper:r9},Symbol.toStringTag,{value:"Module"})),n9=Ei({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s9=Ei({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),a9=Ei({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),o9=Ei({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c9=Ei({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),h9=Ei({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l9=Ei({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),u9=Ei({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),f9=Ei({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),d9=Object.freeze(Object.defineProperty({__proto__:null,base32:n9,base32hex:c9,base32hexpad:l9,base32hexpadupper:u9,base32hexupper:h9,base32pad:a9,base32padupper:o9,base32upper:s9,base32z:f9},Symbol.toStringTag,{value:"Module"})),p9=xl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),g9=xl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),y9=Object.freeze(Object.defineProperty({__proto__:null,base36:p9,base36upper:g9},Symbol.toStringTag,{value:"Module"})),w9=xl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),m9=xl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),v9=Object.freeze(Object.defineProperty({__proto__:null,base58btc:w9,base58flickr:m9},Symbol.toStringTag,{value:"Module"})),b9=Ei({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),M9=Ei({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),N9=Ei({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),I9=Ei({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),A9=Object.freeze(Object.defineProperty({__proto__:null,base64:b9,base64pad:M9,base64url:N9,base64urlpad:I9},Symbol.toStringTag,{value:"Module"})),jD=Array.from(""),_9=jD.reduce((r,e,t)=>(r[t]=e,r),[]),E9=jD.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function D9(r){return r.reduce((e,t)=>(e+=_9[t],e),"")}function S9(r){const e=[];for(const t of r){const i=E9[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const x9=ed({prefix:"",name:"base256emoji",encode:D9,decode:S9}),T9=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:x9},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Eb={...Hk,...Gk,...Jk,...e9,...i9,...d9,...y9,...v9,...A9,...T9};function CD(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const Db=CD("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Zd=CD("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=xD(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),OD={utf8:Db,"utf-8":Db,hex:Eb.base16,latin1:Zd,ascii:Zd,binary:Zd,...Eb};function Ir(r,e="utf8"){const t=OD[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}function Ct(r,e="utf8"){const t=OD[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Gd={};const j9="6.6.1",C9={version:j9};var Kd={},nf={exports:{}},O9=nf.exports,Sb;function Ps(){return Sb||(Sb=1,(function(r){(function(e,t){function i(M,a){if(!M)throw new Error(a||"Assertion failed")}function s(M,a){M.super_=a;var h=function(){};h.prototype=a.prototype,M.prototype=new h,M.prototype.constructor=M}function n(M,a,h){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(M||0,a||10,h||"be"))}typeof e=="object"?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=ki().Buffer}catch{}n.isBN=function(a){return a instanceof n?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===n.wordSize&&Array.isArray(a.words)},n.max=function(a,h){return a.cmp(h)>0?a:h},n.min=function(a,h){return a.cmp(h)<0?a:h},n.prototype._init=function(a,h,d){if(typeof a=="number")return this._initNumber(a,h,d);if(typeof a=="object")return this._initArray(a,h,d);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var p=0;a[0]==="-"&&(p++,this.negative=1),p<a.length&&(h===16?this._parseHex(a,p,d):(this._parseBase(a,h,p),d==="le"&&this._initArray(this.toArray(),h,d)))},n.prototype._initNumber=function(a,h,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),h,d)},n.prototype._initArray=function(a,h,d){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,b,I=0;if(d==="be")for(p=a.length-1,w=0;p>=0;p-=3)b=a[p]|a[p-1]<<8|a[p-2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);else if(d==="le")for(p=0,w=0;p<a.length;p+=3)b=a[p]|a[p+1]<<8|a[p+2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);return this.strip()};function l(M,a){var h=M.charCodeAt(a);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function u(M,a,h){var d=l(M,h);return h-1>=a&&(d|=l(M,h-1)<<4),d}n.prototype._parseHex=function(a,h,d){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,b=0,I;if(d==="be")for(p=a.length-1;p>=h;p-=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8;else{var y=a.length-h;for(p=y%2===0?h+1:h;p<a.length;p+=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8}this.strip()};function f(M,a,h,d){for(var p=0,w=Math.min(M.length,h),b=a;b<w;b++){var I=M.charCodeAt(b)-48;p*=d,I>=49?p+=I-49+10:I>=17?p+=I-17+10:p+=I}return p}n.prototype._parseBase=function(a,h,d){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=h)p++;p--,w=w/h|0;for(var b=a.length-d,I=b%p,y=Math.min(b,b-I)+d,o=0,v=d;v<y;v+=p)o=f(a,v,v+p,h),this.imuln(w),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(I!==0){var R=1;for(o=f(a,v,a.length,h),v=0;v<I;v++)R*=h;this.imuln(R),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},n.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red},n.prototype.clone=function(){var a=new n(null);return this.copy(a),a},n.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(a,h){a=a||10,h=h|0||1;var d;if(a===16||a==="hex"){d="";for(var p=0,w=0,b=0;b<this.length;b++){var I=this.words[b],y=((I<<p|w)&16777215).toString(16);w=I>>>24-p&16777215,p+=2,p>=26&&(p-=26,b--),w!==0||b!==this.length-1?d=g[6-y.length]+y+d:d=y+d}for(w!==0&&(d=w.toString(16)+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var o=m[a],v=N[a];d="";var R=this.clone();for(R.negative=0;!R.isZero();){var L=R.modn(v).toString(a);R=R.idivn(v),R.isZero()?d=L+d:d=g[o-L.length]+L+d}for(this.isZero()&&(d="0"+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(a,h){return i(typeof c<"u"),this.toArrayLike(c,a,h)},n.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)},n.prototype.toArrayLike=function(a,h,d){var p=this.byteLength(),w=d||Math.max(1,p);i(p<=w,"byte array longer than desired length"),i(w>0,"Requested array length <= 0"),this.strip();var b=h==="le",I=new a(w),y,o,v=this.clone();if(b){for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[o]=y;for(;o<w;o++)I[o]=0}else{for(o=0;o<w-p;o++)I[o]=0;for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[w-o-1]=y}return I},Math.clz32?n.prototype._countBits=function(a){return 32-Math.clz32(a)}:n.prototype._countBits=function(a){var h=a,d=0;return h>=4096&&(d+=13,h>>>=13),h>=64&&(d+=7,h>>>=7),h>=8&&(d+=4,h>>>=4),h>=2&&(d+=2,h>>>=2),d+h},n.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,d=0;return(h&8191)===0&&(d+=13,h>>>=13),(h&127)===0&&(d+=7,h>>>=7),(h&15)===0&&(d+=4,h>>>=4),(h&3)===0&&(d+=2,h>>>=2),(h&1)===0&&d++,d},n.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function A(M){for(var a=new Array(M.bitLength()),h=0;h<a.length;h++){var d=h/26|0,p=h%26;a[h]=(M.words[d]&1<<p)>>>p}return a}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var d=this._zeroBits(this.words[h]);if(a+=d,d!==26)break}return a},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},n.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this.strip()},n.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},n.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},n.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},n.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var d=0;d<h.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=h.length,this.strip()},n.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},n.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},n.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},n.prototype.iuxor=function(a){var h,d;this.length>a.length?(h=this,d=a):(h=a,d=this);for(var p=0;p<d.length;p++)this.words[p]=h.words[p]^d.words[p];if(this!==h)for(;p<h.length;p++)this.words[p]=h.words[p];return this.length=h.length,this.strip()},n.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},n.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},n.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},n.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,d=a%26;this._expand(h),d>0&&h--;for(var p=0;p<h;p++)this.words[p]=~this.words[p]&67108863;return d>0&&(this.words[p]=~this.words[p]&67108863>>26-d),this.strip()},n.prototype.notn=function(a){return this.clone().inotn(a)},n.prototype.setn=function(a,h){i(typeof a=="number"&&a>=0);var d=a/26|0,p=a%26;return this._expand(d+1),h?this.words[d]=this.words[d]|1<<p:this.words[d]=this.words[d]&~(1<<p),this.strip()},n.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var d,p;this.length>a.length?(d=this,p=a):(d=a,p=this);for(var w=0,b=0;b<p.length;b++)h=(d.words[b]|0)+(p.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;for(;w!==0&&b<d.length;b++)h=(d.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;if(this.length=d.length,w!==0)this.words[this.length]=w,this.length++;else if(d!==this)for(;b<d.length;b++)this.words[b]=d.words[b];return this},n.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},n.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;d>0?(p=this,w=a):(p=a,w=this);for(var b=0,I=0;I<w.length;I++)h=(p.words[I]|0)-(w.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;for(;b!==0&&I<p.length;I++)h=(p.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;if(b===0&&I<p.length&&p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this.length=Math.max(this.length,I),p!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(a){return this.clone().isub(a)};function _(M,a,h){h.negative=a.negative^M.negative;var d=M.length+a.length|0;h.length=d,d=d-1|0;var p=M.words[0]|0,w=a.words[0]|0,b=p*w,I=b&67108863,y=b/67108864|0;h.words[0]=I;for(var o=1;o<d;o++){for(var v=y>>>26,R=y&67108863,L=Math.min(o,a.length-1),z=Math.max(0,o-M.length+1);z<=L;z++){var q=o-z|0;p=M.words[q]|0,w=a.words[z]|0,b=p*w+R,v+=b/67108864|0,R=b&67108863}h.words[o]=R|0,y=v|0}return y!==0?h.words[o]=y|0:h.length--,h.strip()}var E=function(a,h,d){var p=a.words,w=h.words,b=d.words,I=0,y,o,v,R=p[0]|0,L=R&8191,z=R>>>13,q=p[1]|0,Y=q&8191,T=q>>>13,O=p[2]|0,B=O&8191,W=O>>>13,V=p[3]|0,U=V&8191,H=V>>>13,de=p[4]|0,ee=de&8191,J=de>>>13,Qe=p[5]|0,oe=Qe&8191,K=Qe>>>13,et=p[6]|0,re=et&8191,ae=et>>>13,Ke=p[7]|0,se=Ke&8191,ce=Ke>>>13,Dt=p[8]|0,he=Dt&8191,le=Dt>>>13,Cr=p[9]|0,ue=Cr&8191,ve=Cr>>>13,Br=w[0]|0,_e=Br&8191,be=Br>>>13,Or=w[1]|0,Me=Or&8191,Ne=Or>>>13,Vr=w[2]|0,fe=Vr&8191,Ie=Vr>>>13,Fr=w[3]|0,Ee=Fr&8191,ge=Fr>>>13,Er=w[4]|0,ye=Er&8191,we=Er>>>13,Pr=w[5]|0,pe=Pr&8191,De=Pr>>>13,Hr=w[6]|0,Se=Hr&8191,xe=Hr>>>13,Zr=w[7]|0,Ae=Zr&8191,me=Zr>>>13,tr=w[8]|0,Te=tr&8191,je=tr>>>13,Gr=w[9]|0,Ce=Gr&8191,Oe=Gr>>>13;d.negative=a.negative^h.negative,d.length=19,y=Math.imul(L,_e),o=Math.imul(L,be),o=o+Math.imul(z,_e)|0,v=Math.imul(z,be);var mt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,y=Math.imul(Y,_e),o=Math.imul(Y,be),o=o+Math.imul(T,_e)|0,v=Math.imul(T,be),y=y+Math.imul(L,Me)|0,o=o+Math.imul(L,Ne)|0,o=o+Math.imul(z,Me)|0,v=v+Math.imul(z,Ne)|0;var rr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,y=Math.imul(B,_e),o=Math.imul(B,be),o=o+Math.imul(W,_e)|0,v=Math.imul(W,be),y=y+Math.imul(Y,Me)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(T,Me)|0,v=v+Math.imul(T,Ne)|0,y=y+Math.imul(L,fe)|0,o=o+Math.imul(L,Ie)|0,o=o+Math.imul(z,fe)|0,v=v+Math.imul(z,Ie)|0;var ir=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul(U,_e),o=Math.imul(U,be),o=o+Math.imul(H,_e)|0,v=Math.imul(H,be),y=y+Math.imul(B,Me)|0,o=o+Math.imul(B,Ne)|0,o=o+Math.imul(W,Me)|0,v=v+Math.imul(W,Ne)|0,y=y+Math.imul(Y,fe)|0,o=o+Math.imul(Y,Ie)|0,o=o+Math.imul(T,fe)|0,v=v+Math.imul(T,Ie)|0,y=y+Math.imul(L,Ee)|0,o=o+Math.imul(L,ge)|0,o=o+Math.imul(z,Ee)|0,v=v+Math.imul(z,ge)|0;var nr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(ee,_e),o=Math.imul(ee,be),o=o+Math.imul(J,_e)|0,v=Math.imul(J,be),y=y+Math.imul(U,Me)|0,o=o+Math.imul(U,Ne)|0,o=o+Math.imul(H,Me)|0,v=v+Math.imul(H,Ne)|0,y=y+Math.imul(B,fe)|0,o=o+Math.imul(B,Ie)|0,o=o+Math.imul(W,fe)|0,v=v+Math.imul(W,Ie)|0,y=y+Math.imul(Y,Ee)|0,o=o+Math.imul(Y,ge)|0,o=o+Math.imul(T,Ee)|0,v=v+Math.imul(T,ge)|0,y=y+Math.imul(L,ye)|0,o=o+Math.imul(L,we)|0,o=o+Math.imul(z,ye)|0,v=v+Math.imul(z,we)|0;var sr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(oe,_e),o=Math.imul(oe,be),o=o+Math.imul(K,_e)|0,v=Math.imul(K,be),y=y+Math.imul(ee,Me)|0,o=o+Math.imul(ee,Ne)|0,o=o+Math.imul(J,Me)|0,v=v+Math.imul(J,Ne)|0,y=y+Math.imul(U,fe)|0,o=o+Math.imul(U,Ie)|0,o=o+Math.imul(H,fe)|0,v=v+Math.imul(H,Ie)|0,y=y+Math.imul(B,Ee)|0,o=o+Math.imul(B,ge)|0,o=o+Math.imul(W,Ee)|0,v=v+Math.imul(W,ge)|0,y=y+Math.imul(Y,ye)|0,o=o+Math.imul(Y,we)|0,o=o+Math.imul(T,ye)|0,v=v+Math.imul(T,we)|0,y=y+Math.imul(L,pe)|0,o=o+Math.imul(L,De)|0,o=o+Math.imul(z,pe)|0,v=v+Math.imul(z,De)|0;var ar=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ar>>>26)|0,ar&=67108863,y=Math.imul(re,_e),o=Math.imul(re,be),o=o+Math.imul(ae,_e)|0,v=Math.imul(ae,be),y=y+Math.imul(oe,Me)|0,o=o+Math.imul(oe,Ne)|0,o=o+Math.imul(K,Me)|0,v=v+Math.imul(K,Ne)|0,y=y+Math.imul(ee,fe)|0,o=o+Math.imul(ee,Ie)|0,o=o+Math.imul(J,fe)|0,v=v+Math.imul(J,Ie)|0,y=y+Math.imul(U,Ee)|0,o=o+Math.imul(U,ge)|0,o=o+Math.imul(H,Ee)|0,v=v+Math.imul(H,ge)|0,y=y+Math.imul(B,ye)|0,o=o+Math.imul(B,we)|0,o=o+Math.imul(W,ye)|0,v=v+Math.imul(W,we)|0,y=y+Math.imul(Y,pe)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(T,pe)|0,v=v+Math.imul(T,De)|0,y=y+Math.imul(L,Se)|0,o=o+Math.imul(L,xe)|0,o=o+Math.imul(z,Se)|0,v=v+Math.imul(z,xe)|0;var St=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(St>>>26)|0,St&=67108863,y=Math.imul(se,_e),o=Math.imul(se,be),o=o+Math.imul(ce,_e)|0,v=Math.imul(ce,be),y=y+Math.imul(re,Me)|0,o=o+Math.imul(re,Ne)|0,o=o+Math.imul(ae,Me)|0,v=v+Math.imul(ae,Ne)|0,y=y+Math.imul(oe,fe)|0,o=o+Math.imul(oe,Ie)|0,o=o+Math.imul(K,fe)|0,v=v+Math.imul(K,Ie)|0,y=y+Math.imul(ee,Ee)|0,o=o+Math.imul(ee,ge)|0,o=o+Math.imul(J,Ee)|0,v=v+Math.imul(J,ge)|0,y=y+Math.imul(U,ye)|0,o=o+Math.imul(U,we)|0,o=o+Math.imul(H,ye)|0,v=v+Math.imul(H,we)|0,y=y+Math.imul(B,pe)|0,o=o+Math.imul(B,De)|0,o=o+Math.imul(W,pe)|0,v=v+Math.imul(W,De)|0,y=y+Math.imul(Y,Se)|0,o=o+Math.imul(Y,xe)|0,o=o+Math.imul(T,Se)|0,v=v+Math.imul(T,xe)|0,y=y+Math.imul(L,Ae)|0,o=o+Math.imul(L,me)|0,o=o+Math.imul(z,Ae)|0,v=v+Math.imul(z,me)|0;var or=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(he,_e),o=Math.imul(he,be),o=o+Math.imul(le,_e)|0,v=Math.imul(le,be),y=y+Math.imul(se,Me)|0,o=o+Math.imul(se,Ne)|0,o=o+Math.imul(ce,Me)|0,v=v+Math.imul(ce,Ne)|0,y=y+Math.imul(re,fe)|0,o=o+Math.imul(re,Ie)|0,o=o+Math.imul(ae,fe)|0,v=v+Math.imul(ae,Ie)|0,y=y+Math.imul(oe,Ee)|0,o=o+Math.imul(oe,ge)|0,o=o+Math.imul(K,Ee)|0,v=v+Math.imul(K,ge)|0,y=y+Math.imul(ee,ye)|0,o=o+Math.imul(ee,we)|0,o=o+Math.imul(J,ye)|0,v=v+Math.imul(J,we)|0,y=y+Math.imul(U,pe)|0,o=o+Math.imul(U,De)|0,o=o+Math.imul(H,pe)|0,v=v+Math.imul(H,De)|0,y=y+Math.imul(B,Se)|0,o=o+Math.imul(B,xe)|0,o=o+Math.imul(W,Se)|0,v=v+Math.imul(W,xe)|0,y=y+Math.imul(Y,Ae)|0,o=o+Math.imul(Y,me)|0,o=o+Math.imul(T,Ae)|0,v=v+Math.imul(T,me)|0,y=y+Math.imul(L,Te)|0,o=o+Math.imul(L,je)|0,o=o+Math.imul(z,Te)|0,v=v+Math.imul(z,je)|0;var cr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(cr>>>26)|0,cr&=67108863,y=Math.imul(ue,_e),o=Math.imul(ue,be),o=o+Math.imul(ve,_e)|0,v=Math.imul(ve,be),y=y+Math.imul(he,Me)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(le,Me)|0,v=v+Math.imul(le,Ne)|0,y=y+Math.imul(se,fe)|0,o=o+Math.imul(se,Ie)|0,o=o+Math.imul(ce,fe)|0,v=v+Math.imul(ce,Ie)|0,y=y+Math.imul(re,Ee)|0,o=o+Math.imul(re,ge)|0,o=o+Math.imul(ae,Ee)|0,v=v+Math.imul(ae,ge)|0,y=y+Math.imul(oe,ye)|0,o=o+Math.imul(oe,we)|0,o=o+Math.imul(K,ye)|0,v=v+Math.imul(K,we)|0,y=y+Math.imul(ee,pe)|0,o=o+Math.imul(ee,De)|0,o=o+Math.imul(J,pe)|0,v=v+Math.imul(J,De)|0,y=y+Math.imul(U,Se)|0,o=o+Math.imul(U,xe)|0,o=o+Math.imul(H,Se)|0,v=v+Math.imul(H,xe)|0,y=y+Math.imul(B,Ae)|0,o=o+Math.imul(B,me)|0,o=o+Math.imul(W,Ae)|0,v=v+Math.imul(W,me)|0,y=y+Math.imul(Y,Te)|0,o=o+Math.imul(Y,je)|0,o=o+Math.imul(T,Te)|0,v=v+Math.imul(T,je)|0,y=y+Math.imul(L,Ce)|0,o=o+Math.imul(L,Oe)|0,o=o+Math.imul(z,Ce)|0,v=v+Math.imul(z,Oe)|0;var hr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(hr>>>26)|0,hr&=67108863,y=Math.imul(ue,Me),o=Math.imul(ue,Ne),o=o+Math.imul(ve,Me)|0,v=Math.imul(ve,Ne),y=y+Math.imul(he,fe)|0,o=o+Math.imul(he,Ie)|0,o=o+Math.imul(le,fe)|0,v=v+Math.imul(le,Ie)|0,y=y+Math.imul(se,Ee)|0,o=o+Math.imul(se,ge)|0,o=o+Math.imul(ce,Ee)|0,v=v+Math.imul(ce,ge)|0,y=y+Math.imul(re,ye)|0,o=o+Math.imul(re,we)|0,o=o+Math.imul(ae,ye)|0,v=v+Math.imul(ae,we)|0,y=y+Math.imul(oe,pe)|0,o=o+Math.imul(oe,De)|0,o=o+Math.imul(K,pe)|0,v=v+Math.imul(K,De)|0,y=y+Math.imul(ee,Se)|0,o=o+Math.imul(ee,xe)|0,o=o+Math.imul(J,Se)|0,v=v+Math.imul(J,xe)|0,y=y+Math.imul(U,Ae)|0,o=o+Math.imul(U,me)|0,o=o+Math.imul(H,Ae)|0,v=v+Math.imul(H,me)|0,y=y+Math.imul(B,Te)|0,o=o+Math.imul(B,je)|0,o=o+Math.imul(W,Te)|0,v=v+Math.imul(W,je)|0,y=y+Math.imul(Y,Ce)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(T,Ce)|0,v=v+Math.imul(T,Oe)|0;var lr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,y=Math.imul(ue,fe),o=Math.imul(ue,Ie),o=o+Math.imul(ve,fe)|0,v=Math.imul(ve,Ie),y=y+Math.imul(he,Ee)|0,o=o+Math.imul(he,ge)|0,o=o+Math.imul(le,Ee)|0,v=v+Math.imul(le,ge)|0,y=y+Math.imul(se,ye)|0,o=o+Math.imul(se,we)|0,o=o+Math.imul(ce,ye)|0,v=v+Math.imul(ce,we)|0,y=y+Math.imul(re,pe)|0,o=o+Math.imul(re,De)|0,o=o+Math.imul(ae,pe)|0,v=v+Math.imul(ae,De)|0,y=y+Math.imul(oe,Se)|0,o=o+Math.imul(oe,xe)|0,o=o+Math.imul(K,Se)|0,v=v+Math.imul(K,xe)|0,y=y+Math.imul(ee,Ae)|0,o=o+Math.imul(ee,me)|0,o=o+Math.imul(J,Ae)|0,v=v+Math.imul(J,me)|0,y=y+Math.imul(U,Te)|0,o=o+Math.imul(U,je)|0,o=o+Math.imul(H,Te)|0,v=v+Math.imul(H,je)|0,y=y+Math.imul(B,Ce)|0,o=o+Math.imul(B,Oe)|0,o=o+Math.imul(W,Ce)|0,v=v+Math.imul(W,Oe)|0;var ur=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ur>>>26)|0,ur&=67108863,y=Math.imul(ue,Ee),o=Math.imul(ue,ge),o=o+Math.imul(ve,Ee)|0,v=Math.imul(ve,ge),y=y+Math.imul(he,ye)|0,o=o+Math.imul(he,we)|0,o=o+Math.imul(le,ye)|0,v=v+Math.imul(le,we)|0,y=y+Math.imul(se,pe)|0,o=o+Math.imul(se,De)|0,o=o+Math.imul(ce,pe)|0,v=v+Math.imul(ce,De)|0,y=y+Math.imul(re,Se)|0,o=o+Math.imul(re,xe)|0,o=o+Math.imul(ae,Se)|0,v=v+Math.imul(ae,xe)|0,y=y+Math.imul(oe,Ae)|0,o=o+Math.imul(oe,me)|0,o=o+Math.imul(K,Ae)|0,v=v+Math.imul(K,me)|0,y=y+Math.imul(ee,Te)|0,o=o+Math.imul(ee,je)|0,o=o+Math.imul(J,Te)|0,v=v+Math.imul(J,je)|0,y=y+Math.imul(U,Ce)|0,o=o+Math.imul(U,Oe)|0,o=o+Math.imul(H,Ce)|0,v=v+Math.imul(H,Oe)|0;var Ut=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,y=Math.imul(ue,ye),o=Math.imul(ue,we),o=o+Math.imul(ve,ye)|0,v=Math.imul(ve,we),y=y+Math.imul(he,pe)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(le,pe)|0,v=v+Math.imul(le,De)|0,y=y+Math.imul(se,Se)|0,o=o+Math.imul(se,xe)|0,o=o+Math.imul(ce,Se)|0,v=v+Math.imul(ce,xe)|0,y=y+Math.imul(re,Ae)|0,o=o+Math.imul(re,me)|0,o=o+Math.imul(ae,Ae)|0,v=v+Math.imul(ae,me)|0,y=y+Math.imul(oe,Te)|0,o=o+Math.imul(oe,je)|0,o=o+Math.imul(K,Te)|0,v=v+Math.imul(K,je)|0,y=y+Math.imul(ee,Ce)|0,o=o+Math.imul(ee,Oe)|0,o=o+Math.imul(J,Ce)|0,v=v+Math.imul(J,Oe)|0;var fr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(fr>>>26)|0,fr&=67108863,y=Math.imul(ue,pe),o=Math.imul(ue,De),o=o+Math.imul(ve,pe)|0,v=Math.imul(ve,De),y=y+Math.imul(he,Se)|0,o=o+Math.imul(he,xe)|0,o=o+Math.imul(le,Se)|0,v=v+Math.imul(le,xe)|0,y=y+Math.imul(se,Ae)|0,o=o+Math.imul(se,me)|0,o=o+Math.imul(ce,Ae)|0,v=v+Math.imul(ce,me)|0,y=y+Math.imul(re,Te)|0,o=o+Math.imul(re,je)|0,o=o+Math.imul(ae,Te)|0,v=v+Math.imul(ae,je)|0,y=y+Math.imul(oe,Ce)|0,o=o+Math.imul(oe,Oe)|0,o=o+Math.imul(K,Ce)|0,v=v+Math.imul(K,Oe)|0;var dr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,y=Math.imul(ue,Se),o=Math.imul(ue,xe),o=o+Math.imul(ve,Se)|0,v=Math.imul(ve,xe),y=y+Math.imul(he,Ae)|0,o=o+Math.imul(he,me)|0,o=o+Math.imul(le,Ae)|0,v=v+Math.imul(le,me)|0,y=y+Math.imul(se,Te)|0,o=o+Math.imul(se,je)|0,o=o+Math.imul(ce,Te)|0,v=v+Math.imul(ce,je)|0,y=y+Math.imul(re,Ce)|0,o=o+Math.imul(re,Oe)|0,o=o+Math.imul(ae,Ce)|0,v=v+Math.imul(ae,Oe)|0;var vt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(vt>>>26)|0,vt&=67108863,y=Math.imul(ue,Ae),o=Math.imul(ue,me),o=o+Math.imul(ve,Ae)|0,v=Math.imul(ve,me),y=y+Math.imul(he,Te)|0,o=o+Math.imul(he,je)|0,o=o+Math.imul(le,Te)|0,v=v+Math.imul(le,je)|0,y=y+Math.imul(se,Ce)|0,o=o+Math.imul(se,Oe)|0,o=o+Math.imul(ce,Ce)|0,v=v+Math.imul(ce,Oe)|0;var pr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,y=Math.imul(ue,Te),o=Math.imul(ue,je),o=o+Math.imul(ve,Te)|0,v=Math.imul(ve,je),y=y+Math.imul(he,Ce)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(le,Ce)|0,v=v+Math.imul(le,Oe)|0;var gr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(gr>>>26)|0,gr&=67108863,y=Math.imul(ue,Ce),o=Math.imul(ue,Oe),o=o+Math.imul(ve,Ce)|0,v=Math.imul(ve,Oe);var yr=(I+y|0)+((o&8191)<<13)|0;return I=(v+(o>>>13)|0)+(yr>>>26)|0,yr&=67108863,b[0]=mt,b[1]=rr,b[2]=ir,b[3]=nr,b[4]=sr,b[5]=ar,b[6]=St,b[7]=or,b[8]=cr,b[9]=hr,b[10]=lr,b[11]=ur,b[12]=Ut,b[13]=fr,b[14]=dr,b[15]=vt,b[16]=pr,b[17]=gr,b[18]=yr,I!==0&&(b[19]=I,d.length++),d};Math.imul||(E=_);function x(M,a,h){h.negative=a.negative^M.negative,h.length=M.length+a.length;for(var d=0,p=0,w=0;w<h.length-1;w++){var b=p;p=0;for(var I=d&67108863,y=Math.min(w,a.length-1),o=Math.max(0,w-M.length+1);o<=y;o++){var v=w-o,R=M.words[v]|0,L=a.words[o]|0,z=R*L,q=z&67108863;b=b+(z/67108864|0)|0,q=q+I|0,I=q&67108863,b=b+(q>>>26)|0,p+=b>>>26,b&=67108863}h.words[w]=I,d=b,b=p}return d!==0?h.words[w]=d:h.length--,h.strip()}function S(M,a,h){var d=new D;return d.mulp(M,a,h)}n.prototype.mulTo=function(a,h){var d,p=this.length+a.length;return this.length===10&&a.length===10?d=E(this,a,h):p<63?d=_(this,a,h):p<1024?d=x(this,a,h):d=S(this,a,h),d};function D(M,a){this.x=M,this.y=a}D.prototype.makeRBT=function(a){for(var h=new Array(a),d=n.prototype._countBits(a)-1,p=0;p<a;p++)h[p]=this.revBin(p,d,a);return h},D.prototype.revBin=function(a,h,d){if(a===0||a===d-1)return a;for(var p=0,w=0;w<h;w++)p|=(a&1)<<h-w-1,a>>=1;return p},D.prototype.permute=function(a,h,d,p,w,b){for(var I=0;I<b;I++)p[I]=h[a[I]],w[I]=d[a[I]]},D.prototype.transform=function(a,h,d,p,w,b){this.permute(b,a,h,d,p,w);for(var I=1;I<w;I<<=1)for(var y=I<<1,o=Math.cos(2*Math.PI/y),v=Math.sin(2*Math.PI/y),R=0;R<w;R+=y)for(var L=o,z=v,q=0;q<I;q++){var Y=d[R+q],T=p[R+q],O=d[R+q+I],B=p[R+q+I],W=L*O-z*B;B=L*B+z*O,O=W,d[R+q]=Y+O,p[R+q]=T+B,d[R+q+I]=Y-O,p[R+q+I]=T-B,q!==y&&(W=o*L-v*z,z=o*z+v*L,L=W)}},D.prototype.guessLen13b=function(a,h){var d=Math.max(h,a)|1,p=d&1,w=0;for(d=d/2|0;d;d=d>>>1)w++;return 1<<w+1+p},D.prototype.conjugate=function(a,h,d){if(!(d<=1))for(var p=0;p<d/2;p++){var w=a[p];a[p]=a[d-p-1],a[d-p-1]=w,w=h[p],h[p]=-h[d-p-1],h[d-p-1]=-w}},D.prototype.normalize13b=function(a,h){for(var d=0,p=0;p<h/2;p++){var w=Math.round(a[2*p+1]/h)*8192+Math.round(a[2*p]/h)+d;a[p]=w&67108863,w<67108864?d=0:d=w/67108864|0}return a},D.prototype.convert13b=function(a,h,d,p){for(var w=0,b=0;b<h;b++)w=w+(a[b]|0),d[2*b]=w&8191,w=w>>>13,d[2*b+1]=w&8191,w=w>>>13;for(b=2*h;b<p;++b)d[b]=0;i(w===0),i((w&-8192)===0)},D.prototype.stub=function(a){for(var h=new Array(a),d=0;d<a;d++)h[d]=0;return h},D.prototype.mulp=function(a,h,d){var p=2*this.guessLen13b(a.length,h.length),w=this.makeRBT(p),b=this.stub(p),I=new Array(p),y=new Array(p),o=new Array(p),v=new Array(p),R=new Array(p),L=new Array(p),z=d.words;z.length=p,this.convert13b(a.words,a.length,I,p),this.convert13b(h.words,h.length,v,p),this.transform(I,b,y,o,p,w),this.transform(v,b,R,L,p,w);for(var q=0;q<p;q++){var Y=y[q]*R[q]-o[q]*L[q];o[q]=y[q]*L[q]+o[q]*R[q],y[q]=Y}return this.conjugate(y,o,p),this.transform(y,o,z,b,p,w),this.conjugate(z,b,p),this.normalize13b(z,p),d.negative=a.negative^h.negative,d.length=a.length+h.length,d.strip()},n.prototype.mul=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},n.prototype.mulf=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),S(this,a,h)},n.prototype.imul=function(a){return this.clone().mulTo(a,this)},n.prototype.imuln=function(a){i(typeof a=="number"),i(a<67108864);for(var h=0,d=0;d<this.length;d++){var p=(this.words[d]|0)*a,w=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=w>>>26,this.words[d]=w&67108863}return h!==0&&(this.words[d]=h,this.length++),this.length=a===0?1:this.length,this},n.prototype.muln=function(a){return this.clone().imuln(a)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(a){var h=A(a);if(h.length===0)return new n(1);for(var d=this,p=0;p<h.length&&h[p]===0;p++,d=d.sqr());if(++p<h.length)for(var w=d.sqr();p<h.length;p++,w=w.sqr())h[p]!==0&&(d=d.mul(w));return d},n.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=67108863>>>26-h<<26-h,w;if(h!==0){var b=0;for(w=0;w<this.length;w++){var I=this.words[w]&p,y=(this.words[w]|0)-I<<h;this.words[w]=y|b,b=I>>>26-h}b&&(this.words[w]=b,this.length++)}if(d!==0){for(w=this.length-1;w>=0;w--)this.words[w+d]=this.words[w];for(w=0;w<d;w++)this.words[w]=0;this.length+=d}return this.strip()},n.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},n.prototype.iushrn=function(a,h,d){i(typeof a=="number"&&a>=0);var p;h?p=(h-h%26)/26:p=0;var w=a%26,b=Math.min((a-w)/26,this.length),I=67108863^67108863>>>w<<w,y=d;if(p-=b,p=Math.max(0,p),y){for(var o=0;o<b;o++)y.words[o]=this.words[o];y.length=b}if(b!==0)if(this.length>b)for(this.length-=b,o=0;o<this.length;o++)this.words[o]=this.words[o+b];else this.words[0]=0,this.length=1;var v=0;for(o=this.length-1;o>=0&&(v!==0||o>=p);o--){var R=this.words[o]|0;this.words[o]=v<<26-w|R>>>w,v=R&I}return y&&v!==0&&(y.words[y.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(a,h,d){return i(this.negative===0),this.iushrn(a,h,d)},n.prototype.shln=function(a){return this.clone().ishln(a)},n.prototype.ushln=function(a){return this.clone().iushln(a)},n.prototype.shrn=function(a){return this.clone().ishrn(a)},n.prototype.ushrn=function(a){return this.clone().iushrn(a)},n.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return!1;var w=this.words[d];return!!(w&p)},n.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(h!==0&&d++,this.length=Math.min(d,this.length),h!==0){var p=67108863^67108863>>>h<<h;this.words[this.length-1]&=p}return this.strip()},n.prototype.maskn=function(a){return this.clone().imaskn(a)},n.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},n.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},n.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},n.prototype.addn=function(a){return this.clone().iaddn(a)},n.prototype.subn=function(a){return this.clone().isubn(a)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(a,h,d){var p=a.length+d,w;this._expand(p);var b,I=0;for(w=0;w<a.length;w++){b=(this.words[w+d]|0)+I;var y=(a.words[w]|0)*h;b-=y&67108863,I=(b>>26)-(y/67108864|0),this.words[w+d]=b&67108863}for(;w<this.length-d;w++)b=(this.words[w+d]|0)+I,I=b>>26,this.words[w+d]=b&67108863;if(I===0)return this.strip();for(i(I===-1),I=0,w=0;w<this.length;w++)b=-(this.words[w]|0)+I,I=b>>26,this.words[w]=b&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(a,h){var d=this.length-a.length,p=this.clone(),w=a,b=w.words[w.length-1]|0,I=this._countBits(b);d=26-I,d!==0&&(w=w.ushln(d),p.iushln(d),b=w.words[w.length-1]|0);var y=p.length-w.length,o;if(h!=="mod"){o=new n(null),o.length=y+1,o.words=new Array(o.length);for(var v=0;v<o.length;v++)o.words[v]=0}var R=p.clone()._ishlnsubmul(w,1,y);R.negative===0&&(p=R,o&&(o.words[y]=1));for(var L=y-1;L>=0;L--){var z=(p.words[w.length+L]|0)*67108864+(p.words[w.length+L-1]|0);for(z=Math.min(z/b|0,67108863),p._ishlnsubmul(w,z,L);p.negative!==0;)z--,p.negative=0,p._ishlnsubmul(w,1,L),p.isZero()||(p.negative^=1);o&&(o.words[L]=z)}return o&&o.strip(),p.strip(),h!=="div"&&d!==0&&p.iushrn(d),{div:o||null,mod:p}},n.prototype.divmod=function(a,h,d){if(i(!a.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var p,w,b;return this.negative!==0&&a.negative===0?(b=this.neg().divmod(a,h),h!=="mod"&&(p=b.div.neg()),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.iadd(a)),{div:p,mod:w}):this.negative===0&&a.negative!==0?(b=this.divmod(a.neg(),h),h!=="mod"&&(p=b.div.neg()),{div:p,mod:b.mod}):(this.negative&a.negative)!==0?(b=this.neg().divmod(a.neg(),h),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.isub(a)),{div:b.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new n(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new n(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new n(this.modn(a.words[0]))}:this._wordDiv(a,h)},n.prototype.div=function(a){return this.divmod(a,"div",!1).div},n.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},n.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},n.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var d=h.div.negative!==0?h.mod.isub(a):h.mod,p=a.ushrn(1),w=a.andln(1),b=d.cmp(p);return b<0||w===1&&b===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},n.prototype.modn=function(a){i(a<=67108863);for(var h=(1<<26)%a,d=0,p=this.length-1;p>=0;p--)d=(h*d+(this.words[p]|0))%a;return d},n.prototype.idivn=function(a){i(a<=67108863);for(var h=0,d=this.length-1;d>=0;d--){var p=(this.words[d]|0)+h*67108864;this.words[d]=p/a|0,h=p%a}return this.strip()},n.prototype.divn=function(a){return this.clone().idivn(a)},n.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=new n(0),I=new n(1),y=0;h.isEven()&&d.isEven();)h.iushrn(1),d.iushrn(1),++y;for(var o=d.clone(),v=h.clone();!h.isZero();){for(var R=0,L=1;(h.words[0]&L)===0&&R<26;++R,L<<=1);if(R>0)for(h.iushrn(R);R-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(o),w.isub(v)),p.iushrn(1),w.iushrn(1);for(var z=0,q=1;(d.words[0]&q)===0&&z<26;++z,q<<=1);if(z>0)for(d.iushrn(z);z-- >0;)(b.isOdd()||I.isOdd())&&(b.iadd(o),I.isub(v)),b.iushrn(1),I.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(b),w.isub(I)):(d.isub(h),b.isub(p),I.isub(w))}return{a:b,b:I,gcd:d.iushln(y)}},n.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=d.clone();h.cmpn(1)>0&&d.cmpn(1)>0;){for(var I=0,y=1;(h.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(h.iushrn(I);I-- >0;)p.isOdd()&&p.iadd(b),p.iushrn(1);for(var o=0,v=1;(d.words[0]&v)===0&&o<26;++o,v<<=1);if(o>0)for(d.iushrn(o);o-- >0;)w.isOdd()&&w.iadd(b),w.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(w)):(d.isub(h),w.isub(p))}var R;return h.cmpn(1)===0?R=p:R=w,R.cmpn(0)<0&&R.iadd(a),R},n.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),d=a.clone();h.negative=0,d.negative=0;for(var p=0;h.isEven()&&d.isEven();p++)h.iushrn(1),d.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;d.isEven();)d.iushrn(1);var w=h.cmp(d);if(w<0){var b=h;h=d,d=b}else if(w===0||d.cmpn(1)===0)break;h.isub(d)}while(!0);return d.iushln(p)},n.prototype.invm=function(a){return this.egcd(a).a.umod(a)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(a){return this.words[0]&a},n.prototype.bincn=function(a){i(typeof a=="number");var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return this._expand(d+1),this.words[d]|=p,this;for(var w=p,b=d;w!==0&&b<this.length;b++){var I=this.words[b]|0;I+=w,w=I>>>26,I&=67108863,this.words[b]=I}return w!==0&&(this.words[b]=w,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var d;if(this.length>1)d=1;else{h&&(a=-a),i(a<=67108863,"Number is too big");var p=this.words[0]|0;d=p===a?0:p<a?-1:1}return this.negative!==0?-d|0:d},n.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},n.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,d=this.length-1;d>=0;d--){var p=this.words[d]|0,w=a.words[d]|0;if(p!==w){p<w?h=-1:p>w&&(h=1);break}}return h},n.prototype.gtn=function(a){return this.cmpn(a)===1},n.prototype.gt=function(a){return this.cmp(a)===1},n.prototype.gten=function(a){return this.cmpn(a)>=0},n.prototype.gte=function(a){return this.cmp(a)>=0},n.prototype.ltn=function(a){return this.cmpn(a)===-1},n.prototype.lt=function(a){return this.cmp(a)===-1},n.prototype.lten=function(a){return this.cmpn(a)<=0},n.prototype.lte=function(a){return this.cmp(a)<=0},n.prototype.eqn=function(a){return this.cmpn(a)===0},n.prototype.eq=function(a){return this.cmp(a)===0},n.red=function(a){return new $(a)},n.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(a){return this.red=a,this},n.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},n.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},n.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},n.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},n.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},n.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},n.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},n.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var C={k256:null,p224:null,p192:null,p25519:null};function j(M,a){this.name=M,this.p=new n(a,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var a=new n(null);return a.words=new Array(Math.ceil(this.n/13)),a},j.prototype.ireduce=function(a){var h=a,d;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),d=h.bitLength();while(d>this.n);var p=d<this.n?-1:h.ucmp(this.p);return p===0?(h.words[0]=0,h.length=1):p>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},j.prototype.split=function(a,h){a.iushrn(this.n,0,h)},j.prototype.imulK=function(a){return a.imul(this.k)};function k(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(k,j),k.prototype.split=function(a,h){for(var d=4194303,p=Math.min(a.length,9),w=0;w<p;w++)h.words[w]=a.words[w];if(h.length=p,a.length<=9){a.words[0]=0,a.length=1;return}var b=a.words[9];for(h.words[h.length++]=b&d,w=10;w<a.length;w++){var I=a.words[w]|0;a.words[w-10]=(I&d)<<4|b>>>22,b=I}b>>>=22,a.words[w-10]=b,b===0&&a.length>10?a.length-=10:a.length-=9},k.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,d=0;d<a.length;d++){var p=a.words[d]|0;h+=p*977,a.words[d]=h&67108863,h=p*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function P(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(P,j);function Q(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Q,j);function F(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(F,j),F.prototype.imulK=function(a){for(var h=0,d=0;d<a.length;d++){var p=(a.words[d]|0)*19+h,w=p&67108863;p>>>=26,a.words[d]=w,h=p}return h!==0&&(a.words[a.length++]=h),a},n._prime=function(a){if(C[a])return C[a];var h;if(a==="k256")h=new k;else if(a==="p224")h=new P;else if(a==="p192")h=new Q;else if(a==="p25519")h=new F;else throw new Error("Unknown prime "+a);return C[a]=h,h};function $(M){if(typeof M=="string"){var a=n._prime(M);this.m=a.p,this.prime=a}else i(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}$.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},$.prototype._verify2=function(a,h){i((a.negative|h.negative)===0,"red works only with positives"),i(a.red&&a.red===h.red,"red works only with red numbers")},$.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},$.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},$.prototype.add=function(a,h){this._verify2(a,h);var d=a.add(h);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},$.prototype.iadd=function(a,h){this._verify2(a,h);var d=a.iadd(h);return d.cmp(this.m)>=0&&d.isub(this.m),d},$.prototype.sub=function(a,h){this._verify2(a,h);var d=a.sub(h);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},$.prototype.isub=function(a,h){this._verify2(a,h);var d=a.isub(h);return d.cmpn(0)<0&&d.iadd(this.m),d},$.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},$.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},$.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},$.prototype.isqr=function(a){return this.imul(a,a.clone())},$.prototype.sqr=function(a){return this.mul(a,a)},$.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var d=this.m.add(new n(1)).iushrn(2);return this.pow(a,d)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);i(!p.isZero());var b=new n(1).toRed(this),I=b.redNeg(),y=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new n(2*o*o).toRed(this);this.pow(o,y).cmp(I)!==0;)o.redIAdd(I);for(var v=this.pow(o,p),R=this.pow(a,p.addn(1).iushrn(1)),L=this.pow(a,p),z=w;L.cmp(b)!==0;){for(var q=L,Y=0;q.cmp(b)!==0;Y++)q=q.redSqr();i(Y<z);var T=this.pow(v,new n(1).iushln(z-Y-1));R=R.redMul(T),v=T.redSqr(),L=L.redMul(v),z=Y}return R},$.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},$.prototype.pow=function(a,h){if(h.isZero())return new n(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var d=4,p=new Array(1<<d);p[0]=new n(1).toRed(this),p[1]=a;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],a);var b=p[0],I=0,y=0,o=h.bitLength()%26;for(o===0&&(o=26),w=h.length-1;w>=0;w--){for(var v=h.words[w],R=o-1;R>=0;R--){var L=v>>R&1;if(b!==p[0]&&(b=this.sqr(b)),L===0&&I===0){y=0;continue}I<<=1,I|=L,y++,!(y!==d&&(w!==0||R!==0))&&(b=this.mul(b,p[I]),y=0,I=0)}o=26}return b},$.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},$.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},n.mont=function(a){return new Z(a)};function Z(M){$.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Z,$),Z.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Z.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},Z.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new n(0)._forceRed(this);var d=a.mul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,O9)})(nf)),nf.exports}var Jd,xb;function Ln(){if(xb)return Jd;xb=1,Jd=r;function r(e,t){if(!e)throw new Error(t||"Assertion failed")}return r.equal=function(t,i,s){if(t!=i)throw new Error(s||"Assertion failed: "+t+" != "+i)},Jd}var Xd={},Tb;function LD(){return Tb||(Tb=1,(function(r){var e=r;function t(n,c){if(Array.isArray(n))return n.slice();if(!n)return[];var l=[];if(typeof n!="string"){for(var u=0;u<n.length;u++)l[u]=n[u]|0;return l}if(c==="hex"){n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n);for(var u=0;u<n.length;u+=2)l.push(parseInt(n[u]+n[u+1],16))}else for(var u=0;u<n.length;u++){var f=n.charCodeAt(u),g=f>>8,m=f&255;g?l.push(g,m):l.push(m)}return l}e.toArray=t;function i(n){return n.length===1?"0"+n:n}e.zero2=i;function s(n){for(var c="",l=0;l<n.length;l++)c+=i(n[l].toString(16));return c}e.toHex=s,e.encode=function(c,l){return l==="hex"?s(c):c}})(Xd)),Xd}var jb;function zn(){return jb||(jb=1,(function(r){var e=r,t=Ps(),i=Ln(),s=LD();e.assert=i,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function n(g,m,N){var A=new Array(Math.max(g.bitLength(),N)+1),_;for(_=0;_<A.length;_+=1)A[_]=0;var E=1<<m+1,x=g.clone();for(_=0;_<A.length;_++){var S,D=x.andln(E-1);x.isOdd()?(D>(E>>1)-1?S=(E>>1)-D:S=D,x.isubn(S)):S=0,A[_]=S,x.iushrn(1)}return A}e.getNAF=n;function c(g,m){var N=[[],[]];g=g.clone(),m=m.clone();for(var A=0,_=0,E;g.cmpn(-A)>0||m.cmpn(-_)>0;){var x=g.andln(3)+A&3,S=m.andln(3)+_&3;x===3&&(x=-1),S===3&&(S=-1);var D;(x&1)===0?D=0:(E=g.andln(7)+A&7,(E===3||E===5)&&S===2?D=-x:D=x),N[0].push(D);var C;(S&1)===0?C=0:(E=m.andln(7)+_&7,(E===3||E===5)&&x===2?C=-S:C=S),N[1].push(C),2*A===D+1&&(A=1-A),2*_===C+1&&(_=1-_),g.iushrn(1),m.iushrn(1)}return N}e.getJSF=c;function l(g,m,N){var A="_"+m;g.prototype[m]=function(){return this[A]!==void 0?this[A]:this[A]=N.call(this)}}e.cachedProperty=l;function u(g){return typeof g=="string"?e.toArray(g,"hex"):g}e.parseBytes=u;function f(g){return new t(g,"hex","le")}e.intFromLE=f})(Kd)),Kd}var uu={exports:{}},it={},fu={exports:{}},Cb;function zc(){if(Cb)return fu.exports;Cb=1;var r=65536,e=4294967295;function t(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var i=tt().Buffer,s=globalThis.crypto||globalThis.msCrypto;s&&s.getRandomValues?fu.exports=n:fu.exports=t;function n(c,l){if(c>e)throw new RangeError("requested too many random bytes");var u=i.allocUnsafe(c);if(c>0)if(c>r)for(var f=0;f<c;f+=r)s.getRandomValues(u.slice(f,f+r));else s.getRandomValues(u);return typeof l=="function"?Be.nextTick(function(){l(null,u)}):u}return fu.exports}var du={exports:{}},Ob;function Ge(){return Ob||(Ob=1,typeof Object.create=="function"?du.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:du.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}),du.exports}var e0,Lb;function zD(){return Lb||(Lb=1,e0=fa().EventEmitter),e0}var t0={},r0={},i0,zb;function kD(){return zb||(zb=1,i0=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;e[t]=s;for(var n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,t);if(l.value!==s||l.enumerable!==!0)return!1}return!0}),i0}var n0,kb;function td(){if(kb)return n0;kb=1;var r=kD();return n0=function(){return r()&&!!Symbol.toStringTag},n0}var s0,Pb;function PD(){return Pb||(Pb=1,s0=Object),s0}var a0,Rb;function L9(){return Rb||(Rb=1,a0=Error),a0}var o0,Ub;function z9(){return Ub||(Ub=1,o0=EvalError),o0}var c0,$b;function k9(){return $b||($b=1,c0=RangeError),c0}var h0,Bb;function P9(){return Bb||(Bb=1,h0=ReferenceError),h0}var l0,qb;function RD(){return qb||(qb=1,l0=SyntaxError),l0}var u0,Yb;function kc(){return Yb||(Yb=1,u0=TypeError),u0}var f0,Wb;function R9(){return Wb||(Wb=1,f0=URIError),f0}var d0,Qb;function U9(){return Qb||(Qb=1,d0=Math.abs),d0}var p0,Vb;function $9(){return Vb||(Vb=1,p0=Math.floor),p0}var g0,Fb;function B9(){return Fb||(Fb=1,g0=Math.max),g0}var y0,Hb;function q9(){return Hb||(Hb=1,y0=Math.min),y0}var w0,Zb;function Y9(){return Zb||(Zb=1,w0=Math.pow),w0}var m0,Gb;function W9(){return Gb||(Gb=1,m0=Math.round),m0}var v0,Kb;function Q9(){return Kb||(Kb=1,v0=Number.isNaN||function(e){return e!==e}),v0}var b0,Jb;function V9(){if(Jb)return b0;Jb=1;var r=Q9();return b0=function(t){return r(t)||t===0?t:t<0?-1:1},b0}var M0,Xb;function F9(){return Xb||(Xb=1,M0=Object.getOwnPropertyDescriptor),M0}var N0,eM;function Pc(){if(eM)return N0;eM=1;var r=F9();if(r)try{r([],"length")}catch{r=null}return N0=r,N0}var I0,tM;function rd(){if(tM)return I0;tM=1;var r=Object.defineProperty||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return I0=r,I0}var A0,rM;function H9(){if(rM)return A0;rM=1;var r=typeof Symbol<"u"&&Symbol,e=kD();return A0=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},A0}var _0,iM;function UD(){return iM||(iM=1,_0=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),_0}var E0,nM;function $D(){if(nM)return E0;nM=1;var r=PD();return E0=r.getPrototypeOf||null,E0}var D0,sM;function Z9(){if(sM)return D0;sM=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,i="[object Function]",s=function(u,f){for(var g=[],m=0;m<u.length;m+=1)g[m]=u[m];for(var N=0;N<f.length;N+=1)g[N+u.length]=f[N];return g},n=function(u,f){for(var g=[],m=f,N=0;m<u.length;m+=1,N+=1)g[N]=u[m];return g},c=function(l,u){for(var f="",g=0;g<l.length;g+=1)f+=l[g],g+1<l.length&&(f+=u);return f};return D0=function(u){var f=this;if(typeof f!="function"||e.apply(f)!==i)throw new TypeError(r+f);for(var g=n(arguments,1),m,N=function(){if(this instanceof m){var S=f.apply(this,s(g,arguments));return Object(S)===S?S:this}return f.apply(u,s(g,arguments))},A=t(0,f.length-g.length),_=[],E=0;E<A;E++)_[E]="$"+E;if(m=Function("binder","return function ("+c(_,",")+"){ return binder.apply(this,arguments); }")(N),f.prototype){var x=function(){};x.prototype=f.prototype,m.prototype=new x,x.prototype=null}return m},D0}var S0,aM;function Tl(){if(aM)return S0;aM=1;var r=Z9();return S0=Function.prototype.bind||r,S0}var x0,oM;function hv(){return oM||(oM=1,x0=Function.prototype.call),x0}var T0,cM;function lv(){return cM||(cM=1,T0=Function.prototype.apply),T0}var j0,hM;function G9(){return hM||(hM=1,j0=typeof Reflect<"u"&&Reflect&&Reflect.apply),j0}var C0,lM;function BD(){if(lM)return C0;lM=1;var r=Tl(),e=lv(),t=hv(),i=G9();return C0=i||r.call(t,e),C0}var O0,uM;function uv(){if(uM)return O0;uM=1;var r=Tl(),e=kc(),t=hv(),i=BD();return O0=function(n){if(n.length<1||typeof n[0]!="function")throw new e("a function is required");return i(r,t,n)},O0}var L0,fM;function K9(){if(fM)return L0;fM=1;var r=uv(),e=Pc(),t;try{t=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var i=!!t&&e&&e(Object.prototype,"__proto__"),s=Object,n=s.getPrototypeOf;return L0=i&&typeof i.get=="function"?r([i.get]):typeof n=="function"?function(l){return n(l==null?l:s(l))}:!1,L0}var z0,dM;function fv(){if(dM)return z0;dM=1;var r=UD(),e=$D(),t=K9();return z0=r?function(s){return r(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:t?function(s){return t(s)}:null,z0}var k0,pM;function qD(){if(pM)return k0;pM=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Tl();return k0=t.call(r,e),k0}var P0,gM;function YD(){if(gM)return P0;gM=1;var r,e=PD(),t=L9(),i=z9(),s=k9(),n=P9(),c=RD(),l=kc(),u=R9(),f=U9(),g=$9(),m=B9(),N=q9(),A=Y9(),_=W9(),E=V9(),x=Function,S=function(B){try{return x('"use strict"; return ('+B+").constructor;")()}catch{}},D=Pc(),C=rd(),j=function(){throw new l},k=D?(function(){try{return arguments.callee,j}catch{try{return D(arguments,"callee").get}catch{return j}}})():j,P=H9()(),Q=fv(),F=$D(),$=UD(),Z=lv(),M=hv(),a={},h=typeof Uint8Array>"u"||!Q?r:Q(Uint8Array),d={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?r:ArrayBuffer,"%ArrayIteratorPrototype%":P&&Q?Q([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":a,"%AsyncGenerator%":a,"%AsyncGeneratorFunction%":a,"%AsyncIteratorPrototype%":a,"%Atomics%":typeof Atomics>"u"?r:Atomics,"%BigInt%":typeof BigInt>"u"?r:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?r:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?r:Float16Array,"%Float32Array%":typeof Float32Array>"u"?r:Float32Array,"%Float64Array%":typeof Float64Array>"u"?r:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?r:FinalizationRegistry,"%Function%":x,"%GeneratorFunction%":a,"%Int8Array%":typeof Int8Array>"u"?r:Int8Array,"%Int16Array%":typeof Int16Array>"u"?r:Int16Array,"%Int32Array%":typeof Int32Array>"u"?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":P&&Q?Q(Q([][Symbol.iterator]())):r,"%JSON%":typeof JSON=="object"?JSON:r,"%Map%":typeof Map>"u"?r:Map,"%MapIteratorPrototype%":typeof Map>"u"||!P||!Q?r:Q(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":D,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?r:Promise,"%Proxy%":typeof Proxy>"u"?r:Proxy,"%RangeError%":s,"%ReferenceError%":n,"%Reflect%":typeof Reflect>"u"?r:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?r:Set,"%SetIteratorPrototype%":typeof Set>"u"||!P||!Q?r:Q(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":P&&Q?Q(""[Symbol.iterator]()):r,"%Symbol%":P?Symbol:r,"%SyntaxError%":c,"%ThrowTypeError%":k,"%TypedArray%":h,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?r:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?r:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?r:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?r:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?r:WeakMap,"%WeakRef%":typeof WeakRef>"u"?r:WeakRef,"%WeakSet%":typeof WeakSet>"u"?r:WeakSet,"%Function.prototype.call%":M,"%Function.prototype.apply%":Z,"%Object.defineProperty%":C,"%Object.getPrototypeOf%":F,"%Math.abs%":f,"%Math.floor%":g,"%Math.max%":m,"%Math.min%":N,"%Math.pow%":A,"%Math.round%":_,"%Math.sign%":E,"%Reflect.getPrototypeOf%":$};if(Q)try{null.error}catch(B){var p=Q(Q(B));d["%Error.prototype%"]=p}var w=function B(W){var V;if(W==="%AsyncFunction%")V=S("async function () {}");else if(W==="%GeneratorFunction%")V=S("function* () {}");else if(W==="%AsyncGeneratorFunction%")V=S("async function* () {}");else if(W==="%AsyncGenerator%"){var U=B("%AsyncGeneratorFunction%");U&&(V=U.prototype)}else if(W==="%AsyncIteratorPrototype%"){var H=B("%AsyncGenerator%");H&&Q&&(V=Q(H.prototype))}return d[W]=V,V},b={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},I=Tl(),y=qD(),o=I.call(M,Array.prototype.concat),v=I.call(Z,Array.prototype.splice),R=I.call(M,String.prototype.replace),L=I.call(M,String.prototype.slice),z=I.call(M,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y=/\\(\\)?/g,T=function(W){var V=L(W,0,1),U=L(W,-1);if(V==="%"&&U!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(U==="%"&&V!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var H=[];return R(W,q,function(de,ee,J,Qe){H[H.length]=J?R(Qe,Y,"$1"):ee||de}),H},O=function(W,V){var U=W,H;if(y(b,U)&&(H=b[U],U="%"+H[0]+"%"),y(d,U)){var de=d[U];if(de===a&&(de=w(U)),typeof de>"u"&&!V)throw new l("intrinsic "+W+" exists, but is not available. Please file an issue!");return{alias:H,name:U,value:de}}throw new c("intrinsic "+W+" does not exist!")};return P0=function(W,V){if(typeof W!="string"||W.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof V!="boolean")throw new l('"allowMissing" argument must be a boolean');if(z(/^%?[^%]*%?$/,W)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var U=T(W),H=U.length>0?U[0]:"",de=O("%"+H+"%",V),ee=de.name,J=de.value,Qe=!1,oe=de.alias;oe&&(H=oe[0],v(U,o([0,1],oe)));for(var K=1,et=!0;K<U.length;K+=1){var re=U[K],ae=L(re,0,1),Ke=L(re,-1);if((ae==='"'||ae==="'"||ae==="`"||Ke==='"'||Ke==="'"||Ke==="`")&&ae!==Ke)throw new c("property names with quotes must have matching quotes");if((re==="constructor"||!et)&&(Qe=!0),H+="."+re,ee="%"+H+"%",y(d,ee))J=d[ee];else if(J!=null){if(!(re in J)){if(!V)throw new l("base intrinsic for "+W+" exists, but the property is not available.");return}if(D&&K+1>=U.length){var se=D(J,re);et=!!se,et&&"get"in se&&!("originalValue"in se.get)?J=se.get:J=J[re]}else et=y(J,re),J=J[re];et&&!Qe&&(d[ee]=J)}}return J},P0}var R0,yM;function Rc(){if(yM)return R0;yM=1;var r=YD(),e=uv(),t=e([r("%String.prototype.indexOf%")]);return R0=function(s,n){var c=r(s,!!n);return typeof c=="function"&&t(s,".prototype.")>-1?e([c]):c},R0}var U0,wM;function J9(){if(wM)return U0;wM=1;var r=td()(),e=Rc(),t=e("Object.prototype.toString"),i=function(l){return r&&l&&typeof l=="object"&&Symbol.toStringTag in l?!1:t(l)==="[object Arguments]"},s=function(l){return i(l)?!0:l!==null&&typeof l=="object"&&"length"in l&&typeof l.length=="number"&&l.length>=0&&t(l)!=="[object Array]"&&"callee"in l&&t(l.callee)==="[object Function]"},n=(function(){return i(arguments)})();return i.isLegacyArguments=s,U0=n?i:s,U0}var $0,mM;function X9(){if(mM)return $0;mM=1;var r=Rc(),e=td()(),t=qD(),i=Pc(),s;if(e){var n=r("RegExp.prototype.exec"),c={},l=function(){throw c},u={toString:l,valueOf:l};typeof Symbol.toPrimitive=="symbol"&&(u[Symbol.toPrimitive]=l),s=function(N){if(!N||typeof N!="object")return!1;var A=i(N,"lastIndex"),_=A&&t(A,"value");if(!_)return!1;try{n(N,u)}catch(E){return E===c}}}else{var f=r("Object.prototype.toString"),g="[object RegExp]";s=function(N){return!N||typeof N!="object"&&typeof N!="function"?!1:f(N)===g}}return $0=s,$0}var B0,vM;function eP(){if(vM)return B0;vM=1;var r=Rc(),e=X9(),t=r("RegExp.prototype.exec"),i=kc();return B0=function(n){if(!e(n))throw new i("`regex` must be a RegExp");return function(l){return t(n,l)!==null}},B0}var q0,bM;function tP(){if(bM)return q0;bM=1;const r=(function*(){}).constructor;return q0=()=>r,q0}var Y0,MM;function rP(){if(MM)return Y0;MM=1;var r=Rc(),e=eP(),t=e(/^\s*(?:function)?\*/),i=td()(),s=fv(),n=r("Object.prototype.toString"),c=r("Function.prototype.toString"),l=tP();return Y0=function(f){if(typeof f!="function")return!1;if(t(c(f)))return!0;if(!i){var g=n(f);return g==="[object GeneratorFunction]"}if(!s)return!1;var m=l();return m&&s(f)===m.prototype},Y0}var W0,NM;function iP(){if(NM)return W0;NM=1;var r=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,t,i;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{t=Object.defineProperty({},"length",{get:function(){throw i}}),i={},e(function(){throw 42},null,t)}catch(D){D!==i&&(e=null)}else e=null;var s=/^\s*class\b/,n=function(C){try{var j=r.call(C);return s.test(j)}catch{return!1}},c=function(C){try{return n(C)?!1:(r.call(C),!0)}catch{return!1}},l=Object.prototype.toString,u="[object Object]",f="[object Function]",g="[object GeneratorFunction]",m="[object HTMLAllCollection]",N="[object HTML document.all class]",A="[object HTMLCollection]",_=typeof Symbol=="function"&&!!Symbol.toStringTag,E=!(0 in[,]),x=function(){return!1};if(typeof document=="object"){var S=document.all;l.call(S)===l.call(document.all)&&(x=function(C){if((E||!C)&&(typeof C>"u"||typeof C=="object"))try{var j=l.call(C);return(j===m||j===N||j===A||j===u)&&C("")==null}catch{}return!1})}return W0=e?function(C){if(x(C))return!0;if(!C||typeof C!="function"&&typeof C!="object")return!1;try{e(C,null,t)}catch(j){if(j!==i)return!1}return!n(C)&&c(C)}:function(C){if(x(C))return!0;if(!C||typeof C!="function"&&typeof C!="object")return!1;if(_)return c(C);if(n(C))return!1;var j=l.call(C);return j!==f&&j!==g&&!/^\[object HTML/.test(j)?!1:c(C)},W0}var Q0,IM;function nP(){if(IM)return Q0;IM=1;var r=iP(),e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,i=function(u,f,g){for(var m=0,N=u.length;m<N;m++)t.call(u,m)&&(g==null?f(u[m],m,u):f.call(g,u[m],m,u))},s=function(u,f,g){for(var m=0,N=u.length;m<N;m++)g==null?f(u.charAt(m),m,u):f.call(g,u.charAt(m),m,u)},n=function(u,f,g){for(var m in u)t.call(u,m)&&(g==null?f(u[m],m,u):f.call(g,u[m],m,u))};function c(l){return e.call(l)==="[object Array]"}return Q0=function(u,f,g){if(!r(f))throw new TypeError("iterator must be a function");var m;arguments.length>=3&&(m=g),c(u)?i(u,f,m):typeof u=="string"?s(u,f,m):n(u,f,m)},Q0}var V0,AM;function sP(){return AM||(AM=1,V0=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),V0}var F0,_M;function aP(){if(_M)return F0;_M=1;var r=sP(),e=globalThis;return F0=function(){for(var i=[],s=0;s<r.length;s++)typeof e[r[s]]=="function"&&(i[i.length]=r[s]);return i},F0}var H0={exports:{}},Z0,EM;function oP(){if(EM)return Z0;EM=1;var r=rd(),e=RD(),t=kc(),i=Pc();return Z0=function(n,c,l){if(!n||typeof n!="object"&&typeof n!="function")throw new t("`obj` must be an object or a function`");if(typeof c!="string"&&typeof c!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,g=arguments.length>5?arguments[5]:null,m=arguments.length>6?arguments[6]:!1,N=!!i&&i(n,c);if(r)r(n,c,{configurable:g===null&&N?N.configurable:!g,enumerable:u===null&&N?N.enumerable:!u,value:l,writable:f===null&&N?N.writable:!f});else if(m||!u&&!f&&!g)n[c]=l;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Z0}var G0,DM;function cP(){if(DM)return G0;DM=1;var r=rd(),e=function(){return!!r};return e.hasArrayLengthDefineBug=function(){if(!r)return null;try{return r([],"length",{value:1}).length!==1}catch{return!0}},G0=e,G0}var K0,SM;function hP(){if(SM)return K0;SM=1;var r=YD(),e=oP(),t=cP()(),i=Pc(),s=kc(),n=r("%Math.floor%");return K0=function(l,u){if(typeof l!="function")throw new s("`fn` is not a function");if(typeof u!="number"||u<0||u>4294967295||n(u)!==u)throw new s("`length` must be a positive 32-bit integer");var f=arguments.length>2&&!!arguments[2],g=!0,m=!0;if("length"in l&&i){var N=i(l,"length");N&&!N.configurable&&(g=!1),N&&!N.writable&&(m=!1)}return(g||m||!f)&&(t?e(l,"length",u,!0,!0):e(l,"length",u)),l},K0}var J0,xM;function lP(){if(xM)return J0;xM=1;var r=Tl(),e=lv(),t=BD();return J0=function(){return t(r,e,arguments)},J0}var TM;function uP(){return TM||(TM=1,(function(r){var e=hP(),t=rd(),i=uv(),s=lP();r.exports=function(c){var l=i(arguments),u=c.length-(arguments.length-1);return e(l,1+(u>0?u:0),!0)},t?t(r.exports,"apply",{value:s}):r.exports.apply=s})(H0)),H0.exports}var X0,jM;function WD(){if(jM)return X0;jM=1;var r=nP(),e=aP(),t=uP(),i=Rc(),s=Pc(),n=fv(),c=i("Object.prototype.toString"),l=td()(),u=globalThis,f=e(),g=i("String.prototype.slice"),m=i("Array.prototype.indexOf",!0)||function(x,S){for(var D=0;D<x.length;D+=1)if(x[D]===S)return D;return-1},N={__proto__:null};l&&s&&n?r(f,function(E){var x=new u[E];if(Symbol.toStringTag in x&&n){var S=n(x),D=s(S,Symbol.toStringTag);if(!D&&S){var C=n(S);D=s(C,Symbol.toStringTag)}if(D&&D.get){var j=t(D.get);N["$"+E]=j}}}):r(f,function(E){var x=new u[E],S=x.slice||x.set;if(S){var D=t(S);N["$"+E]=D}});var A=function(x){var S=!1;return r(N,function(D,C){if(!S)try{"$"+D(x)===C&&(S=g(C,1))}catch{}}),S},_=function(x){var S=!1;return r(N,function(D,C){if(!S)try{D(x),S=g(C,1)}catch{}}),S};return X0=function(x){if(!x||typeof x!="object")return!1;if(!l){var S=g(c(x),8,-1);return m(f,S)>-1?S:S!=="Object"?!1:_(x)}return s?A(x):null},X0}var ep,CM;function QD(){if(CM)return ep;CM=1;var r=WD();return ep=function(t){return!!r(t)},ep}var OM;function fP(){return OM||(OM=1,(function(r){var e=J9(),t=rP(),i=WD(),s=QD();function n(K){return K.call.bind(K)}var c=typeof BigInt<"u",l=typeof Symbol<"u",u=n(Object.prototype.toString),f=n(Number.prototype.valueOf),g=n(String.prototype.valueOf),m=n(Boolean.prototype.valueOf);if(c)var N=n(BigInt.prototype.valueOf);if(l)var A=n(Symbol.prototype.valueOf);function _(K,et){if(typeof K!="object")return!1;try{return et(K),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=s;function E(K){return typeof Promise<"u"&&K instanceof Promise||K!==null&&typeof K=="object"&&typeof K.then=="function"&&typeof K.catch=="function"}r.isPromise=E;function x(K){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(K):s(K)||L(K)}r.isArrayBufferView=x;function S(K){return i(K)==="Uint8Array"}r.isUint8Array=S;function D(K){return i(K)==="Uint8ClampedArray"}r.isUint8ClampedArray=D;function C(K){return i(K)==="Uint16Array"}r.isUint16Array=C;function j(K){return i(K)==="Uint32Array"}r.isUint32Array=j;function k(K){return i(K)==="Int8Array"}r.isInt8Array=k;function P(K){return i(K)==="Int16Array"}r.isInt16Array=P;function Q(K){return i(K)==="Int32Array"}r.isInt32Array=Q;function F(K){return i(K)==="Float32Array"}r.isFloat32Array=F;function $(K){return i(K)==="Float64Array"}r.isFloat64Array=$;function Z(K){return i(K)==="BigInt64Array"}r.isBigInt64Array=Z;function M(K){return i(K)==="BigUint64Array"}r.isBigUint64Array=M;function a(K){return u(K)==="[object Map]"}a.working=typeof Map<"u"&&a(new Map);function h(K){return typeof Map>"u"?!1:a.working?a(K):K instanceof Map}r.isMap=h;function d(K){return u(K)==="[object Set]"}d.working=typeof Set<"u"&&d(new Set);function p(K){return typeof Set>"u"?!1:d.working?d(K):K instanceof Set}r.isSet=p;function w(K){return u(K)==="[object WeakMap]"}w.working=typeof WeakMap<"u"&&w(new WeakMap);function b(K){return typeof WeakMap>"u"?!1:w.working?w(K):K instanceof WeakMap}r.isWeakMap=b;function I(K){return u(K)==="[object WeakSet]"}I.working=typeof WeakSet<"u"&&I(new WeakSet);function y(K){return I(K)}r.isWeakSet=y;function o(K){return u(K)==="[object ArrayBuffer]"}o.working=typeof ArrayBuffer<"u"&&o(new ArrayBuffer);function v(K){return typeof ArrayBuffer>"u"?!1:o.working?o(K):K instanceof ArrayBuffer}r.isArrayBuffer=v;function R(K){return u(K)==="[object DataView]"}R.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&R(new DataView(new ArrayBuffer(1),0,1));function L(K){return typeof DataView>"u"?!1:R.working?R(K):K instanceof DataView}r.isDataView=L;var z=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function q(K){return u(K)==="[object SharedArrayBuffer]"}function Y(K){return typeof z>"u"?!1:(typeof q.working>"u"&&(q.working=q(new z)),q.working?q(K):K instanceof z)}r.isSharedArrayBuffer=Y;function T(K){return u(K)==="[object AsyncFunction]"}r.isAsyncFunction=T;function O(K){return u(K)==="[object Map Iterator]"}r.isMapIterator=O;function B(K){return u(K)==="[object Set Iterator]"}r.isSetIterator=B;function W(K){return u(K)==="[object Generator]"}r.isGeneratorObject=W;function V(K){return u(K)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=V;function U(K){return _(K,f)}r.isNumberObject=U;function H(K){return _(K,g)}r.isStringObject=H;function de(K){return _(K,m)}r.isBooleanObject=de;function ee(K){return c&&_(K,N)}r.isBigIntObject=ee;function J(K){return l&&_(K,A)}r.isSymbolObject=J;function Qe(K){return U(K)||H(K)||de(K)||ee(K)||J(K)}r.isBoxedPrimitive=Qe;function oe(K){return typeof Uint8Array<"u"&&(v(K)||Y(K))}r.isAnyArrayBuffer=oe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(K){Object.defineProperty(r,K,{enumerable:!1,value:function(){throw new Error(K+" is not supported in userland")}})})})(r0)),r0}var tp,LM;function dP(){return LM||(LM=1,tp=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),tp}var zM;function Uc(){return zM||(zM=1,(function(r){var e={},t=Object.getOwnPropertyDescriptors||function(z){for(var q=Object.keys(z),Y={},T=0;T<q.length;T++)Y[q[T]]=Object.getOwnPropertyDescriptor(z,q[T]);return Y},i=/%[sdj%]/g;r.format=function(L){if(!P(L)){for(var z=[],q=0;q<arguments.length;q++)z.push(l(arguments[q]));return z.join(" ")}for(var q=1,Y=arguments,T=Y.length,O=String(L).replace(i,function(W){if(W==="%%")return"%";if(q>=T)return W;switch(W){case"%s":return String(Y[q++]);case"%d":return Number(Y[q++]);case"%j":try{return JSON.stringify(Y[q++])}catch{return"[Circular]"}default:return W}}),B=Y[q];q<T;B=Y[++q])C(B)||!Z(B)?O+=" "+B:O+=" "+l(B);return O},r.deprecate=function(L,z){if(typeof Be<"u"&&Be.noDeprecation===!0)return L;if(typeof Be>"u")return function(){return r.deprecate(L,z).apply(this,arguments)};var q=!1;function Y(){if(!q){if(Be.throwDeprecation)throw new Error(z);Be.traceDeprecation?console.trace(z):console.error(z),q=!0}return L.apply(this,arguments)}return Y};var s={},n=/^$/;if(e.NODE_DEBUG){var c=e.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),n=new RegExp("^"+c+"$","i")}r.debuglog=function(L){if(L=L.toUpperCase(),!s[L])if(n.test(L)){var z=Be.pid;s[L]=function(){var q=r.format.apply(r,arguments);console.error("%s %d: %s",L,z,q)}}else s[L]=function(){};return s[L]};function l(L,z){var q={seen:[],stylize:f};return arguments.length>=3&&(q.depth=arguments[2]),arguments.length>=4&&(q.colors=arguments[3]),D(z)?q.showHidden=z:z&&r._extend(q,z),F(q.showHidden)&&(q.showHidden=!1),F(q.depth)&&(q.depth=2),F(q.colors)&&(q.colors=!1),F(q.customInspect)&&(q.customInspect=!0),q.colors&&(q.stylize=u),m(q,L,q.depth)}r.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function u(L,z){var q=l.styles[z];return q?"\x1B["+l.colors[q][0]+"m"+L+"\x1B["+l.colors[q][1]+"m":L}function f(L,z){return L}function g(L){var z={};return L.forEach(function(q,Y){z[q]=!0}),z}function m(L,z,q){if(L.customInspect&&z&&h(z.inspect)&&z.inspect!==r.inspect&&!(z.constructor&&z.constructor.prototype===z)){var Y=z.inspect(q,L);return P(Y)||(Y=m(L,Y,q)),Y}var T=N(L,z);if(T)return T;var O=Object.keys(z),B=g(O);if(L.showHidden&&(O=Object.getOwnPropertyNames(z)),a(z)&&(O.indexOf("message")>=0||O.indexOf("description")>=0))return A(z);if(O.length===0){if(h(z)){var W=z.name?": "+z.name:"";return L.stylize("[Function"+W+"]","special")}if($(z))return L.stylize(RegExp.prototype.toString.call(z),"regexp");if(M(z))return L.stylize(Date.prototype.toString.call(z),"date");if(a(z))return A(z)}var V="",U=!1,H=["{","}"];if(S(z)&&(U=!0,H=["[","]"]),h(z)){var de=z.name?": "+z.name:"";V=" [Function"+de+"]"}if($(z)&&(V=" "+RegExp.prototype.toString.call(z)),M(z)&&(V=" "+Date.prototype.toUTCString.call(z)),a(z)&&(V=" "+A(z)),O.length===0&&(!U||z.length==0))return H[0]+V+H[1];if(q<0)return $(z)?L.stylize(RegExp.prototype.toString.call(z),"regexp"):L.stylize("[Object]","special");L.seen.push(z);var ee;return U?ee=_(L,z,q,B,O):ee=O.map(function(J){return E(L,z,q,B,J,U)}),L.seen.pop(),x(ee,V,H)}function N(L,z){if(F(z))return L.stylize("undefined","undefined");if(P(z)){var q="'"+JSON.stringify(z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return L.stylize(q,"string")}if(k(z))return L.stylize(""+z,"number");if(D(z))return L.stylize(""+z,"boolean");if(C(z))return L.stylize("null","null")}function A(L){return"["+Error.prototype.toString.call(L)+"]"}function _(L,z,q,Y,T){for(var O=[],B=0,W=z.length;B<W;++B)y(z,String(B))?O.push(E(L,z,q,Y,String(B),!0)):O.push("");return T.forEach(function(V){V.match(/^\d+$/)||O.push(E(L,z,q,Y,V,!0))}),O}function E(L,z,q,Y,T,O){var B,W,V;if(V=Object.getOwnPropertyDescriptor(z,T)||{value:z[T]},V.get?V.set?W=L.stylize("[Getter/Setter]","special"):W=L.stylize("[Getter]","special"):V.set&&(W=L.stylize("[Setter]","special")),y(Y,T)||(B="["+T+"]"),W||(L.seen.indexOf(V.value)<0?(C(q)?W=m(L,V.value,null):W=m(L,V.value,q-1),W.indexOf(`
`)>-1&&(O?W=W.split(`
`).map(function(U){return"  "+U}).join(`
`).slice(2):W=`
`+W.split(`
`).map(function(U){return"   "+U}).join(`
`))):W=L.stylize("[Circular]","special")),F(B)){if(O&&T.match(/^\d+$/))return W;B=JSON.stringify(""+T),B.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(B=B.slice(1,-1),B=L.stylize(B,"name")):(B=B.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),B=L.stylize(B,"string"))}return B+": "+W}function x(L,z,q){var Y=L.reduce(function(T,O){return O.indexOf(`
`)>=0,T+O.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Y>60?q[0]+(z===""?"":z+`
 `)+" "+L.join(`,
  `)+" "+q[1]:q[0]+z+" "+L.join(", ")+" "+q[1]}r.types=fP();function S(L){return Array.isArray(L)}r.isArray=S;function D(L){return typeof L=="boolean"}r.isBoolean=D;function C(L){return L===null}r.isNull=C;function j(L){return L==null}r.isNullOrUndefined=j;function k(L){return typeof L=="number"}r.isNumber=k;function P(L){return typeof L=="string"}r.isString=P;function Q(L){return typeof L=="symbol"}r.isSymbol=Q;function F(L){return L===void 0}r.isUndefined=F;function $(L){return Z(L)&&p(L)==="[object RegExp]"}r.isRegExp=$,r.types.isRegExp=$;function Z(L){return typeof L=="object"&&L!==null}r.isObject=Z;function M(L){return Z(L)&&p(L)==="[object Date]"}r.isDate=M,r.types.isDate=M;function a(L){return Z(L)&&(p(L)==="[object Error]"||L instanceof Error)}r.isError=a,r.types.isNativeError=a;function h(L){return typeof L=="function"}r.isFunction=h;function d(L){return L===null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||typeof L=="symbol"||typeof L>"u"}r.isPrimitive=d,r.isBuffer=dP();function p(L){return Object.prototype.toString.call(L)}function w(L){return L<10?"0"+L.toString(10):L.toString(10)}var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var L=new Date,z=[w(L.getHours()),w(L.getMinutes()),w(L.getSeconds())].join(":");return[L.getDate(),b[L.getMonth()],z].join(" ")}r.log=function(){console.log("%s - %s",I(),r.format.apply(r,arguments))},r.inherits=Ge(),r._extend=function(L,z){if(!z||!Z(z))return L;for(var q=Object.keys(z),Y=q.length;Y--;)L[q[Y]]=z[q[Y]];return L};function y(L,z){return Object.prototype.hasOwnProperty.call(L,z)}var o=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');if(o&&z[o]){var q=z[o];if(typeof q!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(q,o,{value:q,enumerable:!1,writable:!1,configurable:!0}),q}function q(){for(var Y,T,O=new Promise(function(V,U){Y=V,T=U}),B=[],W=0;W<arguments.length;W++)B.push(arguments[W]);B.push(function(V,U){V?T(V):Y(U)});try{z.apply(this,B)}catch(V){T(V)}return O}return Object.setPrototypeOf(q,Object.getPrototypeOf(z)),o&&Object.defineProperty(q,o,{value:q,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(q,t(z))},r.promisify.custom=o;function v(L,z){if(!L){var q=new Error("Promise was rejected with a falsy value");q.reason=L,L=q}return z(L)}function R(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');function z(){for(var q=[],Y=0;Y<arguments.length;Y++)q.push(arguments[Y]);var T=q.pop();if(typeof T!="function")throw new TypeError("The last argument must be of type Function");var O=this,B=function(){return T.apply(O,arguments)};L.apply(this,q).then(function(W){Be.nextTick(B.bind(null,null,W))},function(W){Be.nextTick(v.bind(null,W,B))})}return Object.setPrototypeOf(z,Object.getPrototypeOf(L)),Object.defineProperties(z,t(L)),z}r.callbackify=R})(t0)),t0}var rp,kM;function pP(){if(kM)return rp;kM=1;function r(_,E){var x=Object.keys(_);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(_);E&&(S=S.filter(function(D){return Object.getOwnPropertyDescriptor(_,D).enumerable})),x.push.apply(x,S)}return x}function e(_){for(var E=1;E<arguments.length;E++){var x=arguments[E]!=null?arguments[E]:{};E%2?r(Object(x),!0).forEach(function(S){t(_,S,x[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(x)):r(Object(x)).forEach(function(S){Object.defineProperty(_,S,Object.getOwnPropertyDescriptor(x,S))})}return _}function t(_,E,x){return E=c(E),E in _?Object.defineProperty(_,E,{value:x,enumerable:!0,configurable:!0,writable:!0}):_[E]=x,_}function i(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function s(_,E){for(var x=0;x<E.length;x++){var S=E[x];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,c(S.key),S)}}function n(_,E,x){return E&&s(_.prototype,E),Object.defineProperty(_,"prototype",{writable:!1}),_}function c(_){var E=l(_,"string");return typeof E=="symbol"?E:String(E)}function l(_,E){if(typeof _!="object"||_===null)return _;var x=_[Symbol.toPrimitive];if(x!==void 0){var S=x.call(_,E);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}var u=ki(),f=u.Buffer,g=Uc(),m=g.inspect,N=m&&m.custom||"inspect";function A(_,E,x){f.prototype.copy.call(_,E,x)}return rp=(function(){function _(){i(this,_),this.head=null,this.tail=null,this.length=0}return n(_,[{key:"push",value:function(x){var S={data:x,next:null};this.length>0?this.tail.next=S:this.head=S,this.tail=S,++this.length}},{key:"unshift",value:function(x){var S={data:x,next:this.head};this.length===0&&(this.tail=S),this.head=S,++this.length}},{key:"shift",value:function(){if(this.length!==0){var x=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,x}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(x){if(this.length===0)return"";for(var S=this.head,D=""+S.data;S=S.next;)D+=x+S.data;return D}},{key:"concat",value:function(x){if(this.length===0)return f.alloc(0);for(var S=f.allocUnsafe(x>>>0),D=this.head,C=0;D;)A(D.data,S,C),C+=D.data.length,D=D.next;return S}},{key:"consume",value:function(x,S){var D;return x<this.head.data.length?(D=this.head.data.slice(0,x),this.head.data=this.head.data.slice(x)):x===this.head.data.length?D=this.shift():D=S?this._getString(x):this._getBuffer(x),D}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(x){var S=this.head,D=1,C=S.data;for(x-=C.length;S=S.next;){var j=S.data,k=x>j.length?j.length:x;if(k===j.length?C+=j:C+=j.slice(0,x),x-=k,x===0){k===j.length?(++D,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=j.slice(k));break}++D}return this.length-=D,C}},{key:"_getBuffer",value:function(x){var S=f.allocUnsafe(x),D=this.head,C=1;for(D.data.copy(S),x-=D.data.length;D=D.next;){var j=D.data,k=x>j.length?j.length:x;if(j.copy(S,S.length-x,0,k),x-=k,x===0){k===j.length?(++C,D.next?this.head=D.next:this.head=this.tail=null):(this.head=D,D.data=j.slice(k));break}++C}return this.length-=C,S}},{key:N,value:function(x,S){return m(this,e(e({},S),{},{depth:0,customInspect:!1}))}}]),_})(),rp}var ip,PM;function VD(){if(PM)return ip;PM=1;function r(c,l){var u=this,f=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;return f||g?(l?l(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Be.nextTick(s,this,c)):Be.nextTick(s,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,function(m){!l&&m?u._writableState?u._writableState.errorEmitted?Be.nextTick(t,u):(u._writableState.errorEmitted=!0,Be.nextTick(e,u,m)):Be.nextTick(e,u,m):l?(Be.nextTick(t,u),l(m)):Be.nextTick(t,u)}),this)}function e(c,l){s(c,l),t(c)}function t(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(c,l){c.emit("error",l)}function n(c,l){var u=c._readableState,f=c._writableState;u&&u.autoDestroy||f&&f.autoDestroy?c.destroy(l):c.emit("error",l)}return ip={destroy:r,undestroy:i,errorOrDestroy:n},ip}var np={},RM;function $c(){if(RM)return np;RM=1;function r(l,u){l.prototype=Object.create(u.prototype),l.prototype.constructor=l,l.__proto__=u}var e={};function t(l,u,f){f||(f=Error);function g(N,A,_){return typeof u=="string"?u:u(N,A,_)}var m=(function(N){r(A,N);function A(_,E,x){return N.call(this,g(_,E,x))||this}return A})(f);m.prototype.name=f.name,m.prototype.code=l,e[l]=m}function i(l,u){if(Array.isArray(l)){var f=l.length;return l=l.map(function(g){return String(g)}),f>2?"one of ".concat(u," ").concat(l.slice(0,f-1).join(", "),", or ")+l[f-1]:f===2?"one of ".concat(u," ").concat(l[0]," or ").concat(l[1]):"of ".concat(u," ").concat(l[0])}else return"of ".concat(u," ").concat(String(l))}function s(l,u,f){return l.substr(0,u.length)===u}function n(l,u,f){return(f===void 0||f>l.length)&&(f=l.length),l.substring(f-u.length,f)===u}function c(l,u,f){return typeof f!="number"&&(f=0),f+u.length>l.length?!1:l.indexOf(u,f)!==-1}return t("ERR_INVALID_OPT_VALUE",function(l,u){return'The value "'+u+'" is invalid for option "'+l+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(l,u,f){var g;typeof u=="string"&&s(u,"not ")?(g="must not be",u=u.replace(/^not /,"")):g="must be";var m;if(n(l," argument"))m="The ".concat(l," ").concat(g," ").concat(i(u,"type"));else{var N=c(l,".")?"property":"argument";m='The "'.concat(l,'" ').concat(N," ").concat(g," ").concat(i(u,"type"))}return m+=". Received type ".concat(typeof f),m},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),np.codes=e,np}var sp,UM;function FD(){if(UM)return sp;UM=1;var r=$c().codes.ERR_INVALID_OPT_VALUE;function e(i,s,n){return i.highWaterMark!=null?i.highWaterMark:s?i[n]:null}function t(i,s,n,c){var l=e(s,c,n);if(l!=null){if(!(isFinite(l)&&Math.floor(l)===l)||l<0){var u=c?n:"highWaterMark";throw new r(u,l)}return Math.floor(l)}return i.objectMode?16:16*1024}return sp={getHighWaterMark:t},sp}var ap,$M;function dv(){if($M)return ap;$M=1,ap=r;function r(t,i){if(e("noDeprecation"))return t;var s=!1;function n(){if(!s){if(e("throwDeprecation"))throw new Error(i);e("traceDeprecation")?console.trace(i):console.warn(i),s=!0}return t.apply(this,arguments)}return n}function e(t){try{if(!globalThis.localStorage)return!1}catch{return!1}var i=globalThis.localStorage[t];return i==null?!1:String(i).toLowerCase()==="true"}return ap}var op,BM;function HD(){if(BM)return op;BM=1,op=F;function r(Y){var T=this;this.next=null,this.entry=null,this.finish=function(){q(T,Y)}}var e;F.WritableState=P;var t={deprecate:dv()},i=zD(),s=ki().Buffer,n=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(Y){return s.from(Y)}function l(Y){return s.isBuffer(Y)||Y instanceof n}var u=VD(),f=FD(),g=f.getHighWaterMark,m=$c().codes,N=m.ERR_INVALID_ARG_TYPE,A=m.ERR_METHOD_NOT_IMPLEMENTED,_=m.ERR_MULTIPLE_CALLBACK,E=m.ERR_STREAM_CANNOT_PIPE,x=m.ERR_STREAM_DESTROYED,S=m.ERR_STREAM_NULL_VALUES,D=m.ERR_STREAM_WRITE_AFTER_END,C=m.ERR_UNKNOWN_ENCODING,j=u.errorOrDestroy;Ge()(F,i);function k(){}function P(Y,T,O){e=e||yc(),Y=Y||{},typeof O!="boolean"&&(O=T instanceof e),this.objectMode=!!Y.objectMode,O&&(this.objectMode=this.objectMode||!!Y.writableObjectMode),this.highWaterMark=g(this,Y,"writableHighWaterMark",O),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var B=Y.decodeStrings===!1;this.decodeStrings=!B,this.defaultEncoding=Y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){w(T,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Y.emitClose!==!1,this.autoDestroy=!!Y.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}P.prototype.getBuffer=function(){for(var T=this.bufferedRequest,O=[];T;)O.push(T),T=T.next;return O},(function(){try{Object.defineProperty(P.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Q;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Q=Function.prototype[Symbol.hasInstance],Object.defineProperty(F,Symbol.hasInstance,{value:function(T){return Q.call(this,T)?!0:this!==F?!1:T&&T._writableState instanceof P}})):Q=function(T){return T instanceof this};function F(Y){e=e||yc();var T=this instanceof e;if(!T&&!Q.call(F,this))return new F(Y);this._writableState=new P(Y,this,T),this.writable=!0,Y&&(typeof Y.write=="function"&&(this._write=Y.write),typeof Y.writev=="function"&&(this._writev=Y.writev),typeof Y.destroy=="function"&&(this._destroy=Y.destroy),typeof Y.final=="function"&&(this._final=Y.final)),i.call(this)}F.prototype.pipe=function(){j(this,new E)};function $(Y,T){var O=new D;j(Y,O),Be.nextTick(T,O)}function Z(Y,T,O,B){var W;return O===null?W=new S:typeof O!="string"&&!T.objectMode&&(W=new N("chunk",["string","Buffer"],O)),W?(j(Y,W),Be.nextTick(B,W),!1):!0}F.prototype.write=function(Y,T,O){var B=this._writableState,W=!1,V=!B.objectMode&&l(Y);return V&&!s.isBuffer(Y)&&(Y=c(Y)),typeof T=="function"&&(O=T,T=null),V?T="buffer":T||(T=B.defaultEncoding),typeof O!="function"&&(O=k),B.ending?$(this,O):(V||Z(this,B,Y,O))&&(B.pendingcb++,W=a(this,B,V,Y,T,O)),W},F.prototype.cork=function(){this._writableState.corked++},F.prototype.uncork=function(){var Y=this._writableState;Y.corked&&(Y.corked--,!Y.writing&&!Y.corked&&!Y.bufferProcessing&&Y.bufferedRequest&&y(this,Y))},F.prototype.setDefaultEncoding=function(T){if(typeof T=="string"&&(T=T.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((T+"").toLowerCase())>-1))throw new C(T);return this._writableState.defaultEncoding=T,this},Object.defineProperty(F.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function M(Y,T,O){return!Y.objectMode&&Y.decodeStrings!==!1&&typeof T=="string"&&(T=s.from(T,O)),T}Object.defineProperty(F.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function a(Y,T,O,B,W,V){if(!O){var U=M(T,B,W);B!==U&&(O=!0,W="buffer",B=U)}var H=T.objectMode?1:B.length;T.length+=H;var de=T.length<T.highWaterMark;if(de||(T.needDrain=!0),T.writing||T.corked){var ee=T.lastBufferedRequest;T.lastBufferedRequest={chunk:B,encoding:W,isBuf:O,callback:V,next:null},ee?ee.next=T.lastBufferedRequest:T.bufferedRequest=T.lastBufferedRequest,T.bufferedRequestCount+=1}else h(Y,T,!1,H,B,W,V);return de}function h(Y,T,O,B,W,V,U){T.writelen=B,T.writecb=U,T.writing=!0,T.sync=!0,T.destroyed?T.onwrite(new x("write")):O?Y._writev(W,T.onwrite):Y._write(W,V,T.onwrite),T.sync=!1}function d(Y,T,O,B,W){--T.pendingcb,O?(Be.nextTick(W,B),Be.nextTick(L,Y,T),Y._writableState.errorEmitted=!0,j(Y,B)):(W(B),Y._writableState.errorEmitted=!0,j(Y,B),L(Y,T))}function p(Y){Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0}function w(Y,T){var O=Y._writableState,B=O.sync,W=O.writecb;if(typeof W!="function")throw new _;if(p(O),T)d(Y,O,B,T,W);else{var V=o(O)||Y.destroyed;!V&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&y(Y,O),B?Be.nextTick(b,Y,O,V,W):b(Y,O,V,W)}}function b(Y,T,O,B){O||I(Y,T),T.pendingcb--,B(),L(Y,T)}function I(Y,T){T.length===0&&T.needDrain&&(T.needDrain=!1,Y.emit("drain"))}function y(Y,T){T.bufferProcessing=!0;var O=T.bufferedRequest;if(Y._writev&&O&&O.next){var B=T.bufferedRequestCount,W=new Array(B),V=T.corkedRequestsFree;V.entry=O;for(var U=0,H=!0;O;)W[U]=O,O.isBuf||(H=!1),O=O.next,U+=1;W.allBuffers=H,h(Y,T,!0,T.length,W,"",V.finish),T.pendingcb++,T.lastBufferedRequest=null,V.next?(T.corkedRequestsFree=V.next,V.next=null):T.corkedRequestsFree=new r(T),T.bufferedRequestCount=0}else{for(;O;){var de=O.chunk,ee=O.encoding,J=O.callback,Qe=T.objectMode?1:de.length;if(h(Y,T,!1,Qe,de,ee,J),O=O.next,T.bufferedRequestCount--,T.writing)break}O===null&&(T.lastBufferedRequest=null)}T.bufferedRequest=O,T.bufferProcessing=!1}F.prototype._write=function(Y,T,O){O(new A("_write()"))},F.prototype._writev=null,F.prototype.end=function(Y,T,O){var B=this._writableState;return typeof Y=="function"?(O=Y,Y=null,T=null):typeof T=="function"&&(O=T,T=null),Y!=null&&this.write(Y,T),B.corked&&(B.corked=1,this.uncork()),B.ending||z(this,B,O),this},Object.defineProperty(F.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(Y){return Y.ending&&Y.length===0&&Y.bufferedRequest===null&&!Y.finished&&!Y.writing}function v(Y,T){Y._final(function(O){T.pendingcb--,O&&j(Y,O),T.prefinished=!0,Y.emit("prefinish"),L(Y,T)})}function R(Y,T){!T.prefinished&&!T.finalCalled&&(typeof Y._final=="function"&&!T.destroyed?(T.pendingcb++,T.finalCalled=!0,Be.nextTick(v,Y,T)):(T.prefinished=!0,Y.emit("prefinish")))}function L(Y,T){var O=o(T);if(O&&(R(Y,T),T.pendingcb===0&&(T.finished=!0,Y.emit("finish"),T.autoDestroy))){var B=Y._readableState;(!B||B.autoDestroy&&B.endEmitted)&&Y.destroy()}return O}function z(Y,T,O){T.ending=!0,L(Y,T),O&&(T.finished?Be.nextTick(O):Y.once("finish",O)),T.ended=!0,Y.writable=!1}function q(Y,T,O){var B=Y.entry;for(Y.entry=null;B;){var W=B.callback;T.pendingcb--,W(O),B=B.next}T.corkedRequestsFree.next=Y}return Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(T){this._writableState&&(this._writableState.destroyed=T)}}),F.prototype.destroy=u.destroy,F.prototype._undestroy=u.undestroy,F.prototype._destroy=function(Y,T){T(Y)},op}var cp,qM;function yc(){if(qM)return cp;qM=1;var r=Object.keys||function(f){var g=[];for(var m in f)g.push(m);return g};cp=c;var e=ZD(),t=HD();Ge()(c,e);for(var i=r(t.prototype),s=0;s<i.length;s++){var n=i[s];c.prototype[n]||(c.prototype[n]=t.prototype[n])}function c(f){if(!(this instanceof c))return new c(f);e.call(this,f),t.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||Be.nextTick(u,this)}function u(f){f.end()}return Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=g,this._writableState.destroyed=g)}}),cp}var hp={},YM;function Va(){if(YM)return hp;YM=1;var r=tt().Buffer,e=r.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(S){if(!S)return"utf8";for(var D;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(D)return;S=(""+S).toLowerCase(),D=!0}}function i(S){var D=t(S);if(typeof D!="string"&&(r.isEncoding===e||!e(S)))throw new Error("Unknown encoding: "+S);return D||S}hp.StringDecoder=s;function s(S){this.encoding=i(S);var D;switch(this.encoding){case"utf16le":this.text=m,this.end=N,D=4;break;case"utf8":this.fillLast=u,D=4;break;case"base64":this.text=A,this.end=_,D=3;break;default:this.write=E,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(D)}s.prototype.write=function(S){if(S.length===0)return"";var D,C;if(this.lastNeed){if(D=this.fillLast(S),D===void 0)return"";C=this.lastNeed,this.lastNeed=0}else C=0;return C<S.length?D?D+this.text(S,C):this.text(S,C):D||""},s.prototype.end=g,s.prototype.text=f,s.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function n(S){return S<=127?0:S>>5===6?2:S>>4===14?3:S>>3===30?4:S>>6===2?-1:-2}function c(S,D,C){var j=D.length-1;if(j<C)return 0;var k=n(D[j]);return k>=0?(k>0&&(S.lastNeed=k-1),k):--j<C||k===-2?0:(k=n(D[j]),k>=0?(k>0&&(S.lastNeed=k-2),k):--j<C||k===-2?0:(k=n(D[j]),k>=0?(k>0&&(k===2?k=0:S.lastNeed=k-3),k):0))}function l(S,D,C){if((D[0]&192)!==128)return S.lastNeed=0,"";if(S.lastNeed>1&&D.length>1){if((D[1]&192)!==128)return S.lastNeed=1,"";if(S.lastNeed>2&&D.length>2&&(D[2]&192)!==128)return S.lastNeed=2,""}}function u(S){var D=this.lastTotal-this.lastNeed,C=l(this,S);if(C!==void 0)return C;if(this.lastNeed<=S.length)return S.copy(this.lastChar,D,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,D,0,S.length),this.lastNeed-=S.length}function f(S,D){var C=c(this,S,D);if(!this.lastNeed)return S.toString("utf8",D);this.lastTotal=C;var j=S.length-(C-this.lastNeed);return S.copy(this.lastChar,0,j),S.toString("utf8",D,j)}function g(S){var D=S&&S.length?this.write(S):"";return this.lastNeed?D+"":D}function m(S,D){if((S.length-D)%2===0){var C=S.toString("utf16le",D);if(C){var j=C.charCodeAt(C.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],C.slice(0,-1)}return C}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",D,S.length-1)}function N(S){var D=S&&S.length?this.write(S):"";if(this.lastNeed){var C=this.lastTotal-this.lastNeed;return D+this.lastChar.toString("utf16le",0,C)}return D}function A(S,D){var C=(S.length-D)%3;return C===0?S.toString("base64",D):(this.lastNeed=3-C,this.lastTotal=3,C===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",D,S.length-C))}function _(S){var D=S&&S.length?this.write(S):"";return this.lastNeed?D+this.lastChar.toString("base64",0,3-this.lastNeed):D}function E(S){return S.toString(this.encoding)}function x(S){return S&&S.length?this.write(S):""}return hp}var lp,WM;function pv(){if(WM)return lp;WM=1;var r=$c().codes.ERR_STREAM_PREMATURE_CLOSE;function e(n){var c=!1;return function(){if(!c){c=!0;for(var l=arguments.length,u=new Array(l),f=0;f<l;f++)u[f]=arguments[f];n.apply(this,u)}}}function t(){}function i(n){return n.setHeader&&typeof n.abort=="function"}function s(n,c,l){if(typeof c=="function")return s(n,null,c);c||(c={}),l=e(l||t);var u=c.readable||c.readable!==!1&&n.readable,f=c.writable||c.writable!==!1&&n.writable,g=function(){n.writable||N()},m=n._writableState&&n._writableState.finished,N=function(){f=!1,m=!0,u||l.call(n)},A=n._readableState&&n._readableState.endEmitted,_=function(){u=!1,A=!0,f||l.call(n)},E=function(C){l.call(n,C)},x=function(){var C;if(u&&!A)return(!n._readableState||!n._readableState.ended)&&(C=new r),l.call(n,C);if(f&&!m)return(!n._writableState||!n._writableState.ended)&&(C=new r),l.call(n,C)},S=function(){n.req.on("finish",N)};return i(n)?(n.on("complete",N),n.on("abort",x),n.req?S():n.on("request",S)):f&&!n._writableState&&(n.on("end",g),n.on("close",g)),n.on("end",_),n.on("finish",N),c.error!==!1&&n.on("error",E),n.on("close",x),function(){n.removeListener("complete",N),n.removeListener("abort",x),n.removeListener("request",S),n.req&&n.req.removeListener("finish",N),n.removeListener("end",g),n.removeListener("close",g),n.removeListener("finish",N),n.removeListener("end",_),n.removeListener("error",E),n.removeListener("close",x)}}return lp=s,lp}var up,QM;function gP(){if(QM)return up;QM=1;var r;function e(C,j,k){return j=t(j),j in C?Object.defineProperty(C,j,{value:k,enumerable:!0,configurable:!0,writable:!0}):C[j]=k,C}function t(C){var j=i(C,"string");return typeof j=="symbol"?j:String(j)}function i(C,j){if(typeof C!="object"||C===null)return C;var k=C[Symbol.toPrimitive];if(k!==void 0){var P=k.call(C,j);if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(C)}var s=pv(),n=Symbol("lastResolve"),c=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),f=Symbol("lastPromise"),g=Symbol("handlePromise"),m=Symbol("stream");function N(C,j){return{value:C,done:j}}function A(C){var j=C[n];if(j!==null){var k=C[m].read();k!==null&&(C[f]=null,C[n]=null,C[c]=null,j(N(k,!1)))}}function _(C){Be.nextTick(A,C)}function E(C,j){return function(k,P){C.then(function(){if(j[u]){k(N(void 0,!0));return}j[g](k,P)},P)}}var x=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((r={get stream(){return this[m]},next:function(){var j=this,k=this[l];if(k!==null)return Promise.reject(k);if(this[u])return Promise.resolve(N(void 0,!0));if(this[m].destroyed)return new Promise(function($,Z){Be.nextTick(function(){j[l]?Z(j[l]):$(N(void 0,!0))})});var P=this[f],Q;if(P)Q=new Promise(E(P,this));else{var F=this[m].read();if(F!==null)return Promise.resolve(N(F,!1));Q=new Promise(this[g])}return this[f]=Q,Q}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var j=this;return new Promise(function(k,P){j[m].destroy(null,function(Q){if(Q){P(Q);return}k(N(void 0,!0))})})}),r),x),D=function(j){var k,P=Object.create(S,(k={},e(k,m,{value:j,writable:!0}),e(k,n,{value:null,writable:!0}),e(k,c,{value:null,writable:!0}),e(k,l,{value:null,writable:!0}),e(k,u,{value:j._readableState.endEmitted,writable:!0}),e(k,g,{value:function(F,$){var Z=P[m].read();Z?(P[f]=null,P[n]=null,P[c]=null,F(N(Z,!1))):(P[n]=F,P[c]=$)},writable:!0}),k));return P[f]=null,s(j,function(Q){if(Q&&Q.code!=="ERR_STREAM_PREMATURE_CLOSE"){var F=P[c];F!==null&&(P[f]=null,P[n]=null,P[c]=null,F(Q)),P[l]=Q;return}var $=P[n];$!==null&&(P[f]=null,P[n]=null,P[c]=null,$(N(void 0,!0))),P[u]=!0}),j.on("readable",_.bind(null,P)),P};return up=D,up}var fp,VM;function yP(){return VM||(VM=1,fp=function(){throw new Error("Readable.from is not available in the browser")}),fp}var dp,FM;function ZD(){if(FM)return dp;FM=1,dp=$;var r;$.ReadableState=F,fa().EventEmitter;var e=function(U,H){return U.listeners(H).length},t=zD(),i=ki().Buffer,s=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function n(V){return i.from(V)}function c(V){return i.isBuffer(V)||V instanceof s}var l=Uc(),u;l&&l.debuglog?u=l.debuglog("stream"):u=function(){};var f=pP(),g=VD(),m=FD(),N=m.getHighWaterMark,A=$c().codes,_=A.ERR_INVALID_ARG_TYPE,E=A.ERR_STREAM_PUSH_AFTER_EOF,x=A.ERR_METHOD_NOT_IMPLEMENTED,S=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,D,C,j;Ge()($,t);var k=g.errorOrDestroy,P=["error","close","destroy","pause","resume"];function Q(V,U,H){if(typeof V.prependListener=="function")return V.prependListener(U,H);!V._events||!V._events[U]?V.on(U,H):Array.isArray(V._events[U])?V._events[U].unshift(H):V._events[U]=[H,V._events[U]]}function F(V,U,H){r=r||yc(),V=V||{},typeof H!="boolean"&&(H=U instanceof r),this.objectMode=!!V.objectMode,H&&(this.objectMode=this.objectMode||!!V.readableObjectMode),this.highWaterMark=N(this,V,"readableHighWaterMark",H),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=V.emitClose!==!1,this.autoDestroy=!!V.autoDestroy,this.destroyed=!1,this.defaultEncoding=V.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,V.encoding&&(D||(D=Va().StringDecoder),this.decoder=new D(V.encoding),this.encoding=V.encoding)}function $(V){if(r=r||yc(),!(this instanceof $))return new $(V);var U=this instanceof r;this._readableState=new F(V,this,U),this.readable=!0,V&&(typeof V.read=="function"&&(this._read=V.read),typeof V.destroy=="function"&&(this._destroy=V.destroy)),t.call(this)}Object.defineProperty($.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(U){this._readableState&&(this._readableState.destroyed=U)}}),$.prototype.destroy=g.destroy,$.prototype._undestroy=g.undestroy,$.prototype._destroy=function(V,U){U(V)},$.prototype.push=function(V,U){var H=this._readableState,de;return H.objectMode?de=!0:typeof V=="string"&&(U=U||H.defaultEncoding,U!==H.encoding&&(V=i.from(V,U),U=""),de=!0),Z(this,V,U,!1,de)},$.prototype.unshift=function(V){return Z(this,V,null,!0,!1)};function Z(V,U,H,de,ee){u("readableAddChunk",U);var J=V._readableState;if(U===null)J.reading=!1,w(V,J);else{var Qe;if(ee||(Qe=a(J,U)),Qe)k(V,Qe);else if(J.objectMode||U&&U.length>0)if(typeof U!="string"&&!J.objectMode&&Object.getPrototypeOf(U)!==i.prototype&&(U=n(U)),de)J.endEmitted?k(V,new S):M(V,J,U,!0);else if(J.ended)k(V,new E);else{if(J.destroyed)return!1;J.reading=!1,J.decoder&&!H?(U=J.decoder.write(U),J.objectMode||U.length!==0?M(V,J,U,!1):y(V,J)):M(V,J,U,!1)}else de||(J.reading=!1,y(V,J))}return!J.ended&&(J.length<J.highWaterMark||J.length===0)}function M(V,U,H,de){U.flowing&&U.length===0&&!U.sync?(U.awaitDrain=0,V.emit("data",H)):(U.length+=U.objectMode?1:H.length,de?U.buffer.unshift(H):U.buffer.push(H),U.needReadable&&b(V)),y(V,U)}function a(V,U){var H;return!c(U)&&typeof U!="string"&&U!==void 0&&!V.objectMode&&(H=new _("chunk",["string","Buffer","Uint8Array"],U)),H}$.prototype.isPaused=function(){return this._readableState.flowing===!1},$.prototype.setEncoding=function(V){D||(D=Va().StringDecoder);var U=new D(V);this._readableState.decoder=U,this._readableState.encoding=this._readableState.decoder.encoding;for(var H=this._readableState.buffer.head,de="";H!==null;)de+=U.write(H.data),H=H.next;return this._readableState.buffer.clear(),de!==""&&this._readableState.buffer.push(de),this._readableState.length=de.length,this};var h=1073741824;function d(V){return V>=h?V=h:(V--,V|=V>>>1,V|=V>>>2,V|=V>>>4,V|=V>>>8,V|=V>>>16,V++),V}function p(V,U){return V<=0||U.length===0&&U.ended?0:U.objectMode?1:V!==V?U.flowing&&U.length?U.buffer.head.data.length:U.length:(V>U.highWaterMark&&(U.highWaterMark=d(V)),V<=U.length?V:U.ended?U.length:(U.needReadable=!0,0))}$.prototype.read=function(V){u("read",V),V=parseInt(V,10);var U=this._readableState,H=V;if(V!==0&&(U.emittedReadable=!1),V===0&&U.needReadable&&((U.highWaterMark!==0?U.length>=U.highWaterMark:U.length>0)||U.ended))return u("read: emitReadable",U.length,U.ended),U.length===0&&U.ended?O(this):b(this),null;if(V=p(V,U),V===0&&U.ended)return U.length===0&&O(this),null;var de=U.needReadable;u("need readable",de),(U.length===0||U.length-V<U.highWaterMark)&&(de=!0,u("length less than watermark",de)),U.ended||U.reading?(de=!1,u("reading or ended",de)):de&&(u("do read"),U.reading=!0,U.sync=!0,U.length===0&&(U.needReadable=!0),this._read(U.highWaterMark),U.sync=!1,U.reading||(V=p(H,U)));var ee;return V>0?ee=T(V,U):ee=null,ee===null?(U.needReadable=U.length<=U.highWaterMark,V=0):(U.length-=V,U.awaitDrain=0),U.length===0&&(U.ended||(U.needReadable=!0),H!==V&&U.ended&&O(this)),ee!==null&&this.emit("data",ee),ee};function w(V,U){if(u("onEofChunk"),!U.ended){if(U.decoder){var H=U.decoder.end();H&&H.length&&(U.buffer.push(H),U.length+=U.objectMode?1:H.length)}U.ended=!0,U.sync?b(V):(U.needReadable=!1,U.emittedReadable||(U.emittedReadable=!0,I(V)))}}function b(V){var U=V._readableState;u("emitReadable",U.needReadable,U.emittedReadable),U.needReadable=!1,U.emittedReadable||(u("emitReadable",U.flowing),U.emittedReadable=!0,Be.nextTick(I,V))}function I(V){var U=V._readableState;u("emitReadable_",U.destroyed,U.length,U.ended),!U.destroyed&&(U.length||U.ended)&&(V.emit("readable"),U.emittedReadable=!1),U.needReadable=!U.flowing&&!U.ended&&U.length<=U.highWaterMark,Y(V)}function y(V,U){U.readingMore||(U.readingMore=!0,Be.nextTick(o,V,U))}function o(V,U){for(;!U.reading&&!U.ended&&(U.length<U.highWaterMark||U.flowing&&U.length===0);){var H=U.length;if(u("maybeReadMore read 0"),V.read(0),H===U.length)break}U.readingMore=!1}$.prototype._read=function(V){k(this,new x("_read()"))},$.prototype.pipe=function(V,U){var H=this,de=this._readableState;switch(de.pipesCount){case 0:de.pipes=V;break;case 1:de.pipes=[de.pipes,V];break;default:de.pipes.push(V);break}de.pipesCount+=1,u("pipe count=%d opts=%j",de.pipesCount,U);var ee=(!U||U.end!==!1)&&V!==Be.stdout&&V!==Be.stderr,J=ee?oe:Dt;de.endEmitted?Be.nextTick(J):H.once("end",J),V.on("unpipe",Qe);function Qe(he,le){u("onunpipe"),he===H&&le&&le.hasUnpiped===!1&&(le.hasUnpiped=!0,re())}function oe(){u("onend"),V.end()}var K=v(H);V.on("drain",K);var et=!1;function re(){u("cleanup"),V.removeListener("close",se),V.removeListener("finish",ce),V.removeListener("drain",K),V.removeListener("error",Ke),V.removeListener("unpipe",Qe),H.removeListener("end",oe),H.removeListener("end",Dt),H.removeListener("data",ae),et=!0,de.awaitDrain&&(!V._writableState||V._writableState.needDrain)&&K()}H.on("data",ae);function ae(he){u("ondata");var le=V.write(he);u("dest.write",le),le===!1&&((de.pipesCount===1&&de.pipes===V||de.pipesCount>1&&W(de.pipes,V)!==-1)&&!et&&(u("false write response, pause",de.awaitDrain),de.awaitDrain++),H.pause())}function Ke(he){u("onerror",he),Dt(),V.removeListener("error",Ke),e(V,"error")===0&&k(V,he)}Q(V,"error",Ke);function se(){V.removeListener("finish",ce),Dt()}V.once("close",se);function ce(){u("onfinish"),V.removeListener("close",se),Dt()}V.once("finish",ce);function Dt(){u("unpipe"),H.unpipe(V)}return V.emit("pipe",H),de.flowing||(u("pipe resume"),H.resume()),V};function v(V){return function(){var H=V._readableState;u("pipeOnDrain",H.awaitDrain),H.awaitDrain&&H.awaitDrain--,H.awaitDrain===0&&e(V,"data")&&(H.flowing=!0,Y(V))}}$.prototype.unpipe=function(V){var U=this._readableState,H={hasUnpiped:!1};if(U.pipesCount===0)return this;if(U.pipesCount===1)return V&&V!==U.pipes?this:(V||(V=U.pipes),U.pipes=null,U.pipesCount=0,U.flowing=!1,V&&V.emit("unpipe",this,H),this);if(!V){var de=U.pipes,ee=U.pipesCount;U.pipes=null,U.pipesCount=0,U.flowing=!1;for(var J=0;J<ee;J++)de[J].emit("unpipe",this,{hasUnpiped:!1});return this}var Qe=W(U.pipes,V);return Qe===-1?this:(U.pipes.splice(Qe,1),U.pipesCount-=1,U.pipesCount===1&&(U.pipes=U.pipes[0]),V.emit("unpipe",this,H),this)},$.prototype.on=function(V,U){var H=t.prototype.on.call(this,V,U),de=this._readableState;return V==="data"?(de.readableListening=this.listenerCount("readable")>0,de.flowing!==!1&&this.resume()):V==="readable"&&!de.endEmitted&&!de.readableListening&&(de.readableListening=de.needReadable=!0,de.flowing=!1,de.emittedReadable=!1,u("on readable",de.length,de.reading),de.length?b(this):de.reading||Be.nextTick(L,this)),H},$.prototype.addListener=$.prototype.on,$.prototype.removeListener=function(V,U){var H=t.prototype.removeListener.call(this,V,U);return V==="readable"&&Be.nextTick(R,this),H},$.prototype.removeAllListeners=function(V){var U=t.prototype.removeAllListeners.apply(this,arguments);return(V==="readable"||V===void 0)&&Be.nextTick(R,this),U};function R(V){var U=V._readableState;U.readableListening=V.listenerCount("readable")>0,U.resumeScheduled&&!U.paused?U.flowing=!0:V.listenerCount("data")>0&&V.resume()}function L(V){u("readable nexttick read 0"),V.read(0)}$.prototype.resume=function(){var V=this._readableState;return V.flowing||(u("resume"),V.flowing=!V.readableListening,z(this,V)),V.paused=!1,this};function z(V,U){U.resumeScheduled||(U.resumeScheduled=!0,Be.nextTick(q,V,U))}function q(V,U){u("resume",U.reading),U.reading||V.read(0),U.resumeScheduled=!1,V.emit("resume"),Y(V),U.flowing&&!U.reading&&V.read(0)}$.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Y(V){var U=V._readableState;for(u("flow",U.flowing);U.flowing&&V.read()!==null;);}$.prototype.wrap=function(V){var U=this,H=this._readableState,de=!1;V.on("end",function(){if(u("wrapped end"),H.decoder&&!H.ended){var Qe=H.decoder.end();Qe&&Qe.length&&U.push(Qe)}U.push(null)}),V.on("data",function(Qe){if(u("wrapped data"),H.decoder&&(Qe=H.decoder.write(Qe)),!(H.objectMode&&Qe==null)&&!(!H.objectMode&&(!Qe||!Qe.length))){var oe=U.push(Qe);oe||(de=!0,V.pause())}});for(var ee in V)this[ee]===void 0&&typeof V[ee]=="function"&&(this[ee]=(function(oe){return function(){return V[oe].apply(V,arguments)}})(ee));for(var J=0;J<P.length;J++)V.on(P[J],this.emit.bind(this,P[J]));return this._read=function(Qe){u("wrapped _read",Qe),de&&(de=!1,V.resume())},this},typeof Symbol=="function"&&($.prototype[Symbol.asyncIterator]=function(){return C===void 0&&(C=gP()),C(this)}),Object.defineProperty($.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty($.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty($.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(U){this._readableState&&(this._readableState.flowing=U)}}),$._fromList=T,Object.defineProperty($.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function T(V,U){if(U.length===0)return null;var H;return U.objectMode?H=U.buffer.shift():!V||V>=U.length?(U.decoder?H=U.buffer.join(""):U.buffer.length===1?H=U.buffer.first():H=U.buffer.concat(U.length),U.buffer.clear()):H=U.buffer.consume(V,U.decoder),H}function O(V){var U=V._readableState;u("endReadable",U.endEmitted),U.endEmitted||(U.ended=!0,Be.nextTick(B,U,V))}function B(V,U){if(u("endReadableNT",V.endEmitted,V.length),!V.endEmitted&&V.length===0&&(V.endEmitted=!0,U.readable=!1,U.emit("end"),V.autoDestroy)){var H=U._writableState;(!H||H.autoDestroy&&H.finished)&&U.destroy()}}typeof Symbol=="function"&&($.from=function(V,U){return j===void 0&&(j=yP()),j($,V,U)});function W(V,U){for(var H=0,de=V.length;H<de;H++)if(V[H]===U)return H;return-1}return dp}var pp,HM;function GD(){if(HM)return pp;HM=1,pp=l;var r=$c().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,i=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,n=yc();Ge()(l,n);function c(g,m){var N=this._transformState;N.transforming=!1;var A=N.writecb;if(A===null)return this.emit("error",new t);N.writechunk=null,N.writecb=null,m!=null&&this.push(m),A(g);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function l(g){if(!(this instanceof l))return new l(g);n.call(this,g),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,g&&(typeof g.transform=="function"&&(this._transform=g.transform),typeof g.flush=="function"&&(this._flush=g.flush)),this.on("prefinish",u)}function u(){var g=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(m,N){f(g,m,N)}):f(this,null,null)}l.prototype.push=function(g,m){return this._transformState.needTransform=!1,n.prototype.push.call(this,g,m)},l.prototype._transform=function(g,m,N){N(new e("_transform()"))},l.prototype._write=function(g,m,N){var A=this._transformState;if(A.writecb=N,A.writechunk=g,A.writeencoding=m,!A.transforming){var _=this._readableState;(A.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},l.prototype._read=function(g){var m=this._transformState;m.writechunk!==null&&!m.transforming?(m.transforming=!0,this._transform(m.writechunk,m.writeencoding,m.afterTransform)):m.needTransform=!0},l.prototype._destroy=function(g,m){n.prototype._destroy.call(this,g,function(N){m(N)})};function f(g,m,N){if(m)return g.emit("error",m);if(N!=null&&g.push(N),g._writableState.length)throw new s;if(g._transformState.transforming)throw new i;return g.push(null)}return pp}var gp,ZM;function wP(){if(ZM)return gp;ZM=1,gp=e;var r=GD();Ge()(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,i,s){s(null,t)},gp}var yp,GM;function mP(){if(GM)return yp;GM=1;var r;function e(N){var A=!1;return function(){A||(A=!0,N.apply(void 0,arguments))}}var t=$c().codes,i=t.ERR_MISSING_ARGS,s=t.ERR_STREAM_DESTROYED;function n(N){if(N)throw N}function c(N){return N.setHeader&&typeof N.abort=="function"}function l(N,A,_,E){E=e(E);var x=!1;N.on("close",function(){x=!0}),r===void 0&&(r=pv()),r(N,{readable:A,writable:_},function(D){if(D)return E(D);x=!0,E()});var S=!1;return function(D){if(!x&&!S){if(S=!0,c(N))return N.abort();if(typeof N.destroy=="function")return N.destroy();E(D||new s("pipe"))}}}function u(N){N()}function f(N,A){return N.pipe(A)}function g(N){return!N.length||typeof N[N.length-1]!="function"?n:N.pop()}function m(){for(var N=arguments.length,A=new Array(N),_=0;_<N;_++)A[_]=arguments[_];var E=g(A);if(Array.isArray(A[0])&&(A=A[0]),A.length<2)throw new i("streams");var x,S=A.map(function(D,C){var j=C<A.length-1,k=C>0;return l(D,j,k,function(P){x||(x=P),P&&S.forEach(u),!j&&(S.forEach(u),E(x))})});return A.reduce(f)}return yp=m,yp}var wp,KM;function KD(){if(KM)return wp;KM=1,wp=t;var r=fa().EventEmitter,e=Ge();e(t,r),t.Readable=ZD(),t.Writable=HD(),t.Duplex=yc(),t.Transform=GD(),t.PassThrough=wP(),t.finished=pv(),t.pipeline=mP(),t.Stream=t;function t(){r.call(this)}return t.prototype.pipe=function(i,s){var n=this;function c(A){i.writable&&i.write(A)===!1&&n.pause&&n.pause()}n.on("data",c);function l(){n.readable&&n.resume&&n.resume()}i.on("drain",l),!i._isStdio&&(!s||s.end!==!1)&&(n.on("end",f),n.on("close",g));var u=!1;function f(){u||(u=!0,i.end())}function g(){u||(u=!0,typeof i.destroy=="function"&&i.destroy())}function m(A){if(N(),r.listenerCount(this,"error")===0)throw A}n.on("error",m),i.on("error",m);function N(){n.removeListener("data",c),i.removeListener("drain",l),n.removeListener("end",f),n.removeListener("close",g),n.removeListener("error",m),i.removeListener("error",m),n.removeListener("end",N),n.removeListener("close",N),i.removeListener("close",N)}return n.on("end",N),n.on("close",N),i.on("close",N),i.emit("pipe",n),i},wp}var mp,JM;function vP(){if(JM)return mp;JM=1;var r=tt().Buffer,e=KD().Transform,t=Ge();function i(l){e.call(this),this._block=r.allocUnsafe(l),this._blockSize=l,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t(i,e),i.prototype._transform=function(l,u,f){var g=null;try{this.update(l,u)}catch(m){g=m}f(g)},i.prototype._flush=function(l){var u=null;try{this.push(this.digest())}catch(f){u=f}l(u)};var s=typeof Uint8Array<"u",n=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);function c(l,u){if(l instanceof r)return l;if(typeof l=="string")return r.from(l,u);if(n&&ArrayBuffer.isView(l)){if(l.byteLength===0)return r.alloc(0);var f=r.from(l.buffer,l.byteOffset,l.byteLength);if(f.byteLength===l.byteLength)return f}if(s&&l instanceof Uint8Array||r.isBuffer(l)&&l.constructor&&typeof l.constructor.isBuffer=="function"&&l.constructor.isBuffer(l))return r.from(l);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return i.prototype.update=function(l,u){if(this._finalized)throw new Error("Digest already called");l=c(l,u);for(var f=this._block,g=0;this._blockOffset+l.length-g>=this._blockSize;){for(var m=this._blockOffset;m<this._blockSize;)f[m++]=l[g++];this._update(),this._blockOffset=0}for(;g<l.length;)f[this._blockOffset++]=l[g++];for(var N=0,A=l.length*8;A>0;++N)this._length[N]+=A,A=this._length[N]/4294967296|0,A>0&&(this._length[N]-=4294967296*A);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(l){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var u=this._digest();l!==void 0&&(u=u.toString(l)),this._block.fill(0),this._blockOffset=0;for(var f=0;f<4;++f)this._length[f]=0;return u},i.prototype._digest=function(){throw new Error("_digest is not implemented")},mp=i,mp}var vp,XM;function gv(){if(XM)return vp;XM=1;var r=Ge(),e=vP(),t=tt().Buffer,i=new Array(16);function s(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}r(s,e),s.prototype._update=function(){for(var g=i,m=0;m<16;++m)g[m]=this._block.readInt32LE(m*4);var N=this._a,A=this._b,_=this._c,E=this._d;N=c(N,A,_,E,g[0],3614090360,7),E=c(E,N,A,_,g[1],3905402710,12),_=c(_,E,N,A,g[2],606105819,17),A=c(A,_,E,N,g[3],3250441966,22),N=c(N,A,_,E,g[4],4118548399,7),E=c(E,N,A,_,g[5],1200080426,12),_=c(_,E,N,A,g[6],2821735955,17),A=c(A,_,E,N,g[7],4249261313,22),N=c(N,A,_,E,g[8],1770035416,7),E=c(E,N,A,_,g[9],2336552879,12),_=c(_,E,N,A,g[10],4294925233,17),A=c(A,_,E,N,g[11],2304563134,22),N=c(N,A,_,E,g[12],1804603682,7),E=c(E,N,A,_,g[13],4254626195,12),_=c(_,E,N,A,g[14],2792965006,17),A=c(A,_,E,N,g[15],1236535329,22),N=l(N,A,_,E,g[1],4129170786,5),E=l(E,N,A,_,g[6],3225465664,9),_=l(_,E,N,A,g[11],643717713,14),A=l(A,_,E,N,g[0],3921069994,20),N=l(N,A,_,E,g[5],3593408605,5),E=l(E,N,A,_,g[10],38016083,9),_=l(_,E,N,A,g[15],3634488961,14),A=l(A,_,E,N,g[4],3889429448,20),N=l(N,A,_,E,g[9],568446438,5),E=l(E,N,A,_,g[14],3275163606,9),_=l(_,E,N,A,g[3],4107603335,14),A=l(A,_,E,N,g[8],1163531501,20),N=l(N,A,_,E,g[13],2850285829,5),E=l(E,N,A,_,g[2],4243563512,9),_=l(_,E,N,A,g[7],1735328473,14),A=l(A,_,E,N,g[12],2368359562,20),N=u(N,A,_,E,g[5],4294588738,4),E=u(E,N,A,_,g[8],2272392833,11),_=u(_,E,N,A,g[11],1839030562,16),A=u(A,_,E,N,g[14],4259657740,23),N=u(N,A,_,E,g[1],2763975236,4),E=u(E,N,A,_,g[4],1272893353,11),_=u(_,E,N,A,g[7],4139469664,16),A=u(A,_,E,N,g[10],3200236656,23),N=u(N,A,_,E,g[13],681279174,4),E=u(E,N,A,_,g[0],3936430074,11),_=u(_,E,N,A,g[3],3572445317,16),A=u(A,_,E,N,g[6],76029189,23),N=u(N,A,_,E,g[9],3654602809,4),E=u(E,N,A,_,g[12],3873151461,11),_=u(_,E,N,A,g[15],530742520,16),A=u(A,_,E,N,g[2],3299628645,23),N=f(N,A,_,E,g[0],4096336452,6),E=f(E,N,A,_,g[7],1126891415,10),_=f(_,E,N,A,g[14],2878612391,15),A=f(A,_,E,N,g[5],4237533241,21),N=f(N,A,_,E,g[12],1700485571,6),E=f(E,N,A,_,g[3],2399980690,10),_=f(_,E,N,A,g[10],4293915773,15),A=f(A,_,E,N,g[1],2240044497,21),N=f(N,A,_,E,g[8],1873313359,6),E=f(E,N,A,_,g[15],4264355552,10),_=f(_,E,N,A,g[6],2734768916,15),A=f(A,_,E,N,g[13],1309151649,21),N=f(N,A,_,E,g[4],4149444226,6),E=f(E,N,A,_,g[11],3174756917,10),_=f(_,E,N,A,g[2],718787259,15),A=f(A,_,E,N,g[9],3951481745,21),this._a=this._a+N|0,this._b=this._b+A|0,this._c=this._c+_|0,this._d=this._d+E|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var g=t.allocUnsafe(16);return g.writeInt32LE(this._a,0),g.writeInt32LE(this._b,4),g.writeInt32LE(this._c,8),g.writeInt32LE(this._d,12),g};function n(g,m){return g<<m|g>>>32-m}function c(g,m,N,A,_,E,x){return n(g+(m&N|~m&A)+_+E|0,x)+m|0}function l(g,m,N,A,_,E,x){return n(g+(m&A|N&~A)+_+E|0,x)+m|0}function u(g,m,N,A,_,E,x){return n(g+(m^N^A)+_+E|0,x)+m|0}function f(g,m,N,A,_,E,x){return n(g+(N^(m|~A))+_+E|0,x)+m|0}return vp=s,vp}var bp,e2;function bP(){if(e2)return bp;e2=1;var r={}.toString;return bp=Array.isArray||function(e){return r.call(e)=="[object Array]"},bp}var Mp,t2;function MP(){if(t2)return Mp;t2=1;var r=kc(),e=Rc(),t=e("TypedArray.prototype.buffer",!0),i=QD();return Mp=t||function(n){if(!i(n))throw new r("Not a Typed Array");return n.buffer},Mp}var Np,r2;function id(){if(r2)return Np;r2=1;var r=tt().Buffer,e=bP(),t=MP(),i=ArrayBuffer.isView||function(u){try{return t(u),!0}catch{return!1}},s=typeof Uint8Array<"u",n=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",c=n&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);return Np=function(u,f){if(r.isBuffer(u))return u.constructor&&!("isBuffer"in u)?r.from(u):u;if(typeof u=="string")return r.from(u,f);if(n&&i(u)){if(u.byteLength===0)return r.alloc(0);if(c){var g=r.from(u.buffer,u.byteOffset,u.byteLength);if(g.byteLength===u.byteLength)return g}var m=u instanceof Uint8Array?u:new Uint8Array(u.buffer,u.byteOffset,u.byteLength),N=r.from(m);if(N.length===u.byteLength)return N}if(s&&u instanceof Uint8Array)return r.from(u);var A=e(u);if(A)for(var _=0;_<u.length;_+=1){var E=u[_];if(typeof E!="number"||E<0||E>255||~~E!==E)throw new RangeError("Array items must be numbers in the range 0-255.")}if(A||r.isBuffer(u)&&u.constructor&&typeof u.constructor.isBuffer=="function"&&u.constructor.isBuffer(u))return r.from(u);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')},Np}var Ip,i2;function NP(){if(i2)return Ip;i2=1;var r=tt().Buffer,e=id(),t=typeof Uint8Array<"u",i=t&&typeof ArrayBuffer<"u",s=i&&ArrayBuffer.isView;return Ip=function(n,c){if(typeof n=="string"||r.isBuffer(n)||t&&n instanceof Uint8Array||s&&s(n))return e(n,c);throw new TypeError('The "data" argument must be a string, a Buffer, a Uint8Array, or a DataView')},Ip}var pu={exports:{}},gu={exports:{}},n2;function pa(){if(n2)return gu.exports;n2=1,typeof Be>"u"||!Be.version||Be.version.indexOf("v0.")===0||Be.version.indexOf("v1.")===0&&Be.version.indexOf("v1.8.")!==0?gu.exports={nextTick:r}:gu.exports=Be;function r(e,t,i,s){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,c,l;switch(n){case 0:case 1:return Be.nextTick(e);case 2:return Be.nextTick(function(){e.call(null,t)});case 3:return Be.nextTick(function(){e.call(null,t,i)});case 4:return Be.nextTick(function(){e.call(null,t,i,s)});default:for(c=new Array(n-1),l=0;l<c.length;)c[l++]=arguments[l];return Be.nextTick(function(){e.apply(null,c)})}}return gu.exports}var Ap,s2;function IP(){if(s2)return Ap;s2=1;var r={}.toString;return Ap=Array.isArray||function(e){return r.call(e)=="[object Array]"},Ap}var _p,a2;function JD(){return a2||(a2=1,_p=fa().EventEmitter),_p}var yu={exports:{}},o2;function yv(){return o2||(o2=1,(function(r,e){var t=ki(),i=t.Buffer;function s(c,l){for(var u in c)l[u]=c[u]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=t:(s(t,e),e.Buffer=n);function n(c,l,u){return i(c,l,u)}s(i,n),n.from=function(c,l,u){if(typeof c=="number")throw new TypeError("Argument must not be a number");return i(c,l,u)},n.alloc=function(c,l,u){if(typeof c!="number")throw new TypeError("Argument must be a number");var f=i(c);return l!==void 0?typeof u=="string"?f.fill(l,u):f.fill(l):f.fill(0),f},n.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return i(c)},n.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(c)}})(yu,yu.exports)),yu.exports}var yi={},c2;function gs(){if(c2)return yi;c2=1;function r(E){return Array.isArray?Array.isArray(E):_(E)==="[object Array]"}yi.isArray=r;function e(E){return typeof E=="boolean"}yi.isBoolean=e;function t(E){return E===null}yi.isNull=t;function i(E){return E==null}yi.isNullOrUndefined=i;function s(E){return typeof E=="number"}yi.isNumber=s;function n(E){return typeof E=="string"}yi.isString=n;function c(E){return typeof E=="symbol"}yi.isSymbol=c;function l(E){return E===void 0}yi.isUndefined=l;function u(E){return _(E)==="[object RegExp]"}yi.isRegExp=u;function f(E){return typeof E=="object"&&E!==null}yi.isObject=f;function g(E){return _(E)==="[object Date]"}yi.isDate=g;function m(E){return _(E)==="[object Error]"||E instanceof Error}yi.isError=m;function N(E){return typeof E=="function"}yi.isFunction=N;function A(E){return E===null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||typeof E=="symbol"||typeof E>"u"}yi.isPrimitive=A,yi.isBuffer=ki().Buffer.isBuffer;function _(E){return Object.prototype.toString.call(E)}return yi}var Ep={exports:{}},h2;function AP(){return h2||(h2=1,(function(r){function e(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")}var t=yv().Buffer,i=Uc();function s(n,c,l){n.copy(c,l)}r.exports=(function(){function n(){e(this,n),this.head=null,this.tail=null,this.length=0}return n.prototype.push=function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length},n.prototype.unshift=function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length},n.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(l){if(this.length===0)return"";for(var u=this.head,f=""+u.data;u=u.next;)f+=l+u.data;return f},n.prototype.concat=function(l){if(this.length===0)return t.alloc(0);for(var u=t.allocUnsafe(l>>>0),f=this.head,g=0;f;)s(f.data,u,g),g+=f.data.length,f=f.next;return u},n})(),i&&i.inspect&&i.inspect.custom&&(r.exports.prototype[i.inspect.custom]=function(){var n=i.inspect({length:this.length});return this.constructor.name+" "+n})})(Ep)),Ep.exports}var Dp,l2;function XD(){if(l2)return Dp;l2=1;var r=pa();function e(s,n){var c=this,l=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return l||u?(n?n(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(i,this,s)):r.nextTick(i,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(f){!n&&f?c._writableState?c._writableState.errorEmitted||(c._writableState.errorEmitted=!0,r.nextTick(i,c,f)):r.nextTick(i,c,f):n&&n(f)}),this)}function t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(s,n){s.emit("error",n)}return Dp={destroy:e,undestroy:t},Dp}var Sp,u2;function eS(){if(u2)return Sp;u2=1;var r=pa();Sp=E;function e(b){var I=this;this.next=null,this.entry=null,this.finish=function(){w(I,b)}}var t=!Be.browser&&["v0.10","v0.9."].indexOf(Be.version.slice(0,5))>-1?setImmediate:r.nextTick,i;E.WritableState=A;var s=Object.create(gs());s.inherits=Ge();var n={deprecate:dv()},c=JD(),l=yv().Buffer,u=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(b){return l.from(b)}function g(b){return l.isBuffer(b)||b instanceof u}var m=XD();s.inherits(E,c);function N(){}function A(b,I){i=i||wc(),b=b||{};var y=I instanceof i;this.objectMode=!!b.objectMode,y&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var o=b.highWaterMark,v=b.writableHighWaterMark,R=this.objectMode?16:16*1024;o||o===0?this.highWaterMark=o:y&&(v||v===0)?this.highWaterMark=v:this.highWaterMark=R,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=b.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(z){Q(I,z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}A.prototype.getBuffer=function(){for(var I=this.bufferedRequest,y=[];I;)y.push(I),I=I.next;return y},(function(){try{Object.defineProperty(A.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var _;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(b){return _.call(this,b)?!0:this!==E?!1:b&&b._writableState instanceof A}})):_=function(b){return b instanceof this};function E(b){if(i=i||wc(),!_.call(E,this)&&!(this instanceof i))return new E(b);this._writableState=new A(b,this),this.writable=!0,b&&(typeof b.write=="function"&&(this._write=b.write),typeof b.writev=="function"&&(this._writev=b.writev),typeof b.destroy=="function"&&(this._destroy=b.destroy),typeof b.final=="function"&&(this._final=b.final)),c.call(this)}E.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function x(b,I){var y=new Error("write after end");b.emit("error",y),r.nextTick(I,y)}function S(b,I,y,o){var v=!0,R=!1;return y===null?R=new TypeError("May not write null values to stream"):typeof y!="string"&&y!==void 0&&!I.objectMode&&(R=new TypeError("Invalid non-string/buffer chunk")),R&&(b.emit("error",R),r.nextTick(o,R),v=!1),v}E.prototype.write=function(b,I,y){var o=this._writableState,v=!1,R=!o.objectMode&&g(b);return R&&!l.isBuffer(b)&&(b=f(b)),typeof I=="function"&&(y=I,I=null),R?I="buffer":I||(I=o.defaultEncoding),typeof y!="function"&&(y=N),o.ended?x(this,y):(R||S(this,o,b,y))&&(o.pendingcb++,v=C(this,o,R,b,I,y)),v},E.prototype.cork=function(){var b=this._writableState;b.corked++},E.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,!b.writing&&!b.corked&&!b.bufferProcessing&&b.bufferedRequest&&Z(this,b))},E.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+I);return this._writableState.defaultEncoding=I,this};function D(b,I,y){return!b.objectMode&&b.decodeStrings!==!1&&typeof I=="string"&&(I=l.from(I,y)),I}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(b,I,y,o,v,R){if(!y){var L=D(I,o,v);o!==L&&(y=!0,v="buffer",o=L)}var z=I.objectMode?1:o.length;I.length+=z;var q=I.length<I.highWaterMark;if(q||(I.needDrain=!0),I.writing||I.corked){var Y=I.lastBufferedRequest;I.lastBufferedRequest={chunk:o,encoding:v,isBuf:y,callback:R,next:null},Y?Y.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else j(b,I,!1,z,o,v,R);return q}function j(b,I,y,o,v,R,L){I.writelen=o,I.writecb=L,I.writing=!0,I.sync=!0,y?b._writev(v,I.onwrite):b._write(v,R,I.onwrite),I.sync=!1}function k(b,I,y,o,v){--I.pendingcb,y?(r.nextTick(v,o),r.nextTick(d,b,I),b._writableState.errorEmitted=!0,b.emit("error",o)):(v(o),b._writableState.errorEmitted=!0,b.emit("error",o),d(b,I))}function P(b){b.writing=!1,b.writecb=null,b.length-=b.writelen,b.writelen=0}function Q(b,I){var y=b._writableState,o=y.sync,v=y.writecb;if(P(y),I)k(b,y,o,I,v);else{var R=M(y);!R&&!y.corked&&!y.bufferProcessing&&y.bufferedRequest&&Z(b,y),o?t(F,b,y,R,v):F(b,y,R,v)}}function F(b,I,y,o){y||$(b,I),I.pendingcb--,o(),d(b,I)}function $(b,I){I.length===0&&I.needDrain&&(I.needDrain=!1,b.emit("drain"))}function Z(b,I){I.bufferProcessing=!0;var y=I.bufferedRequest;if(b._writev&&y&&y.next){var o=I.bufferedRequestCount,v=new Array(o),R=I.corkedRequestsFree;R.entry=y;for(var L=0,z=!0;y;)v[L]=y,y.isBuf||(z=!1),y=y.next,L+=1;v.allBuffers=z,j(b,I,!0,I.length,v,"",R.finish),I.pendingcb++,I.lastBufferedRequest=null,R.next?(I.corkedRequestsFree=R.next,R.next=null):I.corkedRequestsFree=new e(I),I.bufferedRequestCount=0}else{for(;y;){var q=y.chunk,Y=y.encoding,T=y.callback,O=I.objectMode?1:q.length;if(j(b,I,!1,O,q,Y,T),y=y.next,I.bufferedRequestCount--,I.writing)break}y===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=y,I.bufferProcessing=!1}E.prototype._write=function(b,I,y){y(new Error("_write() is not implemented"))},E.prototype._writev=null,E.prototype.end=function(b,I,y){var o=this._writableState;typeof b=="function"?(y=b,b=null,I=null):typeof I=="function"&&(y=I,I=null),b!=null&&this.write(b,I),o.corked&&(o.corked=1,this.uncork()),o.ending||p(this,o,y)};function M(b){return b.ending&&b.length===0&&b.bufferedRequest===null&&!b.finished&&!b.writing}function a(b,I){b._final(function(y){I.pendingcb--,y&&b.emit("error",y),I.prefinished=!0,b.emit("prefinish"),d(b,I)})}function h(b,I){!I.prefinished&&!I.finalCalled&&(typeof b._final=="function"?(I.pendingcb++,I.finalCalled=!0,r.nextTick(a,b,I)):(I.prefinished=!0,b.emit("prefinish")))}function d(b,I){var y=M(I);return y&&(h(b,I),I.pendingcb===0&&(I.finished=!0,b.emit("finish"))),y}function p(b,I,y){I.ending=!0,d(b,I),y&&(I.finished?r.nextTick(y):b.once("finish",y)),I.ended=!0,b.writable=!1}function w(b,I,y){var o=b.entry;for(b.entry=null;o;){var v=o.callback;I.pendingcb--,v(y),o=o.next}I.corkedRequestsFree.next=b}return Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(b){this._writableState&&(this._writableState.destroyed=b)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(b,I){this.end(),I(b)},Sp}var xp,f2;function wc(){if(f2)return xp;f2=1;var r=pa(),e=Object.keys||function(m){var N=[];for(var A in m)N.push(A);return N};xp=u;var t=Object.create(gs());t.inherits=Ge();var i=tS(),s=eS();t.inherits(u,i);for(var n=e(s.prototype),c=0;c<n.length;c++){var l=n[c];u.prototype[l]||(u.prototype[l]=s.prototype[l])}function u(m){if(!(this instanceof u))return new u(m);i.call(this,m),s.call(this,m),m&&m.readable===!1&&(this.readable=!1),m&&m.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,m&&m.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",f)}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(g,this)}function g(m){m.end()}return Object.defineProperty(u.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),u.prototype._destroy=function(m,N){this.push(null),this.end(),r.nextTick(N,m)},xp}var Tp,d2;function tS(){if(d2)return Tp;d2=1;var r=pa();Tp=D;var e=IP(),t;D.ReadableState=S,fa().EventEmitter;var i=function(T,O){return T.listeners(O).length},s=JD(),n=yv().Buffer,c=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(T){return n.from(T)}function u(T){return n.isBuffer(T)||T instanceof c}var f=Object.create(gs());f.inherits=Ge();var g=Uc(),m=void 0;g&&g.debuglog?m=g.debuglog("stream"):m=function(){};var N=AP(),A=XD(),_;f.inherits(D,s);var E=["error","close","destroy","pause","resume"];function x(T,O,B){if(typeof T.prependListener=="function")return T.prependListener(O,B);!T._events||!T._events[O]?T.on(O,B):e(T._events[O])?T._events[O].unshift(B):T._events[O]=[B,T._events[O]]}function S(T,O){t=t||wc(),T=T||{};var B=O instanceof t;this.objectMode=!!T.objectMode,B&&(this.objectMode=this.objectMode||!!T.readableObjectMode);var W=T.highWaterMark,V=T.readableHighWaterMark,U=this.objectMode?16:16*1024;W||W===0?this.highWaterMark=W:B&&(V||V===0)?this.highWaterMark=V:this.highWaterMark=U,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=T.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,T.encoding&&(_||(_=Va().StringDecoder),this.decoder=new _(T.encoding),this.encoding=T.encoding)}function D(T){if(t=t||wc(),!(this instanceof D))return new D(T);this._readableState=new S(T,this),this.readable=!0,T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy)),s.call(this)}Object.defineProperty(D.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(T){this._readableState&&(this._readableState.destroyed=T)}}),D.prototype.destroy=A.destroy,D.prototype._undestroy=A.undestroy,D.prototype._destroy=function(T,O){this.push(null),O(T)},D.prototype.push=function(T,O){var B=this._readableState,W;return B.objectMode?W=!0:typeof T=="string"&&(O=O||B.defaultEncoding,O!==B.encoding&&(T=n.from(T,O),O=""),W=!0),C(this,T,O,!1,W)},D.prototype.unshift=function(T){return C(this,T,null,!0,!1)};function C(T,O,B,W,V){var U=T._readableState;if(O===null)U.reading=!1,Z(T,U);else{var H;V||(H=k(U,O)),H?T.emit("error",H):U.objectMode||O&&O.length>0?(typeof O!="string"&&!U.objectMode&&Object.getPrototypeOf(O)!==n.prototype&&(O=l(O)),W?U.endEmitted?T.emit("error",new Error("stream.unshift() after end event")):j(T,U,O,!0):U.ended?T.emit("error",new Error("stream.push() after EOF")):(U.reading=!1,U.decoder&&!B?(O=U.decoder.write(O),U.objectMode||O.length!==0?j(T,U,O,!1):h(T,U)):j(T,U,O,!1))):W||(U.reading=!1)}return P(U)}function j(T,O,B,W){O.flowing&&O.length===0&&!O.sync?(T.emit("data",B),T.read(0)):(O.length+=O.objectMode?1:B.length,W?O.buffer.unshift(B):O.buffer.push(B),O.needReadable&&M(T)),h(T,O)}function k(T,O){var B;return!u(O)&&typeof O!="string"&&O!==void 0&&!T.objectMode&&(B=new TypeError("Invalid non-string/buffer chunk")),B}function P(T){return!T.ended&&(T.needReadable||T.length<T.highWaterMark||T.length===0)}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(T){return _||(_=Va().StringDecoder),this._readableState.decoder=new _(T),this._readableState.encoding=T,this};var Q=8388608;function F(T){return T>=Q?T=Q:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}function $(T,O){return T<=0||O.length===0&&O.ended?0:O.objectMode?1:T!==T?O.flowing&&O.length?O.buffer.head.data.length:O.length:(T>O.highWaterMark&&(O.highWaterMark=F(T)),T<=O.length?T:O.ended?O.length:(O.needReadable=!0,0))}D.prototype.read=function(T){m("read",T),T=parseInt(T,10);var O=this._readableState,B=T;if(T!==0&&(O.emittedReadable=!1),T===0&&O.needReadable&&(O.length>=O.highWaterMark||O.ended))return m("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?z(this):M(this),null;if(T=$(T,O),T===0&&O.ended)return O.length===0&&z(this),null;var W=O.needReadable;m("need readable",W),(O.length===0||O.length-T<O.highWaterMark)&&(W=!0,m("length less than watermark",W)),O.ended||O.reading?(W=!1,m("reading or ended",W)):W&&(m("do read"),O.reading=!0,O.sync=!0,O.length===0&&(O.needReadable=!0),this._read(O.highWaterMark),O.sync=!1,O.reading||(T=$(B,O)));var V;return T>0?V=o(T,O):V=null,V===null?(O.needReadable=!0,T=0):O.length-=T,O.length===0&&(O.ended||(O.needReadable=!0),B!==T&&O.ended&&z(this)),V!==null&&this.emit("data",V),V};function Z(T,O){if(!O.ended){if(O.decoder){var B=O.decoder.end();B&&B.length&&(O.buffer.push(B),O.length+=O.objectMode?1:B.length)}O.ended=!0,M(T)}}function M(T){var O=T._readableState;O.needReadable=!1,O.emittedReadable||(m("emitReadable",O.flowing),O.emittedReadable=!0,O.sync?r.nextTick(a,T):a(T))}function a(T){m("emit readable"),T.emit("readable"),y(T)}function h(T,O){O.readingMore||(O.readingMore=!0,r.nextTick(d,T,O))}function d(T,O){for(var B=O.length;!O.reading&&!O.flowing&&!O.ended&&O.length<O.highWaterMark&&(m("maybeReadMore read 0"),T.read(0),B!==O.length);)B=O.length;O.readingMore=!1}D.prototype._read=function(T){this.emit("error",new Error("_read() is not implemented"))},D.prototype.pipe=function(T,O){var B=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=T;break;case 1:W.pipes=[W.pipes,T];break;default:W.pipes.push(T);break}W.pipesCount+=1,m("pipe count=%d opts=%j",W.pipesCount,O);var V=(!O||O.end!==!1)&&T!==Be.stdout&&T!==Be.stderr,U=V?de:Ke;W.endEmitted?r.nextTick(U):B.once("end",U),T.on("unpipe",H);function H(se,ce){m("onunpipe"),se===B&&ce&&ce.hasUnpiped===!1&&(ce.hasUnpiped=!0,Qe())}function de(){m("onend"),T.end()}var ee=p(B);T.on("drain",ee);var J=!1;function Qe(){m("cleanup"),T.removeListener("close",re),T.removeListener("finish",ae),T.removeListener("drain",ee),T.removeListener("error",et),T.removeListener("unpipe",H),B.removeListener("end",de),B.removeListener("end",Ke),B.removeListener("data",K),J=!0,W.awaitDrain&&(!T._writableState||T._writableState.needDrain)&&ee()}var oe=!1;B.on("data",K);function K(se){m("ondata"),oe=!1;var ce=T.write(se);ce===!1&&!oe&&((W.pipesCount===1&&W.pipes===T||W.pipesCount>1&&Y(W.pipes,T)!==-1)&&!J&&(m("false write response, pause",W.awaitDrain),W.awaitDrain++,oe=!0),B.pause())}function et(se){m("onerror",se),Ke(),T.removeListener("error",et),i(T,"error")===0&&T.emit("error",se)}x(T,"error",et);function re(){T.removeListener("finish",ae),Ke()}T.once("close",re);function ae(){m("onfinish"),T.removeListener("close",re),Ke()}T.once("finish",ae);function Ke(){m("unpipe"),B.unpipe(T)}return T.emit("pipe",B),W.flowing||(m("pipe resume"),B.resume()),T};function p(T){return function(){var O=T._readableState;m("pipeOnDrain",O.awaitDrain),O.awaitDrain&&O.awaitDrain--,O.awaitDrain===0&&i(T,"data")&&(O.flowing=!0,y(T))}}D.prototype.unpipe=function(T){var O=this._readableState,B={hasUnpiped:!1};if(O.pipesCount===0)return this;if(O.pipesCount===1)return T&&T!==O.pipes?this:(T||(T=O.pipes),O.pipes=null,O.pipesCount=0,O.flowing=!1,T&&T.emit("unpipe",this,B),this);if(!T){var W=O.pipes,V=O.pipesCount;O.pipes=null,O.pipesCount=0,O.flowing=!1;for(var U=0;U<V;U++)W[U].emit("unpipe",this,{hasUnpiped:!1});return this}var H=Y(O.pipes,T);return H===-1?this:(O.pipes.splice(H,1),O.pipesCount-=1,O.pipesCount===1&&(O.pipes=O.pipes[0]),T.emit("unpipe",this,B),this)},D.prototype.on=function(T,O){var B=s.prototype.on.call(this,T,O);if(T==="data")this._readableState.flowing!==!1&&this.resume();else if(T==="readable"){var W=this._readableState;!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.emittedReadable=!1,W.reading?W.length&&M(this):r.nextTick(w,this))}return B},D.prototype.addListener=D.prototype.on;function w(T){m("readable nexttick read 0"),T.read(0)}D.prototype.resume=function(){var T=this._readableState;return T.flowing||(m("resume"),T.flowing=!0,b(this,T)),this};function b(T,O){O.resumeScheduled||(O.resumeScheduled=!0,r.nextTick(I,T,O))}function I(T,O){O.reading||(m("resume read 0"),T.read(0)),O.resumeScheduled=!1,O.awaitDrain=0,T.emit("resume"),y(T),O.flowing&&!O.reading&&T.read(0)}D.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function y(T){var O=T._readableState;for(m("flow",O.flowing);O.flowing&&T.read()!==null;);}D.prototype.wrap=function(T){var O=this,B=this._readableState,W=!1;T.on("end",function(){if(m("wrapped end"),B.decoder&&!B.ended){var H=B.decoder.end();H&&H.length&&O.push(H)}O.push(null)}),T.on("data",function(H){if(m("wrapped data"),B.decoder&&(H=B.decoder.write(H)),!(B.objectMode&&H==null)&&!(!B.objectMode&&(!H||!H.length))){var de=O.push(H);de||(W=!0,T.pause())}});for(var V in T)this[V]===void 0&&typeof T[V]=="function"&&(this[V]=(function(H){return function(){return T[H].apply(T,arguments)}})(V));for(var U=0;U<E.length;U++)T.on(E[U],this.emit.bind(this,E[U]));return this._read=function(H){m("wrapped _read",H),W&&(W=!1,T.resume())},this},Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),D._fromList=o;function o(T,O){if(O.length===0)return null;var B;return O.objectMode?B=O.buffer.shift():!T||T>=O.length?(O.decoder?B=O.buffer.join(""):O.buffer.length===1?B=O.buffer.head.data:B=O.buffer.concat(O.length),O.buffer.clear()):B=v(T,O.buffer,O.decoder),B}function v(T,O,B){var W;return T<O.head.data.length?(W=O.head.data.slice(0,T),O.head.data=O.head.data.slice(T)):T===O.head.data.length?W=O.shift():W=B?R(T,O):L(T,O),W}function R(T,O){var B=O.head,W=1,V=B.data;for(T-=V.length;B=B.next;){var U=B.data,H=T>U.length?U.length:T;if(H===U.length?V+=U:V+=U.slice(0,T),T-=H,T===0){H===U.length?(++W,B.next?O.head=B.next:O.head=O.tail=null):(O.head=B,B.data=U.slice(H));break}++W}return O.length-=W,V}function L(T,O){var B=n.allocUnsafe(T),W=O.head,V=1;for(W.data.copy(B),T-=W.data.length;W=W.next;){var U=W.data,H=T>U.length?U.length:T;if(U.copy(B,B.length-T,0,H),T-=H,T===0){H===U.length?(++V,W.next?O.head=W.next:O.head=O.tail=null):(O.head=W,W.data=U.slice(H));break}++V}return O.length-=V,B}function z(T){var O=T._readableState;if(O.length>0)throw new Error('"endReadable()" called on non-empty stream');O.endEmitted||(O.ended=!0,r.nextTick(q,O,T))}function q(T,O){!T.endEmitted&&T.length===0&&(T.endEmitted=!0,O.readable=!1,O.emit("end"))}function Y(T,O){for(var B=0,W=T.length;B<W;B++)if(T[B]===O)return B;return-1}return Tp}var jp,p2;function rS(){if(p2)return jp;p2=1,jp=i;var r=wc(),e=Object.create(gs());e.inherits=Ge(),e.inherits(i,r);function t(c,l){var u=this._transformState;u.transforming=!1;var f=u.writecb;if(!f)return this.emit("error",new Error("write callback called multiple times"));u.writechunk=null,u.writecb=null,l!=null&&this.push(l),f(c);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function i(c){if(!(this instanceof i))return new i(c);r.call(this,c),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",s)}function s(){var c=this;typeof this._flush=="function"?this._flush(function(l,u){n(c,l,u)}):n(this,null,null)}i.prototype.push=function(c,l){return this._transformState.needTransform=!1,r.prototype.push.call(this,c,l)},i.prototype._transform=function(c,l,u){throw new Error("_transform() is not implemented")},i.prototype._write=function(c,l,u){var f=this._transformState;if(f.writecb=u,f.writechunk=c,f.writeencoding=l,!f.transforming){var g=this._readableState;(f.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},i.prototype._read=function(c){var l=this._transformState;l.writechunk!==null&&l.writecb&&!l.transforming?(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform)):l.needTransform=!0},i.prototype._destroy=function(c,l){var u=this;r.prototype._destroy.call(this,c,function(f){l(f),u.emit("close")})};function n(c,l,u){if(l)return c.emit("error",l);if(u!=null&&c.push(u),c._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(c._transformState.transforming)throw new Error("Calling transform done when still transforming");return c.push(null)}return jp}var Cp,g2;function _P(){if(g2)return Cp;g2=1,Cp=t;var r=rS(),e=Object.create(gs());e.inherits=Ge(),e.inherits(t,r);function t(i){if(!(this instanceof t))return new t(i);r.call(this,i)}return t.prototype._transform=function(i,s,n){n(null,i)},Cp}var y2;function EP(){return y2||(y2=1,(function(r,e){e=r.exports=tS(),e.Stream=e,e.Readable=e,e.Writable=eS(),e.Duplex=wc(),e.Transform=rS(),e.PassThrough=_P()})(pu,pu.exports)),pu.exports}var Op,w2;function DP(){if(w2)return Op;w2=1;var r=tt().Buffer,e=NP(),t=EP().Transform,i=Ge();function s(n){t.call(this),this._block=r.allocUnsafe(n),this._blockSize=n,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return i(s,t),s.prototype._transform=function(n,c,l){var u=null;try{this.update(n,c)}catch(f){u=f}l(u)},s.prototype._flush=function(n){var c=null;try{this.push(this.digest())}catch(l){c=l}n(c)},s.prototype.update=function(n,c){if(this._finalized)throw new Error("Digest already called");for(var l=e(n,c),u=this._block,f=0;this._blockOffset+l.length-f>=this._blockSize;){for(var g=this._blockOffset;g<this._blockSize;)u[g]=l[f],g+=1,f+=1;this._update(),this._blockOffset=0}for(;f<l.length;)u[this._blockOffset]=l[f],this._blockOffset+=1,f+=1;for(var m=0,N=l.length*8;N>0;++m)this._length[m]+=N,N=this._length[m]/4294967296|0,N>0&&(this._length[m]-=4294967296*N);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(n){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var c=this._digest();n!==void 0&&(c=c.toString(n)),this._block.fill(0),this._blockOffset=0;for(var l=0;l<4;++l)this._length[l]=0;return c},s.prototype._digest=function(){throw new Error("_digest is not implemented")},Op=s,Op}var Lp,m2;function wv(){if(m2)return Lp;m2=1;var r=ki().Buffer,e=Ge(),t=DP(),i=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],n=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function g(S,D){return S<<D|S>>>32-D}function m(S,D,C,j,k,P,Q,F){return g(S+(D^C^j)+P+Q|0,F)+k|0}function N(S,D,C,j,k,P,Q,F){return g(S+(D&C|~D&j)+P+Q|0,F)+k|0}function A(S,D,C,j,k,P,Q,F){return g(S+((D|~C)^j)+P+Q|0,F)+k|0}function _(S,D,C,j,k,P,Q,F){return g(S+(D&j|C&~j)+P+Q|0,F)+k|0}function E(S,D,C,j,k,P,Q,F){return g(S+(D^(C|~j))+P+Q|0,F)+k|0}function x(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}return e(x,t),x.prototype._update=function(){for(var S=i,D=0;D<16;++D)S[D]=this._block.readInt32LE(D*4);for(var C=this._a|0,j=this._b|0,k=this._c|0,P=this._d|0,Q=this._e|0,F=this._a|0,$=this._b|0,Z=this._c|0,M=this._d|0,a=this._e|0,h=0;h<80;h+=1){var d,p;h<16?(d=m(C,j,k,P,Q,S[s[h]],u[0],c[h]),p=E(F,$,Z,M,a,S[n[h]],f[0],l[h])):h<32?(d=N(C,j,k,P,Q,S[s[h]],u[1],c[h]),p=_(F,$,Z,M,a,S[n[h]],f[1],l[h])):h<48?(d=A(C,j,k,P,Q,S[s[h]],u[2],c[h]),p=A(F,$,Z,M,a,S[n[h]],f[2],l[h])):h<64?(d=_(C,j,k,P,Q,S[s[h]],u[3],c[h]),p=N(F,$,Z,M,a,S[n[h]],f[3],l[h])):(d=E(C,j,k,P,Q,S[s[h]],u[4],c[h]),p=m(F,$,Z,M,a,S[n[h]],f[4],l[h])),C=Q,Q=P,P=g(k,10),k=j,j=d,F=a,a=M,M=g(Z,10),Z=$,$=p}var w=this._b+k+M|0;this._b=this._c+P+a|0,this._c=this._d+Q+F|0,this._d=this._e+C+$|0,this._e=this._a+j+Z|0,this._a=w},x.prototype._digest=function(){this._block[this._blockOffset]=128,this._blockOffset+=1,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var S=r.alloc?r.alloc(20):new r(20);return S.writeInt32LE(this._a,0),S.writeInt32LE(this._b,4),S.writeInt32LE(this._c,8),S.writeInt32LE(this._d,12),S.writeInt32LE(this._e,16),S},Lp=x,Lp}var zp={exports:{}},kp,v2;function Bc(){if(v2)return kp;v2=1;var r=tt().Buffer,e=id();function t(i,s){this._block=r.alloc(i),this._finalSize=s,this._blockSize=i,this._len=0}return t.prototype.update=function(i,s){i=e(i,s||"utf8");for(var n=this._block,c=this._blockSize,l=i.length,u=this._len,f=0;f<l;){for(var g=u%c,m=Math.min(l-f,c-g),N=0;N<m;N++)n[g+N]=i[f+N];u+=m,f+=m,u%c===0&&this._update(n)}return this._len+=l,this},t.prototype.digest=function(i){var s=this._len%this._blockSize;this._block[s]=128,this._block.fill(0,s+1),s>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=this._len*8;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var c=(n&4294967295)>>>0,l=(n-c)/4294967296;this._block.writeUInt32BE(l,this._blockSize-8),this._block.writeUInt32BE(c,this._blockSize-4)}this._update(this._block);var u=this._hash();return i?u.toString(i):u},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},kp=t,kp}var Pp,b2;function SP(){if(b2)return Pp;b2=1;var r=Ge(),e=Bc(),t=tt().Buffer,i=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function n(){this.init(),this._w=s,e.call(this,64,56)}r(n,e),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function c(f){return f<<5|f>>>27}function l(f){return f<<30|f>>>2}function u(f,g,m,N){return f===0?g&m|~g&N:f===2?g&m|g&N|m&N:g^m^N}return n.prototype._update=function(f){for(var g=this._w,m=this._a|0,N=this._b|0,A=this._c|0,_=this._d|0,E=this._e|0,x=0;x<16;++x)g[x]=f.readInt32BE(x*4);for(;x<80;++x)g[x]=g[x-3]^g[x-8]^g[x-14]^g[x-16];for(var S=0;S<80;++S){var D=~~(S/20),C=c(m)+u(D,N,A,_)+E+g[S]+i[D]|0;E=_,_=A,A=l(N),N=m,m=C}this._a=m+this._a|0,this._b=N+this._b|0,this._c=A+this._c|0,this._d=_+this._d|0,this._e=E+this._e|0},n.prototype._hash=function(){var f=t.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},Pp=n,Pp}var Rp,M2;function xP(){if(M2)return Rp;M2=1;var r=Ge(),e=Bc(),t=tt().Buffer,i=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function n(){this.init(),this._w=s,e.call(this,64,56)}r(n,e),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function c(g){return g<<1|g>>>31}function l(g){return g<<5|g>>>27}function u(g){return g<<30|g>>>2}function f(g,m,N,A){return g===0?m&N|~m&A:g===2?m&N|m&A|N&A:m^N^A}return n.prototype._update=function(g){for(var m=this._w,N=this._a|0,A=this._b|0,_=this._c|0,E=this._d|0,x=this._e|0,S=0;S<16;++S)m[S]=g.readInt32BE(S*4);for(;S<80;++S)m[S]=c(m[S-3]^m[S-8]^m[S-14]^m[S-16]);for(var D=0;D<80;++D){var C=~~(D/20),j=l(N)+f(C,A,_,E)+x+m[D]+i[C]|0;x=E,E=_,_=u(A),A=N,N=j}this._a=N+this._a|0,this._b=A+this._b|0,this._c=_+this._c|0,this._d=E+this._d|0,this._e=x+this._e|0},n.prototype._hash=function(){var g=t.allocUnsafe(20);return g.writeInt32BE(this._a|0,0),g.writeInt32BE(this._b|0,4),g.writeInt32BE(this._c|0,8),g.writeInt32BE(this._d|0,12),g.writeInt32BE(this._e|0,16),g},Rp=n,Rp}var Up,N2;function iS(){if(N2)return Up;N2=1;var r=Ge(),e=Bc(),t=tt().Buffer,i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function n(){this.init(),this._w=s,e.call(this,64,56)}r(n,e),n.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function c(N,A,_){return _^N&(A^_)}function l(N,A,_){return N&A|_&(N|A)}function u(N){return(N>>>2|N<<30)^(N>>>13|N<<19)^(N>>>22|N<<10)}function f(N){return(N>>>6|N<<26)^(N>>>11|N<<21)^(N>>>25|N<<7)}function g(N){return(N>>>7|N<<25)^(N>>>18|N<<14)^N>>>3}function m(N){return(N>>>17|N<<15)^(N>>>19|N<<13)^N>>>10}return n.prototype._update=function(N){for(var A=this._w,_=this._a|0,E=this._b|0,x=this._c|0,S=this._d|0,D=this._e|0,C=this._f|0,j=this._g|0,k=this._h|0,P=0;P<16;++P)A[P]=N.readInt32BE(P*4);for(;P<64;++P)A[P]=m(A[P-2])+A[P-7]+g(A[P-15])+A[P-16]|0;for(var Q=0;Q<64;++Q){var F=k+f(D)+c(D,C,j)+i[Q]+A[Q]|0,$=u(_)+l(_,E,x)|0;k=j,j=C,C=D,D=S+F|0,S=x,x=E,E=_,_=F+$|0}this._a=_+this._a|0,this._b=E+this._b|0,this._c=x+this._c|0,this._d=S+this._d|0,this._e=D+this._e|0,this._f=C+this._f|0,this._g=j+this._g|0,this._h=k+this._h|0},n.prototype._hash=function(){var N=t.allocUnsafe(32);return N.writeInt32BE(this._a,0),N.writeInt32BE(this._b,4),N.writeInt32BE(this._c,8),N.writeInt32BE(this._d,12),N.writeInt32BE(this._e,16),N.writeInt32BE(this._f,20),N.writeInt32BE(this._g,24),N.writeInt32BE(this._h,28),N},Up=n,Up}var $p,I2;function TP(){if(I2)return $p;I2=1;var r=Ge(),e=iS(),t=Bc(),i=tt().Buffer,s=new Array(64);function n(){this.init(),this._w=s,t.call(this,64,56)}return r(n,e),n.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},n.prototype._hash=function(){var c=i.allocUnsafe(28);return c.writeInt32BE(this._a,0),c.writeInt32BE(this._b,4),c.writeInt32BE(this._c,8),c.writeInt32BE(this._d,12),c.writeInt32BE(this._e,16),c.writeInt32BE(this._f,20),c.writeInt32BE(this._g,24),c},$p=n,$p}var Bp,A2;function nS(){if(A2)return Bp;A2=1;var r=Ge(),e=Bc(),t=tt().Buffer,i=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function n(){this.init(),this._w=s,e.call(this,128,112)}r(n,e),n.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function c(E,x,S){return S^E&(x^S)}function l(E,x,S){return E&x|S&(E|x)}function u(E,x){return(E>>>28|x<<4)^(x>>>2|E<<30)^(x>>>7|E<<25)}function f(E,x){return(E>>>14|x<<18)^(E>>>18|x<<14)^(x>>>9|E<<23)}function g(E,x){return(E>>>1|x<<31)^(E>>>8|x<<24)^E>>>7}function m(E,x){return(E>>>1|x<<31)^(E>>>8|x<<24)^(E>>>7|x<<25)}function N(E,x){return(E>>>19|x<<13)^(x>>>29|E<<3)^E>>>6}function A(E,x){return(E>>>19|x<<13)^(x>>>29|E<<3)^(E>>>6|x<<26)}function _(E,x){return E>>>0<x>>>0?1:0}return n.prototype._update=function(E){for(var x=this._w,S=this._ah|0,D=this._bh|0,C=this._ch|0,j=this._dh|0,k=this._eh|0,P=this._fh|0,Q=this._gh|0,F=this._hh|0,$=this._al|0,Z=this._bl|0,M=this._cl|0,a=this._dl|0,h=this._el|0,d=this._fl|0,p=this._gl|0,w=this._hl|0,b=0;b<32;b+=2)x[b]=E.readInt32BE(b*4),x[b+1]=E.readInt32BE(b*4+4);for(;b<160;b+=2){var I=x[b-30],y=x[b-30+1],o=g(I,y),v=m(y,I);I=x[b-4],y=x[b-4+1];var R=N(I,y),L=A(y,I),z=x[b-14],q=x[b-14+1],Y=x[b-32],T=x[b-32+1],O=v+q|0,B=o+z+_(O,v)|0;O=O+L|0,B=B+R+_(O,L)|0,O=O+T|0,B=B+Y+_(O,T)|0,x[b]=B,x[b+1]=O}for(var W=0;W<160;W+=2){B=x[W],O=x[W+1];var V=l(S,D,C),U=l($,Z,M),H=u(S,$),de=u($,S),ee=f(k,h),J=f(h,k),Qe=i[W],oe=i[W+1],K=c(k,P,Q),et=c(h,d,p),re=w+J|0,ae=F+ee+_(re,w)|0;re=re+et|0,ae=ae+K+_(re,et)|0,re=re+oe|0,ae=ae+Qe+_(re,oe)|0,re=re+O|0,ae=ae+B+_(re,O)|0;var Ke=de+U|0,se=H+V+_(Ke,de)|0;F=Q,w=p,Q=P,p=d,P=k,d=h,h=a+re|0,k=j+ae+_(h,a)|0,j=C,a=M,C=D,M=Z,D=S,Z=$,$=re+Ke|0,S=ae+se+_($,re)|0}this._al=this._al+$|0,this._bl=this._bl+Z|0,this._cl=this._cl+M|0,this._dl=this._dl+a|0,this._el=this._el+h|0,this._fl=this._fl+d|0,this._gl=this._gl+p|0,this._hl=this._hl+w|0,this._ah=this._ah+S+_(this._al,$)|0,this._bh=this._bh+D+_(this._bl,Z)|0,this._ch=this._ch+C+_(this._cl,M)|0,this._dh=this._dh+j+_(this._dl,a)|0,this._eh=this._eh+k+_(this._el,h)|0,this._fh=this._fh+P+_(this._fl,d)|0,this._gh=this._gh+Q+_(this._gl,p)|0,this._hh=this._hh+F+_(this._hl,w)|0},n.prototype._hash=function(){var E=t.allocUnsafe(64);function x(S,D,C){E.writeInt32BE(S,C),E.writeInt32BE(D,C+4)}return x(this._ah,this._al,0),x(this._bh,this._bl,8),x(this._ch,this._cl,16),x(this._dh,this._dl,24),x(this._eh,this._el,32),x(this._fh,this._fl,40),x(this._gh,this._gl,48),x(this._hh,this._hl,56),E},Bp=n,Bp}var qp,_2;function jP(){if(_2)return qp;_2=1;var r=Ge(),e=nS(),t=Bc(),i=tt().Buffer,s=new Array(160);function n(){this.init(),this._w=s,t.call(this,128,112)}return r(n,e),n.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},n.prototype._hash=function(){var c=i.allocUnsafe(48);function l(u,f,g){c.writeInt32BE(u,g),c.writeInt32BE(f,g+4)}return l(this._ah,this._al,0),l(this._bh,this._bl,8),l(this._ch,this._cl,16),l(this._dh,this._dl,24),l(this._eh,this._el,32),l(this._fh,this._fl,40),c},qp=n,qp}var E2;function mv(){return E2||(E2=1,(function(r){r.exports=function(t){var i=t.toLowerCase(),s=r.exports[i];if(!s)throw new Error(i+" is not supported (we accept pull requests)");return new s},r.exports.sha=SP(),r.exports.sha1=xP(),r.exports.sha224=TP(),r.exports.sha256=iS(),r.exports.sha384=jP(),r.exports.sha512=nS()})(zp)),zp.exports}var Yp,D2;function ga(){if(D2)return Yp;D2=1;var r=tt().Buffer,e=KD().Transform,t=Va().StringDecoder,i=Ge(),s=id();function n(c){e.call(this),this.hashMode=typeof c=="string",this.hashMode?this[c]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return i(n,e),n.prototype.update=function(c,l,u){var f=s(c,l),g=this._update(f);return this.hashMode?this:(u&&(g=this._toString(g,u)),g)},n.prototype.setAutoPadding=function(){},n.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},n.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},n.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},n.prototype._transform=function(c,l,u){var f;try{this.hashMode?this._update(c):this.push(this._update(c))}catch(g){f=g}finally{u(f)}},n.prototype._flush=function(c){var l;try{this.push(this.__final())}catch(u){l=u}c(l)},n.prototype._finalOrDigest=function(c){var l=this.__final()||r.alloc(0);return c&&(l=this._toString(l,c,!0)),l},n.prototype._toString=function(c,l,u){if(this._decoder||(this._decoder=new t(l),this._encoding=l),this._encoding!==l)throw new Error("cant switch encodings");var f=this._decoder.write(c);return u&&(f+=this._decoder.end()),f},Yp=n,Yp}var Wp,S2;function jl(){if(S2)return Wp;S2=1;var r=Ge(),e=gv(),t=wv(),i=mv(),s=ga();function n(c){s.call(this,"digest"),this._hash=c}return r(n,s),n.prototype._update=function(c){this._hash.update(c)},n.prototype._final=function(){return this._hash.digest()},Wp=function(l){return l=l.toLowerCase(),l==="md5"?new e:l==="rmd160"||l==="ripemd160"?new t:new n(i(l))},Wp}var Qp,x2;function CP(){if(x2)return Qp;x2=1;var r=Ge(),e=tt().Buffer,t=ga(),i=e.alloc(128),s=64;function n(c,l){t.call(this,"digest"),typeof l=="string"&&(l=e.from(l)),this._alg=c,this._key=l,l.length>s?l=c(l):l.length<s&&(l=e.concat([l,i],s));for(var u=this._ipad=e.allocUnsafe(s),f=this._opad=e.allocUnsafe(s),g=0;g<s;g++)u[g]=l[g]^54,f[g]=l[g]^92;this._hash=[u]}return r(n,t),n.prototype._update=function(c){this._hash.push(c)},n.prototype._final=function(){var c=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,c]))},Qp=n,Qp}var Vp,T2;function sS(){if(T2)return Vp;T2=1;var r=gv();return Vp=function(e){return new r().update(e).digest()},Vp}var Fp,j2;function aS(){if(j2)return Fp;j2=1;var r=Ge(),e=CP(),t=ga(),i=tt().Buffer,s=sS(),n=wv(),c=mv(),l=i.alloc(128);function u(f,g){t.call(this,"digest"),typeof g=="string"&&(g=i.from(g));var m=f==="sha512"||f==="sha384"?128:64;if(this._alg=f,this._key=g,g.length>m){var N=f==="rmd160"?new n:c(f);g=N.update(g).digest()}else g.length<m&&(g=i.concat([g,l],m));for(var A=this._ipad=i.allocUnsafe(m),_=this._opad=i.allocUnsafe(m),E=0;E<m;E++)A[E]=g[E]^54,_[E]=g[E]^92;this._hash=f==="rmd160"?new n:c(f),this._hash.update(A)}return r(u,t),u.prototype._update=function(f){this._hash.update(f)},u.prototype._final=function(){var f=this._hash.digest(),g=this._alg==="rmd160"?new n:c(this._alg);return g.update(this._opad).update(f).digest()},Fp=function(g,m){return g=g.toLowerCase(),g==="rmd160"||g==="ripemd160"?new u("rmd160",m):g==="md5"?new e(s,m):new u(g,m)},Fp}const OP={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},LP={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},zP={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},kP={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},PP={sign:"ecdsa",hash:"sha256",id:""},RP={sign:"ecdsa",hash:"sha224",id:""},UP={sign:"ecdsa",hash:"sha384",id:""},$P={sign:"ecdsa",hash:"sha512",id:""},BP={sign:"dsa",hash:"sha1",id:""},qP={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},YP={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},oS={sha224WithRSAEncryption:OP,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:LP,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:zP,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:kP,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:PP,sha224:RP,sha384:UP,sha512:$P,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:BP,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:qP,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:YP,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var Hp,C2;function WP(){return C2||(C2=1,Hp=oS),Hp}var wu={},Zp,O2;function cS(){if(O2)return Zp;O2=1;var r=isFinite,e=Math.pow(2,30)-1;return Zp=function(t,i){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0||!r(t))throw new TypeError("Bad iterations");if(typeof i!="number")throw new TypeError("Key length not a number");if(i<0||i>e||i!==i)throw new TypeError("Bad key length")},Zp}var Gp,L2;function hS(){if(L2)return Gp;L2=1;var r;if(globalThis.process&&globalThis.process.browser)r="utf-8";else if(globalThis.process&&globalThis.process.version){var e=parseInt(Be.version.split(".")[0].slice(1),10);r=e>=6?"utf-8":"binary"}else r="utf-8";return Gp=r,Gp}var Kp,z2;function lS(){if(z2)return Kp;z2=1;var r=tt().Buffer,e=id(),t=typeof Uint8Array<"u",i=t&&typeof ArrayBuffer<"u",s=i&&ArrayBuffer.isView;return Kp=function(n,c,l){if(typeof n=="string"||r.isBuffer(n)||t&&n instanceof Uint8Array||s&&s(n))return e(n,c);throw new TypeError(l+" must be a string, a Buffer, a Uint8Array, or a DataView")},Kp}var Jp,k2;function uS(){if(k2)return Jp;k2=1;var r=sS(),e=wv(),t=mv(),i=tt().Buffer,s=cS(),n=hS(),c=lS(),l=i.alloc(128),u={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20},f={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function g(_){return new e().update(_).digest()}function m(_){function E(x){return t(_).update(x).digest()}return _==="rmd160"||_==="ripemd160"?g:_==="md5"?r:E}function N(_,E,x){var S=m(_),D=_==="sha512"||_==="sha384"?128:64;E.length>D?E=S(E):E.length<D&&(E=i.concat([E,l],D));for(var C=i.allocUnsafe(D+u[_]),j=i.allocUnsafe(D+u[_]),k=0;k<D;k++)C[k]=E[k]^54,j[k]=E[k]^92;var P=i.allocUnsafe(D+x+4);C.copy(P,0,0,D),this.ipad1=P,this.ipad2=C,this.opad=j,this.alg=_,this.blocksize=D,this.hash=S,this.size=u[_]}N.prototype.run=function(_,E){_.copy(E,this.blocksize);var x=this.hash(E);return x.copy(this.opad,this.blocksize),this.hash(this.opad)};function A(_,E,x,S,D){s(x,S),_=c(_,n,"Password"),E=c(E,n,"Salt");var C=(D||"sha1").toLowerCase(),j=f[C]||C,k=u[j];if(typeof k!="number"||!k)throw new TypeError("Digest algorithm not supported: "+D);var P=new N(j,_,E.length),Q=i.allocUnsafe(S),F=i.allocUnsafe(E.length+4);E.copy(F,0,0,E.length);for(var $=0,Z=k,M=Math.ceil(S/Z),a=1;a<=M;a++){F.writeUInt32BE(a,E.length);for(var h=P.run(F,P.ipad1),d=h,p=1;p<x;p++){d=P.run(d,P.ipad2);for(var w=0;w<Z;w++)h[w]^=d[w]}h.copy(Q,$),$+=Z}return Q}return Jp=A,Jp}var Xp,P2;function QP(){if(P2)return Xp;P2=1;var r=tt().Buffer,e=cS(),t=hS(),i=uS(),s=lS(),n,c=globalThis.crypto&&globalThis.crypto.subtle,l={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},u=[],f;function g(){return f||(globalThis.process&&globalThis.process.nextTick?f=globalThis.process.nextTick:globalThis.queueMicrotask?f=globalThis.queueMicrotask:globalThis.setImmediate?f=globalThis.setImmediate:f=globalThis.setTimeout,f)}function m(_,E,x,S,D){return c.importKey("raw",_,{name:"PBKDF2"},!1,["deriveBits"]).then(function(C){return c.deriveBits({name:"PBKDF2",salt:E,iterations:x,hash:{name:D}},C,S<<3)}).then(function(C){return r.from(C)})}function N(_){if(globalThis.process&&!globalThis.process.browser||!c||!c.importKey||!c.deriveBits)return Promise.resolve(!1);if(u[_]!==void 0)return u[_];n=n||r.alloc(8);var E=m(n,n,10,128,_).then(function(){return!0},function(){return!1});return u[_]=E,E}function A(_,E){_.then(function(x){g()(function(){E(null,x)})},function(x){g()(function(){E(x)})})}return Xp=function(_,E,x,S,D,C){if(typeof D=="function"&&(C=D,D=void 0),e(x,S),_=s(_,t,"Password"),E=s(E,t,"Salt"),typeof C!="function")throw new Error("No callback provided to pbkdf2");D=D||"sha1";var j=l[D.toLowerCase()];if(!j||typeof globalThis.Promise!="function"){g()(function(){var k;try{k=i(_,E,x,S,D)}catch(P){C(P);return}C(null,k)});return}A(N(j).then(function(k){return k?m(_,E,x,S,j):i(_,E,x,S,D)}),C)},Xp}var R2;function fS(){return R2||(R2=1,wu.pbkdf2=QP(),wu.pbkdf2Sync=uS()),wu}var Mn={},Ia={},rn={},U2;function dS(){if(U2)return rn;U2=1,rn.readUInt32BE=function(s,n){var c=s[0+n]<<24|s[1+n]<<16|s[2+n]<<8|s[3+n];return c>>>0},rn.writeUInt32BE=function(s,n,c){s[0+c]=n>>>24,s[1+c]=n>>>16&255,s[2+c]=n>>>8&255,s[3+c]=n&255},rn.ip=function(s,n,c,l){for(var u=0,f=0,g=6;g>=0;g-=2){for(var m=0;m<=24;m+=8)u<<=1,u|=n>>>m+g&1;for(var m=0;m<=24;m+=8)u<<=1,u|=s>>>m+g&1}for(var g=6;g>=0;g-=2){for(var m=1;m<=25;m+=8)f<<=1,f|=n>>>m+g&1;for(var m=1;m<=25;m+=8)f<<=1,f|=s>>>m+g&1}c[l+0]=u>>>0,c[l+1]=f>>>0},rn.rip=function(s,n,c,l){for(var u=0,f=0,g=0;g<4;g++)for(var m=24;m>=0;m-=8)u<<=1,u|=n>>>m+g&1,u<<=1,u|=s>>>m+g&1;for(var g=4;g<8;g++)for(var m=24;m>=0;m-=8)f<<=1,f|=n>>>m+g&1,f<<=1,f|=s>>>m+g&1;c[l+0]=u>>>0,c[l+1]=f>>>0},rn.pc1=function(s,n,c,l){for(var u=0,f=0,g=7;g>=5;g--){for(var m=0;m<=24;m+=8)u<<=1,u|=n>>m+g&1;for(var m=0;m<=24;m+=8)u<<=1,u|=s>>m+g&1}for(var m=0;m<=24;m+=8)u<<=1,u|=n>>m+g&1;for(var g=1;g<=3;g++){for(var m=0;m<=24;m+=8)f<<=1,f|=n>>m+g&1;for(var m=0;m<=24;m+=8)f<<=1,f|=s>>m+g&1}for(var m=0;m<=24;m+=8)f<<=1,f|=s>>m+g&1;c[l+0]=u>>>0,c[l+1]=f>>>0},rn.r28shl=function(s,n){return s<<n&268435455|s>>>28-n};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];rn.pc2=function(s,n,c,l){for(var u=0,f=0,g=r.length>>>1,m=0;m<g;m++)u<<=1,u|=s>>>r[m]&1;for(var m=g;m<r.length;m++)f<<=1,f|=n>>>r[m]&1;c[l+0]=u>>>0,c[l+1]=f>>>0},rn.expand=function(s,n,c){var l=0,u=0;l=(s&1)<<5|s>>>27;for(var f=23;f>=15;f-=4)l<<=6,l|=s>>>f&63;for(var f=11;f>=3;f-=4)u|=s>>>f&63,u<<=6;u|=(s&31)<<1|s>>>31,n[c+0]=l>>>0,n[c+1]=u>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];rn.substitute=function(s,n){for(var c=0,l=0;l<4;l++){var u=s>>>18-l*6&63,f=e[l*64+u];c<<=4,c|=f}for(var l=0;l<4;l++){var u=n>>>18-l*6&63,f=e[256+l*64+u];c<<=4,c|=f}return c>>>0};var t=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return rn.permute=function(s){for(var n=0,c=0;c<t.length;c++)n<<=1,n|=s>>>t[c]&1;return n>>>0},rn.padSplit=function(s,n,c){for(var l=s.toString(2);l.length<n;)l="0"+l;for(var u=[],f=0;f<n;f+=c)u.push(l.slice(f,f+c));return u.join(" ")},rn}var eg,$2;function vv(){if($2)return eg;$2=1;var r=Ln();function e(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=t.padding!==!1}return eg=e,e.prototype._init=function(){},e.prototype.update=function(i){return i.length===0?[]:this.type==="decrypt"?this._updateDecrypt(i):this._updateEncrypt(i)},e.prototype._buffer=function(i,s){for(var n=Math.min(this.buffer.length-this.bufferOff,i.length-s),c=0;c<n;c++)this.buffer[this.bufferOff+c]=i[s+c];return this.bufferOff+=n,n},e.prototype._flushBuffer=function(i,s){return this._update(this.buffer,0,i,s),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(i){var s=0,n=0,c=(this.bufferOff+i.length)/this.blockSize|0,l=new Array(c*this.blockSize);this.bufferOff!==0&&(s+=this._buffer(i,s),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(l,n)));for(var u=i.length-(i.length-s)%this.blockSize;s<u;s+=this.blockSize)this._update(i,s,l,n),n+=this.blockSize;for(;s<i.length;s++,this.bufferOff++)this.buffer[this.bufferOff]=i[s];return l},e.prototype._updateDecrypt=function(i){for(var s=0,n=0,c=Math.ceil((this.bufferOff+i.length)/this.blockSize)-1,l=new Array(c*this.blockSize);c>0;c--)s+=this._buffer(i,s),n+=this._flushBuffer(l,n);return s+=this._buffer(i,s),l},e.prototype.final=function(i){var s;i&&(s=this.update(i));var n;return this.type==="encrypt"?n=this._finalEncrypt():n=this._finalDecrypt(),s?s.concat(n):n},e.prototype._pad=function(i,s){if(s===0)return!1;for(;s<i.length;)i[s++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var i=new Array(this.blockSize);return this._update(this.buffer,0,i,0),i},e.prototype._unpad=function(i){return i},e.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var i=new Array(this.blockSize);return this._flushBuffer(i,0),this._unpad(i)},eg}var tg,B2;function pS(){if(B2)return tg;B2=1;var r=Ln(),e=Ge(),t=dS(),i=vv();function s(){this.tmp=new Array(2),this.keys=null}function n(l){i.call(this,l);var u=new s;this._desState=u,this.deriveKeys(u,l.key)}e(n,i),tg=n,n.create=function(u){return new n(u)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return n.prototype.deriveKeys=function(u,f){u.keys=new Array(32),r.equal(f.length,this.blockSize,"Invalid key length");var g=t.readUInt32BE(f,0),m=t.readUInt32BE(f,4);t.pc1(g,m,u.tmp,0),g=u.tmp[0],m=u.tmp[1];for(var N=0;N<u.keys.length;N+=2){var A=c[N>>>1];g=t.r28shl(g,A),m=t.r28shl(m,A),t.pc2(g,m,u.keys,N)}},n.prototype._update=function(u,f,g,m){var N=this._desState,A=t.readUInt32BE(u,f),_=t.readUInt32BE(u,f+4);t.ip(A,_,N.tmp,0),A=N.tmp[0],_=N.tmp[1],this.type==="encrypt"?this._encrypt(N,A,_,N.tmp,0):this._decrypt(N,A,_,N.tmp,0),A=N.tmp[0],_=N.tmp[1],t.writeUInt32BE(g,A,m),t.writeUInt32BE(g,_,m+4)},n.prototype._pad=function(u,f){if(this.padding===!1)return!1;for(var g=u.length-f,m=f;m<u.length;m++)u[m]=g;return!0},n.prototype._unpad=function(u){if(this.padding===!1)return u;for(var f=u[u.length-1],g=u.length-f;g<u.length;g++)r.equal(u[g],f);return u.slice(0,u.length-f)},n.prototype._encrypt=function(u,f,g,m,N){for(var A=f,_=g,E=0;E<u.keys.length;E+=2){var x=u.keys[E],S=u.keys[E+1];t.expand(_,u.tmp,0),x^=u.tmp[0],S^=u.tmp[1];var D=t.substitute(x,S),C=t.permute(D),j=_;_=(A^C)>>>0,A=j}t.rip(_,A,m,N)},n.prototype._decrypt=function(u,f,g,m,N){for(var A=g,_=f,E=u.keys.length-2;E>=0;E-=2){var x=u.keys[E],S=u.keys[E+1];t.expand(A,u.tmp,0),x^=u.tmp[0],S^=u.tmp[1];var D=t.substitute(x,S),C=t.permute(D),j=A;A=(_^C)>>>0,_=j}t.rip(A,_,m,N)},tg}var rg={},q2;function VP(){if(q2)return rg;q2=1;var r=Ln(),e=Ge(),t={};function i(n){r.equal(n.length,8,"Invalid IV length"),this.iv=new Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=n[c]}function s(n){function c(g){n.call(this,g),this._cbcInit()}e(c,n);for(var l=Object.keys(t),u=0;u<l.length;u++){var f=l[u];c.prototype[f]=t[f]}return c.create=function(m){return new c(m)},c}return rg.instantiate=s,t._cbcInit=function(){var c=new i(this.options.iv);this._cbcState=c},t._update=function(c,l,u,f){var g=this._cbcState,m=this.constructor.super_.prototype,N=g.iv;if(this.type==="encrypt"){for(var A=0;A<this.blockSize;A++)N[A]^=c[l+A];m._update.call(this,N,0,u,f);for(var A=0;A<this.blockSize;A++)N[A]=u[f+A]}else{m._update.call(this,c,l,u,f);for(var A=0;A<this.blockSize;A++)u[f+A]^=N[A];for(var A=0;A<this.blockSize;A++)N[A]=c[l+A]}},rg}var ig,Y2;function FP(){if(Y2)return ig;Y2=1;var r=Ln(),e=Ge(),t=vv(),i=pS();function s(c,l){r.equal(l.length,24,"Invalid key length");var u=l.slice(0,8),f=l.slice(8,16),g=l.slice(16,24);c==="encrypt"?this.ciphers=[i.create({type:"encrypt",key:u}),i.create({type:"decrypt",key:f}),i.create({type:"encrypt",key:g})]:this.ciphers=[i.create({type:"decrypt",key:g}),i.create({type:"encrypt",key:f}),i.create({type:"decrypt",key:u})]}function n(c){t.call(this,c);var l=new s(this.type,this.options.key);this._edeState=l}return e(n,t),ig=n,n.create=function(l){return new n(l)},n.prototype._update=function(l,u,f,g){var m=this._edeState;m.ciphers[0]._update(l,u,f,g),m.ciphers[1]._update(f,g,f,g),m.ciphers[2]._update(f,g,f,g)},n.prototype._pad=i.prototype._pad,n.prototype._unpad=i.prototype._unpad,ig}var W2;function HP(){return W2||(W2=1,Ia.utils=dS(),Ia.Cipher=vv(),Ia.DES=pS(),Ia.CBC=VP(),Ia.EDE=FP()),Ia}var ng,Q2;function ZP(){if(Q2)return ng;Q2=1;var r=ga(),e=HP(),t=Ge(),i=tt().Buffer,s={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],ng=n,t(n,r);function n(c){r.call(this);var l=c.mode.toLowerCase(),u=s[l],f;c.decrypt?f="decrypt":f="encrypt";var g=c.key;i.isBuffer(g)||(g=i.from(g)),(l==="des-ede"||l==="des-ede-cbc")&&(g=i.concat([g,g.slice(0,8)]));var m=c.iv;i.isBuffer(m)||(m=i.from(m)),this._des=u.create({key:g,iv:m,type:f})}return n.prototype._update=function(c){return i.from(this._des.update(c))},n.prototype._final=function(){return i.from(this._des.final())},ng}var Nn={},mu={},vu={},V2;function GP(){return V2||(V2=1,vu.encrypt=function(r,e){return r._cipher.encryptBlock(e)},vu.decrypt=function(r,e){return r._cipher.decryptBlock(e)}),vu}var bu={},sg,F2;function Cl(){return F2||(F2=1,sg=function(e,t){for(var i=Math.min(e.length,t.length),s=new We(i),n=0;n<i;++n)s[n]=e[n]^t[n];return s}),sg}var H2;function KP(){if(H2)return bu;H2=1;var r=Cl();return bu.encrypt=function(e,t){var i=r(t,e._prev);return e._prev=e._cipher.encryptBlock(i),e._prev},bu.decrypt=function(e,t){var i=e._prev;e._prev=t;var s=e._cipher.decryptBlock(t);return r(s,i)},bu}var ag={},Z2;function JP(){if(Z2)return ag;Z2=1;var r=tt().Buffer,e=Cl();function t(i,s,n){var c=s.length,l=e(s,i._cache);return i._cache=i._cache.slice(c),i._prev=r.concat([i._prev,n?s:l]),l}return ag.encrypt=function(i,s,n){for(var c=r.allocUnsafe(0),l;s.length;)if(i._cache.length===0&&(i._cache=i._cipher.encryptBlock(i._prev),i._prev=r.allocUnsafe(0)),i._cache.length<=s.length)l=i._cache.length,c=r.concat([c,t(i,s.slice(0,l),n)]),s=s.slice(l);else{c=r.concat([c,t(i,s,n)]);break}return c},ag}var og={},G2;function XP(){if(G2)return og;G2=1;var r=tt().Buffer;function e(t,i,s){var n=t._cipher.encryptBlock(t._prev),c=n[0]^i;return t._prev=r.concat([t._prev.slice(1),r.from([s?i:c])]),c}return og.encrypt=function(t,i,s){for(var n=i.length,c=r.allocUnsafe(n),l=-1;++l<n;)c[l]=e(t,i[l],s);return c},og}var cg={},K2;function eR(){if(K2)return cg;K2=1;var r=tt().Buffer;function e(i,s,n){for(var c,l=-1,u=8,f=0,g,m;++l<u;)c=i._cipher.encryptBlock(i._prev),g=s&1<<7-l?128:0,m=c[0]^g,f+=(m&128)>>l%8,i._prev=t(i._prev,n?g:m);return f}function t(i,s){var n=i.length,c=-1,l=r.allocUnsafe(i.length);for(i=r.concat([i,r.from([s])]);++c<n;)l[c]=i[c]<<1|i[c+1]>>7;return l}return cg.encrypt=function(i,s,n){for(var c=s.length,l=r.allocUnsafe(c),u=-1;++u<c;)l[u]=e(i,s[u],n);return l},cg}var hg={},J2;function tR(){if(J2)return hg;J2=1;var r=Cl();function e(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}return hg.encrypt=function(t,i){for(;t._cache.length<i.length;)t._cache=We.concat([t._cache,e(t)]);var s=t._cache.slice(0,i.length);return t._cache=t._cache.slice(i.length),r(i,s)},hg}var lg={},ug,X2;function gS(){if(X2)return ug;X2=1;function r(e){for(var t=e.length,i;t--;)if(i=e.readUInt8(t),i===255)e.writeUInt8(0,t);else{i++,e.writeUInt8(i,t);break}}return ug=r,ug}var eN;function tN(){if(eN)return lg;eN=1;var r=Cl(),e=tt().Buffer,t=gS();function i(n){var c=n._cipher.encryptBlockRaw(n._prev);return t(n._prev),c}var s=16;return lg.encrypt=function(n,c){var l=Math.ceil(c.length/s),u=n._cache.length;n._cache=e.concat([n._cache,e.allocUnsafe(l*s)]);for(var f=0;f<l;f++){var g=i(n),m=u+f*s;n._cache.writeUInt32BE(g[0],m+0),n._cache.writeUInt32BE(g[1],m+4),n._cache.writeUInt32BE(g[2],m+8),n._cache.writeUInt32BE(g[3],m+12)}var N=n._cache.slice(0,c.length);return n._cache=n._cache.slice(c.length),r(c,N)},lg}const rR={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},iR={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},nR={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},yS={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:rR,aes192:iR,aes256:nR,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var fg,rN;function bv(){if(rN)return fg;rN=1;var r={ECB:GP(),CBC:KP(),CFB:JP(),CFB8:XP(),CFB1:eR(),OFB:tR(),CTR:tN(),GCM:tN()},e=yS;for(var t in e)e[t].module=r[e[t].mode];return fg=e,fg}var dg={},iN;function nd(){if(iN)return dg;iN=1;var r=tt().Buffer;function e(l){r.isBuffer(l)||(l=r.from(l));for(var u=l.length/4|0,f=new Array(u),g=0;g<u;g++)f[g]=l.readUInt32BE(g*4);return f}function t(l){for(var u=0;u<l.length;l++)l[u]=0}function i(l,u,f,g,m){for(var N=f[0],A=f[1],_=f[2],E=f[3],x=l[0]^u[0],S=l[1]^u[1],D=l[2]^u[2],C=l[3]^u[3],j,k,P,Q,F=4,$=1;$<m;$++)j=N[x>>>24]^A[S>>>16&255]^_[D>>>8&255]^E[C&255]^u[F++],k=N[S>>>24]^A[D>>>16&255]^_[C>>>8&255]^E[x&255]^u[F++],P=N[D>>>24]^A[C>>>16&255]^_[x>>>8&255]^E[S&255]^u[F++],Q=N[C>>>24]^A[x>>>16&255]^_[S>>>8&255]^E[D&255]^u[F++],x=j,S=k,D=P,C=Q;return j=(g[x>>>24]<<24|g[S>>>16&255]<<16|g[D>>>8&255]<<8|g[C&255])^u[F++],k=(g[S>>>24]<<24|g[D>>>16&255]<<16|g[C>>>8&255]<<8|g[x&255])^u[F++],P=(g[D>>>24]<<24|g[C>>>16&255]<<16|g[x>>>8&255]<<8|g[S&255])^u[F++],Q=(g[C>>>24]<<24|g[x>>>16&255]<<16|g[S>>>8&255]<<8|g[D&255])^u[F++],j=j>>>0,k=k>>>0,P=P>>>0,Q=Q>>>0,[j,k,P,Q]}var s=[0,1,2,4,8,16,32,64,128,27,54],n=(function(){for(var l=new Array(256),u=0;u<256;u++)u<128?l[u]=u<<1:l[u]=u<<1^283;for(var f=[],g=[],m=[[],[],[],[]],N=[[],[],[],[]],A=0,_=0,E=0;E<256;++E){var x=_^_<<1^_<<2^_<<3^_<<4;x=x>>>8^x&255^99,f[A]=x,g[x]=A;var S=l[A],D=l[S],C=l[D],j=l[x]*257^x*16843008;m[0][A]=j<<24|j>>>8,m[1][A]=j<<16|j>>>16,m[2][A]=j<<8|j>>>24,m[3][A]=j,j=C*16843009^D*65537^S*257^A*16843008,N[0][x]=j<<24|j>>>8,N[1][x]=j<<16|j>>>16,N[2][x]=j<<8|j>>>24,N[3][x]=j,A===0?A=_=1:(A=S^l[l[l[C^S]]],_^=l[l[_]])}return{SBOX:f,INV_SBOX:g,SUB_MIX:m,INV_SUB_MIX:N}})();function c(l){this._key=e(l),this._reset()}return c.blockSize=16,c.keySize=256/8,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var l=this._key,u=l.length,f=u+6,g=(f+1)*4,m=[],N=0;N<u;N++)m[N]=l[N];for(N=u;N<g;N++){var A=m[N-1];N%u===0?(A=A<<8|A>>>24,A=n.SBOX[A>>>24]<<24|n.SBOX[A>>>16&255]<<16|n.SBOX[A>>>8&255]<<8|n.SBOX[A&255],A^=s[N/u|0]<<24):u>6&&N%u===4&&(A=n.SBOX[A>>>24]<<24|n.SBOX[A>>>16&255]<<16|n.SBOX[A>>>8&255]<<8|n.SBOX[A&255]),m[N]=m[N-u]^A}for(var _=[],E=0;E<g;E++){var x=g-E,S=m[x-(E%4?0:4)];E<4||x<=4?_[E]=S:_[E]=n.INV_SUB_MIX[0][n.SBOX[S>>>24]]^n.INV_SUB_MIX[1][n.SBOX[S>>>16&255]]^n.INV_SUB_MIX[2][n.SBOX[S>>>8&255]]^n.INV_SUB_MIX[3][n.SBOX[S&255]]}this._nRounds=f,this._keySchedule=m,this._invKeySchedule=_},c.prototype.encryptBlockRaw=function(l){return l=e(l),i(l,this._keySchedule,n.SUB_MIX,n.SBOX,this._nRounds)},c.prototype.encryptBlock=function(l){var u=this.encryptBlockRaw(l),f=r.allocUnsafe(16);return f.writeUInt32BE(u[0],0),f.writeUInt32BE(u[1],4),f.writeUInt32BE(u[2],8),f.writeUInt32BE(u[3],12),f},c.prototype.decryptBlock=function(l){l=e(l);var u=l[1];l[1]=l[3],l[3]=u;var f=i(l,this._invKeySchedule,n.INV_SUB_MIX,n.INV_SBOX,this._nRounds),g=r.allocUnsafe(16);return g.writeUInt32BE(f[0],0),g.writeUInt32BE(f[3],4),g.writeUInt32BE(f[2],8),g.writeUInt32BE(f[1],12),g},c.prototype.scrub=function(){t(this._keySchedule),t(this._invKeySchedule),t(this._key)},dg.AES=c,dg}var pg,nN;function sR(){if(nN)return pg;nN=1;var r=tt().Buffer,e=r.alloc(16,0);function t(n){return[n.readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)]}function i(n){var c=r.allocUnsafe(16);return c.writeUInt32BE(n[0]>>>0,0),c.writeUInt32BE(n[1]>>>0,4),c.writeUInt32BE(n[2]>>>0,8),c.writeUInt32BE(n[3]>>>0,12),c}function s(n){this.h=n,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}return s.prototype.ghash=function(n){for(var c=-1;++c<n.length;)this.state[c]^=n[c];this._multiply()},s.prototype._multiply=function(){for(var n=t(this.h),c=[0,0,0,0],l,u,f,g=-1;++g<128;){for(u=(this.state[~~(g/8)]&1<<7-g%8)!==0,u&&(c[0]^=n[0],c[1]^=n[1],c[2]^=n[2],c[3]^=n[3]),f=(n[3]&1)!==0,l=3;l>0;l--)n[l]=n[l]>>>1|(n[l-1]&1)<<31;n[0]=n[0]>>>1,f&&(n[0]=n[0]^225<<24)}this.state=i(c)},s.prototype.update=function(n){this.cache=r.concat([this.cache,n]);for(var c;this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},s.prototype.final=function(n,c){return this.cache.length&&this.ghash(r.concat([this.cache,e],16)),this.ghash(i([0,n,0,c])),this.state},pg=s,pg}var gg,sN;function wS(){if(sN)return gg;sN=1;var r=nd(),e=tt().Buffer,t=ga(),i=Ge(),s=sR(),n=Cl(),c=gS();function l(g,m){var N=0;g.length!==m.length&&N++;for(var A=Math.min(g.length,m.length),_=0;_<A;++_)N+=g[_]^m[_];return N}function u(g,m,N){if(m.length===12)return g._finID=e.concat([m,e.from([0,0,0,1])]),e.concat([m,e.from([0,0,0,2])]);var A=new s(N),_=m.length,E=_%16;A.update(m),E&&(E=16-E,A.update(e.alloc(E,0))),A.update(e.alloc(8,0));var x=_*8,S=e.alloc(8);S.writeUIntBE(x,0,8),A.update(S),g._finID=A.state;var D=e.from(g._finID);return c(D),D}function f(g,m,N,A){t.call(this);var _=e.alloc(4,0);this._cipher=new r.AES(m);var E=this._cipher.encryptBlock(_);this._ghash=new s(E),N=u(this,N,E),this._prev=e.from(N),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=A,this._alen=0,this._len=0,this._mode=g,this._authTag=null,this._called=!1}return i(f,t),f.prototype._update=function(g){if(!this._called&&this._alen){var m=16-this._alen%16;m<16&&(m=e.alloc(m,0),this._ghash.update(m))}this._called=!0;var N=this._mode.encrypt(this,g);return this._decrypt?this._ghash.update(g):this._ghash.update(N),this._len+=g.length,N},f.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var g=n(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&l(g,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=g,this._cipher.scrub()},f.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},f.prototype.setAuthTag=function(m){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=m},f.prototype.setAAD=function(m){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(m),this._alen+=m.length},gg=f,gg}var yg,aN;function mS(){if(aN)return yg;aN=1;var r=nd(),e=tt().Buffer,t=ga(),i=Ge();function s(n,c,l,u){t.call(this),this._cipher=new r.AES(c),this._prev=e.from(l),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=u,this._mode=n}return i(s,t),s.prototype._update=function(n){return this._mode.encrypt(this,n,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},yg=s,yg}var wg,oN;function sd(){if(oN)return wg;oN=1;var r=tt().Buffer,e=gv();function t(i,s,n,c){if(r.isBuffer(i)||(i=r.from(i,"binary")),s&&(r.isBuffer(s)||(s=r.from(s,"binary")),s.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var l=n/8,u=r.alloc(l),f=r.alloc(c||0),g=r.alloc(0);l>0||c>0;){var m=new e;m.update(g),m.update(i),s&&m.update(s),g=m.digest();var N=0;if(l>0){var A=u.length-l;N=Math.min(l,g.length),g.copy(u,A,0,N),l-=N}if(N<g.length&&c>0){var _=f.length-c,E=Math.min(c,g.length-N);g.copy(f,_,N,N+E),c-=E}}return g.fill(0),{key:u,iv:f}}return wg=t,wg}var cN;function aR(){if(cN)return mu;cN=1;var r=bv(),e=wS(),t=tt().Buffer,i=mS(),s=ga(),n=nd(),c=sd(),l=Ge();function u(A,_,E){s.call(this),this._cache=new g,this._cipher=new n.AES(_),this._prev=t.from(E),this._mode=A,this._autopadding=!0}l(u,s),u.prototype._update=function(A){this._cache.add(A);for(var _,E,x=[];_=this._cache.get();)E=this._mode.encrypt(this,_),x.push(E);return t.concat(x)};var f=t.alloc(16,16);u.prototype._final=function(){var A=this._cache.flush();if(this._autopadding)return A=this._mode.encrypt(this,A),this._cipher.scrub(),A;if(!A.equals(f))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(A){return this._autopadding=!!A,this};function g(){this.cache=t.allocUnsafe(0)}g.prototype.add=function(A){this.cache=t.concat([this.cache,A])},g.prototype.get=function(){if(this.cache.length>15){var A=this.cache.slice(0,16);return this.cache=this.cache.slice(16),A}return null},g.prototype.flush=function(){for(var A=16-this.cache.length,_=t.allocUnsafe(A),E=-1;++E<A;)_.writeUInt8(A,E);return t.concat([this.cache,_])};function m(A,_,E){var x=r[A.toLowerCase()];if(!x)throw new TypeError("invalid suite type");if(typeof _=="string"&&(_=t.from(_)),_.length!==x.key/8)throw new TypeError("invalid key length "+_.length);if(typeof E=="string"&&(E=t.from(E)),x.mode!=="GCM"&&E.length!==x.iv)throw new TypeError("invalid iv length "+E.length);return x.type==="stream"?new i(x.module,_,E):x.type==="auth"?new e(x.module,_,E):new u(x.module,_,E)}function N(A,_){var E=r[A.toLowerCase()];if(!E)throw new TypeError("invalid suite type");var x=c(_,!1,E.key,E.iv);return m(A,x.key,x.iv)}return mu.createCipheriv=m,mu.createCipher=N,mu}var Mu={},hN;function oR(){if(hN)return Mu;hN=1;var r=wS(),e=tt().Buffer,t=bv(),i=mS(),s=ga(),n=nd(),c=sd(),l=Ge();function u(A,_,E){s.call(this),this._cache=new f,this._last=void 0,this._cipher=new n.AES(_),this._prev=e.from(E),this._mode=A,this._autopadding=!0}l(u,s),u.prototype._update=function(A){this._cache.add(A);for(var _,E,x=[];_=this._cache.get(this._autopadding);)E=this._mode.decrypt(this,_),x.push(E);return e.concat(x)},u.prototype._final=function(){var A=this._cache.flush();if(this._autopadding)return g(this._mode.decrypt(this,A));if(A)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(A){return this._autopadding=!!A,this};function f(){this.cache=e.allocUnsafe(0)}f.prototype.add=function(A){this.cache=e.concat([this.cache,A])},f.prototype.get=function(A){var _;if(A){if(this.cache.length>16)return _=this.cache.slice(0,16),this.cache=this.cache.slice(16),_}else if(this.cache.length>=16)return _=this.cache.slice(0,16),this.cache=this.cache.slice(16),_;return null},f.prototype.flush=function(){if(this.cache.length)return this.cache};function g(A){var _=A[15];if(_<1||_>16)throw new Error("unable to decrypt data");for(var E=-1;++E<_;)if(A[E+(16-_)]!==_)throw new Error("unable to decrypt data");if(_!==16)return A.slice(0,16-_)}function m(A,_,E){var x=t[A.toLowerCase()];if(!x)throw new TypeError("invalid suite type");if(typeof E=="string"&&(E=e.from(E)),x.mode!=="GCM"&&E.length!==x.iv)throw new TypeError("invalid iv length "+E.length);if(typeof _=="string"&&(_=e.from(_)),_.length!==x.key/8)throw new TypeError("invalid key length "+_.length);return x.type==="stream"?new i(x.module,_,E,!0):x.type==="auth"?new r(x.module,_,E,!0):new u(x.module,_,E)}function N(A,_){var E=t[A.toLowerCase()];if(!E)throw new TypeError("invalid suite type");var x=c(_,!1,E.key,E.iv);return m(A,x.key,x.iv)}return Mu.createDecipher=N,Mu.createDecipheriv=m,Mu}var lN;function Mv(){if(lN)return Nn;lN=1;var r=aR(),e=oR(),t=yS;function i(){return Object.keys(t)}return Nn.createCipher=Nn.Cipher=r.createCipher,Nn.createCipheriv=Nn.Cipheriv=r.createCipheriv,Nn.createDecipher=Nn.Decipher=e.createDecipher,Nn.createDecipheriv=Nn.Decipheriv=e.createDecipheriv,Nn.listCiphers=Nn.getCiphers=i,Nn}var mg={},uN;function cR(){return uN||(uN=1,(function(r){r["des-ecb"]={key:8,iv:0},r["des-cbc"]=r.des={key:8,iv:8},r["des-ede3-cbc"]=r.des3={key:24,iv:8},r["des-ede3"]={key:24,iv:0},r["des-ede-cbc"]={key:16,iv:8},r["des-ede"]={key:16,iv:0}})(mg)),mg}var fN;function hR(){if(fN)return Mn;fN=1;var r=ZP(),e=Mv(),t=bv(),i=cR(),s=sd();function n(g,m){g=g.toLowerCase();var N,A;if(t[g])N=t[g].key,A=t[g].iv;else if(i[g])N=i[g].key*8,A=i[g].iv;else throw new TypeError("invalid suite type");var _=s(m,!1,N,A);return l(g,_.key,_.iv)}function c(g,m){g=g.toLowerCase();var N,A;if(t[g])N=t[g].key,A=t[g].iv;else if(i[g])N=i[g].key*8,A=i[g].iv;else throw new TypeError("invalid suite type");var _=s(m,!1,N,A);return u(g,_.key,_.iv)}function l(g,m,N){if(g=g.toLowerCase(),t[g])return e.createCipheriv(g,m,N);if(i[g])return new r({key:m,iv:N,mode:g});throw new TypeError("invalid suite type")}function u(g,m,N){if(g=g.toLowerCase(),t[g])return e.createDecipheriv(g,m,N);if(i[g])return new r({key:m,iv:N,mode:g,decrypt:!0});throw new TypeError("invalid suite type")}function f(){return Object.keys(i).concat(e.getCiphers())}return Mn.createCipher=Mn.Cipher=n,Mn.createCipheriv=Mn.Cipheriv=l,Mn.createDecipher=Mn.Decipher=c,Mn.createDecipheriv=Mn.Decipheriv=u,Mn.listCiphers=Mn.getCiphers=f,Mn}var Aa={},sf={exports:{}},lR=sf.exports,dN;function vS(){return dN||(dN=1,(function(r){(function(e,t){function i(M,a){if(!M)throw new Error(a||"Assertion failed")}function s(M,a){M.super_=a;var h=function(){};h.prototype=a.prototype,M.prototype=new h,M.prototype.constructor=M}function n(M,a,h){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(M||0,a||10,h||"be"))}typeof e=="object"?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=ki().Buffer}catch{}n.isBN=function(a){return a instanceof n?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===n.wordSize&&Array.isArray(a.words)},n.max=function(a,h){return a.cmp(h)>0?a:h},n.min=function(a,h){return a.cmp(h)<0?a:h},n.prototype._init=function(a,h,d){if(typeof a=="number")return this._initNumber(a,h,d);if(typeof a=="object")return this._initArray(a,h,d);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var p=0;a[0]==="-"&&(p++,this.negative=1),p<a.length&&(h===16?this._parseHex(a,p,d):(this._parseBase(a,h,p),d==="le"&&this._initArray(this.toArray(),h,d)))},n.prototype._initNumber=function(a,h,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),h,d)},n.prototype._initArray=function(a,h,d){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,b,I=0;if(d==="be")for(p=a.length-1,w=0;p>=0;p-=3)b=a[p]|a[p-1]<<8|a[p-2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);else if(d==="le")for(p=0,w=0;p<a.length;p+=3)b=a[p]|a[p+1]<<8|a[p+2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);return this.strip()};function l(M,a){var h=M.charCodeAt(a);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function u(M,a,h){var d=l(M,h);return h-1>=a&&(d|=l(M,h-1)<<4),d}n.prototype._parseHex=function(a,h,d){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,b=0,I;if(d==="be")for(p=a.length-1;p>=h;p-=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8;else{var y=a.length-h;for(p=y%2===0?h+1:h;p<a.length;p+=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8}this.strip()};function f(M,a,h,d){for(var p=0,w=Math.min(M.length,h),b=a;b<w;b++){var I=M.charCodeAt(b)-48;p*=d,I>=49?p+=I-49+10:I>=17?p+=I-17+10:p+=I}return p}n.prototype._parseBase=function(a,h,d){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=h)p++;p--,w=w/h|0;for(var b=a.length-d,I=b%p,y=Math.min(b,b-I)+d,o=0,v=d;v<y;v+=p)o=f(a,v,v+p,h),this.imuln(w),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(I!==0){var R=1;for(o=f(a,v,a.length,h),v=0;v<I;v++)R*=h;this.imuln(R),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},n.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red},n.prototype.clone=function(){var a=new n(null);return this.copy(a),a},n.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(a,h){a=a||10,h=h|0||1;var d;if(a===16||a==="hex"){d="";for(var p=0,w=0,b=0;b<this.length;b++){var I=this.words[b],y=((I<<p|w)&16777215).toString(16);w=I>>>24-p&16777215,p+=2,p>=26&&(p-=26,b--),w!==0||b!==this.length-1?d=g[6-y.length]+y+d:d=y+d}for(w!==0&&(d=w.toString(16)+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var o=m[a],v=N[a];d="";var R=this.clone();for(R.negative=0;!R.isZero();){var L=R.modn(v).toString(a);R=R.idivn(v),R.isZero()?d=L+d:d=g[o-L.length]+L+d}for(this.isZero()&&(d="0"+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(a,h){return i(typeof c<"u"),this.toArrayLike(c,a,h)},n.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)},n.prototype.toArrayLike=function(a,h,d){var p=this.byteLength(),w=d||Math.max(1,p);i(p<=w,"byte array longer than desired length"),i(w>0,"Requested array length <= 0"),this.strip();var b=h==="le",I=new a(w),y,o,v=this.clone();if(b){for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[o]=y;for(;o<w;o++)I[o]=0}else{for(o=0;o<w-p;o++)I[o]=0;for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[w-o-1]=y}return I},Math.clz32?n.prototype._countBits=function(a){return 32-Math.clz32(a)}:n.prototype._countBits=function(a){var h=a,d=0;return h>=4096&&(d+=13,h>>>=13),h>=64&&(d+=7,h>>>=7),h>=8&&(d+=4,h>>>=4),h>=2&&(d+=2,h>>>=2),d+h},n.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,d=0;return(h&8191)===0&&(d+=13,h>>>=13),(h&127)===0&&(d+=7,h>>>=7),(h&15)===0&&(d+=4,h>>>=4),(h&3)===0&&(d+=2,h>>>=2),(h&1)===0&&d++,d},n.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function A(M){for(var a=new Array(M.bitLength()),h=0;h<a.length;h++){var d=h/26|0,p=h%26;a[h]=(M.words[d]&1<<p)>>>p}return a}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var d=this._zeroBits(this.words[h]);if(a+=d,d!==26)break}return a},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},n.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this.strip()},n.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},n.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},n.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},n.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var d=0;d<h.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=h.length,this.strip()},n.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},n.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},n.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},n.prototype.iuxor=function(a){var h,d;this.length>a.length?(h=this,d=a):(h=a,d=this);for(var p=0;p<d.length;p++)this.words[p]=h.words[p]^d.words[p];if(this!==h)for(;p<h.length;p++)this.words[p]=h.words[p];return this.length=h.length,this.strip()},n.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},n.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},n.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},n.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,d=a%26;this._expand(h),d>0&&h--;for(var p=0;p<h;p++)this.words[p]=~this.words[p]&67108863;return d>0&&(this.words[p]=~this.words[p]&67108863>>26-d),this.strip()},n.prototype.notn=function(a){return this.clone().inotn(a)},n.prototype.setn=function(a,h){i(typeof a=="number"&&a>=0);var d=a/26|0,p=a%26;return this._expand(d+1),h?this.words[d]=this.words[d]|1<<p:this.words[d]=this.words[d]&~(1<<p),this.strip()},n.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var d,p;this.length>a.length?(d=this,p=a):(d=a,p=this);for(var w=0,b=0;b<p.length;b++)h=(d.words[b]|0)+(p.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;for(;w!==0&&b<d.length;b++)h=(d.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;if(this.length=d.length,w!==0)this.words[this.length]=w,this.length++;else if(d!==this)for(;b<d.length;b++)this.words[b]=d.words[b];return this},n.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},n.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;d>0?(p=this,w=a):(p=a,w=this);for(var b=0,I=0;I<w.length;I++)h=(p.words[I]|0)-(w.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;for(;b!==0&&I<p.length;I++)h=(p.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;if(b===0&&I<p.length&&p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this.length=Math.max(this.length,I),p!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(a){return this.clone().isub(a)};function _(M,a,h){h.negative=a.negative^M.negative;var d=M.length+a.length|0;h.length=d,d=d-1|0;var p=M.words[0]|0,w=a.words[0]|0,b=p*w,I=b&67108863,y=b/67108864|0;h.words[0]=I;for(var o=1;o<d;o++){for(var v=y>>>26,R=y&67108863,L=Math.min(o,a.length-1),z=Math.max(0,o-M.length+1);z<=L;z++){var q=o-z|0;p=M.words[q]|0,w=a.words[z]|0,b=p*w+R,v+=b/67108864|0,R=b&67108863}h.words[o]=R|0,y=v|0}return y!==0?h.words[o]=y|0:h.length--,h.strip()}var E=function(a,h,d){var p=a.words,w=h.words,b=d.words,I=0,y,o,v,R=p[0]|0,L=R&8191,z=R>>>13,q=p[1]|0,Y=q&8191,T=q>>>13,O=p[2]|0,B=O&8191,W=O>>>13,V=p[3]|0,U=V&8191,H=V>>>13,de=p[4]|0,ee=de&8191,J=de>>>13,Qe=p[5]|0,oe=Qe&8191,K=Qe>>>13,et=p[6]|0,re=et&8191,ae=et>>>13,Ke=p[7]|0,se=Ke&8191,ce=Ke>>>13,Dt=p[8]|0,he=Dt&8191,le=Dt>>>13,Cr=p[9]|0,ue=Cr&8191,ve=Cr>>>13,Br=w[0]|0,_e=Br&8191,be=Br>>>13,Or=w[1]|0,Me=Or&8191,Ne=Or>>>13,Vr=w[2]|0,fe=Vr&8191,Ie=Vr>>>13,Fr=w[3]|0,Ee=Fr&8191,ge=Fr>>>13,Er=w[4]|0,ye=Er&8191,we=Er>>>13,Pr=w[5]|0,pe=Pr&8191,De=Pr>>>13,Hr=w[6]|0,Se=Hr&8191,xe=Hr>>>13,Zr=w[7]|0,Ae=Zr&8191,me=Zr>>>13,tr=w[8]|0,Te=tr&8191,je=tr>>>13,Gr=w[9]|0,Ce=Gr&8191,Oe=Gr>>>13;d.negative=a.negative^h.negative,d.length=19,y=Math.imul(L,_e),o=Math.imul(L,be),o=o+Math.imul(z,_e)|0,v=Math.imul(z,be);var mt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,y=Math.imul(Y,_e),o=Math.imul(Y,be),o=o+Math.imul(T,_e)|0,v=Math.imul(T,be),y=y+Math.imul(L,Me)|0,o=o+Math.imul(L,Ne)|0,o=o+Math.imul(z,Me)|0,v=v+Math.imul(z,Ne)|0;var rr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,y=Math.imul(B,_e),o=Math.imul(B,be),o=o+Math.imul(W,_e)|0,v=Math.imul(W,be),y=y+Math.imul(Y,Me)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(T,Me)|0,v=v+Math.imul(T,Ne)|0,y=y+Math.imul(L,fe)|0,o=o+Math.imul(L,Ie)|0,o=o+Math.imul(z,fe)|0,v=v+Math.imul(z,Ie)|0;var ir=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul(U,_e),o=Math.imul(U,be),o=o+Math.imul(H,_e)|0,v=Math.imul(H,be),y=y+Math.imul(B,Me)|0,o=o+Math.imul(B,Ne)|0,o=o+Math.imul(W,Me)|0,v=v+Math.imul(W,Ne)|0,y=y+Math.imul(Y,fe)|0,o=o+Math.imul(Y,Ie)|0,o=o+Math.imul(T,fe)|0,v=v+Math.imul(T,Ie)|0,y=y+Math.imul(L,Ee)|0,o=o+Math.imul(L,ge)|0,o=o+Math.imul(z,Ee)|0,v=v+Math.imul(z,ge)|0;var nr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(ee,_e),o=Math.imul(ee,be),o=o+Math.imul(J,_e)|0,v=Math.imul(J,be),y=y+Math.imul(U,Me)|0,o=o+Math.imul(U,Ne)|0,o=o+Math.imul(H,Me)|0,v=v+Math.imul(H,Ne)|0,y=y+Math.imul(B,fe)|0,o=o+Math.imul(B,Ie)|0,o=o+Math.imul(W,fe)|0,v=v+Math.imul(W,Ie)|0,y=y+Math.imul(Y,Ee)|0,o=o+Math.imul(Y,ge)|0,o=o+Math.imul(T,Ee)|0,v=v+Math.imul(T,ge)|0,y=y+Math.imul(L,ye)|0,o=o+Math.imul(L,we)|0,o=o+Math.imul(z,ye)|0,v=v+Math.imul(z,we)|0;var sr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(oe,_e),o=Math.imul(oe,be),o=o+Math.imul(K,_e)|0,v=Math.imul(K,be),y=y+Math.imul(ee,Me)|0,o=o+Math.imul(ee,Ne)|0,o=o+Math.imul(J,Me)|0,v=v+Math.imul(J,Ne)|0,y=y+Math.imul(U,fe)|0,o=o+Math.imul(U,Ie)|0,o=o+Math.imul(H,fe)|0,v=v+Math.imul(H,Ie)|0,y=y+Math.imul(B,Ee)|0,o=o+Math.imul(B,ge)|0,o=o+Math.imul(W,Ee)|0,v=v+Math.imul(W,ge)|0,y=y+Math.imul(Y,ye)|0,o=o+Math.imul(Y,we)|0,o=o+Math.imul(T,ye)|0,v=v+Math.imul(T,we)|0,y=y+Math.imul(L,pe)|0,o=o+Math.imul(L,De)|0,o=o+Math.imul(z,pe)|0,v=v+Math.imul(z,De)|0;var ar=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ar>>>26)|0,ar&=67108863,y=Math.imul(re,_e),o=Math.imul(re,be),o=o+Math.imul(ae,_e)|0,v=Math.imul(ae,be),y=y+Math.imul(oe,Me)|0,o=o+Math.imul(oe,Ne)|0,o=o+Math.imul(K,Me)|0,v=v+Math.imul(K,Ne)|0,y=y+Math.imul(ee,fe)|0,o=o+Math.imul(ee,Ie)|0,o=o+Math.imul(J,fe)|0,v=v+Math.imul(J,Ie)|0,y=y+Math.imul(U,Ee)|0,o=o+Math.imul(U,ge)|0,o=o+Math.imul(H,Ee)|0,v=v+Math.imul(H,ge)|0,y=y+Math.imul(B,ye)|0,o=o+Math.imul(B,we)|0,o=o+Math.imul(W,ye)|0,v=v+Math.imul(W,we)|0,y=y+Math.imul(Y,pe)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(T,pe)|0,v=v+Math.imul(T,De)|0,y=y+Math.imul(L,Se)|0,o=o+Math.imul(L,xe)|0,o=o+Math.imul(z,Se)|0,v=v+Math.imul(z,xe)|0;var St=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(St>>>26)|0,St&=67108863,y=Math.imul(se,_e),o=Math.imul(se,be),o=o+Math.imul(ce,_e)|0,v=Math.imul(ce,be),y=y+Math.imul(re,Me)|0,o=o+Math.imul(re,Ne)|0,o=o+Math.imul(ae,Me)|0,v=v+Math.imul(ae,Ne)|0,y=y+Math.imul(oe,fe)|0,o=o+Math.imul(oe,Ie)|0,o=o+Math.imul(K,fe)|0,v=v+Math.imul(K,Ie)|0,y=y+Math.imul(ee,Ee)|0,o=o+Math.imul(ee,ge)|0,o=o+Math.imul(J,Ee)|0,v=v+Math.imul(J,ge)|0,y=y+Math.imul(U,ye)|0,o=o+Math.imul(U,we)|0,o=o+Math.imul(H,ye)|0,v=v+Math.imul(H,we)|0,y=y+Math.imul(B,pe)|0,o=o+Math.imul(B,De)|0,o=o+Math.imul(W,pe)|0,v=v+Math.imul(W,De)|0,y=y+Math.imul(Y,Se)|0,o=o+Math.imul(Y,xe)|0,o=o+Math.imul(T,Se)|0,v=v+Math.imul(T,xe)|0,y=y+Math.imul(L,Ae)|0,o=o+Math.imul(L,me)|0,o=o+Math.imul(z,Ae)|0,v=v+Math.imul(z,me)|0;var or=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(he,_e),o=Math.imul(he,be),o=o+Math.imul(le,_e)|0,v=Math.imul(le,be),y=y+Math.imul(se,Me)|0,o=o+Math.imul(se,Ne)|0,o=o+Math.imul(ce,Me)|0,v=v+Math.imul(ce,Ne)|0,y=y+Math.imul(re,fe)|0,o=o+Math.imul(re,Ie)|0,o=o+Math.imul(ae,fe)|0,v=v+Math.imul(ae,Ie)|0,y=y+Math.imul(oe,Ee)|0,o=o+Math.imul(oe,ge)|0,o=o+Math.imul(K,Ee)|0,v=v+Math.imul(K,ge)|0,y=y+Math.imul(ee,ye)|0,o=o+Math.imul(ee,we)|0,o=o+Math.imul(J,ye)|0,v=v+Math.imul(J,we)|0,y=y+Math.imul(U,pe)|0,o=o+Math.imul(U,De)|0,o=o+Math.imul(H,pe)|0,v=v+Math.imul(H,De)|0,y=y+Math.imul(B,Se)|0,o=o+Math.imul(B,xe)|0,o=o+Math.imul(W,Se)|0,v=v+Math.imul(W,xe)|0,y=y+Math.imul(Y,Ae)|0,o=o+Math.imul(Y,me)|0,o=o+Math.imul(T,Ae)|0,v=v+Math.imul(T,me)|0,y=y+Math.imul(L,Te)|0,o=o+Math.imul(L,je)|0,o=o+Math.imul(z,Te)|0,v=v+Math.imul(z,je)|0;var cr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(cr>>>26)|0,cr&=67108863,y=Math.imul(ue,_e),o=Math.imul(ue,be),o=o+Math.imul(ve,_e)|0,v=Math.imul(ve,be),y=y+Math.imul(he,Me)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(le,Me)|0,v=v+Math.imul(le,Ne)|0,y=y+Math.imul(se,fe)|0,o=o+Math.imul(se,Ie)|0,o=o+Math.imul(ce,fe)|0,v=v+Math.imul(ce,Ie)|0,y=y+Math.imul(re,Ee)|0,o=o+Math.imul(re,ge)|0,o=o+Math.imul(ae,Ee)|0,v=v+Math.imul(ae,ge)|0,y=y+Math.imul(oe,ye)|0,o=o+Math.imul(oe,we)|0,o=o+Math.imul(K,ye)|0,v=v+Math.imul(K,we)|0,y=y+Math.imul(ee,pe)|0,o=o+Math.imul(ee,De)|0,o=o+Math.imul(J,pe)|0,v=v+Math.imul(J,De)|0,y=y+Math.imul(U,Se)|0,o=o+Math.imul(U,xe)|0,o=o+Math.imul(H,Se)|0,v=v+Math.imul(H,xe)|0,y=y+Math.imul(B,Ae)|0,o=o+Math.imul(B,me)|0,o=o+Math.imul(W,Ae)|0,v=v+Math.imul(W,me)|0,y=y+Math.imul(Y,Te)|0,o=o+Math.imul(Y,je)|0,o=o+Math.imul(T,Te)|0,v=v+Math.imul(T,je)|0,y=y+Math.imul(L,Ce)|0,o=o+Math.imul(L,Oe)|0,o=o+Math.imul(z,Ce)|0,v=v+Math.imul(z,Oe)|0;var hr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(hr>>>26)|0,hr&=67108863,y=Math.imul(ue,Me),o=Math.imul(ue,Ne),o=o+Math.imul(ve,Me)|0,v=Math.imul(ve,Ne),y=y+Math.imul(he,fe)|0,o=o+Math.imul(he,Ie)|0,o=o+Math.imul(le,fe)|0,v=v+Math.imul(le,Ie)|0,y=y+Math.imul(se,Ee)|0,o=o+Math.imul(se,ge)|0,o=o+Math.imul(ce,Ee)|0,v=v+Math.imul(ce,ge)|0,y=y+Math.imul(re,ye)|0,o=o+Math.imul(re,we)|0,o=o+Math.imul(ae,ye)|0,v=v+Math.imul(ae,we)|0,y=y+Math.imul(oe,pe)|0,o=o+Math.imul(oe,De)|0,o=o+Math.imul(K,pe)|0,v=v+Math.imul(K,De)|0,y=y+Math.imul(ee,Se)|0,o=o+Math.imul(ee,xe)|0,o=o+Math.imul(J,Se)|0,v=v+Math.imul(J,xe)|0,y=y+Math.imul(U,Ae)|0,o=o+Math.imul(U,me)|0,o=o+Math.imul(H,Ae)|0,v=v+Math.imul(H,me)|0,y=y+Math.imul(B,Te)|0,o=o+Math.imul(B,je)|0,o=o+Math.imul(W,Te)|0,v=v+Math.imul(W,je)|0,y=y+Math.imul(Y,Ce)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(T,Ce)|0,v=v+Math.imul(T,Oe)|0;var lr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,y=Math.imul(ue,fe),o=Math.imul(ue,Ie),o=o+Math.imul(ve,fe)|0,v=Math.imul(ve,Ie),y=y+Math.imul(he,Ee)|0,o=o+Math.imul(he,ge)|0,o=o+Math.imul(le,Ee)|0,v=v+Math.imul(le,ge)|0,y=y+Math.imul(se,ye)|0,o=o+Math.imul(se,we)|0,o=o+Math.imul(ce,ye)|0,v=v+Math.imul(ce,we)|0,y=y+Math.imul(re,pe)|0,o=o+Math.imul(re,De)|0,o=o+Math.imul(ae,pe)|0,v=v+Math.imul(ae,De)|0,y=y+Math.imul(oe,Se)|0,o=o+Math.imul(oe,xe)|0,o=o+Math.imul(K,Se)|0,v=v+Math.imul(K,xe)|0,y=y+Math.imul(ee,Ae)|0,o=o+Math.imul(ee,me)|0,o=o+Math.imul(J,Ae)|0,v=v+Math.imul(J,me)|0,y=y+Math.imul(U,Te)|0,o=o+Math.imul(U,je)|0,o=o+Math.imul(H,Te)|0,v=v+Math.imul(H,je)|0,y=y+Math.imul(B,Ce)|0,o=o+Math.imul(B,Oe)|0,o=o+Math.imul(W,Ce)|0,v=v+Math.imul(W,Oe)|0;var ur=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ur>>>26)|0,ur&=67108863,y=Math.imul(ue,Ee),o=Math.imul(ue,ge),o=o+Math.imul(ve,Ee)|0,v=Math.imul(ve,ge),y=y+Math.imul(he,ye)|0,o=o+Math.imul(he,we)|0,o=o+Math.imul(le,ye)|0,v=v+Math.imul(le,we)|0,y=y+Math.imul(se,pe)|0,o=o+Math.imul(se,De)|0,o=o+Math.imul(ce,pe)|0,v=v+Math.imul(ce,De)|0,y=y+Math.imul(re,Se)|0,o=o+Math.imul(re,xe)|0,o=o+Math.imul(ae,Se)|0,v=v+Math.imul(ae,xe)|0,y=y+Math.imul(oe,Ae)|0,o=o+Math.imul(oe,me)|0,o=o+Math.imul(K,Ae)|0,v=v+Math.imul(K,me)|0,y=y+Math.imul(ee,Te)|0,o=o+Math.imul(ee,je)|0,o=o+Math.imul(J,Te)|0,v=v+Math.imul(J,je)|0,y=y+Math.imul(U,Ce)|0,o=o+Math.imul(U,Oe)|0,o=o+Math.imul(H,Ce)|0,v=v+Math.imul(H,Oe)|0;var Ut=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,y=Math.imul(ue,ye),o=Math.imul(ue,we),o=o+Math.imul(ve,ye)|0,v=Math.imul(ve,we),y=y+Math.imul(he,pe)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(le,pe)|0,v=v+Math.imul(le,De)|0,y=y+Math.imul(se,Se)|0,o=o+Math.imul(se,xe)|0,o=o+Math.imul(ce,Se)|0,v=v+Math.imul(ce,xe)|0,y=y+Math.imul(re,Ae)|0,o=o+Math.imul(re,me)|0,o=o+Math.imul(ae,Ae)|0,v=v+Math.imul(ae,me)|0,y=y+Math.imul(oe,Te)|0,o=o+Math.imul(oe,je)|0,o=o+Math.imul(K,Te)|0,v=v+Math.imul(K,je)|0,y=y+Math.imul(ee,Ce)|0,o=o+Math.imul(ee,Oe)|0,o=o+Math.imul(J,Ce)|0,v=v+Math.imul(J,Oe)|0;var fr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(fr>>>26)|0,fr&=67108863,y=Math.imul(ue,pe),o=Math.imul(ue,De),o=o+Math.imul(ve,pe)|0,v=Math.imul(ve,De),y=y+Math.imul(he,Se)|0,o=o+Math.imul(he,xe)|0,o=o+Math.imul(le,Se)|0,v=v+Math.imul(le,xe)|0,y=y+Math.imul(se,Ae)|0,o=o+Math.imul(se,me)|0,o=o+Math.imul(ce,Ae)|0,v=v+Math.imul(ce,me)|0,y=y+Math.imul(re,Te)|0,o=o+Math.imul(re,je)|0,o=o+Math.imul(ae,Te)|0,v=v+Math.imul(ae,je)|0,y=y+Math.imul(oe,Ce)|0,o=o+Math.imul(oe,Oe)|0,o=o+Math.imul(K,Ce)|0,v=v+Math.imul(K,Oe)|0;var dr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,y=Math.imul(ue,Se),o=Math.imul(ue,xe),o=o+Math.imul(ve,Se)|0,v=Math.imul(ve,xe),y=y+Math.imul(he,Ae)|0,o=o+Math.imul(he,me)|0,o=o+Math.imul(le,Ae)|0,v=v+Math.imul(le,me)|0,y=y+Math.imul(se,Te)|0,o=o+Math.imul(se,je)|0,o=o+Math.imul(ce,Te)|0,v=v+Math.imul(ce,je)|0,y=y+Math.imul(re,Ce)|0,o=o+Math.imul(re,Oe)|0,o=o+Math.imul(ae,Ce)|0,v=v+Math.imul(ae,Oe)|0;var vt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(vt>>>26)|0,vt&=67108863,y=Math.imul(ue,Ae),o=Math.imul(ue,me),o=o+Math.imul(ve,Ae)|0,v=Math.imul(ve,me),y=y+Math.imul(he,Te)|0,o=o+Math.imul(he,je)|0,o=o+Math.imul(le,Te)|0,v=v+Math.imul(le,je)|0,y=y+Math.imul(se,Ce)|0,o=o+Math.imul(se,Oe)|0,o=o+Math.imul(ce,Ce)|0,v=v+Math.imul(ce,Oe)|0;var pr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,y=Math.imul(ue,Te),o=Math.imul(ue,je),o=o+Math.imul(ve,Te)|0,v=Math.imul(ve,je),y=y+Math.imul(he,Ce)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(le,Ce)|0,v=v+Math.imul(le,Oe)|0;var gr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(gr>>>26)|0,gr&=67108863,y=Math.imul(ue,Ce),o=Math.imul(ue,Oe),o=o+Math.imul(ve,Ce)|0,v=Math.imul(ve,Oe);var yr=(I+y|0)+((o&8191)<<13)|0;return I=(v+(o>>>13)|0)+(yr>>>26)|0,yr&=67108863,b[0]=mt,b[1]=rr,b[2]=ir,b[3]=nr,b[4]=sr,b[5]=ar,b[6]=St,b[7]=or,b[8]=cr,b[9]=hr,b[10]=lr,b[11]=ur,b[12]=Ut,b[13]=fr,b[14]=dr,b[15]=vt,b[16]=pr,b[17]=gr,b[18]=yr,I!==0&&(b[19]=I,d.length++),d};Math.imul||(E=_);function x(M,a,h){h.negative=a.negative^M.negative,h.length=M.length+a.length;for(var d=0,p=0,w=0;w<h.length-1;w++){var b=p;p=0;for(var I=d&67108863,y=Math.min(w,a.length-1),o=Math.max(0,w-M.length+1);o<=y;o++){var v=w-o,R=M.words[v]|0,L=a.words[o]|0,z=R*L,q=z&67108863;b=b+(z/67108864|0)|0,q=q+I|0,I=q&67108863,b=b+(q>>>26)|0,p+=b>>>26,b&=67108863}h.words[w]=I,d=b,b=p}return d!==0?h.words[w]=d:h.length--,h.strip()}function S(M,a,h){var d=new D;return d.mulp(M,a,h)}n.prototype.mulTo=function(a,h){var d,p=this.length+a.length;return this.length===10&&a.length===10?d=E(this,a,h):p<63?d=_(this,a,h):p<1024?d=x(this,a,h):d=S(this,a,h),d};function D(M,a){this.x=M,this.y=a}D.prototype.makeRBT=function(a){for(var h=new Array(a),d=n.prototype._countBits(a)-1,p=0;p<a;p++)h[p]=this.revBin(p,d,a);return h},D.prototype.revBin=function(a,h,d){if(a===0||a===d-1)return a;for(var p=0,w=0;w<h;w++)p|=(a&1)<<h-w-1,a>>=1;return p},D.prototype.permute=function(a,h,d,p,w,b){for(var I=0;I<b;I++)p[I]=h[a[I]],w[I]=d[a[I]]},D.prototype.transform=function(a,h,d,p,w,b){this.permute(b,a,h,d,p,w);for(var I=1;I<w;I<<=1)for(var y=I<<1,o=Math.cos(2*Math.PI/y),v=Math.sin(2*Math.PI/y),R=0;R<w;R+=y)for(var L=o,z=v,q=0;q<I;q++){var Y=d[R+q],T=p[R+q],O=d[R+q+I],B=p[R+q+I],W=L*O-z*B;B=L*B+z*O,O=W,d[R+q]=Y+O,p[R+q]=T+B,d[R+q+I]=Y-O,p[R+q+I]=T-B,q!==y&&(W=o*L-v*z,z=o*z+v*L,L=W)}},D.prototype.guessLen13b=function(a,h){var d=Math.max(h,a)|1,p=d&1,w=0;for(d=d/2|0;d;d=d>>>1)w++;return 1<<w+1+p},D.prototype.conjugate=function(a,h,d){if(!(d<=1))for(var p=0;p<d/2;p++){var w=a[p];a[p]=a[d-p-1],a[d-p-1]=w,w=h[p],h[p]=-h[d-p-1],h[d-p-1]=-w}},D.prototype.normalize13b=function(a,h){for(var d=0,p=0;p<h/2;p++){var w=Math.round(a[2*p+1]/h)*8192+Math.round(a[2*p]/h)+d;a[p]=w&67108863,w<67108864?d=0:d=w/67108864|0}return a},D.prototype.convert13b=function(a,h,d,p){for(var w=0,b=0;b<h;b++)w=w+(a[b]|0),d[2*b]=w&8191,w=w>>>13,d[2*b+1]=w&8191,w=w>>>13;for(b=2*h;b<p;++b)d[b]=0;i(w===0),i((w&-8192)===0)},D.prototype.stub=function(a){for(var h=new Array(a),d=0;d<a;d++)h[d]=0;return h},D.prototype.mulp=function(a,h,d){var p=2*this.guessLen13b(a.length,h.length),w=this.makeRBT(p),b=this.stub(p),I=new Array(p),y=new Array(p),o=new Array(p),v=new Array(p),R=new Array(p),L=new Array(p),z=d.words;z.length=p,this.convert13b(a.words,a.length,I,p),this.convert13b(h.words,h.length,v,p),this.transform(I,b,y,o,p,w),this.transform(v,b,R,L,p,w);for(var q=0;q<p;q++){var Y=y[q]*R[q]-o[q]*L[q];o[q]=y[q]*L[q]+o[q]*R[q],y[q]=Y}return this.conjugate(y,o,p),this.transform(y,o,z,b,p,w),this.conjugate(z,b,p),this.normalize13b(z,p),d.negative=a.negative^h.negative,d.length=a.length+h.length,d.strip()},n.prototype.mul=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},n.prototype.mulf=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),S(this,a,h)},n.prototype.imul=function(a){return this.clone().mulTo(a,this)},n.prototype.imuln=function(a){i(typeof a=="number"),i(a<67108864);for(var h=0,d=0;d<this.length;d++){var p=(this.words[d]|0)*a,w=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=w>>>26,this.words[d]=w&67108863}return h!==0&&(this.words[d]=h,this.length++),this.length=a===0?1:this.length,this},n.prototype.muln=function(a){return this.clone().imuln(a)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(a){var h=A(a);if(h.length===0)return new n(1);for(var d=this,p=0;p<h.length&&h[p]===0;p++,d=d.sqr());if(++p<h.length)for(var w=d.sqr();p<h.length;p++,w=w.sqr())h[p]!==0&&(d=d.mul(w));return d},n.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=67108863>>>26-h<<26-h,w;if(h!==0){var b=0;for(w=0;w<this.length;w++){var I=this.words[w]&p,y=(this.words[w]|0)-I<<h;this.words[w]=y|b,b=I>>>26-h}b&&(this.words[w]=b,this.length++)}if(d!==0){for(w=this.length-1;w>=0;w--)this.words[w+d]=this.words[w];for(w=0;w<d;w++)this.words[w]=0;this.length+=d}return this.strip()},n.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},n.prototype.iushrn=function(a,h,d){i(typeof a=="number"&&a>=0);var p;h?p=(h-h%26)/26:p=0;var w=a%26,b=Math.min((a-w)/26,this.length),I=67108863^67108863>>>w<<w,y=d;if(p-=b,p=Math.max(0,p),y){for(var o=0;o<b;o++)y.words[o]=this.words[o];y.length=b}if(b!==0)if(this.length>b)for(this.length-=b,o=0;o<this.length;o++)this.words[o]=this.words[o+b];else this.words[0]=0,this.length=1;var v=0;for(o=this.length-1;o>=0&&(v!==0||o>=p);o--){var R=this.words[o]|0;this.words[o]=v<<26-w|R>>>w,v=R&I}return y&&v!==0&&(y.words[y.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(a,h,d){return i(this.negative===0),this.iushrn(a,h,d)},n.prototype.shln=function(a){return this.clone().ishln(a)},n.prototype.ushln=function(a){return this.clone().iushln(a)},n.prototype.shrn=function(a){return this.clone().ishrn(a)},n.prototype.ushrn=function(a){return this.clone().iushrn(a)},n.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return!1;var w=this.words[d];return!!(w&p)},n.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(h!==0&&d++,this.length=Math.min(d,this.length),h!==0){var p=67108863^67108863>>>h<<h;this.words[this.length-1]&=p}return this.strip()},n.prototype.maskn=function(a){return this.clone().imaskn(a)},n.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},n.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},n.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},n.prototype.addn=function(a){return this.clone().iaddn(a)},n.prototype.subn=function(a){return this.clone().isubn(a)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(a,h,d){var p=a.length+d,w;this._expand(p);var b,I=0;for(w=0;w<a.length;w++){b=(this.words[w+d]|0)+I;var y=(a.words[w]|0)*h;b-=y&67108863,I=(b>>26)-(y/67108864|0),this.words[w+d]=b&67108863}for(;w<this.length-d;w++)b=(this.words[w+d]|0)+I,I=b>>26,this.words[w+d]=b&67108863;if(I===0)return this.strip();for(i(I===-1),I=0,w=0;w<this.length;w++)b=-(this.words[w]|0)+I,I=b>>26,this.words[w]=b&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(a,h){var d=this.length-a.length,p=this.clone(),w=a,b=w.words[w.length-1]|0,I=this._countBits(b);d=26-I,d!==0&&(w=w.ushln(d),p.iushln(d),b=w.words[w.length-1]|0);var y=p.length-w.length,o;if(h!=="mod"){o=new n(null),o.length=y+1,o.words=new Array(o.length);for(var v=0;v<o.length;v++)o.words[v]=0}var R=p.clone()._ishlnsubmul(w,1,y);R.negative===0&&(p=R,o&&(o.words[y]=1));for(var L=y-1;L>=0;L--){var z=(p.words[w.length+L]|0)*67108864+(p.words[w.length+L-1]|0);for(z=Math.min(z/b|0,67108863),p._ishlnsubmul(w,z,L);p.negative!==0;)z--,p.negative=0,p._ishlnsubmul(w,1,L),p.isZero()||(p.negative^=1);o&&(o.words[L]=z)}return o&&o.strip(),p.strip(),h!=="div"&&d!==0&&p.iushrn(d),{div:o||null,mod:p}},n.prototype.divmod=function(a,h,d){if(i(!a.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var p,w,b;return this.negative!==0&&a.negative===0?(b=this.neg().divmod(a,h),h!=="mod"&&(p=b.div.neg()),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.iadd(a)),{div:p,mod:w}):this.negative===0&&a.negative!==0?(b=this.divmod(a.neg(),h),h!=="mod"&&(p=b.div.neg()),{div:p,mod:b.mod}):(this.negative&a.negative)!==0?(b=this.neg().divmod(a.neg(),h),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.isub(a)),{div:b.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new n(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new n(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new n(this.modn(a.words[0]))}:this._wordDiv(a,h)},n.prototype.div=function(a){return this.divmod(a,"div",!1).div},n.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},n.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},n.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var d=h.div.negative!==0?h.mod.isub(a):h.mod,p=a.ushrn(1),w=a.andln(1),b=d.cmp(p);return b<0||w===1&&b===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},n.prototype.modn=function(a){i(a<=67108863);for(var h=(1<<26)%a,d=0,p=this.length-1;p>=0;p--)d=(h*d+(this.words[p]|0))%a;return d},n.prototype.idivn=function(a){i(a<=67108863);for(var h=0,d=this.length-1;d>=0;d--){var p=(this.words[d]|0)+h*67108864;this.words[d]=p/a|0,h=p%a}return this.strip()},n.prototype.divn=function(a){return this.clone().idivn(a)},n.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=new n(0),I=new n(1),y=0;h.isEven()&&d.isEven();)h.iushrn(1),d.iushrn(1),++y;for(var o=d.clone(),v=h.clone();!h.isZero();){for(var R=0,L=1;(h.words[0]&L)===0&&R<26;++R,L<<=1);if(R>0)for(h.iushrn(R);R-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(o),w.isub(v)),p.iushrn(1),w.iushrn(1);for(var z=0,q=1;(d.words[0]&q)===0&&z<26;++z,q<<=1);if(z>0)for(d.iushrn(z);z-- >0;)(b.isOdd()||I.isOdd())&&(b.iadd(o),I.isub(v)),b.iushrn(1),I.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(b),w.isub(I)):(d.isub(h),b.isub(p),I.isub(w))}return{a:b,b:I,gcd:d.iushln(y)}},n.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=d.clone();h.cmpn(1)>0&&d.cmpn(1)>0;){for(var I=0,y=1;(h.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(h.iushrn(I);I-- >0;)p.isOdd()&&p.iadd(b),p.iushrn(1);for(var o=0,v=1;(d.words[0]&v)===0&&o<26;++o,v<<=1);if(o>0)for(d.iushrn(o);o-- >0;)w.isOdd()&&w.iadd(b),w.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(w)):(d.isub(h),w.isub(p))}var R;return h.cmpn(1)===0?R=p:R=w,R.cmpn(0)<0&&R.iadd(a),R},n.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),d=a.clone();h.negative=0,d.negative=0;for(var p=0;h.isEven()&&d.isEven();p++)h.iushrn(1),d.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;d.isEven();)d.iushrn(1);var w=h.cmp(d);if(w<0){var b=h;h=d,d=b}else if(w===0||d.cmpn(1)===0)break;h.isub(d)}while(!0);return d.iushln(p)},n.prototype.invm=function(a){return this.egcd(a).a.umod(a)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(a){return this.words[0]&a},n.prototype.bincn=function(a){i(typeof a=="number");var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return this._expand(d+1),this.words[d]|=p,this;for(var w=p,b=d;w!==0&&b<this.length;b++){var I=this.words[b]|0;I+=w,w=I>>>26,I&=67108863,this.words[b]=I}return w!==0&&(this.words[b]=w,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var d;if(this.length>1)d=1;else{h&&(a=-a),i(a<=67108863,"Number is too big");var p=this.words[0]|0;d=p===a?0:p<a?-1:1}return this.negative!==0?-d|0:d},n.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},n.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,d=this.length-1;d>=0;d--){var p=this.words[d]|0,w=a.words[d]|0;if(p!==w){p<w?h=-1:p>w&&(h=1);break}}return h},n.prototype.gtn=function(a){return this.cmpn(a)===1},n.prototype.gt=function(a){return this.cmp(a)===1},n.prototype.gten=function(a){return this.cmpn(a)>=0},n.prototype.gte=function(a){return this.cmp(a)>=0},n.prototype.ltn=function(a){return this.cmpn(a)===-1},n.prototype.lt=function(a){return this.cmp(a)===-1},n.prototype.lten=function(a){return this.cmpn(a)<=0},n.prototype.lte=function(a){return this.cmp(a)<=0},n.prototype.eqn=function(a){return this.cmpn(a)===0},n.prototype.eq=function(a){return this.cmp(a)===0},n.red=function(a){return new $(a)},n.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(a){return this.red=a,this},n.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},n.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},n.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},n.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},n.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},n.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},n.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},n.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var C={k256:null,p224:null,p192:null,p25519:null};function j(M,a){this.name=M,this.p=new n(a,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var a=new n(null);return a.words=new Array(Math.ceil(this.n/13)),a},j.prototype.ireduce=function(a){var h=a,d;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),d=h.bitLength();while(d>this.n);var p=d<this.n?-1:h.ucmp(this.p);return p===0?(h.words[0]=0,h.length=1):p>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},j.prototype.split=function(a,h){a.iushrn(this.n,0,h)},j.prototype.imulK=function(a){return a.imul(this.k)};function k(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(k,j),k.prototype.split=function(a,h){for(var d=4194303,p=Math.min(a.length,9),w=0;w<p;w++)h.words[w]=a.words[w];if(h.length=p,a.length<=9){a.words[0]=0,a.length=1;return}var b=a.words[9];for(h.words[h.length++]=b&d,w=10;w<a.length;w++){var I=a.words[w]|0;a.words[w-10]=(I&d)<<4|b>>>22,b=I}b>>>=22,a.words[w-10]=b,b===0&&a.length>10?a.length-=10:a.length-=9},k.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,d=0;d<a.length;d++){var p=a.words[d]|0;h+=p*977,a.words[d]=h&67108863,h=p*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function P(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(P,j);function Q(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Q,j);function F(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(F,j),F.prototype.imulK=function(a){for(var h=0,d=0;d<a.length;d++){var p=(a.words[d]|0)*19+h,w=p&67108863;p>>>=26,a.words[d]=w,h=p}return h!==0&&(a.words[a.length++]=h),a},n._prime=function(a){if(C[a])return C[a];var h;if(a==="k256")h=new k;else if(a==="p224")h=new P;else if(a==="p192")h=new Q;else if(a==="p25519")h=new F;else throw new Error("Unknown prime "+a);return C[a]=h,h};function $(M){if(typeof M=="string"){var a=n._prime(M);this.m=a.p,this.prime=a}else i(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}$.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},$.prototype._verify2=function(a,h){i((a.negative|h.negative)===0,"red works only with positives"),i(a.red&&a.red===h.red,"red works only with red numbers")},$.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},$.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},$.prototype.add=function(a,h){this._verify2(a,h);var d=a.add(h);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},$.prototype.iadd=function(a,h){this._verify2(a,h);var d=a.iadd(h);return d.cmp(this.m)>=0&&d.isub(this.m),d},$.prototype.sub=function(a,h){this._verify2(a,h);var d=a.sub(h);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},$.prototype.isub=function(a,h){this._verify2(a,h);var d=a.isub(h);return d.cmpn(0)<0&&d.iadd(this.m),d},$.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},$.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},$.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},$.prototype.isqr=function(a){return this.imul(a,a.clone())},$.prototype.sqr=function(a){return this.mul(a,a)},$.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var d=this.m.add(new n(1)).iushrn(2);return this.pow(a,d)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);i(!p.isZero());var b=new n(1).toRed(this),I=b.redNeg(),y=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new n(2*o*o).toRed(this);this.pow(o,y).cmp(I)!==0;)o.redIAdd(I);for(var v=this.pow(o,p),R=this.pow(a,p.addn(1).iushrn(1)),L=this.pow(a,p),z=w;L.cmp(b)!==0;){for(var q=L,Y=0;q.cmp(b)!==0;Y++)q=q.redSqr();i(Y<z);var T=this.pow(v,new n(1).iushln(z-Y-1));R=R.redMul(T),v=T.redSqr(),L=L.redMul(v),z=Y}return R},$.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},$.prototype.pow=function(a,h){if(h.isZero())return new n(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var d=4,p=new Array(1<<d);p[0]=new n(1).toRed(this),p[1]=a;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],a);var b=p[0],I=0,y=0,o=h.bitLength()%26;for(o===0&&(o=26),w=h.length-1;w>=0;w--){for(var v=h.words[w],R=o-1;R>=0;R--){var L=v>>R&1;if(b!==p[0]&&(b=this.sqr(b)),L===0&&I===0){y=0;continue}I<<=1,I|=L,y++,!(y!==d&&(w!==0||R!==0))&&(b=this.mul(b,p[I]),y=0,I=0)}o=26}return b},$.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},$.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},n.mont=function(a){return new Z(a)};function Z(M){$.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Z,$),Z.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Z.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},Z.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new n(0)._forceRed(this);var d=a.mul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,lR)})(sf)),sf.exports}var af={exports:{}},uR=af.exports,pN;function fR(){return pN||(pN=1,(function(r){(function(e,t){function i(M,a){if(!M)throw new Error(a||"Assertion failed")}function s(M,a){M.super_=a;var h=function(){};h.prototype=a.prototype,M.prototype=new h,M.prototype.constructor=M}function n(M,a,h){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(M||0,a||10,h||"be"))}typeof e=="object"?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=ki().Buffer}catch{}n.isBN=function(a){return a instanceof n?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===n.wordSize&&Array.isArray(a.words)},n.max=function(a,h){return a.cmp(h)>0?a:h},n.min=function(a,h){return a.cmp(h)<0?a:h},n.prototype._init=function(a,h,d){if(typeof a=="number")return this._initNumber(a,h,d);if(typeof a=="object")return this._initArray(a,h,d);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var p=0;a[0]==="-"&&(p++,this.negative=1),p<a.length&&(h===16?this._parseHex(a,p,d):(this._parseBase(a,h,p),d==="le"&&this._initArray(this.toArray(),h,d)))},n.prototype._initNumber=function(a,h,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),h,d)},n.prototype._initArray=function(a,h,d){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,b,I=0;if(d==="be")for(p=a.length-1,w=0;p>=0;p-=3)b=a[p]|a[p-1]<<8|a[p-2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);else if(d==="le")for(p=0,w=0;p<a.length;p+=3)b=a[p]|a[p+1]<<8|a[p+2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);return this.strip()};function l(M,a){var h=M.charCodeAt(a);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function u(M,a,h){var d=l(M,h);return h-1>=a&&(d|=l(M,h-1)<<4),d}n.prototype._parseHex=function(a,h,d){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,b=0,I;if(d==="be")for(p=a.length-1;p>=h;p-=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8;else{var y=a.length-h;for(p=y%2===0?h+1:h;p<a.length;p+=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8}this.strip()};function f(M,a,h,d){for(var p=0,w=Math.min(M.length,h),b=a;b<w;b++){var I=M.charCodeAt(b)-48;p*=d,I>=49?p+=I-49+10:I>=17?p+=I-17+10:p+=I}return p}n.prototype._parseBase=function(a,h,d){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=h)p++;p--,w=w/h|0;for(var b=a.length-d,I=b%p,y=Math.min(b,b-I)+d,o=0,v=d;v<y;v+=p)o=f(a,v,v+p,h),this.imuln(w),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(I!==0){var R=1;for(o=f(a,v,a.length,h),v=0;v<I;v++)R*=h;this.imuln(R),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},n.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red},n.prototype.clone=function(){var a=new n(null);return this.copy(a),a},n.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(a,h){a=a||10,h=h|0||1;var d;if(a===16||a==="hex"){d="";for(var p=0,w=0,b=0;b<this.length;b++){var I=this.words[b],y=((I<<p|w)&16777215).toString(16);w=I>>>24-p&16777215,p+=2,p>=26&&(p-=26,b--),w!==0||b!==this.length-1?d=g[6-y.length]+y+d:d=y+d}for(w!==0&&(d=w.toString(16)+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var o=m[a],v=N[a];d="";var R=this.clone();for(R.negative=0;!R.isZero();){var L=R.modn(v).toString(a);R=R.idivn(v),R.isZero()?d=L+d:d=g[o-L.length]+L+d}for(this.isZero()&&(d="0"+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(a,h){return i(typeof c<"u"),this.toArrayLike(c,a,h)},n.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)},n.prototype.toArrayLike=function(a,h,d){var p=this.byteLength(),w=d||Math.max(1,p);i(p<=w,"byte array longer than desired length"),i(w>0,"Requested array length <= 0"),this.strip();var b=h==="le",I=new a(w),y,o,v=this.clone();if(b){for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[o]=y;for(;o<w;o++)I[o]=0}else{for(o=0;o<w-p;o++)I[o]=0;for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[w-o-1]=y}return I},Math.clz32?n.prototype._countBits=function(a){return 32-Math.clz32(a)}:n.prototype._countBits=function(a){var h=a,d=0;return h>=4096&&(d+=13,h>>>=13),h>=64&&(d+=7,h>>>=7),h>=8&&(d+=4,h>>>=4),h>=2&&(d+=2,h>>>=2),d+h},n.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,d=0;return(h&8191)===0&&(d+=13,h>>>=13),(h&127)===0&&(d+=7,h>>>=7),(h&15)===0&&(d+=4,h>>>=4),(h&3)===0&&(d+=2,h>>>=2),(h&1)===0&&d++,d},n.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function A(M){for(var a=new Array(M.bitLength()),h=0;h<a.length;h++){var d=h/26|0,p=h%26;a[h]=(M.words[d]&1<<p)>>>p}return a}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var d=this._zeroBits(this.words[h]);if(a+=d,d!==26)break}return a},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},n.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this.strip()},n.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},n.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},n.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},n.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var d=0;d<h.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=h.length,this.strip()},n.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},n.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},n.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},n.prototype.iuxor=function(a){var h,d;this.length>a.length?(h=this,d=a):(h=a,d=this);for(var p=0;p<d.length;p++)this.words[p]=h.words[p]^d.words[p];if(this!==h)for(;p<h.length;p++)this.words[p]=h.words[p];return this.length=h.length,this.strip()},n.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},n.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},n.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},n.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,d=a%26;this._expand(h),d>0&&h--;for(var p=0;p<h;p++)this.words[p]=~this.words[p]&67108863;return d>0&&(this.words[p]=~this.words[p]&67108863>>26-d),this.strip()},n.prototype.notn=function(a){return this.clone().inotn(a)},n.prototype.setn=function(a,h){i(typeof a=="number"&&a>=0);var d=a/26|0,p=a%26;return this._expand(d+1),h?this.words[d]=this.words[d]|1<<p:this.words[d]=this.words[d]&~(1<<p),this.strip()},n.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var d,p;this.length>a.length?(d=this,p=a):(d=a,p=this);for(var w=0,b=0;b<p.length;b++)h=(d.words[b]|0)+(p.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;for(;w!==0&&b<d.length;b++)h=(d.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;if(this.length=d.length,w!==0)this.words[this.length]=w,this.length++;else if(d!==this)for(;b<d.length;b++)this.words[b]=d.words[b];return this},n.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},n.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;d>0?(p=this,w=a):(p=a,w=this);for(var b=0,I=0;I<w.length;I++)h=(p.words[I]|0)-(w.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;for(;b!==0&&I<p.length;I++)h=(p.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;if(b===0&&I<p.length&&p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this.length=Math.max(this.length,I),p!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(a){return this.clone().isub(a)};function _(M,a,h){h.negative=a.negative^M.negative;var d=M.length+a.length|0;h.length=d,d=d-1|0;var p=M.words[0]|0,w=a.words[0]|0,b=p*w,I=b&67108863,y=b/67108864|0;h.words[0]=I;for(var o=1;o<d;o++){for(var v=y>>>26,R=y&67108863,L=Math.min(o,a.length-1),z=Math.max(0,o-M.length+1);z<=L;z++){var q=o-z|0;p=M.words[q]|0,w=a.words[z]|0,b=p*w+R,v+=b/67108864|0,R=b&67108863}h.words[o]=R|0,y=v|0}return y!==0?h.words[o]=y|0:h.length--,h.strip()}var E=function(a,h,d){var p=a.words,w=h.words,b=d.words,I=0,y,o,v,R=p[0]|0,L=R&8191,z=R>>>13,q=p[1]|0,Y=q&8191,T=q>>>13,O=p[2]|0,B=O&8191,W=O>>>13,V=p[3]|0,U=V&8191,H=V>>>13,de=p[4]|0,ee=de&8191,J=de>>>13,Qe=p[5]|0,oe=Qe&8191,K=Qe>>>13,et=p[6]|0,re=et&8191,ae=et>>>13,Ke=p[7]|0,se=Ke&8191,ce=Ke>>>13,Dt=p[8]|0,he=Dt&8191,le=Dt>>>13,Cr=p[9]|0,ue=Cr&8191,ve=Cr>>>13,Br=w[0]|0,_e=Br&8191,be=Br>>>13,Or=w[1]|0,Me=Or&8191,Ne=Or>>>13,Vr=w[2]|0,fe=Vr&8191,Ie=Vr>>>13,Fr=w[3]|0,Ee=Fr&8191,ge=Fr>>>13,Er=w[4]|0,ye=Er&8191,we=Er>>>13,Pr=w[5]|0,pe=Pr&8191,De=Pr>>>13,Hr=w[6]|0,Se=Hr&8191,xe=Hr>>>13,Zr=w[7]|0,Ae=Zr&8191,me=Zr>>>13,tr=w[8]|0,Te=tr&8191,je=tr>>>13,Gr=w[9]|0,Ce=Gr&8191,Oe=Gr>>>13;d.negative=a.negative^h.negative,d.length=19,y=Math.imul(L,_e),o=Math.imul(L,be),o=o+Math.imul(z,_e)|0,v=Math.imul(z,be);var mt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,y=Math.imul(Y,_e),o=Math.imul(Y,be),o=o+Math.imul(T,_e)|0,v=Math.imul(T,be),y=y+Math.imul(L,Me)|0,o=o+Math.imul(L,Ne)|0,o=o+Math.imul(z,Me)|0,v=v+Math.imul(z,Ne)|0;var rr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,y=Math.imul(B,_e),o=Math.imul(B,be),o=o+Math.imul(W,_e)|0,v=Math.imul(W,be),y=y+Math.imul(Y,Me)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(T,Me)|0,v=v+Math.imul(T,Ne)|0,y=y+Math.imul(L,fe)|0,o=o+Math.imul(L,Ie)|0,o=o+Math.imul(z,fe)|0,v=v+Math.imul(z,Ie)|0;var ir=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul(U,_e),o=Math.imul(U,be),o=o+Math.imul(H,_e)|0,v=Math.imul(H,be),y=y+Math.imul(B,Me)|0,o=o+Math.imul(B,Ne)|0,o=o+Math.imul(W,Me)|0,v=v+Math.imul(W,Ne)|0,y=y+Math.imul(Y,fe)|0,o=o+Math.imul(Y,Ie)|0,o=o+Math.imul(T,fe)|0,v=v+Math.imul(T,Ie)|0,y=y+Math.imul(L,Ee)|0,o=o+Math.imul(L,ge)|0,o=o+Math.imul(z,Ee)|0,v=v+Math.imul(z,ge)|0;var nr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(ee,_e),o=Math.imul(ee,be),o=o+Math.imul(J,_e)|0,v=Math.imul(J,be),y=y+Math.imul(U,Me)|0,o=o+Math.imul(U,Ne)|0,o=o+Math.imul(H,Me)|0,v=v+Math.imul(H,Ne)|0,y=y+Math.imul(B,fe)|0,o=o+Math.imul(B,Ie)|0,o=o+Math.imul(W,fe)|0,v=v+Math.imul(W,Ie)|0,y=y+Math.imul(Y,Ee)|0,o=o+Math.imul(Y,ge)|0,o=o+Math.imul(T,Ee)|0,v=v+Math.imul(T,ge)|0,y=y+Math.imul(L,ye)|0,o=o+Math.imul(L,we)|0,o=o+Math.imul(z,ye)|0,v=v+Math.imul(z,we)|0;var sr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(oe,_e),o=Math.imul(oe,be),o=o+Math.imul(K,_e)|0,v=Math.imul(K,be),y=y+Math.imul(ee,Me)|0,o=o+Math.imul(ee,Ne)|0,o=o+Math.imul(J,Me)|0,v=v+Math.imul(J,Ne)|0,y=y+Math.imul(U,fe)|0,o=o+Math.imul(U,Ie)|0,o=o+Math.imul(H,fe)|0,v=v+Math.imul(H,Ie)|0,y=y+Math.imul(B,Ee)|0,o=o+Math.imul(B,ge)|0,o=o+Math.imul(W,Ee)|0,v=v+Math.imul(W,ge)|0,y=y+Math.imul(Y,ye)|0,o=o+Math.imul(Y,we)|0,o=o+Math.imul(T,ye)|0,v=v+Math.imul(T,we)|0,y=y+Math.imul(L,pe)|0,o=o+Math.imul(L,De)|0,o=o+Math.imul(z,pe)|0,v=v+Math.imul(z,De)|0;var ar=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ar>>>26)|0,ar&=67108863,y=Math.imul(re,_e),o=Math.imul(re,be),o=o+Math.imul(ae,_e)|0,v=Math.imul(ae,be),y=y+Math.imul(oe,Me)|0,o=o+Math.imul(oe,Ne)|0,o=o+Math.imul(K,Me)|0,v=v+Math.imul(K,Ne)|0,y=y+Math.imul(ee,fe)|0,o=o+Math.imul(ee,Ie)|0,o=o+Math.imul(J,fe)|0,v=v+Math.imul(J,Ie)|0,y=y+Math.imul(U,Ee)|0,o=o+Math.imul(U,ge)|0,o=o+Math.imul(H,Ee)|0,v=v+Math.imul(H,ge)|0,y=y+Math.imul(B,ye)|0,o=o+Math.imul(B,we)|0,o=o+Math.imul(W,ye)|0,v=v+Math.imul(W,we)|0,y=y+Math.imul(Y,pe)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(T,pe)|0,v=v+Math.imul(T,De)|0,y=y+Math.imul(L,Se)|0,o=o+Math.imul(L,xe)|0,o=o+Math.imul(z,Se)|0,v=v+Math.imul(z,xe)|0;var St=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(St>>>26)|0,St&=67108863,y=Math.imul(se,_e),o=Math.imul(se,be),o=o+Math.imul(ce,_e)|0,v=Math.imul(ce,be),y=y+Math.imul(re,Me)|0,o=o+Math.imul(re,Ne)|0,o=o+Math.imul(ae,Me)|0,v=v+Math.imul(ae,Ne)|0,y=y+Math.imul(oe,fe)|0,o=o+Math.imul(oe,Ie)|0,o=o+Math.imul(K,fe)|0,v=v+Math.imul(K,Ie)|0,y=y+Math.imul(ee,Ee)|0,o=o+Math.imul(ee,ge)|0,o=o+Math.imul(J,Ee)|0,v=v+Math.imul(J,ge)|0,y=y+Math.imul(U,ye)|0,o=o+Math.imul(U,we)|0,o=o+Math.imul(H,ye)|0,v=v+Math.imul(H,we)|0,y=y+Math.imul(B,pe)|0,o=o+Math.imul(B,De)|0,o=o+Math.imul(W,pe)|0,v=v+Math.imul(W,De)|0,y=y+Math.imul(Y,Se)|0,o=o+Math.imul(Y,xe)|0,o=o+Math.imul(T,Se)|0,v=v+Math.imul(T,xe)|0,y=y+Math.imul(L,Ae)|0,o=o+Math.imul(L,me)|0,o=o+Math.imul(z,Ae)|0,v=v+Math.imul(z,me)|0;var or=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(he,_e),o=Math.imul(he,be),o=o+Math.imul(le,_e)|0,v=Math.imul(le,be),y=y+Math.imul(se,Me)|0,o=o+Math.imul(se,Ne)|0,o=o+Math.imul(ce,Me)|0,v=v+Math.imul(ce,Ne)|0,y=y+Math.imul(re,fe)|0,o=o+Math.imul(re,Ie)|0,o=o+Math.imul(ae,fe)|0,v=v+Math.imul(ae,Ie)|0,y=y+Math.imul(oe,Ee)|0,o=o+Math.imul(oe,ge)|0,o=o+Math.imul(K,Ee)|0,v=v+Math.imul(K,ge)|0,y=y+Math.imul(ee,ye)|0,o=o+Math.imul(ee,we)|0,o=o+Math.imul(J,ye)|0,v=v+Math.imul(J,we)|0,y=y+Math.imul(U,pe)|0,o=o+Math.imul(U,De)|0,o=o+Math.imul(H,pe)|0,v=v+Math.imul(H,De)|0,y=y+Math.imul(B,Se)|0,o=o+Math.imul(B,xe)|0,o=o+Math.imul(W,Se)|0,v=v+Math.imul(W,xe)|0,y=y+Math.imul(Y,Ae)|0,o=o+Math.imul(Y,me)|0,o=o+Math.imul(T,Ae)|0,v=v+Math.imul(T,me)|0,y=y+Math.imul(L,Te)|0,o=o+Math.imul(L,je)|0,o=o+Math.imul(z,Te)|0,v=v+Math.imul(z,je)|0;var cr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(cr>>>26)|0,cr&=67108863,y=Math.imul(ue,_e),o=Math.imul(ue,be),o=o+Math.imul(ve,_e)|0,v=Math.imul(ve,be),y=y+Math.imul(he,Me)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(le,Me)|0,v=v+Math.imul(le,Ne)|0,y=y+Math.imul(se,fe)|0,o=o+Math.imul(se,Ie)|0,o=o+Math.imul(ce,fe)|0,v=v+Math.imul(ce,Ie)|0,y=y+Math.imul(re,Ee)|0,o=o+Math.imul(re,ge)|0,o=o+Math.imul(ae,Ee)|0,v=v+Math.imul(ae,ge)|0,y=y+Math.imul(oe,ye)|0,o=o+Math.imul(oe,we)|0,o=o+Math.imul(K,ye)|0,v=v+Math.imul(K,we)|0,y=y+Math.imul(ee,pe)|0,o=o+Math.imul(ee,De)|0,o=o+Math.imul(J,pe)|0,v=v+Math.imul(J,De)|0,y=y+Math.imul(U,Se)|0,o=o+Math.imul(U,xe)|0,o=o+Math.imul(H,Se)|0,v=v+Math.imul(H,xe)|0,y=y+Math.imul(B,Ae)|0,o=o+Math.imul(B,me)|0,o=o+Math.imul(W,Ae)|0,v=v+Math.imul(W,me)|0,y=y+Math.imul(Y,Te)|0,o=o+Math.imul(Y,je)|0,o=o+Math.imul(T,Te)|0,v=v+Math.imul(T,je)|0,y=y+Math.imul(L,Ce)|0,o=o+Math.imul(L,Oe)|0,o=o+Math.imul(z,Ce)|0,v=v+Math.imul(z,Oe)|0;var hr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(hr>>>26)|0,hr&=67108863,y=Math.imul(ue,Me),o=Math.imul(ue,Ne),o=o+Math.imul(ve,Me)|0,v=Math.imul(ve,Ne),y=y+Math.imul(he,fe)|0,o=o+Math.imul(he,Ie)|0,o=o+Math.imul(le,fe)|0,v=v+Math.imul(le,Ie)|0,y=y+Math.imul(se,Ee)|0,o=o+Math.imul(se,ge)|0,o=o+Math.imul(ce,Ee)|0,v=v+Math.imul(ce,ge)|0,y=y+Math.imul(re,ye)|0,o=o+Math.imul(re,we)|0,o=o+Math.imul(ae,ye)|0,v=v+Math.imul(ae,we)|0,y=y+Math.imul(oe,pe)|0,o=o+Math.imul(oe,De)|0,o=o+Math.imul(K,pe)|0,v=v+Math.imul(K,De)|0,y=y+Math.imul(ee,Se)|0,o=o+Math.imul(ee,xe)|0,o=o+Math.imul(J,Se)|0,v=v+Math.imul(J,xe)|0,y=y+Math.imul(U,Ae)|0,o=o+Math.imul(U,me)|0,o=o+Math.imul(H,Ae)|0,v=v+Math.imul(H,me)|0,y=y+Math.imul(B,Te)|0,o=o+Math.imul(B,je)|0,o=o+Math.imul(W,Te)|0,v=v+Math.imul(W,je)|0,y=y+Math.imul(Y,Ce)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(T,Ce)|0,v=v+Math.imul(T,Oe)|0;var lr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,y=Math.imul(ue,fe),o=Math.imul(ue,Ie),o=o+Math.imul(ve,fe)|0,v=Math.imul(ve,Ie),y=y+Math.imul(he,Ee)|0,o=o+Math.imul(he,ge)|0,o=o+Math.imul(le,Ee)|0,v=v+Math.imul(le,ge)|0,y=y+Math.imul(se,ye)|0,o=o+Math.imul(se,we)|0,o=o+Math.imul(ce,ye)|0,v=v+Math.imul(ce,we)|0,y=y+Math.imul(re,pe)|0,o=o+Math.imul(re,De)|0,o=o+Math.imul(ae,pe)|0,v=v+Math.imul(ae,De)|0,y=y+Math.imul(oe,Se)|0,o=o+Math.imul(oe,xe)|0,o=o+Math.imul(K,Se)|0,v=v+Math.imul(K,xe)|0,y=y+Math.imul(ee,Ae)|0,o=o+Math.imul(ee,me)|0,o=o+Math.imul(J,Ae)|0,v=v+Math.imul(J,me)|0,y=y+Math.imul(U,Te)|0,o=o+Math.imul(U,je)|0,o=o+Math.imul(H,Te)|0,v=v+Math.imul(H,je)|0,y=y+Math.imul(B,Ce)|0,o=o+Math.imul(B,Oe)|0,o=o+Math.imul(W,Ce)|0,v=v+Math.imul(W,Oe)|0;var ur=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ur>>>26)|0,ur&=67108863,y=Math.imul(ue,Ee),o=Math.imul(ue,ge),o=o+Math.imul(ve,Ee)|0,v=Math.imul(ve,ge),y=y+Math.imul(he,ye)|0,o=o+Math.imul(he,we)|0,o=o+Math.imul(le,ye)|0,v=v+Math.imul(le,we)|0,y=y+Math.imul(se,pe)|0,o=o+Math.imul(se,De)|0,o=o+Math.imul(ce,pe)|0,v=v+Math.imul(ce,De)|0,y=y+Math.imul(re,Se)|0,o=o+Math.imul(re,xe)|0,o=o+Math.imul(ae,Se)|0,v=v+Math.imul(ae,xe)|0,y=y+Math.imul(oe,Ae)|0,o=o+Math.imul(oe,me)|0,o=o+Math.imul(K,Ae)|0,v=v+Math.imul(K,me)|0,y=y+Math.imul(ee,Te)|0,o=o+Math.imul(ee,je)|0,o=o+Math.imul(J,Te)|0,v=v+Math.imul(J,je)|0,y=y+Math.imul(U,Ce)|0,o=o+Math.imul(U,Oe)|0,o=o+Math.imul(H,Ce)|0,v=v+Math.imul(H,Oe)|0;var Ut=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,y=Math.imul(ue,ye),o=Math.imul(ue,we),o=o+Math.imul(ve,ye)|0,v=Math.imul(ve,we),y=y+Math.imul(he,pe)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(le,pe)|0,v=v+Math.imul(le,De)|0,y=y+Math.imul(se,Se)|0,o=o+Math.imul(se,xe)|0,o=o+Math.imul(ce,Se)|0,v=v+Math.imul(ce,xe)|0,y=y+Math.imul(re,Ae)|0,o=o+Math.imul(re,me)|0,o=o+Math.imul(ae,Ae)|0,v=v+Math.imul(ae,me)|0,y=y+Math.imul(oe,Te)|0,o=o+Math.imul(oe,je)|0,o=o+Math.imul(K,Te)|0,v=v+Math.imul(K,je)|0,y=y+Math.imul(ee,Ce)|0,o=o+Math.imul(ee,Oe)|0,o=o+Math.imul(J,Ce)|0,v=v+Math.imul(J,Oe)|0;var fr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(fr>>>26)|0,fr&=67108863,y=Math.imul(ue,pe),o=Math.imul(ue,De),o=o+Math.imul(ve,pe)|0,v=Math.imul(ve,De),y=y+Math.imul(he,Se)|0,o=o+Math.imul(he,xe)|0,o=o+Math.imul(le,Se)|0,v=v+Math.imul(le,xe)|0,y=y+Math.imul(se,Ae)|0,o=o+Math.imul(se,me)|0,o=o+Math.imul(ce,Ae)|0,v=v+Math.imul(ce,me)|0,y=y+Math.imul(re,Te)|0,o=o+Math.imul(re,je)|0,o=o+Math.imul(ae,Te)|0,v=v+Math.imul(ae,je)|0,y=y+Math.imul(oe,Ce)|0,o=o+Math.imul(oe,Oe)|0,o=o+Math.imul(K,Ce)|0,v=v+Math.imul(K,Oe)|0;var dr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,y=Math.imul(ue,Se),o=Math.imul(ue,xe),o=o+Math.imul(ve,Se)|0,v=Math.imul(ve,xe),y=y+Math.imul(he,Ae)|0,o=o+Math.imul(he,me)|0,o=o+Math.imul(le,Ae)|0,v=v+Math.imul(le,me)|0,y=y+Math.imul(se,Te)|0,o=o+Math.imul(se,je)|0,o=o+Math.imul(ce,Te)|0,v=v+Math.imul(ce,je)|0,y=y+Math.imul(re,Ce)|0,o=o+Math.imul(re,Oe)|0,o=o+Math.imul(ae,Ce)|0,v=v+Math.imul(ae,Oe)|0;var vt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(vt>>>26)|0,vt&=67108863,y=Math.imul(ue,Ae),o=Math.imul(ue,me),o=o+Math.imul(ve,Ae)|0,v=Math.imul(ve,me),y=y+Math.imul(he,Te)|0,o=o+Math.imul(he,je)|0,o=o+Math.imul(le,Te)|0,v=v+Math.imul(le,je)|0,y=y+Math.imul(se,Ce)|0,o=o+Math.imul(se,Oe)|0,o=o+Math.imul(ce,Ce)|0,v=v+Math.imul(ce,Oe)|0;var pr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,y=Math.imul(ue,Te),o=Math.imul(ue,je),o=o+Math.imul(ve,Te)|0,v=Math.imul(ve,je),y=y+Math.imul(he,Ce)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(le,Ce)|0,v=v+Math.imul(le,Oe)|0;var gr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(gr>>>26)|0,gr&=67108863,y=Math.imul(ue,Ce),o=Math.imul(ue,Oe),o=o+Math.imul(ve,Ce)|0,v=Math.imul(ve,Oe);var yr=(I+y|0)+((o&8191)<<13)|0;return I=(v+(o>>>13)|0)+(yr>>>26)|0,yr&=67108863,b[0]=mt,b[1]=rr,b[2]=ir,b[3]=nr,b[4]=sr,b[5]=ar,b[6]=St,b[7]=or,b[8]=cr,b[9]=hr,b[10]=lr,b[11]=ur,b[12]=Ut,b[13]=fr,b[14]=dr,b[15]=vt,b[16]=pr,b[17]=gr,b[18]=yr,I!==0&&(b[19]=I,d.length++),d};Math.imul||(E=_);function x(M,a,h){h.negative=a.negative^M.negative,h.length=M.length+a.length;for(var d=0,p=0,w=0;w<h.length-1;w++){var b=p;p=0;for(var I=d&67108863,y=Math.min(w,a.length-1),o=Math.max(0,w-M.length+1);o<=y;o++){var v=w-o,R=M.words[v]|0,L=a.words[o]|0,z=R*L,q=z&67108863;b=b+(z/67108864|0)|0,q=q+I|0,I=q&67108863,b=b+(q>>>26)|0,p+=b>>>26,b&=67108863}h.words[w]=I,d=b,b=p}return d!==0?h.words[w]=d:h.length--,h.strip()}function S(M,a,h){var d=new D;return d.mulp(M,a,h)}n.prototype.mulTo=function(a,h){var d,p=this.length+a.length;return this.length===10&&a.length===10?d=E(this,a,h):p<63?d=_(this,a,h):p<1024?d=x(this,a,h):d=S(this,a,h),d};function D(M,a){this.x=M,this.y=a}D.prototype.makeRBT=function(a){for(var h=new Array(a),d=n.prototype._countBits(a)-1,p=0;p<a;p++)h[p]=this.revBin(p,d,a);return h},D.prototype.revBin=function(a,h,d){if(a===0||a===d-1)return a;for(var p=0,w=0;w<h;w++)p|=(a&1)<<h-w-1,a>>=1;return p},D.prototype.permute=function(a,h,d,p,w,b){for(var I=0;I<b;I++)p[I]=h[a[I]],w[I]=d[a[I]]},D.prototype.transform=function(a,h,d,p,w,b){this.permute(b,a,h,d,p,w);for(var I=1;I<w;I<<=1)for(var y=I<<1,o=Math.cos(2*Math.PI/y),v=Math.sin(2*Math.PI/y),R=0;R<w;R+=y)for(var L=o,z=v,q=0;q<I;q++){var Y=d[R+q],T=p[R+q],O=d[R+q+I],B=p[R+q+I],W=L*O-z*B;B=L*B+z*O,O=W,d[R+q]=Y+O,p[R+q]=T+B,d[R+q+I]=Y-O,p[R+q+I]=T-B,q!==y&&(W=o*L-v*z,z=o*z+v*L,L=W)}},D.prototype.guessLen13b=function(a,h){var d=Math.max(h,a)|1,p=d&1,w=0;for(d=d/2|0;d;d=d>>>1)w++;return 1<<w+1+p},D.prototype.conjugate=function(a,h,d){if(!(d<=1))for(var p=0;p<d/2;p++){var w=a[p];a[p]=a[d-p-1],a[d-p-1]=w,w=h[p],h[p]=-h[d-p-1],h[d-p-1]=-w}},D.prototype.normalize13b=function(a,h){for(var d=0,p=0;p<h/2;p++){var w=Math.round(a[2*p+1]/h)*8192+Math.round(a[2*p]/h)+d;a[p]=w&67108863,w<67108864?d=0:d=w/67108864|0}return a},D.prototype.convert13b=function(a,h,d,p){for(var w=0,b=0;b<h;b++)w=w+(a[b]|0),d[2*b]=w&8191,w=w>>>13,d[2*b+1]=w&8191,w=w>>>13;for(b=2*h;b<p;++b)d[b]=0;i(w===0),i((w&-8192)===0)},D.prototype.stub=function(a){for(var h=new Array(a),d=0;d<a;d++)h[d]=0;return h},D.prototype.mulp=function(a,h,d){var p=2*this.guessLen13b(a.length,h.length),w=this.makeRBT(p),b=this.stub(p),I=new Array(p),y=new Array(p),o=new Array(p),v=new Array(p),R=new Array(p),L=new Array(p),z=d.words;z.length=p,this.convert13b(a.words,a.length,I,p),this.convert13b(h.words,h.length,v,p),this.transform(I,b,y,o,p,w),this.transform(v,b,R,L,p,w);for(var q=0;q<p;q++){var Y=y[q]*R[q]-o[q]*L[q];o[q]=y[q]*L[q]+o[q]*R[q],y[q]=Y}return this.conjugate(y,o,p),this.transform(y,o,z,b,p,w),this.conjugate(z,b,p),this.normalize13b(z,p),d.negative=a.negative^h.negative,d.length=a.length+h.length,d.strip()},n.prototype.mul=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},n.prototype.mulf=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),S(this,a,h)},n.prototype.imul=function(a){return this.clone().mulTo(a,this)},n.prototype.imuln=function(a){i(typeof a=="number"),i(a<67108864);for(var h=0,d=0;d<this.length;d++){var p=(this.words[d]|0)*a,w=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=w>>>26,this.words[d]=w&67108863}return h!==0&&(this.words[d]=h,this.length++),this.length=a===0?1:this.length,this},n.prototype.muln=function(a){return this.clone().imuln(a)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(a){var h=A(a);if(h.length===0)return new n(1);for(var d=this,p=0;p<h.length&&h[p]===0;p++,d=d.sqr());if(++p<h.length)for(var w=d.sqr();p<h.length;p++,w=w.sqr())h[p]!==0&&(d=d.mul(w));return d},n.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=67108863>>>26-h<<26-h,w;if(h!==0){var b=0;for(w=0;w<this.length;w++){var I=this.words[w]&p,y=(this.words[w]|0)-I<<h;this.words[w]=y|b,b=I>>>26-h}b&&(this.words[w]=b,this.length++)}if(d!==0){for(w=this.length-1;w>=0;w--)this.words[w+d]=this.words[w];for(w=0;w<d;w++)this.words[w]=0;this.length+=d}return this.strip()},n.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},n.prototype.iushrn=function(a,h,d){i(typeof a=="number"&&a>=0);var p;h?p=(h-h%26)/26:p=0;var w=a%26,b=Math.min((a-w)/26,this.length),I=67108863^67108863>>>w<<w,y=d;if(p-=b,p=Math.max(0,p),y){for(var o=0;o<b;o++)y.words[o]=this.words[o];y.length=b}if(b!==0)if(this.length>b)for(this.length-=b,o=0;o<this.length;o++)this.words[o]=this.words[o+b];else this.words[0]=0,this.length=1;var v=0;for(o=this.length-1;o>=0&&(v!==0||o>=p);o--){var R=this.words[o]|0;this.words[o]=v<<26-w|R>>>w,v=R&I}return y&&v!==0&&(y.words[y.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(a,h,d){return i(this.negative===0),this.iushrn(a,h,d)},n.prototype.shln=function(a){return this.clone().ishln(a)},n.prototype.ushln=function(a){return this.clone().iushln(a)},n.prototype.shrn=function(a){return this.clone().ishrn(a)},n.prototype.ushrn=function(a){return this.clone().iushrn(a)},n.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return!1;var w=this.words[d];return!!(w&p)},n.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(h!==0&&d++,this.length=Math.min(d,this.length),h!==0){var p=67108863^67108863>>>h<<h;this.words[this.length-1]&=p}return this.strip()},n.prototype.maskn=function(a){return this.clone().imaskn(a)},n.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},n.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},n.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},n.prototype.addn=function(a){return this.clone().iaddn(a)},n.prototype.subn=function(a){return this.clone().isubn(a)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(a,h,d){var p=a.length+d,w;this._expand(p);var b,I=0;for(w=0;w<a.length;w++){b=(this.words[w+d]|0)+I;var y=(a.words[w]|0)*h;b-=y&67108863,I=(b>>26)-(y/67108864|0),this.words[w+d]=b&67108863}for(;w<this.length-d;w++)b=(this.words[w+d]|0)+I,I=b>>26,this.words[w+d]=b&67108863;if(I===0)return this.strip();for(i(I===-1),I=0,w=0;w<this.length;w++)b=-(this.words[w]|0)+I,I=b>>26,this.words[w]=b&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(a,h){var d=this.length-a.length,p=this.clone(),w=a,b=w.words[w.length-1]|0,I=this._countBits(b);d=26-I,d!==0&&(w=w.ushln(d),p.iushln(d),b=w.words[w.length-1]|0);var y=p.length-w.length,o;if(h!=="mod"){o=new n(null),o.length=y+1,o.words=new Array(o.length);for(var v=0;v<o.length;v++)o.words[v]=0}var R=p.clone()._ishlnsubmul(w,1,y);R.negative===0&&(p=R,o&&(o.words[y]=1));for(var L=y-1;L>=0;L--){var z=(p.words[w.length+L]|0)*67108864+(p.words[w.length+L-1]|0);for(z=Math.min(z/b|0,67108863),p._ishlnsubmul(w,z,L);p.negative!==0;)z--,p.negative=0,p._ishlnsubmul(w,1,L),p.isZero()||(p.negative^=1);o&&(o.words[L]=z)}return o&&o.strip(),p.strip(),h!=="div"&&d!==0&&p.iushrn(d),{div:o||null,mod:p}},n.prototype.divmod=function(a,h,d){if(i(!a.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var p,w,b;return this.negative!==0&&a.negative===0?(b=this.neg().divmod(a,h),h!=="mod"&&(p=b.div.neg()),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.iadd(a)),{div:p,mod:w}):this.negative===0&&a.negative!==0?(b=this.divmod(a.neg(),h),h!=="mod"&&(p=b.div.neg()),{div:p,mod:b.mod}):(this.negative&a.negative)!==0?(b=this.neg().divmod(a.neg(),h),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.isub(a)),{div:b.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new n(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new n(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new n(this.modn(a.words[0]))}:this._wordDiv(a,h)},n.prototype.div=function(a){return this.divmod(a,"div",!1).div},n.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},n.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},n.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var d=h.div.negative!==0?h.mod.isub(a):h.mod,p=a.ushrn(1),w=a.andln(1),b=d.cmp(p);return b<0||w===1&&b===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},n.prototype.modn=function(a){i(a<=67108863);for(var h=(1<<26)%a,d=0,p=this.length-1;p>=0;p--)d=(h*d+(this.words[p]|0))%a;return d},n.prototype.idivn=function(a){i(a<=67108863);for(var h=0,d=this.length-1;d>=0;d--){var p=(this.words[d]|0)+h*67108864;this.words[d]=p/a|0,h=p%a}return this.strip()},n.prototype.divn=function(a){return this.clone().idivn(a)},n.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=new n(0),I=new n(1),y=0;h.isEven()&&d.isEven();)h.iushrn(1),d.iushrn(1),++y;for(var o=d.clone(),v=h.clone();!h.isZero();){for(var R=0,L=1;(h.words[0]&L)===0&&R<26;++R,L<<=1);if(R>0)for(h.iushrn(R);R-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(o),w.isub(v)),p.iushrn(1),w.iushrn(1);for(var z=0,q=1;(d.words[0]&q)===0&&z<26;++z,q<<=1);if(z>0)for(d.iushrn(z);z-- >0;)(b.isOdd()||I.isOdd())&&(b.iadd(o),I.isub(v)),b.iushrn(1),I.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(b),w.isub(I)):(d.isub(h),b.isub(p),I.isub(w))}return{a:b,b:I,gcd:d.iushln(y)}},n.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=d.clone();h.cmpn(1)>0&&d.cmpn(1)>0;){for(var I=0,y=1;(h.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(h.iushrn(I);I-- >0;)p.isOdd()&&p.iadd(b),p.iushrn(1);for(var o=0,v=1;(d.words[0]&v)===0&&o<26;++o,v<<=1);if(o>0)for(d.iushrn(o);o-- >0;)w.isOdd()&&w.iadd(b),w.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(w)):(d.isub(h),w.isub(p))}var R;return h.cmpn(1)===0?R=p:R=w,R.cmpn(0)<0&&R.iadd(a),R},n.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),d=a.clone();h.negative=0,d.negative=0;for(var p=0;h.isEven()&&d.isEven();p++)h.iushrn(1),d.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;d.isEven();)d.iushrn(1);var w=h.cmp(d);if(w<0){var b=h;h=d,d=b}else if(w===0||d.cmpn(1)===0)break;h.isub(d)}while(!0);return d.iushln(p)},n.prototype.invm=function(a){return this.egcd(a).a.umod(a)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(a){return this.words[0]&a},n.prototype.bincn=function(a){i(typeof a=="number");var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return this._expand(d+1),this.words[d]|=p,this;for(var w=p,b=d;w!==0&&b<this.length;b++){var I=this.words[b]|0;I+=w,w=I>>>26,I&=67108863,this.words[b]=I}return w!==0&&(this.words[b]=w,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var d;if(this.length>1)d=1;else{h&&(a=-a),i(a<=67108863,"Number is too big");var p=this.words[0]|0;d=p===a?0:p<a?-1:1}return this.negative!==0?-d|0:d},n.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},n.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,d=this.length-1;d>=0;d--){var p=this.words[d]|0,w=a.words[d]|0;if(p!==w){p<w?h=-1:p>w&&(h=1);break}}return h},n.prototype.gtn=function(a){return this.cmpn(a)===1},n.prototype.gt=function(a){return this.cmp(a)===1},n.prototype.gten=function(a){return this.cmpn(a)>=0},n.prototype.gte=function(a){return this.cmp(a)>=0},n.prototype.ltn=function(a){return this.cmpn(a)===-1},n.prototype.lt=function(a){return this.cmp(a)===-1},n.prototype.lten=function(a){return this.cmpn(a)<=0},n.prototype.lte=function(a){return this.cmp(a)<=0},n.prototype.eqn=function(a){return this.cmpn(a)===0},n.prototype.eq=function(a){return this.cmp(a)===0},n.red=function(a){return new $(a)},n.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(a){return this.red=a,this},n.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},n.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},n.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},n.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},n.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},n.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},n.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},n.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var C={k256:null,p224:null,p192:null,p25519:null};function j(M,a){this.name=M,this.p=new n(a,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var a=new n(null);return a.words=new Array(Math.ceil(this.n/13)),a},j.prototype.ireduce=function(a){var h=a,d;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),d=h.bitLength();while(d>this.n);var p=d<this.n?-1:h.ucmp(this.p);return p===0?(h.words[0]=0,h.length=1):p>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},j.prototype.split=function(a,h){a.iushrn(this.n,0,h)},j.prototype.imulK=function(a){return a.imul(this.k)};function k(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(k,j),k.prototype.split=function(a,h){for(var d=4194303,p=Math.min(a.length,9),w=0;w<p;w++)h.words[w]=a.words[w];if(h.length=p,a.length<=9){a.words[0]=0,a.length=1;return}var b=a.words[9];for(h.words[h.length++]=b&d,w=10;w<a.length;w++){var I=a.words[w]|0;a.words[w-10]=(I&d)<<4|b>>>22,b=I}b>>>=22,a.words[w-10]=b,b===0&&a.length>10?a.length-=10:a.length-=9},k.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,d=0;d<a.length;d++){var p=a.words[d]|0;h+=p*977,a.words[d]=h&67108863,h=p*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function P(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(P,j);function Q(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Q,j);function F(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(F,j),F.prototype.imulK=function(a){for(var h=0,d=0;d<a.length;d++){var p=(a.words[d]|0)*19+h,w=p&67108863;p>>>=26,a.words[d]=w,h=p}return h!==0&&(a.words[a.length++]=h),a},n._prime=function(a){if(C[a])return C[a];var h;if(a==="k256")h=new k;else if(a==="p224")h=new P;else if(a==="p192")h=new Q;else if(a==="p25519")h=new F;else throw new Error("Unknown prime "+a);return C[a]=h,h};function $(M){if(typeof M=="string"){var a=n._prime(M);this.m=a.p,this.prime=a}else i(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}$.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},$.prototype._verify2=function(a,h){i((a.negative|h.negative)===0,"red works only with positives"),i(a.red&&a.red===h.red,"red works only with red numbers")},$.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},$.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},$.prototype.add=function(a,h){this._verify2(a,h);var d=a.add(h);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},$.prototype.iadd=function(a,h){this._verify2(a,h);var d=a.iadd(h);return d.cmp(this.m)>=0&&d.isub(this.m),d},$.prototype.sub=function(a,h){this._verify2(a,h);var d=a.sub(h);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},$.prototype.isub=function(a,h){this._verify2(a,h);var d=a.isub(h);return d.cmpn(0)<0&&d.iadd(this.m),d},$.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},$.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},$.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},$.prototype.isqr=function(a){return this.imul(a,a.clone())},$.prototype.sqr=function(a){return this.mul(a,a)},$.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var d=this.m.add(new n(1)).iushrn(2);return this.pow(a,d)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);i(!p.isZero());var b=new n(1).toRed(this),I=b.redNeg(),y=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new n(2*o*o).toRed(this);this.pow(o,y).cmp(I)!==0;)o.redIAdd(I);for(var v=this.pow(o,p),R=this.pow(a,p.addn(1).iushrn(1)),L=this.pow(a,p),z=w;L.cmp(b)!==0;){for(var q=L,Y=0;q.cmp(b)!==0;Y++)q=q.redSqr();i(Y<z);var T=this.pow(v,new n(1).iushln(z-Y-1));R=R.redMul(T),v=T.redSqr(),L=L.redMul(v),z=Y}return R},$.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},$.prototype.pow=function(a,h){if(h.isZero())return new n(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var d=4,p=new Array(1<<d);p[0]=new n(1).toRed(this),p[1]=a;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],a);var b=p[0],I=0,y=0,o=h.bitLength()%26;for(o===0&&(o=26),w=h.length-1;w>=0;w--){for(var v=h.words[w],R=o-1;R>=0;R--){var L=v>>R&1;if(b!==p[0]&&(b=this.sqr(b)),L===0&&I===0){y=0;continue}I<<=1,I|=L,y++,!(y!==d&&(w!==0||R!==0))&&(b=this.mul(b,p[I]),y=0,I=0)}o=26}return b},$.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},$.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},n.mont=function(a){return new Z(a)};function Z(M){$.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Z,$),Z.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Z.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},Z.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new n(0)._forceRed(this);var d=a.mul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,uR)})(af)),af.exports}var vg,gN;function bS(){if(gN)return vg;gN=1;var r=fR(),e=_v();function t(i){this.rand=i||new e.Rand}return vg=t,t.create=function(s){return new t(s)},t.prototype._randbelow=function(s){var n=s.bitLength(),c=Math.ceil(n/8);do var l=new r(this.rand.generate(c));while(l.cmp(s)>=0);return l},t.prototype._randrange=function(s,n){var c=n.sub(s);return s.add(this._randbelow(c))},t.prototype.test=function(s,n,c){var l=s.bitLength(),u=r.mont(s),f=new r(1).toRed(u);n||(n=Math.max(1,l/48|0));for(var g=s.subn(1),m=0;!g.testn(m);m++);for(var N=s.shrn(m),A=g.toRed(u),_=!0;n>0;n--){var E=this._randrange(new r(2),g);c&&c(E);var x=E.toRed(u).redPow(N);if(!(x.cmp(f)===0||x.cmp(A)===0)){for(var S=1;S<m;S++){if(x=x.redSqr(),x.cmp(f)===0)return!1;if(x.cmp(A)===0)break}if(S===m)return!1}}return _},t.prototype.getDivisor=function(s,n){var c=s.bitLength(),l=r.mont(s),u=new r(1).toRed(l);n||(n=Math.max(1,c/48|0));for(var f=s.subn(1),g=0;!f.testn(g);g++);for(var m=s.shrn(g),N=f.toRed(l);n>0;n--){var A=this._randrange(new r(2),f),_=s.gcd(A);if(_.cmpn(1)!==0)return _;var E=A.toRed(l).redPow(m);if(!(E.cmp(u)===0||E.cmp(N)===0)){for(var x=1;x<g;x++){if(E=E.redSqr(),E.cmp(u)===0)return E.fromRed().subn(1).gcd(s);if(E.cmp(N)===0)break}if(x===g)return E=E.redSqr(),E.fromRed().subn(1).gcd(s)}}return!1},vg}var bg,yN;function MS(){if(yN)return bg;yN=1;var r=zc();bg=x,x.simpleSieve=_,x.fermatTest=E;var e=vS(),t=new e(24),i=bS(),s=new i,n=new e(1),c=new e(2),l=new e(5);new e(16),new e(8);var u=new e(10),f=new e(3);new e(7);var g=new e(11),m=new e(4);new e(12);var N=null;function A(){if(N!==null)return N;var S=1048576,D=[];D[0]=2;for(var C=1,j=3;j<S;j+=2){for(var k=Math.ceil(Math.sqrt(j)),P=0;P<C&&D[P]<=k&&j%D[P]!==0;P++);C!==P&&D[P]<=k||(D[C++]=j)}return N=D,D}function _(S){for(var D=A(),C=0;C<D.length;C++)if(S.modn(D[C])===0)return S.cmpn(D[C])===0;return!0}function E(S){var D=e.mont(S);return c.toRed(D).redPow(S.subn(1)).fromRed().cmpn(1)===0}function x(S,D){if(S<16)return D===2||D===5?new e([140,123]):new e([140,39]);D=new e(D);for(var C,j;;){for(C=new e(r(Math.ceil(S/8)));C.bitLength()>S;)C.ishrn(1);if(C.isEven()&&C.iadd(n),C.testn(1)||C.iadd(c),D.cmp(c)){if(!D.cmp(l))for(;C.mod(u).cmp(f);)C.iadd(m)}else for(;C.mod(t).cmp(g);)C.iadd(m);if(j=C.shrn(1),_(j)&&_(C)&&E(j)&&E(C)&&s.test(j)&&s.test(C))return C}}return bg}const dR={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},pR={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},gR={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},yR={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},wR={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},mR={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},vR={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},bR={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},MR={modp1:dR,modp2:pR,modp5:gR,modp14:yR,modp15:wR,modp16:mR,modp17:vR,modp18:bR};var Mg,wN;function NR(){if(wN)return Mg;wN=1;var r=vS(),e=bS(),t=new e,i=new r(24),s=new r(11),n=new r(10),c=new r(3),l=new r(7),u=MS(),f=zc();Mg=_;function g(x,S){return S=S||"utf8",We.isBuffer(x)||(x=new We(x,S)),this._pub=new r(x),this}function m(x,S){return S=S||"utf8",We.isBuffer(x)||(x=new We(x,S)),this._priv=new r(x),this}var N={};function A(x,S){var D=S.toString("hex"),C=[D,x.toString(16)].join("_");if(C in N)return N[C];var j=0;if(x.isEven()||!u.simpleSieve||!u.fermatTest(x)||!t.test(x))return j+=1,D==="02"||D==="05"?j+=8:j+=4,N[C]=j,j;t.test(x.shrn(1))||(j+=2);var k;switch(D){case"02":x.mod(i).cmp(s)&&(j+=8);break;case"05":k=x.mod(n),k.cmp(c)&&k.cmp(l)&&(j+=8);break;default:j+=4}return N[C]=j,j}function _(x,S,D){this.setGenerator(S),this.__prime=new r(x),this._prime=r.mont(this.__prime),this._primeLen=x.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,D?(this.setPublicKey=g,this.setPrivateKey=m):this._primeCode=8}Object.defineProperty(_.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=A(this.__prime,this.__gen)),this._primeCode}}),_.prototype.generateKeys=function(){return this._priv||(this._priv=new r(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},_.prototype.computeSecret=function(x){x=new r(x),x=x.toRed(this._prime);var S=x.redPow(this._priv).fromRed(),D=new We(S.toArray()),C=this.getPrime();if(D.length<C.length){var j=new We(C.length-D.length);j.fill(0),D=We.concat([j,D])}return D},_.prototype.getPublicKey=function(S){return E(this._pub,S)},_.prototype.getPrivateKey=function(S){return E(this._priv,S)},_.prototype.getPrime=function(x){return E(this.__prime,x)},_.prototype.getGenerator=function(x){return E(this._gen,x)},_.prototype.setGenerator=function(x,S){return S=S||"utf8",We.isBuffer(x)||(x=new We(x,S)),this.__gen=x,this._gen=new r(x),this};function E(x,S){var D=new We(x.toArray());return S?D.toString(S):D}return Mg}var mN;function IR(){if(mN)return Aa;mN=1;var r=MS(),e=MR,t=NR();function i(c){var l=new We(e[c].prime,"hex"),u=new We(e[c].gen,"hex");return new t(l,u)}var s={binary:!0,hex:!0,base64:!0};function n(c,l,u,f){return We.isBuffer(l)||s[l]===void 0?n(c,"binary",l,u):(l=l||"binary",f=f||"binary",u=u||new We([2]),We.isBuffer(u)||(u=new We(u,f)),typeof c=="number"?new t(r(c,u),u,!0):(We.isBuffer(c)||(c=new We(c,l)),new t(c,u,!0)))}return Aa.DiffieHellmanGroup=Aa.createDiffieHellmanGroup=Aa.getDiffieHellman=i,Aa.createDiffieHellman=Aa.DiffieHellman=n,Aa}var Nu={exports:{}},Ng,vN;function AR(){if(vN)return Ng;vN=1;var r={}.toString;return Ng=Array.isArray||function(e){return r.call(e)=="[object Array]"},Ng}var Ig,bN;function NS(){return bN||(bN=1,Ig=fa().EventEmitter),Ig}var Iu={exports:{}},MN;function Nv(){return MN||(MN=1,(function(r,e){var t=ki(),i=t.Buffer;function s(c,l){for(var u in c)l[u]=c[u]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=t:(s(t,e),e.Buffer=n);function n(c,l,u){return i(c,l,u)}s(i,n),n.from=function(c,l,u){if(typeof c=="number")throw new TypeError("Argument must not be a number");return i(c,l,u)},n.alloc=function(c,l,u){if(typeof c!="number")throw new TypeError("Argument must be a number");var f=i(c);return l!==void 0?typeof u=="string"?f.fill(l,u):f.fill(l):f.fill(0),f},n.allocUnsafe=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return i(c)},n.allocUnsafeSlow=function(c){if(typeof c!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(c)}})(Iu,Iu.exports)),Iu.exports}var Ag={exports:{}},NN;function _R(){return NN||(NN=1,(function(r){function e(n,c){if(!(n instanceof c))throw new TypeError("Cannot call a class as a function")}var t=Nv().Buffer,i=Uc();function s(n,c,l){n.copy(c,l)}r.exports=(function(){function n(){e(this,n),this.head=null,this.tail=null,this.length=0}return n.prototype.push=function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length},n.prototype.unshift=function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length},n.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(l){if(this.length===0)return"";for(var u=this.head,f=""+u.data;u=u.next;)f+=l+u.data;return f},n.prototype.concat=function(l){if(this.length===0)return t.alloc(0);for(var u=t.allocUnsafe(l>>>0),f=this.head,g=0;f;)s(f.data,u,g),g+=f.data.length,f=f.next;return u},n})(),i&&i.inspect&&i.inspect.custom&&(r.exports.prototype[i.inspect.custom]=function(){var n=i.inspect({length:this.length});return this.constructor.name+" "+n})})(Ag)),Ag.exports}var _g,IN;function IS(){if(IN)return _g;IN=1;var r=pa();function e(s,n){var c=this,l=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return l||u?(n?n(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(i,this,s)):r.nextTick(i,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(f){!n&&f?c._writableState?c._writableState.errorEmitted||(c._writableState.errorEmitted=!0,r.nextTick(i,c,f)):r.nextTick(i,c,f):n&&n(f)}),this)}function t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(s,n){s.emit("error",n)}return _g={destroy:e,undestroy:t},_g}var Eg,AN;function AS(){if(AN)return Eg;AN=1;var r=pa();Eg=E;function e(b){var I=this;this.next=null,this.entry=null,this.finish=function(){w(I,b)}}var t=!Be.browser&&["v0.10","v0.9."].indexOf(Be.version.slice(0,5))>-1?setImmediate:r.nextTick,i;E.WritableState=A;var s=Object.create(gs());s.inherits=Ge();var n={deprecate:dv()},c=NS(),l=Nv().Buffer,u=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(b){return l.from(b)}function g(b){return l.isBuffer(b)||b instanceof u}var m=IS();s.inherits(E,c);function N(){}function A(b,I){i=i||mc(),b=b||{};var y=I instanceof i;this.objectMode=!!b.objectMode,y&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var o=b.highWaterMark,v=b.writableHighWaterMark,R=this.objectMode?16:16*1024;o||o===0?this.highWaterMark=o:y&&(v||v===0)?this.highWaterMark=v:this.highWaterMark=R,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var L=b.decodeStrings===!1;this.decodeStrings=!L,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(z){Q(I,z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}A.prototype.getBuffer=function(){for(var I=this.bufferedRequest,y=[];I;)y.push(I),I=I.next;return y},(function(){try{Object.defineProperty(A.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var _;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(b){return _.call(this,b)?!0:this!==E?!1:b&&b._writableState instanceof A}})):_=function(b){return b instanceof this};function E(b){if(i=i||mc(),!_.call(E,this)&&!(this instanceof i))return new E(b);this._writableState=new A(b,this),this.writable=!0,b&&(typeof b.write=="function"&&(this._write=b.write),typeof b.writev=="function"&&(this._writev=b.writev),typeof b.destroy=="function"&&(this._destroy=b.destroy),typeof b.final=="function"&&(this._final=b.final)),c.call(this)}E.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function x(b,I){var y=new Error("write after end");b.emit("error",y),r.nextTick(I,y)}function S(b,I,y,o){var v=!0,R=!1;return y===null?R=new TypeError("May not write null values to stream"):typeof y!="string"&&y!==void 0&&!I.objectMode&&(R=new TypeError("Invalid non-string/buffer chunk")),R&&(b.emit("error",R),r.nextTick(o,R),v=!1),v}E.prototype.write=function(b,I,y){var o=this._writableState,v=!1,R=!o.objectMode&&g(b);return R&&!l.isBuffer(b)&&(b=f(b)),typeof I=="function"&&(y=I,I=null),R?I="buffer":I||(I=o.defaultEncoding),typeof y!="function"&&(y=N),o.ended?x(this,y):(R||S(this,o,b,y))&&(o.pendingcb++,v=C(this,o,R,b,I,y)),v},E.prototype.cork=function(){var b=this._writableState;b.corked++},E.prototype.uncork=function(){var b=this._writableState;b.corked&&(b.corked--,!b.writing&&!b.corked&&!b.bufferProcessing&&b.bufferedRequest&&Z(this,b))},E.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+I);return this._writableState.defaultEncoding=I,this};function D(b,I,y){return!b.objectMode&&b.decodeStrings!==!1&&typeof I=="string"&&(I=l.from(I,y)),I}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(b,I,y,o,v,R){if(!y){var L=D(I,o,v);o!==L&&(y=!0,v="buffer",o=L)}var z=I.objectMode?1:o.length;I.length+=z;var q=I.length<I.highWaterMark;if(q||(I.needDrain=!0),I.writing||I.corked){var Y=I.lastBufferedRequest;I.lastBufferedRequest={chunk:o,encoding:v,isBuf:y,callback:R,next:null},Y?Y.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else j(b,I,!1,z,o,v,R);return q}function j(b,I,y,o,v,R,L){I.writelen=o,I.writecb=L,I.writing=!0,I.sync=!0,y?b._writev(v,I.onwrite):b._write(v,R,I.onwrite),I.sync=!1}function k(b,I,y,o,v){--I.pendingcb,y?(r.nextTick(v,o),r.nextTick(d,b,I),b._writableState.errorEmitted=!0,b.emit("error",o)):(v(o),b._writableState.errorEmitted=!0,b.emit("error",o),d(b,I))}function P(b){b.writing=!1,b.writecb=null,b.length-=b.writelen,b.writelen=0}function Q(b,I){var y=b._writableState,o=y.sync,v=y.writecb;if(P(y),I)k(b,y,o,I,v);else{var R=M(y);!R&&!y.corked&&!y.bufferProcessing&&y.bufferedRequest&&Z(b,y),o?t(F,b,y,R,v):F(b,y,R,v)}}function F(b,I,y,o){y||$(b,I),I.pendingcb--,o(),d(b,I)}function $(b,I){I.length===0&&I.needDrain&&(I.needDrain=!1,b.emit("drain"))}function Z(b,I){I.bufferProcessing=!0;var y=I.bufferedRequest;if(b._writev&&y&&y.next){var o=I.bufferedRequestCount,v=new Array(o),R=I.corkedRequestsFree;R.entry=y;for(var L=0,z=!0;y;)v[L]=y,y.isBuf||(z=!1),y=y.next,L+=1;v.allBuffers=z,j(b,I,!0,I.length,v,"",R.finish),I.pendingcb++,I.lastBufferedRequest=null,R.next?(I.corkedRequestsFree=R.next,R.next=null):I.corkedRequestsFree=new e(I),I.bufferedRequestCount=0}else{for(;y;){var q=y.chunk,Y=y.encoding,T=y.callback,O=I.objectMode?1:q.length;if(j(b,I,!1,O,q,Y,T),y=y.next,I.bufferedRequestCount--,I.writing)break}y===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=y,I.bufferProcessing=!1}E.prototype._write=function(b,I,y){y(new Error("_write() is not implemented"))},E.prototype._writev=null,E.prototype.end=function(b,I,y){var o=this._writableState;typeof b=="function"?(y=b,b=null,I=null):typeof I=="function"&&(y=I,I=null),b!=null&&this.write(b,I),o.corked&&(o.corked=1,this.uncork()),o.ending||p(this,o,y)};function M(b){return b.ending&&b.length===0&&b.bufferedRequest===null&&!b.finished&&!b.writing}function a(b,I){b._final(function(y){I.pendingcb--,y&&b.emit("error",y),I.prefinished=!0,b.emit("prefinish"),d(b,I)})}function h(b,I){!I.prefinished&&!I.finalCalled&&(typeof b._final=="function"?(I.pendingcb++,I.finalCalled=!0,r.nextTick(a,b,I)):(I.prefinished=!0,b.emit("prefinish")))}function d(b,I){var y=M(I);return y&&(h(b,I),I.pendingcb===0&&(I.finished=!0,b.emit("finish"))),y}function p(b,I,y){I.ending=!0,d(b,I),y&&(I.finished?r.nextTick(y):b.once("finish",y)),I.ended=!0,b.writable=!1}function w(b,I,y){var o=b.entry;for(b.entry=null;o;){var v=o.callback;I.pendingcb--,v(y),o=o.next}I.corkedRequestsFree.next=b}return Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(b){this._writableState&&(this._writableState.destroyed=b)}}),E.prototype.destroy=m.destroy,E.prototype._undestroy=m.undestroy,E.prototype._destroy=function(b,I){this.end(),I(b)},Eg}var Dg,_N;function mc(){if(_N)return Dg;_N=1;var r=pa(),e=Object.keys||function(m){var N=[];for(var A in m)N.push(A);return N};Dg=u;var t=Object.create(gs());t.inherits=Ge();var i=_S(),s=AS();t.inherits(u,i);for(var n=e(s.prototype),c=0;c<n.length;c++){var l=n[c];u.prototype[l]||(u.prototype[l]=s.prototype[l])}function u(m){if(!(this instanceof u))return new u(m);i.call(this,m),s.call(this,m),m&&m.readable===!1&&(this.readable=!1),m&&m.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,m&&m.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",f)}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(g,this)}function g(m){m.end()}return Object.defineProperty(u.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),u.prototype._destroy=function(m,N){this.push(null),this.end(),r.nextTick(N,m)},Dg}var Sg,EN;function _S(){if(EN)return Sg;EN=1;var r=pa();Sg=D;var e=AR(),t;D.ReadableState=S,fa().EventEmitter;var i=function(T,O){return T.listeners(O).length},s=NS(),n=Nv().Buffer,c=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(T){return n.from(T)}function u(T){return n.isBuffer(T)||T instanceof c}var f=Object.create(gs());f.inherits=Ge();var g=Uc(),m=void 0;g&&g.debuglog?m=g.debuglog("stream"):m=function(){};var N=_R(),A=IS(),_;f.inherits(D,s);var E=["error","close","destroy","pause","resume"];function x(T,O,B){if(typeof T.prependListener=="function")return T.prependListener(O,B);!T._events||!T._events[O]?T.on(O,B):e(T._events[O])?T._events[O].unshift(B):T._events[O]=[B,T._events[O]]}function S(T,O){t=t||mc(),T=T||{};var B=O instanceof t;this.objectMode=!!T.objectMode,B&&(this.objectMode=this.objectMode||!!T.readableObjectMode);var W=T.highWaterMark,V=T.readableHighWaterMark,U=this.objectMode?16:16*1024;W||W===0?this.highWaterMark=W:B&&(V||V===0)?this.highWaterMark=V:this.highWaterMark=U,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=T.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,T.encoding&&(_||(_=Va().StringDecoder),this.decoder=new _(T.encoding),this.encoding=T.encoding)}function D(T){if(t=t||mc(),!(this instanceof D))return new D(T);this._readableState=new S(T,this),this.readable=!0,T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy)),s.call(this)}Object.defineProperty(D.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(T){this._readableState&&(this._readableState.destroyed=T)}}),D.prototype.destroy=A.destroy,D.prototype._undestroy=A.undestroy,D.prototype._destroy=function(T,O){this.push(null),O(T)},D.prototype.push=function(T,O){var B=this._readableState,W;return B.objectMode?W=!0:typeof T=="string"&&(O=O||B.defaultEncoding,O!==B.encoding&&(T=n.from(T,O),O=""),W=!0),C(this,T,O,!1,W)},D.prototype.unshift=function(T){return C(this,T,null,!0,!1)};function C(T,O,B,W,V){var U=T._readableState;if(O===null)U.reading=!1,Z(T,U);else{var H;V||(H=k(U,O)),H?T.emit("error",H):U.objectMode||O&&O.length>0?(typeof O!="string"&&!U.objectMode&&Object.getPrototypeOf(O)!==n.prototype&&(O=l(O)),W?U.endEmitted?T.emit("error",new Error("stream.unshift() after end event")):j(T,U,O,!0):U.ended?T.emit("error",new Error("stream.push() after EOF")):(U.reading=!1,U.decoder&&!B?(O=U.decoder.write(O),U.objectMode||O.length!==0?j(T,U,O,!1):h(T,U)):j(T,U,O,!1))):W||(U.reading=!1)}return P(U)}function j(T,O,B,W){O.flowing&&O.length===0&&!O.sync?(T.emit("data",B),T.read(0)):(O.length+=O.objectMode?1:B.length,W?O.buffer.unshift(B):O.buffer.push(B),O.needReadable&&M(T)),h(T,O)}function k(T,O){var B;return!u(O)&&typeof O!="string"&&O!==void 0&&!T.objectMode&&(B=new TypeError("Invalid non-string/buffer chunk")),B}function P(T){return!T.ended&&(T.needReadable||T.length<T.highWaterMark||T.length===0)}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(T){return _||(_=Va().StringDecoder),this._readableState.decoder=new _(T),this._readableState.encoding=T,this};var Q=8388608;function F(T){return T>=Q?T=Q:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}function $(T,O){return T<=0||O.length===0&&O.ended?0:O.objectMode?1:T!==T?O.flowing&&O.length?O.buffer.head.data.length:O.length:(T>O.highWaterMark&&(O.highWaterMark=F(T)),T<=O.length?T:O.ended?O.length:(O.needReadable=!0,0))}D.prototype.read=function(T){m("read",T),T=parseInt(T,10);var O=this._readableState,B=T;if(T!==0&&(O.emittedReadable=!1),T===0&&O.needReadable&&(O.length>=O.highWaterMark||O.ended))return m("read: emitReadable",O.length,O.ended),O.length===0&&O.ended?z(this):M(this),null;if(T=$(T,O),T===0&&O.ended)return O.length===0&&z(this),null;var W=O.needReadable;m("need readable",W),(O.length===0||O.length-T<O.highWaterMark)&&(W=!0,m("length less than watermark",W)),O.ended||O.reading?(W=!1,m("reading or ended",W)):W&&(m("do read"),O.reading=!0,O.sync=!0,O.length===0&&(O.needReadable=!0),this._read(O.highWaterMark),O.sync=!1,O.reading||(T=$(B,O)));var V;return T>0?V=o(T,O):V=null,V===null?(O.needReadable=!0,T=0):O.length-=T,O.length===0&&(O.ended||(O.needReadable=!0),B!==T&&O.ended&&z(this)),V!==null&&this.emit("data",V),V};function Z(T,O){if(!O.ended){if(O.decoder){var B=O.decoder.end();B&&B.length&&(O.buffer.push(B),O.length+=O.objectMode?1:B.length)}O.ended=!0,M(T)}}function M(T){var O=T._readableState;O.needReadable=!1,O.emittedReadable||(m("emitReadable",O.flowing),O.emittedReadable=!0,O.sync?r.nextTick(a,T):a(T))}function a(T){m("emit readable"),T.emit("readable"),y(T)}function h(T,O){O.readingMore||(O.readingMore=!0,r.nextTick(d,T,O))}function d(T,O){for(var B=O.length;!O.reading&&!O.flowing&&!O.ended&&O.length<O.highWaterMark&&(m("maybeReadMore read 0"),T.read(0),B!==O.length);)B=O.length;O.readingMore=!1}D.prototype._read=function(T){this.emit("error",new Error("_read() is not implemented"))},D.prototype.pipe=function(T,O){var B=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=T;break;case 1:W.pipes=[W.pipes,T];break;default:W.pipes.push(T);break}W.pipesCount+=1,m("pipe count=%d opts=%j",W.pipesCount,O);var V=(!O||O.end!==!1)&&T!==Be.stdout&&T!==Be.stderr,U=V?de:Ke;W.endEmitted?r.nextTick(U):B.once("end",U),T.on("unpipe",H);function H(se,ce){m("onunpipe"),se===B&&ce&&ce.hasUnpiped===!1&&(ce.hasUnpiped=!0,Qe())}function de(){m("onend"),T.end()}var ee=p(B);T.on("drain",ee);var J=!1;function Qe(){m("cleanup"),T.removeListener("close",re),T.removeListener("finish",ae),T.removeListener("drain",ee),T.removeListener("error",et),T.removeListener("unpipe",H),B.removeListener("end",de),B.removeListener("end",Ke),B.removeListener("data",K),J=!0,W.awaitDrain&&(!T._writableState||T._writableState.needDrain)&&ee()}var oe=!1;B.on("data",K);function K(se){m("ondata"),oe=!1;var ce=T.write(se);ce===!1&&!oe&&((W.pipesCount===1&&W.pipes===T||W.pipesCount>1&&Y(W.pipes,T)!==-1)&&!J&&(m("false write response, pause",W.awaitDrain),W.awaitDrain++,oe=!0),B.pause())}function et(se){m("onerror",se),Ke(),T.removeListener("error",et),i(T,"error")===0&&T.emit("error",se)}x(T,"error",et);function re(){T.removeListener("finish",ae),Ke()}T.once("close",re);function ae(){m("onfinish"),T.removeListener("close",re),Ke()}T.once("finish",ae);function Ke(){m("unpipe"),B.unpipe(T)}return T.emit("pipe",B),W.flowing||(m("pipe resume"),B.resume()),T};function p(T){return function(){var O=T._readableState;m("pipeOnDrain",O.awaitDrain),O.awaitDrain&&O.awaitDrain--,O.awaitDrain===0&&i(T,"data")&&(O.flowing=!0,y(T))}}D.prototype.unpipe=function(T){var O=this._readableState,B={hasUnpiped:!1};if(O.pipesCount===0)return this;if(O.pipesCount===1)return T&&T!==O.pipes?this:(T||(T=O.pipes),O.pipes=null,O.pipesCount=0,O.flowing=!1,T&&T.emit("unpipe",this,B),this);if(!T){var W=O.pipes,V=O.pipesCount;O.pipes=null,O.pipesCount=0,O.flowing=!1;for(var U=0;U<V;U++)W[U].emit("unpipe",this,{hasUnpiped:!1});return this}var H=Y(O.pipes,T);return H===-1?this:(O.pipes.splice(H,1),O.pipesCount-=1,O.pipesCount===1&&(O.pipes=O.pipes[0]),T.emit("unpipe",this,B),this)},D.prototype.on=function(T,O){var B=s.prototype.on.call(this,T,O);if(T==="data")this._readableState.flowing!==!1&&this.resume();else if(T==="readable"){var W=this._readableState;!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.emittedReadable=!1,W.reading?W.length&&M(this):r.nextTick(w,this))}return B},D.prototype.addListener=D.prototype.on;function w(T){m("readable nexttick read 0"),T.read(0)}D.prototype.resume=function(){var T=this._readableState;return T.flowing||(m("resume"),T.flowing=!0,b(this,T)),this};function b(T,O){O.resumeScheduled||(O.resumeScheduled=!0,r.nextTick(I,T,O))}function I(T,O){O.reading||(m("resume read 0"),T.read(0)),O.resumeScheduled=!1,O.awaitDrain=0,T.emit("resume"),y(T),O.flowing&&!O.reading&&T.read(0)}D.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function y(T){var O=T._readableState;for(m("flow",O.flowing);O.flowing&&T.read()!==null;);}D.prototype.wrap=function(T){var O=this,B=this._readableState,W=!1;T.on("end",function(){if(m("wrapped end"),B.decoder&&!B.ended){var H=B.decoder.end();H&&H.length&&O.push(H)}O.push(null)}),T.on("data",function(H){if(m("wrapped data"),B.decoder&&(H=B.decoder.write(H)),!(B.objectMode&&H==null)&&!(!B.objectMode&&(!H||!H.length))){var de=O.push(H);de||(W=!0,T.pause())}});for(var V in T)this[V]===void 0&&typeof T[V]=="function"&&(this[V]=(function(H){return function(){return T[H].apply(T,arguments)}})(V));for(var U=0;U<E.length;U++)T.on(E[U],this.emit.bind(this,E[U]));return this._read=function(H){m("wrapped _read",H),W&&(W=!1,T.resume())},this},Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),D._fromList=o;function o(T,O){if(O.length===0)return null;var B;return O.objectMode?B=O.buffer.shift():!T||T>=O.length?(O.decoder?B=O.buffer.join(""):O.buffer.length===1?B=O.buffer.head.data:B=O.buffer.concat(O.length),O.buffer.clear()):B=v(T,O.buffer,O.decoder),B}function v(T,O,B){var W;return T<O.head.data.length?(W=O.head.data.slice(0,T),O.head.data=O.head.data.slice(T)):T===O.head.data.length?W=O.shift():W=B?R(T,O):L(T,O),W}function R(T,O){var B=O.head,W=1,V=B.data;for(T-=V.length;B=B.next;){var U=B.data,H=T>U.length?U.length:T;if(H===U.length?V+=U:V+=U.slice(0,T),T-=H,T===0){H===U.length?(++W,B.next?O.head=B.next:O.head=O.tail=null):(O.head=B,B.data=U.slice(H));break}++W}return O.length-=W,V}function L(T,O){var B=n.allocUnsafe(T),W=O.head,V=1;for(W.data.copy(B),T-=W.data.length;W=W.next;){var U=W.data,H=T>U.length?U.length:T;if(U.copy(B,B.length-T,0,H),T-=H,T===0){H===U.length?(++V,W.next?O.head=W.next:O.head=O.tail=null):(O.head=W,W.data=U.slice(H));break}++V}return O.length-=V,B}function z(T){var O=T._readableState;if(O.length>0)throw new Error('"endReadable()" called on non-empty stream');O.endEmitted||(O.ended=!0,r.nextTick(q,O,T))}function q(T,O){!T.endEmitted&&T.length===0&&(T.endEmitted=!0,O.readable=!1,O.emit("end"))}function Y(T,O){for(var B=0,W=T.length;B<W;B++)if(T[B]===O)return B;return-1}return Sg}var xg,DN;function ES(){if(DN)return xg;DN=1,xg=i;var r=mc(),e=Object.create(gs());e.inherits=Ge(),e.inherits(i,r);function t(c,l){var u=this._transformState;u.transforming=!1;var f=u.writecb;if(!f)return this.emit("error",new Error("write callback called multiple times"));u.writechunk=null,u.writecb=null,l!=null&&this.push(l),f(c);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function i(c){if(!(this instanceof i))return new i(c);r.call(this,c),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",s)}function s(){var c=this;typeof this._flush=="function"?this._flush(function(l,u){n(c,l,u)}):n(this,null,null)}i.prototype.push=function(c,l){return this._transformState.needTransform=!1,r.prototype.push.call(this,c,l)},i.prototype._transform=function(c,l,u){throw new Error("_transform() is not implemented")},i.prototype._write=function(c,l,u){var f=this._transformState;if(f.writecb=u,f.writechunk=c,f.writeencoding=l,!f.transforming){var g=this._readableState;(f.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},i.prototype._read=function(c){var l=this._transformState;l.writechunk!==null&&l.writecb&&!l.transforming?(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform)):l.needTransform=!0},i.prototype._destroy=function(c,l){var u=this;r.prototype._destroy.call(this,c,function(f){l(f),u.emit("close")})};function n(c,l,u){if(l)return c.emit("error",l);if(u!=null&&c.push(u),c._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(c._transformState.transforming)throw new Error("Calling transform done when still transforming");return c.push(null)}return xg}var Tg,SN;function ER(){if(SN)return Tg;SN=1,Tg=t;var r=ES(),e=Object.create(gs());e.inherits=Ge(),e.inherits(t,r);function t(i){if(!(this instanceof t))return new t(i);r.call(this,i)}return t.prototype._transform=function(i,s,n){n(null,i)},Tg}var xN;function DR(){return xN||(xN=1,(function(r,e){e=r.exports=_S(),e.Stream=e,e.Readable=e,e.Writable=AS(),e.Duplex=mc(),e.Transform=ES(),e.PassThrough=ER()})(Nu,Nu.exports)),Nu.exports}var rh={exports:{}},jg,TN;function Iv(){if(TN)return jg;TN=1;var r=Zm(),e=zc(),t=tt().Buffer;function i(c){var l=c.modulus.byteLength(),u;do u=new r(e(l));while(u.cmp(c.modulus)>=0||!u.umod(c.prime1)||!u.umod(c.prime2));return u}function s(c){var l=i(c),u=l.toRed(r.mont(c.modulus)).redPow(new r(c.publicExponent)).fromRed();return{blinder:u,unblinder:l.invm(c.modulus)}}function n(c,l){var u=s(l),f=l.modulus.byteLength(),g=new r(c).mul(u.blinder).umod(l.modulus),m=g.toRed(r.mont(l.prime1)),N=g.toRed(r.mont(l.prime2)),A=l.coefficient,_=l.prime1,E=l.prime2,x=m.redPow(l.exponent1).fromRed(),S=N.redPow(l.exponent2).fromRed(),D=x.isub(S).imul(A).umod(_).imul(E);return S.iadd(D).imul(u.unblinder).umod(l.modulus).toArrayLike(t,"be",f)}return n.getr=i,jg=n,jg}var In={},Cg={},of={exports:{}},SR=of.exports,jN;function xR(){return jN||(jN=1,(function(r){(function(e,t){function i(M,a){if(!M)throw new Error(a||"Assertion failed")}function s(M,a){M.super_=a;var h=function(){};h.prototype=a.prototype,M.prototype=new h,M.prototype.constructor=M}function n(M,a,h){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(M||0,a||10,h||"be"))}typeof e=="object"?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=ki().Buffer}catch{}n.isBN=function(a){return a instanceof n?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===n.wordSize&&Array.isArray(a.words)},n.max=function(a,h){return a.cmp(h)>0?a:h},n.min=function(a,h){return a.cmp(h)<0?a:h},n.prototype._init=function(a,h,d){if(typeof a=="number")return this._initNumber(a,h,d);if(typeof a=="object")return this._initArray(a,h,d);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var p=0;a[0]==="-"&&(p++,this.negative=1),p<a.length&&(h===16?this._parseHex(a,p,d):(this._parseBase(a,h,p),d==="le"&&this._initArray(this.toArray(),h,d)))},n.prototype._initNumber=function(a,h,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),h,d)},n.prototype._initArray=function(a,h,d){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,b,I=0;if(d==="be")for(p=a.length-1,w=0;p>=0;p-=3)b=a[p]|a[p-1]<<8|a[p-2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);else if(d==="le")for(p=0,w=0;p<a.length;p+=3)b=a[p]|a[p+1]<<8|a[p+2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);return this.strip()};function l(M,a){var h=M.charCodeAt(a);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function u(M,a,h){var d=l(M,h);return h-1>=a&&(d|=l(M,h-1)<<4),d}n.prototype._parseHex=function(a,h,d){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,b=0,I;if(d==="be")for(p=a.length-1;p>=h;p-=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8;else{var y=a.length-h;for(p=y%2===0?h+1:h;p<a.length;p+=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8}this.strip()};function f(M,a,h,d){for(var p=0,w=Math.min(M.length,h),b=a;b<w;b++){var I=M.charCodeAt(b)-48;p*=d,I>=49?p+=I-49+10:I>=17?p+=I-17+10:p+=I}return p}n.prototype._parseBase=function(a,h,d){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=h)p++;p--,w=w/h|0;for(var b=a.length-d,I=b%p,y=Math.min(b,b-I)+d,o=0,v=d;v<y;v+=p)o=f(a,v,v+p,h),this.imuln(w),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(I!==0){var R=1;for(o=f(a,v,a.length,h),v=0;v<I;v++)R*=h;this.imuln(R),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},n.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red},n.prototype.clone=function(){var a=new n(null);return this.copy(a),a},n.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(a,h){a=a||10,h=h|0||1;var d;if(a===16||a==="hex"){d="";for(var p=0,w=0,b=0;b<this.length;b++){var I=this.words[b],y=((I<<p|w)&16777215).toString(16);w=I>>>24-p&16777215,p+=2,p>=26&&(p-=26,b--),w!==0||b!==this.length-1?d=g[6-y.length]+y+d:d=y+d}for(w!==0&&(d=w.toString(16)+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var o=m[a],v=N[a];d="";var R=this.clone();for(R.negative=0;!R.isZero();){var L=R.modn(v).toString(a);R=R.idivn(v),R.isZero()?d=L+d:d=g[o-L.length]+L+d}for(this.isZero()&&(d="0"+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(a,h){return i(typeof c<"u"),this.toArrayLike(c,a,h)},n.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)},n.prototype.toArrayLike=function(a,h,d){var p=this.byteLength(),w=d||Math.max(1,p);i(p<=w,"byte array longer than desired length"),i(w>0,"Requested array length <= 0"),this.strip();var b=h==="le",I=new a(w),y,o,v=this.clone();if(b){for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[o]=y;for(;o<w;o++)I[o]=0}else{for(o=0;o<w-p;o++)I[o]=0;for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[w-o-1]=y}return I},Math.clz32?n.prototype._countBits=function(a){return 32-Math.clz32(a)}:n.prototype._countBits=function(a){var h=a,d=0;return h>=4096&&(d+=13,h>>>=13),h>=64&&(d+=7,h>>>=7),h>=8&&(d+=4,h>>>=4),h>=2&&(d+=2,h>>>=2),d+h},n.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,d=0;return(h&8191)===0&&(d+=13,h>>>=13),(h&127)===0&&(d+=7,h>>>=7),(h&15)===0&&(d+=4,h>>>=4),(h&3)===0&&(d+=2,h>>>=2),(h&1)===0&&d++,d},n.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function A(M){for(var a=new Array(M.bitLength()),h=0;h<a.length;h++){var d=h/26|0,p=h%26;a[h]=(M.words[d]&1<<p)>>>p}return a}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var d=this._zeroBits(this.words[h]);if(a+=d,d!==26)break}return a},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},n.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this.strip()},n.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},n.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},n.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},n.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var d=0;d<h.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=h.length,this.strip()},n.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},n.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},n.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},n.prototype.iuxor=function(a){var h,d;this.length>a.length?(h=this,d=a):(h=a,d=this);for(var p=0;p<d.length;p++)this.words[p]=h.words[p]^d.words[p];if(this!==h)for(;p<h.length;p++)this.words[p]=h.words[p];return this.length=h.length,this.strip()},n.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},n.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},n.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},n.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,d=a%26;this._expand(h),d>0&&h--;for(var p=0;p<h;p++)this.words[p]=~this.words[p]&67108863;return d>0&&(this.words[p]=~this.words[p]&67108863>>26-d),this.strip()},n.prototype.notn=function(a){return this.clone().inotn(a)},n.prototype.setn=function(a,h){i(typeof a=="number"&&a>=0);var d=a/26|0,p=a%26;return this._expand(d+1),h?this.words[d]=this.words[d]|1<<p:this.words[d]=this.words[d]&~(1<<p),this.strip()},n.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var d,p;this.length>a.length?(d=this,p=a):(d=a,p=this);for(var w=0,b=0;b<p.length;b++)h=(d.words[b]|0)+(p.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;for(;w!==0&&b<d.length;b++)h=(d.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;if(this.length=d.length,w!==0)this.words[this.length]=w,this.length++;else if(d!==this)for(;b<d.length;b++)this.words[b]=d.words[b];return this},n.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},n.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;d>0?(p=this,w=a):(p=a,w=this);for(var b=0,I=0;I<w.length;I++)h=(p.words[I]|0)-(w.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;for(;b!==0&&I<p.length;I++)h=(p.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;if(b===0&&I<p.length&&p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this.length=Math.max(this.length,I),p!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(a){return this.clone().isub(a)};function _(M,a,h){h.negative=a.negative^M.negative;var d=M.length+a.length|0;h.length=d,d=d-1|0;var p=M.words[0]|0,w=a.words[0]|0,b=p*w,I=b&67108863,y=b/67108864|0;h.words[0]=I;for(var o=1;o<d;o++){for(var v=y>>>26,R=y&67108863,L=Math.min(o,a.length-1),z=Math.max(0,o-M.length+1);z<=L;z++){var q=o-z|0;p=M.words[q]|0,w=a.words[z]|0,b=p*w+R,v+=b/67108864|0,R=b&67108863}h.words[o]=R|0,y=v|0}return y!==0?h.words[o]=y|0:h.length--,h.strip()}var E=function(a,h,d){var p=a.words,w=h.words,b=d.words,I=0,y,o,v,R=p[0]|0,L=R&8191,z=R>>>13,q=p[1]|0,Y=q&8191,T=q>>>13,O=p[2]|0,B=O&8191,W=O>>>13,V=p[3]|0,U=V&8191,H=V>>>13,de=p[4]|0,ee=de&8191,J=de>>>13,Qe=p[5]|0,oe=Qe&8191,K=Qe>>>13,et=p[6]|0,re=et&8191,ae=et>>>13,Ke=p[7]|0,se=Ke&8191,ce=Ke>>>13,Dt=p[8]|0,he=Dt&8191,le=Dt>>>13,Cr=p[9]|0,ue=Cr&8191,ve=Cr>>>13,Br=w[0]|0,_e=Br&8191,be=Br>>>13,Or=w[1]|0,Me=Or&8191,Ne=Or>>>13,Vr=w[2]|0,fe=Vr&8191,Ie=Vr>>>13,Fr=w[3]|0,Ee=Fr&8191,ge=Fr>>>13,Er=w[4]|0,ye=Er&8191,we=Er>>>13,Pr=w[5]|0,pe=Pr&8191,De=Pr>>>13,Hr=w[6]|0,Se=Hr&8191,xe=Hr>>>13,Zr=w[7]|0,Ae=Zr&8191,me=Zr>>>13,tr=w[8]|0,Te=tr&8191,je=tr>>>13,Gr=w[9]|0,Ce=Gr&8191,Oe=Gr>>>13;d.negative=a.negative^h.negative,d.length=19,y=Math.imul(L,_e),o=Math.imul(L,be),o=o+Math.imul(z,_e)|0,v=Math.imul(z,be);var mt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,y=Math.imul(Y,_e),o=Math.imul(Y,be),o=o+Math.imul(T,_e)|0,v=Math.imul(T,be),y=y+Math.imul(L,Me)|0,o=o+Math.imul(L,Ne)|0,o=o+Math.imul(z,Me)|0,v=v+Math.imul(z,Ne)|0;var rr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,y=Math.imul(B,_e),o=Math.imul(B,be),o=o+Math.imul(W,_e)|0,v=Math.imul(W,be),y=y+Math.imul(Y,Me)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(T,Me)|0,v=v+Math.imul(T,Ne)|0,y=y+Math.imul(L,fe)|0,o=o+Math.imul(L,Ie)|0,o=o+Math.imul(z,fe)|0,v=v+Math.imul(z,Ie)|0;var ir=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul(U,_e),o=Math.imul(U,be),o=o+Math.imul(H,_e)|0,v=Math.imul(H,be),y=y+Math.imul(B,Me)|0,o=o+Math.imul(B,Ne)|0,o=o+Math.imul(W,Me)|0,v=v+Math.imul(W,Ne)|0,y=y+Math.imul(Y,fe)|0,o=o+Math.imul(Y,Ie)|0,o=o+Math.imul(T,fe)|0,v=v+Math.imul(T,Ie)|0,y=y+Math.imul(L,Ee)|0,o=o+Math.imul(L,ge)|0,o=o+Math.imul(z,Ee)|0,v=v+Math.imul(z,ge)|0;var nr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(ee,_e),o=Math.imul(ee,be),o=o+Math.imul(J,_e)|0,v=Math.imul(J,be),y=y+Math.imul(U,Me)|0,o=o+Math.imul(U,Ne)|0,o=o+Math.imul(H,Me)|0,v=v+Math.imul(H,Ne)|0,y=y+Math.imul(B,fe)|0,o=o+Math.imul(B,Ie)|0,o=o+Math.imul(W,fe)|0,v=v+Math.imul(W,Ie)|0,y=y+Math.imul(Y,Ee)|0,o=o+Math.imul(Y,ge)|0,o=o+Math.imul(T,Ee)|0,v=v+Math.imul(T,ge)|0,y=y+Math.imul(L,ye)|0,o=o+Math.imul(L,we)|0,o=o+Math.imul(z,ye)|0,v=v+Math.imul(z,we)|0;var sr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(oe,_e),o=Math.imul(oe,be),o=o+Math.imul(K,_e)|0,v=Math.imul(K,be),y=y+Math.imul(ee,Me)|0,o=o+Math.imul(ee,Ne)|0,o=o+Math.imul(J,Me)|0,v=v+Math.imul(J,Ne)|0,y=y+Math.imul(U,fe)|0,o=o+Math.imul(U,Ie)|0,o=o+Math.imul(H,fe)|0,v=v+Math.imul(H,Ie)|0,y=y+Math.imul(B,Ee)|0,o=o+Math.imul(B,ge)|0,o=o+Math.imul(W,Ee)|0,v=v+Math.imul(W,ge)|0,y=y+Math.imul(Y,ye)|0,o=o+Math.imul(Y,we)|0,o=o+Math.imul(T,ye)|0,v=v+Math.imul(T,we)|0,y=y+Math.imul(L,pe)|0,o=o+Math.imul(L,De)|0,o=o+Math.imul(z,pe)|0,v=v+Math.imul(z,De)|0;var ar=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ar>>>26)|0,ar&=67108863,y=Math.imul(re,_e),o=Math.imul(re,be),o=o+Math.imul(ae,_e)|0,v=Math.imul(ae,be),y=y+Math.imul(oe,Me)|0,o=o+Math.imul(oe,Ne)|0,o=o+Math.imul(K,Me)|0,v=v+Math.imul(K,Ne)|0,y=y+Math.imul(ee,fe)|0,o=o+Math.imul(ee,Ie)|0,o=o+Math.imul(J,fe)|0,v=v+Math.imul(J,Ie)|0,y=y+Math.imul(U,Ee)|0,o=o+Math.imul(U,ge)|0,o=o+Math.imul(H,Ee)|0,v=v+Math.imul(H,ge)|0,y=y+Math.imul(B,ye)|0,o=o+Math.imul(B,we)|0,o=o+Math.imul(W,ye)|0,v=v+Math.imul(W,we)|0,y=y+Math.imul(Y,pe)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(T,pe)|0,v=v+Math.imul(T,De)|0,y=y+Math.imul(L,Se)|0,o=o+Math.imul(L,xe)|0,o=o+Math.imul(z,Se)|0,v=v+Math.imul(z,xe)|0;var St=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(St>>>26)|0,St&=67108863,y=Math.imul(se,_e),o=Math.imul(se,be),o=o+Math.imul(ce,_e)|0,v=Math.imul(ce,be),y=y+Math.imul(re,Me)|0,o=o+Math.imul(re,Ne)|0,o=o+Math.imul(ae,Me)|0,v=v+Math.imul(ae,Ne)|0,y=y+Math.imul(oe,fe)|0,o=o+Math.imul(oe,Ie)|0,o=o+Math.imul(K,fe)|0,v=v+Math.imul(K,Ie)|0,y=y+Math.imul(ee,Ee)|0,o=o+Math.imul(ee,ge)|0,o=o+Math.imul(J,Ee)|0,v=v+Math.imul(J,ge)|0,y=y+Math.imul(U,ye)|0,o=o+Math.imul(U,we)|0,o=o+Math.imul(H,ye)|0,v=v+Math.imul(H,we)|0,y=y+Math.imul(B,pe)|0,o=o+Math.imul(B,De)|0,o=o+Math.imul(W,pe)|0,v=v+Math.imul(W,De)|0,y=y+Math.imul(Y,Se)|0,o=o+Math.imul(Y,xe)|0,o=o+Math.imul(T,Se)|0,v=v+Math.imul(T,xe)|0,y=y+Math.imul(L,Ae)|0,o=o+Math.imul(L,me)|0,o=o+Math.imul(z,Ae)|0,v=v+Math.imul(z,me)|0;var or=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(he,_e),o=Math.imul(he,be),o=o+Math.imul(le,_e)|0,v=Math.imul(le,be),y=y+Math.imul(se,Me)|0,o=o+Math.imul(se,Ne)|0,o=o+Math.imul(ce,Me)|0,v=v+Math.imul(ce,Ne)|0,y=y+Math.imul(re,fe)|0,o=o+Math.imul(re,Ie)|0,o=o+Math.imul(ae,fe)|0,v=v+Math.imul(ae,Ie)|0,y=y+Math.imul(oe,Ee)|0,o=o+Math.imul(oe,ge)|0,o=o+Math.imul(K,Ee)|0,v=v+Math.imul(K,ge)|0,y=y+Math.imul(ee,ye)|0,o=o+Math.imul(ee,we)|0,o=o+Math.imul(J,ye)|0,v=v+Math.imul(J,we)|0,y=y+Math.imul(U,pe)|0,o=o+Math.imul(U,De)|0,o=o+Math.imul(H,pe)|0,v=v+Math.imul(H,De)|0,y=y+Math.imul(B,Se)|0,o=o+Math.imul(B,xe)|0,o=o+Math.imul(W,Se)|0,v=v+Math.imul(W,xe)|0,y=y+Math.imul(Y,Ae)|0,o=o+Math.imul(Y,me)|0,o=o+Math.imul(T,Ae)|0,v=v+Math.imul(T,me)|0,y=y+Math.imul(L,Te)|0,o=o+Math.imul(L,je)|0,o=o+Math.imul(z,Te)|0,v=v+Math.imul(z,je)|0;var cr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(cr>>>26)|0,cr&=67108863,y=Math.imul(ue,_e),o=Math.imul(ue,be),o=o+Math.imul(ve,_e)|0,v=Math.imul(ve,be),y=y+Math.imul(he,Me)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(le,Me)|0,v=v+Math.imul(le,Ne)|0,y=y+Math.imul(se,fe)|0,o=o+Math.imul(se,Ie)|0,o=o+Math.imul(ce,fe)|0,v=v+Math.imul(ce,Ie)|0,y=y+Math.imul(re,Ee)|0,o=o+Math.imul(re,ge)|0,o=o+Math.imul(ae,Ee)|0,v=v+Math.imul(ae,ge)|0,y=y+Math.imul(oe,ye)|0,o=o+Math.imul(oe,we)|0,o=o+Math.imul(K,ye)|0,v=v+Math.imul(K,we)|0,y=y+Math.imul(ee,pe)|0,o=o+Math.imul(ee,De)|0,o=o+Math.imul(J,pe)|0,v=v+Math.imul(J,De)|0,y=y+Math.imul(U,Se)|0,o=o+Math.imul(U,xe)|0,o=o+Math.imul(H,Se)|0,v=v+Math.imul(H,xe)|0,y=y+Math.imul(B,Ae)|0,o=o+Math.imul(B,me)|0,o=o+Math.imul(W,Ae)|0,v=v+Math.imul(W,me)|0,y=y+Math.imul(Y,Te)|0,o=o+Math.imul(Y,je)|0,o=o+Math.imul(T,Te)|0,v=v+Math.imul(T,je)|0,y=y+Math.imul(L,Ce)|0,o=o+Math.imul(L,Oe)|0,o=o+Math.imul(z,Ce)|0,v=v+Math.imul(z,Oe)|0;var hr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(hr>>>26)|0,hr&=67108863,y=Math.imul(ue,Me),o=Math.imul(ue,Ne),o=o+Math.imul(ve,Me)|0,v=Math.imul(ve,Ne),y=y+Math.imul(he,fe)|0,o=o+Math.imul(he,Ie)|0,o=o+Math.imul(le,fe)|0,v=v+Math.imul(le,Ie)|0,y=y+Math.imul(se,Ee)|0,o=o+Math.imul(se,ge)|0,o=o+Math.imul(ce,Ee)|0,v=v+Math.imul(ce,ge)|0,y=y+Math.imul(re,ye)|0,o=o+Math.imul(re,we)|0,o=o+Math.imul(ae,ye)|0,v=v+Math.imul(ae,we)|0,y=y+Math.imul(oe,pe)|0,o=o+Math.imul(oe,De)|0,o=o+Math.imul(K,pe)|0,v=v+Math.imul(K,De)|0,y=y+Math.imul(ee,Se)|0,o=o+Math.imul(ee,xe)|0,o=o+Math.imul(J,Se)|0,v=v+Math.imul(J,xe)|0,y=y+Math.imul(U,Ae)|0,o=o+Math.imul(U,me)|0,o=o+Math.imul(H,Ae)|0,v=v+Math.imul(H,me)|0,y=y+Math.imul(B,Te)|0,o=o+Math.imul(B,je)|0,o=o+Math.imul(W,Te)|0,v=v+Math.imul(W,je)|0,y=y+Math.imul(Y,Ce)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(T,Ce)|0,v=v+Math.imul(T,Oe)|0;var lr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,y=Math.imul(ue,fe),o=Math.imul(ue,Ie),o=o+Math.imul(ve,fe)|0,v=Math.imul(ve,Ie),y=y+Math.imul(he,Ee)|0,o=o+Math.imul(he,ge)|0,o=o+Math.imul(le,Ee)|0,v=v+Math.imul(le,ge)|0,y=y+Math.imul(se,ye)|0,o=o+Math.imul(se,we)|0,o=o+Math.imul(ce,ye)|0,v=v+Math.imul(ce,we)|0,y=y+Math.imul(re,pe)|0,o=o+Math.imul(re,De)|0,o=o+Math.imul(ae,pe)|0,v=v+Math.imul(ae,De)|0,y=y+Math.imul(oe,Se)|0,o=o+Math.imul(oe,xe)|0,o=o+Math.imul(K,Se)|0,v=v+Math.imul(K,xe)|0,y=y+Math.imul(ee,Ae)|0,o=o+Math.imul(ee,me)|0,o=o+Math.imul(J,Ae)|0,v=v+Math.imul(J,me)|0,y=y+Math.imul(U,Te)|0,o=o+Math.imul(U,je)|0,o=o+Math.imul(H,Te)|0,v=v+Math.imul(H,je)|0,y=y+Math.imul(B,Ce)|0,o=o+Math.imul(B,Oe)|0,o=o+Math.imul(W,Ce)|0,v=v+Math.imul(W,Oe)|0;var ur=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ur>>>26)|0,ur&=67108863,y=Math.imul(ue,Ee),o=Math.imul(ue,ge),o=o+Math.imul(ve,Ee)|0,v=Math.imul(ve,ge),y=y+Math.imul(he,ye)|0,o=o+Math.imul(he,we)|0,o=o+Math.imul(le,ye)|0,v=v+Math.imul(le,we)|0,y=y+Math.imul(se,pe)|0,o=o+Math.imul(se,De)|0,o=o+Math.imul(ce,pe)|0,v=v+Math.imul(ce,De)|0,y=y+Math.imul(re,Se)|0,o=o+Math.imul(re,xe)|0,o=o+Math.imul(ae,Se)|0,v=v+Math.imul(ae,xe)|0,y=y+Math.imul(oe,Ae)|0,o=o+Math.imul(oe,me)|0,o=o+Math.imul(K,Ae)|0,v=v+Math.imul(K,me)|0,y=y+Math.imul(ee,Te)|0,o=o+Math.imul(ee,je)|0,o=o+Math.imul(J,Te)|0,v=v+Math.imul(J,je)|0,y=y+Math.imul(U,Ce)|0,o=o+Math.imul(U,Oe)|0,o=o+Math.imul(H,Ce)|0,v=v+Math.imul(H,Oe)|0;var Ut=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,y=Math.imul(ue,ye),o=Math.imul(ue,we),o=o+Math.imul(ve,ye)|0,v=Math.imul(ve,we),y=y+Math.imul(he,pe)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(le,pe)|0,v=v+Math.imul(le,De)|0,y=y+Math.imul(se,Se)|0,o=o+Math.imul(se,xe)|0,o=o+Math.imul(ce,Se)|0,v=v+Math.imul(ce,xe)|0,y=y+Math.imul(re,Ae)|0,o=o+Math.imul(re,me)|0,o=o+Math.imul(ae,Ae)|0,v=v+Math.imul(ae,me)|0,y=y+Math.imul(oe,Te)|0,o=o+Math.imul(oe,je)|0,o=o+Math.imul(K,Te)|0,v=v+Math.imul(K,je)|0,y=y+Math.imul(ee,Ce)|0,o=o+Math.imul(ee,Oe)|0,o=o+Math.imul(J,Ce)|0,v=v+Math.imul(J,Oe)|0;var fr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(fr>>>26)|0,fr&=67108863,y=Math.imul(ue,pe),o=Math.imul(ue,De),o=o+Math.imul(ve,pe)|0,v=Math.imul(ve,De),y=y+Math.imul(he,Se)|0,o=o+Math.imul(he,xe)|0,o=o+Math.imul(le,Se)|0,v=v+Math.imul(le,xe)|0,y=y+Math.imul(se,Ae)|0,o=o+Math.imul(se,me)|0,o=o+Math.imul(ce,Ae)|0,v=v+Math.imul(ce,me)|0,y=y+Math.imul(re,Te)|0,o=o+Math.imul(re,je)|0,o=o+Math.imul(ae,Te)|0,v=v+Math.imul(ae,je)|0,y=y+Math.imul(oe,Ce)|0,o=o+Math.imul(oe,Oe)|0,o=o+Math.imul(K,Ce)|0,v=v+Math.imul(K,Oe)|0;var dr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,y=Math.imul(ue,Se),o=Math.imul(ue,xe),o=o+Math.imul(ve,Se)|0,v=Math.imul(ve,xe),y=y+Math.imul(he,Ae)|0,o=o+Math.imul(he,me)|0,o=o+Math.imul(le,Ae)|0,v=v+Math.imul(le,me)|0,y=y+Math.imul(se,Te)|0,o=o+Math.imul(se,je)|0,o=o+Math.imul(ce,Te)|0,v=v+Math.imul(ce,je)|0,y=y+Math.imul(re,Ce)|0,o=o+Math.imul(re,Oe)|0,o=o+Math.imul(ae,Ce)|0,v=v+Math.imul(ae,Oe)|0;var vt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(vt>>>26)|0,vt&=67108863,y=Math.imul(ue,Ae),o=Math.imul(ue,me),o=o+Math.imul(ve,Ae)|0,v=Math.imul(ve,me),y=y+Math.imul(he,Te)|0,o=o+Math.imul(he,je)|0,o=o+Math.imul(le,Te)|0,v=v+Math.imul(le,je)|0,y=y+Math.imul(se,Ce)|0,o=o+Math.imul(se,Oe)|0,o=o+Math.imul(ce,Ce)|0,v=v+Math.imul(ce,Oe)|0;var pr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,y=Math.imul(ue,Te),o=Math.imul(ue,je),o=o+Math.imul(ve,Te)|0,v=Math.imul(ve,je),y=y+Math.imul(he,Ce)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(le,Ce)|0,v=v+Math.imul(le,Oe)|0;var gr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(gr>>>26)|0,gr&=67108863,y=Math.imul(ue,Ce),o=Math.imul(ue,Oe),o=o+Math.imul(ve,Ce)|0,v=Math.imul(ve,Oe);var yr=(I+y|0)+((o&8191)<<13)|0;return I=(v+(o>>>13)|0)+(yr>>>26)|0,yr&=67108863,b[0]=mt,b[1]=rr,b[2]=ir,b[3]=nr,b[4]=sr,b[5]=ar,b[6]=St,b[7]=or,b[8]=cr,b[9]=hr,b[10]=lr,b[11]=ur,b[12]=Ut,b[13]=fr,b[14]=dr,b[15]=vt,b[16]=pr,b[17]=gr,b[18]=yr,I!==0&&(b[19]=I,d.length++),d};Math.imul||(E=_);function x(M,a,h){h.negative=a.negative^M.negative,h.length=M.length+a.length;for(var d=0,p=0,w=0;w<h.length-1;w++){var b=p;p=0;for(var I=d&67108863,y=Math.min(w,a.length-1),o=Math.max(0,w-M.length+1);o<=y;o++){var v=w-o,R=M.words[v]|0,L=a.words[o]|0,z=R*L,q=z&67108863;b=b+(z/67108864|0)|0,q=q+I|0,I=q&67108863,b=b+(q>>>26)|0,p+=b>>>26,b&=67108863}h.words[w]=I,d=b,b=p}return d!==0?h.words[w]=d:h.length--,h.strip()}function S(M,a,h){var d=new D;return d.mulp(M,a,h)}n.prototype.mulTo=function(a,h){var d,p=this.length+a.length;return this.length===10&&a.length===10?d=E(this,a,h):p<63?d=_(this,a,h):p<1024?d=x(this,a,h):d=S(this,a,h),d};function D(M,a){this.x=M,this.y=a}D.prototype.makeRBT=function(a){for(var h=new Array(a),d=n.prototype._countBits(a)-1,p=0;p<a;p++)h[p]=this.revBin(p,d,a);return h},D.prototype.revBin=function(a,h,d){if(a===0||a===d-1)return a;for(var p=0,w=0;w<h;w++)p|=(a&1)<<h-w-1,a>>=1;return p},D.prototype.permute=function(a,h,d,p,w,b){for(var I=0;I<b;I++)p[I]=h[a[I]],w[I]=d[a[I]]},D.prototype.transform=function(a,h,d,p,w,b){this.permute(b,a,h,d,p,w);for(var I=1;I<w;I<<=1)for(var y=I<<1,o=Math.cos(2*Math.PI/y),v=Math.sin(2*Math.PI/y),R=0;R<w;R+=y)for(var L=o,z=v,q=0;q<I;q++){var Y=d[R+q],T=p[R+q],O=d[R+q+I],B=p[R+q+I],W=L*O-z*B;B=L*B+z*O,O=W,d[R+q]=Y+O,p[R+q]=T+B,d[R+q+I]=Y-O,p[R+q+I]=T-B,q!==y&&(W=o*L-v*z,z=o*z+v*L,L=W)}},D.prototype.guessLen13b=function(a,h){var d=Math.max(h,a)|1,p=d&1,w=0;for(d=d/2|0;d;d=d>>>1)w++;return 1<<w+1+p},D.prototype.conjugate=function(a,h,d){if(!(d<=1))for(var p=0;p<d/2;p++){var w=a[p];a[p]=a[d-p-1],a[d-p-1]=w,w=h[p],h[p]=-h[d-p-1],h[d-p-1]=-w}},D.prototype.normalize13b=function(a,h){for(var d=0,p=0;p<h/2;p++){var w=Math.round(a[2*p+1]/h)*8192+Math.round(a[2*p]/h)+d;a[p]=w&67108863,w<67108864?d=0:d=w/67108864|0}return a},D.prototype.convert13b=function(a,h,d,p){for(var w=0,b=0;b<h;b++)w=w+(a[b]|0),d[2*b]=w&8191,w=w>>>13,d[2*b+1]=w&8191,w=w>>>13;for(b=2*h;b<p;++b)d[b]=0;i(w===0),i((w&-8192)===0)},D.prototype.stub=function(a){for(var h=new Array(a),d=0;d<a;d++)h[d]=0;return h},D.prototype.mulp=function(a,h,d){var p=2*this.guessLen13b(a.length,h.length),w=this.makeRBT(p),b=this.stub(p),I=new Array(p),y=new Array(p),o=new Array(p),v=new Array(p),R=new Array(p),L=new Array(p),z=d.words;z.length=p,this.convert13b(a.words,a.length,I,p),this.convert13b(h.words,h.length,v,p),this.transform(I,b,y,o,p,w),this.transform(v,b,R,L,p,w);for(var q=0;q<p;q++){var Y=y[q]*R[q]-o[q]*L[q];o[q]=y[q]*L[q]+o[q]*R[q],y[q]=Y}return this.conjugate(y,o,p),this.transform(y,o,z,b,p,w),this.conjugate(z,b,p),this.normalize13b(z,p),d.negative=a.negative^h.negative,d.length=a.length+h.length,d.strip()},n.prototype.mul=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},n.prototype.mulf=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),S(this,a,h)},n.prototype.imul=function(a){return this.clone().mulTo(a,this)},n.prototype.imuln=function(a){i(typeof a=="number"),i(a<67108864);for(var h=0,d=0;d<this.length;d++){var p=(this.words[d]|0)*a,w=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=w>>>26,this.words[d]=w&67108863}return h!==0&&(this.words[d]=h,this.length++),this.length=a===0?1:this.length,this},n.prototype.muln=function(a){return this.clone().imuln(a)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(a){var h=A(a);if(h.length===0)return new n(1);for(var d=this,p=0;p<h.length&&h[p]===0;p++,d=d.sqr());if(++p<h.length)for(var w=d.sqr();p<h.length;p++,w=w.sqr())h[p]!==0&&(d=d.mul(w));return d},n.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=67108863>>>26-h<<26-h,w;if(h!==0){var b=0;for(w=0;w<this.length;w++){var I=this.words[w]&p,y=(this.words[w]|0)-I<<h;this.words[w]=y|b,b=I>>>26-h}b&&(this.words[w]=b,this.length++)}if(d!==0){for(w=this.length-1;w>=0;w--)this.words[w+d]=this.words[w];for(w=0;w<d;w++)this.words[w]=0;this.length+=d}return this.strip()},n.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},n.prototype.iushrn=function(a,h,d){i(typeof a=="number"&&a>=0);var p;h?p=(h-h%26)/26:p=0;var w=a%26,b=Math.min((a-w)/26,this.length),I=67108863^67108863>>>w<<w,y=d;if(p-=b,p=Math.max(0,p),y){for(var o=0;o<b;o++)y.words[o]=this.words[o];y.length=b}if(b!==0)if(this.length>b)for(this.length-=b,o=0;o<this.length;o++)this.words[o]=this.words[o+b];else this.words[0]=0,this.length=1;var v=0;for(o=this.length-1;o>=0&&(v!==0||o>=p);o--){var R=this.words[o]|0;this.words[o]=v<<26-w|R>>>w,v=R&I}return y&&v!==0&&(y.words[y.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(a,h,d){return i(this.negative===0),this.iushrn(a,h,d)},n.prototype.shln=function(a){return this.clone().ishln(a)},n.prototype.ushln=function(a){return this.clone().iushln(a)},n.prototype.shrn=function(a){return this.clone().ishrn(a)},n.prototype.ushrn=function(a){return this.clone().iushrn(a)},n.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return!1;var w=this.words[d];return!!(w&p)},n.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(h!==0&&d++,this.length=Math.min(d,this.length),h!==0){var p=67108863^67108863>>>h<<h;this.words[this.length-1]&=p}return this.strip()},n.prototype.maskn=function(a){return this.clone().imaskn(a)},n.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},n.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},n.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},n.prototype.addn=function(a){return this.clone().iaddn(a)},n.prototype.subn=function(a){return this.clone().isubn(a)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(a,h,d){var p=a.length+d,w;this._expand(p);var b,I=0;for(w=0;w<a.length;w++){b=(this.words[w+d]|0)+I;var y=(a.words[w]|0)*h;b-=y&67108863,I=(b>>26)-(y/67108864|0),this.words[w+d]=b&67108863}for(;w<this.length-d;w++)b=(this.words[w+d]|0)+I,I=b>>26,this.words[w+d]=b&67108863;if(I===0)return this.strip();for(i(I===-1),I=0,w=0;w<this.length;w++)b=-(this.words[w]|0)+I,I=b>>26,this.words[w]=b&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(a,h){var d=this.length-a.length,p=this.clone(),w=a,b=w.words[w.length-1]|0,I=this._countBits(b);d=26-I,d!==0&&(w=w.ushln(d),p.iushln(d),b=w.words[w.length-1]|0);var y=p.length-w.length,o;if(h!=="mod"){o=new n(null),o.length=y+1,o.words=new Array(o.length);for(var v=0;v<o.length;v++)o.words[v]=0}var R=p.clone()._ishlnsubmul(w,1,y);R.negative===0&&(p=R,o&&(o.words[y]=1));for(var L=y-1;L>=0;L--){var z=(p.words[w.length+L]|0)*67108864+(p.words[w.length+L-1]|0);for(z=Math.min(z/b|0,67108863),p._ishlnsubmul(w,z,L);p.negative!==0;)z--,p.negative=0,p._ishlnsubmul(w,1,L),p.isZero()||(p.negative^=1);o&&(o.words[L]=z)}return o&&o.strip(),p.strip(),h!=="div"&&d!==0&&p.iushrn(d),{div:o||null,mod:p}},n.prototype.divmod=function(a,h,d){if(i(!a.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var p,w,b;return this.negative!==0&&a.negative===0?(b=this.neg().divmod(a,h),h!=="mod"&&(p=b.div.neg()),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.iadd(a)),{div:p,mod:w}):this.negative===0&&a.negative!==0?(b=this.divmod(a.neg(),h),h!=="mod"&&(p=b.div.neg()),{div:p,mod:b.mod}):(this.negative&a.negative)!==0?(b=this.neg().divmod(a.neg(),h),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.isub(a)),{div:b.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new n(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new n(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new n(this.modn(a.words[0]))}:this._wordDiv(a,h)},n.prototype.div=function(a){return this.divmod(a,"div",!1).div},n.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},n.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},n.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var d=h.div.negative!==0?h.mod.isub(a):h.mod,p=a.ushrn(1),w=a.andln(1),b=d.cmp(p);return b<0||w===1&&b===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},n.prototype.modn=function(a){i(a<=67108863);for(var h=(1<<26)%a,d=0,p=this.length-1;p>=0;p--)d=(h*d+(this.words[p]|0))%a;return d},n.prototype.idivn=function(a){i(a<=67108863);for(var h=0,d=this.length-1;d>=0;d--){var p=(this.words[d]|0)+h*67108864;this.words[d]=p/a|0,h=p%a}return this.strip()},n.prototype.divn=function(a){return this.clone().idivn(a)},n.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=new n(0),I=new n(1),y=0;h.isEven()&&d.isEven();)h.iushrn(1),d.iushrn(1),++y;for(var o=d.clone(),v=h.clone();!h.isZero();){for(var R=0,L=1;(h.words[0]&L)===0&&R<26;++R,L<<=1);if(R>0)for(h.iushrn(R);R-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(o),w.isub(v)),p.iushrn(1),w.iushrn(1);for(var z=0,q=1;(d.words[0]&q)===0&&z<26;++z,q<<=1);if(z>0)for(d.iushrn(z);z-- >0;)(b.isOdd()||I.isOdd())&&(b.iadd(o),I.isub(v)),b.iushrn(1),I.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(b),w.isub(I)):(d.isub(h),b.isub(p),I.isub(w))}return{a:b,b:I,gcd:d.iushln(y)}},n.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=d.clone();h.cmpn(1)>0&&d.cmpn(1)>0;){for(var I=0,y=1;(h.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(h.iushrn(I);I-- >0;)p.isOdd()&&p.iadd(b),p.iushrn(1);for(var o=0,v=1;(d.words[0]&v)===0&&o<26;++o,v<<=1);if(o>0)for(d.iushrn(o);o-- >0;)w.isOdd()&&w.iadd(b),w.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(w)):(d.isub(h),w.isub(p))}var R;return h.cmpn(1)===0?R=p:R=w,R.cmpn(0)<0&&R.iadd(a),R},n.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),d=a.clone();h.negative=0,d.negative=0;for(var p=0;h.isEven()&&d.isEven();p++)h.iushrn(1),d.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;d.isEven();)d.iushrn(1);var w=h.cmp(d);if(w<0){var b=h;h=d,d=b}else if(w===0||d.cmpn(1)===0)break;h.isub(d)}while(!0);return d.iushln(p)},n.prototype.invm=function(a){return this.egcd(a).a.umod(a)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(a){return this.words[0]&a},n.prototype.bincn=function(a){i(typeof a=="number");var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return this._expand(d+1),this.words[d]|=p,this;for(var w=p,b=d;w!==0&&b<this.length;b++){var I=this.words[b]|0;I+=w,w=I>>>26,I&=67108863,this.words[b]=I}return w!==0&&(this.words[b]=w,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var d;if(this.length>1)d=1;else{h&&(a=-a),i(a<=67108863,"Number is too big");var p=this.words[0]|0;d=p===a?0:p<a?-1:1}return this.negative!==0?-d|0:d},n.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},n.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,d=this.length-1;d>=0;d--){var p=this.words[d]|0,w=a.words[d]|0;if(p!==w){p<w?h=-1:p>w&&(h=1);break}}return h},n.prototype.gtn=function(a){return this.cmpn(a)===1},n.prototype.gt=function(a){return this.cmp(a)===1},n.prototype.gten=function(a){return this.cmpn(a)>=0},n.prototype.gte=function(a){return this.cmp(a)>=0},n.prototype.ltn=function(a){return this.cmpn(a)===-1},n.prototype.lt=function(a){return this.cmp(a)===-1},n.prototype.lten=function(a){return this.cmpn(a)<=0},n.prototype.lte=function(a){return this.cmp(a)<=0},n.prototype.eqn=function(a){return this.cmpn(a)===0},n.prototype.eq=function(a){return this.cmp(a)===0},n.red=function(a){return new $(a)},n.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(a){return this.red=a,this},n.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},n.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},n.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},n.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},n.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},n.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},n.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},n.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var C={k256:null,p224:null,p192:null,p25519:null};function j(M,a){this.name=M,this.p=new n(a,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var a=new n(null);return a.words=new Array(Math.ceil(this.n/13)),a},j.prototype.ireduce=function(a){var h=a,d;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),d=h.bitLength();while(d>this.n);var p=d<this.n?-1:h.ucmp(this.p);return p===0?(h.words[0]=0,h.length=1):p>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},j.prototype.split=function(a,h){a.iushrn(this.n,0,h)},j.prototype.imulK=function(a){return a.imul(this.k)};function k(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(k,j),k.prototype.split=function(a,h){for(var d=4194303,p=Math.min(a.length,9),w=0;w<p;w++)h.words[w]=a.words[w];if(h.length=p,a.length<=9){a.words[0]=0,a.length=1;return}var b=a.words[9];for(h.words[h.length++]=b&d,w=10;w<a.length;w++){var I=a.words[w]|0;a.words[w-10]=(I&d)<<4|b>>>22,b=I}b>>>=22,a.words[w-10]=b,b===0&&a.length>10?a.length-=10:a.length-=9},k.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,d=0;d<a.length;d++){var p=a.words[d]|0;h+=p*977,a.words[d]=h&67108863,h=p*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function P(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(P,j);function Q(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Q,j);function F(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(F,j),F.prototype.imulK=function(a){for(var h=0,d=0;d<a.length;d++){var p=(a.words[d]|0)*19+h,w=p&67108863;p>>>=26,a.words[d]=w,h=p}return h!==0&&(a.words[a.length++]=h),a},n._prime=function(a){if(C[a])return C[a];var h;if(a==="k256")h=new k;else if(a==="p224")h=new P;else if(a==="p192")h=new Q;else if(a==="p25519")h=new F;else throw new Error("Unknown prime "+a);return C[a]=h,h};function $(M){if(typeof M=="string"){var a=n._prime(M);this.m=a.p,this.prime=a}else i(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}$.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},$.prototype._verify2=function(a,h){i((a.negative|h.negative)===0,"red works only with positives"),i(a.red&&a.red===h.red,"red works only with red numbers")},$.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},$.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},$.prototype.add=function(a,h){this._verify2(a,h);var d=a.add(h);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},$.prototype.iadd=function(a,h){this._verify2(a,h);var d=a.iadd(h);return d.cmp(this.m)>=0&&d.isub(this.m),d},$.prototype.sub=function(a,h){this._verify2(a,h);var d=a.sub(h);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},$.prototype.isub=function(a,h){this._verify2(a,h);var d=a.isub(h);return d.cmpn(0)<0&&d.iadd(this.m),d},$.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},$.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},$.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},$.prototype.isqr=function(a){return this.imul(a,a.clone())},$.prototype.sqr=function(a){return this.mul(a,a)},$.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var d=this.m.add(new n(1)).iushrn(2);return this.pow(a,d)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);i(!p.isZero());var b=new n(1).toRed(this),I=b.redNeg(),y=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new n(2*o*o).toRed(this);this.pow(o,y).cmp(I)!==0;)o.redIAdd(I);for(var v=this.pow(o,p),R=this.pow(a,p.addn(1).iushrn(1)),L=this.pow(a,p),z=w;L.cmp(b)!==0;){for(var q=L,Y=0;q.cmp(b)!==0;Y++)q=q.redSqr();i(Y<z);var T=this.pow(v,new n(1).iushln(z-Y-1));R=R.redMul(T),v=T.redSqr(),L=L.redMul(v),z=Y}return R},$.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},$.prototype.pow=function(a,h){if(h.isZero())return new n(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var d=4,p=new Array(1<<d);p[0]=new n(1).toRed(this),p[1]=a;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],a);var b=p[0],I=0,y=0,o=h.bitLength()%26;for(o===0&&(o=26),w=h.length-1;w>=0;w--){for(var v=h.words[w],R=o-1;R>=0;R--){var L=v>>R&1;if(b!==p[0]&&(b=this.sqr(b)),L===0&&I===0){y=0;continue}I<<=1,I|=L,y++,!(y!==d&&(w!==0||R!==0))&&(b=this.mul(b,p[I]),y=0,I=0)}o=26}return b},$.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},$.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},n.mont=function(a){return new Z(a)};function Z(M){$.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Z,$),Z.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Z.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},Z.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new n(0)._forceRed(this);var d=a.mul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,SR)})(of)),of.exports}var Og={};const TR={},jR=Object.freeze(Object.defineProperty({__proto__:null,default:TR},Symbol.toStringTag,{value:"Module"})),CR=Gm(jR);var CN;function OR(){return CN||(CN=1,(function(r){var e=Ol(),t=Ge(),i=r;i.define=function(c,l){return new s(c,l)};function s(n,c){this.name=n,this.body=c,this.decoders={},this.encoders={}}s.prototype._createNamed=function(c){var l;try{l=CR.runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{l=function(f){this._initNamed(f)}}return t(l,c),l.prototype._initNamed=function(f){c.call(this,f)},new l(this)},s.prototype._getDecoder=function(c){return c=c||"der",this.decoders.hasOwnProperty(c)||(this.decoders[c]=this._createNamed(e.decoders[c])),this.decoders[c]},s.prototype.decode=function(c,l,u){return this._getDecoder(l).decode(c,u)},s.prototype._getEncoder=function(c){return c=c||"der",this.encoders.hasOwnProperty(c)||(this.encoders[c]=this._createNamed(e.encoders[c])),this.encoders[c]},s.prototype.encode=function(c,l,u){return this._getEncoder(l).encode(c,u)}})(Og)),Og}var Lg={},zg={},ON;function LR(){if(ON)return zg;ON=1;var r=Ge();function e(i){this._reporterState={obj:null,path:[],options:i||{},errors:[]}}zg.Reporter=e,e.prototype.isError=function(s){return s instanceof t},e.prototype.save=function(){var s=this._reporterState;return{obj:s.obj,pathLen:s.path.length}},e.prototype.restore=function(s){var n=this._reporterState;n.obj=s.obj,n.path=n.path.slice(0,s.pathLen)},e.prototype.enterKey=function(s){return this._reporterState.path.push(s)},e.prototype.exitKey=function(s){var n=this._reporterState;n.path=n.path.slice(0,s-1)},e.prototype.leaveKey=function(s,n,c){var l=this._reporterState;this.exitKey(s),l.obj!==null&&(l.obj[n]=c)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){var s=this._reporterState,n=s.obj;return s.obj={},n},e.prototype.leaveObject=function(s){var n=this._reporterState,c=n.obj;return n.obj=s,c},e.prototype.error=function(s){var n,c=this._reporterState,l=s instanceof t;if(l?n=s:n=new t(c.path.map(function(u){return"["+JSON.stringify(u)+"]"}).join(""),s.message||s,s.stack),!c.options.partial)throw n;return l||c.errors.push(n),n},e.prototype.wrapResult=function(s){var n=this._reporterState;return n.options.partial?{result:this.isError(s)?null:s,errors:n.errors}:s};function t(i,s){this.path=i,this.rethrow(s)}return r(t,Error),t.prototype.rethrow=function(s){if(this.message=s+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,t),!this.stack)try{throw new Error(this.message)}catch(n){this.stack=n.stack}return this},zg}var Au={},LN;function zN(){if(LN)return Au;LN=1;var r=Ge(),e=Ch().Reporter,t=ki().Buffer;function i(n,c){if(e.call(this,c),!t.isBuffer(n)){this.error("Input not Buffer");return}this.base=n,this.offset=0,this.length=n.length}r(i,e),Au.DecoderBuffer=i,i.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},i.prototype.restore=function(c){var l=new i(this.base);return l.offset=c.offset,l.length=this.offset,this.offset=c.offset,e.prototype.restore.call(this,c.reporter),l},i.prototype.isEmpty=function(){return this.offset===this.length},i.prototype.readUInt8=function(c){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(c||"DecoderBuffer overrun")},i.prototype.skip=function(c,l){if(!(this.offset+c<=this.length))return this.error(l||"DecoderBuffer overrun");var u=new i(this.base);return u._reporterState=this._reporterState,u.offset=this.offset,u.length=this.offset+c,this.offset+=c,u},i.prototype.raw=function(c){return this.base.slice(c?c.offset:this.offset,this.length)};function s(n,c){if(Array.isArray(n))this.length=0,this.value=n.map(function(l){return l instanceof s||(l=new s(l,c)),this.length+=l.length,l},this);else if(typeof n=="number"){if(!(0<=n&&n<=255))return c.error("non-byte EncoderBuffer value");this.value=n,this.length=1}else if(typeof n=="string")this.value=n,this.length=t.byteLength(n);else if(t.isBuffer(n))this.value=n,this.length=n.length;else return c.error("Unsupported type: "+typeof n)}return Au.EncoderBuffer=s,s.prototype.join=function(c,l){return c||(c=new t(this.length)),l||(l=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(u){u.join(c,l),l+=u.length}):(typeof this.value=="number"?c[l]=this.value:typeof this.value=="string"?c.write(this.value,l):t.isBuffer(this.value)&&this.value.copy(c,l),l+=this.length)),c},Au}var kg,kN;function zR(){if(kN)return kg;kN=1;var r=Ch().Reporter,e=Ch().EncoderBuffer,t=Ch().DecoderBuffer,i=Ln(),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],n=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s),c=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function l(f,g){var m={};this._baseState=m,m.enc=f,m.parent=g||null,m.children=null,m.tag=null,m.args=null,m.reverseArgs=null,m.choice=null,m.optional=!1,m.any=!1,m.obj=!1,m.use=null,m.useDecoder=null,m.key=null,m.default=null,m.explicit=null,m.implicit=null,m.contains=null,m.parent||(m.children=[],this._wrap())}kg=l;var u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return l.prototype.clone=function(){var g=this._baseState,m={};u.forEach(function(A){m[A]=g[A]});var N=new this.constructor(m.parent);return N._baseState=m,N},l.prototype._wrap=function(){var g=this._baseState;n.forEach(function(m){this[m]=function(){var A=new this.constructor(this);return g.children.push(A),A[m].apply(A,arguments)}},this)},l.prototype._init=function(g){var m=this._baseState;i(m.parent===null),g.call(this),m.children=m.children.filter(function(N){return N._baseState.parent===this},this),i.equal(m.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(g){var m=this._baseState,N=g.filter(function(A){return A instanceof this.constructor},this);g=g.filter(function(A){return!(A instanceof this.constructor)},this),N.length!==0&&(i(m.children===null),m.children=N,N.forEach(function(A){A._baseState.parent=this},this)),g.length!==0&&(i(m.args===null),m.args=g,m.reverseArgs=g.map(function(A){if(typeof A!="object"||A.constructor!==Object)return A;var _={};return Object.keys(A).forEach(function(E){E==(E|0)&&(E|=0);var x=A[E];_[x]=E}),_}))},c.forEach(function(f){l.prototype[f]=function(){var m=this._baseState;throw new Error(f+" not implemented for encoding: "+m.enc)}}),s.forEach(function(f){l.prototype[f]=function(){var m=this._baseState,N=Array.prototype.slice.call(arguments);return i(m.tag===null),m.tag=f,this._useArgs(N),this}}),l.prototype.use=function(g){i(g);var m=this._baseState;return i(m.use===null),m.use=g,this},l.prototype.optional=function(){var g=this._baseState;return g.optional=!0,this},l.prototype.def=function(g){var m=this._baseState;return i(m.default===null),m.default=g,m.optional=!0,this},l.prototype.explicit=function(g){var m=this._baseState;return i(m.explicit===null&&m.implicit===null),m.explicit=g,this},l.prototype.implicit=function(g){var m=this._baseState;return i(m.explicit===null&&m.implicit===null),m.implicit=g,this},l.prototype.obj=function(){var g=this._baseState,m=Array.prototype.slice.call(arguments);return g.obj=!0,m.length!==0&&this._useArgs(m),this},l.prototype.key=function(g){var m=this._baseState;return i(m.key===null),m.key=g,this},l.prototype.any=function(){var g=this._baseState;return g.any=!0,this},l.prototype.choice=function(g){var m=this._baseState;return i(m.choice===null),m.choice=g,this._useArgs(Object.keys(g).map(function(N){return g[N]})),this},l.prototype.contains=function(g){var m=this._baseState;return i(m.use===null),m.contains=g,this},l.prototype._decode=function(g,m){var N=this._baseState;if(N.parent===null)return g.wrapResult(N.children[0]._decode(g,m));var A=N.default,_=!0,E=null;if(N.key!==null&&(E=g.enterKey(N.key)),N.optional){var x=null;if(N.explicit!==null?x=N.explicit:N.implicit!==null?x=N.implicit:N.tag!==null&&(x=N.tag),x===null&&!N.any){var S=g.save();try{N.choice===null?this._decodeGeneric(N.tag,g,m):this._decodeChoice(g,m),_=!0}catch{_=!1}g.restore(S)}else if(_=this._peekTag(g,x,N.any),g.isError(_))return _}var D;if(N.obj&&_&&(D=g.enterObject()),_){if(N.explicit!==null){var C=this._decodeTag(g,N.explicit);if(g.isError(C))return C;g=C}var j=g.offset;if(N.use===null&&N.choice===null){if(N.any)var S=g.save();var k=this._decodeTag(g,N.implicit!==null?N.implicit:N.tag,N.any);if(g.isError(k))return k;N.any?A=g.raw(S):g=k}if(m&&m.track&&N.tag!==null&&m.track(g.path(),j,g.length,"tagged"),m&&m.track&&N.tag!==null&&m.track(g.path(),g.offset,g.length,"content"),N.any?A=A:N.choice===null?A=this._decodeGeneric(N.tag,g,m):A=this._decodeChoice(g,m),g.isError(A))return A;if(!N.any&&N.choice===null&&N.children!==null&&N.children.forEach(function(F){F._decode(g,m)}),N.contains&&(N.tag==="octstr"||N.tag==="bitstr")){var P=new t(A);A=this._getUse(N.contains,g._reporterState.obj)._decode(P,m)}}return N.obj&&_&&(A=g.leaveObject(D)),N.key!==null&&(A!==null||_===!0)?g.leaveKey(E,N.key,A):E!==null&&g.exitKey(E),A},l.prototype._decodeGeneric=function(g,m,N){var A=this._baseState;return g==="seq"||g==="set"?null:g==="seqof"||g==="setof"?this._decodeList(m,g,A.args[0],N):/str$/.test(g)?this._decodeStr(m,g,N):g==="objid"&&A.args?this._decodeObjid(m,A.args[0],A.args[1],N):g==="objid"?this._decodeObjid(m,null,null,N):g==="gentime"||g==="utctime"?this._decodeTime(m,g,N):g==="null_"?this._decodeNull(m,N):g==="bool"?this._decodeBool(m,N):g==="objDesc"?this._decodeStr(m,g,N):g==="int"||g==="enum"?this._decodeInt(m,A.args&&A.args[0],N):A.use!==null?this._getUse(A.use,m._reporterState.obj)._decode(m,N):m.error("unknown tag: "+g)},l.prototype._getUse=function(g,m){var N=this._baseState;return N.useDecoder=this._use(g,m),i(N.useDecoder._baseState.parent===null),N.useDecoder=N.useDecoder._baseState.children[0],N.implicit!==N.useDecoder._baseState.implicit&&(N.useDecoder=N.useDecoder.clone(),N.useDecoder._baseState.implicit=N.implicit),N.useDecoder},l.prototype._decodeChoice=function(g,m){var N=this._baseState,A=null,_=!1;return Object.keys(N.choice).some(function(E){var x=g.save(),S=N.choice[E];try{var D=S._decode(g,m);if(g.isError(D))return!1;A={type:E,value:D},_=!0}catch{return g.restore(x),!1}return!0},this),_?A:g.error("Choice not matched")},l.prototype._createEncoderBuffer=function(g){return new e(g,this.reporter)},l.prototype._encode=function(g,m,N){var A=this._baseState;if(!(A.default!==null&&A.default===g)){var _=this._encodeValue(g,m,N);if(_!==void 0&&!this._skipDefault(_,m,N))return _}},l.prototype._encodeValue=function(g,m,N){var A=this._baseState;if(A.parent===null)return A.children[0]._encode(g,m||new r);var S=null;if(this.reporter=m,A.optional&&g===void 0)if(A.default!==null)g=A.default;else return;var _=null,E=!1;if(A.any)S=this._createEncoderBuffer(g);else if(A.choice)S=this._encodeChoice(g,m);else if(A.contains)_=this._getUse(A.contains,N)._encode(g,m),E=!0;else if(A.children)_=A.children.map(function(j){if(j._baseState.tag==="null_")return j._encode(null,m,g);if(j._baseState.key===null)return m.error("Child should have a key");var k=m.enterKey(j._baseState.key);if(typeof g!="object")return m.error("Child expected, but input is not object");var P=j._encode(g[j._baseState.key],m,g);return m.leaveKey(k),P},this).filter(function(j){return j}),_=this._createEncoderBuffer(_);else if(A.tag==="seqof"||A.tag==="setof"){if(!(A.args&&A.args.length===1))return m.error("Too many args for : "+A.tag);if(!Array.isArray(g))return m.error("seqof/setof, but data is not Array");var x=this.clone();x._baseState.implicit=null,_=this._createEncoderBuffer(g.map(function(j){var k=this._baseState;return this._getUse(k.args[0],g)._encode(j,m)},x))}else A.use!==null?S=this._getUse(A.use,N)._encode(g,m):(_=this._encodePrimitive(A.tag,g),E=!0);var S;if(!A.any&&A.choice===null){var D=A.implicit!==null?A.implicit:A.tag,C=A.implicit===null?"universal":"context";D===null?A.use===null&&m.error("Tag could be omitted only for .use()"):A.use===null&&(S=this._encodeComposite(D,E,C,_))}return A.explicit!==null&&(S=this._encodeComposite(A.explicit,!1,"context",S)),S},l.prototype._encodeChoice=function(g,m){var N=this._baseState,A=N.choice[g.type];return A||i(!1,g.type+" not found in "+JSON.stringify(Object.keys(N.choice))),A._encode(g.value,m)},l.prototype._encodePrimitive=function(g,m){var N=this._baseState;if(/str$/.test(g))return this._encodeStr(m,g);if(g==="objid"&&N.args)return this._encodeObjid(m,N.reverseArgs[0],N.args[1]);if(g==="objid")return this._encodeObjid(m,null,null);if(g==="gentime"||g==="utctime")return this._encodeTime(m,g);if(g==="null_")return this._encodeNull();if(g==="int"||g==="enum")return this._encodeInt(m,N.args&&N.reverseArgs[0]);if(g==="bool")return this._encodeBool(m);if(g==="objDesc")return this._encodeStr(m,g);throw new Error("Unsupported tag: "+g)},l.prototype._isNumstr=function(g){return/^[0-9 ]*$/.test(g)},l.prototype._isPrintstr=function(g){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(g)},kg}var PN;function Ch(){return PN||(PN=1,(function(r){var e=r;e.Reporter=LR().Reporter,e.DecoderBuffer=zN().DecoderBuffer,e.EncoderBuffer=zN().EncoderBuffer,e.Node=zR()})(Lg)),Lg}var Pg={},Rg={},RN;function kR(){return RN||(RN=1,(function(r){var e=DS();r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=e._reverse(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=e._reverse(r.tag)})(Rg)),Rg}var UN;function DS(){return UN||(UN=1,(function(r){var e=r;e._reverse=function(i){var s={};return Object.keys(i).forEach(function(n){(n|0)==n&&(n=n|0);var c=i[n];s[c]=n}),s},e.der=kR()})(Pg)),Pg}var Ug={},$g,$N;function SS(){if($N)return $g;$N=1;var r=Ge(),e=Ol(),t=e.base,i=e.bignum,s=e.constants.der;function n(f){this.enc="der",this.name=f.name,this.entity=f,this.tree=new c,this.tree._init(f.body)}$g=n,n.prototype.decode=function(g,m){return g instanceof t.DecoderBuffer||(g=new t.DecoderBuffer(g,m)),this.tree._decode(g,m)};function c(f){t.Node.call(this,"der",f)}r(c,t.Node),c.prototype._peekTag=function(g,m,N){if(g.isEmpty())return!1;var A=g.save(),_=l(g,'Failed to peek tag: "'+m+'"');return g.isError(_)?_:(g.restore(A),_.tag===m||_.tagStr===m||_.tagStr+"of"===m||N)},c.prototype._decodeTag=function(g,m,N){var A=l(g,'Failed to decode tag of "'+m+'"');if(g.isError(A))return A;var _=u(g,A.primitive,'Failed to get length of "'+m+'"');if(g.isError(_))return _;if(!N&&A.tag!==m&&A.tagStr!==m&&A.tagStr+"of"!==m)return g.error('Failed to match tag: "'+m+'"');if(A.primitive||_!==null)return g.skip(_,'Failed to match body of: "'+m+'"');var E=g.save(),x=this._skipUntilEnd(g,'Failed to skip indefinite length body: "'+this.tag+'"');return g.isError(x)?x:(_=g.offset-E.offset,g.restore(E),g.skip(_,'Failed to match body of: "'+m+'"'))},c.prototype._skipUntilEnd=function(g,m){for(;;){var N=l(g,m);if(g.isError(N))return N;var A=u(g,N.primitive,m);if(g.isError(A))return A;var _;if(N.primitive||A!==null?_=g.skip(A):_=this._skipUntilEnd(g,m),g.isError(_))return _;if(N.tagStr==="end")break}},c.prototype._decodeList=function(g,m,N,A){for(var _=[];!g.isEmpty();){var E=this._peekTag(g,"end");if(g.isError(E))return E;var x=N.decode(g,"der",A);if(g.isError(x)&&E)break;_.push(x)}return _},c.prototype._decodeStr=function(g,m){if(m==="bitstr"){var N=g.readUInt8();return g.isError(N)?N:{unused:N,data:g.raw()}}else if(m==="bmpstr"){var A=g.raw();if(A.length%2===1)return g.error("Decoding of string type: bmpstr length mismatch");for(var _="",E=0;E<A.length/2;E++)_+=String.fromCharCode(A.readUInt16BE(E*2));return _}else if(m==="numstr"){var x=g.raw().toString("ascii");return this._isNumstr(x)?x:g.error("Decoding of string type: numstr unsupported characters")}else{if(m==="octstr")return g.raw();if(m==="objDesc")return g.raw();if(m==="printstr"){var S=g.raw().toString("ascii");return this._isPrintstr(S)?S:g.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(m)?g.raw().toString():g.error("Decoding of string type: "+m+" unsupported")}},c.prototype._decodeObjid=function(g,m,N){for(var A,_=[],E=0;!g.isEmpty();){var x=g.readUInt8();E<<=7,E|=x&127,(x&128)===0&&(_.push(E),E=0)}x&128&&_.push(E);var S=_[0]/40|0,D=_[0]%40;if(N?A=_:A=[S,D].concat(_.slice(1)),m){var C=m[A.join(" ")];C===void 0&&(C=m[A.join(".")]),C!==void 0&&(A=C)}return A},c.prototype._decodeTime=function(g,m){var N=g.raw().toString();if(m==="gentime")var A=N.slice(0,4)|0,_=N.slice(4,6)|0,E=N.slice(6,8)|0,x=N.slice(8,10)|0,S=N.slice(10,12)|0,D=N.slice(12,14)|0;else if(m==="utctime"){var A=N.slice(0,2)|0,_=N.slice(2,4)|0,E=N.slice(4,6)|0,x=N.slice(6,8)|0,S=N.slice(8,10)|0,D=N.slice(10,12)|0;A<70?A=2e3+A:A=1900+A}else return g.error("Decoding "+m+" time is not supported yet");return Date.UTC(A,_-1,E,x,S,D,0)},c.prototype._decodeNull=function(g){return null},c.prototype._decodeBool=function(g){var m=g.readUInt8();return g.isError(m)?m:m!==0},c.prototype._decodeInt=function(g,m){var N=g.raw(),A=new i(N);return m&&(A=m[A.toString(10)]||A),A},c.prototype._use=function(g,m){return typeof g=="function"&&(g=g(m)),g._getDecoder("der").tree};function l(f,g){var m=f.readUInt8(g);if(f.isError(m))return m;var N=s.tagClass[m>>6],A=(m&32)===0;if((m&31)===31){var _=m;for(m=0;(_&128)===128;){if(_=f.readUInt8(g),f.isError(_))return _;m<<=7,m|=_&127}}else m&=31;var E=s.tag[m];return{cls:N,primitive:A,tag:m,tagStr:E}}function u(f,g,m){var N=f.readUInt8(m);if(f.isError(N))return N;if(!g&&N===128)return null;if((N&128)===0)return N;var A=N&127;if(A>4)return f.error("length octect is too long");N=0;for(var _=0;_<A;_++){N<<=8;var E=f.readUInt8(m);if(f.isError(E))return E;N|=E}return N}return $g}var Bg,BN;function PR(){if(BN)return Bg;BN=1;var r=Ge(),e=ki().Buffer,t=SS();function i(s){t.call(this,s),this.enc="pem"}return r(i,t),Bg=i,i.prototype.decode=function(n,c){for(var l=n.toString().split(/[\r\n]+/g),u=c.label.toUpperCase(),f=/^-----(BEGIN|END) ([^-]+)-----$/,g=-1,m=-1,N=0;N<l.length;N++){var A=l[N].match(f);if(A!==null&&A[2]===u)if(g===-1){if(A[1]!=="BEGIN")break;g=N}else{if(A[1]!=="END")break;m=N;break}}if(g===-1||m===-1)throw new Error("PEM section not found for: "+u);var _=l.slice(g+1,m).join("");_.replace(/[^a-z0-9\+\/=]+/gi,"");var E=new e(_,"base64");return t.prototype.decode.call(this,E,c)},Bg}var qN;function RR(){return qN||(qN=1,(function(r){var e=r;e.der=SS(),e.pem=PR()})(Ug)),Ug}var qg={},Yg,YN;function xS(){if(YN)return Yg;YN=1;var r=Ge(),e=ki().Buffer,t=Ol(),i=t.base,s=t.constants.der;function n(f){this.enc="der",this.name=f.name,this.entity=f,this.tree=new c,this.tree._init(f.body)}Yg=n,n.prototype.encode=function(g,m){return this.tree._encode(g,m).join()};function c(f){i.Node.call(this,"der",f)}r(c,i.Node),c.prototype._encodeComposite=function(g,m,N,A){var _=u(g,m,N,this.reporter);if(A.length<128){var S=new e(2);return S[0]=_,S[1]=A.length,this._createEncoderBuffer([S,A])}for(var E=1,x=A.length;x>=256;x>>=8)E++;var S=new e(2+E);S[0]=_,S[1]=128|E;for(var x=1+E,D=A.length;D>0;x--,D>>=8)S[x]=D&255;return this._createEncoderBuffer([S,A])},c.prototype._encodeStr=function(g,m){if(m==="bitstr")return this._createEncoderBuffer([g.unused|0,g.data]);if(m==="bmpstr"){for(var N=new e(g.length*2),A=0;A<g.length;A++)N.writeUInt16BE(g.charCodeAt(A),A*2);return this._createEncoderBuffer(N)}else return m==="numstr"?this._isNumstr(g)?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: numstr supports only digits and space"):m==="printstr"?this._isPrintstr(g)?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(m)?this._createEncoderBuffer(g):m==="objDesc"?this._createEncoderBuffer(g):this.reporter.error("Encoding of string type: "+m+" unsupported")},c.prototype._encodeObjid=function(g,m,N){if(typeof g=="string"){if(!m)return this.reporter.error("string objid given, but no values map found");if(!m.hasOwnProperty(g))return this.reporter.error("objid not found in values map");g=m[g].split(/[\s\.]+/g);for(var A=0;A<g.length;A++)g[A]|=0}else if(Array.isArray(g)){g=g.slice();for(var A=0;A<g.length;A++)g[A]|=0}if(!Array.isArray(g))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(g));if(!N){if(g[1]>=40)return this.reporter.error("Second objid identifier OOB");g.splice(0,2,g[0]*40+g[1])}for(var _=0,A=0;A<g.length;A++){var E=g[A];for(_++;E>=128;E>>=7)_++}for(var x=new e(_),S=x.length-1,A=g.length-1;A>=0;A--){var E=g[A];for(x[S--]=E&127;(E>>=7)>0;)x[S--]=128|E&127}return this._createEncoderBuffer(x)};function l(f){return f<10?"0"+f:f}c.prototype._encodeTime=function(g,m){var N,A=new Date(g);return m==="gentime"?N=[l(A.getFullYear()),l(A.getUTCMonth()+1),l(A.getUTCDate()),l(A.getUTCHours()),l(A.getUTCMinutes()),l(A.getUTCSeconds()),"Z"].join(""):m==="utctime"?N=[l(A.getFullYear()%100),l(A.getUTCMonth()+1),l(A.getUTCDate()),l(A.getUTCHours()),l(A.getUTCMinutes()),l(A.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+m+" time is not supported yet"),this._encodeStr(N,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(g,m){if(typeof g=="string"){if(!m)return this.reporter.error("String int or enum given, but no values map");if(!m.hasOwnProperty(g))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(g));g=m[g]}if(typeof g!="number"&&!e.isBuffer(g)){var N=g.toArray();!g.sign&&N[0]&128&&N.unshift(0),g=new e(N)}if(e.isBuffer(g)){var A=g.length;g.length===0&&A++;var E=new e(A);return g.copy(E),g.length===0&&(E[0]=0),this._createEncoderBuffer(E)}if(g<128)return this._createEncoderBuffer(g);if(g<256)return this._createEncoderBuffer([0,g]);for(var A=1,_=g;_>=256;_>>=8)A++;for(var E=new Array(A),_=E.length-1;_>=0;_--)E[_]=g&255,g>>=8;return E[0]&128&&E.unshift(0),this._createEncoderBuffer(new e(E))},c.prototype._encodeBool=function(g){return this._createEncoderBuffer(g?255:0)},c.prototype._use=function(g,m){return typeof g=="function"&&(g=g(m)),g._getEncoder("der").tree},c.prototype._skipDefault=function(g,m,N){var A=this._baseState,_;if(A.default===null)return!1;var E=g.join();if(A.defaultBuffer===void 0&&(A.defaultBuffer=this._encodeValue(A.default,m,N).join()),E.length!==A.defaultBuffer.length)return!1;for(_=0;_<E.length;_++)if(E[_]!==A.defaultBuffer[_])return!1;return!0};function u(f,g,m,N){var A;if(f==="seqof"?f="seq":f==="setof"&&(f="set"),s.tagByName.hasOwnProperty(f))A=s.tagByName[f];else if(typeof f=="number"&&(f|0)===f)A=f;else return N.error("Unknown tag: "+f);return A>=31?N.error("Multi-octet tag encoding unsupported"):(g||(A|=32),A|=s.tagClassByName[m||"universal"]<<6,A)}return Yg}var Wg,WN;function UR(){if(WN)return Wg;WN=1;var r=Ge(),e=xS();function t(i){e.call(this,i),this.enc="pem"}return r(t,e),Wg=t,t.prototype.encode=function(s,n){for(var c=e.prototype.encode.call(this,s),l=c.toString("base64"),u=["-----BEGIN "+n.label+"-----"],f=0;f<l.length;f+=64)u.push(l.slice(f,f+64));return u.push("-----END "+n.label+"-----"),u.join(`
`)},Wg}var QN;function $R(){return QN||(QN=1,(function(r){var e=r;e.der=xS(),e.pem=UR()})(qg)),qg}var VN;function Ol(){return VN||(VN=1,(function(r){var e=r;e.bignum=xR(),e.define=OR().define,e.base=Ch(),e.constants=DS(),e.decoders=RR(),e.encoders=$R()})(Cg)),Cg}var Qg,FN;function BR(){if(FN)return Qg;FN=1;var r=Ol(),e=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),t=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),i=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),s=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())}),n=r.define("RelativeDistinguishedName",function(){this.setof(t)}),c=r.define("RDNSequence",function(){this.seqof(n)}),l=r.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),u=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),f=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),g=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(i),this.key("issuer").use(l),this.key("validity").use(u),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())}),m=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(g),this.key("signatureAlgorithm").use(i),this.key("signatureValue").bitstr())});return Qg=m,Qg}var HN;function qR(){if(HN)return In;HN=1;var r=Ol();In.certificate=BR();var e=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});In.RSAPrivateKey=e;var t=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});In.RSAPublicKey=t;var i=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),s=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())});In.PublicKey=s;var n=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(i),this.key("subjectPrivateKey").octstr())});In.PrivateKey=n;var c=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});In.EncryptedPrivateKey=c;var l=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});In.DSAPrivateKey=l,In.DSAparam=r.define("DSAparam",function(){this.int()});var u=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),f=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(u),this.key("publicKey").optional().explicit(1).bitstr())});return In.ECPrivateKey=f,In.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),In}const YR={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var Vg,ZN;function WR(){if(ZN)return Vg;ZN=1;var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,t=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,i=sd(),s=Mv(),n=tt().Buffer;return Vg=function(c,l){var u=c.toString(),f=u.match(r),g;if(f){var N="aes"+f[1],A=n.from(f[2],"hex"),_=n.from(f[3].replace(/[\r\n]/g,""),"base64"),E=i(l,A.slice(0,8),parseInt(f[1],10)).key,x=[],S=s.createDecipheriv(N,E,A);x.push(S.update(_)),x.push(S.final()),g=n.concat(x)}else{var m=u.match(t);g=n.from(m[2].replace(/[\r\n]/g,""),"base64")}var D=u.match(e)[1];return{tag:D,data:g}},Vg}var Fg,GN;function ad(){if(GN)return Fg;GN=1;var r=qR(),e=YR,t=WR(),i=Mv(),s=fS().pbkdf2Sync,n=tt().Buffer;function c(u,f){var g=u.algorithm.decrypt.kde.kdeparams.salt,m=parseInt(u.algorithm.decrypt.kde.kdeparams.iters.toString(),10),N=e[u.algorithm.decrypt.cipher.algo.join(".")],A=u.algorithm.decrypt.cipher.iv,_=u.subjectPrivateKey,E=parseInt(N.split("-")[1],10)/8,x=s(f,g,m,E,"sha1"),S=i.createDecipheriv(N,x,A),D=[];return D.push(S.update(_)),D.push(S.final()),n.concat(D)}function l(u){var f;typeof u=="object"&&!n.isBuffer(u)&&(f=u.passphrase,u=u.key),typeof u=="string"&&(u=n.from(u));var g=t(u,f),m=g.tag,N=g.data,A,_;switch(m){case"CERTIFICATE":_=r.certificate.decode(N,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(_||(_=r.PublicKey.decode(N,"der")),A=_.algorithm.algorithm.join("."),A){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(_.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return _.subjectPrivateKey=_.subjectPublicKey,{type:"ec",data:_};case"1.2.840.10040.4.1":return _.algorithm.params.pub_key=r.DSAparam.decode(_.subjectPublicKey.data,"der"),{type:"dsa",data:_.algorithm.params};default:throw new Error("unknown key id "+A)}case"ENCRYPTED PRIVATE KEY":N=r.EncryptedPrivateKey.decode(N,"der"),N=c(N,f);case"PRIVATE KEY":switch(_=r.PrivateKey.decode(N,"der"),A=_.algorithm.algorithm.join("."),A){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(_.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:_.algorithm.curve,privateKey:r.ECPrivateKey.decode(_.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return _.algorithm.params.priv_key=r.DSAparam.decode(_.subjectPrivateKey,"der"),{type:"dsa",params:_.algorithm.params};default:throw new Error("unknown key id "+A)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(N,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(N,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(N,"der")};case"EC PRIVATE KEY":return N=r.ECPrivateKey.decode(N,"der"),{curve:N.parameters.value,privateKey:N.privateKey};default:throw new Error("unknown key type "+m)}}return l.signature=r.signature,Fg=l,Fg}const TS={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var KN;function QR(){if(KN)return rh.exports;KN=1;var r=tt().Buffer,e=aS(),t=Iv(),i=cd().ec,s=Zm(),n=ad(),c=TS,l=1;function u(S,D,C,j,k){var P=n(D);if(P.curve){if(j!=="ecdsa"&&j!=="ecdsa/rsa")throw new Error("wrong private key type");return f(S,P)}else if(P.type==="dsa"){if(j!=="dsa")throw new Error("wrong private key type");return g(S,P,C)}if(j!=="rsa"&&j!=="ecdsa/rsa")throw new Error("wrong private key type");if(D.padding!==void 0&&D.padding!==l)throw new Error("illegal or unsupported padding mode");S=r.concat([k,S]);for(var Q=P.modulus.byteLength(),F=[0,1];S.length+F.length+1<Q;)F.push(255);F.push(0);for(var $=-1;++$<S.length;)F.push(S[$]);var Z=t(F,P);return Z}function f(S,D){var C=c[D.curve.join(".")];if(!C)throw new Error("unknown curve "+D.curve.join("."));var j=new i(C),k=j.keyFromPrivate(D.privateKey),P=k.sign(S);return r.from(P.toDER())}function g(S,D,C){for(var j=D.params.priv_key,k=D.params.p,P=D.params.q,Q=D.params.g,F=new s(0),$,Z=A(S,P).mod(P),M=!1,a=N(j,P,S,C);M===!1;)$=E(P,a,C),F=x(Q,$,k,P),M=$.invm(P).imul(Z.add(j.mul(F))).mod(P),M.cmpn(0)===0&&(M=!1,F=new s(0));return m(F,M)}function m(S,D){S=S.toArray(),D=D.toArray(),S[0]&128&&(S=[0].concat(S)),D[0]&128&&(D=[0].concat(D));var C=S.length+D.length+4,j=[48,C,2,S.length];return j=j.concat(S,[2,D.length],D),r.from(j)}function N(S,D,C,j){if(S=r.from(S.toArray()),S.length<D.byteLength()){var k=r.alloc(D.byteLength()-S.length);S=r.concat([k,S])}var P=C.length,Q=_(C,D),F=r.alloc(P);F.fill(1);var $=r.alloc(P);return $=e(j,$).update(F).update(r.from([0])).update(S).update(Q).digest(),F=e(j,$).update(F).digest(),$=e(j,$).update(F).update(r.from([1])).update(S).update(Q).digest(),F=e(j,$).update(F).digest(),{k:$,v:F}}function A(S,D){var C=new s(S),j=(S.length<<3)-D.bitLength();return j>0&&C.ishrn(j),C}function _(S,D){S=A(S,D),S=S.mod(D);var C=r.from(S.toArray());if(C.length<D.byteLength()){var j=r.alloc(D.byteLength()-C.length);C=r.concat([j,C])}return C}function E(S,D,C){var j,k;do{for(j=r.alloc(0);j.length*8<S.bitLength();)D.v=e(C,D.k).update(D.v).digest(),j=r.concat([j,D.v]);k=A(j,S),D.k=e(C,D.k).update(D.v).update(r.from([0])).digest(),D.v=e(C,D.k).update(D.v).digest()}while(k.cmp(S)!==-1);return k}function x(S,D,C,j){return S.toRed(s.mont(C)).redPow(D).fromRed().mod(j)}return rh.exports=u,rh.exports.getKey=N,rh.exports.makeKey=E,rh.exports}var Hg,JN;function VR(){if(JN)return Hg;JN=1;var r=tt().Buffer,e=Zm(),t=cd().ec,i=ad(),s=TS;function n(f,g,m,N,A){var _=i(m);if(_.type==="ec"){if(N!=="ecdsa"&&N!=="ecdsa/rsa")throw new Error("wrong public key type");return c(f,g,_)}else if(_.type==="dsa"){if(N!=="dsa")throw new Error("wrong public key type");return l(f,g,_)}if(N!=="rsa"&&N!=="ecdsa/rsa")throw new Error("wrong public key type");g=r.concat([A,g]);for(var E=_.modulus.byteLength(),x=[1],S=0;g.length+x.length+2<E;)x.push(255),S+=1;x.push(0);for(var D=-1;++D<g.length;)x.push(g[D]);x=r.from(x);var C=e.mont(_.modulus);f=new e(f).toRed(C),f=f.redPow(new e(_.publicExponent)),f=r.from(f.fromRed().toArray());var j=S<8?1:0;for(E=Math.min(f.length,x.length),f.length!==x.length&&(j=1),D=-1;++D<E;)j|=f[D]^x[D];return j===0}function c(f,g,m){var N=s[m.data.algorithm.curve.join(".")];if(!N)throw new Error("unknown curve "+m.data.algorithm.curve.join("."));var A=new t(N),_=m.data.subjectPrivateKey.data;return A.verify(g,f,_)}function l(f,g,m){var N=m.data.p,A=m.data.q,_=m.data.g,E=m.data.pub_key,x=i.signature.decode(f,"der"),S=x.s,D=x.r;u(S,A),u(D,A);var C=e.mont(N),j=S.invm(A),k=_.toRed(C).redPow(new e(g).mul(j).mod(A)).fromRed().mul(E.toRed(C).redPow(D.mul(j).mod(A)).fromRed()).mod(N).mod(A);return k.cmp(D)===0}function u(f,g){if(f.cmpn(0)<=0)throw new Error("invalid sig");if(f.cmp(g)>=0)throw new Error("invalid sig")}return Hg=n,Hg}var Zg,XN;function FR(){if(XN)return Zg;XN=1;var r=tt().Buffer,e=jl(),t=DR(),i=Ge(),s=QR(),n=VR(),c=oS;Object.keys(c).forEach(function(m){c[m].id=r.from(c[m].id,"hex"),c[m.toLowerCase()]=c[m]});function l(m){t.Writable.call(this);var N=c[m];if(!N)throw new Error("Unknown message digest");this._hashType=N.hash,this._hash=e(N.hash),this._tag=N.id,this._signType=N.sign}i(l,t.Writable),l.prototype._write=function(N,A,_){this._hash.update(N),_()},l.prototype.update=function(N,A){return this._hash.update(typeof N=="string"?r.from(N,A):N),this},l.prototype.sign=function(N,A){this.end();var _=this._hash.digest(),E=s(_,N,this._hashType,this._signType,this._tag);return A?E.toString(A):E};function u(m){t.Writable.call(this);var N=c[m];if(!N)throw new Error("Unknown message digest");this._hash=e(N.hash),this._tag=N.id,this._signType=N.sign}i(u,t.Writable),u.prototype._write=function(N,A,_){this._hash.update(N),_()},u.prototype.update=function(N,A){return this._hash.update(typeof N=="string"?r.from(N,A):N),this},u.prototype.verify=function(N,A,_){var E=typeof A=="string"?r.from(A,_):A;this.end();var x=this._hash.digest();return n(E,x,N,this._signType,this._tag)};function f(m){return new l(m)}function g(m){return new u(m)}return Zg={Sign:f,Verify:g,createSign:f,createVerify:g},Zg}var cf={exports:{}},HR=cf.exports,eI;function ZR(){return eI||(eI=1,(function(r){(function(e,t){function i(M,a){if(!M)throw new Error(a||"Assertion failed")}function s(M,a){M.super_=a;var h=function(){};h.prototype=a.prototype,M.prototype=new h,M.prototype.constructor=M}function n(M,a,h){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(M||0,a||10,h||"be"))}typeof e=="object"?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=ki().Buffer}catch{}n.isBN=function(a){return a instanceof n?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===n.wordSize&&Array.isArray(a.words)},n.max=function(a,h){return a.cmp(h)>0?a:h},n.min=function(a,h){return a.cmp(h)<0?a:h},n.prototype._init=function(a,h,d){if(typeof a=="number")return this._initNumber(a,h,d);if(typeof a=="object")return this._initArray(a,h,d);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var p=0;a[0]==="-"&&(p++,this.negative=1),p<a.length&&(h===16?this._parseHex(a,p,d):(this._parseBase(a,h,p),d==="le"&&this._initArray(this.toArray(),h,d)))},n.prototype._initNumber=function(a,h,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),h,d)},n.prototype._initArray=function(a,h,d){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,b,I=0;if(d==="be")for(p=a.length-1,w=0;p>=0;p-=3)b=a[p]|a[p-1]<<8|a[p-2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);else if(d==="le")for(p=0,w=0;p<a.length;p+=3)b=a[p]|a[p+1]<<8|a[p+2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);return this.strip()};function l(M,a){var h=M.charCodeAt(a);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function u(M,a,h){var d=l(M,h);return h-1>=a&&(d|=l(M,h-1)<<4),d}n.prototype._parseHex=function(a,h,d){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,b=0,I;if(d==="be")for(p=a.length-1;p>=h;p-=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8;else{var y=a.length-h;for(p=y%2===0?h+1:h;p<a.length;p+=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8}this.strip()};function f(M,a,h,d){for(var p=0,w=Math.min(M.length,h),b=a;b<w;b++){var I=M.charCodeAt(b)-48;p*=d,I>=49?p+=I-49+10:I>=17?p+=I-17+10:p+=I}return p}n.prototype._parseBase=function(a,h,d){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=h)p++;p--,w=w/h|0;for(var b=a.length-d,I=b%p,y=Math.min(b,b-I)+d,o=0,v=d;v<y;v+=p)o=f(a,v,v+p,h),this.imuln(w),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(I!==0){var R=1;for(o=f(a,v,a.length,h),v=0;v<I;v++)R*=h;this.imuln(R),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},n.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red},n.prototype.clone=function(){var a=new n(null);return this.copy(a),a},n.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(a,h){a=a||10,h=h|0||1;var d;if(a===16||a==="hex"){d="";for(var p=0,w=0,b=0;b<this.length;b++){var I=this.words[b],y=((I<<p|w)&16777215).toString(16);w=I>>>24-p&16777215,p+=2,p>=26&&(p-=26,b--),w!==0||b!==this.length-1?d=g[6-y.length]+y+d:d=y+d}for(w!==0&&(d=w.toString(16)+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var o=m[a],v=N[a];d="";var R=this.clone();for(R.negative=0;!R.isZero();){var L=R.modn(v).toString(a);R=R.idivn(v),R.isZero()?d=L+d:d=g[o-L.length]+L+d}for(this.isZero()&&(d="0"+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(a,h){return i(typeof c<"u"),this.toArrayLike(c,a,h)},n.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)},n.prototype.toArrayLike=function(a,h,d){var p=this.byteLength(),w=d||Math.max(1,p);i(p<=w,"byte array longer than desired length"),i(w>0,"Requested array length <= 0"),this.strip();var b=h==="le",I=new a(w),y,o,v=this.clone();if(b){for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[o]=y;for(;o<w;o++)I[o]=0}else{for(o=0;o<w-p;o++)I[o]=0;for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[w-o-1]=y}return I},Math.clz32?n.prototype._countBits=function(a){return 32-Math.clz32(a)}:n.prototype._countBits=function(a){var h=a,d=0;return h>=4096&&(d+=13,h>>>=13),h>=64&&(d+=7,h>>>=7),h>=8&&(d+=4,h>>>=4),h>=2&&(d+=2,h>>>=2),d+h},n.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,d=0;return(h&8191)===0&&(d+=13,h>>>=13),(h&127)===0&&(d+=7,h>>>=7),(h&15)===0&&(d+=4,h>>>=4),(h&3)===0&&(d+=2,h>>>=2),(h&1)===0&&d++,d},n.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function A(M){for(var a=new Array(M.bitLength()),h=0;h<a.length;h++){var d=h/26|0,p=h%26;a[h]=(M.words[d]&1<<p)>>>p}return a}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var d=this._zeroBits(this.words[h]);if(a+=d,d!==26)break}return a},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},n.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this.strip()},n.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},n.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},n.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},n.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var d=0;d<h.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=h.length,this.strip()},n.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},n.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},n.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},n.prototype.iuxor=function(a){var h,d;this.length>a.length?(h=this,d=a):(h=a,d=this);for(var p=0;p<d.length;p++)this.words[p]=h.words[p]^d.words[p];if(this!==h)for(;p<h.length;p++)this.words[p]=h.words[p];return this.length=h.length,this.strip()},n.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},n.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},n.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},n.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,d=a%26;this._expand(h),d>0&&h--;for(var p=0;p<h;p++)this.words[p]=~this.words[p]&67108863;return d>0&&(this.words[p]=~this.words[p]&67108863>>26-d),this.strip()},n.prototype.notn=function(a){return this.clone().inotn(a)},n.prototype.setn=function(a,h){i(typeof a=="number"&&a>=0);var d=a/26|0,p=a%26;return this._expand(d+1),h?this.words[d]=this.words[d]|1<<p:this.words[d]=this.words[d]&~(1<<p),this.strip()},n.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var d,p;this.length>a.length?(d=this,p=a):(d=a,p=this);for(var w=0,b=0;b<p.length;b++)h=(d.words[b]|0)+(p.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;for(;w!==0&&b<d.length;b++)h=(d.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;if(this.length=d.length,w!==0)this.words[this.length]=w,this.length++;else if(d!==this)for(;b<d.length;b++)this.words[b]=d.words[b];return this},n.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},n.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;d>0?(p=this,w=a):(p=a,w=this);for(var b=0,I=0;I<w.length;I++)h=(p.words[I]|0)-(w.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;for(;b!==0&&I<p.length;I++)h=(p.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;if(b===0&&I<p.length&&p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this.length=Math.max(this.length,I),p!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(a){return this.clone().isub(a)};function _(M,a,h){h.negative=a.negative^M.negative;var d=M.length+a.length|0;h.length=d,d=d-1|0;var p=M.words[0]|0,w=a.words[0]|0,b=p*w,I=b&67108863,y=b/67108864|0;h.words[0]=I;for(var o=1;o<d;o++){for(var v=y>>>26,R=y&67108863,L=Math.min(o,a.length-1),z=Math.max(0,o-M.length+1);z<=L;z++){var q=o-z|0;p=M.words[q]|0,w=a.words[z]|0,b=p*w+R,v+=b/67108864|0,R=b&67108863}h.words[o]=R|0,y=v|0}return y!==0?h.words[o]=y|0:h.length--,h.strip()}var E=function(a,h,d){var p=a.words,w=h.words,b=d.words,I=0,y,o,v,R=p[0]|0,L=R&8191,z=R>>>13,q=p[1]|0,Y=q&8191,T=q>>>13,O=p[2]|0,B=O&8191,W=O>>>13,V=p[3]|0,U=V&8191,H=V>>>13,de=p[4]|0,ee=de&8191,J=de>>>13,Qe=p[5]|0,oe=Qe&8191,K=Qe>>>13,et=p[6]|0,re=et&8191,ae=et>>>13,Ke=p[7]|0,se=Ke&8191,ce=Ke>>>13,Dt=p[8]|0,he=Dt&8191,le=Dt>>>13,Cr=p[9]|0,ue=Cr&8191,ve=Cr>>>13,Br=w[0]|0,_e=Br&8191,be=Br>>>13,Or=w[1]|0,Me=Or&8191,Ne=Or>>>13,Vr=w[2]|0,fe=Vr&8191,Ie=Vr>>>13,Fr=w[3]|0,Ee=Fr&8191,ge=Fr>>>13,Er=w[4]|0,ye=Er&8191,we=Er>>>13,Pr=w[5]|0,pe=Pr&8191,De=Pr>>>13,Hr=w[6]|0,Se=Hr&8191,xe=Hr>>>13,Zr=w[7]|0,Ae=Zr&8191,me=Zr>>>13,tr=w[8]|0,Te=tr&8191,je=tr>>>13,Gr=w[9]|0,Ce=Gr&8191,Oe=Gr>>>13;d.negative=a.negative^h.negative,d.length=19,y=Math.imul(L,_e),o=Math.imul(L,be),o=o+Math.imul(z,_e)|0,v=Math.imul(z,be);var mt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,y=Math.imul(Y,_e),o=Math.imul(Y,be),o=o+Math.imul(T,_e)|0,v=Math.imul(T,be),y=y+Math.imul(L,Me)|0,o=o+Math.imul(L,Ne)|0,o=o+Math.imul(z,Me)|0,v=v+Math.imul(z,Ne)|0;var rr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,y=Math.imul(B,_e),o=Math.imul(B,be),o=o+Math.imul(W,_e)|0,v=Math.imul(W,be),y=y+Math.imul(Y,Me)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(T,Me)|0,v=v+Math.imul(T,Ne)|0,y=y+Math.imul(L,fe)|0,o=o+Math.imul(L,Ie)|0,o=o+Math.imul(z,fe)|0,v=v+Math.imul(z,Ie)|0;var ir=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul(U,_e),o=Math.imul(U,be),o=o+Math.imul(H,_e)|0,v=Math.imul(H,be),y=y+Math.imul(B,Me)|0,o=o+Math.imul(B,Ne)|0,o=o+Math.imul(W,Me)|0,v=v+Math.imul(W,Ne)|0,y=y+Math.imul(Y,fe)|0,o=o+Math.imul(Y,Ie)|0,o=o+Math.imul(T,fe)|0,v=v+Math.imul(T,Ie)|0,y=y+Math.imul(L,Ee)|0,o=o+Math.imul(L,ge)|0,o=o+Math.imul(z,Ee)|0,v=v+Math.imul(z,ge)|0;var nr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(ee,_e),o=Math.imul(ee,be),o=o+Math.imul(J,_e)|0,v=Math.imul(J,be),y=y+Math.imul(U,Me)|0,o=o+Math.imul(U,Ne)|0,o=o+Math.imul(H,Me)|0,v=v+Math.imul(H,Ne)|0,y=y+Math.imul(B,fe)|0,o=o+Math.imul(B,Ie)|0,o=o+Math.imul(W,fe)|0,v=v+Math.imul(W,Ie)|0,y=y+Math.imul(Y,Ee)|0,o=o+Math.imul(Y,ge)|0,o=o+Math.imul(T,Ee)|0,v=v+Math.imul(T,ge)|0,y=y+Math.imul(L,ye)|0,o=o+Math.imul(L,we)|0,o=o+Math.imul(z,ye)|0,v=v+Math.imul(z,we)|0;var sr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(oe,_e),o=Math.imul(oe,be),o=o+Math.imul(K,_e)|0,v=Math.imul(K,be),y=y+Math.imul(ee,Me)|0,o=o+Math.imul(ee,Ne)|0,o=o+Math.imul(J,Me)|0,v=v+Math.imul(J,Ne)|0,y=y+Math.imul(U,fe)|0,o=o+Math.imul(U,Ie)|0,o=o+Math.imul(H,fe)|0,v=v+Math.imul(H,Ie)|0,y=y+Math.imul(B,Ee)|0,o=o+Math.imul(B,ge)|0,o=o+Math.imul(W,Ee)|0,v=v+Math.imul(W,ge)|0,y=y+Math.imul(Y,ye)|0,o=o+Math.imul(Y,we)|0,o=o+Math.imul(T,ye)|0,v=v+Math.imul(T,we)|0,y=y+Math.imul(L,pe)|0,o=o+Math.imul(L,De)|0,o=o+Math.imul(z,pe)|0,v=v+Math.imul(z,De)|0;var ar=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ar>>>26)|0,ar&=67108863,y=Math.imul(re,_e),o=Math.imul(re,be),o=o+Math.imul(ae,_e)|0,v=Math.imul(ae,be),y=y+Math.imul(oe,Me)|0,o=o+Math.imul(oe,Ne)|0,o=o+Math.imul(K,Me)|0,v=v+Math.imul(K,Ne)|0,y=y+Math.imul(ee,fe)|0,o=o+Math.imul(ee,Ie)|0,o=o+Math.imul(J,fe)|0,v=v+Math.imul(J,Ie)|0,y=y+Math.imul(U,Ee)|0,o=o+Math.imul(U,ge)|0,o=o+Math.imul(H,Ee)|0,v=v+Math.imul(H,ge)|0,y=y+Math.imul(B,ye)|0,o=o+Math.imul(B,we)|0,o=o+Math.imul(W,ye)|0,v=v+Math.imul(W,we)|0,y=y+Math.imul(Y,pe)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(T,pe)|0,v=v+Math.imul(T,De)|0,y=y+Math.imul(L,Se)|0,o=o+Math.imul(L,xe)|0,o=o+Math.imul(z,Se)|0,v=v+Math.imul(z,xe)|0;var St=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(St>>>26)|0,St&=67108863,y=Math.imul(se,_e),o=Math.imul(se,be),o=o+Math.imul(ce,_e)|0,v=Math.imul(ce,be),y=y+Math.imul(re,Me)|0,o=o+Math.imul(re,Ne)|0,o=o+Math.imul(ae,Me)|0,v=v+Math.imul(ae,Ne)|0,y=y+Math.imul(oe,fe)|0,o=o+Math.imul(oe,Ie)|0,o=o+Math.imul(K,fe)|0,v=v+Math.imul(K,Ie)|0,y=y+Math.imul(ee,Ee)|0,o=o+Math.imul(ee,ge)|0,o=o+Math.imul(J,Ee)|0,v=v+Math.imul(J,ge)|0,y=y+Math.imul(U,ye)|0,o=o+Math.imul(U,we)|0,o=o+Math.imul(H,ye)|0,v=v+Math.imul(H,we)|0,y=y+Math.imul(B,pe)|0,o=o+Math.imul(B,De)|0,o=o+Math.imul(W,pe)|0,v=v+Math.imul(W,De)|0,y=y+Math.imul(Y,Se)|0,o=o+Math.imul(Y,xe)|0,o=o+Math.imul(T,Se)|0,v=v+Math.imul(T,xe)|0,y=y+Math.imul(L,Ae)|0,o=o+Math.imul(L,me)|0,o=o+Math.imul(z,Ae)|0,v=v+Math.imul(z,me)|0;var or=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(he,_e),o=Math.imul(he,be),o=o+Math.imul(le,_e)|0,v=Math.imul(le,be),y=y+Math.imul(se,Me)|0,o=o+Math.imul(se,Ne)|0,o=o+Math.imul(ce,Me)|0,v=v+Math.imul(ce,Ne)|0,y=y+Math.imul(re,fe)|0,o=o+Math.imul(re,Ie)|0,o=o+Math.imul(ae,fe)|0,v=v+Math.imul(ae,Ie)|0,y=y+Math.imul(oe,Ee)|0,o=o+Math.imul(oe,ge)|0,o=o+Math.imul(K,Ee)|0,v=v+Math.imul(K,ge)|0,y=y+Math.imul(ee,ye)|0,o=o+Math.imul(ee,we)|0,o=o+Math.imul(J,ye)|0,v=v+Math.imul(J,we)|0,y=y+Math.imul(U,pe)|0,o=o+Math.imul(U,De)|0,o=o+Math.imul(H,pe)|0,v=v+Math.imul(H,De)|0,y=y+Math.imul(B,Se)|0,o=o+Math.imul(B,xe)|0,o=o+Math.imul(W,Se)|0,v=v+Math.imul(W,xe)|0,y=y+Math.imul(Y,Ae)|0,o=o+Math.imul(Y,me)|0,o=o+Math.imul(T,Ae)|0,v=v+Math.imul(T,me)|0,y=y+Math.imul(L,Te)|0,o=o+Math.imul(L,je)|0,o=o+Math.imul(z,Te)|0,v=v+Math.imul(z,je)|0;var cr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(cr>>>26)|0,cr&=67108863,y=Math.imul(ue,_e),o=Math.imul(ue,be),o=o+Math.imul(ve,_e)|0,v=Math.imul(ve,be),y=y+Math.imul(he,Me)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(le,Me)|0,v=v+Math.imul(le,Ne)|0,y=y+Math.imul(se,fe)|0,o=o+Math.imul(se,Ie)|0,o=o+Math.imul(ce,fe)|0,v=v+Math.imul(ce,Ie)|0,y=y+Math.imul(re,Ee)|0,o=o+Math.imul(re,ge)|0,o=o+Math.imul(ae,Ee)|0,v=v+Math.imul(ae,ge)|0,y=y+Math.imul(oe,ye)|0,o=o+Math.imul(oe,we)|0,o=o+Math.imul(K,ye)|0,v=v+Math.imul(K,we)|0,y=y+Math.imul(ee,pe)|0,o=o+Math.imul(ee,De)|0,o=o+Math.imul(J,pe)|0,v=v+Math.imul(J,De)|0,y=y+Math.imul(U,Se)|0,o=o+Math.imul(U,xe)|0,o=o+Math.imul(H,Se)|0,v=v+Math.imul(H,xe)|0,y=y+Math.imul(B,Ae)|0,o=o+Math.imul(B,me)|0,o=o+Math.imul(W,Ae)|0,v=v+Math.imul(W,me)|0,y=y+Math.imul(Y,Te)|0,o=o+Math.imul(Y,je)|0,o=o+Math.imul(T,Te)|0,v=v+Math.imul(T,je)|0,y=y+Math.imul(L,Ce)|0,o=o+Math.imul(L,Oe)|0,o=o+Math.imul(z,Ce)|0,v=v+Math.imul(z,Oe)|0;var hr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(hr>>>26)|0,hr&=67108863,y=Math.imul(ue,Me),o=Math.imul(ue,Ne),o=o+Math.imul(ve,Me)|0,v=Math.imul(ve,Ne),y=y+Math.imul(he,fe)|0,o=o+Math.imul(he,Ie)|0,o=o+Math.imul(le,fe)|0,v=v+Math.imul(le,Ie)|0,y=y+Math.imul(se,Ee)|0,o=o+Math.imul(se,ge)|0,o=o+Math.imul(ce,Ee)|0,v=v+Math.imul(ce,ge)|0,y=y+Math.imul(re,ye)|0,o=o+Math.imul(re,we)|0,o=o+Math.imul(ae,ye)|0,v=v+Math.imul(ae,we)|0,y=y+Math.imul(oe,pe)|0,o=o+Math.imul(oe,De)|0,o=o+Math.imul(K,pe)|0,v=v+Math.imul(K,De)|0,y=y+Math.imul(ee,Se)|0,o=o+Math.imul(ee,xe)|0,o=o+Math.imul(J,Se)|0,v=v+Math.imul(J,xe)|0,y=y+Math.imul(U,Ae)|0,o=o+Math.imul(U,me)|0,o=o+Math.imul(H,Ae)|0,v=v+Math.imul(H,me)|0,y=y+Math.imul(B,Te)|0,o=o+Math.imul(B,je)|0,o=o+Math.imul(W,Te)|0,v=v+Math.imul(W,je)|0,y=y+Math.imul(Y,Ce)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(T,Ce)|0,v=v+Math.imul(T,Oe)|0;var lr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,y=Math.imul(ue,fe),o=Math.imul(ue,Ie),o=o+Math.imul(ve,fe)|0,v=Math.imul(ve,Ie),y=y+Math.imul(he,Ee)|0,o=o+Math.imul(he,ge)|0,o=o+Math.imul(le,Ee)|0,v=v+Math.imul(le,ge)|0,y=y+Math.imul(se,ye)|0,o=o+Math.imul(se,we)|0,o=o+Math.imul(ce,ye)|0,v=v+Math.imul(ce,we)|0,y=y+Math.imul(re,pe)|0,o=o+Math.imul(re,De)|0,o=o+Math.imul(ae,pe)|0,v=v+Math.imul(ae,De)|0,y=y+Math.imul(oe,Se)|0,o=o+Math.imul(oe,xe)|0,o=o+Math.imul(K,Se)|0,v=v+Math.imul(K,xe)|0,y=y+Math.imul(ee,Ae)|0,o=o+Math.imul(ee,me)|0,o=o+Math.imul(J,Ae)|0,v=v+Math.imul(J,me)|0,y=y+Math.imul(U,Te)|0,o=o+Math.imul(U,je)|0,o=o+Math.imul(H,Te)|0,v=v+Math.imul(H,je)|0,y=y+Math.imul(B,Ce)|0,o=o+Math.imul(B,Oe)|0,o=o+Math.imul(W,Ce)|0,v=v+Math.imul(W,Oe)|0;var ur=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ur>>>26)|0,ur&=67108863,y=Math.imul(ue,Ee),o=Math.imul(ue,ge),o=o+Math.imul(ve,Ee)|0,v=Math.imul(ve,ge),y=y+Math.imul(he,ye)|0,o=o+Math.imul(he,we)|0,o=o+Math.imul(le,ye)|0,v=v+Math.imul(le,we)|0,y=y+Math.imul(se,pe)|0,o=o+Math.imul(se,De)|0,o=o+Math.imul(ce,pe)|0,v=v+Math.imul(ce,De)|0,y=y+Math.imul(re,Se)|0,o=o+Math.imul(re,xe)|0,o=o+Math.imul(ae,Se)|0,v=v+Math.imul(ae,xe)|0,y=y+Math.imul(oe,Ae)|0,o=o+Math.imul(oe,me)|0,o=o+Math.imul(K,Ae)|0,v=v+Math.imul(K,me)|0,y=y+Math.imul(ee,Te)|0,o=o+Math.imul(ee,je)|0,o=o+Math.imul(J,Te)|0,v=v+Math.imul(J,je)|0,y=y+Math.imul(U,Ce)|0,o=o+Math.imul(U,Oe)|0,o=o+Math.imul(H,Ce)|0,v=v+Math.imul(H,Oe)|0;var Ut=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,y=Math.imul(ue,ye),o=Math.imul(ue,we),o=o+Math.imul(ve,ye)|0,v=Math.imul(ve,we),y=y+Math.imul(he,pe)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(le,pe)|0,v=v+Math.imul(le,De)|0,y=y+Math.imul(se,Se)|0,o=o+Math.imul(se,xe)|0,o=o+Math.imul(ce,Se)|0,v=v+Math.imul(ce,xe)|0,y=y+Math.imul(re,Ae)|0,o=o+Math.imul(re,me)|0,o=o+Math.imul(ae,Ae)|0,v=v+Math.imul(ae,me)|0,y=y+Math.imul(oe,Te)|0,o=o+Math.imul(oe,je)|0,o=o+Math.imul(K,Te)|0,v=v+Math.imul(K,je)|0,y=y+Math.imul(ee,Ce)|0,o=o+Math.imul(ee,Oe)|0,o=o+Math.imul(J,Ce)|0,v=v+Math.imul(J,Oe)|0;var fr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(fr>>>26)|0,fr&=67108863,y=Math.imul(ue,pe),o=Math.imul(ue,De),o=o+Math.imul(ve,pe)|0,v=Math.imul(ve,De),y=y+Math.imul(he,Se)|0,o=o+Math.imul(he,xe)|0,o=o+Math.imul(le,Se)|0,v=v+Math.imul(le,xe)|0,y=y+Math.imul(se,Ae)|0,o=o+Math.imul(se,me)|0,o=o+Math.imul(ce,Ae)|0,v=v+Math.imul(ce,me)|0,y=y+Math.imul(re,Te)|0,o=o+Math.imul(re,je)|0,o=o+Math.imul(ae,Te)|0,v=v+Math.imul(ae,je)|0,y=y+Math.imul(oe,Ce)|0,o=o+Math.imul(oe,Oe)|0,o=o+Math.imul(K,Ce)|0,v=v+Math.imul(K,Oe)|0;var dr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,y=Math.imul(ue,Se),o=Math.imul(ue,xe),o=o+Math.imul(ve,Se)|0,v=Math.imul(ve,xe),y=y+Math.imul(he,Ae)|0,o=o+Math.imul(he,me)|0,o=o+Math.imul(le,Ae)|0,v=v+Math.imul(le,me)|0,y=y+Math.imul(se,Te)|0,o=o+Math.imul(se,je)|0,o=o+Math.imul(ce,Te)|0,v=v+Math.imul(ce,je)|0,y=y+Math.imul(re,Ce)|0,o=o+Math.imul(re,Oe)|0,o=o+Math.imul(ae,Ce)|0,v=v+Math.imul(ae,Oe)|0;var vt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(vt>>>26)|0,vt&=67108863,y=Math.imul(ue,Ae),o=Math.imul(ue,me),o=o+Math.imul(ve,Ae)|0,v=Math.imul(ve,me),y=y+Math.imul(he,Te)|0,o=o+Math.imul(he,je)|0,o=o+Math.imul(le,Te)|0,v=v+Math.imul(le,je)|0,y=y+Math.imul(se,Ce)|0,o=o+Math.imul(se,Oe)|0,o=o+Math.imul(ce,Ce)|0,v=v+Math.imul(ce,Oe)|0;var pr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,y=Math.imul(ue,Te),o=Math.imul(ue,je),o=o+Math.imul(ve,Te)|0,v=Math.imul(ve,je),y=y+Math.imul(he,Ce)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(le,Ce)|0,v=v+Math.imul(le,Oe)|0;var gr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(gr>>>26)|0,gr&=67108863,y=Math.imul(ue,Ce),o=Math.imul(ue,Oe),o=o+Math.imul(ve,Ce)|0,v=Math.imul(ve,Oe);var yr=(I+y|0)+((o&8191)<<13)|0;return I=(v+(o>>>13)|0)+(yr>>>26)|0,yr&=67108863,b[0]=mt,b[1]=rr,b[2]=ir,b[3]=nr,b[4]=sr,b[5]=ar,b[6]=St,b[7]=or,b[8]=cr,b[9]=hr,b[10]=lr,b[11]=ur,b[12]=Ut,b[13]=fr,b[14]=dr,b[15]=vt,b[16]=pr,b[17]=gr,b[18]=yr,I!==0&&(b[19]=I,d.length++),d};Math.imul||(E=_);function x(M,a,h){h.negative=a.negative^M.negative,h.length=M.length+a.length;for(var d=0,p=0,w=0;w<h.length-1;w++){var b=p;p=0;for(var I=d&67108863,y=Math.min(w,a.length-1),o=Math.max(0,w-M.length+1);o<=y;o++){var v=w-o,R=M.words[v]|0,L=a.words[o]|0,z=R*L,q=z&67108863;b=b+(z/67108864|0)|0,q=q+I|0,I=q&67108863,b=b+(q>>>26)|0,p+=b>>>26,b&=67108863}h.words[w]=I,d=b,b=p}return d!==0?h.words[w]=d:h.length--,h.strip()}function S(M,a,h){var d=new D;return d.mulp(M,a,h)}n.prototype.mulTo=function(a,h){var d,p=this.length+a.length;return this.length===10&&a.length===10?d=E(this,a,h):p<63?d=_(this,a,h):p<1024?d=x(this,a,h):d=S(this,a,h),d};function D(M,a){this.x=M,this.y=a}D.prototype.makeRBT=function(a){for(var h=new Array(a),d=n.prototype._countBits(a)-1,p=0;p<a;p++)h[p]=this.revBin(p,d,a);return h},D.prototype.revBin=function(a,h,d){if(a===0||a===d-1)return a;for(var p=0,w=0;w<h;w++)p|=(a&1)<<h-w-1,a>>=1;return p},D.prototype.permute=function(a,h,d,p,w,b){for(var I=0;I<b;I++)p[I]=h[a[I]],w[I]=d[a[I]]},D.prototype.transform=function(a,h,d,p,w,b){this.permute(b,a,h,d,p,w);for(var I=1;I<w;I<<=1)for(var y=I<<1,o=Math.cos(2*Math.PI/y),v=Math.sin(2*Math.PI/y),R=0;R<w;R+=y)for(var L=o,z=v,q=0;q<I;q++){var Y=d[R+q],T=p[R+q],O=d[R+q+I],B=p[R+q+I],W=L*O-z*B;B=L*B+z*O,O=W,d[R+q]=Y+O,p[R+q]=T+B,d[R+q+I]=Y-O,p[R+q+I]=T-B,q!==y&&(W=o*L-v*z,z=o*z+v*L,L=W)}},D.prototype.guessLen13b=function(a,h){var d=Math.max(h,a)|1,p=d&1,w=0;for(d=d/2|0;d;d=d>>>1)w++;return 1<<w+1+p},D.prototype.conjugate=function(a,h,d){if(!(d<=1))for(var p=0;p<d/2;p++){var w=a[p];a[p]=a[d-p-1],a[d-p-1]=w,w=h[p],h[p]=-h[d-p-1],h[d-p-1]=-w}},D.prototype.normalize13b=function(a,h){for(var d=0,p=0;p<h/2;p++){var w=Math.round(a[2*p+1]/h)*8192+Math.round(a[2*p]/h)+d;a[p]=w&67108863,w<67108864?d=0:d=w/67108864|0}return a},D.prototype.convert13b=function(a,h,d,p){for(var w=0,b=0;b<h;b++)w=w+(a[b]|0),d[2*b]=w&8191,w=w>>>13,d[2*b+1]=w&8191,w=w>>>13;for(b=2*h;b<p;++b)d[b]=0;i(w===0),i((w&-8192)===0)},D.prototype.stub=function(a){for(var h=new Array(a),d=0;d<a;d++)h[d]=0;return h},D.prototype.mulp=function(a,h,d){var p=2*this.guessLen13b(a.length,h.length),w=this.makeRBT(p),b=this.stub(p),I=new Array(p),y=new Array(p),o=new Array(p),v=new Array(p),R=new Array(p),L=new Array(p),z=d.words;z.length=p,this.convert13b(a.words,a.length,I,p),this.convert13b(h.words,h.length,v,p),this.transform(I,b,y,o,p,w),this.transform(v,b,R,L,p,w);for(var q=0;q<p;q++){var Y=y[q]*R[q]-o[q]*L[q];o[q]=y[q]*L[q]+o[q]*R[q],y[q]=Y}return this.conjugate(y,o,p),this.transform(y,o,z,b,p,w),this.conjugate(z,b,p),this.normalize13b(z,p),d.negative=a.negative^h.negative,d.length=a.length+h.length,d.strip()},n.prototype.mul=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},n.prototype.mulf=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),S(this,a,h)},n.prototype.imul=function(a){return this.clone().mulTo(a,this)},n.prototype.imuln=function(a){i(typeof a=="number"),i(a<67108864);for(var h=0,d=0;d<this.length;d++){var p=(this.words[d]|0)*a,w=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=w>>>26,this.words[d]=w&67108863}return h!==0&&(this.words[d]=h,this.length++),this.length=a===0?1:this.length,this},n.prototype.muln=function(a){return this.clone().imuln(a)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(a){var h=A(a);if(h.length===0)return new n(1);for(var d=this,p=0;p<h.length&&h[p]===0;p++,d=d.sqr());if(++p<h.length)for(var w=d.sqr();p<h.length;p++,w=w.sqr())h[p]!==0&&(d=d.mul(w));return d},n.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=67108863>>>26-h<<26-h,w;if(h!==0){var b=0;for(w=0;w<this.length;w++){var I=this.words[w]&p,y=(this.words[w]|0)-I<<h;this.words[w]=y|b,b=I>>>26-h}b&&(this.words[w]=b,this.length++)}if(d!==0){for(w=this.length-1;w>=0;w--)this.words[w+d]=this.words[w];for(w=0;w<d;w++)this.words[w]=0;this.length+=d}return this.strip()},n.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},n.prototype.iushrn=function(a,h,d){i(typeof a=="number"&&a>=0);var p;h?p=(h-h%26)/26:p=0;var w=a%26,b=Math.min((a-w)/26,this.length),I=67108863^67108863>>>w<<w,y=d;if(p-=b,p=Math.max(0,p),y){for(var o=0;o<b;o++)y.words[o]=this.words[o];y.length=b}if(b!==0)if(this.length>b)for(this.length-=b,o=0;o<this.length;o++)this.words[o]=this.words[o+b];else this.words[0]=0,this.length=1;var v=0;for(o=this.length-1;o>=0&&(v!==0||o>=p);o--){var R=this.words[o]|0;this.words[o]=v<<26-w|R>>>w,v=R&I}return y&&v!==0&&(y.words[y.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(a,h,d){return i(this.negative===0),this.iushrn(a,h,d)},n.prototype.shln=function(a){return this.clone().ishln(a)},n.prototype.ushln=function(a){return this.clone().iushln(a)},n.prototype.shrn=function(a){return this.clone().ishrn(a)},n.prototype.ushrn=function(a){return this.clone().iushrn(a)},n.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return!1;var w=this.words[d];return!!(w&p)},n.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(h!==0&&d++,this.length=Math.min(d,this.length),h!==0){var p=67108863^67108863>>>h<<h;this.words[this.length-1]&=p}return this.strip()},n.prototype.maskn=function(a){return this.clone().imaskn(a)},n.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},n.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},n.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},n.prototype.addn=function(a){return this.clone().iaddn(a)},n.prototype.subn=function(a){return this.clone().isubn(a)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(a,h,d){var p=a.length+d,w;this._expand(p);var b,I=0;for(w=0;w<a.length;w++){b=(this.words[w+d]|0)+I;var y=(a.words[w]|0)*h;b-=y&67108863,I=(b>>26)-(y/67108864|0),this.words[w+d]=b&67108863}for(;w<this.length-d;w++)b=(this.words[w+d]|0)+I,I=b>>26,this.words[w+d]=b&67108863;if(I===0)return this.strip();for(i(I===-1),I=0,w=0;w<this.length;w++)b=-(this.words[w]|0)+I,I=b>>26,this.words[w]=b&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(a,h){var d=this.length-a.length,p=this.clone(),w=a,b=w.words[w.length-1]|0,I=this._countBits(b);d=26-I,d!==0&&(w=w.ushln(d),p.iushln(d),b=w.words[w.length-1]|0);var y=p.length-w.length,o;if(h!=="mod"){o=new n(null),o.length=y+1,o.words=new Array(o.length);for(var v=0;v<o.length;v++)o.words[v]=0}var R=p.clone()._ishlnsubmul(w,1,y);R.negative===0&&(p=R,o&&(o.words[y]=1));for(var L=y-1;L>=0;L--){var z=(p.words[w.length+L]|0)*67108864+(p.words[w.length+L-1]|0);for(z=Math.min(z/b|0,67108863),p._ishlnsubmul(w,z,L);p.negative!==0;)z--,p.negative=0,p._ishlnsubmul(w,1,L),p.isZero()||(p.negative^=1);o&&(o.words[L]=z)}return o&&o.strip(),p.strip(),h!=="div"&&d!==0&&p.iushrn(d),{div:o||null,mod:p}},n.prototype.divmod=function(a,h,d){if(i(!a.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var p,w,b;return this.negative!==0&&a.negative===0?(b=this.neg().divmod(a,h),h!=="mod"&&(p=b.div.neg()),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.iadd(a)),{div:p,mod:w}):this.negative===0&&a.negative!==0?(b=this.divmod(a.neg(),h),h!=="mod"&&(p=b.div.neg()),{div:p,mod:b.mod}):(this.negative&a.negative)!==0?(b=this.neg().divmod(a.neg(),h),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.isub(a)),{div:b.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new n(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new n(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new n(this.modn(a.words[0]))}:this._wordDiv(a,h)},n.prototype.div=function(a){return this.divmod(a,"div",!1).div},n.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},n.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},n.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var d=h.div.negative!==0?h.mod.isub(a):h.mod,p=a.ushrn(1),w=a.andln(1),b=d.cmp(p);return b<0||w===1&&b===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},n.prototype.modn=function(a){i(a<=67108863);for(var h=(1<<26)%a,d=0,p=this.length-1;p>=0;p--)d=(h*d+(this.words[p]|0))%a;return d},n.prototype.idivn=function(a){i(a<=67108863);for(var h=0,d=this.length-1;d>=0;d--){var p=(this.words[d]|0)+h*67108864;this.words[d]=p/a|0,h=p%a}return this.strip()},n.prototype.divn=function(a){return this.clone().idivn(a)},n.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=new n(0),I=new n(1),y=0;h.isEven()&&d.isEven();)h.iushrn(1),d.iushrn(1),++y;for(var o=d.clone(),v=h.clone();!h.isZero();){for(var R=0,L=1;(h.words[0]&L)===0&&R<26;++R,L<<=1);if(R>0)for(h.iushrn(R);R-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(o),w.isub(v)),p.iushrn(1),w.iushrn(1);for(var z=0,q=1;(d.words[0]&q)===0&&z<26;++z,q<<=1);if(z>0)for(d.iushrn(z);z-- >0;)(b.isOdd()||I.isOdd())&&(b.iadd(o),I.isub(v)),b.iushrn(1),I.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(b),w.isub(I)):(d.isub(h),b.isub(p),I.isub(w))}return{a:b,b:I,gcd:d.iushln(y)}},n.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=d.clone();h.cmpn(1)>0&&d.cmpn(1)>0;){for(var I=0,y=1;(h.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(h.iushrn(I);I-- >0;)p.isOdd()&&p.iadd(b),p.iushrn(1);for(var o=0,v=1;(d.words[0]&v)===0&&o<26;++o,v<<=1);if(o>0)for(d.iushrn(o);o-- >0;)w.isOdd()&&w.iadd(b),w.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(w)):(d.isub(h),w.isub(p))}var R;return h.cmpn(1)===0?R=p:R=w,R.cmpn(0)<0&&R.iadd(a),R},n.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),d=a.clone();h.negative=0,d.negative=0;for(var p=0;h.isEven()&&d.isEven();p++)h.iushrn(1),d.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;d.isEven();)d.iushrn(1);var w=h.cmp(d);if(w<0){var b=h;h=d,d=b}else if(w===0||d.cmpn(1)===0)break;h.isub(d)}while(!0);return d.iushln(p)},n.prototype.invm=function(a){return this.egcd(a).a.umod(a)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(a){return this.words[0]&a},n.prototype.bincn=function(a){i(typeof a=="number");var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return this._expand(d+1),this.words[d]|=p,this;for(var w=p,b=d;w!==0&&b<this.length;b++){var I=this.words[b]|0;I+=w,w=I>>>26,I&=67108863,this.words[b]=I}return w!==0&&(this.words[b]=w,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var d;if(this.length>1)d=1;else{h&&(a=-a),i(a<=67108863,"Number is too big");var p=this.words[0]|0;d=p===a?0:p<a?-1:1}return this.negative!==0?-d|0:d},n.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},n.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,d=this.length-1;d>=0;d--){var p=this.words[d]|0,w=a.words[d]|0;if(p!==w){p<w?h=-1:p>w&&(h=1);break}}return h},n.prototype.gtn=function(a){return this.cmpn(a)===1},n.prototype.gt=function(a){return this.cmp(a)===1},n.prototype.gten=function(a){return this.cmpn(a)>=0},n.prototype.gte=function(a){return this.cmp(a)>=0},n.prototype.ltn=function(a){return this.cmpn(a)===-1},n.prototype.lt=function(a){return this.cmp(a)===-1},n.prototype.lten=function(a){return this.cmpn(a)<=0},n.prototype.lte=function(a){return this.cmp(a)<=0},n.prototype.eqn=function(a){return this.cmpn(a)===0},n.prototype.eq=function(a){return this.cmp(a)===0},n.red=function(a){return new $(a)},n.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(a){return this.red=a,this},n.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},n.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},n.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},n.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},n.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},n.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},n.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},n.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var C={k256:null,p224:null,p192:null,p25519:null};function j(M,a){this.name=M,this.p=new n(a,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var a=new n(null);return a.words=new Array(Math.ceil(this.n/13)),a},j.prototype.ireduce=function(a){var h=a,d;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),d=h.bitLength();while(d>this.n);var p=d<this.n?-1:h.ucmp(this.p);return p===0?(h.words[0]=0,h.length=1):p>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},j.prototype.split=function(a,h){a.iushrn(this.n,0,h)},j.prototype.imulK=function(a){return a.imul(this.k)};function k(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(k,j),k.prototype.split=function(a,h){for(var d=4194303,p=Math.min(a.length,9),w=0;w<p;w++)h.words[w]=a.words[w];if(h.length=p,a.length<=9){a.words[0]=0,a.length=1;return}var b=a.words[9];for(h.words[h.length++]=b&d,w=10;w<a.length;w++){var I=a.words[w]|0;a.words[w-10]=(I&d)<<4|b>>>22,b=I}b>>>=22,a.words[w-10]=b,b===0&&a.length>10?a.length-=10:a.length-=9},k.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,d=0;d<a.length;d++){var p=a.words[d]|0;h+=p*977,a.words[d]=h&67108863,h=p*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function P(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(P,j);function Q(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Q,j);function F(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(F,j),F.prototype.imulK=function(a){for(var h=0,d=0;d<a.length;d++){var p=(a.words[d]|0)*19+h,w=p&67108863;p>>>=26,a.words[d]=w,h=p}return h!==0&&(a.words[a.length++]=h),a},n._prime=function(a){if(C[a])return C[a];var h;if(a==="k256")h=new k;else if(a==="p224")h=new P;else if(a==="p192")h=new Q;else if(a==="p25519")h=new F;else throw new Error("Unknown prime "+a);return C[a]=h,h};function $(M){if(typeof M=="string"){var a=n._prime(M);this.m=a.p,this.prime=a}else i(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}$.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},$.prototype._verify2=function(a,h){i((a.negative|h.negative)===0,"red works only with positives"),i(a.red&&a.red===h.red,"red works only with red numbers")},$.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},$.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},$.prototype.add=function(a,h){this._verify2(a,h);var d=a.add(h);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},$.prototype.iadd=function(a,h){this._verify2(a,h);var d=a.iadd(h);return d.cmp(this.m)>=0&&d.isub(this.m),d},$.prototype.sub=function(a,h){this._verify2(a,h);var d=a.sub(h);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},$.prototype.isub=function(a,h){this._verify2(a,h);var d=a.isub(h);return d.cmpn(0)<0&&d.iadd(this.m),d},$.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},$.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},$.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},$.prototype.isqr=function(a){return this.imul(a,a.clone())},$.prototype.sqr=function(a){return this.mul(a,a)},$.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var d=this.m.add(new n(1)).iushrn(2);return this.pow(a,d)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);i(!p.isZero());var b=new n(1).toRed(this),I=b.redNeg(),y=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new n(2*o*o).toRed(this);this.pow(o,y).cmp(I)!==0;)o.redIAdd(I);for(var v=this.pow(o,p),R=this.pow(a,p.addn(1).iushrn(1)),L=this.pow(a,p),z=w;L.cmp(b)!==0;){for(var q=L,Y=0;q.cmp(b)!==0;Y++)q=q.redSqr();i(Y<z);var T=this.pow(v,new n(1).iushln(z-Y-1));R=R.redMul(T),v=T.redSqr(),L=L.redMul(v),z=Y}return R},$.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},$.prototype.pow=function(a,h){if(h.isZero())return new n(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var d=4,p=new Array(1<<d);p[0]=new n(1).toRed(this),p[1]=a;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],a);var b=p[0],I=0,y=0,o=h.bitLength()%26;for(o===0&&(o=26),w=h.length-1;w>=0;w--){for(var v=h.words[w],R=o-1;R>=0;R--){var L=v>>R&1;if(b!==p[0]&&(b=this.sqr(b)),L===0&&I===0){y=0;continue}I<<=1,I|=L,y++,!(y!==d&&(w!==0||R!==0))&&(b=this.mul(b,p[I]),y=0,I=0)}o=26}return b},$.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},$.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},n.mont=function(a){return new Z(a)};function Z(M){$.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Z,$),Z.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Z.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},Z.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new n(0)._forceRed(this);var d=a.mul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,HR)})(cf)),cf.exports}var Gg,tI;function GR(){if(tI)return Gg;tI=1;var r=cd(),e=ZR();Gg=function(c){return new i(c)};var t={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};t.p224=t.secp224r1,t.p256=t.secp256r1=t.prime256v1,t.p192=t.secp192r1=t.prime192v1,t.p384=t.secp384r1,t.p521=t.secp521r1;function i(n){this.curveType=t[n],this.curveType||(this.curveType={name:n}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}i.prototype.generateKeys=function(n,c){return this.keys=this.curve.genKeyPair(),this.getPublicKey(n,c)},i.prototype.computeSecret=function(n,c,l){c=c||"utf8",We.isBuffer(n)||(n=new We(n,c));var u=this.curve.keyFromPublic(n).getPublic(),f=u.mul(this.keys.getPrivate()).getX();return s(f,l,this.curveType.byteLength)},i.prototype.getPublicKey=function(n,c){var l=this.keys.getPublic(c==="compressed",!0);return c==="hybrid"&&(l[l.length-1]%2?l[0]=7:l[0]=6),s(l,n)},i.prototype.getPrivateKey=function(n){return s(this.keys.getPrivate(),n)},i.prototype.setPublicKey=function(n,c){return c=c||"utf8",We.isBuffer(n)||(n=new We(n,c)),this.keys._importPublic(n),this},i.prototype.setPrivateKey=function(n,c){c=c||"utf8",We.isBuffer(n)||(n=new We(n,c));var l=new e(n);return l=l.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(l),this};function s(n,c,l){Array.isArray(n)||(n=n.toArray());var u=new We(n);if(l&&u.length<l){var f=new We(l-u.length);f.fill(0),u=We.concat([f,u])}return c?u.toString(c):u}return Gg}var Kg={},Jg,rI;function jS(){if(rI)return Jg;rI=1;var r=jl(),e=tt().Buffer;Jg=function(i,s){for(var n=e.alloc(0),c=0,l;n.length<s;)l=t(c++),n=e.concat([n,r("sha1").update(i).update(l).digest()]);return n.slice(0,s)};function t(i){var s=e.allocUnsafe(4);return s.writeUInt32BE(i,0),s}return Jg}var Xg,iI;function CS(){return iI||(iI=1,Xg=function(e,t){for(var i=e.length,s=-1;++s<i;)e[s]^=t[s];return e}),Xg}var hf={exports:{}},KR=hf.exports,nI;function Av(){return nI||(nI=1,(function(r){(function(e,t){function i(M,a){if(!M)throw new Error(a||"Assertion failed")}function s(M,a){M.super_=a;var h=function(){};h.prototype=a.prototype,M.prototype=new h,M.prototype.constructor=M}function n(M,a,h){if(n.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(M||0,a||10,h||"be"))}typeof e=="object"?e.exports=n:t.BN=n,n.BN=n,n.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=ki().Buffer}catch{}n.isBN=function(a){return a instanceof n?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===n.wordSize&&Array.isArray(a.words)},n.max=function(a,h){return a.cmp(h)>0?a:h},n.min=function(a,h){return a.cmp(h)<0?a:h},n.prototype._init=function(a,h,d){if(typeof a=="number")return this._initNumber(a,h,d);if(typeof a=="object")return this._initArray(a,h,d);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var p=0;a[0]==="-"&&(p++,this.negative=1),p<a.length&&(h===16?this._parseHex(a,p,d):(this._parseBase(a,h,p),d==="le"&&this._initArray(this.toArray(),h,d)))},n.prototype._initNumber=function(a,h,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),h,d)},n.prototype._initArray=function(a,h,d){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w,b,I=0;if(d==="be")for(p=a.length-1,w=0;p>=0;p-=3)b=a[p]|a[p-1]<<8|a[p-2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);else if(d==="le")for(p=0,w=0;p<a.length;p+=3)b=a[p]|a[p+1]<<8|a[p+2]<<16,this.words[w]|=b<<I&67108863,this.words[w+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,w++);return this.strip()};function l(M,a){var h=M.charCodeAt(a);return h>=65&&h<=70?h-55:h>=97&&h<=102?h-87:h-48&15}function u(M,a,h){var d=l(M,h);return h-1>=a&&(d|=l(M,h-1)<<4),d}n.prototype._parseHex=function(a,h,d){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var w=0,b=0,I;if(d==="be")for(p=a.length-1;p>=h;p-=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8;else{var y=a.length-h;for(p=y%2===0?h+1:h;p<a.length;p+=2)I=u(a,h,p)<<w,this.words[b]|=I&67108863,w>=18?(w-=18,b+=1,this.words[b]|=I>>>26):w+=8}this.strip()};function f(M,a,h,d){for(var p=0,w=Math.min(M.length,h),b=a;b<w;b++){var I=M.charCodeAt(b)-48;p*=d,I>=49?p+=I-49+10:I>=17?p+=I-17+10:p+=I}return p}n.prototype._parseBase=function(a,h,d){this.words=[0],this.length=1;for(var p=0,w=1;w<=67108863;w*=h)p++;p--,w=w/h|0;for(var b=a.length-d,I=b%p,y=Math.min(b,b-I)+d,o=0,v=d;v<y;v+=p)o=f(a,v,v+p,h),this.imuln(w),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o);if(I!==0){var R=1;for(o=f(a,v,a.length,h),v=0;v<I;v++)R*=h;this.imuln(R),this.words[0]+o<67108864?this.words[0]+=o:this._iaddn(o)}this.strip()},n.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red},n.prototype.clone=function(){var a=new n(null);return this.copy(a),a},n.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(a,h){a=a||10,h=h|0||1;var d;if(a===16||a==="hex"){d="";for(var p=0,w=0,b=0;b<this.length;b++){var I=this.words[b],y=((I<<p|w)&16777215).toString(16);w=I>>>24-p&16777215,p+=2,p>=26&&(p-=26,b--),w!==0||b!==this.length-1?d=g[6-y.length]+y+d:d=y+d}for(w!==0&&(d=w.toString(16)+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var o=m[a],v=N[a];d="";var R=this.clone();for(R.negative=0;!R.isZero();){var L=R.modn(v).toString(a);R=R.idivn(v),R.isZero()?d=L+d:d=g[o-L.length]+L+d}for(this.isZero()&&(d="0"+d);d.length%h!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(a,h){return i(typeof c<"u"),this.toArrayLike(c,a,h)},n.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)},n.prototype.toArrayLike=function(a,h,d){var p=this.byteLength(),w=d||Math.max(1,p);i(p<=w,"byte array longer than desired length"),i(w>0,"Requested array length <= 0"),this.strip();var b=h==="le",I=new a(w),y,o,v=this.clone();if(b){for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[o]=y;for(;o<w;o++)I[o]=0}else{for(o=0;o<w-p;o++)I[o]=0;for(o=0;!v.isZero();o++)y=v.andln(255),v.iushrn(8),I[w-o-1]=y}return I},Math.clz32?n.prototype._countBits=function(a){return 32-Math.clz32(a)}:n.prototype._countBits=function(a){var h=a,d=0;return h>=4096&&(d+=13,h>>>=13),h>=64&&(d+=7,h>>>=7),h>=8&&(d+=4,h>>>=4),h>=2&&(d+=2,h>>>=2),d+h},n.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,d=0;return(h&8191)===0&&(d+=13,h>>>=13),(h&127)===0&&(d+=7,h>>>=7),(h&15)===0&&(d+=4,h>>>=4),(h&3)===0&&(d+=2,h>>>=2),(h&1)===0&&d++,d},n.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function A(M){for(var a=new Array(M.bitLength()),h=0;h<a.length;h++){var d=h/26|0,p=h%26;a[h]=(M.words[d]&1<<p)>>>p}return a}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var d=this._zeroBits(this.words[h]);if(a+=d,d!==26)break}return a},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},n.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this.strip()},n.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},n.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},n.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},n.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var d=0;d<h.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=h.length,this.strip()},n.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},n.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},n.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},n.prototype.iuxor=function(a){var h,d;this.length>a.length?(h=this,d=a):(h=a,d=this);for(var p=0;p<d.length;p++)this.words[p]=h.words[p]^d.words[p];if(this!==h)for(;p<h.length;p++)this.words[p]=h.words[p];return this.length=h.length,this.strip()},n.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},n.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},n.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},n.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,d=a%26;this._expand(h),d>0&&h--;for(var p=0;p<h;p++)this.words[p]=~this.words[p]&67108863;return d>0&&(this.words[p]=~this.words[p]&67108863>>26-d),this.strip()},n.prototype.notn=function(a){return this.clone().inotn(a)},n.prototype.setn=function(a,h){i(typeof a=="number"&&a>=0);var d=a/26|0,p=a%26;return this._expand(d+1),h?this.words[d]=this.words[d]|1<<p:this.words[d]=this.words[d]&~(1<<p),this.strip()},n.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var d,p;this.length>a.length?(d=this,p=a):(d=a,p=this);for(var w=0,b=0;b<p.length;b++)h=(d.words[b]|0)+(p.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;for(;w!==0&&b<d.length;b++)h=(d.words[b]|0)+w,this.words[b]=h&67108863,w=h>>>26;if(this.length=d.length,w!==0)this.words[this.length]=w,this.length++;else if(d!==this)for(;b<d.length;b++)this.words[b]=d.words[b];return this},n.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},n.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,w;d>0?(p=this,w=a):(p=a,w=this);for(var b=0,I=0;I<w.length;I++)h=(p.words[I]|0)-(w.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;for(;b!==0&&I<p.length;I++)h=(p.words[I]|0)+b,b=h>>26,this.words[I]=h&67108863;if(b===0&&I<p.length&&p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this.length=Math.max(this.length,I),p!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(a){return this.clone().isub(a)};function _(M,a,h){h.negative=a.negative^M.negative;var d=M.length+a.length|0;h.length=d,d=d-1|0;var p=M.words[0]|0,w=a.words[0]|0,b=p*w,I=b&67108863,y=b/67108864|0;h.words[0]=I;for(var o=1;o<d;o++){for(var v=y>>>26,R=y&67108863,L=Math.min(o,a.length-1),z=Math.max(0,o-M.length+1);z<=L;z++){var q=o-z|0;p=M.words[q]|0,w=a.words[z]|0,b=p*w+R,v+=b/67108864|0,R=b&67108863}h.words[o]=R|0,y=v|0}return y!==0?h.words[o]=y|0:h.length--,h.strip()}var E=function(a,h,d){var p=a.words,w=h.words,b=d.words,I=0,y,o,v,R=p[0]|0,L=R&8191,z=R>>>13,q=p[1]|0,Y=q&8191,T=q>>>13,O=p[2]|0,B=O&8191,W=O>>>13,V=p[3]|0,U=V&8191,H=V>>>13,de=p[4]|0,ee=de&8191,J=de>>>13,Qe=p[5]|0,oe=Qe&8191,K=Qe>>>13,et=p[6]|0,re=et&8191,ae=et>>>13,Ke=p[7]|0,se=Ke&8191,ce=Ke>>>13,Dt=p[8]|0,he=Dt&8191,le=Dt>>>13,Cr=p[9]|0,ue=Cr&8191,ve=Cr>>>13,Br=w[0]|0,_e=Br&8191,be=Br>>>13,Or=w[1]|0,Me=Or&8191,Ne=Or>>>13,Vr=w[2]|0,fe=Vr&8191,Ie=Vr>>>13,Fr=w[3]|0,Ee=Fr&8191,ge=Fr>>>13,Er=w[4]|0,ye=Er&8191,we=Er>>>13,Pr=w[5]|0,pe=Pr&8191,De=Pr>>>13,Hr=w[6]|0,Se=Hr&8191,xe=Hr>>>13,Zr=w[7]|0,Ae=Zr&8191,me=Zr>>>13,tr=w[8]|0,Te=tr&8191,je=tr>>>13,Gr=w[9]|0,Ce=Gr&8191,Oe=Gr>>>13;d.negative=a.negative^h.negative,d.length=19,y=Math.imul(L,_e),o=Math.imul(L,be),o=o+Math.imul(z,_e)|0,v=Math.imul(z,be);var mt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(mt>>>26)|0,mt&=67108863,y=Math.imul(Y,_e),o=Math.imul(Y,be),o=o+Math.imul(T,_e)|0,v=Math.imul(T,be),y=y+Math.imul(L,Me)|0,o=o+Math.imul(L,Ne)|0,o=o+Math.imul(z,Me)|0,v=v+Math.imul(z,Ne)|0;var rr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(rr>>>26)|0,rr&=67108863,y=Math.imul(B,_e),o=Math.imul(B,be),o=o+Math.imul(W,_e)|0,v=Math.imul(W,be),y=y+Math.imul(Y,Me)|0,o=o+Math.imul(Y,Ne)|0,o=o+Math.imul(T,Me)|0,v=v+Math.imul(T,Ne)|0,y=y+Math.imul(L,fe)|0,o=o+Math.imul(L,Ie)|0,o=o+Math.imul(z,fe)|0,v=v+Math.imul(z,Ie)|0;var ir=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul(U,_e),o=Math.imul(U,be),o=o+Math.imul(H,_e)|0,v=Math.imul(H,be),y=y+Math.imul(B,Me)|0,o=o+Math.imul(B,Ne)|0,o=o+Math.imul(W,Me)|0,v=v+Math.imul(W,Ne)|0,y=y+Math.imul(Y,fe)|0,o=o+Math.imul(Y,Ie)|0,o=o+Math.imul(T,fe)|0,v=v+Math.imul(T,Ie)|0,y=y+Math.imul(L,Ee)|0,o=o+Math.imul(L,ge)|0,o=o+Math.imul(z,Ee)|0,v=v+Math.imul(z,ge)|0;var nr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(ee,_e),o=Math.imul(ee,be),o=o+Math.imul(J,_e)|0,v=Math.imul(J,be),y=y+Math.imul(U,Me)|0,o=o+Math.imul(U,Ne)|0,o=o+Math.imul(H,Me)|0,v=v+Math.imul(H,Ne)|0,y=y+Math.imul(B,fe)|0,o=o+Math.imul(B,Ie)|0,o=o+Math.imul(W,fe)|0,v=v+Math.imul(W,Ie)|0,y=y+Math.imul(Y,Ee)|0,o=o+Math.imul(Y,ge)|0,o=o+Math.imul(T,Ee)|0,v=v+Math.imul(T,ge)|0,y=y+Math.imul(L,ye)|0,o=o+Math.imul(L,we)|0,o=o+Math.imul(z,ye)|0,v=v+Math.imul(z,we)|0;var sr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(oe,_e),o=Math.imul(oe,be),o=o+Math.imul(K,_e)|0,v=Math.imul(K,be),y=y+Math.imul(ee,Me)|0,o=o+Math.imul(ee,Ne)|0,o=o+Math.imul(J,Me)|0,v=v+Math.imul(J,Ne)|0,y=y+Math.imul(U,fe)|0,o=o+Math.imul(U,Ie)|0,o=o+Math.imul(H,fe)|0,v=v+Math.imul(H,Ie)|0,y=y+Math.imul(B,Ee)|0,o=o+Math.imul(B,ge)|0,o=o+Math.imul(W,Ee)|0,v=v+Math.imul(W,ge)|0,y=y+Math.imul(Y,ye)|0,o=o+Math.imul(Y,we)|0,o=o+Math.imul(T,ye)|0,v=v+Math.imul(T,we)|0,y=y+Math.imul(L,pe)|0,o=o+Math.imul(L,De)|0,o=o+Math.imul(z,pe)|0,v=v+Math.imul(z,De)|0;var ar=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ar>>>26)|0,ar&=67108863,y=Math.imul(re,_e),o=Math.imul(re,be),o=o+Math.imul(ae,_e)|0,v=Math.imul(ae,be),y=y+Math.imul(oe,Me)|0,o=o+Math.imul(oe,Ne)|0,o=o+Math.imul(K,Me)|0,v=v+Math.imul(K,Ne)|0,y=y+Math.imul(ee,fe)|0,o=o+Math.imul(ee,Ie)|0,o=o+Math.imul(J,fe)|0,v=v+Math.imul(J,Ie)|0,y=y+Math.imul(U,Ee)|0,o=o+Math.imul(U,ge)|0,o=o+Math.imul(H,Ee)|0,v=v+Math.imul(H,ge)|0,y=y+Math.imul(B,ye)|0,o=o+Math.imul(B,we)|0,o=o+Math.imul(W,ye)|0,v=v+Math.imul(W,we)|0,y=y+Math.imul(Y,pe)|0,o=o+Math.imul(Y,De)|0,o=o+Math.imul(T,pe)|0,v=v+Math.imul(T,De)|0,y=y+Math.imul(L,Se)|0,o=o+Math.imul(L,xe)|0,o=o+Math.imul(z,Se)|0,v=v+Math.imul(z,xe)|0;var St=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(St>>>26)|0,St&=67108863,y=Math.imul(se,_e),o=Math.imul(se,be),o=o+Math.imul(ce,_e)|0,v=Math.imul(ce,be),y=y+Math.imul(re,Me)|0,o=o+Math.imul(re,Ne)|0,o=o+Math.imul(ae,Me)|0,v=v+Math.imul(ae,Ne)|0,y=y+Math.imul(oe,fe)|0,o=o+Math.imul(oe,Ie)|0,o=o+Math.imul(K,fe)|0,v=v+Math.imul(K,Ie)|0,y=y+Math.imul(ee,Ee)|0,o=o+Math.imul(ee,ge)|0,o=o+Math.imul(J,Ee)|0,v=v+Math.imul(J,ge)|0,y=y+Math.imul(U,ye)|0,o=o+Math.imul(U,we)|0,o=o+Math.imul(H,ye)|0,v=v+Math.imul(H,we)|0,y=y+Math.imul(B,pe)|0,o=o+Math.imul(B,De)|0,o=o+Math.imul(W,pe)|0,v=v+Math.imul(W,De)|0,y=y+Math.imul(Y,Se)|0,o=o+Math.imul(Y,xe)|0,o=o+Math.imul(T,Se)|0,v=v+Math.imul(T,xe)|0,y=y+Math.imul(L,Ae)|0,o=o+Math.imul(L,me)|0,o=o+Math.imul(z,Ae)|0,v=v+Math.imul(z,me)|0;var or=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(he,_e),o=Math.imul(he,be),o=o+Math.imul(le,_e)|0,v=Math.imul(le,be),y=y+Math.imul(se,Me)|0,o=o+Math.imul(se,Ne)|0,o=o+Math.imul(ce,Me)|0,v=v+Math.imul(ce,Ne)|0,y=y+Math.imul(re,fe)|0,o=o+Math.imul(re,Ie)|0,o=o+Math.imul(ae,fe)|0,v=v+Math.imul(ae,Ie)|0,y=y+Math.imul(oe,Ee)|0,o=o+Math.imul(oe,ge)|0,o=o+Math.imul(K,Ee)|0,v=v+Math.imul(K,ge)|0,y=y+Math.imul(ee,ye)|0,o=o+Math.imul(ee,we)|0,o=o+Math.imul(J,ye)|0,v=v+Math.imul(J,we)|0,y=y+Math.imul(U,pe)|0,o=o+Math.imul(U,De)|0,o=o+Math.imul(H,pe)|0,v=v+Math.imul(H,De)|0,y=y+Math.imul(B,Se)|0,o=o+Math.imul(B,xe)|0,o=o+Math.imul(W,Se)|0,v=v+Math.imul(W,xe)|0,y=y+Math.imul(Y,Ae)|0,o=o+Math.imul(Y,me)|0,o=o+Math.imul(T,Ae)|0,v=v+Math.imul(T,me)|0,y=y+Math.imul(L,Te)|0,o=o+Math.imul(L,je)|0,o=o+Math.imul(z,Te)|0,v=v+Math.imul(z,je)|0;var cr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(cr>>>26)|0,cr&=67108863,y=Math.imul(ue,_e),o=Math.imul(ue,be),o=o+Math.imul(ve,_e)|0,v=Math.imul(ve,be),y=y+Math.imul(he,Me)|0,o=o+Math.imul(he,Ne)|0,o=o+Math.imul(le,Me)|0,v=v+Math.imul(le,Ne)|0,y=y+Math.imul(se,fe)|0,o=o+Math.imul(se,Ie)|0,o=o+Math.imul(ce,fe)|0,v=v+Math.imul(ce,Ie)|0,y=y+Math.imul(re,Ee)|0,o=o+Math.imul(re,ge)|0,o=o+Math.imul(ae,Ee)|0,v=v+Math.imul(ae,ge)|0,y=y+Math.imul(oe,ye)|0,o=o+Math.imul(oe,we)|0,o=o+Math.imul(K,ye)|0,v=v+Math.imul(K,we)|0,y=y+Math.imul(ee,pe)|0,o=o+Math.imul(ee,De)|0,o=o+Math.imul(J,pe)|0,v=v+Math.imul(J,De)|0,y=y+Math.imul(U,Se)|0,o=o+Math.imul(U,xe)|0,o=o+Math.imul(H,Se)|0,v=v+Math.imul(H,xe)|0,y=y+Math.imul(B,Ae)|0,o=o+Math.imul(B,me)|0,o=o+Math.imul(W,Ae)|0,v=v+Math.imul(W,me)|0,y=y+Math.imul(Y,Te)|0,o=o+Math.imul(Y,je)|0,o=o+Math.imul(T,Te)|0,v=v+Math.imul(T,je)|0,y=y+Math.imul(L,Ce)|0,o=o+Math.imul(L,Oe)|0,o=o+Math.imul(z,Ce)|0,v=v+Math.imul(z,Oe)|0;var hr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(hr>>>26)|0,hr&=67108863,y=Math.imul(ue,Me),o=Math.imul(ue,Ne),o=o+Math.imul(ve,Me)|0,v=Math.imul(ve,Ne),y=y+Math.imul(he,fe)|0,o=o+Math.imul(he,Ie)|0,o=o+Math.imul(le,fe)|0,v=v+Math.imul(le,Ie)|0,y=y+Math.imul(se,Ee)|0,o=o+Math.imul(se,ge)|0,o=o+Math.imul(ce,Ee)|0,v=v+Math.imul(ce,ge)|0,y=y+Math.imul(re,ye)|0,o=o+Math.imul(re,we)|0,o=o+Math.imul(ae,ye)|0,v=v+Math.imul(ae,we)|0,y=y+Math.imul(oe,pe)|0,o=o+Math.imul(oe,De)|0,o=o+Math.imul(K,pe)|0,v=v+Math.imul(K,De)|0,y=y+Math.imul(ee,Se)|0,o=o+Math.imul(ee,xe)|0,o=o+Math.imul(J,Se)|0,v=v+Math.imul(J,xe)|0,y=y+Math.imul(U,Ae)|0,o=o+Math.imul(U,me)|0,o=o+Math.imul(H,Ae)|0,v=v+Math.imul(H,me)|0,y=y+Math.imul(B,Te)|0,o=o+Math.imul(B,je)|0,o=o+Math.imul(W,Te)|0,v=v+Math.imul(W,je)|0,y=y+Math.imul(Y,Ce)|0,o=o+Math.imul(Y,Oe)|0,o=o+Math.imul(T,Ce)|0,v=v+Math.imul(T,Oe)|0;var lr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(lr>>>26)|0,lr&=67108863,y=Math.imul(ue,fe),o=Math.imul(ue,Ie),o=o+Math.imul(ve,fe)|0,v=Math.imul(ve,Ie),y=y+Math.imul(he,Ee)|0,o=o+Math.imul(he,ge)|0,o=o+Math.imul(le,Ee)|0,v=v+Math.imul(le,ge)|0,y=y+Math.imul(se,ye)|0,o=o+Math.imul(se,we)|0,o=o+Math.imul(ce,ye)|0,v=v+Math.imul(ce,we)|0,y=y+Math.imul(re,pe)|0,o=o+Math.imul(re,De)|0,o=o+Math.imul(ae,pe)|0,v=v+Math.imul(ae,De)|0,y=y+Math.imul(oe,Se)|0,o=o+Math.imul(oe,xe)|0,o=o+Math.imul(K,Se)|0,v=v+Math.imul(K,xe)|0,y=y+Math.imul(ee,Ae)|0,o=o+Math.imul(ee,me)|0,o=o+Math.imul(J,Ae)|0,v=v+Math.imul(J,me)|0,y=y+Math.imul(U,Te)|0,o=o+Math.imul(U,je)|0,o=o+Math.imul(H,Te)|0,v=v+Math.imul(H,je)|0,y=y+Math.imul(B,Ce)|0,o=o+Math.imul(B,Oe)|0,o=o+Math.imul(W,Ce)|0,v=v+Math.imul(W,Oe)|0;var ur=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(ur>>>26)|0,ur&=67108863,y=Math.imul(ue,Ee),o=Math.imul(ue,ge),o=o+Math.imul(ve,Ee)|0,v=Math.imul(ve,ge),y=y+Math.imul(he,ye)|0,o=o+Math.imul(he,we)|0,o=o+Math.imul(le,ye)|0,v=v+Math.imul(le,we)|0,y=y+Math.imul(se,pe)|0,o=o+Math.imul(se,De)|0,o=o+Math.imul(ce,pe)|0,v=v+Math.imul(ce,De)|0,y=y+Math.imul(re,Se)|0,o=o+Math.imul(re,xe)|0,o=o+Math.imul(ae,Se)|0,v=v+Math.imul(ae,xe)|0,y=y+Math.imul(oe,Ae)|0,o=o+Math.imul(oe,me)|0,o=o+Math.imul(K,Ae)|0,v=v+Math.imul(K,me)|0,y=y+Math.imul(ee,Te)|0,o=o+Math.imul(ee,je)|0,o=o+Math.imul(J,Te)|0,v=v+Math.imul(J,je)|0,y=y+Math.imul(U,Ce)|0,o=o+Math.imul(U,Oe)|0,o=o+Math.imul(H,Ce)|0,v=v+Math.imul(H,Oe)|0;var Ut=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,y=Math.imul(ue,ye),o=Math.imul(ue,we),o=o+Math.imul(ve,ye)|0,v=Math.imul(ve,we),y=y+Math.imul(he,pe)|0,o=o+Math.imul(he,De)|0,o=o+Math.imul(le,pe)|0,v=v+Math.imul(le,De)|0,y=y+Math.imul(se,Se)|0,o=o+Math.imul(se,xe)|0,o=o+Math.imul(ce,Se)|0,v=v+Math.imul(ce,xe)|0,y=y+Math.imul(re,Ae)|0,o=o+Math.imul(re,me)|0,o=o+Math.imul(ae,Ae)|0,v=v+Math.imul(ae,me)|0,y=y+Math.imul(oe,Te)|0,o=o+Math.imul(oe,je)|0,o=o+Math.imul(K,Te)|0,v=v+Math.imul(K,je)|0,y=y+Math.imul(ee,Ce)|0,o=o+Math.imul(ee,Oe)|0,o=o+Math.imul(J,Ce)|0,v=v+Math.imul(J,Oe)|0;var fr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(fr>>>26)|0,fr&=67108863,y=Math.imul(ue,pe),o=Math.imul(ue,De),o=o+Math.imul(ve,pe)|0,v=Math.imul(ve,De),y=y+Math.imul(he,Se)|0,o=o+Math.imul(he,xe)|0,o=o+Math.imul(le,Se)|0,v=v+Math.imul(le,xe)|0,y=y+Math.imul(se,Ae)|0,o=o+Math.imul(se,me)|0,o=o+Math.imul(ce,Ae)|0,v=v+Math.imul(ce,me)|0,y=y+Math.imul(re,Te)|0,o=o+Math.imul(re,je)|0,o=o+Math.imul(ae,Te)|0,v=v+Math.imul(ae,je)|0,y=y+Math.imul(oe,Ce)|0,o=o+Math.imul(oe,Oe)|0,o=o+Math.imul(K,Ce)|0,v=v+Math.imul(K,Oe)|0;var dr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(dr>>>26)|0,dr&=67108863,y=Math.imul(ue,Se),o=Math.imul(ue,xe),o=o+Math.imul(ve,Se)|0,v=Math.imul(ve,xe),y=y+Math.imul(he,Ae)|0,o=o+Math.imul(he,me)|0,o=o+Math.imul(le,Ae)|0,v=v+Math.imul(le,me)|0,y=y+Math.imul(se,Te)|0,o=o+Math.imul(se,je)|0,o=o+Math.imul(ce,Te)|0,v=v+Math.imul(ce,je)|0,y=y+Math.imul(re,Ce)|0,o=o+Math.imul(re,Oe)|0,o=o+Math.imul(ae,Ce)|0,v=v+Math.imul(ae,Oe)|0;var vt=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(vt>>>26)|0,vt&=67108863,y=Math.imul(ue,Ae),o=Math.imul(ue,me),o=o+Math.imul(ve,Ae)|0,v=Math.imul(ve,me),y=y+Math.imul(he,Te)|0,o=o+Math.imul(he,je)|0,o=o+Math.imul(le,Te)|0,v=v+Math.imul(le,je)|0,y=y+Math.imul(se,Ce)|0,o=o+Math.imul(se,Oe)|0,o=o+Math.imul(ce,Ce)|0,v=v+Math.imul(ce,Oe)|0;var pr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(pr>>>26)|0,pr&=67108863,y=Math.imul(ue,Te),o=Math.imul(ue,je),o=o+Math.imul(ve,Te)|0,v=Math.imul(ve,je),y=y+Math.imul(he,Ce)|0,o=o+Math.imul(he,Oe)|0,o=o+Math.imul(le,Ce)|0,v=v+Math.imul(le,Oe)|0;var gr=(I+y|0)+((o&8191)<<13)|0;I=(v+(o>>>13)|0)+(gr>>>26)|0,gr&=67108863,y=Math.imul(ue,Ce),o=Math.imul(ue,Oe),o=o+Math.imul(ve,Ce)|0,v=Math.imul(ve,Oe);var yr=(I+y|0)+((o&8191)<<13)|0;return I=(v+(o>>>13)|0)+(yr>>>26)|0,yr&=67108863,b[0]=mt,b[1]=rr,b[2]=ir,b[3]=nr,b[4]=sr,b[5]=ar,b[6]=St,b[7]=or,b[8]=cr,b[9]=hr,b[10]=lr,b[11]=ur,b[12]=Ut,b[13]=fr,b[14]=dr,b[15]=vt,b[16]=pr,b[17]=gr,b[18]=yr,I!==0&&(b[19]=I,d.length++),d};Math.imul||(E=_);function x(M,a,h){h.negative=a.negative^M.negative,h.length=M.length+a.length;for(var d=0,p=0,w=0;w<h.length-1;w++){var b=p;p=0;for(var I=d&67108863,y=Math.min(w,a.length-1),o=Math.max(0,w-M.length+1);o<=y;o++){var v=w-o,R=M.words[v]|0,L=a.words[o]|0,z=R*L,q=z&67108863;b=b+(z/67108864|0)|0,q=q+I|0,I=q&67108863,b=b+(q>>>26)|0,p+=b>>>26,b&=67108863}h.words[w]=I,d=b,b=p}return d!==0?h.words[w]=d:h.length--,h.strip()}function S(M,a,h){var d=new D;return d.mulp(M,a,h)}n.prototype.mulTo=function(a,h){var d,p=this.length+a.length;return this.length===10&&a.length===10?d=E(this,a,h):p<63?d=_(this,a,h):p<1024?d=x(this,a,h):d=S(this,a,h),d};function D(M,a){this.x=M,this.y=a}D.prototype.makeRBT=function(a){for(var h=new Array(a),d=n.prototype._countBits(a)-1,p=0;p<a;p++)h[p]=this.revBin(p,d,a);return h},D.prototype.revBin=function(a,h,d){if(a===0||a===d-1)return a;for(var p=0,w=0;w<h;w++)p|=(a&1)<<h-w-1,a>>=1;return p},D.prototype.permute=function(a,h,d,p,w,b){for(var I=0;I<b;I++)p[I]=h[a[I]],w[I]=d[a[I]]},D.prototype.transform=function(a,h,d,p,w,b){this.permute(b,a,h,d,p,w);for(var I=1;I<w;I<<=1)for(var y=I<<1,o=Math.cos(2*Math.PI/y),v=Math.sin(2*Math.PI/y),R=0;R<w;R+=y)for(var L=o,z=v,q=0;q<I;q++){var Y=d[R+q],T=p[R+q],O=d[R+q+I],B=p[R+q+I],W=L*O-z*B;B=L*B+z*O,O=W,d[R+q]=Y+O,p[R+q]=T+B,d[R+q+I]=Y-O,p[R+q+I]=T-B,q!==y&&(W=o*L-v*z,z=o*z+v*L,L=W)}},D.prototype.guessLen13b=function(a,h){var d=Math.max(h,a)|1,p=d&1,w=0;for(d=d/2|0;d;d=d>>>1)w++;return 1<<w+1+p},D.prototype.conjugate=function(a,h,d){if(!(d<=1))for(var p=0;p<d/2;p++){var w=a[p];a[p]=a[d-p-1],a[d-p-1]=w,w=h[p],h[p]=-h[d-p-1],h[d-p-1]=-w}},D.prototype.normalize13b=function(a,h){for(var d=0,p=0;p<h/2;p++){var w=Math.round(a[2*p+1]/h)*8192+Math.round(a[2*p]/h)+d;a[p]=w&67108863,w<67108864?d=0:d=w/67108864|0}return a},D.prototype.convert13b=function(a,h,d,p){for(var w=0,b=0;b<h;b++)w=w+(a[b]|0),d[2*b]=w&8191,w=w>>>13,d[2*b+1]=w&8191,w=w>>>13;for(b=2*h;b<p;++b)d[b]=0;i(w===0),i((w&-8192)===0)},D.prototype.stub=function(a){for(var h=new Array(a),d=0;d<a;d++)h[d]=0;return h},D.prototype.mulp=function(a,h,d){var p=2*this.guessLen13b(a.length,h.length),w=this.makeRBT(p),b=this.stub(p),I=new Array(p),y=new Array(p),o=new Array(p),v=new Array(p),R=new Array(p),L=new Array(p),z=d.words;z.length=p,this.convert13b(a.words,a.length,I,p),this.convert13b(h.words,h.length,v,p),this.transform(I,b,y,o,p,w),this.transform(v,b,R,L,p,w);for(var q=0;q<p;q++){var Y=y[q]*R[q]-o[q]*L[q];o[q]=y[q]*L[q]+o[q]*R[q],y[q]=Y}return this.conjugate(y,o,p),this.transform(y,o,z,b,p,w),this.conjugate(z,b,p),this.normalize13b(z,p),d.negative=a.negative^h.negative,d.length=a.length+h.length,d.strip()},n.prototype.mul=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},n.prototype.mulf=function(a){var h=new n(null);return h.words=new Array(this.length+a.length),S(this,a,h)},n.prototype.imul=function(a){return this.clone().mulTo(a,this)},n.prototype.imuln=function(a){i(typeof a=="number"),i(a<67108864);for(var h=0,d=0;d<this.length;d++){var p=(this.words[d]|0)*a,w=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=w>>>26,this.words[d]=w&67108863}return h!==0&&(this.words[d]=h,this.length++),this.length=a===0?1:this.length,this},n.prototype.muln=function(a){return this.clone().imuln(a)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(a){var h=A(a);if(h.length===0)return new n(1);for(var d=this,p=0;p<h.length&&h[p]===0;p++,d=d.sqr());if(++p<h.length)for(var w=d.sqr();p<h.length;p++,w=w.sqr())h[p]!==0&&(d=d.mul(w));return d},n.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=67108863>>>26-h<<26-h,w;if(h!==0){var b=0;for(w=0;w<this.length;w++){var I=this.words[w]&p,y=(this.words[w]|0)-I<<h;this.words[w]=y|b,b=I>>>26-h}b&&(this.words[w]=b,this.length++)}if(d!==0){for(w=this.length-1;w>=0;w--)this.words[w+d]=this.words[w];for(w=0;w<d;w++)this.words[w]=0;this.length+=d}return this.strip()},n.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},n.prototype.iushrn=function(a,h,d){i(typeof a=="number"&&a>=0);var p;h?p=(h-h%26)/26:p=0;var w=a%26,b=Math.min((a-w)/26,this.length),I=67108863^67108863>>>w<<w,y=d;if(p-=b,p=Math.max(0,p),y){for(var o=0;o<b;o++)y.words[o]=this.words[o];y.length=b}if(b!==0)if(this.length>b)for(this.length-=b,o=0;o<this.length;o++)this.words[o]=this.words[o+b];else this.words[0]=0,this.length=1;var v=0;for(o=this.length-1;o>=0&&(v!==0||o>=p);o--){var R=this.words[o]|0;this.words[o]=v<<26-w|R>>>w,v=R&I}return y&&v!==0&&(y.words[y.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(a,h,d){return i(this.negative===0),this.iushrn(a,h,d)},n.prototype.shln=function(a){return this.clone().ishln(a)},n.prototype.ushln=function(a){return this.clone().iushln(a)},n.prototype.shrn=function(a){return this.clone().ishrn(a)},n.prototype.ushrn=function(a){return this.clone().iushrn(a)},n.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return!1;var w=this.words[d];return!!(w&p)},n.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var h=a%26,d=(a-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(h!==0&&d++,this.length=Math.min(d,this.length),h!==0){var p=67108863^67108863>>>h<<h;this.words[this.length-1]&=p}return this.strip()},n.prototype.maskn=function(a){return this.clone().imaskn(a)},n.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},n.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},n.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this.strip()},n.prototype.addn=function(a){return this.clone().iaddn(a)},n.prototype.subn=function(a){return this.clone().isubn(a)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(a,h,d){var p=a.length+d,w;this._expand(p);var b,I=0;for(w=0;w<a.length;w++){b=(this.words[w+d]|0)+I;var y=(a.words[w]|0)*h;b-=y&67108863,I=(b>>26)-(y/67108864|0),this.words[w+d]=b&67108863}for(;w<this.length-d;w++)b=(this.words[w+d]|0)+I,I=b>>26,this.words[w+d]=b&67108863;if(I===0)return this.strip();for(i(I===-1),I=0,w=0;w<this.length;w++)b=-(this.words[w]|0)+I,I=b>>26,this.words[w]=b&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(a,h){var d=this.length-a.length,p=this.clone(),w=a,b=w.words[w.length-1]|0,I=this._countBits(b);d=26-I,d!==0&&(w=w.ushln(d),p.iushln(d),b=w.words[w.length-1]|0);var y=p.length-w.length,o;if(h!=="mod"){o=new n(null),o.length=y+1,o.words=new Array(o.length);for(var v=0;v<o.length;v++)o.words[v]=0}var R=p.clone()._ishlnsubmul(w,1,y);R.negative===0&&(p=R,o&&(o.words[y]=1));for(var L=y-1;L>=0;L--){var z=(p.words[w.length+L]|0)*67108864+(p.words[w.length+L-1]|0);for(z=Math.min(z/b|0,67108863),p._ishlnsubmul(w,z,L);p.negative!==0;)z--,p.negative=0,p._ishlnsubmul(w,1,L),p.isZero()||(p.negative^=1);o&&(o.words[L]=z)}return o&&o.strip(),p.strip(),h!=="div"&&d!==0&&p.iushrn(d),{div:o||null,mod:p}},n.prototype.divmod=function(a,h,d){if(i(!a.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var p,w,b;return this.negative!==0&&a.negative===0?(b=this.neg().divmod(a,h),h!=="mod"&&(p=b.div.neg()),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.iadd(a)),{div:p,mod:w}):this.negative===0&&a.negative!==0?(b=this.divmod(a.neg(),h),h!=="mod"&&(p=b.div.neg()),{div:p,mod:b.mod}):(this.negative&a.negative)!==0?(b=this.neg().divmod(a.neg(),h),h!=="div"&&(w=b.mod.neg(),d&&w.negative!==0&&w.isub(a)),{div:b.div,mod:w}):a.length>this.length||this.cmp(a)<0?{div:new n(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new n(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new n(this.modn(a.words[0]))}:this._wordDiv(a,h)},n.prototype.div=function(a){return this.divmod(a,"div",!1).div},n.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},n.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},n.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var d=h.div.negative!==0?h.mod.isub(a):h.mod,p=a.ushrn(1),w=a.andln(1),b=d.cmp(p);return b<0||w===1&&b===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},n.prototype.modn=function(a){i(a<=67108863);for(var h=(1<<26)%a,d=0,p=this.length-1;p>=0;p--)d=(h*d+(this.words[p]|0))%a;return d},n.prototype.idivn=function(a){i(a<=67108863);for(var h=0,d=this.length-1;d>=0;d--){var p=(this.words[d]|0)+h*67108864;this.words[d]=p/a|0,h=p%a}return this.strip()},n.prototype.divn=function(a){return this.clone().idivn(a)},n.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=new n(0),I=new n(1),y=0;h.isEven()&&d.isEven();)h.iushrn(1),d.iushrn(1),++y;for(var o=d.clone(),v=h.clone();!h.isZero();){for(var R=0,L=1;(h.words[0]&L)===0&&R<26;++R,L<<=1);if(R>0)for(h.iushrn(R);R-- >0;)(p.isOdd()||w.isOdd())&&(p.iadd(o),w.isub(v)),p.iushrn(1),w.iushrn(1);for(var z=0,q=1;(d.words[0]&q)===0&&z<26;++z,q<<=1);if(z>0)for(d.iushrn(z);z-- >0;)(b.isOdd()||I.isOdd())&&(b.iadd(o),I.isub(v)),b.iushrn(1),I.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(b),w.isub(I)):(d.isub(h),b.isub(p),I.isub(w))}return{a:b,b:I,gcd:d.iushln(y)}},n.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var h=this,d=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var p=new n(1),w=new n(0),b=d.clone();h.cmpn(1)>0&&d.cmpn(1)>0;){for(var I=0,y=1;(h.words[0]&y)===0&&I<26;++I,y<<=1);if(I>0)for(h.iushrn(I);I-- >0;)p.isOdd()&&p.iadd(b),p.iushrn(1);for(var o=0,v=1;(d.words[0]&v)===0&&o<26;++o,v<<=1);if(o>0)for(d.iushrn(o);o-- >0;)w.isOdd()&&w.iadd(b),w.iushrn(1);h.cmp(d)>=0?(h.isub(d),p.isub(w)):(d.isub(h),w.isub(p))}var R;return h.cmpn(1)===0?R=p:R=w,R.cmpn(0)<0&&R.iadd(a),R},n.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),d=a.clone();h.negative=0,d.negative=0;for(var p=0;h.isEven()&&d.isEven();p++)h.iushrn(1),d.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;d.isEven();)d.iushrn(1);var w=h.cmp(d);if(w<0){var b=h;h=d,d=b}else if(w===0||d.cmpn(1)===0)break;h.isub(d)}while(!0);return d.iushln(p)},n.prototype.invm=function(a){return this.egcd(a).a.umod(a)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(a){return this.words[0]&a},n.prototype.bincn=function(a){i(typeof a=="number");var h=a%26,d=(a-h)/26,p=1<<h;if(this.length<=d)return this._expand(d+1),this.words[d]|=p,this;for(var w=p,b=d;w!==0&&b<this.length;b++){var I=this.words[b]|0;I+=w,w=I>>>26,I&=67108863,this.words[b]=I}return w!==0&&(this.words[b]=w,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this.strip();var d;if(this.length>1)d=1;else{h&&(a=-a),i(a<=67108863,"Number is too big");var p=this.words[0]|0;d=p===a?0:p<a?-1:1}return this.negative!==0?-d|0:d},n.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},n.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,d=this.length-1;d>=0;d--){var p=this.words[d]|0,w=a.words[d]|0;if(p!==w){p<w?h=-1:p>w&&(h=1);break}}return h},n.prototype.gtn=function(a){return this.cmpn(a)===1},n.prototype.gt=function(a){return this.cmp(a)===1},n.prototype.gten=function(a){return this.cmpn(a)>=0},n.prototype.gte=function(a){return this.cmp(a)>=0},n.prototype.ltn=function(a){return this.cmpn(a)===-1},n.prototype.lt=function(a){return this.cmp(a)===-1},n.prototype.lten=function(a){return this.cmpn(a)<=0},n.prototype.lte=function(a){return this.cmp(a)<=0},n.prototype.eqn=function(a){return this.cmpn(a)===0},n.prototype.eq=function(a){return this.cmp(a)===0},n.red=function(a){return new $(a)},n.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(a){return this.red=a,this},n.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},n.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},n.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},n.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},n.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},n.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},n.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},n.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var C={k256:null,p224:null,p192:null,p25519:null};function j(M,a){this.name=M,this.p=new n(a,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var a=new n(null);return a.words=new Array(Math.ceil(this.n/13)),a},j.prototype.ireduce=function(a){var h=a,d;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),d=h.bitLength();while(d>this.n);var p=d<this.n?-1:h.ucmp(this.p);return p===0?(h.words[0]=0,h.length=1):p>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},j.prototype.split=function(a,h){a.iushrn(this.n,0,h)},j.prototype.imulK=function(a){return a.imul(this.k)};function k(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(k,j),k.prototype.split=function(a,h){for(var d=4194303,p=Math.min(a.length,9),w=0;w<p;w++)h.words[w]=a.words[w];if(h.length=p,a.length<=9){a.words[0]=0,a.length=1;return}var b=a.words[9];for(h.words[h.length++]=b&d,w=10;w<a.length;w++){var I=a.words[w]|0;a.words[w-10]=(I&d)<<4|b>>>22,b=I}b>>>=22,a.words[w-10]=b,b===0&&a.length>10?a.length-=10:a.length-=9},k.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,d=0;d<a.length;d++){var p=a.words[d]|0;h+=p*977,a.words[d]=h&67108863,h=p*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function P(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(P,j);function Q(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Q,j);function F(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(F,j),F.prototype.imulK=function(a){for(var h=0,d=0;d<a.length;d++){var p=(a.words[d]|0)*19+h,w=p&67108863;p>>>=26,a.words[d]=w,h=p}return h!==0&&(a.words[a.length++]=h),a},n._prime=function(a){if(C[a])return C[a];var h;if(a==="k256")h=new k;else if(a==="p224")h=new P;else if(a==="p192")h=new Q;else if(a==="p25519")h=new F;else throw new Error("Unknown prime "+a);return C[a]=h,h};function $(M){if(typeof M=="string"){var a=n._prime(M);this.m=a.p,this.prime=a}else i(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}$.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},$.prototype._verify2=function(a,h){i((a.negative|h.negative)===0,"red works only with positives"),i(a.red&&a.red===h.red,"red works only with red numbers")},$.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},$.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},$.prototype.add=function(a,h){this._verify2(a,h);var d=a.add(h);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},$.prototype.iadd=function(a,h){this._verify2(a,h);var d=a.iadd(h);return d.cmp(this.m)>=0&&d.isub(this.m),d},$.prototype.sub=function(a,h){this._verify2(a,h);var d=a.sub(h);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},$.prototype.isub=function(a,h){this._verify2(a,h);var d=a.isub(h);return d.cmpn(0)<0&&d.iadd(this.m),d},$.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},$.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},$.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},$.prototype.isqr=function(a){return this.imul(a,a.clone())},$.prototype.sqr=function(a){return this.mul(a,a)},$.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var d=this.m.add(new n(1)).iushrn(2);return this.pow(a,d)}for(var p=this.m.subn(1),w=0;!p.isZero()&&p.andln(1)===0;)w++,p.iushrn(1);i(!p.isZero());var b=new n(1).toRed(this),I=b.redNeg(),y=this.m.subn(1).iushrn(1),o=this.m.bitLength();for(o=new n(2*o*o).toRed(this);this.pow(o,y).cmp(I)!==0;)o.redIAdd(I);for(var v=this.pow(o,p),R=this.pow(a,p.addn(1).iushrn(1)),L=this.pow(a,p),z=w;L.cmp(b)!==0;){for(var q=L,Y=0;q.cmp(b)!==0;Y++)q=q.redSqr();i(Y<z);var T=this.pow(v,new n(1).iushln(z-Y-1));R=R.redMul(T),v=T.redSqr(),L=L.redMul(v),z=Y}return R},$.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},$.prototype.pow=function(a,h){if(h.isZero())return new n(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var d=4,p=new Array(1<<d);p[0]=new n(1).toRed(this),p[1]=a;for(var w=2;w<p.length;w++)p[w]=this.mul(p[w-1],a);var b=p[0],I=0,y=0,o=h.bitLength()%26;for(o===0&&(o=26),w=h.length-1;w>=0;w--){for(var v=h.words[w],R=o-1;R>=0;R--){var L=v>>R&1;if(b!==p[0]&&(b=this.sqr(b)),L===0&&I===0){y=0;continue}I<<=1,I|=L,y++,!(y!==d&&(w!==0||R!==0))&&(b=this.mul(b,p[I]),y=0,I=0)}o=26}return b},$.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},$.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},n.mont=function(a){return new Z(a)};function Z(M){$.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Z,$),Z.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Z.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},Z.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new n(0)._forceRed(this);var d=a.mul(h),p=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=d.isub(p).iushrn(this.shift),b=w;return w.cmp(this.m)>=0?b=w.isub(this.m):w.cmpn(0)<0&&(b=w.iadd(this.m)),b._forceRed(this)},Z.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,KR)})(hf)),hf.exports}var ey,sI;function OS(){if(sI)return ey;sI=1;var r=Av(),e=tt().Buffer;function t(i,s){return e.from(i.toRed(r.mont(s.modulus)).redPow(new r(s.publicExponent)).fromRed().toArray())}return ey=t,ey}var ty,aI;function JR(){if(aI)return ty;aI=1;var r=ad(),e=zc(),t=jl(),i=jS(),s=CS(),n=Av(),c=OS(),l=Iv(),u=tt().Buffer;ty=function(A,_,E){var x;A.padding?x=A.padding:E?x=1:x=4;var S=r(A),D;if(x===4)D=f(S,_);else if(x===1)D=g(S,_,E);else if(x===3){if(D=new n(_),D.cmp(S.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return E?l(D,S):c(D,S)};function f(N,A){var _=N.modulus.byteLength(),E=A.length,x=t("sha1").update(u.alloc(0)).digest(),S=x.length,D=2*S;if(E>_-D-2)throw new Error("message too long");var C=u.alloc(_-E-D-2),j=_-S-1,k=e(S),P=s(u.concat([x,C,u.alloc(1,1),A],j),i(k,j)),Q=s(k,i(P,S));return new n(u.concat([u.alloc(1),Q,P],_))}function g(N,A,_){var E=A.length,x=N.modulus.byteLength();if(E>x-11)throw new Error("message too long");var S;return _?S=u.alloc(x-E-3,255):S=m(x-E-3),new n(u.concat([u.from([0,_?1:2]),S,u.alloc(1),A],x))}function m(N){for(var A=u.allocUnsafe(N),_=0,E=e(N*2),x=0,S;_<N;)x===E.length&&(E=e(N*2),x=0),S=E[x++],S&&(A[_++]=S);return A}return ty}var ry,oI;function XR(){if(oI)return ry;oI=1;var r=ad(),e=jS(),t=CS(),i=Av(),s=Iv(),n=jl(),c=OS(),l=tt().Buffer;ry=function(N,A,_){var E;N.padding?E=N.padding:_?E=1:E=4;var x=r(N),S=x.modulus.byteLength();if(A.length>S||new i(A).cmp(x.modulus)>=0)throw new Error("decryption error");var D;_?D=c(new i(A),x):D=s(A,x);var C=l.alloc(S-D.length);if(D=l.concat([C,D],S),E===4)return u(x,D);if(E===1)return f(x,D,_);if(E===3)return D;throw new Error("unknown padding")};function u(m,N){var A=m.modulus.byteLength(),_=n("sha1").update(l.alloc(0)).digest(),E=_.length;if(N[0]!==0)throw new Error("decryption error");var x=N.slice(1,E+1),S=N.slice(E+1),D=t(x,e(S,E)),C=t(S,e(D,A-E-1));if(g(_,C.slice(0,E)))throw new Error("decryption error");for(var j=E;C[j]===0;)j++;if(C[j++]!==1)throw new Error("decryption error");return C.slice(j)}function f(m,N,A){for(var _=N.slice(0,2),E=2,x=0;N[E++]!==0;)if(E>=N.length){x++;break}var S=N.slice(2,E-1);if((_.toString("hex")!=="0002"&&!A||_.toString("hex")!=="0001"&&A)&&x++,S.length<8&&x++,x)throw new Error("decryption error");return N.slice(E)}function g(m,N){m=l.from(m),N=l.from(N);var A=0,_=m.length;m.length!==N.length&&(A++,_=Math.min(m.length,N.length));for(var E=-1;++E<_;)A+=m[E]^N[E];return A}return ry}var cI;function eU(){return cI||(cI=1,(function(r){r.publicEncrypt=JR(),r.privateDecrypt=XR(),r.privateEncrypt=function(t,i){return r.publicEncrypt(t,i,!0)},r.publicDecrypt=function(t,i){return r.privateDecrypt(t,i,!0)}})(Kg)),Kg}var mo={},hI;function tU(){if(hI)return mo;hI=1;function r(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=tt(),t=zc(),i=e.Buffer,s=e.kMaxLength,n=globalThis.crypto||globalThis.msCrypto,c=Math.pow(2,32)-1;function l(N,A){if(typeof N!="number"||N!==N)throw new TypeError("offset must be a number");if(N>c||N<0)throw new TypeError("offset must be a uint32");if(N>s||N>A)throw new RangeError("offset out of range")}function u(N,A,_){if(typeof N!="number"||N!==N)throw new TypeError("size must be a number");if(N>c||N<0)throw new TypeError("size must be a uint32");if(N+A>_||N>s)throw new RangeError("buffer too small")}n&&n.getRandomValues||!Be.browser?(mo.randomFill=f,mo.randomFillSync=m):(mo.randomFill=r,mo.randomFillSync=r);function f(N,A,_,E){if(!i.isBuffer(N)&&!(N instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof A=="function")E=A,A=0,_=N.length;else if(typeof _=="function")E=_,_=N.length-A;else if(typeof E!="function")throw new TypeError('"cb" argument must be a function');return l(A,N.length),u(_,A,N.length),g(N,A,_,E)}function g(N,A,_,E){if(Be.browser){var x=N.buffer,S=new Uint8Array(x,A,_);if(n.getRandomValues(S),E){Be.nextTick(function(){E(null,N)});return}return N}if(E){t(_,function(C,j){if(C)return E(C);j.copy(N,A),E(null,N)});return}var D=t(_);return D.copy(N,A),N}function m(N,A,_){if(typeof A>"u"&&(A=0),!i.isBuffer(N)&&!(N instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return l(A,N.length),_===void 0&&(_=N.length-A),u(_,A,N.length),g(N,A,_)}return mo}var lI;function rU(){if(lI)return it;lI=1,it.randomBytes=it.rng=it.pseudoRandomBytes=it.prng=zc(),it.createHash=it.Hash=jl(),it.createHmac=it.Hmac=aS();var r=WP(),e=Object.keys(r),t=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);it.getHashes=function(){return t};var i=fS();it.pbkdf2=i.pbkdf2,it.pbkdf2Sync=i.pbkdf2Sync;var s=hR();it.Cipher=s.Cipher,it.createCipher=s.createCipher,it.Cipheriv=s.Cipheriv,it.createCipheriv=s.createCipheriv,it.Decipher=s.Decipher,it.createDecipher=s.createDecipher,it.Decipheriv=s.Decipheriv,it.createDecipheriv=s.createDecipheriv,it.getCiphers=s.getCiphers,it.listCiphers=s.listCiphers;var n=IR();it.DiffieHellmanGroup=n.DiffieHellmanGroup,it.createDiffieHellmanGroup=n.createDiffieHellmanGroup,it.getDiffieHellman=n.getDiffieHellman,it.createDiffieHellman=n.createDiffieHellman,it.DiffieHellman=n.DiffieHellman;var c=FR();it.createSign=c.createSign,it.Sign=c.Sign,it.createVerify=c.createVerify,it.Verify=c.Verify,it.createECDH=GR();var l=eU();it.publicEncrypt=l.publicEncrypt,it.privateEncrypt=l.privateEncrypt,it.publicDecrypt=l.publicDecrypt,it.privateDecrypt=l.privateDecrypt;var u=tU();return it.randomFill=u.randomFill,it.randomFillSync=u.randomFillSync,it.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},it.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},it}var uI;function _v(){if(uI)return uu.exports;uI=1;var r;uu.exports=function(s){return r||(r=new e(null)),r.generate(s)};function e(i){this.rand=i}if(uu.exports.Rand=e,e.prototype.generate=function(s){return this._rand(s)},e.prototype._rand=function(s){if(this.rand.getBytes)return this.rand.getBytes(s);for(var n=new Uint8Array(s),c=0;c<n.length;c++)n[c]=this.rand.getByte();return n},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(s){var n=new Uint8Array(s);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(s){var n=new Uint8Array(s);return self.msCrypto.getRandomValues(n),n}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var t=rU();if(typeof t.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(s){return t.randomBytes(s)}}catch{}return uu.exports}var iy={},ny,fI;function od(){if(fI)return ny;fI=1;var r=Ps(),e=zn(),t=e.getNAF,i=e.getJSF,s=e.assert;function n(l,u){this.type=l,this.p=new r(u.p,16),this.red=u.prime?r.red(u.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=u.n&&new r(u.n,16),this.g=u.g&&this.pointFromJSON(u.g,u.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var f=this.n&&this.p.div(this.n);!f||f.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}ny=n,n.prototype.point=function(){throw new Error("Not implemented")},n.prototype.validate=function(){throw new Error("Not implemented")},n.prototype._fixedNafMul=function(u,f){s(u.precomputed);var g=u._getDoubles(),m=t(f,1,this._bitLength),N=(1<<g.step+1)-(g.step%2===0?2:1);N/=3;var A=[],_,E;for(_=0;_<m.length;_+=g.step){E=0;for(var x=_+g.step-1;x>=_;x--)E=(E<<1)+m[x];A.push(E)}for(var S=this.jpoint(null,null,null),D=this.jpoint(null,null,null),C=N;C>0;C--){for(_=0;_<A.length;_++)E=A[_],E===C?D=D.mixedAdd(g.points[_]):E===-C&&(D=D.mixedAdd(g.points[_].neg()));S=S.add(D)}return S.toP()},n.prototype._wnafMul=function(u,f){var g=4,m=u._getNAFPoints(g);g=m.wnd;for(var N=m.points,A=t(f,g,this._bitLength),_=this.jpoint(null,null,null),E=A.length-1;E>=0;E--){for(var x=0;E>=0&&A[E]===0;E--)x++;if(E>=0&&x++,_=_.dblp(x),E<0)break;var S=A[E];s(S!==0),u.type==="affine"?S>0?_=_.mixedAdd(N[S-1>>1]):_=_.mixedAdd(N[-S-1>>1].neg()):S>0?_=_.add(N[S-1>>1]):_=_.add(N[-S-1>>1].neg())}return u.type==="affine"?_.toP():_},n.prototype._wnafMulAdd=function(u,f,g,m,N){var A=this._wnafT1,_=this._wnafT2,E=this._wnafT3,x=0,S,D,C;for(S=0;S<m;S++){C=f[S];var j=C._getNAFPoints(u);A[S]=j.wnd,_[S]=j.points}for(S=m-1;S>=1;S-=2){var k=S-1,P=S;if(A[k]!==1||A[P]!==1){E[k]=t(g[k],A[k],this._bitLength),E[P]=t(g[P],A[P],this._bitLength),x=Math.max(E[k].length,x),x=Math.max(E[P].length,x);continue}var Q=[f[k],null,null,f[P]];f[k].y.cmp(f[P].y)===0?(Q[1]=f[k].add(f[P]),Q[2]=f[k].toJ().mixedAdd(f[P].neg())):f[k].y.cmp(f[P].y.redNeg())===0?(Q[1]=f[k].toJ().mixedAdd(f[P]),Q[2]=f[k].add(f[P].neg())):(Q[1]=f[k].toJ().mixedAdd(f[P]),Q[2]=f[k].toJ().mixedAdd(f[P].neg()));var F=[-3,-1,-5,-7,0,7,5,1,3],$=i(g[k],g[P]);for(x=Math.max($[0].length,x),E[k]=new Array(x),E[P]=new Array(x),D=0;D<x;D++){var Z=$[0][D]|0,M=$[1][D]|0;E[k][D]=F[(Z+1)*3+(M+1)],E[P][D]=0,_[k]=Q}}var a=this.jpoint(null,null,null),h=this._wnafT4;for(S=x;S>=0;S--){for(var d=0;S>=0;){var p=!0;for(D=0;D<m;D++)h[D]=E[D][S]|0,h[D]!==0&&(p=!1);if(!p)break;d++,S--}if(S>=0&&d++,a=a.dblp(d),S<0)break;for(D=0;D<m;D++){var w=h[D];w!==0&&(w>0?C=_[D][w-1>>1]:w<0&&(C=_[D][-w-1>>1].neg()),C.type==="affine"?a=a.mixedAdd(C):a=a.add(C))}}for(S=0;S<m;S++)_[S]=null;return N?a:a.toP()};function c(l,u){this.curve=l,this.type=u,this.precomputed=null}return n.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},n.prototype.decodePoint=function(u,f){u=e.toArray(u,f);var g=this.p.byteLength();if((u[0]===4||u[0]===6||u[0]===7)&&u.length-1===2*g){u[0]===6?s(u[u.length-1]%2===0):u[0]===7&&s(u[u.length-1]%2===1);var m=this.point(u.slice(1,1+g),u.slice(1+g,1+2*g));return m}else if((u[0]===2||u[0]===3)&&u.length-1===g)return this.pointFromX(u.slice(1,1+g),u[0]===3);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(u){return this.encode(u,!0)},c.prototype._encode=function(u){var f=this.curve.p.byteLength(),g=this.getX().toArray("be",f);return u?[this.getY().isEven()?2:3].concat(g):[4].concat(g,this.getY().toArray("be",f))},c.prototype.encode=function(u,f){return e.encode(this._encode(f),u)},c.prototype.precompute=function(u){if(this.precomputed)return this;var f={doubles:null,naf:null,beta:null};return f.naf=this._getNAFPoints(8),f.doubles=this._getDoubles(4,u),f.beta=this._getBeta(),this.precomputed=f,this},c.prototype._hasDoubles=function(u){if(!this.precomputed)return!1;var f=this.precomputed.doubles;return f?f.points.length>=Math.ceil((u.bitLength()+1)/f.step):!1},c.prototype._getDoubles=function(u,f){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var g=[this],m=this,N=0;N<f;N+=u){for(var A=0;A<u;A++)m=m.dbl();g.push(m)}return{step:u,points:g}},c.prototype._getNAFPoints=function(u){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var f=[this],g=(1<<u)-1,m=g===1?null:this.dbl(),N=1;N<g;N++)f[N]=f[N-1].add(m);return{wnd:u,points:f}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(u){for(var f=this,g=0;g<u;g++)f=f.dbl();return f},ny}var sy,dI;function iU(){if(dI)return sy;dI=1;var r=zn(),e=Ps(),t=Ge(),i=od(),s=r.assert;function n(u){i.call(this,"short",u),this.a=new e(u.a,16).toRed(this.red),this.b=new e(u.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(u),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}t(n,i),sy=n,n.prototype._getEndomorphism=function(f){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var g,m;if(f.beta)g=new e(f.beta,16).toRed(this.red);else{var N=this._getEndoRoots(this.p);g=N[0].cmp(N[1])<0?N[0]:N[1],g=g.toRed(this.red)}if(f.lambda)m=new e(f.lambda,16);else{var A=this._getEndoRoots(this.n);this.g.mul(A[0]).x.cmp(this.g.x.redMul(g))===0?m=A[0]:(m=A[1],s(this.g.mul(m).x.cmp(this.g.x.redMul(g))===0))}var _;return f.basis?_=f.basis.map(function(E){return{a:new e(E.a,16),b:new e(E.b,16)}}):_=this._getEndoBasis(m),{beta:g,lambda:m,basis:_}}},n.prototype._getEndoRoots=function(f){var g=f===this.p?this.red:e.mont(f),m=new e(2).toRed(g).redInvm(),N=m.redNeg(),A=new e(3).toRed(g).redNeg().redSqrt().redMul(m),_=N.redAdd(A).fromRed(),E=N.redSub(A).fromRed();return[_,E]},n.prototype._getEndoBasis=function(f){for(var g=this.n.ushrn(Math.floor(this.n.bitLength()/2)),m=f,N=this.n.clone(),A=new e(1),_=new e(0),E=new e(0),x=new e(1),S,D,C,j,k,P,Q,F=0,$,Z;m.cmpn(0)!==0;){var M=N.div(m);$=N.sub(M.mul(m)),Z=E.sub(M.mul(A));var a=x.sub(M.mul(_));if(!C&&$.cmp(g)<0)S=Q.neg(),D=A,C=$.neg(),j=Z;else if(C&&++F===2)break;Q=$,N=m,m=$,E=A,A=Z,x=_,_=a}k=$.neg(),P=Z;var h=C.sqr().add(j.sqr()),d=k.sqr().add(P.sqr());return d.cmp(h)>=0&&(k=S,P=D),C.negative&&(C=C.neg(),j=j.neg()),k.negative&&(k=k.neg(),P=P.neg()),[{a:C,b:j},{a:k,b:P}]},n.prototype._endoSplit=function(f){var g=this.endo.basis,m=g[0],N=g[1],A=N.b.mul(f).divRound(this.n),_=m.b.neg().mul(f).divRound(this.n),E=A.mul(m.a),x=_.mul(N.a),S=A.mul(m.b),D=_.mul(N.b),C=f.sub(E).sub(x),j=S.add(D).neg();return{k1:C,k2:j}},n.prototype.pointFromX=function(f,g){f=new e(f,16),f.red||(f=f.toRed(this.red));var m=f.redSqr().redMul(f).redIAdd(f.redMul(this.a)).redIAdd(this.b),N=m.redSqrt();if(N.redSqr().redSub(m).cmp(this.zero)!==0)throw new Error("invalid point");var A=N.fromRed().isOdd();return(g&&!A||!g&&A)&&(N=N.redNeg()),this.point(f,N)},n.prototype.validate=function(f){if(f.inf)return!0;var g=f.x,m=f.y,N=this.a.redMul(g),A=g.redSqr().redMul(g).redIAdd(N).redIAdd(this.b);return m.redSqr().redISub(A).cmpn(0)===0},n.prototype._endoWnafMulAdd=function(f,g,m){for(var N=this._endoWnafT1,A=this._endoWnafT2,_=0;_<f.length;_++){var E=this._endoSplit(g[_]),x=f[_],S=x._getBeta();E.k1.negative&&(E.k1.ineg(),x=x.neg(!0)),E.k2.negative&&(E.k2.ineg(),S=S.neg(!0)),N[_*2]=x,N[_*2+1]=S,A[_*2]=E.k1,A[_*2+1]=E.k2}for(var D=this._wnafMulAdd(1,N,A,_*2,m),C=0;C<_*2;C++)N[C]=null,A[C]=null;return D};function c(u,f,g,m){i.BasePoint.call(this,u,"affine"),f===null&&g===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(f,16),this.y=new e(g,16),m&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}t(c,i.BasePoint),n.prototype.point=function(f,g,m){return new c(this,f,g,m)},n.prototype.pointFromJSON=function(f,g){return c.fromJSON(this,f,g)},c.prototype._getBeta=function(){if(this.curve.endo){var f=this.precomputed;if(f&&f.beta)return f.beta;var g=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(f){var m=this.curve,N=function(A){return m.point(A.x.redMul(m.endo.beta),A.y)};f.beta=g,g.precomputed={beta:null,naf:f.naf&&{wnd:f.naf.wnd,points:f.naf.points.map(N)},doubles:f.doubles&&{step:f.doubles.step,points:f.doubles.points.map(N)}}}return g}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(f,g,m){typeof g=="string"&&(g=JSON.parse(g));var N=f.point(g[0],g[1],m);if(!g[2])return N;function A(E){return f.point(E[0],E[1],m)}var _=g[2];return N.precomputed={beta:null,doubles:_.doubles&&{step:_.doubles.step,points:[N].concat(_.doubles.points.map(A))},naf:_.naf&&{wnd:_.naf.wnd,points:[N].concat(_.naf.points.map(A))}},N},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(f){if(this.inf)return f;if(f.inf)return this;if(this.eq(f))return this.dbl();if(this.neg().eq(f))return this.curve.point(null,null);if(this.x.cmp(f.x)===0)return this.curve.point(null,null);var g=this.y.redSub(f.y);g.cmpn(0)!==0&&(g=g.redMul(this.x.redSub(f.x).redInvm()));var m=g.redSqr().redISub(this.x).redISub(f.x),N=g.redMul(this.x.redSub(m)).redISub(this.y);return this.curve.point(m,N)},c.prototype.dbl=function(){if(this.inf)return this;var f=this.y.redAdd(this.y);if(f.cmpn(0)===0)return this.curve.point(null,null);var g=this.curve.a,m=this.x.redSqr(),N=f.redInvm(),A=m.redAdd(m).redIAdd(m).redIAdd(g).redMul(N),_=A.redSqr().redISub(this.x.redAdd(this.x)),E=A.redMul(this.x.redSub(_)).redISub(this.y);return this.curve.point(_,E)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(f){return f=new e(f,16),this.isInfinity()?this:this._hasDoubles(f)?this.curve._fixedNafMul(this,f):this.curve.endo?this.curve._endoWnafMulAdd([this],[f]):this.curve._wnafMul(this,f)},c.prototype.mulAdd=function(f,g,m){var N=[this,g],A=[f,m];return this.curve.endo?this.curve._endoWnafMulAdd(N,A):this.curve._wnafMulAdd(1,N,A,2)},c.prototype.jmulAdd=function(f,g,m){var N=[this,g],A=[f,m];return this.curve.endo?this.curve._endoWnafMulAdd(N,A,!0):this.curve._wnafMulAdd(1,N,A,2,!0)},c.prototype.eq=function(f){return this===f||this.inf===f.inf&&(this.inf||this.x.cmp(f.x)===0&&this.y.cmp(f.y)===0)},c.prototype.neg=function(f){if(this.inf)return this;var g=this.curve.point(this.x,this.y.redNeg());if(f&&this.precomputed){var m=this.precomputed,N=function(A){return A.neg()};g.precomputed={naf:m.naf&&{wnd:m.naf.wnd,points:m.naf.points.map(N)},doubles:m.doubles&&{step:m.doubles.step,points:m.doubles.points.map(N)}}}return g},c.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var f=this.curve.jpoint(this.x,this.y,this.curve.one);return f};function l(u,f,g,m){i.BasePoint.call(this,u,"jacobian"),f===null&&g===null&&m===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(f,16),this.y=new e(g,16),this.z=new e(m,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return t(l,i.BasePoint),n.prototype.jpoint=function(f,g,m){return new l(this,f,g,m)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var f=this.z.redInvm(),g=f.redSqr(),m=this.x.redMul(g),N=this.y.redMul(g).redMul(f);return this.curve.point(m,N)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(f){if(this.isInfinity())return f;if(f.isInfinity())return this;var g=f.z.redSqr(),m=this.z.redSqr(),N=this.x.redMul(g),A=f.x.redMul(m),_=this.y.redMul(g.redMul(f.z)),E=f.y.redMul(m.redMul(this.z)),x=N.redSub(A),S=_.redSub(E);if(x.cmpn(0)===0)return S.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var D=x.redSqr(),C=D.redMul(x),j=N.redMul(D),k=S.redSqr().redIAdd(C).redISub(j).redISub(j),P=S.redMul(j.redISub(k)).redISub(_.redMul(C)),Q=this.z.redMul(f.z).redMul(x);return this.curve.jpoint(k,P,Q)},l.prototype.mixedAdd=function(f){if(this.isInfinity())return f.toJ();if(f.isInfinity())return this;var g=this.z.redSqr(),m=this.x,N=f.x.redMul(g),A=this.y,_=f.y.redMul(g).redMul(this.z),E=m.redSub(N),x=A.redSub(_);if(E.cmpn(0)===0)return x.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var S=E.redSqr(),D=S.redMul(E),C=m.redMul(S),j=x.redSqr().redIAdd(D).redISub(C).redISub(C),k=x.redMul(C.redISub(j)).redISub(A.redMul(D)),P=this.z.redMul(E);return this.curve.jpoint(j,k,P)},l.prototype.dblp=function(f){if(f===0)return this;if(this.isInfinity())return this;if(!f)return this.dbl();var g;if(this.curve.zeroA||this.curve.threeA){var m=this;for(g=0;g<f;g++)m=m.dbl();return m}var N=this.curve.a,A=this.curve.tinv,_=this.x,E=this.y,x=this.z,S=x.redSqr().redSqr(),D=E.redAdd(E);for(g=0;g<f;g++){var C=_.redSqr(),j=D.redSqr(),k=j.redSqr(),P=C.redAdd(C).redIAdd(C).redIAdd(N.redMul(S)),Q=_.redMul(j),F=P.redSqr().redISub(Q.redAdd(Q)),$=Q.redISub(F),Z=P.redMul($);Z=Z.redIAdd(Z).redISub(k);var M=D.redMul(x);g+1<f&&(S=S.redMul(k)),_=F,x=M,D=Z}return this.curve.jpoint(_,D.redMul(A),x)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var f,g,m;if(this.zOne){var N=this.x.redSqr(),A=this.y.redSqr(),_=A.redSqr(),E=this.x.redAdd(A).redSqr().redISub(N).redISub(_);E=E.redIAdd(E);var x=N.redAdd(N).redIAdd(N),S=x.redSqr().redISub(E).redISub(E),D=_.redIAdd(_);D=D.redIAdd(D),D=D.redIAdd(D),f=S,g=x.redMul(E.redISub(S)).redISub(D),m=this.y.redAdd(this.y)}else{var C=this.x.redSqr(),j=this.y.redSqr(),k=j.redSqr(),P=this.x.redAdd(j).redSqr().redISub(C).redISub(k);P=P.redIAdd(P);var Q=C.redAdd(C).redIAdd(C),F=Q.redSqr(),$=k.redIAdd(k);$=$.redIAdd($),$=$.redIAdd($),f=F.redISub(P).redISub(P),g=Q.redMul(P.redISub(f)).redISub($),m=this.y.redMul(this.z),m=m.redIAdd(m)}return this.curve.jpoint(f,g,m)},l.prototype._threeDbl=function(){var f,g,m;if(this.zOne){var N=this.x.redSqr(),A=this.y.redSqr(),_=A.redSqr(),E=this.x.redAdd(A).redSqr().redISub(N).redISub(_);E=E.redIAdd(E);var x=N.redAdd(N).redIAdd(N).redIAdd(this.curve.a),S=x.redSqr().redISub(E).redISub(E);f=S;var D=_.redIAdd(_);D=D.redIAdd(D),D=D.redIAdd(D),g=x.redMul(E.redISub(S)).redISub(D),m=this.y.redAdd(this.y)}else{var C=this.z.redSqr(),j=this.y.redSqr(),k=this.x.redMul(j),P=this.x.redSub(C).redMul(this.x.redAdd(C));P=P.redAdd(P).redIAdd(P);var Q=k.redIAdd(k);Q=Q.redIAdd(Q);var F=Q.redAdd(Q);f=P.redSqr().redISub(F),m=this.y.redAdd(this.z).redSqr().redISub(j).redISub(C);var $=j.redSqr();$=$.redIAdd($),$=$.redIAdd($),$=$.redIAdd($),g=P.redMul(Q.redISub(f)).redISub($)}return this.curve.jpoint(f,g,m)},l.prototype._dbl=function(){var f=this.curve.a,g=this.x,m=this.y,N=this.z,A=N.redSqr().redSqr(),_=g.redSqr(),E=m.redSqr(),x=_.redAdd(_).redIAdd(_).redIAdd(f.redMul(A)),S=g.redAdd(g);S=S.redIAdd(S);var D=S.redMul(E),C=x.redSqr().redISub(D.redAdd(D)),j=D.redISub(C),k=E.redSqr();k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k);var P=x.redMul(j).redISub(k),Q=m.redAdd(m).redMul(N);return this.curve.jpoint(C,P,Q)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var f=this.x.redSqr(),g=this.y.redSqr(),m=this.z.redSqr(),N=g.redSqr(),A=f.redAdd(f).redIAdd(f),_=A.redSqr(),E=this.x.redAdd(g).redSqr().redISub(f).redISub(N);E=E.redIAdd(E),E=E.redAdd(E).redIAdd(E),E=E.redISub(_);var x=E.redSqr(),S=N.redIAdd(N);S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var D=A.redIAdd(E).redSqr().redISub(_).redISub(x).redISub(S),C=g.redMul(D);C=C.redIAdd(C),C=C.redIAdd(C);var j=this.x.redMul(x).redISub(C);j=j.redIAdd(j),j=j.redIAdd(j);var k=this.y.redMul(D.redMul(S.redISub(D)).redISub(E.redMul(x)));k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k);var P=this.z.redAdd(E).redSqr().redISub(m).redISub(x);return this.curve.jpoint(j,k,P)},l.prototype.mul=function(f,g){return f=new e(f,g),this.curve._wnafMul(this,f)},l.prototype.eq=function(f){if(f.type==="affine")return this.eq(f.toJ());if(this===f)return!0;var g=this.z.redSqr(),m=f.z.redSqr();if(this.x.redMul(m).redISub(f.x.redMul(g)).cmpn(0)!==0)return!1;var N=g.redMul(this.z),A=m.redMul(f.z);return this.y.redMul(A).redISub(f.y.redMul(N)).cmpn(0)===0},l.prototype.eqXToP=function(f){var g=this.z.redSqr(),m=f.toRed(this.curve.red).redMul(g);if(this.x.cmp(m)===0)return!0;for(var N=f.clone(),A=this.curve.redN.redMul(g);;){if(N.iadd(this.curve.n),N.cmp(this.curve.p)>=0)return!1;if(m.redIAdd(A),this.x.cmp(m)===0)return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return this.z.cmpn(0)===0},sy}var ay,pI;function nU(){if(pI)return ay;pI=1;var r=Ps(),e=Ge(),t=od(),i=zn();function s(c){t.call(this,"mont",c),this.a=new r(c.a,16).toRed(this.red),this.b=new r(c.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(s,t),ay=s,s.prototype.validate=function(l){var u=l.normalize().x,f=u.redSqr(),g=f.redMul(u).redAdd(f.redMul(this.a)).redAdd(u),m=g.redSqrt();return m.redSqr().cmp(g)===0};function n(c,l,u){t.BasePoint.call(this,c,"projective"),l===null&&u===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(l,16),this.z=new r(u,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(n,t.BasePoint),s.prototype.decodePoint=function(l,u){return this.point(i.toArray(l,u),1)},s.prototype.point=function(l,u){return new n(this,l,u)},s.prototype.pointFromJSON=function(l){return n.fromJSON(this,l)},n.prototype.precompute=function(){},n.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},n.fromJSON=function(l,u){return new n(l,u[0],u[1]||l.one)},n.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},n.prototype.isInfinity=function(){return this.z.cmpn(0)===0},n.prototype.dbl=function(){var l=this.x.redAdd(this.z),u=l.redSqr(),f=this.x.redSub(this.z),g=f.redSqr(),m=u.redSub(g),N=u.redMul(g),A=m.redMul(g.redAdd(this.curve.a24.redMul(m)));return this.curve.point(N,A)},n.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.diffAdd=function(l,u){var f=this.x.redAdd(this.z),g=this.x.redSub(this.z),m=l.x.redAdd(l.z),N=l.x.redSub(l.z),A=N.redMul(f),_=m.redMul(g),E=u.z.redMul(A.redAdd(_).redSqr()),x=u.x.redMul(A.redISub(_).redSqr());return this.curve.point(E,x)},n.prototype.mul=function(l){for(var u=l.clone(),f=this,g=this.curve.point(null,null),m=this,N=[];u.cmpn(0)!==0;u.iushrn(1))N.push(u.andln(1));for(var A=N.length-1;A>=0;A--)N[A]===0?(f=f.diffAdd(g,m),g=g.dbl()):(g=f.diffAdd(g,m),f=f.dbl());return g},n.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},n.prototype.eq=function(l){return this.getX().cmp(l.getX())===0},n.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},n.prototype.getX=function(){return this.normalize(),this.x.fromRed()},ay}var oy,gI;function sU(){if(gI)return oy;gI=1;var r=zn(),e=Ps(),t=Ge(),i=od(),s=r.assert;function n(l){this.twisted=(l.a|0)!==1,this.mOneA=this.twisted&&(l.a|0)===-1,this.extended=this.mOneA,i.call(this,"edwards",l),this.a=new e(l.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(l.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(l.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(l.c|0)===1}t(n,i),oy=n,n.prototype._mulA=function(u){return this.mOneA?u.redNeg():this.a.redMul(u)},n.prototype._mulC=function(u){return this.oneC?u:this.c.redMul(u)},n.prototype.jpoint=function(u,f,g,m){return this.point(u,f,g,m)},n.prototype.pointFromX=function(u,f){u=new e(u,16),u.red||(u=u.toRed(this.red));var g=u.redSqr(),m=this.c2.redSub(this.a.redMul(g)),N=this.one.redSub(this.c2.redMul(this.d).redMul(g)),A=m.redMul(N.redInvm()),_=A.redSqrt();if(_.redSqr().redSub(A).cmp(this.zero)!==0)throw new Error("invalid point");var E=_.fromRed().isOdd();return(f&&!E||!f&&E)&&(_=_.redNeg()),this.point(u,_)},n.prototype.pointFromY=function(u,f){u=new e(u,16),u.red||(u=u.toRed(this.red));var g=u.redSqr(),m=g.redSub(this.c2),N=g.redMul(this.d).redMul(this.c2).redSub(this.a),A=m.redMul(N.redInvm());if(A.cmp(this.zero)===0){if(f)throw new Error("invalid point");return this.point(this.zero,u)}var _=A.redSqrt();if(_.redSqr().redSub(A).cmp(this.zero)!==0)throw new Error("invalid point");return _.fromRed().isOdd()!==f&&(_=_.redNeg()),this.point(_,u)},n.prototype.validate=function(u){if(u.isInfinity())return!0;u.normalize();var f=u.x.redSqr(),g=u.y.redSqr(),m=f.redMul(this.a).redAdd(g),N=this.c2.redMul(this.one.redAdd(this.d.redMul(f).redMul(g)));return m.cmp(N)===0};function c(l,u,f,g,m){i.BasePoint.call(this,l,"projective"),u===null&&f===null&&g===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(u,16),this.y=new e(f,16),this.z=g?new e(g,16):this.curve.one,this.t=m&&new e(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return t(c,i.BasePoint),n.prototype.pointFromJSON=function(u){return c.fromJSON(this,u)},n.prototype.point=function(u,f,g,m){return new c(this,u,f,g,m)},c.fromJSON=function(u,f){return new c(u,f[0],f[1],f[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},c.prototype._extDbl=function(){var u=this.x.redSqr(),f=this.y.redSqr(),g=this.z.redSqr();g=g.redIAdd(g);var m=this.curve._mulA(u),N=this.x.redAdd(this.y).redSqr().redISub(u).redISub(f),A=m.redAdd(f),_=A.redSub(g),E=m.redSub(f),x=N.redMul(_),S=A.redMul(E),D=N.redMul(E),C=_.redMul(A);return this.curve.point(x,S,C,D)},c.prototype._projDbl=function(){var u=this.x.redAdd(this.y).redSqr(),f=this.x.redSqr(),g=this.y.redSqr(),m,N,A,_,E,x;if(this.curve.twisted){_=this.curve._mulA(f);var S=_.redAdd(g);this.zOne?(m=u.redSub(f).redSub(g).redMul(S.redSub(this.curve.two)),N=S.redMul(_.redSub(g)),A=S.redSqr().redSub(S).redSub(S)):(E=this.z.redSqr(),x=S.redSub(E).redISub(E),m=u.redSub(f).redISub(g).redMul(x),N=S.redMul(_.redSub(g)),A=S.redMul(x))}else _=f.redAdd(g),E=this.curve._mulC(this.z).redSqr(),x=_.redSub(E).redSub(E),m=this.curve._mulC(u.redISub(_)).redMul(x),N=this.curve._mulC(_).redMul(f.redISub(g)),A=_.redMul(x);return this.curve.point(m,N,A)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(u){var f=this.y.redSub(this.x).redMul(u.y.redSub(u.x)),g=this.y.redAdd(this.x).redMul(u.y.redAdd(u.x)),m=this.t.redMul(this.curve.dd).redMul(u.t),N=this.z.redMul(u.z.redAdd(u.z)),A=g.redSub(f),_=N.redSub(m),E=N.redAdd(m),x=g.redAdd(f),S=A.redMul(_),D=E.redMul(x),C=A.redMul(x),j=_.redMul(E);return this.curve.point(S,D,j,C)},c.prototype._projAdd=function(u){var f=this.z.redMul(u.z),g=f.redSqr(),m=this.x.redMul(u.x),N=this.y.redMul(u.y),A=this.curve.d.redMul(m).redMul(N),_=g.redSub(A),E=g.redAdd(A),x=this.x.redAdd(this.y).redMul(u.x.redAdd(u.y)).redISub(m).redISub(N),S=f.redMul(_).redMul(x),D,C;return this.curve.twisted?(D=f.redMul(E).redMul(N.redSub(this.curve._mulA(m))),C=_.redMul(E)):(D=f.redMul(E).redMul(N.redSub(m)),C=this.curve._mulC(_).redMul(E)),this.curve.point(S,D,C)},c.prototype.add=function(u){return this.isInfinity()?u:u.isInfinity()?this:this.curve.extended?this._extAdd(u):this._projAdd(u)},c.prototype.mul=function(u){return this._hasDoubles(u)?this.curve._fixedNafMul(this,u):this.curve._wnafMul(this,u)},c.prototype.mulAdd=function(u,f,g){return this.curve._wnafMulAdd(1,[this,f],[u,g],2,!1)},c.prototype.jmulAdd=function(u,f,g){return this.curve._wnafMulAdd(1,[this,f],[u,g],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var u=this.z.redInvm();return this.x=this.x.redMul(u),this.y=this.y.redMul(u),this.t&&(this.t=this.t.redMul(u)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(u){return this===u||this.getX().cmp(u.getX())===0&&this.getY().cmp(u.getY())===0},c.prototype.eqXToP=function(u){var f=u.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(f)===0)return!0;for(var g=u.clone(),m=this.curve.redN.redMul(this.z);;){if(g.iadd(this.curve.n),g.cmp(this.curve.p)>=0)return!1;if(f.redIAdd(m),this.x.cmp(f)===0)return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add,oy}var yI;function LS(){return yI||(yI=1,(function(r){var e=r;e.base=od(),e.short=iU(),e.mont=nU(),e.edwards=sU()})(iy)),iy}var cy={},hy={},$t={},wI;function ys(){if(wI)return $t;wI=1;var r=Ln(),e=Ge();$t.inherits=e;function t(a,h){return(a.charCodeAt(h)&64512)!==55296||h<0||h+1>=a.length?!1:(a.charCodeAt(h+1)&64512)===56320}function i(a,h){if(Array.isArray(a))return a.slice();if(!a)return[];var d=[];if(typeof a=="string")if(h){if(h==="hex")for(a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a),w=0;w<a.length;w+=2)d.push(parseInt(a[w]+a[w+1],16))}else for(var p=0,w=0;w<a.length;w++){var b=a.charCodeAt(w);b<128?d[p++]=b:b<2048?(d[p++]=b>>6|192,d[p++]=b&63|128):t(a,w)?(b=65536+((b&1023)<<10)+(a.charCodeAt(++w)&1023),d[p++]=b>>18|240,d[p++]=b>>12&63|128,d[p++]=b>>6&63|128,d[p++]=b&63|128):(d[p++]=b>>12|224,d[p++]=b>>6&63|128,d[p++]=b&63|128)}else for(w=0;w<a.length;w++)d[w]=a[w]|0;return d}$t.toArray=i;function s(a){for(var h="",d=0;d<a.length;d++)h+=l(a[d].toString(16));return h}$t.toHex=s;function n(a){var h=a>>>24|a>>>8&65280|a<<8&16711680|(a&255)<<24;return h>>>0}$t.htonl=n;function c(a,h){for(var d="",p=0;p<a.length;p++){var w=a[p];h==="little"&&(w=n(w)),d+=u(w.toString(16))}return d}$t.toHex32=c;function l(a){return a.length===1?"0"+a:a}$t.zero2=l;function u(a){return a.length===7?"0"+a:a.length===6?"00"+a:a.length===5?"000"+a:a.length===4?"0000"+a:a.length===3?"00000"+a:a.length===2?"000000"+a:a.length===1?"0000000"+a:a}$t.zero8=u;function f(a,h,d,p){var w=d-h;r(w%4===0);for(var b=new Array(w/4),I=0,y=h;I<b.length;I++,y+=4){var o;p==="big"?o=a[y]<<24|a[y+1]<<16|a[y+2]<<8|a[y+3]:o=a[y+3]<<24|a[y+2]<<16|a[y+1]<<8|a[y],b[I]=o>>>0}return b}$t.join32=f;function g(a,h){for(var d=new Array(a.length*4),p=0,w=0;p<a.length;p++,w+=4){var b=a[p];h==="big"?(d[w]=b>>>24,d[w+1]=b>>>16&255,d[w+2]=b>>>8&255,d[w+3]=b&255):(d[w+3]=b>>>24,d[w+2]=b>>>16&255,d[w+1]=b>>>8&255,d[w]=b&255)}return d}$t.split32=g;function m(a,h){return a>>>h|a<<32-h}$t.rotr32=m;function N(a,h){return a<<h|a>>>32-h}$t.rotl32=N;function A(a,h){return a+h>>>0}$t.sum32=A;function _(a,h,d){return a+h+d>>>0}$t.sum32_3=_;function E(a,h,d,p){return a+h+d+p>>>0}$t.sum32_4=E;function x(a,h,d,p,w){return a+h+d+p+w>>>0}$t.sum32_5=x;function S(a,h,d,p){var w=a[h],b=a[h+1],I=p+b>>>0,y=(I<p?1:0)+d+w;a[h]=y>>>0,a[h+1]=I}$t.sum64=S;function D(a,h,d,p){var w=h+p>>>0,b=(w<h?1:0)+a+d;return b>>>0}$t.sum64_hi=D;function C(a,h,d,p){var w=h+p;return w>>>0}$t.sum64_lo=C;function j(a,h,d,p,w,b,I,y){var o=0,v=h;v=v+p>>>0,o+=v<h?1:0,v=v+b>>>0,o+=v<b?1:0,v=v+y>>>0,o+=v<y?1:0;var R=a+d+w+I+o;return R>>>0}$t.sum64_4_hi=j;function k(a,h,d,p,w,b,I,y){var o=h+p+b+y;return o>>>0}$t.sum64_4_lo=k;function P(a,h,d,p,w,b,I,y,o,v){var R=0,L=h;L=L+p>>>0,R+=L<h?1:0,L=L+b>>>0,R+=L<b?1:0,L=L+y>>>0,R+=L<y?1:0,L=L+v>>>0,R+=L<v?1:0;var z=a+d+w+I+o+R;return z>>>0}$t.sum64_5_hi=P;function Q(a,h,d,p,w,b,I,y,o,v){var R=h+p+b+y+v;return R>>>0}$t.sum64_5_lo=Q;function F(a,h,d){var p=h<<32-d|a>>>d;return p>>>0}$t.rotr64_hi=F;function $(a,h,d){var p=a<<32-d|h>>>d;return p>>>0}$t.rotr64_lo=$;function Z(a,h,d){return a>>>d}$t.shr64_hi=Z;function M(a,h,d){var p=a<<32-d|h>>>d;return p>>>0}return $t.shr64_lo=M,$t}var ly={},mI;function Ll(){if(mI)return ly;mI=1;var r=ys(),e=Ln();function t(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return ly.BlockHash=t,t.prototype.update=function(s,n){if(s=r.toArray(s,n),this.pending?this.pending=this.pending.concat(s):this.pending=s,this.pendingTotal+=s.length,this.pending.length>=this._delta8){s=this.pending;var c=s.length%this._delta8;this.pending=s.slice(s.length-c,s.length),this.pending.length===0&&(this.pending=null),s=r.join32(s,0,s.length-c,this.endian);for(var l=0;l<s.length;l+=this._delta32)this._update(s,l,l+this._delta32)}return this},t.prototype.digest=function(s){return this.update(this._pad()),e(this.pending===null),this._digest(s)},t.prototype._pad=function(){var s=this.pendingTotal,n=this._delta8,c=n-(s+this.padLength)%n,l=new Array(c+this.padLength);l[0]=128;for(var u=1;u<c;u++)l[u]=0;if(s<<=3,this.endian==="big"){for(var f=8;f<this.padLength;f++)l[u++]=0;l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=s>>>24&255,l[u++]=s>>>16&255,l[u++]=s>>>8&255,l[u++]=s&255}else for(l[u++]=s&255,l[u++]=s>>>8&255,l[u++]=s>>>16&255,l[u++]=s>>>24&255,l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0,f=8;f<this.padLength;f++)l[u++]=0;return l},ly}var _a={},Xn={},vI;function zS(){if(vI)return Xn;vI=1;var r=ys(),e=r.rotr32;function t(g,m,N,A){if(g===0)return i(m,N,A);if(g===1||g===3)return n(m,N,A);if(g===2)return s(m,N,A)}Xn.ft_1=t;function i(g,m,N){return g&m^~g&N}Xn.ch32=i;function s(g,m,N){return g&m^g&N^m&N}Xn.maj32=s;function n(g,m,N){return g^m^N}Xn.p32=n;function c(g){return e(g,2)^e(g,13)^e(g,22)}Xn.s0_256=c;function l(g){return e(g,6)^e(g,11)^e(g,25)}Xn.s1_256=l;function u(g){return e(g,7)^e(g,18)^g>>>3}Xn.g0_256=u;function f(g){return e(g,17)^e(g,19)^g>>>10}return Xn.g1_256=f,Xn}var uy,bI;function aU(){if(bI)return uy;bI=1;var r=ys(),e=Ll(),t=zS(),i=r.rotl32,s=r.sum32,n=r.sum32_5,c=t.ft_1,l=e.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(f,l),uy=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(m,N){for(var A=this.W,_=0;_<16;_++)A[_]=m[N+_];for(;_<A.length;_++)A[_]=i(A[_-3]^A[_-8]^A[_-14]^A[_-16],1);var E=this.h[0],x=this.h[1],S=this.h[2],D=this.h[3],C=this.h[4];for(_=0;_<A.length;_++){var j=~~(_/20),k=n(i(E,5),c(j,x,S,D),C,A[_],u[j]);C=D,D=S,S=i(x,30),x=E,E=k}this.h[0]=s(this.h[0],E),this.h[1]=s(this.h[1],x),this.h[2]=s(this.h[2],S),this.h[3]=s(this.h[3],D),this.h[4]=s(this.h[4],C)},f.prototype._digest=function(m){return m==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},uy}var fy,MI;function kS(){if(MI)return fy;MI=1;var r=ys(),e=Ll(),t=zS(),i=Ln(),s=r.sum32,n=r.sum32_4,c=r.sum32_5,l=t.ch32,u=t.maj32,f=t.s0_256,g=t.s1_256,m=t.g0_256,N=t.g1_256,A=e.BlockHash,_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function E(){if(!(this instanceof E))return new E;A.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_,this.W=new Array(64)}return r.inherits(E,A),fy=E,E.blockSize=512,E.outSize=256,E.hmacStrength=192,E.padLength=64,E.prototype._update=function(S,D){for(var C=this.W,j=0;j<16;j++)C[j]=S[D+j];for(;j<C.length;j++)C[j]=n(N(C[j-2]),C[j-7],m(C[j-15]),C[j-16]);var k=this.h[0],P=this.h[1],Q=this.h[2],F=this.h[3],$=this.h[4],Z=this.h[5],M=this.h[6],a=this.h[7];for(i(this.k.length===C.length),j=0;j<C.length;j++){var h=c(a,g($),l($,Z,M),this.k[j],C[j]),d=s(f(k),u(k,P,Q));a=M,M=Z,Z=$,$=s(F,h),F=Q,Q=P,P=k,k=s(h,d)}this.h[0]=s(this.h[0],k),this.h[1]=s(this.h[1],P),this.h[2]=s(this.h[2],Q),this.h[3]=s(this.h[3],F),this.h[4]=s(this.h[4],$),this.h[5]=s(this.h[5],Z),this.h[6]=s(this.h[6],M),this.h[7]=s(this.h[7],a)},E.prototype._digest=function(S){return S==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},fy}var dy,NI;function oU(){if(NI)return dy;NI=1;var r=ys(),e=kS();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(t,e),dy=t,t.blockSize=512,t.outSize=224,t.hmacStrength=192,t.padLength=64,t.prototype._digest=function(s){return s==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},dy}var py,II;function PS(){if(II)return py;II=1;var r=ys(),e=Ll(),t=Ln(),i=r.rotr64_hi,s=r.rotr64_lo,n=r.shr64_hi,c=r.shr64_lo,l=r.sum64,u=r.sum64_hi,f=r.sum64_lo,g=r.sum64_4_hi,m=r.sum64_4_lo,N=r.sum64_5_hi,A=r.sum64_5_lo,_=e.BlockHash,E=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function x(){if(!(this instanceof x))return new x;_.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=E,this.W=new Array(160)}r.inherits(x,_),py=x,x.blockSize=1024,x.outSize=512,x.hmacStrength=192,x.padLength=128,x.prototype._prepareBlock=function(d,p){for(var w=this.W,b=0;b<32;b++)w[b]=d[p+b];for(;b<w.length;b+=2){var I=M(w[b-4],w[b-3]),y=a(w[b-4],w[b-3]),o=w[b-14],v=w[b-13],R=$(w[b-30],w[b-29]),L=Z(w[b-30],w[b-29]),z=w[b-32],q=w[b-31];w[b]=g(I,y,o,v,R,L,z,q),w[b+1]=m(I,y,o,v,R,L,z,q)}},x.prototype._update=function(d,p){this._prepareBlock(d,p);var w=this.W,b=this.h[0],I=this.h[1],y=this.h[2],o=this.h[3],v=this.h[4],R=this.h[5],L=this.h[6],z=this.h[7],q=this.h[8],Y=this.h[9],T=this.h[10],O=this.h[11],B=this.h[12],W=this.h[13],V=this.h[14],U=this.h[15];t(this.k.length===w.length);for(var H=0;H<w.length;H+=2){var de=V,ee=U,J=Q(q,Y),Qe=F(q,Y),oe=S(q,Y,T,O,B),K=D(q,Y,T,O,B,W),et=this.k[H],re=this.k[H+1],ae=w[H],Ke=w[H+1],se=N(de,ee,J,Qe,oe,K,et,re,ae,Ke),ce=A(de,ee,J,Qe,oe,K,et,re,ae,Ke);de=k(b,I),ee=P(b,I),J=C(b,I,y,o,v),Qe=j(b,I,y,o,v,R);var Dt=u(de,ee,J,Qe),he=f(de,ee,J,Qe);V=B,U=W,B=T,W=O,T=q,O=Y,q=u(L,z,se,ce),Y=f(z,z,se,ce),L=v,z=R,v=y,R=o,y=b,o=I,b=u(se,ce,Dt,he),I=f(se,ce,Dt,he)}l(this.h,0,b,I),l(this.h,2,y,o),l(this.h,4,v,R),l(this.h,6,L,z),l(this.h,8,q,Y),l(this.h,10,T,O),l(this.h,12,B,W),l(this.h,14,V,U)},x.prototype._digest=function(d){return d==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function S(h,d,p,w,b){var I=h&p^~h&b;return I<0&&(I+=4294967296),I}function D(h,d,p,w,b,I){var y=d&w^~d&I;return y<0&&(y+=4294967296),y}function C(h,d,p,w,b){var I=h&p^h&b^p&b;return I<0&&(I+=4294967296),I}function j(h,d,p,w,b,I){var y=d&w^d&I^w&I;return y<0&&(y+=4294967296),y}function k(h,d){var p=i(h,d,28),w=i(d,h,2),b=i(d,h,7),I=p^w^b;return I<0&&(I+=4294967296),I}function P(h,d){var p=s(h,d,28),w=s(d,h,2),b=s(d,h,7),I=p^w^b;return I<0&&(I+=4294967296),I}function Q(h,d){var p=i(h,d,14),w=i(h,d,18),b=i(d,h,9),I=p^w^b;return I<0&&(I+=4294967296),I}function F(h,d){var p=s(h,d,14),w=s(h,d,18),b=s(d,h,9),I=p^w^b;return I<0&&(I+=4294967296),I}function $(h,d){var p=i(h,d,1),w=i(h,d,8),b=n(h,d,7),I=p^w^b;return I<0&&(I+=4294967296),I}function Z(h,d){var p=s(h,d,1),w=s(h,d,8),b=c(h,d,7),I=p^w^b;return I<0&&(I+=4294967296),I}function M(h,d){var p=i(h,d,19),w=i(d,h,29),b=n(h,d,6),I=p^w^b;return I<0&&(I+=4294967296),I}function a(h,d){var p=s(h,d,19),w=s(d,h,29),b=c(h,d,6),I=p^w^b;return I<0&&(I+=4294967296),I}return py}var gy,AI;function cU(){if(AI)return gy;AI=1;var r=ys(),e=PS();function t(){if(!(this instanceof t))return new t;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(t,e),gy=t,t.blockSize=1024,t.outSize=384,t.hmacStrength=192,t.padLength=128,t.prototype._digest=function(s){return s==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},gy}var _I;function hU(){return _I||(_I=1,_a.sha1=aU(),_a.sha224=oU(),_a.sha256=kS(),_a.sha384=cU(),_a.sha512=PS()),_a}var yy={},EI;function lU(){if(EI)return yy;EI=1;var r=ys(),e=Ll(),t=r.rotl32,i=r.sum32,s=r.sum32_3,n=r.sum32_4,c=e.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(l,c),yy.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(x,S){for(var D=this.h[0],C=this.h[1],j=this.h[2],k=this.h[3],P=this.h[4],Q=D,F=C,$=j,Z=k,M=P,a=0;a<80;a++){var h=i(t(n(D,u(a,C,j,k),x[m[a]+S],f(a)),A[a]),P);D=P,P=k,k=t(j,10),j=C,C=h,h=i(t(n(Q,u(79-a,F,$,Z),x[N[a]+S],g(a)),_[a]),M),Q=M,M=Z,Z=t($,10),$=F,F=h}h=s(this.h[1],j,Z),this.h[1]=s(this.h[2],k,M),this.h[2]=s(this.h[3],P,Q),this.h[3]=s(this.h[4],D,F),this.h[4]=s(this.h[0],C,$),this.h[0]=h},l.prototype._digest=function(x){return x==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function u(E,x,S,D){return E<=15?x^S^D:E<=31?x&S|~x&D:E<=47?(x|~S)^D:E<=63?x&D|S&~D:x^(S|~D)}function f(E){return E<=15?0:E<=31?1518500249:E<=47?1859775393:E<=63?2400959708:2840853838}function g(E){return E<=15?1352829926:E<=31?1548603684:E<=47?1836072691:E<=63?2053994217:0}var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],N=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],A=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return yy}var wy,DI;function uU(){if(DI)return wy;DI=1;var r=ys(),e=Ln();function t(i,s,n){if(!(this instanceof t))return new t(i,s,n);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(s,n))}return wy=t,t.prototype._init=function(s){s.length>this.blockSize&&(s=new this.Hash().update(s).digest()),e(s.length<=this.blockSize);for(var n=s.length;n<this.blockSize;n++)s.push(0);for(n=0;n<s.length;n++)s[n]^=54;for(this.inner=new this.Hash().update(s),n=0;n<s.length;n++)s[n]^=106;this.outer=new this.Hash().update(s)},t.prototype.update=function(s,n){return this.inner.update(s,n),this},t.prototype.digest=function(s){return this.outer.update(this.inner.digest()),this.outer.digest(s)},wy}var SI;function Ev(){return SI||(SI=1,(function(r){var e=r;e.utils=ys(),e.common=Ll(),e.sha=hU(),e.ripemd=lU(),e.hmac=uU(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hy)),hy}var my,xI;function fU(){return xI||(xI=1,my={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),my}var TI;function Dv(){return TI||(TI=1,(function(r){var e=r,t=Ev(),i=LS(),s=zn(),n=s.assert;function c(f){f.type==="short"?this.curve=new i.short(f):f.type==="edwards"?this.curve=new i.edwards(f):this.curve=new i.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=c;function l(f,g){Object.defineProperty(e,f,{configurable:!0,enumerable:!0,get:function(){var m=new c(g);return Object.defineProperty(e,f,{configurable:!0,enumerable:!0,value:m}),m}})}l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=fU()}catch{u=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})})(cy)),cy}var vy,jI;function dU(){if(jI)return vy;jI=1;var r=Ev(),e=LD(),t=Ln();function i(s){if(!(this instanceof i))return new i(s);this.hash=s.hash,this.predResist=!!s.predResist,this.outLen=this.hash.outSize,this.minEntropy=s.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=e.toArray(s.entropy,s.entropyEnc||"hex"),c=e.toArray(s.nonce,s.nonceEnc||"hex"),l=e.toArray(s.pers,s.persEnc||"hex");t(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(n,c,l)}return vy=i,i.prototype._init=function(n,c,l){var u=n.concat(c).concat(l);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var f=0;f<this.V.length;f++)this.K[f]=0,this.V[f]=1;this._update(u),this._reseed=1,this.reseedInterval=281474976710656},i.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},i.prototype._update=function(n){var c=this._hmac().update(this.V).update([0]);n&&(c=c.update(n)),this.K=c.digest(),this.V=this._hmac().update(this.V).digest(),n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())},i.prototype.reseed=function(n,c,l,u){typeof c!="string"&&(u=l,l=c,c=null),n=e.toArray(n,c),l=e.toArray(l,u),t(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(n.concat(l||[])),this._reseed=1},i.prototype.generate=function(n,c,l,u){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof c!="string"&&(u=l,l=c,c=null),l&&(l=e.toArray(l,u||"hex"),this._update(l));for(var f=[];f.length<n;)this.V=this._hmac().update(this.V).digest(),f=f.concat(this.V);var g=f.slice(0,n);return this._update(l),this._reseed++,e.encode(g,c)},vy}var by,CI;function pU(){if(CI)return by;CI=1;var r=Ps(),e=zn(),t=e.assert;function i(s,n){this.ec=s,this.priv=null,this.pub=null,n.priv&&this._importPrivate(n.priv,n.privEnc),n.pub&&this._importPublic(n.pub,n.pubEnc)}return by=i,i.fromPublic=function(n,c,l){return c instanceof i?c:new i(n,{pub:c,pubEnc:l})},i.fromPrivate=function(n,c,l){return c instanceof i?c:new i(n,{priv:c,privEnc:l})},i.prototype.validate=function(){var n=this.getPublic();return n.isInfinity()?{result:!1,reason:"Invalid public key"}:n.validate()?n.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(n,c){return typeof n=="string"&&(c=n,n=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),c?this.pub.encode(c,n):this.pub},i.prototype.getPrivate=function(n){return n==="hex"?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(n,c){this.priv=new r(n,c||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(n,c){if(n.x||n.y){this.ec.curve.type==="mont"?t(n.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&t(n.x&&n.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(n.x,n.y);return}this.pub=this.ec.curve.decodePoint(n,c)},i.prototype.derive=function(n){return n.validate()||t(n.validate(),"public point not validated"),n.mul(this.priv).getX()},i.prototype.sign=function(n,c,l){return this.ec.sign(n,this,c,l)},i.prototype.verify=function(n,c,l){return this.ec.verify(n,c,this,void 0,l)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},by}var My,OI;function gU(){if(OI)return My;OI=1;var r=Ps(),e=zn(),t=e.assert;function i(u,f){if(u instanceof i)return u;this._importDER(u,f)||(t(u.r&&u.s,"Signature without r or s"),this.r=new r(u.r,16),this.s=new r(u.s,16),u.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=u.recoveryParam)}My=i;function s(){this.place=0}function n(u,f){var g=u[f.place++];if(!(g&128))return g;var m=g&15;if(m===0||m>4||u[f.place]===0)return!1;for(var N=0,A=0,_=f.place;A<m;A++,_++)N<<=8,N|=u[_],N>>>=0;return N<=127?!1:(f.place=_,N)}function c(u){for(var f=0,g=u.length-1;!u[f]&&!(u[f+1]&128)&&f<g;)f++;return f===0?u:u.slice(f)}i.prototype._importDER=function(f,g){f=e.toArray(f,g);var m=new s;if(f[m.place++]!==48)return!1;var N=n(f,m);if(N===!1||N+m.place!==f.length||f[m.place++]!==2)return!1;var A=n(f,m);if(A===!1||(f[m.place]&128)!==0)return!1;var _=f.slice(m.place,A+m.place);if(m.place+=A,f[m.place++]!==2)return!1;var E=n(f,m);if(E===!1||f.length!==E+m.place||(f[m.place]&128)!==0)return!1;var x=f.slice(m.place,E+m.place);if(_[0]===0)if(_[1]&128)_=_.slice(1);else return!1;if(x[0]===0)if(x[1]&128)x=x.slice(1);else return!1;return this.r=new r(_),this.s=new r(x),this.recoveryParam=null,!0};function l(u,f){if(f<128){u.push(f);return}var g=1+(Math.log(f)/Math.LN2>>>3);for(u.push(g|128);--g;)u.push(f>>>(g<<3)&255);u.push(f)}return i.prototype.toDER=function(f){var g=this.r.toArray(),m=this.s.toArray();for(g[0]&128&&(g=[0].concat(g)),m[0]&128&&(m=[0].concat(m)),g=c(g),m=c(m);!m[0]&&!(m[1]&128);)m=m.slice(1);var N=[2];l(N,g.length),N=N.concat(g),N.push(2),l(N,m.length);var A=N.concat(m),_=[48];return l(_,A.length),_=_.concat(A),e.encode(_,f)},My}var Ny,LI;function yU(){if(LI)return Ny;LI=1;var r=Ps(),e=dU(),t=zn(),i=Dv(),s=_v(),n=t.assert,c=pU(),l=gU();function u(f){if(!(this instanceof u))return new u(f);typeof f=="string"&&(n(Object.prototype.hasOwnProperty.call(i,f),"Unknown curve "+f),f=i[f]),f instanceof i.PresetCurve&&(f={curve:f}),this.curve=f.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=f.curve.g,this.g.precompute(f.curve.n.bitLength()+1),this.hash=f.hash||f.curve.hash}return Ny=u,u.prototype.keyPair=function(g){return new c(this,g)},u.prototype.keyFromPrivate=function(g,m){return c.fromPrivate(this,g,m)},u.prototype.keyFromPublic=function(g,m){return c.fromPublic(this,g,m)},u.prototype.genKeyPair=function(g){g||(g={});for(var m=new e({hash:this.hash,pers:g.pers,persEnc:g.persEnc||"utf8",entropy:g.entropy||s(this.hash.hmacStrength),entropyEnc:g.entropy&&g.entropyEnc||"utf8",nonce:this.n.toArray()}),N=this.n.byteLength(),A=this.n.sub(new r(2));;){var _=new r(m.generate(N));if(!(_.cmp(A)>0))return _.iaddn(1),this.keyFromPrivate(_)}},u.prototype._truncateToN=function(g,m,N){var A;if(r.isBN(g)||typeof g=="number")g=new r(g,16),A=g.byteLength();else if(typeof g=="object")A=g.length,g=new r(g,16);else{var _=g.toString();A=_.length+1>>>1,g=new r(_,16)}typeof N!="number"&&(N=A*8);var E=N-this.n.bitLength();return E>0&&(g=g.ushrn(E)),!m&&g.cmp(this.n)>=0?g.sub(this.n):g},u.prototype.sign=function(g,m,N,A){if(typeof N=="object"&&(A=N,N=null),A||(A={}),typeof g!="string"&&typeof g!="number"&&!r.isBN(g)){n(typeof g=="object"&&g&&typeof g.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),n(g.length>>>0===g.length);for(var _=0;_<g.length;_++)n((g[_]&255)===g[_])}m=this.keyFromPrivate(m,N),g=this._truncateToN(g,!1,A.msgBitLength),n(!g.isNeg(),"Can not sign a negative message");var E=this.n.byteLength(),x=m.getPrivate().toArray("be",E),S=g.toArray("be",E);n(new r(S).eq(g),"Can not sign message");for(var D=new e({hash:this.hash,entropy:x,nonce:S,pers:A.pers,persEnc:A.persEnc||"utf8"}),C=this.n.sub(new r(1)),j=0;;j++){var k=A.k?A.k(j):new r(D.generate(this.n.byteLength()));if(k=this._truncateToN(k,!0),!(k.cmpn(1)<=0||k.cmp(C)>=0)){var P=this.g.mul(k);if(!P.isInfinity()){var Q=P.getX(),F=Q.umod(this.n);if(F.cmpn(0)!==0){var $=k.invm(this.n).mul(F.mul(m.getPrivate()).iadd(g));if($=$.umod(this.n),$.cmpn(0)!==0){var Z=(P.getY().isOdd()?1:0)|(Q.cmp(F)!==0?2:0);return A.canonical&&$.cmp(this.nh)>0&&($=this.n.sub($),Z^=1),new l({r:F,s:$,recoveryParam:Z})}}}}}},u.prototype.verify=function(g,m,N,A,_){_||(_={}),g=this._truncateToN(g,!1,_.msgBitLength),N=this.keyFromPublic(N,A),m=new l(m,"hex");var E=m.r,x=m.s;if(E.cmpn(1)<0||E.cmp(this.n)>=0||x.cmpn(1)<0||x.cmp(this.n)>=0)return!1;var S=x.invm(this.n),D=S.mul(g).umod(this.n),C=S.mul(E).umod(this.n),j;return this.curve._maxwellTrick?(j=this.g.jmulAdd(D,N.getPublic(),C),j.isInfinity()?!1:j.eqXToP(E)):(j=this.g.mulAdd(D,N.getPublic(),C),j.isInfinity()?!1:j.getX().umod(this.n).cmp(E)===0)},u.prototype.recoverPubKey=function(f,g,m,N){n((3&m)===m,"The recovery param is more than two bits"),g=new l(g,N);var A=this.n,_=new r(f),E=g.r,x=g.s,S=m&1,D=m>>1;if(E.cmp(this.curve.p.umod(this.curve.n))>=0&&D)throw new Error("Unable to find sencond key candinate");D?E=this.curve.pointFromX(E.add(this.curve.n),S):E=this.curve.pointFromX(E,S);var C=g.r.invm(A),j=A.sub(_).mul(C).umod(A),k=x.mul(C).umod(A);return this.g.mulAdd(j,E,k)},u.prototype.getKeyRecoveryParam=function(f,g,m,N){if(g=new l(g,N),g.recoveryParam!==null)return g.recoveryParam;for(var A=0;A<4;A++){var _;try{_=this.recoverPubKey(f,g,A)}catch{continue}if(_.eq(m))return A}throw new Error("Unable to find valid recovery factor")},Ny}var Iy,zI;function wU(){if(zI)return Iy;zI=1;var r=zn(),e=r.assert,t=r.parseBytes,i=r.cachedProperty;function s(n,c){this.eddsa=n,this._secret=t(c.secret),n.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=t(c.pub)}return s.fromPublic=function(c,l){return l instanceof s?l:new s(c,{pub:l})},s.fromSecret=function(c,l){return l instanceof s?l:new s(c,{secret:l})},s.prototype.secret=function(){return this._secret},i(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),i(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),i(s,"privBytes",function(){var c=this.eddsa,l=this.hash(),u=c.encodingLength-1,f=l.slice(0,c.encodingLength);return f[0]&=248,f[u]&=127,f[u]|=64,f}),i(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),i(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),i(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(c){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(c,this)},s.prototype.verify=function(c,l){return this.eddsa.verify(c,l,this)},s.prototype.getSecret=function(c){return e(this._secret,"KeyPair is public only"),r.encode(this.secret(),c)},s.prototype.getPublic=function(c){return r.encode(this.pubBytes(),c)},Iy=s,Iy}var Ay,kI;function mU(){if(kI)return Ay;kI=1;var r=Ps(),e=zn(),t=e.assert,i=e.cachedProperty,s=e.parseBytes;function n(c,l){this.eddsa=c,typeof l!="object"&&(l=s(l)),Array.isArray(l)&&(t(l.length===c.encodingLength*2,"Signature has invalid size"),l={R:l.slice(0,c.encodingLength),S:l.slice(c.encodingLength)}),t(l.R&&l.S,"Signature without R or S"),c.isPoint(l.R)&&(this._R=l.R),l.S instanceof r&&(this._S=l.S),this._Rencoded=Array.isArray(l.R)?l.R:l.Rencoded,this._Sencoded=Array.isArray(l.S)?l.S:l.Sencoded}return i(n,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),i(n,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),i(n,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),i(n,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),n.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},n.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},Ay=n,Ay}var _y,PI;function vU(){if(PI)return _y;PI=1;var r=Ev(),e=Dv(),t=zn(),i=t.assert,s=t.parseBytes,n=wU(),c=mU();function l(u){if(i(u==="ed25519","only tested with ed25519 so far"),!(this instanceof l))return new l(u);u=e[u].curve,this.curve=u,this.g=u.g,this.g.precompute(u.n.bitLength()+1),this.pointClass=u.point().constructor,this.encodingLength=Math.ceil(u.n.bitLength()/8),this.hash=r.sha512}return _y=l,l.prototype.sign=function(f,g){f=s(f);var m=this.keyFromSecret(g),N=this.hashInt(m.messagePrefix(),f),A=this.g.mul(N),_=this.encodePoint(A),E=this.hashInt(_,m.pubBytes(),f).mul(m.priv()),x=N.add(E).umod(this.curve.n);return this.makeSignature({R:A,S:x,Rencoded:_})},l.prototype.verify=function(f,g,m){if(f=s(f),g=this.makeSignature(g),g.S().gte(g.eddsa.curve.n)||g.S().isNeg())return!1;var N=this.keyFromPublic(m),A=this.hashInt(g.Rencoded(),N.pubBytes(),f),_=this.g.mul(g.S()),E=g.R().add(N.pub().mul(A));return E.eq(_)},l.prototype.hashInt=function(){for(var f=this.hash(),g=0;g<arguments.length;g++)f.update(arguments[g]);return t.intFromLE(f.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(f){return n.fromPublic(this,f)},l.prototype.keyFromSecret=function(f){return n.fromSecret(this,f)},l.prototype.makeSignature=function(f){return f instanceof c?f:new c(this,f)},l.prototype.encodePoint=function(f){var g=f.getY().toArray("le",this.encodingLength);return g[this.encodingLength-1]|=f.getX().isOdd()?128:0,g},l.prototype.decodePoint=function(f){f=t.parseBytes(f);var g=f.length-1,m=f.slice(0,g).concat(f[g]&-129),N=(f[g]&128)!==0,A=t.intFromLE(m);return this.curve.pointFromY(A,N)},l.prototype.encodeInt=function(f){return f.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(f){return t.intFromLE(f)},l.prototype.isPoint=function(f){return f instanceof this.pointClass},_y}var RI;function cd(){return RI||(RI=1,(function(r){var e=r;e.version=C9.version,e.utils=zn(),e.rand=_v(),e.curve=LS(),e.curves=Dv(),e.ec=yU(),e.eddsa=vU()})(Gd)),Gd}var RS=cd();const US={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var bU={};const $S=":";function uc(r){const[e,t]=r.split($S);return{namespace:e,reference:t}}function MU(r){const[e,t,i]=r.split($S);return{namespace:e,reference:t,address:i}}function BS(r,e){return r.includes(":")?[r]:e.chains||[]}const NU="ReactNative",un={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},IU="js";function jf(){return typeof Be<"u"&&typeof Be.versions<"u"&&typeof Be.versions.node<"u"}function ya(){return!Ji.getDocument()&&!!Ji.getNavigator()&&navigator.product===NU}function AU(){return ya()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="android"}function _U(){return ya()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="ios"}function zl(){return!jf()&&!!Ji.getNavigator()&&!!Ji.getDocument()}function kl(){return ya()?un.reactNative:jf()?un.node:zl()?un.browser:un.unknown}function UI(){var r;try{return ya()&&typeof globalThis<"u"&&typeof globalThis?.Application<"u"?(r=globalThis.Application)==null?void 0:r.applicationId:void 0}catch{return}}function EU(r,e){const t=new URLSearchParams(r);for(const i of Object.keys(e).sort())if(e.hasOwnProperty(i)){const s=e[i];s!==void 0&&t.set(i,s)}return t.toString()}function qS(){return gD.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function DU(){if(kl()===un.reactNative&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"){const{OS:t,Version:i}=globalThis.Platform;return[t,i].join("-")}const r=dD();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function SU(){var r;const e=kl();return e===un.browser?[e,((r=Ji.getLocation())==null?void 0:r.host)||"unknown"].join(":"):e}function YS(r,e,t){const i=DU(),s=SU();return[[r,e].join("-"),[IU,t].join("-"),i,s].join("/")}function xU({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:s,projectId:n,useOnCloseEvent:c,bundleId:l,packageName:u}){const f=t.split("?"),g=YS(r,e,i),m={auth:s,ua:g,projectId:n,useOnCloseEvent:c,packageName:u||void 0,bundleId:l||void 0},N=EU(f[1]||"",m);return f[0]+"?"+N}function Ua(r,e){return r.filter(t=>e.includes(t)).length===r.length}function WS(r){return Object.fromEntries(r.entries())}function QS(r){return new Map(Object.entries(r))}function ja(r=ne.FIVE_MINUTES,e){const t=ne.toMiliseconds(r||ne.FIVE_MINUTES);let i,s,n,c;return{resolve:l=>{n&&i&&(clearTimeout(n),i(l),c=Promise.resolve(l))},reject:l=>{n&&s&&(clearTimeout(n),s(l))},done:()=>new Promise((l,u)=>{if(c)return l(c);n=setTimeout(()=>{const f=new Error(e);c=Promise.reject(f),u(f)},t),i=l,s=u})}}function ta(r,e,t){return new Promise(async(i,s)=>{const n=setTimeout(()=>s(new Error(t)),e);try{const c=await r;i(c)}catch(c){s(c)}clearTimeout(n)})}function VS(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function TU(r){return VS("topic",r)}function jU(r){return VS("id",r)}function FS(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function Jr(r,e){return ne.fromMiliseconds(Date.now()+ne.toMiliseconds(r))}function Gs(r){return Date.now()>=ne.toMiliseconds(r)}function Tt(r,e){return`${r}${e?`:${e}`:""}`}function lf(r=[],e=[]){return[...new Set([...r,...e])]}async function CU({id:r,topic:e,wcDeepLink:t}){var i;try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t,n=s?.href;if(typeof n!="string")return;const c=OU(n,r,e),l=kl();if(l===un.browser){if(!((i=Ji.getDocument())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}LU(c)}else l===un.reactNative&&typeof globalThis?.Linking<"u"&&await globalThis.Linking.openURL(c)}catch(s){console.error(s)}}function OU(r,e,t){const i=`requestId=${e}&sessionTopic=${t}`;r.endsWith("/")&&(r=r.slice(0,-1));let s=`${r}`;if(r.startsWith("https://t.me")){const n=r.includes("?")?"&startapp=":"?startapp=";s=`${s}${n}${RU(i,!0)}`}else s=`${s}/wc?${i}`;return s}function LU(r){let e="_self";PU()?e="_top":(kU()||r.startsWith("https://")||r.startsWith("http://"))&&(e="_blank"),window.open(r,e,"noreferrer noopener")}async function zU(r,e){let t="";try{if(zl()&&(t=localStorage.getItem(e),t))return t;t=await r.getItem(e)}catch(i){console.error(i)}return t}function $I(r,e){if(!r.includes(e))return null;const t=r.split(/([&,?,=])/),i=t.indexOf(e);return t[i+2]}function BI(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}function Sv(){return typeof Be<"u"&&bU.IS_VITEST==="true"}function kU(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function PU(){try{return window.self!==window.top}catch{return!1}}function RU(r,e=!1){const t=We.from(r).toString("base64");return e?t.replace(/[=]/g,""):t}function HS(r){return We.from(r,"base64").toString("utf-8")}function UU(r){return new Promise(e=>setTimeout(e,r))}function Qh(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function $U(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function hd(r,...e){if(!$U(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function xv(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Qh(r.outputLen),Qh(r.blockLen)}function vc(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function ZS(r,e){hd(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const _u=BigInt(2**32-1),qI=BigInt(32);function BU(r,e=!1){return e?{h:Number(r&_u),l:Number(r>>qI&_u)}:{h:Number(r>>qI&_u)|0,l:Number(r&_u)|0}}function qU(r,e=!1){let t=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:n,l:c}=BU(r[s],e);[t[s],i[s]]=[n,c]}return[t,i]}const YU=(r,e,t)=>r<<t|e>>>32-t,WU=(r,e,t)=>e<<t|r>>>32-t,QU=(r,e,t)=>e<<t-32|r>>>64-t,VU=(r,e,t)=>r<<t-32|e>>>64-t,vo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function FU(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function Ey(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function es(r,e){return r<<32-e|r>>>e}const YI=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function HU(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function WI(r){for(let e=0;e<r.length;e++)r[e]=HU(r[e])}function ZU(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function bc(r){return typeof r=="string"&&(r=ZU(r)),hd(r),r}let Tv=class{clone(){return this._cloneInto()}};function GS(r){const e=i=>r().update(bc(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Pl(r=32){if(vo&&typeof vo.getRandomValues=="function")return vo.getRandomValues(new Uint8Array(r));if(vo&&typeof vo.randomBytes=="function")return vo.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}const KS=[],JS=[],XS=[],GU=BigInt(0),ih=BigInt(1),KU=BigInt(2),JU=BigInt(7),XU=BigInt(256),e7=BigInt(113);for(let r=0,e=ih,t=1,i=0;r<24;r++){[t,i]=[i,(2*t+3*i)%5],KS.push(2*(5*i+t)),JS.push((r+1)*(r+2)/2%64);let s=GU;for(let n=0;n<7;n++)e=(e<<ih^(e>>JU)*e7)%XU,e&KU&&(s^=ih<<(ih<<BigInt(n))-ih);XS.push(s)}const[t7,r7]=qU(XS,!0),QI=(r,e,t)=>t>32?QU(r,e,t):YU(r,e,t),VI=(r,e,t)=>t>32?VU(r,e,t):WU(r,e,t);function i7(r,e=24){const t=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let c=0;c<10;c++)t[c]=r[c]^r[c+10]^r[c+20]^r[c+30]^r[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,u=(c+2)%10,f=t[u],g=t[u+1],m=QI(f,g,1)^t[l],N=VI(f,g,1)^t[l+1];for(let A=0;A<50;A+=10)r[c+A]^=m,r[c+A+1]^=N}let s=r[2],n=r[3];for(let c=0;c<24;c++){const l=JS[c],u=QI(s,n,l),f=VI(s,n,l),g=KS[c];s=r[g],n=r[g+1],r[g]=u,r[g+1]=f}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)t[l]=r[c+l];for(let l=0;l<10;l++)r[c+l]^=~t[(l+2)%10]&t[(l+4)%10]}r[0]^=t7[i],r[1]^=r7[i]}t.fill(0)}let n7=class ex extends Tv{constructor(e,t,i,s=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=s,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Qh(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=FU(this.state)}keccak(){YI||WI(this.state32),i7(this.state32,this.rounds),YI||WI(this.state32),this.posOut=0,this.pos=0}update(e){vc(this);const{blockLen:t,state:i}=this;e=bc(e);const s=e.length;for(let n=0;n<s;){const c=Math.min(t-this.pos,s-n);for(let l=0;l<c;l++)i[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:i,blockLen:s}=this;e[i]^=t,(t&128)!==0&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){vc(this,!1),hd(e),this.finish();const t=this.state,{blockLen:i}=this;for(let s=0,n=e.length;s<n;){this.posOut>=i&&this.keccak();const c=Math.min(i-this.posOut,n-s);e.set(t.subarray(this.posOut,this.posOut+c),s),this.posOut+=c,s+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Qh(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ZS(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:i,outputLen:s,rounds:n,enableXOF:c}=this;return e||(e=new ex(t,i,s,c,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=i,e.outputLen=s,e.enableXOF=c,e.destroyed=this.destroyed,e}};const s7=(r,e,t)=>GS(()=>new n7(e,r,t)),a7=s7(1,136,256/8),o7="https://rpc.walletconnect.org/v1";function tx(r){const e=`Ethereum Signed Message:
${r.length}`,t=new TextEncoder().encode(e+r);return"0x"+We.from(a7(t)).toString("hex")}async function c7(r,e,t,i,s,n){switch(t.t){case"eip191":return await h7(r,e,t.s);case"eip1271":return await l7(r,e,t.s,i,s,n);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}async function h7(r,e,t){return(await Lk({hash:tx(e),signature:t})).toLowerCase()===r.toLowerCase()}async function l7(r,e,t,i,s,n){const c=uc(i);if(!c.namespace||!c.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{const l="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",f="0000000000000000000000000000000000000000000000000000000000000041",g=t.substring(2),m=tx(e).substring(2),N=l+m+u+f+g,A=await fetch(`${n||o7}/?chainId=${i}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:u7(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:N},"latest"]})}),{result:_}=await A.json();return _?_.slice(0,l.length).toLowerCase()===l.toLowerCase():!1}catch(l){return console.error("isValidEip1271Signature: ",l),!1}}function u7(){return Date.now()+Math.floor(Math.random()*1e3)}var f7=Object.defineProperty,d7=Object.defineProperties,p7=Object.getOwnPropertyDescriptors,FI=Object.getOwnPropertySymbols,g7=Object.prototype.hasOwnProperty,y7=Object.prototype.propertyIsEnumerable,HI=(r,e,t)=>e in r?f7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,w7=(r,e)=>{for(var t in e||(e={}))g7.call(e,t)&&HI(r,t,e[t]);if(FI)for(var t of FI(e))y7.call(e,t)&&HI(r,t,e[t]);return r},m7=(r,e)=>d7(r,p7(e));const v7="did:pkh:",jv=r=>r?.split(":"),b7=r=>{const e=r&&jv(r);if(e)return r.includes(v7)?e[3]:e[1]},Qw=r=>{const e=r&&jv(r);if(e)return e[2]+":"+e[3]},Cf=r=>{const e=r&&jv(r);if(e)return e.pop()};async function ZI(r){const{cacao:e,projectId:t}=r,{s:i,p:s}=e,n=rx(s,s.iss),c=Cf(s.iss);return await c7(c,n,i,Qw(s.iss),t)}const rx=(r,e)=>{const t=`${r.domain} wants you to sign in with your Ethereum account:`,i=Cf(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=r.statement||void 0;const n=`URI: ${r.aud||r.uri}`,c=`Version: ${r.version}`,l=`Chain ID: ${b7(e)}`,u=`Nonce: ${r.nonce}`,f=`Issued At: ${r.iat}`,g=r.exp?`Expiration Time: ${r.exp}`:void 0,m=r.nbf?`Not Before: ${r.nbf}`:void 0,N=r.requestId?`Request ID: ${r.requestId}`:void 0,A=r.resources?`Resources:${r.resources.map(E=>`
- ${E}`).join("")}`:void 0,_=uf(r.resources);if(_){const E=Vh(_);s=x7(s,E)}return[t,i,"",s,"",n,c,l,u,f,g,m,N,A].filter(E=>E!=null).join(`
`)};function M7(r){return We.from(JSON.stringify(r)).toString("base64")}function N7(r){return JSON.parse(We.from(r,"base64").toString("utf-8"))}function Fa(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const i=r.att[t];if(Array.isArray(i))throw new Error(`Resource must be an object: ${t}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(i).forEach(s=>{const n=i[s];if(!Array.isArray(n))throw new Error(`Ability limits ${s} must be an array of objects, found: ${n}`);if(!n.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);n.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${c}`)})})})}function I7(r,e,t,i={}){return t?.sort((s,n)=>s.localeCompare(n)),{att:{[r]:A7(e,t,i)}}}function A7(r,e,t={}){e=e?.sort((s,n)=>s.localeCompare(n));const i=e.map(s=>({[`${r}/${s}`]:[t]}));return Object.assign({},...i)}function ix(r){return Fa(r),`urn:recap:${M7(r).replace(/=/g,"")}`}function Vh(r){const e=N7(r.replace("urn:recap:",""));return Fa(e),e}function _7(r,e,t){const i=I7(r,e,t);return ix(i)}function E7(r){return r&&r.includes("urn:recap:")}function D7(r,e){const t=Vh(r),i=Vh(e),s=S7(t,i);return ix(s)}function S7(r,e){Fa(r),Fa(e);const t=Object.keys(r.att).concat(Object.keys(e.att)).sort((s,n)=>s.localeCompare(n)),i={att:{}};return t.forEach(s=>{var n,c;Object.keys(((n=r.att)==null?void 0:n[s])||{}).concat(Object.keys(((c=e.att)==null?void 0:c[s])||{})).sort((l,u)=>l.localeCompare(u)).forEach(l=>{var u,f;i.att[s]=m7(w7({},i.att[s]),{[l]:((u=r.att[s])==null?void 0:u[l])||((f=e.att[s])==null?void 0:f[l])})})}),i}function x7(r="",e){Fa(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;const i=[];let s=0;Object.keys(e.att).forEach(l=>{const u=Object.keys(e.att[l]).map(m=>({ability:m.split("/")[0],action:m.split("/")[1]}));u.sort((m,N)=>m.action.localeCompare(N.action));const f={};u.forEach(m=>{f[m.ability]||(f[m.ability]=[]),f[m.ability].push(m.action)});const g=Object.keys(f).map(m=>(s++,`(${s}) '${m}': '${f[m].join("', '")}' for '${l}'.`));i.push(g.join(", ").replace(".,","."))});const n=i.join(" "),c=`${t}${n}`;return`${r?r+" ":""}${c}`}function GI(r){var e;const t=Vh(r);Fa(t);const i=(e=t.att)==null?void 0:e.eip155;return i?Object.keys(i).map(s=>s.split("/")[1]):[]}function KI(r){const e=Vh(r);Fa(e);const t=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(s=>{var n;(n=s?.[0])!=null&&n.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function uf(r){if(!r)return;const e=r?.[r.length-1];return E7(e)?e:void 0}function Dy(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function nx(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function hn(r,...e){if(!nx(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function JI(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function T7(r,e){hn(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function XI(r){if(typeof r!="boolean")throw new Error(`boolean expected, not ${r}`)}const aa=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),j7=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),C7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!C7)throw new Error("Non little-endian hardware is not supported");function O7(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Vw(r){if(typeof r=="string")r=O7(r);else if(nx(r))r=Fw(r);else throw new Error("Uint8Array expected, got "+typeof r);return r}function L7(r,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(r,e)}function z7(r,e){if(r.length!==e.length)return!1;let t=0;for(let i=0;i<r.length;i++)t|=r[i]^e[i];return t===0}const k7=(r,e)=>{function t(i,...s){if(hn(i),r.nonceLength!==void 0){const f=s[0];if(!f)throw new Error("nonce / iv required");r.varSizeNonce?hn(f):hn(f,r.nonceLength)}const n=r.tagLength;n&&s[1]!==void 0&&hn(s[1]);const c=e(i,...s),l=(f,g)=>{if(g!==void 0){if(f!==2)throw new Error("cipher output not supported");hn(g)}};let u=!1;return{encrypt(f,g){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,hn(f),l(c.encrypt.length,g),c.encrypt(f,g)},decrypt(f,g){if(hn(f),n&&f.length<n)throw new Error("invalid ciphertext length: smaller than tagLength="+n);return l(c.decrypt.length,g),c.decrypt(f,g)}}}return Object.assign(t,r),t};function e4(r,e,t=!0){if(e===void 0)return new Uint8Array(r);if(e.length!==r)throw new Error("invalid output length, expected "+r+", got: "+e.length);if(t&&!P7(e))throw new Error("invalid output, must be aligned");return e}function t4(r,e,t,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,i);const s=BigInt(32),n=BigInt(4294967295),c=Number(t>>s&n),l=Number(t&n);r.setUint32(e+4,c,i),r.setUint32(e+0,l,i)}function P7(r){return r.byteOffset%4===0}function Fw(r){return Uint8Array.from(r)}function Mc(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}const sx=r=>Uint8Array.from(r.split("").map(e=>e.charCodeAt(0))),R7=sx("expand 16-byte k"),U7=sx("expand 32-byte k"),$7=aa(R7),B7=aa(U7);function bt(r,e){return r<<e|r>>>32-e}function Hw(r){return r.byteOffset%4===0}const Eu=64,q7=16,ax=2**32-1,r4=new Uint32Array;function Y7(r,e,t,i,s,n,c,l){const u=s.length,f=new Uint8Array(Eu),g=aa(f),m=Hw(s)&&Hw(n),N=m?aa(s):r4,A=m?aa(n):r4;for(let _=0;_<u;c++){if(r(e,t,i,g,c,l),c>=ax)throw new Error("arx: counter overflow");const E=Math.min(Eu,u-_);if(m&&E===Eu){const x=_/4;if(_%4!==0)throw new Error("arx: invalid block position");for(let S=0,D;S<q7;S++)D=x+S,A[D]=N[D]^g[S];_+=Eu;continue}for(let x=0,S;x<E;x++)S=_+x,n[S]=s[S]^f[x];_+=E}}function W7(r,e){const{allowShortKeys:t,extendNonceFn:i,counterLength:s,counterRight:n,rounds:c}=L7({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof r!="function")throw new Error("core must be a function");return Dy(s),Dy(c),XI(n),XI(t),(l,u,f,g,m=0)=>{hn(l),hn(u),hn(f);const N=f.length;if(g===void 0&&(g=new Uint8Array(N)),hn(g),Dy(m),m<0||m>=ax)throw new Error("arx: counter overflow");if(g.length<N)throw new Error(`arx: output (${g.length}) is shorter than data (${N})`);const A=[];let _=l.length,E,x;if(_===32)A.push(E=Fw(l)),x=B7;else if(_===16&&t)E=new Uint8Array(32),E.set(l),E.set(l,16),x=$7,A.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${_}`);Hw(u)||A.push(u=Fw(u));const S=aa(E);if(i){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(x,S,aa(u.subarray(0,16)),S),u=u.subarray(16)}const D=16-s;if(D!==u.length)throw new Error(`arx: nonce must be ${D} or 16 bytes`);if(D!==12){const j=new Uint8Array(12);j.set(u,n?0:12-u.length),u=j,A.push(u)}const C=aa(u);return Y7(r,x,S,C,f,g,m,c),Mc(...A),g}}const wi=(r,e)=>r[e++]&255|(r[e++]&255)<<8;let Q7=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Vw(e),hn(e,32);const t=wi(e,0),i=wi(e,2),s=wi(e,4),n=wi(e,6),c=wi(e,8),l=wi(e,10),u=wi(e,12),f=wi(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|i<<3)&8191,this.r[2]=(i>>>10|s<<6)&7939,this.r[3]=(s>>>7|n<<9)&8191,this.r[4]=(n>>>4|c<<12)&255,this.r[5]=c>>>1&8190,this.r[6]=(c>>>14|l<<2)&8191,this.r[7]=(l>>>11|u<<5)&8065,this.r[8]=(u>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let g=0;g<8;g++)this.pad[g]=wi(e,16+2*g)}process(e,t,i=!1){const s=i?0:2048,{h:n,r:c}=this,l=c[0],u=c[1],f=c[2],g=c[3],m=c[4],N=c[5],A=c[6],_=c[7],E=c[8],x=c[9],S=wi(e,t+0),D=wi(e,t+2),C=wi(e,t+4),j=wi(e,t+6),k=wi(e,t+8),P=wi(e,t+10),Q=wi(e,t+12),F=wi(e,t+14);let $=n[0]+(S&8191),Z=n[1]+((S>>>13|D<<3)&8191),M=n[2]+((D>>>10|C<<6)&8191),a=n[3]+((C>>>7|j<<9)&8191),h=n[4]+((j>>>4|k<<12)&8191),d=n[5]+(k>>>1&8191),p=n[6]+((k>>>14|P<<2)&8191),w=n[7]+((P>>>11|Q<<5)&8191),b=n[8]+((Q>>>8|F<<8)&8191),I=n[9]+(F>>>5|s),y=0,o=y+$*l+Z*(5*x)+M*(5*E)+a*(5*_)+h*(5*A);y=o>>>13,o&=8191,o+=d*(5*N)+p*(5*m)+w*(5*g)+b*(5*f)+I*(5*u),y+=o>>>13,o&=8191;let v=y+$*u+Z*l+M*(5*x)+a*(5*E)+h*(5*_);y=v>>>13,v&=8191,v+=d*(5*A)+p*(5*N)+w*(5*m)+b*(5*g)+I*(5*f),y+=v>>>13,v&=8191;let R=y+$*f+Z*u+M*l+a*(5*x)+h*(5*E);y=R>>>13,R&=8191,R+=d*(5*_)+p*(5*A)+w*(5*N)+b*(5*m)+I*(5*g),y+=R>>>13,R&=8191;let L=y+$*g+Z*f+M*u+a*l+h*(5*x);y=L>>>13,L&=8191,L+=d*(5*E)+p*(5*_)+w*(5*A)+b*(5*N)+I*(5*m),y+=L>>>13,L&=8191;let z=y+$*m+Z*g+M*f+a*u+h*l;y=z>>>13,z&=8191,z+=d*(5*x)+p*(5*E)+w*(5*_)+b*(5*A)+I*(5*N),y+=z>>>13,z&=8191;let q=y+$*N+Z*m+M*g+a*f+h*u;y=q>>>13,q&=8191,q+=d*l+p*(5*x)+w*(5*E)+b*(5*_)+I*(5*A),y+=q>>>13,q&=8191;let Y=y+$*A+Z*N+M*m+a*g+h*f;y=Y>>>13,Y&=8191,Y+=d*u+p*l+w*(5*x)+b*(5*E)+I*(5*_),y+=Y>>>13,Y&=8191;let T=y+$*_+Z*A+M*N+a*m+h*g;y=T>>>13,T&=8191,T+=d*f+p*u+w*l+b*(5*x)+I*(5*E),y+=T>>>13,T&=8191;let O=y+$*E+Z*_+M*A+a*N+h*m;y=O>>>13,O&=8191,O+=d*g+p*f+w*u+b*l+I*(5*x),y+=O>>>13,O&=8191;let B=y+$*x+Z*E+M*_+a*A+h*N;y=B>>>13,B&=8191,B+=d*m+p*g+w*f+b*u+I*l,y+=B>>>13,B&=8191,y=(y<<2)+y|0,y=y+o|0,o=y&8191,y=y>>>13,v+=y,n[0]=o,n[1]=v,n[2]=R,n[3]=L,n[4]=z,n[5]=q,n[6]=Y,n[7]=T,n[8]=O,n[9]=B}finalize(){const{h:e,pad:t}=this,i=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let l=2;l<10;l++)e[l]+=s,s=e[l]>>>13,e[l]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,i[0]=e[0]+5,s=i[0]>>>13,i[0]&=8191;for(let l=1;l<10;l++)i[l]=e[l]+s,s=i[l]>>>13,i[l]&=8191;i[9]-=8192;let n=(s^1)-1;for(let l=0;l<10;l++)i[l]&=n;n=~n;for(let l=0;l<10;l++)e[l]=e[l]&n|i[l];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let c=e[0]+t[0];e[0]=c&65535;for(let l=1;l<8;l++)c=(e[l]+t[l]|0)+(c>>>16)|0,e[l]=c&65535;Mc(i)}update(e){JI(this);const{buffer:t,blockLen:i}=this;e=Vw(e);const s=e.length;for(let n=0;n<s;){const c=Math.min(i-this.pos,s-n);if(c===i){for(;i<=s-n;n+=i)this.process(e,n);continue}t.set(e.subarray(n,n+c),this.pos),this.pos+=c,n+=c,this.pos===i&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){Mc(this.h,this.r,this.buffer,this.pad)}digestInto(e){JI(this),T7(e,this),this.finished=!0;const{buffer:t,h:i}=this;let{pos:s}=this;if(s){for(t[s++]=1;s<16;s++)t[s]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let c=0;c<8;c++)e[n++]=i[c]>>>0,e[n++]=i[c]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const i=e.slice(0,t);return this.destroy(),i}};function V7(r){const e=(i,s)=>r(s).update(Vw(i)).digest(),t=r(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=i=>r(i),e}const F7=V7(r=>new Q7(r));function H7(r,e,t,i,s,n=20){let c=r[0],l=r[1],u=r[2],f=r[3],g=e[0],m=e[1],N=e[2],A=e[3],_=e[4],E=e[5],x=e[6],S=e[7],D=s,C=t[0],j=t[1],k=t[2],P=c,Q=l,F=u,$=f,Z=g,M=m,a=N,h=A,d=_,p=E,w=x,b=S,I=D,y=C,o=j,v=k;for(let L=0;L<n;L+=2)P=P+Z|0,I=bt(I^P,16),d=d+I|0,Z=bt(Z^d,12),P=P+Z|0,I=bt(I^P,8),d=d+I|0,Z=bt(Z^d,7),Q=Q+M|0,y=bt(y^Q,16),p=p+y|0,M=bt(M^p,12),Q=Q+M|0,y=bt(y^Q,8),p=p+y|0,M=bt(M^p,7),F=F+a|0,o=bt(o^F,16),w=w+o|0,a=bt(a^w,12),F=F+a|0,o=bt(o^F,8),w=w+o|0,a=bt(a^w,7),$=$+h|0,v=bt(v^$,16),b=b+v|0,h=bt(h^b,12),$=$+h|0,v=bt(v^$,8),b=b+v|0,h=bt(h^b,7),P=P+M|0,v=bt(v^P,16),w=w+v|0,M=bt(M^w,12),P=P+M|0,v=bt(v^P,8),w=w+v|0,M=bt(M^w,7),Q=Q+a|0,I=bt(I^Q,16),b=b+I|0,a=bt(a^b,12),Q=Q+a|0,I=bt(I^Q,8),b=b+I|0,a=bt(a^b,7),F=F+h|0,y=bt(y^F,16),d=d+y|0,h=bt(h^d,12),F=F+h|0,y=bt(y^F,8),d=d+y|0,h=bt(h^d,7),$=$+Z|0,o=bt(o^$,16),p=p+o|0,Z=bt(Z^p,12),$=$+Z|0,o=bt(o^$,8),p=p+o|0,Z=bt(Z^p,7);let R=0;i[R++]=c+P|0,i[R++]=l+Q|0,i[R++]=u+F|0,i[R++]=f+$|0,i[R++]=g+Z|0,i[R++]=m+M|0,i[R++]=N+a|0,i[R++]=A+h|0,i[R++]=_+d|0,i[R++]=E+p|0,i[R++]=x+w|0,i[R++]=S+b|0,i[R++]=D+I|0,i[R++]=C+y|0,i[R++]=j+o|0,i[R++]=k+v|0}const Z7=W7(H7,{counterRight:!1,counterLength:4,allowShortKeys:!1}),G7=new Uint8Array(16),i4=(r,e)=>{r.update(e);const t=e.length%16;t&&r.update(G7.subarray(t))},K7=new Uint8Array(32);function n4(r,e,t,i,s){const n=r(e,t,K7),c=F7.create(n);s&&i4(c,s),i4(c,i);const l=new Uint8Array(16),u=j7(l);t4(u,0,BigInt(s?s.length:0),!0),t4(u,8,BigInt(i.length),!0),c.update(l);const f=c.digest();return Mc(n,l),f}const J7=r=>(e,t,i)=>({encrypt(s,n){const c=s.length;n=e4(c+16,n,!1),n.set(s);const l=n.subarray(0,-16);r(e,t,l,l,1);const u=n4(r,e,t,l,i);return n.set(u,c),Mc(u),n},decrypt(s,n){n=e4(s.length-16,n,!1);const c=s.subarray(0,-16),l=s.subarray(-16),u=n4(r,e,t,c,i);if(!z7(l,u))throw new Error("invalid tag");return n.set(s.subarray(0,-16)),r(e,t,n,n,1),Mc(u),n}}),ox=k7({blockSize:64,nonceLength:12,tagLength:16},J7(Z7));let cx=class extends Tv{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,xv(e);const i=bc(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,n=new Uint8Array(s);n.set(i.length>s?e.create().update(i).digest():i);for(let c=0;c<n.length;c++)n[c]^=54;this.iHash.update(n),this.oHash=e.create();for(let c=0;c<n.length;c++)n[c]^=106;this.oHash.update(n),n.fill(0)}update(e){return vc(this),this.iHash.update(e),this}digestInto(e){vc(this),hd(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:i,finished:s,destroyed:n,blockLen:c,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=n,e.blockLen=c,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Cv=(r,e,t)=>new cx(r,e).update(t).digest();Cv.create=(r,e)=>new cx(r,e);function X7(r,e,t){return xv(r),t===void 0&&(t=new Uint8Array(r.outputLen)),Cv(r,bc(t),bc(e))}const Sy=new Uint8Array([0]),s4=new Uint8Array;function e$(r,e,t,i=32){if(xv(r),Qh(i),i>255*r.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(i/r.outputLen);t===void 0&&(t=s4);const n=new Uint8Array(s*r.outputLen),c=Cv.create(r,e),l=c._cloneInto(),u=new Uint8Array(c.outputLen);for(let f=0;f<s;f++)Sy[0]=f+1,l.update(f===0?s4:u).update(t).update(Sy).digestInto(u),n.set(u,r.outputLen*f),c._cloneInto(l);return c.destroy(),l.destroy(),u.fill(0),Sy.fill(0),n.slice(0,i)}const t$=(r,e,t,i,s)=>e$(r,X7(r,e,t),i,s);function r$(r,e,t,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,i);const s=BigInt(32),n=BigInt(4294967295),c=Number(t>>s&n),l=Number(t&n),u=i?4:0,f=i?0:4;r.setUint32(e+u,c,i),r.setUint32(e+f,l,i)}function i$(r,e,t){return r&e^~r&t}function n$(r,e,t){return r&e^r&t^e&t}let s$=class extends Tv{constructor(e,t,i,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ey(this.buffer)}update(e){vc(this);const{view:t,buffer:i,blockLen:s}=this;e=bc(e);const n=e.length;for(let c=0;c<n;){const l=Math.min(s-this.pos,n-c);if(l===s){const u=Ey(e);for(;s<=n-c;c+=s)this.process(u,c);continue}i.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){vc(this),ZS(e,this),this.finished=!0;const{buffer:t,view:i,blockLen:s,isLE:n}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>s-c&&(this.process(i,0),c=0);for(let m=c;m<s;m++)t[m]=0;r$(i,s-8,BigInt(this.length*8),n),this.process(i,0);const l=Ey(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,g=this.get();if(f>g.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<f;m++)l.setUint32(4*m,g[m],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const i=e.slice(0,t);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:i,length:s,finished:n,destroyed:c,pos:l}=this;return e.length=s,e.pos=l,e.finished=n,e.destroyed=c,s%t&&e.buffer.set(i),e}};const a$=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ys=new Uint32Array(64);let o$=class extends s${constructor(){super(64,32,8,!1),this.A=qs[0]|0,this.B=qs[1]|0,this.C=qs[2]|0,this.D=qs[3]|0,this.E=qs[4]|0,this.F=qs[5]|0,this.G=qs[6]|0,this.H=qs[7]|0}get(){const{A:e,B:t,C:i,D:s,E:n,F:c,G:l,H:u}=this;return[e,t,i,s,n,c,l,u]}set(e,t,i,s,n,c,l,u){this.A=e|0,this.B=t|0,this.C=i|0,this.D=s|0,this.E=n|0,this.F=c|0,this.G=l|0,this.H=u|0}process(e,t){for(let m=0;m<16;m++,t+=4)Ys[m]=e.getUint32(t,!1);for(let m=16;m<64;m++){const N=Ys[m-15],A=Ys[m-2],_=es(N,7)^es(N,18)^N>>>3,E=es(A,17)^es(A,19)^A>>>10;Ys[m]=E+Ys[m-7]+_+Ys[m-16]|0}let{A:i,B:s,C:n,D:c,E:l,F:u,G:f,H:g}=this;for(let m=0;m<64;m++){const N=es(l,6)^es(l,11)^es(l,25),A=g+N+i$(l,u,f)+a$[m]+Ys[m]|0,_=(es(i,2)^es(i,13)^es(i,22))+n$(i,s,n)|0;g=f,f=u,u=l,l=c+A|0,c=n,n=s,s=i,i=A+_|0}i=i+this.A|0,s=s+this.B|0,n=n+this.C|0,c=c+this.D|0,l=l+this.E|0,u=u+this.F|0,f=f+this.G|0,g=g+this.H|0,this.set(i,s,n,c,l,u,f,g)}roundClean(){Ys.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const ld=GS(()=>new o$);const hx=BigInt(0);function Ov(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function lx(r){if(!Ov(r))throw new Error("Uint8Array expected")}const c$=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function h$(r){lx(r);let e="";for(let t=0;t<r.length;t++)e+=c$[r[t]];return e}function l$(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?hx:BigInt("0x"+r)}const Ns={_0:48,_9:57,A:65,F:70,a:97,f:102};function a4(r){if(r>=Ns._0&&r<=Ns._9)return r-Ns._0;if(r>=Ns.A&&r<=Ns.F)return r-(Ns.A-10);if(r>=Ns.a&&r<=Ns.f)return r-(Ns.a-10)}function ux(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(t);for(let s=0,n=0;s<t;s++,n+=2){const c=a4(r.charCodeAt(n)),l=a4(r.charCodeAt(n+1));if(c===void 0||l===void 0){const u=r[n]+r[n+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+n)}i[s]=c*16+l}return i}function o4(r){return lx(r),l$(h$(Uint8Array.from(r).reverse()))}function u$(r,e){return ux(r.toString(16).padStart(e*2,"0"))}function f$(r,e){return u$(r,e).reverse()}function c4(r,e,t){let i;if(typeof e=="string")try{i=ux(e)}catch(n){throw new Error(r+" must be hex string or Uint8Array, cause: "+n)}else if(Ov(e))i=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=i.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return i}const xy=r=>typeof r=="bigint"&&hx<=r;function d$(r,e,t){return xy(r)&&xy(e)&&xy(t)&&e<=r&&r<t}function h4(r,e,t,i){if(!d$(e,t,i))throw new Error("expected valid "+r+": "+t+" <= n < "+i+", got "+e)}const p$={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Ov(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function g$(r,e,t={}){const i=(s,n,c)=>{const l=p$[n];if(typeof l!="function")throw new Error("invalid validator function");const u=r[s];if(!(c&&u===void 0)&&!l(u,r))throw new Error("param "+String(s)+" is invalid. Expected "+n+", got "+u)};for(const[s,n]of Object.entries(e))i(s,n,!1);for(const[s,n]of Object.entries(t))i(s,n,!0);return r}const ac=BigInt(0),Du=BigInt(1);function fx(r,e){const t=r%e;return t>=ac?t:e+t}function y$(r,e,t){if(e<ac)throw new Error("invalid exponent, negatives unsupported");if(t<=ac)throw new Error("invalid modulus");if(t===Du)return ac;let i=Du;for(;e>ac;)e&Du&&(i=i*r%t),r=r*r%t,e>>=Du;return i}function Fn(r,e,t){let i=r;for(;e-- >ac;)i*=i,i%=t;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const bo=BigInt(0),Ty=BigInt(1);function w$(r){return g$(r,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...r})}function m$(r){const e=w$(r),{P:t}=e,i=D=>fx(D,t),s=e.montgomeryBits,n=Math.ceil(s/8),c=e.nByteLength,l=e.adjustScalarBytes||(D=>D),u=e.powPminus2||(D=>y$(D,t-BigInt(2),t));function f(D,C,j){const k=i(D*(C-j));return C=i(C-k),j=i(j+k),[C,j]}const g=(e.a-BigInt(2))/BigInt(4);function m(D,C){h4("u",D,bo,t),h4("scalar",C,bo,t);const j=C,k=D;let P=Ty,Q=bo,F=D,$=Ty,Z=bo,M;for(let h=BigInt(s-1);h>=bo;h--){const d=j>>h&Ty;Z^=d,M=f(Z,P,F),P=M[0],F=M[1],M=f(Z,Q,$),Q=M[0],$=M[1],Z=d;const p=P+Q,w=i(p*p),b=P-Q,I=i(b*b),y=w-I,o=F+$,v=F-$,R=i(v*p),L=i(o*b),z=R+L,q=R-L;F=i(z*z),$=i(k*i(q*q)),P=i(w*I),Q=i(y*(w+i(g*y)))}M=f(Z,P,F),P=M[0],F=M[1],M=f(Z,Q,$),Q=M[0],$=M[1];const a=u(Q);return i(P*a)}function N(D){return f$(i(D),n)}function A(D){const C=c4("u coordinate",D,n);return c===32&&(C[31]&=127),o4(C)}function _(D){const C=c4("scalar",D),j=C.length;if(j!==n&&j!==c){let k=""+n+" or "+c;throw new Error("invalid scalar, expected "+k+" bytes, got "+j)}return o4(l(C))}function E(D,C){const j=A(C),k=_(D),P=m(j,k);if(P===bo)throw new Error("invalid private or public key received");return N(P)}const x=N(e.Gu);function S(D){return E(D,x)}return{scalarMult:E,scalarMultBase:S,getSharedSecret:(D,C)=>E(D,C),getPublicKey:D=>S(D),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:x}}const Zw=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const v$=BigInt(1),l4=BigInt(2),b$=BigInt(3),M$=BigInt(5);BigInt(8);function N$(r){const e=BigInt(10),t=BigInt(20),i=BigInt(40),s=BigInt(80),n=Zw,c=r*r%n*r%n,l=Fn(c,l4,n)*c%n,u=Fn(l,v$,n)*r%n,f=Fn(u,M$,n)*u%n,g=Fn(f,e,n)*f%n,m=Fn(g,t,n)*g%n,N=Fn(m,i,n)*m%n,A=Fn(N,s,n)*N%n,_=Fn(A,s,n)*N%n,E=Fn(_,e,n)*f%n;return{pow_p_5_8:Fn(E,l4,n)*r%n,b2:c}}function I$(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Gw=m$({P:Zw,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:r=>{const e=Zw,{pow_p_5_8:t,b2:i}=N$(r);return fx(Fn(t,b$,e)*i,e)},adjustScalarBytes:I$,randomBytes:Pl}),dx="base10",Li="base16",ra="base64pad",nh="base64url",Rl="utf8",px=0,Cs=1,Ul=2,A$=0,u4=1,Oh=12,Lv=32;function _$(){const r=Gw.utils.randomPrivateKey(),e=Gw.getPublicKey(r);return{privateKey:Ct(r,Li),publicKey:Ct(e,Li)}}function Kw(){const r=Pl(Lv);return Ct(r,Li)}function E$(r,e){const t=Gw.getSharedSecret(Ir(r,Li),Ir(e,Li)),i=t$(ld,t,void 0,void 0,Lv);return Ct(i,Li)}function ff(r){const e=ld(Ir(r,Li));return Ct(e,Li)}function js(r){const e=ld(Ir(r,Rl));return Ct(e,Li)}function gx(r){return Ir(`${r}`,dx)}function Ha(r){return Number(Ct(r,dx))}function D$(r){const e=gx(typeof r.type<"u"?r.type:px);if(Ha(e)===Cs&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?Ir(r.senderPublicKey,Li):void 0,i=typeof r.iv<"u"?Ir(r.iv,Li):Pl(Oh),s=Ir(r.symKey,Li),n=ox(s,i).encrypt(Ir(r.message,Rl));return yx({type:e,sealed:n,iv:i,senderPublicKey:t,encoding:r.encoding})}function S$(r){const e=Ir(r.symKey,Li),{sealed:t,iv:i}=Fh(r),s=ox(e,i).decrypt(t);if(s===null)throw new Error("Failed to decrypt");return Ct(s,Rl)}function x$(r,e){const t=gx(Ul),i=Pl(Oh),s=Ir(r,Rl);return yx({type:t,sealed:s,iv:i,encoding:e})}function T$(r,e){const{sealed:t}=Fh({encoded:r,encoding:e});return Ct(t,Rl)}function yx(r){const{encoding:e=ra}=r;if(Ha(r.type)===Ul)return Ct(lc([r.type,r.sealed]),e);if(Ha(r.type)===Cs){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ct(lc([r.type,r.senderPublicKey,r.iv,r.sealed]),e)}return Ct(lc([r.type,r.iv,r.sealed]),e)}function Fh(r){const{encoded:e,encoding:t=ra}=r,i=Ir(e,t),s=i.slice(A$,u4),n=u4;if(Ha(s)===Cs){const f=n+Lv,g=f+Oh,m=i.slice(n,f),N=i.slice(f,g),A=i.slice(g);return{type:s,sealed:A,iv:N,senderPublicKey:m}}if(Ha(s)===Ul){const f=i.slice(n),g=Pl(Oh);return{type:s,sealed:f,iv:g}}const c=n+Oh,l=i.slice(n,c),u=i.slice(c);return{type:s,sealed:u,iv:l}}function j$(r,e){const t=Fh({encoded:r,encoding:e?.encoding});return wx({type:Ha(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Ct(t.senderPublicKey,Li):void 0,receiverPublicKey:e?.receiverPublicKey})}function wx(r){const e=r?.type||px;if(e===Cs){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function f4(r){return r.type===Cs&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function d4(r){return r.type===Ul}function C$(r){return new RS.ec("p256").keyFromPublic({x:We.from(r.x,"base64").toString("hex"),y:We.from(r.y,"base64").toString("hex")},"hex")}function O$(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");const t=e.length%4;return t>0&&(e+="=".repeat(4-t)),e}function L$(r){return We.from(O$(r),"base64")}function z$(r,e){const[t,i,s]=r.split("."),n=L$(s);if(n.length!==64)throw new Error("Invalid signature length");const c=n.slice(0,32).toString("hex"),l=n.slice(32,64).toString("hex"),u=`${t}.${i}`,f=ld(u),g=C$(e),m=Ct(f,Li);if(!g.verify(m,{r:c,s:l}))throw new Error("Invalid signature");return gc(r).payload}const k$="irn";function Of(r){return r?.relay||{protocol:k$}}function Ih(r){const e=US[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}function P$(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const n=s.replace(i,""),c=r[s];t[n]=c}}),t}function p4(r){if(!r.includes("wc:")){const f=HS(r);f!=null&&f.includes("wc:")&&(r=f)}r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),s=r.substring(e+1,t).split("@"),n=typeof t<"u"?r.substring(t):"",c=new URLSearchParams(n),l={};c.forEach((f,g)=>{l[g]=f});const u=typeof l.methods=="string"?l.methods.split(","):void 0;return{protocol:i,topic:R$(s[0]),version:parseInt(s[1],10),symKey:l.symKey,relay:P$(l),methods:u,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function R$(r){return r.startsWith("//")?r.substring(2):r}function U$(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(s=>{const n=s,c=t+e+n;r[n]&&(i[c]=r[n])}),i}function g4(r){const e=new URLSearchParams,t=U$(r.relay);Object.keys(t).sort().forEach(s=>{e.set(s,t[s])}),e.set("symKey",r.symKey),r.expiryTimestamp&&e.set("expiryTimestamp",r.expiryTimestamp.toString()),r.methods&&e.set("methods",r.methods.join(","));const i=e.toString();return`${r.protocol}:${r.topic}@${r.version}?${i}`}function Su(r,e,t){return`${r}?wc_ev=${t}&topic=${e}`}function qc(r){const e=[];return r.forEach(t=>{const[i,s]=t.split(":");e.push(`${i}:${s}`)}),e}function $$(r){const e=[];return Object.values(r).forEach(t=>{e.push(...qc(t.accounts))}),e}function B$(r,e){const t=[];return Object.values(r).forEach(i=>{qc(i.accounts).includes(e)&&t.push(...i.methods)}),t}function q$(r,e){const t=[];return Object.values(r).forEach(i=>{qc(i.accounts).includes(e)&&t.push(...i.events)}),t}function zv(r){return r.includes(":")}function Ah(r){return zv(r)?r.split(":")[0]:r}function Y$(r){const e={};return r?.forEach(t=>{var i;const[s,n]=t.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(t),(i=e[s].chains)==null||i.push(`${s}:${n}`)}),e}function y4(r,e){e=e.map(i=>i.replace("did:pkh:",""));const t=Y$(e);for(const[i,s]of Object.entries(t))s.methods?s.methods=lf(s.methods,r):s.methods=r,s.events=["chainChanged","accountsChanged"];return t}const W$={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Q$={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ue(r,e){const{message:t,code:i}=Q$[r];return{message:e?`${t} ${e}`:t,code:i}}function qt(r,e){const{message:t,code:i}=W$[r];return{message:e?`${t} ${e}`:t,code:i}}function Za(r,e){return!!Array.isArray(r)}function Hh(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Ui(r){return typeof r>"u"}function Rr(r,e){return e&&Ui(r)?!0:typeof r=="string"&&!!r.trim().length}function kv(r,e){return e&&Ui(r)?!0:typeof r=="number"&&!isNaN(r)}function V$(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),s=Object.keys(t);let n=!0;return Ua(s,i)?(i.forEach(c=>{const{accounts:l,methods:u,events:f}=r.namespaces[c],g=qc(l),m=t[c];(!Ua(BS(c,m),g)||!Ua(m.methods,u)||!Ua(m.events,f))&&(n=!1)}),n):!1}function Lf(r){return Rr(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function F$(r){if(Rr(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Lf(t)}}return!1}function H$(r){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(Rr(r,!1)){if(e(r))return!0;const t=HS(r);return e(t)}}catch{}return!1}function Z$(r){var e;return(e=r?.proposer)==null?void 0:e.publicKey}function G$(r){return r?.topic}function K$(r,e){let t=null;return Rr(r?.publicKey,!1)||(t=Ue("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function w4(r){let e=!0;return Za(r)?r.length&&(e=r.every(t=>Rr(t,!1))):e=!1,e}function J$(r,e,t){let i=null;return Za(e)&&e.length?e.forEach(s=>{i||Lf(s)||(i=qt("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Lf(r)||(i=qt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function X$(r,e,t){let i=null;return Object.entries(r).forEach(([s,n])=>{if(i)return;const c=J$(s,BS(s,n),`${e} ${t}`);c&&(i=c)}),i}function eB(r,e){let t=null;return Za(r)?r.forEach(i=>{t||F$(i)||(t=qt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=qt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function tB(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=eB(i?.accounts,`${e} namespace`);s&&(t=s)}),t}function rB(r,e){let t=null;return w4(r?.methods)?w4(r?.events)||(t=qt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=qt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function mx(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=rB(i,`${e}, namespace`);s&&(t=s)}),t}function iB(r,e,t){let i=null;if(r&&Hh(r)){const s=mx(r,e);s&&(i=s);const n=X$(r,e,t);n&&(i=n)}else i=Ue("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function jy(r,e){let t=null;if(r&&Hh(r)){const i=mx(r,e);i&&(t=i);const s=tB(r,e);s&&(t=s)}else t=Ue("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function vx(r){return Rr(r.protocol,!0)}function nB(r,e){let t=!1;return r?r&&Za(r)&&r.length&&r.forEach(i=>{t=vx(i)}):t=!0,t}function sB(r){return typeof r=="number"}function Zi(r){return typeof r<"u"&&typeof r!==null}function aB(r){return!(!r||typeof r!="object"||!r.code||!kv(r.code,!1)||!r.message||!Rr(r.message,!1))}function oB(r){return!(Ui(r)||!Rr(r.method,!1))}function cB(r){return!(Ui(r)||Ui(r.result)&&Ui(r.error)||!kv(r.id,!1)||!Rr(r.jsonrpc,!1))}function hB(r){return!(Ui(r)||!Rr(r.name,!1))}function m4(r,e){return!(!Lf(e)||!$$(r).includes(e))}function lB(r,e,t){return Rr(t,!1)?B$(r,e).includes(t):!1}function uB(r,e,t){return Rr(t,!1)?q$(r,e).includes(t):!1}function v4(r,e,t){let i=null;const s=fB(r),n=dB(e),c=Object.keys(s),l=Object.keys(n),u=b4(Object.keys(r)),f=b4(Object.keys(e)),g=u.filter(m=>!f.includes(m));return g.length&&(i=Ue("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${g.toString()}
      Received: ${Object.keys(e).toString()}`)),Ua(c,l)||(i=Ue("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(m=>{if(!m.includes(":")||i)return;const N=qc(e[m].accounts);N.includes(m)||(i=Ue("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${m}
        Required: ${m}
        Approved: ${N.toString()}`))}),c.forEach(m=>{i||(Ua(s[m].methods,n[m].methods)?Ua(s[m].events,n[m].events)||(i=Ue("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${m}`)):i=Ue("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${m}`))}),i}function fB(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(s=>{e[s]={methods:r[t].methods,events:r[t].events}})}),e}function b4(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function dB(r){const e={};return Object.keys(r).forEach(t=>{t.includes(":")?e[t]=r[t]:qc(r[t].accounts)?.forEach(s=>{e[s]={accounts:r[t].accounts.filter(n=>n.includes(`${s}:`)),methods:r[t].methods,events:r[t].events}})}),e}function pB(r,e){return kv(r,!1)&&r<=e.max&&r>=e.min}function M4(){const r=kl();return new Promise(e=>{switch(r){case un.browser:e(gB());break;case un.reactNative:e(yB());break;case un.node:e(wB());break;default:e(!0)}})}function gB(){return zl()&&navigator?.onLine}async function yB(){return ya()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo?(await globalThis?.NetInfo.fetch())?.isConnected:!0}function wB(){return!0}function mB(r){switch(kl()){case un.browser:vB(r);break;case un.reactNative:bB(r);break}}function vB(r){!ya()&&zl()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function bB(r){ya()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&globalThis?.NetInfo.addEventListener(e=>r(e?.isConnected))}const Cy={};let sh=class{static get(e){return Cy[e]}static set(e,t){Cy[e]=t}static delete(e){delete Cy[e]}};const MB="PARSE_ERROR",NB="INVALID_REQUEST",IB="METHOD_NOT_FOUND",AB="INVALID_PARAMS",bx="INTERNAL_ERROR",Pv="SERVER_ERROR",_B=[-32700,-32600,-32601,-32602,-32603],Lh={[MB]:{code:-32700,message:"Parse error"},[NB]:{code:-32600,message:"Invalid Request"},[IB]:{code:-32601,message:"Method not found"},[AB]:{code:-32602,message:"Invalid params"},[bx]:{code:-32603,message:"Internal error"},[Pv]:{code:-32e3,message:"Server error"}},Mx=Pv;function EB(r){return _B.includes(r)}function N4(r){return Object.keys(Lh).includes(r)?Lh[r]:Lh[Mx]}function DB(r){const e=Object.values(Lh).find(t=>t.code===r);return e||Lh[Mx]}function Nx(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var Oy={};var Jw=function(r,e){return Jw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Jw(r,e)};function SB(r,e){Jw(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Xw=function(){return Xw=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Xw.apply(this,arguments)};function xB(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t}function TB(r,e,t,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(r,e,t,i);else for(var l=r.length-1;l>=0;l--)(c=r[l])&&(n=(s<3?c(n):s>3?c(e,t,n):c(e,t))||n);return s>3&&n&&Object.defineProperty(e,t,n),n}function jB(r,e){return function(t,i){e(t,i,r)}}function CB(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function OB(r,e,t,i){function s(n){return n instanceof t?n:new t(function(c){c(n)})}return new(t||(t=Promise))(function(n,c){function l(g){try{f(i.next(g))}catch(m){c(m)}}function u(g){try{f(i.throw(g))}catch(m){c(m)}}function f(g){g.done?n(g.value):s(g.value).then(l,u)}f((i=i.apply(r,e||[])).next())})}function LB(r,e){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(g){return u([f,g])}}function u(f){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,s&&(n=f[0]&2?s.return:f[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,f[1])).done)return n;switch(s=0,n&&(f=[f[0]&2,n.value]),f[0]){case 0:case 1:n=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,s=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!n||f[1]>n[0]&&f[1]<n[3])){t.label=f[1];break}if(f[0]===6&&t.label<n[1]){t.label=n[1],n=f;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(f);break}n[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(g){f=[6,g],s=0}finally{i=n=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function zB(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function kB(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function em(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ix(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),s,n=[],c;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(l){c={error:l}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return n}function PB(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Ix(arguments[e]));return r}function RB(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),s=0,e=0;e<t;e++)for(var n=arguments[e],c=0,l=n.length;c<l;c++,s++)i[s]=n[c];return i}function Zh(r){return this instanceof Zh?(this.v=r,this):new Zh(r)}function UB(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),s,n=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(N){i[N]&&(s[N]=function(A){return new Promise(function(_,E){n.push([N,A,_,E])>1||l(N,A)})})}function l(N,A){try{u(i[N](A))}catch(_){m(n[0][3],_)}}function u(N){N.value instanceof Zh?Promise.resolve(N.value.v).then(f,g):m(n[0][2],N)}function f(N){l("next",N)}function g(N){l("throw",N)}function m(N,A){N(A),n.shift(),n.length&&l(n[0][0],n[0][1])}}function $B(r){var e,t;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,n){e[s]=r[s]?function(c){return(t=!t)?{value:Zh(r[s](c)),done:s==="return"}:n?n(c):c}:n}}function BB(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof em=="function"?em(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=r[n]&&function(c){return new Promise(function(l,u){c=r[n](c),s(l,u,c.done,c.value)})}}function s(n,c,l,u){Promise.resolve(u).then(function(f){n({value:f,done:l})},c)}}function qB(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function YB(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function WB(r){return r&&r.__esModule?r:{default:r}}function QB(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function VB(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const FB=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Xw},__asyncDelegator:$B,__asyncGenerator:UB,__asyncValues:BB,__await:Zh,__awaiter:OB,__classPrivateFieldGet:QB,__classPrivateFieldSet:VB,__createBinding:zB,__decorate:TB,__exportStar:kB,__extends:SB,__generator:LB,__importDefault:WB,__importStar:YB,__makeTemplateObject:qB,__metadata:CB,__param:jB,__read:Ix,__rest:xB,__spread:PB,__spreadArrays:RB,__values:em},Symbol.toStringTag,{value:"Module"})),HB=Gm(FB);var Is={},I4;function ZB(){if(I4)return Is;I4=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.isBrowserCryptoAvailable=Is.getSubtleCrypto=Is.getBrowerCrypto=void 0;function r(){return globalThis?.crypto||globalThis?.msCrypto||{}}Is.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}Is.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return Is.isBrowserCryptoAvailable=t,Is}var As={},A4;function GB(){if(A4)return As;A4=1,Object.defineProperty(As,"__esModule",{value:!0}),As.isBrowser=As.isNode=As.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}As.isReactNative=r;function e(){return typeof Be<"u"&&typeof Be.versions<"u"&&typeof Be.versions.node<"u"}As.isNode=e;function t(){return!r()&&!e()}return As.isBrowser=t,As}var _4;function KB(){return _4||(_4=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=HB;e.__exportStar(ZB(),r),e.__exportStar(GB(),r)})(Oy)),Oy}var JB=KB();function li(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function fn(r=6){return BigInt(li(r))}function $i(r,e,t){return{id:t||li(),jsonrpc:"2.0",method:r,params:e}}function wa(r,e){return{id:r,jsonrpc:"2.0",result:e}}function Yc(r,e,t){return{id:r,jsonrpc:"2.0",error:XB(e)}}function XB(r,e){return typeof r>"u"?N4(bx):(typeof r=="string"&&(r=Object.assign(Object.assign({},N4(Pv)),{message:r})),EB(r.code)&&(r=DB(r.code)),r)}let eq=class{},tq=class extends eq{constructor(){super()}},rq=class extends tq{constructor(e){super()}};const iq="^https?:",nq="^wss?:";function sq(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Ax(r,e){const t=sq(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function E4(r){return Ax(r,iq)}function D4(r){return Ax(r,nq)}function aq(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function _x(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function Wc(r){return _x(r)&&"method"in r}function no(r){return _x(r)&&(ri(r)||zr(r))}function ri(r){return"result"in r}function zr(r){return"error"in r}let _r=class extends rq{constructor(e){super(e),this.events=new ii.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict($i(e.method,e.params||[],e.id||fn().toString()),t)}async requestStrict(e,t){return new Promise(async(i,s)=>{if(!this.connection.connected)try{await this.open()}catch(n){s(n)}this.events.on(`${e.id}`,n=>{zr(n)?s(n.error):i(n.result)});try{await this.connection.send(e,t)}catch(n){s(n)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),no(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const oq=()=>typeof WebSocket<"u"?WebSocket:typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"?globalThis.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),cq=()=>typeof WebSocket<"u"||typeof globalThis<"u"&&typeof globalThis.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",S4=r=>r.split("?")[0],x4=10,hq=oq();let Ex=class{constructor(e){if(this.url=e,this.events=new ii.EventEmitter,this.registering=!1,!D4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(fs(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!D4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",n=>{this.resetMaxListeners(),s(n)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const s=JB.isReactNative()?void 0:{rejectUnauthorized:!aq(e)},n=new hq(e,[],s);cq()?n.onerror=c=>{const l=c;i(this.emitError(l.error))}:n.on("error",c=>{i(this.emitError(c))}),n.onopen=()=>{this.onOpen(n),t(n)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?zs(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),n=Yc(e,s);this.events.emit("payload",n)}parseError(e,t=this.url){return Nx(e,S4(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>x4&&this.events.setMaxListeners(x4)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${S4(this.url)}`));return this.events.emit("register_error",t),t}};var _h={exports:{}};_h.exports;var T4;function lq(){return T4||(T4=1,(function(r,e){var t=200,i="__lodash_hash_undefined__",s=1,n=2,c=9007199254740991,l="[object Arguments]",u="[object Array]",f="[object AsyncFunction]",g="[object Boolean]",m="[object Date]",N="[object Error]",A="[object Function]",_="[object GeneratorFunction]",E="[object Map]",x="[object Number]",S="[object Null]",D="[object Object]",C="[object Promise]",j="[object Proxy]",k="[object RegExp]",P="[object Set]",Q="[object String]",F="[object Symbol]",$="[object Undefined]",Z="[object WeakMap]",M="[object ArrayBuffer]",a="[object DataView]",h="[object Float32Array]",d="[object Float64Array]",p="[object Int8Array]",w="[object Int16Array]",b="[object Int32Array]",I="[object Uint8Array]",y="[object Uint8ClampedArray]",o="[object Uint16Array]",v="[object Uint32Array]",R=/[\\^$.*+?()[\]{}|]/g,L=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,q={};q[h]=q[d]=q[p]=q[w]=q[b]=q[I]=q[y]=q[o]=q[v]=!0,q[l]=q[u]=q[M]=q[g]=q[a]=q[m]=q[N]=q[A]=q[E]=q[x]=q[D]=q[k]=q[P]=q[Q]=q[Z]=!1;var Y=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,T=typeof self=="object"&&self&&self.Object===Object&&self,O=Y||T||Function("return this")(),B=e&&!e.nodeType&&e,W=B&&!0&&r&&!r.nodeType&&r,V=W&&W.exports===B,U=V&&Y.process,H=(function(){try{return U&&U.binding&&U.binding("util")}catch{}})(),de=H&&H.isTypedArray;function ee(G,te){for(var ze=-1,Ve=G==null?0:G.length,wr=0,rt=[];++ze<Ve;){var Lr=G[ze];te(Lr,ze,G)&&(rt[wr++]=Lr)}return rt}function J(G,te){for(var ze=-1,Ve=te.length,wr=G.length;++ze<Ve;)G[wr+ze]=te[ze];return G}function Qe(G,te){for(var ze=-1,Ve=G==null?0:G.length;++ze<Ve;)if(te(G[ze],ze,G))return!0;return!1}function oe(G,te){for(var ze=-1,Ve=Array(G);++ze<G;)Ve[ze]=te(ze);return Ve}function K(G){return function(te){return G(te)}}function et(G,te){return G.has(te)}function re(G,te){return G?.[te]}function ae(G){var te=-1,ze=Array(G.size);return G.forEach(function(Ve,wr){ze[++te]=[wr,Ve]}),ze}function Ke(G,te){return function(ze){return G(te(ze))}}function se(G){var te=-1,ze=Array(G.size);return G.forEach(function(Ve){ze[++te]=Ve}),ze}var ce=Array.prototype,Dt=Function.prototype,he=Object.prototype,le=O["__core-js_shared__"],Cr=Dt.toString,ue=he.hasOwnProperty,ve=(function(){var G=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""})(),Br=he.toString,_e=RegExp("^"+Cr.call(ue).replace(R,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=V?O.Buffer:void 0,Or=O.Symbol,Me=O.Uint8Array,Ne=he.propertyIsEnumerable,Vr=ce.splice,fe=Or?Or.toStringTag:void 0,Ie=Object.getOwnPropertySymbols,Fr=be?be.isBuffer:void 0,Ee=Ke(Object.keys,Object),ge=po(O,"DataView"),Er=po(O,"Map"),ye=po(O,"Promise"),we=po(O,"Set"),Pr=po(O,"WeakMap"),pe=po(Object,"create"),De=va(ge),Hr=va(Er),Se=va(ye),xe=va(we),Zr=va(Pr),Ae=Or?Or.prototype:void 0,me=Ae?Ae.valueOf:void 0;function tr(G){var te=-1,ze=G==null?0:G.length;for(this.clear();++te<ze;){var Ve=G[te];this.set(Ve[0],Ve[1])}}function Te(){this.__data__=pe?pe(null):{},this.size=0}function je(G){var te=this.has(G)&&delete this.__data__[G];return this.size-=te?1:0,te}function Gr(G){var te=this.__data__;if(pe){var ze=te[G];return ze===i?void 0:ze}return ue.call(te,G)?te[G]:void 0}function Ce(G){var te=this.__data__;return pe?te[G]!==void 0:ue.call(te,G)}function Oe(G,te){var ze=this.__data__;return this.size+=this.has(G)?0:1,ze[G]=pe&&te===void 0?i:te,this}tr.prototype.clear=Te,tr.prototype.delete=je,tr.prototype.get=Gr,tr.prototype.has=Ce,tr.prototype.set=Oe;function mt(G){var te=-1,ze=G==null?0:G.length;for(this.clear();++te<ze;){var Ve=G[te];this.set(Ve[0],Ve[1])}}function rr(){this.__data__=[],this.size=0}function ir(G){var te=this.__data__,ze=Kl(te,G);if(ze<0)return!1;var Ve=te.length-1;return ze==Ve?te.pop():Vr.call(te,ze,1),--this.size,!0}function nr(G){var te=this.__data__,ze=Kl(te,G);return ze<0?void 0:te[ze][1]}function sr(G){return Kl(this.__data__,G)>-1}function ar(G,te){var ze=this.__data__,Ve=Kl(ze,G);return Ve<0?(++this.size,ze.push([G,te])):ze[Ve][1]=te,this}mt.prototype.clear=rr,mt.prototype.delete=ir,mt.prototype.get=nr,mt.prototype.has=sr,mt.prototype.set=ar;function St(G){var te=-1,ze=G==null?0:G.length;for(this.clear();++te<ze;){var Ve=G[te];this.set(Ve[0],Ve[1])}}function or(){this.size=0,this.__data__={hash:new tr,map:new(Er||mt),string:new tr}}function cr(G){var te=Jl(this,G).delete(G);return this.size-=te?1:0,te}function hr(G){return Jl(this,G).get(G)}function lr(G){return Jl(this,G).has(G)}function ur(G,te){var ze=Jl(this,G),Ve=ze.size;return ze.set(G,te),this.size+=ze.size==Ve?0:1,this}St.prototype.clear=or,St.prototype.delete=cr,St.prototype.get=hr,St.prototype.has=lr,St.prototype.set=ur;function Ut(G){var te=-1,ze=G==null?0:G.length;for(this.__data__=new St;++te<ze;)this.add(G[te])}function fr(G){return this.__data__.set(G,i),this}function dr(G){return this.__data__.has(G)}Ut.prototype.add=Ut.prototype.push=fr,Ut.prototype.has=dr;function vt(G){var te=this.__data__=new mt(G);this.size=te.size}function pr(){this.__data__=new mt,this.size=0}function gr(G){var te=this.__data__,ze=te.delete(G);return this.size=te.size,ze}function yr(G){return this.__data__.get(G)}function uj(G){return this.__data__.has(G)}function fj(G,te){var ze=this.__data__;if(ze instanceof mt){var Ve=ze.__data__;if(!Er||Ve.length<t-1)return Ve.push([G,te]),this.size=++ze.size,this;ze=this.__data__=new St(Ve)}return ze.set(G,te),this.size=ze.size,this}vt.prototype.clear=pr,vt.prototype.delete=gr,vt.prototype.get=yr,vt.prototype.has=uj,vt.prototype.set=fj;function dj(G,te){var ze=Xl(G),Ve=!ze&&Sj(G),wr=!ze&&!Ve&&Sd(G),rt=!ze&&!Ve&&!wr&&v1(G),Lr=ze||Ve||wr||rt,ni=Lr?oe(G.length,String):[],gi=ni.length;for(var Dr in G)ue.call(G,Dr)&&!(Lr&&(Dr=="length"||wr&&(Dr=="offset"||Dr=="parent")||rt&&(Dr=="buffer"||Dr=="byteLength"||Dr=="byteOffset")||Ij(Dr,gi)))&&ni.push(Dr);return ni}function Kl(G,te){for(var ze=G.length;ze--;)if(g1(G[ze][0],te))return ze;return-1}function pj(G,te,ze){var Ve=te(G);return Xl(G)?Ve:J(Ve,ze(G))}function Zc(G){return G==null?G===void 0?$:S:fe&&fe in Object(G)?Mj(G):Dj(G)}function u1(G){return Gc(G)&&Zc(G)==l}function f1(G,te,ze,Ve,wr){return G===te?!0:G==null||te==null||!Gc(G)&&!Gc(te)?G!==G&&te!==te:gj(G,te,ze,Ve,f1,wr)}function gj(G,te,ze,Ve,wr,rt){var Lr=Xl(G),ni=Xl(te),gi=Lr?u:Rs(G),Dr=ni?u:Rs(te);gi=gi==l?D:gi,Dr=Dr==l?D:Dr;var tn=gi==D,Rn=Dr==D,xi=gi==Dr;if(xi&&Sd(G)){if(!Sd(te))return!1;Lr=!0,tn=!1}if(xi&&!tn)return rt||(rt=new vt),Lr||v1(G)?d1(G,te,ze,Ve,wr,rt):vj(G,te,gi,ze,Ve,wr,rt);if(!(ze&s)){var vn=tn&&ue.call(G,"__wrapped__"),bn=Rn&&ue.call(te,"__wrapped__");if(vn||bn){var Us=vn?G.value():G,ms=bn?te.value():te;return rt||(rt=new vt),wr(Us,ms,ze,Ve,rt)}}return xi?(rt||(rt=new vt),bj(G,te,ze,Ve,wr,rt)):!1}function yj(G){if(!m1(G)||_j(G))return!1;var te=y1(G)?_e:L;return te.test(va(G))}function wj(G){return Gc(G)&&w1(G.length)&&!!q[Zc(G)]}function mj(G){if(!Ej(G))return Ee(G);var te=[];for(var ze in Object(G))ue.call(G,ze)&&ze!="constructor"&&te.push(ze);return te}function d1(G,te,ze,Ve,wr,rt){var Lr=ze&s,ni=G.length,gi=te.length;if(ni!=gi&&!(Lr&&gi>ni))return!1;var Dr=rt.get(G);if(Dr&&rt.get(te))return Dr==te;var tn=-1,Rn=!0,xi=ze&n?new Ut:void 0;for(rt.set(G,te),rt.set(te,G);++tn<ni;){var vn=G[tn],bn=te[tn];if(Ve)var Us=Lr?Ve(bn,vn,tn,te,G,rt):Ve(vn,bn,tn,G,te,rt);if(Us!==void 0){if(Us)continue;Rn=!1;break}if(xi){if(!Qe(te,function(ms,ba){if(!et(xi,ba)&&(vn===ms||wr(vn,ms,ze,Ve,rt)))return xi.push(ba)})){Rn=!1;break}}else if(!(vn===bn||wr(vn,bn,ze,Ve,rt))){Rn=!1;break}}return rt.delete(G),rt.delete(te),Rn}function vj(G,te,ze,Ve,wr,rt,Lr){switch(ze){case a:if(G.byteLength!=te.byteLength||G.byteOffset!=te.byteOffset)return!1;G=G.buffer,te=te.buffer;case M:return!(G.byteLength!=te.byteLength||!rt(new Me(G),new Me(te)));case g:case m:case x:return g1(+G,+te);case N:return G.name==te.name&&G.message==te.message;case k:case Q:return G==te+"";case E:var ni=ae;case P:var gi=Ve&s;if(ni||(ni=se),G.size!=te.size&&!gi)return!1;var Dr=Lr.get(G);if(Dr)return Dr==te;Ve|=n,Lr.set(G,te);var tn=d1(ni(G),ni(te),Ve,wr,rt,Lr);return Lr.delete(G),tn;case F:if(me)return me.call(G)==me.call(te)}return!1}function bj(G,te,ze,Ve,wr,rt){var Lr=ze&s,ni=p1(G),gi=ni.length,Dr=p1(te),tn=Dr.length;if(gi!=tn&&!Lr)return!1;for(var Rn=gi;Rn--;){var xi=ni[Rn];if(!(Lr?xi in te:ue.call(te,xi)))return!1}var vn=rt.get(G);if(vn&&rt.get(te))return vn==te;var bn=!0;rt.set(G,te),rt.set(te,G);for(var Us=Lr;++Rn<gi;){xi=ni[Rn];var ms=G[xi],ba=te[xi];if(Ve)var b1=Lr?Ve(ba,ms,xi,te,G,rt):Ve(ms,ba,xi,G,te,rt);if(!(b1===void 0?ms===ba||wr(ms,ba,ze,Ve,rt):b1)){bn=!1;break}Us||(Us=xi=="constructor")}if(bn&&!Us){var eu=G.constructor,tu=te.constructor;eu!=tu&&"constructor"in G&&"constructor"in te&&!(typeof eu=="function"&&eu instanceof eu&&typeof tu=="function"&&tu instanceof tu)&&(bn=!1)}return rt.delete(G),rt.delete(te),bn}function p1(G){return pj(G,jj,Nj)}function Jl(G,te){var ze=G.__data__;return Aj(te)?ze[typeof te=="string"?"string":"hash"]:ze.map}function po(G,te){var ze=re(G,te);return yj(ze)?ze:void 0}function Mj(G){var te=ue.call(G,fe),ze=G[fe];try{G[fe]=void 0;var Ve=!0}catch{}var wr=Br.call(G);return Ve&&(te?G[fe]=ze:delete G[fe]),wr}var Nj=Ie?function(G){return G==null?[]:(G=Object(G),ee(Ie(G),function(te){return Ne.call(G,te)}))}:Cj,Rs=Zc;(ge&&Rs(new ge(new ArrayBuffer(1)))!=a||Er&&Rs(new Er)!=E||ye&&Rs(ye.resolve())!=C||we&&Rs(new we)!=P||Pr&&Rs(new Pr)!=Z)&&(Rs=function(G){var te=Zc(G),ze=te==D?G.constructor:void 0,Ve=ze?va(ze):"";if(Ve)switch(Ve){case De:return a;case Hr:return E;case Se:return C;case xe:return P;case Zr:return Z}return te});function Ij(G,te){return te=te??c,!!te&&(typeof G=="number"||z.test(G))&&G>-1&&G%1==0&&G<te}function Aj(G){var te=typeof G;return te=="string"||te=="number"||te=="symbol"||te=="boolean"?G!=="__proto__":G===null}function _j(G){return!!ve&&ve in G}function Ej(G){var te=G&&G.constructor,ze=typeof te=="function"&&te.prototype||he;return G===ze}function Dj(G){return Br.call(G)}function va(G){if(G!=null){try{return Cr.call(G)}catch{}try{return G+""}catch{}}return""}function g1(G,te){return G===te||G!==G&&te!==te}var Sj=u1((function(){return arguments})())?u1:function(G){return Gc(G)&&ue.call(G,"callee")&&!Ne.call(G,"callee")},Xl=Array.isArray;function xj(G){return G!=null&&w1(G.length)&&!y1(G)}var Sd=Fr||Oj;function Tj(G,te){return f1(G,te)}function y1(G){if(!m1(G))return!1;var te=Zc(G);return te==A||te==_||te==f||te==j}function w1(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=c}function m1(G){var te=typeof G;return G!=null&&(te=="object"||te=="function")}function Gc(G){return G!=null&&typeof G=="object"}var v1=de?K(de):wj;function jj(G){return xj(G)?dj(G):mj(G)}function Cj(){return[]}function Oj(){return!1}r.exports=Tj})(_h,_h.exports)),_h.exports}var uq=lq();const fq=Vf(uq),Dx="wc",Sx=2,tm="core",ds=`${Dx}@2:${tm}:`,dq={logger:"error"},pq={database:":memory:"},gq="crypto",j4="client_ed25519_seed",yq=ne.ONE_DAY,wq="keychain",mq="0.3",vq="messages",bq="0.3",C4=ne.SIX_HOURS,Mq="publisher",xx="irn",Nq="error",Tx="wss://relay.walletconnect.org",Iq="relayer",ui={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Aq="_subscription",An={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},_q=.1,rm="2.19.0",vr={link_mode:"link_mode",relay:"relay"},Eq="0.3",Dq="WALLETCONNECT_CLIENT_ID",O4="WALLETCONNECT_LINK_MODE_APPS",on={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Sq="subscription",xq="0.3",Tq=ne.FIVE_SECONDS*1e3,jq="pairing",Cq="0.3",ah={wc_pairingDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:0},res:{ttl:ne.ONE_DAY,prompt:!1,tag:0}}},za={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},$n={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Oq="history",Lq="0.3",zq="expirer",xn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},kq="0.3",Pq="verify-api",Rq="https://verify.walletconnect.com",jx="https://verify.walletconnect.org",zh=jx,Uq=`${zh}/v3`,$q=[Rq,jx],Bq="echo",qq="https://echo.walletconnect.com",cs={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},xs={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Bn={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ea={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Da={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},oh={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Yq=.1,Wq="event-client",Qq=86400,Vq="https://pulse.walletconnect.org/batch";function Fq(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),c=n.charCodeAt(0);if(t[c]!==255)throw new TypeError(n+" is ambiguous");t[c]=s}var l=r.length,u=r.charAt(0),f=Math.log(l)/Math.log(256),g=Math.log(256)/Math.log(l);function m(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var E=0,x=0,S=0,D=_.length;S!==D&&_[S]===0;)S++,E++;for(var C=(D-S)*g+1>>>0,j=new Uint8Array(C);S!==D;){for(var k=_[S],P=0,Q=C-1;(k!==0||P<x)&&Q!==-1;Q--,P++)k+=256*j[Q]>>>0,j[Q]=k%l>>>0,k=k/l>>>0;if(k!==0)throw new Error("Non-zero carry");x=P,S++}for(var F=C-x;F!==C&&j[F]===0;)F++;for(var $=u.repeat(E);F<C;++F)$+=r.charAt(j[F]);return $}function N(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var E=0;if(_[E]!==" "){for(var x=0,S=0;_[E]===u;)x++,E++;for(var D=(_.length-E)*f+1>>>0,C=new Uint8Array(D);_[E];){var j=t[_.charCodeAt(E)];if(j===255)return;for(var k=0,P=D-1;(j!==0||k<S)&&P!==-1;P--,k++)j+=l*C[P]>>>0,C[P]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");S=k,E++}if(_[E]!==" "){for(var Q=D-S;Q!==D&&C[Q]===0;)Q++;for(var F=new Uint8Array(x+(D-Q)),$=x;Q!==D;)F[$++]=C[Q++];return F}}}function A(_){var E=N(_);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:N,decode:A}}var Hq=Fq,Zq=Hq;const Cx=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Gq=r=>new TextEncoder().encode(r),Kq=r=>new TextDecoder().decode(r);let Jq=class{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Xq=class{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ox(this,e)}},eY=class{constructor(e){this.decoders=e}or(e){return Ox(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Ox=(r,e)=>new eY({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});let tY=class{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new Jq(e,t,i),this.decoder=new Xq(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ud=({name:r,prefix:e,encode:t,decode:i})=>new tY(r,e,t,i),$l=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=Zq(t,e);return ud({prefix:r,name:e,encode:i,decode:n=>Cx(s(n))})},rY=(r,e,t,i)=>{const s={};for(let g=0;g<e.length;++g)s[e[g]]=g;let n=r.length;for(;r[n-1]==="=";)--n;const c=new Uint8Array(n*t/8|0);let l=0,u=0,f=0;for(let g=0;g<n;++g){const m=s[r[g]];if(m===void 0)throw new SyntaxError(`Non-${i} character`);u=u<<t|m,l+=t,l>=8&&(l-=8,c[f++]=255&u>>l)}if(l>=t||255&u<<8-l)throw new SyntaxError("Unexpected end of data");return c},iY=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let n="",c=0,l=0;for(let u=0;u<r.length;++u)for(l=l<<8|r[u],c+=8;c>t;)c-=t,n+=e[s&l>>c];if(c&&(n+=e[s&l<<t-c]),i)for(;n.length*t&7;)n+="=";return n},Di=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>ud({prefix:e,name:r,encode(s){return iY(s,i,t)},decode(s){return rY(s,i,t,r)}}),nY=ud({prefix:"\0",name:"identity",encode:r=>Kq(r),decode:r=>Gq(r)});var sY=Object.freeze({__proto__:null,identity:nY});const aY=Di({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var oY=Object.freeze({__proto__:null,base2:aY});const cY=Di({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var hY=Object.freeze({__proto__:null,base8:cY});const lY=$l({prefix:"9",name:"base10",alphabet:"0123456789"});var uY=Object.freeze({__proto__:null,base10:lY});const fY=Di({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dY=Di({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var pY=Object.freeze({__proto__:null,base16:fY,base16upper:dY});const gY=Di({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yY=Di({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),wY=Di({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),mY=Di({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vY=Di({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),bY=Di({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),MY=Di({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),NY=Di({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),IY=Di({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var AY=Object.freeze({__proto__:null,base32:gY,base32upper:yY,base32pad:wY,base32padupper:mY,base32hex:vY,base32hexupper:bY,base32hexpad:MY,base32hexpadupper:NY,base32z:IY});const _Y=$l({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),EY=$l({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var DY=Object.freeze({__proto__:null,base36:_Y,base36upper:EY});const SY=$l({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xY=$l({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var TY=Object.freeze({__proto__:null,base58btc:SY,base58flickr:xY});const jY=Di({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),CY=Di({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),OY=Di({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),LY=Di({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var zY=Object.freeze({__proto__:null,base64:jY,base64pad:CY,base64url:OY,base64urlpad:LY});const Lx=Array.from(""),kY=Lx.reduce((r,e,t)=>(r[t]=e,r),[]),PY=Lx.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function RY(r){return r.reduce((e,t)=>(e+=kY[t],e),"")}function UY(r){const e=[];for(const t of r){const i=PY[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const $Y=ud({prefix:"",name:"base256emoji",encode:RY,decode:UY});var BY=Object.freeze({__proto__:null,base256emoji:$Y}),qY=zx,L4=128,YY=-128,WY=Math.pow(2,31);function zx(r,e,t){e=e||[],t=t||0;for(var i=t;r>=WY;)e[t++]=r&255|L4,r/=128;for(;r&YY;)e[t++]=r&255|L4,r>>>=7;return e[t]=r|0,zx.bytes=t-i+1,e}var QY=im,VY=128,z4=127;function im(r,i){var t=0,i=i||0,s=0,n=i,c,l=r.length;do{if(n>=l)throw im.bytes=0,new RangeError("Could not decode varint");c=r[n++],t+=s<28?(c&z4)<<s:(c&z4)*Math.pow(2,s),s+=7}while(c>=VY);return im.bytes=n-i,t}var FY=Math.pow(2,7),HY=Math.pow(2,14),ZY=Math.pow(2,21),GY=Math.pow(2,28),KY=Math.pow(2,35),JY=Math.pow(2,42),XY=Math.pow(2,49),eW=Math.pow(2,56),tW=Math.pow(2,63),rW=function(r){return r<FY?1:r<HY?2:r<ZY?3:r<GY?4:r<KY?5:r<JY?6:r<XY?7:r<eW?8:r<tW?9:10},iW={encode:qY,decode:QY,encodingLength:rW},kx=iW;const k4=(r,e,t=0)=>(kx.encode(r,e,t),e),P4=r=>kx.encodingLength(r),nm=(r,e)=>{const t=e.byteLength,i=P4(r),s=i+P4(t),n=new Uint8Array(s+t);return k4(r,n,0),k4(t,n,i),n.set(e,s),new nW(r,t,e,n)};let nW=class{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}};const Px=({name:r,code:e,encode:t})=>new sW(r,e,t);let sW=class{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?nm(this.code,t):t.then(i=>nm(this.code,i))}else throw Error("Unknown type, must be binary type")}};const Rx=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),aW=Px({name:"sha2-256",code:18,encode:Rx("SHA-256")}),oW=Px({name:"sha2-512",code:19,encode:Rx("SHA-512")});var cW=Object.freeze({__proto__:null,sha256:aW,sha512:oW});const Ux=0,hW="identity",$x=Cx,lW=r=>nm(Ux,$x(r)),uW={code:Ux,name:hW,encode:$x,digest:lW};var fW=Object.freeze({__proto__:null,identity:uW});new TextEncoder,new TextDecoder;const R4={...sY,...oY,...hY,...uY,...pY,...AY,...DY,...TY,...zY,...BY};({...cW,...fW});function dW(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Bx(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const U4=Bx("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Ly=Bx("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=dW(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),pW={utf8:U4,"utf-8":U4,hex:R4.base16,latin1:Ly,ascii:Ly,binary:Ly,...R4};function gW(r,e="utf8"){const t=pW[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var yW=Object.defineProperty,wW=(r,e,t)=>e in r?yW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ts=(r,e,t)=>wW(r,typeof e!="symbol"?e+"":e,t);let mW=class{constructor(e,t){this.core=e,this.logger=t,ts(this,"keychain",new Map),ts(this,"name",wq),ts(this,"version",mq),ts(this,"initialized",!1),ts(this,"storagePrefix",ds),ts(this,"init",async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}}),ts(this,"has",i=>(this.isInitialized(),this.keychain.has(i))),ts(this,"set",async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()}),ts(this,"get",i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:n}=Ue("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(n)}return s}),ts(this,"del",async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()}),this.core=e,this.logger=Ot(t,this.name)}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,WS(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QS(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}};var vW=Object.defineProperty,bW=(r,e,t)=>e in r?vW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mi=(r,e,t)=>bW(r,typeof e!="symbol"?e+"":e,t);let MW=class{constructor(e,t,i){this.core=e,this.logger=t,mi(this,"name",gq),mi(this,"keychain"),mi(this,"randomSessionIdentifier",Kw()),mi(this,"initialized",!1),mi(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),mi(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),mi(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),n=xf(s);return cv(n.publicKey)}),mi(this,"generateKeyPair",()=>{this.isInitialized();const s=_$();return this.setPrivateKey(s.publicKey,s.privateKey)}),mi(this,"signJWT",async s=>{this.isInitialized();const n=await this.getClientSeed(),c=xf(n),l=this.randomSessionIdentifier;return await fD(l,s,yq,c)}),mi(this,"generateSharedKey",(s,n,c)=>{this.isInitialized();const l=this.getPrivateKey(s),u=E$(l,n);return this.setSymKey(u,c)}),mi(this,"setSymKey",async(s,n)=>{this.isInitialized();const c=n||ff(s);return await this.keychain.set(c,s),c}),mi(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),mi(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),mi(this,"encode",async(s,n,c)=>{this.isInitialized();const l=wx(c),u=fs(n);if(d4(l))return x$(u,c?.encoding);if(f4(l)){const N=l.senderPublicKey,A=l.receiverPublicKey;s=await this.generateSharedKey(N,A)}const f=this.getSymKey(s),{type:g,senderPublicKey:m}=l;return D$({type:g,symKey:f,message:u,senderPublicKey:m,encoding:c?.encoding})}),mi(this,"decode",async(s,n,c)=>{this.isInitialized();const l=j$(n,c);if(d4(l)){const u=T$(n,c?.encoding);return zs(u)}if(f4(l)){const u=l.receiverPublicKey,f=l.senderPublicKey;s=await this.generateSharedKey(u,f)}try{const u=this.getSymKey(s),f=S$({symKey:u,encoded:n,encoding:c?.encoding});return zs(f)}catch(u){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}}),mi(this,"getPayloadType",(s,n=ra)=>{const c=Fh({encoded:s,encoding:n});return Ha(c.type)}),mi(this,"getPayloadSenderPublicKey",(s,n=ra)=>{const c=Fh({encoded:s,encoding:n});return c.senderPublicKey?Ct(c.senderPublicKey,Li):void 0}),this.core=e,this.logger=Ot(t,this.name),this.keychain=i||new mW(this.core,this.logger)}get context(){return Zt(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(j4)}catch{e=Kw(),await this.keychain.set(j4,e)}return gW(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}};var NW=Object.defineProperty,IW=(r,e,t)=>e in r?NW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,rs=(r,e,t)=>IW(r,typeof e!="symbol"?e+"":e,t);let AW=class extends zO{constructor(e,t){super(e,t),this.logger=e,this.core=t,rs(this,"messages",new Map),rs(this,"name",vq),rs(this,"version",bq),rs(this,"initialized",!1),rs(this,"storagePrefix",ds),rs(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}}),rs(this,"set",async(i,s)=>{this.isInitialized();const n=js(s);let c=this.messages.get(i);return typeof c>"u"&&(c={}),typeof c[n]<"u"||(c[n]=s,this.messages.set(i,c),await this.persist()),n}),rs(this,"get",i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s}),rs(this,"has",(i,s)=>{this.isInitialized();const n=this.get(i),c=js(s);return typeof n[c]<"u"}),rs(this,"del",async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()}),this.logger=Ot(e,this.name),this.core=t}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,WS(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QS(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}};var _W=Object.defineProperty,EW=Object.defineProperties,DW=Object.getOwnPropertyDescriptors,$4=Object.getOwnPropertySymbols,SW=Object.prototype.hasOwnProperty,xW=Object.prototype.propertyIsEnumerable,sm=(r,e,t)=>e in r?_W(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xu=(r,e)=>{for(var t in e||(e={}))SW.call(e,t)&&sm(r,t,e[t]);if($4)for(var t of $4(e))xW.call(e,t)&&sm(r,t,e[t]);return r},zy=(r,e)=>EW(r,DW(e)),qn=(r,e,t)=>sm(r,typeof e!="symbol"?e+"":e,t);let TW=class extends kO{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,qn(this,"events",new ii.EventEmitter),qn(this,"name",Mq),qn(this,"queue",new Map),qn(this,"publishTimeout",ne.toMiliseconds(ne.ONE_MINUTE)),qn(this,"initialPublishTimeout",ne.toMiliseconds(ne.ONE_SECOND*15)),qn(this,"needsTransportRestart",!1),qn(this,"publish",async(i,s,n)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}});const l=n?.ttl||C4,u=Of(n),f=n?.prompt||!1,g=n?.tag||0,m=n?.id||fn().toString(),N={topic:i,message:s,opts:{ttl:l,relay:u,prompt:f,tag:g,id:m,attestation:n?.attestation,tvf:n?.tvf}},A=`Failed to publish payload, please try again. id:${m} tag:${g}`;try{const _=new Promise(async E=>{const x=({id:D})=>{N.opts.id===D&&(this.removeRequestFromQueue(D),this.relayer.events.removeListener(ui.publish,x),E(N))};this.relayer.events.on(ui.publish,x);const S=ta(new Promise((D,C)=>{this.rpcPublish({topic:i,message:s,ttl:l,prompt:f,tag:g,id:m,attestation:n?.attestation,tvf:n?.tvf}).then(D).catch(j=>{this.logger.warn(j,j?.message),C(j)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${m} tag:${g}`);try{await S,this.events.removeListener(ui.publish,x)}catch(D){this.queue.set(m,zy(xu({},N),{attempt:1})),this.logger.warn(D,D?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:m,topic:i,message:s,opts:n}}),await ta(_,this.publishTimeout,A)}catch(_){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(_),(c=n?.internal)!=null&&c.throwOnFailedPublish)throw _}finally{this.queue.delete(m)}}),qn(this,"on",(i,s)=>{this.events.on(i,s)}),qn(this,"once",(i,s)=>{this.events.once(i,s)}),qn(this,"off",(i,s)=>{this.events.off(i,s)}),qn(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),this.relayer=e,this.logger=Ot(t,this.name),this.registerEventListeners()}get context(){return Zt(this.logger)}async rpcPublish(e){var t,i,s,n;const{topic:c,message:l,ttl:u=C4,prompt:f,tag:g,id:m,attestation:N,tvf:A}=e,_={method:Ih(Of().protocol).publish,params:xu({topic:c,message:l,ttl:u,prompt:f,tag:g,attestation:N},A),id:m};Ui((t=_.params)==null?void 0:t.prompt)&&((i=_.params)==null||delete i.prompt),Ui((s=_.params)==null?void 0:s.tag)&&((n=_.params)==null||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_});const E=await this.relayer.request(_);return this.relayer.events.emit(ui.publish,e),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{const i=e.attempt+1;this.queue.set(t,zy(xu({},e),{attempt:i}));const{topic:s,message:n,opts:c,attestation:l}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${i}`),await this.rpcPublish(zy(xu({},e),{topic:s,message:n,ttl:c.ttl,prompt:c.prompt,tag:c.tag,id:c.id,attestation:l,tvf:c.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Kn.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ui.connection_stalled);return}this.checkQueue()}),this.relayer.on(ui.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};var jW=Object.defineProperty,CW=(r,e,t)=>e in r?jW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Mo=(r,e,t)=>CW(r,typeof e!="symbol"?e+"":e,t);let OW=class{constructor(){Mo(this,"map",new Map),Mo(this,"set",(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])}),Mo(this,"get",e=>this.map.get(e)||[]),Mo(this,"exists",(e,t)=>this.get(e).includes(t)),Mo(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter(n=>n!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Mo(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}};var LW=Object.defineProperty,zW=Object.defineProperties,kW=Object.getOwnPropertyDescriptors,B4=Object.getOwnPropertySymbols,PW=Object.prototype.hasOwnProperty,RW=Object.prototype.propertyIsEnumerable,am=(r,e,t)=>e in r?LW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ch=(r,e)=>{for(var t in e||(e={}))PW.call(e,t)&&am(r,t,e[t]);if(B4)for(var t of B4(e))RW.call(e,t)&&am(r,t,e[t]);return r},ky=(r,e)=>zW(r,kW(e)),Bt=(r,e,t)=>am(r,typeof e!="symbol"?e+"":e,t);let UW=class extends UO{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Bt(this,"subscriptions",new Map),Bt(this,"topicMap",new OW),Bt(this,"events",new ii.EventEmitter),Bt(this,"name",Sq),Bt(this,"version",xq),Bt(this,"pending",new Map),Bt(this,"cached",[]),Bt(this,"initialized",!1),Bt(this,"pendingSubscriptionWatchLabel","pending_sub_watch_label"),Bt(this,"pollingInterval",20),Bt(this,"storagePrefix",ds),Bt(this,"subscribeTimeout",ne.toMiliseconds(ne.ONE_MINUTE)),Bt(this,"initialSubscribeTimeout",ne.toMiliseconds(ne.ONE_SECOND*15)),Bt(this,"clientId"),Bt(this,"batchSubscribeTopicsLimit",500),Bt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Bt(this,"subscribe",async(i,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const n=Of(s),c={topic:i,relay:n,transportType:s?.transportType};this.pending.set(i,c);const l=await this.rpcSubscribe(i,n,s);return typeof l=="string"&&(this.onSubscribe(l,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),l}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}}),Bt(this,"unsubscribe",async(i,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)}),Bt(this,"isSubscribed",async i=>{if(this.topics.includes(i))return!0;const s=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((n,c)=>{const l=new ne.Watch;l.start(s);const u=setInterval(()=>{(!this.pending.has(i)&&this.topics.includes(i)||this.cached.some(f=>f.topic===i))&&(clearInterval(u),l.stop(s),n(!0)),l.elapsed(s)>=Tq&&(clearInterval(u),l.stop(s),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)}),Bt(this,"on",(i,s)=>{this.events.on(i,s)}),Bt(this,"once",(i,s)=>{this.events.once(i,s)}),Bt(this,"off",(i,s)=>{this.events.off(i,s)}),Bt(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),Bt(this,"start",async()=>{await this.onConnect()}),Bt(this,"stop",async()=>{await this.onDisconnect()}),Bt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Bt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const i=[];this.pending.forEach(s=>{i.push(s)}),await this.batchSubscribe(i)}),Bt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Kn.pulse,async()=>{await this.checkPending()}),this.events.on(on.created,async i=>{const s=on.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:i}),await this.persist()}),this.events.on(on.deleted,async i=>{const s=on.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:i}),await this.persist()})}),this.relayer=e,this.logger=Ot(t,this.name),this.clientId=""}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=Of(i);await this.restartToComplete({topic:e,id:t,relay:s}),await this.rpcUnsubscribe(e,t,s);const n=qt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t,i){var s;(!i||i?.transportType===vr.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const n={method:Ih(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});const c=(s=i?.internal)==null?void 0:s.throwOnFailedPublish;try{const l=await this.getSubscriptionId(e);if(i?.transportType===vr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(g=>this.logger.warn(g))},ne.toMiliseconds(ne.ONE_SECOND)),l;const u=new Promise(async g=>{const m=N=>{N.topic===e&&(this.events.removeListener(on.created,m),g(N.id))};this.events.on(on.created,m);try{const N=await ta(new Promise((A,_)=>{this.relayer.request(n).catch(E=>{this.logger.warn(E,E?.message),_(E)}).then(A)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(on.created,m),g(N)}catch{}}),f=await ta(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!f&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return f?l:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ui.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:Ih(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await ta(new Promise(s=>{this.relayer.request(i).catch(n=>this.logger.warn(n)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ui.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,i={method:Ih(t.protocol).batchFetchMessages,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let s;try{s=await await ta(new Promise((n,c)=>{this.relayer.request(i).catch(l=>{this.logger.warn(l),c(l)}).then(n)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ui.connection_stalled)}return s}rpcUnsubscribe(e,t,i){const s={method:Ih(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,ky(ch({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,ch({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,ch({},t)),this.topicMap.set(t.topic,e),this.events.emit(on.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=Ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(on.deleted,ky(ch({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(on.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<t;i++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(on.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=Ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>ky(ch({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await UU(ne.toMiliseconds(ne.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return js(e+await this.getClientId())}};var $W=Object.defineProperty,q4=Object.getOwnPropertySymbols,BW=Object.prototype.hasOwnProperty,qW=Object.prototype.propertyIsEnumerable,om=(r,e,t)=>e in r?$W(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Y4=(r,e)=>{for(var t in e||(e={}))BW.call(e,t)&&om(r,t,e[t]);if(q4)for(var t of q4(e))qW.call(e,t)&&om(r,t,e[t]);return r},Mt=(r,e,t)=>om(r,typeof e!="symbol"?e+"":e,t);let YW=class extends PO{constructor(e){super(e),Mt(this,"protocol","wc"),Mt(this,"version",2),Mt(this,"core"),Mt(this,"logger"),Mt(this,"events",new ii.EventEmitter),Mt(this,"provider"),Mt(this,"messages"),Mt(this,"subscriber"),Mt(this,"publisher"),Mt(this,"name",Iq),Mt(this,"transportExplicitlyClosed",!1),Mt(this,"initialized",!1),Mt(this,"connectionAttemptInProgress",!1),Mt(this,"relayUrl"),Mt(this,"projectId"),Mt(this,"packageName"),Mt(this,"bundleId"),Mt(this,"hasExperiencedNetworkDisruption",!1),Mt(this,"pingTimeout"),Mt(this,"heartBeatTimeout",ne.toMiliseconds(ne.THIRTY_SECONDS+ne.FIVE_SECONDS)),Mt(this,"reconnectTimeout"),Mt(this,"connectPromise"),Mt(this,"reconnectInProgress",!1),Mt(this,"requestsInFlight",[]),Mt(this,"connectTimeout",ne.toMiliseconds(ne.ONE_SECOND*15)),Mt(this,"request",async t=>{var i,s;this.logger.debug("Publishing Request Payload");const n=t.id||fn().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:t.method,topic:(i=t.params)==null?void 0:i.topic},"relayer.request - publishing...");const c=`${n}:${((s=t.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(c);const l=await this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==c),l}catch(c){throw this.logger.debug(`Failed to Publish Request: ${n}`),c}}),Mt(this,"resetPingTimeout",()=>{if(jf())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,i,s;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null||s.terminate()},this.heartBeatTimeout)}catch(t){this.logger.warn(t,t?.message)}}),Mt(this,"onPayloadHandler",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),Mt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(ui.connect)}),Mt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Mt(this,"onProviderErrorHandler",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(ui.error,t),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Mt(this,"registerProviderListeners",()=>{this.provider.on(An.payload,this.onPayloadHandler),this.provider.on(An.connect,this.onConnectHandler),this.provider.on(An.disconnect,this.onDisconnectHandler),this.provider.on(An.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ot(e.logger,this.name):da(ks({level:e.logger||Nq})),this.messages=new AW(this.logger,e.core),this.subscriber=new UW(this,this.logger),this.publisher=new TW(this,this.logger),this.relayUrl=e?.relayUrl||Tx,this.projectId=e.projectId,AU()?this.packageName=UI():_U()&&(this.bundleId=UI()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return Zt(this.logger)}get connected(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===1||!1}get connecting(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:vr.relay})}async subscribe(e,t){var i,s,n;this.isInitialized(),(!(t!=null&&t.transportType)||t?.transportType==="relay")&&await this.toEstablishConnection();const c=typeof((i=t?.internal)==null?void 0:i.throwOnFailedPublish)>"u"?!0:(s=t?.internal)==null?void 0:s.throwOnFailedPublish;let l=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"",u;const f=g=>{g.topic===e&&(this.subscriber.off(on.created,f),u())};return await Promise.all([new Promise(g=>{u=g,this.subscriber.on(on.created,f)}),new Promise(async(g,m)=>{l=await this.subscriber.subscribe(e,Y4({internal:{throwOnFailedPublish:c}},t)).catch(N=>{c&&m(N)})||l,g()})]),l}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await ta(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,i)=>{await this.connect(e).then(t).catch(i).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await M4())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((i,s)=>i.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const i of t)try{await this.onMessageEvent(i)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:i}=e;if(!t.sessionExists){const s=Jr(ne.FIVE_MINUTES),n={topic:i,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,n)}this.events.emit(ui.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(i,s)=>{const n=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(An.disconnect,n),await ta(new Promise((c,l)=>{this.provider.connect().then(c).catch(l)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(c=>{s(c)}).finally(()=>{this.provider.off(An.disconnect,n),clearTimeout(this.reconnectTimeout)}),await new Promise(async(c,l)=>{const u=()=>{l(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(An.disconnect,u),await this.subscriber.start().then(c).catch(l).finally(()=>{this.provider.off(An.disconnect,u)})}),this.hasExperiencedNetworkDisruption=!1,i()})}catch(i){await this.subscriber.stop();const s=i;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(i=>setTimeout(i,ne.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,i,s,n;if(jf())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((n=(s=(i=this.provider)==null?void 0:i.connection)==null?void 0:s.socket)==null||n.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c,c?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new _r(new Ex(xU({sdkVersion:rm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.warn(`Ignoring message for non-subscribed topic ${t}`),!0;const s=this.messages.has(t,i);return s&&this.logger.warn(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Wc(e)){if(!e.method.endsWith(Aq))return;const t=e.params,{topic:i,message:s,publishedAt:n,attestation:c}=t.data,l={topic:i,message:s,publishedAt:n,transportType:vr.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Y4({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else no(e)&&this.events.emit(ui.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(ui.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=wa(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(An.payload,this.onPayloadHandler),this.provider.off(An.connect,this.onConnectHandler),this.provider.off(An.disconnect,this.onDisconnectHandler),this.provider.off(An.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await M4();mB(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(i=>this.logger.error(i,i?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(ui.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ne.toMiliseconds(_q)))))}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}};var WW=Object.defineProperty,W4=Object.getOwnPropertySymbols,QW=Object.prototype.hasOwnProperty,VW=Object.prototype.propertyIsEnumerable,cm=(r,e,t)=>e in r?WW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Q4=(r,e)=>{for(var t in e||(e={}))QW.call(e,t)&&cm(r,t,e[t]);if(W4)for(var t of W4(e))VW.call(e,t)&&cm(r,t,e[t]);return r},Yi=(r,e,t)=>cm(r,typeof e!="symbol"?e+"":e,t);let so=class extends RO{constructor(e,t,i,s=ds,n=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,Yi(this,"map",new Map),Yi(this,"version",Eq),Yi(this,"cached",[]),Yi(this,"initialized",!1),Yi(this,"getKey"),Yi(this,"storagePrefix",ds),Yi(this,"recentlyDeleted",[]),Yi(this,"recentlyDeletedLimit",200),Yi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Ui(c)?this.map.set(this.getKey(c),c):Z$(c)?this.map.set(c.id,c):G$(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),Yi(this,"set",async(c,l)=>{this.isInitialized(),this.map.has(c)?await this.update(c,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:l}),this.map.set(c,l),await this.persist())}),Yi(this,"get",c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c))),Yi(this,"getAll",c=>(this.isInitialized(),c?this.values.filter(l=>Object.keys(c).every(u=>fq(l[u],c[u]))):this.values)),Yi(this,"update",async(c,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:l});const u=Q4(Q4({},this.getData(c)),l);this.map.set(c,u),await this.persist()}),Yi(this,"delete",async(c,l)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:l}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())}),this.logger=Ot(t,this.name),this.storagePrefix=s,this.getKey=n}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=Ue("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:i}=Ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=Ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}};var FW=Object.defineProperty,HW=(r,e,t)=>e in r?FW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ft=(r,e,t)=>HW(r,typeof e!="symbol"?e+"":e,t);let ZW=class{constructor(e,t){this.core=e,this.logger=t,ft(this,"name",jq),ft(this,"version",Cq),ft(this,"events",new jc),ft(this,"pairings"),ft(this,"initialized",!1),ft(this,"storagePrefix",ds),ft(this,"ignoredPayloadTypes",[Cs]),ft(this,"registeredMethods",[]),ft(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),ft(this,"register",({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]}),ft(this,"create",async i=>{this.isInitialized();const s=Kw(),n=await this.core.crypto.setSymKey(s),c=Jr(ne.FIVE_MINUTES),l={protocol:xx},u={topic:n,expiry:c,relay:l,active:!1,methods:i?.methods},f=g4({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:s,relay:l,expiryTimestamp:c,methods:i?.methods});return this.events.emit(za.create,u),this.core.expirer.set(n,c),await this.pairings.set(n,u),await this.core.relayer.subscribe(n,{transportType:i?.transportType}),{topic:n,uri:f}}),ft(this,"pair",async i=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:i?.uri,trace:[cs.pairing_started]}});this.isValidPair(i,s);const{topic:n,symKey:c,relay:l,expiryTimestamp:u,methods:f}=p4(i.uri);s.props.properties.topic=n,s.addTrace(cs.pairing_uri_validation_success),s.addTrace(cs.pairing_uri_not_expired);let g;if(this.pairings.keys.includes(n)){if(g=this.pairings.get(n),s.addTrace(cs.existing_pairing),g.active)throw s.setError(xs.active_pairing_already_exists),new Error(`Pairing already exists: ${n}. Please try again with a new connection URI.`);s.addTrace(cs.pairing_not_expired)}const m=u||Jr(ne.FIVE_MINUTES),N={topic:n,relay:l,expiry:m,active:!1,methods:f};this.core.expirer.set(n,m),await this.pairings.set(n,N),s.addTrace(cs.store_new_pairing),i.activatePairing&&await this.activate({topic:n}),this.events.emit(za.create,N),s.addTrace(cs.emit_inactive_pairing),this.core.crypto.keychain.has(n)||await this.core.crypto.setSymKey(c,n),s.addTrace(cs.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(xs.no_internet_connection)}try{await this.core.relayer.subscribe(n,{relay:l})}catch(A){throw s.setError(xs.subscribe_pairing_topic_failure),A}return s.addTrace(cs.subscribe_pairing_topic_success),N}),ft(this,"activate",async({topic:i})=>{this.isInitialized();const s=Jr(ne.FIVE_MINUTES);this.core.expirer.set(i,s),await this.pairings.update(i,{active:!0,expiry:s})}),ft(this,"ping",async i=>{this.isInitialized(),await this.isValidPing(i),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=i;if(this.pairings.keys.includes(s)){const n=await this.sendRequest(s,"wc_pairingPing",{}),{done:c,resolve:l,reject:u}=ja();this.events.once(Tt("pairing_ping",n),({error:f})=>{f?u(f):l()}),await c()}}),ft(this,"updateExpiry",async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})}),ft(this,"updateMetadata",async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})}),ft(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),ft(this,"disconnect",async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",qt("USER_DISCONNECTED")),await this.deletePairing(s))}),ft(this,"formatUriFromPairing",i=>{this.isInitialized();const{topic:s,relay:n,expiry:c,methods:l}=i,u=this.core.crypto.keychain.get(s);return g4({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:u,relay:n,expiryTimestamp:c,methods:l})}),ft(this,"sendRequest",async(i,s,n)=>{const c=$i(s,n),l=await this.core.crypto.encode(i,c),u=ah[s].req;return this.core.history.set(i,c),this.core.relayer.publish(i,l,u),c.id}),ft(this,"sendResult",async(i,s,n)=>{const c=wa(i,n),l=await this.core.crypto.encode(s,c),u=(await this.core.history.get(s,i)).request.method,f=ah[u].res;await this.core.relayer.publish(s,l,f),await this.core.history.resolve(c)}),ft(this,"sendError",async(i,s,n)=>{const c=Yc(i,n),l=await this.core.crypto.encode(s,c),u=(await this.core.history.get(s,i)).request.method,f=ah[u]?ah[u].res:ah.unregistered_method.res;await this.core.relayer.publish(s,l,f),await this.core.history.resolve(c)}),ft(this,"deletePairing",async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,qt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])}),ft(this,"cleanup",async()=>{const i=this.pairings.getAll().filter(s=>Gs(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))}),ft(this,"onRelayEventRequest",i=>{const{topic:s,payload:n}=i;switch(n.method){case"wc_pairingPing":return this.onPairingPingRequest(s,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,n);default:return this.onUnknownRpcMethodRequest(s,n)}}),ft(this,"onRelayEventResponse",async i=>{const{topic:s,payload:n}=i,c=(await this.core.history.get(s,n.id)).request.method;return c==="wc_pairingPing"?this.onPairingPingResponse(s,n):this.onUnknownRpcMethodResponse(c)}),ft(this,"onPairingPingRequest",async(i,s)=>{const{id:n}=s;try{this.isValidPing({topic:i}),await this.sendResult(n,i,!0),this.events.emit(za.ping,{id:n,topic:i})}catch(c){await this.sendError(n,i,c),this.logger.error(c)}}),ft(this,"onPairingPingResponse",(i,s)=>{const{id:n}=s;setTimeout(()=>{ri(s)?this.events.emit(Tt("pairing_ping",n),{}):zr(s)&&this.events.emit(Tt("pairing_ping",n),{error:s.error})},500)}),ft(this,"onPairingDeleteRequest",async(i,s)=>{const{id:n}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(za.delete,{id:n,topic:i})}catch(c){await this.sendError(n,i,c),this.logger.error(c)}}),ft(this,"onUnknownRpcMethodRequest",async(i,s)=>{const{id:n,method:c}=s;try{if(this.registeredMethods.includes(c))return;const l=qt("WC_METHOD_UNSUPPORTED",c);await this.sendError(n,i,l),this.logger.error(l)}catch(l){await this.sendError(n,i,l),this.logger.error(l)}}),ft(this,"onUnknownRpcMethodResponse",i=>{this.registeredMethods.includes(i)||this.logger.error(qt("WC_METHOD_UNSUPPORTED",i))}),ft(this,"isValidPair",(i,s)=>{var n;if(!Zi(i)){const{message:l}=Ue("MISSING_OR_INVALID",`pair() params: ${i}`);throw s.setError(xs.malformed_pairing_uri),new Error(l)}if(!H$(i.uri)){const{message:l}=Ue("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw s.setError(xs.malformed_pairing_uri),new Error(l)}const c=p4(i?.uri);if(!((n=c?.relay)!=null&&n.protocol)){const{message:l}=Ue("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(xs.malformed_pairing_uri),new Error(l)}if(!(c!=null&&c.symKey)){const{message:l}=Ue("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(xs.malformed_pairing_uri),new Error(l)}if(c!=null&&c.expiryTimestamp&&ne.toMiliseconds(c?.expiryTimestamp)<Date.now()){s.setError(xs.pairing_expired);const{message:l}=Ue("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}}),ft(this,"isValidPing",async i=>{if(!Zi(i)){const{message:n}=Ue("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)}),ft(this,"isValidDisconnect",async i=>{if(!Zi(i)){const{message:n}=Ue("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)}),ft(this,"isValidPairingTopic",async i=>{if(!Rr(i,!1)){const{message:s}=Ue("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=Ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(Gs(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=Ue("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}}),this.core=e,this.logger=Ot(t,this.name),this.pairings=new so(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Zt(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ui.message,async e=>{const{topic:t,message:i,transportType:s}=e;if(!this.pairings.keys.includes(t)||s===vr.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const n=await this.core.crypto.decode(t,i);try{Wc(n)?(this.core.history.set(t,n),this.onRelayEventRequest({topic:t,payload:n})):no(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.core.history.delete(t,n.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(xn.expired,async e=>{const{topic:t}=FS(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(za.expire,{topic:t}))})}};var GW=Object.defineProperty,KW=(r,e,t)=>e in r?GW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vi=(r,e,t)=>KW(r,typeof e!="symbol"?e+"":e,t);let JW=class extends LO{constructor(e,t){super(e,t),this.core=e,this.logger=t,vi(this,"records",new Map),vi(this,"events",new ii.EventEmitter),vi(this,"name",Oq),vi(this,"version",Lq),vi(this,"cached",[]),vi(this,"initialized",!1),vi(this,"storagePrefix",ds),vi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),vi(this,"set",(i,s,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:n}),this.records.has(s.id))return;const c={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:n,expiry:Jr(ne.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit($n.created,c)}),vi(this,"resolve",async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=zr(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.persist(),this.events.emit($n.updated,s))}),vi(this,"get",async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s))),vi(this,"delete",(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(n=>{if(n.topic===i){if(typeof s<"u"&&n.id!==s)return;this.records.delete(n.id),this.events.emit($n.deleted,n)}}),this.persist()}),vi(this,"exists",async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1)),vi(this,"on",(i,s)=>{this.events.on(i,s)}),vi(this,"once",(i,s)=>{this.events.once(i,s)}),vi(this,"off",(i,s)=>{this.events.off(i,s)}),vi(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),this.logger=Ot(t,this.name)}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:$i(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=Ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit($n.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=Ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on($n.created,e=>{const t=$n.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on($n.updated,e=>{const t=$n.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on($n.deleted,e=>{const t=$n.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(Kn.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{ne.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit($n.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}};var XW=Object.defineProperty,eQ=(r,e,t)=>e in r?XW(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ti=(r,e,t)=>eQ(r,typeof e!="symbol"?e+"":e,t);let tQ=class extends $O{constructor(e,t){super(e,t),this.core=e,this.logger=t,Ti(this,"expirations",new Map),Ti(this,"events",new ii.EventEmitter),Ti(this,"name",zq),Ti(this,"version",kq),Ti(this,"cached",[]),Ti(this,"initialized",!1),Ti(this,"storagePrefix",ds),Ti(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ti(this,"has",i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Ti(this,"set",(i,s)=>{this.isInitialized();const n=this.formatTarget(i),c={target:n,expiry:s};this.expirations.set(n,c),this.checkExpiry(n,c),this.events.emit(xn.created,{target:n,expiration:c})}),Ti(this,"get",i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)}),Ti(this,"del",i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),n=this.getExpiration(s);this.expirations.delete(s),this.events.emit(xn.deleted,{target:s,expiration:n})}}),Ti(this,"on",(i,s)=>{this.events.on(i,s)}),Ti(this,"once",(i,s)=>{this.events.once(i,s)}),Ti(this,"off",(i,s)=>{this.events.off(i,s)}),Ti(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),this.logger=Ot(t,this.name)}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return TU(e);if(typeof e=="number")return jU(e);const{message:t}=Ue("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(xn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=Ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=Ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;ne.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(xn.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Kn.pulse,()=>this.checkExpirations()),this.events.on(xn.created,e=>{const t=xn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(xn.expired,e=>{const t=xn.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(xn.deleted,e=>{const t=xn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}};var rQ=Object.defineProperty,iQ=(r,e,t)=>e in r?rQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qr=(r,e,t)=>iQ(r,typeof e!="symbol"?e+"":e,t);let nQ=class extends BO{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,qr(this,"name",Pq),qr(this,"abortController"),qr(this,"isDevEnv"),qr(this,"verifyUrlV3",Uq),qr(this,"storagePrefix",ds),qr(this,"version",Sx),qr(this,"publicKey"),qr(this,"fetchPromise"),qr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ne.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),qr(this,"register",async s=>{if(!zl()||this.isDevEnv)return;const n=window.location.origin,{id:c,decryptedId:l}=s,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${n}&id=${c}&decryptedId=${l}`;try{const f=Ji.getDocument(),g=this.startAbortTimer(ne.ONE_SECOND*5),m=await new Promise((N,A)=>{const _=()=>{window.removeEventListener("message",x),f.body.removeChild(E),A("attestation aborted")};this.abortController.signal.addEventListener("abort",_);const E=f.createElement("iframe");E.src=u,E.style.display="none",E.addEventListener("error",_,{signal:this.abortController.signal});const x=S=>{if(S.data&&typeof S.data=="string")try{const D=JSON.parse(S.data);if(D.type==="verify_attestation"){if(gc(D.attestation).payload.id!==c)return;clearInterval(g),f.body.removeChild(E),this.abortController.signal.removeEventListener("abort",_),window.removeEventListener("message",x),N(D.attestation===null?"":D.attestation)}}catch(D){this.logger.warn(D)}};f.body.appendChild(E),window.addEventListener("message",x,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",m),m}catch(f){this.logger.warn(f)}return""}),qr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:n,hash:c,encryptedId:l}=s;if(n===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(n){if(gc(n).payload.id!==l)return;const f=await this.isValidJwtAttestation(n);if(f){if(!f.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return f}}if(!c)return;const u=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(c,u)}),qr(this,"fetchAttestation",async(s,n)=>{this.logger.debug(`resolving attestation: ${s} from url: ${n}`);const c=this.startAbortTimer(ne.ONE_SECOND*5),l=await fetch(`${n}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?await l.json():void 0}),qr(this,"getVerifyUrl",s=>{let n=s||zh;return $q.includes(n)||(this.logger.info(`verify url: ${n}, not included in trusted list, assigning default: ${zh}`),n=zh),n}),qr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ne.FIVE_SECONDS),n=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await n.json()}catch(s){this.logger.warn(s)}}),qr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),qr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),qr(this,"isValidJwtAttestation",async s=>{const n=await this.getPublicKey();try{if(n)return this.validateAttestation(s,n)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(s,c)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}}),qr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),qr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async n=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),n(c))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),qr(this,"validateAttestation",(s,n)=>{const c=z$(s,n.publicKey),l={hasExpired:ne.toMiliseconds(c.exp)<Date.now(),payload:c};if(l.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:l.payload.origin,isScam:l.payload.isScam,isVerified:l.payload.isVerified}}),this.logger=Ot(t,this.name),this.abortController=new AbortController,this.isDevEnv=Sv(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Zt(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ne.toMiliseconds(e))}};var sQ=Object.defineProperty,aQ=(r,e,t)=>e in r?sQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,V4=(r,e,t)=>aQ(r,typeof e!="symbol"?e+"":e,t);let oQ=class extends qO{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,V4(this,"context",Bq),V4(this,"registerDeviceToken",async i=>{const{clientId:s,token:n,notificationType:c,enableEncrypted:l=!1}=i,u=`${qq}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:c,token:n,always_raw:l})})}),this.logger=Ot(t,this.context)}};var cQ=Object.defineProperty,F4=Object.getOwnPropertySymbols,hQ=Object.prototype.hasOwnProperty,lQ=Object.prototype.propertyIsEnumerable,hm=(r,e,t)=>e in r?cQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hh=(r,e)=>{for(var t in e||(e={}))hQ.call(e,t)&&hm(r,t,e[t]);if(F4)for(var t of F4(e))lQ.call(e,t)&&hm(r,t,e[t]);return r},si=(r,e,t)=>hm(r,typeof e!="symbol"?e+"":e,t);let uQ=class extends YO{constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,si(this,"context",Wq),si(this,"storagePrefix",ds),si(this,"storageVersion",Yq),si(this,"events",new Map),si(this,"shouldPersist",!1),si(this,"init",async()=>{if(!Sv())try{const s={eventId:BI(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:YS(this.core.relayer.protocol,this.core.relayer.version,rm)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),si(this,"createEvent",s=>{const{event:n="ERROR",type:c="",properties:{topic:l,trace:u}}=s,f=BI(),g=this.core.projectId||"",m=Date.now(),N=hh({eventId:f,timestamp:m,props:{event:n,type:c,properties:{topic:l,trace:u}},bundleId:g,domain:this.getAppDomain()},this.setMethods(f));return this.telemetryEnabled&&(this.events.set(f,N),this.shouldPersist=!0),N}),si(this,"getEvent",s=>{const{eventId:n,topic:c}=s;if(n)return this.events.get(n);const l=Array.from(this.events.values()).find(u=>u.props.properties.topic===c);if(l)return hh(hh({},l),this.setMethods(l.eventId))}),si(this,"deleteEvent",s=>{const{eventId:n}=s;this.events.delete(n),this.shouldPersist=!0}),si(this,"setEventListeners",()=>{this.core.heartbeat.on(Kn.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ne.fromMiliseconds(Date.now())-ne.fromMiliseconds(s.timestamp)>Qq&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),si(this,"setMethods",s=>({addTrace:n=>this.addTrace(s,n),setError:n=>this.setError(s,n)})),si(this,"addTrace",(s,n)=>{const c=this.events.get(s);c&&(c.props.properties.trace.push(n),this.events.set(s,c),this.shouldPersist=!0)}),si(this,"setError",(s,n)=>{const c=this.events.get(s);c&&(c.props.type=n,c.timestamp=Date.now(),this.events.set(s,c),this.shouldPersist=!0)}),si(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),si(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(n=>{this.events.set(n.eventId,hh(hh({},n),this.setMethods(n.eventId)))})}catch(s){this.logger.warn(s)}}),si(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[n,c]of this.events)c.props.type&&s.push(c);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const n of s)this.events.delete(n.eventId),this.shouldPersist=!0}catch(n){this.logger.warn(n)}}),si(this,"sendEvent",async s=>{const n=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Vq}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${rm}${n}`,{method:"POST",body:JSON.stringify(s)})}),si(this,"getAppDomain",()=>qS().url),this.logger=Ot(t,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var fQ=Object.defineProperty,H4=Object.getOwnPropertySymbols,dQ=Object.prototype.hasOwnProperty,pQ=Object.prototype.propertyIsEnumerable,lm=(r,e,t)=>e in r?fQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Z4=(r,e)=>{for(var t in e||(e={}))dQ.call(e,t)&&lm(r,t,e[t]);if(H4)for(var t of H4(e))pQ.call(e,t)&&lm(r,t,e[t]);return r},Gt=(r,e,t)=>lm(r,typeof e!="symbol"?e+"":e,t);let gQ=class qx extends TO{constructor(e){var t;super(e),Gt(this,"protocol",Dx),Gt(this,"version",Sx),Gt(this,"name",tm),Gt(this,"relayUrl"),Gt(this,"projectId"),Gt(this,"customStoragePrefix"),Gt(this,"events",new ii.EventEmitter),Gt(this,"logger"),Gt(this,"heartbeat"),Gt(this,"relayer"),Gt(this,"crypto"),Gt(this,"storage"),Gt(this,"history"),Gt(this,"expirer"),Gt(this,"pairing"),Gt(this,"verify"),Gt(this,"echoClient"),Gt(this,"linkModeSupportedApps"),Gt(this,"eventClient"),Gt(this,"initialized",!1),Gt(this,"logChunkController"),Gt(this,"on",(c,l)=>this.events.on(c,l)),Gt(this,"once",(c,l)=>this.events.once(c,l)),Gt(this,"off",(c,l)=>this.events.off(c,l)),Gt(this,"removeListener",(c,l)=>this.events.removeListener(c,l)),Gt(this,"dispatchEnvelope",({topic:c,message:l,sessionExists:u})=>{if(!c||!l)return;const f={topic:c,message:l,publishedAt:Date.now(),transportType:vr.link_mode};this.relayer.onLinkMessageEvent(f,{sessionExists:u})}),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Tx,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=ks({level:typeof e?.logger=="string"&&e.logger?e.logger:dq.logger,name:tm}),{logger:s,chunkLoggerController:n}=ev({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=n,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var c,l;(c=this.logChunkController)!=null&&c.downloadLogsBlobInBrowser&&((l=this.logChunkController)==null||l.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ot(s,this.name),this.heartbeat=new OE,this.crypto=new MW(this,this.logger,e?.keychain),this.history=new JW(this,this.logger),this.expirer=new tQ(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new kE(Z4(Z4({},pq),e?.storageOptions)),this.relayer=new YW({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new ZW(this,this.logger),this.verify=new nQ(this,this.logger,this.storage),this.echoClient=new oQ(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new uQ(this,this.logger,e?.telemetryEnabled)}static async init(e){const t=new qx(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(Dq,i),t}get context(){return Zt(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(O4,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(O4)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const yQ=gQ;var wQ=Object.defineProperty,mQ=(r,e,t)=>e in r?wQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,G4=(r,e,t)=>mQ(r,typeof e!="symbol"?e+"":e,t);let vQ=class{constructor(e){this.opts=e,G4(this,"protocol","wc"),G4(this,"version",2)}},bQ=class{constructor(e){this.client=e}};const Yx="wc",Wx=2,Qx="client",Rv=`${Yx}@${Wx}:${Qx}:`,Py={name:Qx,logger:"error"},K4="WALLETCONNECT_DEEPLINK_CHOICE",MQ="proposal",J4="Proposal expired",NQ="session",No=ne.SEVEN_DAYS,IQ="engine",ai={wc_sessionPropose:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ne.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ne.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1119}}},Ry={min:ne.FIVE_MINUTES,max:ne.SEVEN_DAYS},is={idle:"IDLE",active:"ACTIVE"},X4={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},AQ="request",_Q=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],EQ="wc",DQ="auth",SQ="authKeys",xQ="pairingTopics",TQ="requests",fd=`${EQ}@${1.5}:${DQ}:`,df=`${fd}:PUB_KEY`;var jQ=Object.defineProperty,CQ=Object.defineProperties,OQ=Object.getOwnPropertyDescriptors,e3=Object.getOwnPropertySymbols,LQ=Object.prototype.hasOwnProperty,zQ=Object.prototype.propertyIsEnumerable,um=(r,e,t)=>e in r?jQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Sr=(r,e)=>{for(var t in e||(e={}))LQ.call(e,t)&&um(r,t,e[t]);if(e3)for(var t of e3(e))zQ.call(e,t)&&um(r,t,e[t]);return r},Wi=(r,e)=>CQ(r,OQ(e)),Pe=(r,e,t)=>um(r,typeof e!="symbol"?e+"":e,t);let kQ=class extends bQ{constructor(e){super(e),Pe(this,"name",IQ),Pe(this,"events",new jc),Pe(this,"initialized",!1),Pe(this,"requestQueue",{state:is.idle,queue:[]}),Pe(this,"sessionRequestQueue",{state:is.idle,queue:[]}),Pe(this,"requestQueueDelay",ne.ONE_SECOND),Pe(this,"expectedPairingMethodMap",new Map),Pe(this,"recentlyDeletedMap",new Map),Pe(this,"recentlyDeletedLimit",200),Pe(this,"relayMessageCache",[]),Pe(this,"pendingSessions",new Map),Pe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ai)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay)))}),Pe(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=Wi(Sr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:n,optionalNamespaces:c,sessionProperties:l,relays:u}=i;let f=s,g,m=!1;try{if(f){const k=this.client.core.pairing.pairings.get(f);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),m=k.active}}catch(k){throw this.client.logger.error(`connect() -> pairing.get(${f}) failed`),k}if(!f||!m){const{topic:k,uri:P}=await this.client.core.pairing.create();f=k,g=P}if(!f){const{message:k}=Ue("NO_MATCHING_KEY",`connect() pairing topic: ${f}`);throw new Error(k)}const N=await this.client.core.crypto.generateKeyPair(),A=ai.wc_sessionPropose.req.ttl||ne.FIVE_MINUTES,_=Jr(A),E=Wi(Sr({requiredNamespaces:n,optionalNamespaces:c,relays:u??[{protocol:xx}],proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:_,pairingTopic:f},l&&{sessionProperties:l}),{id:li()}),x=Tt("session_connect",E.id),{reject:S,resolve:D,done:C}=ja(A,J4),j=({id:k})=>{k===E.id&&(this.client.events.off("proposal_expire",j),this.pendingSessions.delete(E.id),this.events.emit(x,{error:{message:J4,code:0}}))};return this.client.events.on("proposal_expire",j),this.events.once(x,({error:k,session:P})=>{this.client.events.off("proposal_expire",j),k?S(k):P&&D(P)}),await this.sendRequest({topic:f,method:"wc_sessionPropose",params:E,throwOnFailedPublish:!0,clientRpcId:E.id}),await this.setProposal(E.id,E),{uri:g,approval:C}}),Pe(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(i){throw this.client.logger.error("pair() failed"),i}}),Pe(this,"approve",async t=>{var i,s,n;const c=this.client.core.eventClient.createEvent({properties:{topic:(i=t?.id)==null?void 0:i.toString(),trace:[Bn.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(F){throw c.setError(Ea.no_internet_connection),F}try{await this.isValidProposalId(t?.id)}catch(F){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),c.setError(Ea.proposal_not_found),F}try{await this.isValidApprove(t)}catch(F){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(Ea.session_approve_namespace_validation_failure),F}const{id:l,relayProtocol:u,namespaces:f,sessionProperties:g,sessionConfig:m}=t,N=this.client.proposal.get(l);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:A,proposer:_,requiredNamespaces:E,optionalNamespaces:x}=N;let S=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:A});S||(S=(n=this.client.core.eventClient)==null?void 0:n.createEvent({type:Bn.session_approve_started,properties:{topic:A,trace:[Bn.session_approve_started,Bn.session_namespaces_validation_success]}}));const D=await this.client.core.crypto.generateKeyPair(),C=_.publicKey,j=await this.client.core.crypto.generateSharedKey(D,C),k=Sr(Sr({relay:{protocol:u??"irn"},namespaces:f,controller:{publicKey:D,metadata:this.client.metadata},expiry:Jr(No)},g&&{sessionProperties:g}),m&&{sessionConfig:m}),P=vr.relay;S.addTrace(Bn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(j,{transportType:P})}catch(F){throw S.setError(Ea.subscribe_session_topic_failure),F}S.addTrace(Bn.subscribe_session_topic_success);const Q=Wi(Sr({},k),{topic:j,requiredNamespaces:E,optionalNamespaces:x,pairingTopic:A,acknowledged:!1,self:k.controller,peer:{publicKey:_.publicKey,metadata:_.metadata},controller:D,transportType:vr.relay});await this.client.session.set(j,Q),S.addTrace(Bn.store_session);try{S.addTrace(Bn.publishing_session_settle),await this.sendRequest({topic:j,method:"wc_sessionSettle",params:k,throwOnFailedPublish:!0}).catch(F=>{throw S?.setError(Ea.session_settle_publish_failure),F}),S.addTrace(Bn.session_settle_publish_success),S.addTrace(Bn.publishing_session_approve),await this.sendResult({id:l,topic:A,result:{relay:{protocol:u??"irn"},responderPublicKey:D},throwOnFailedPublish:!0}).catch(F=>{throw S?.setError(Ea.session_approve_publish_failure),F}),S.addTrace(Bn.session_approve_publish_success)}catch(F){throw this.client.logger.error(F),this.client.session.delete(j,qt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(j),F}return this.client.core.eventClient.deleteEvent({eventId:S.eventId}),await this.client.core.pairing.updateMetadata({topic:A,metadata:_.metadata}),await this.client.proposal.delete(l,qt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:A}),await this.setExpiry(j,Jr(No)),{topic:j,acknowledged:()=>Promise.resolve(this.client.session.get(j))}}),Pe(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:i,reason:s}=t;let n;try{n=this.client.proposal.get(i).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),c}n&&(await this.sendError({id:i,topic:n,error:s,rpcOpts:ai.wc_sessionPropose.reject}),await this.client.proposal.delete(i,qt("USER_DISCONNECTED")))}),Pe(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(m){throw this.client.logger.error("update() -> isValidUpdate() failed"),m}const{topic:i,namespaces:s}=t,{done:n,resolve:c,reject:l}=ja(),u=li(),f=fn().toString(),g=this.client.session.get(i).namespaces;return this.events.once(Tt("session_update",u),({error:m})=>{m?l(m):c()}),await this.client.session.update(i,{namespaces:s}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:f}).catch(m=>{this.client.logger.error(m),this.client.session.update(i,{namespaces:g}),l(m)}),{acknowledged:n}}),Pe(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:i}=t,s=li(),{done:n,resolve:c,reject:l}=ja();return this.events.once(Tt("session_extend",s),({error:u})=>{u?l(u):c()}),await this.setExpiry(i,Jr(No)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(u=>{l(u)}),{acknowledged:n}}),Pe(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(S){throw this.client.logger.error("request() -> isValidRequest() failed"),S}const{chainId:i,request:s,topic:n,expiry:c=ai.wc_sessionRequest.req.ttl}=t,l=this.client.session.get(n);l?.transportType===vr.relay&&await this.confirmOnlineStateOrThrow();const u=li(),f=fn().toString(),{done:g,resolve:m,reject:N}=ja(c,"Request expired. Please try again.");this.events.once(Tt("session_request",u),({error:S,result:D})=>{S?N(S):m(D)});const A="wc_sessionRequest",_=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);if(_)return await this.sendRequest({clientRpcId:u,relayRpcId:f,topic:n,method:A,params:{request:Wi(Sr({},s),{expiryTimestamp:Jr(c)}),chainId:i},expiry:c,throwOnFailedPublish:!0,appLink:_}).catch(S=>N(S)),this.client.events.emit("session_request_sent",{topic:n,request:s,chainId:i,id:u}),await g();const E={request:Wi(Sr({},s),{expiryTimestamp:Jr(c)}),chainId:i},x=this.shouldSetTVF(A,E);return await Promise.all([new Promise(async S=>{await this.sendRequest(Sr({clientRpcId:u,relayRpcId:f,topic:n,method:A,params:E,expiry:c,throwOnFailedPublish:!0},x&&{tvf:this.getTVFParams(u,E)})).catch(D=>N(D)),this.client.events.emit("session_request_sent",{topic:n,request:s,chainId:i,id:u}),S()}),new Promise(async S=>{var D;if(!((D=l.sessionConfig)!=null&&D.disableDeepLink)){const C=await zU(this.client.core.storage,K4);await CU({id:u,topic:n,wcDeepLink:C})}S()}),g()]).then(S=>S[2])}),Pe(this,"respond",async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:s}=t,{id:n}=s,c=this.client.session.get(i);c.transportType===vr.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);ri(s)?await this.sendResult({id:n,topic:i,result:s.result,throwOnFailedPublish:!0,appLink:l}):zr(s)&&await this.sendError({id:n,topic:i,error:s.error,appLink:l}),this.cleanupAfterResponse(t)}),Pe(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=li(),n=fn().toString(),{done:c,resolve:l,reject:u}=ja();this.events.once(Tt("session_ping",s),({error:f})=>{f?u(f):l()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:n}),c()])}else this.client.core.pairing.pairings.keys.includes(i)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:i}))}),Pe(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:i,event:s,chainId:n}=t,c=fn().toString(),l=li();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:s,chainId:n},throwOnFailedPublish:!0,relayRpcId:c,clientRpcId:l})}),Pe(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:qt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:s}=Ue("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(s)}}),Pe(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(i=>V$(i,t)))),Pe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Pe(this,"authenticate",async(t,i)=>{var s;this.isInitialized(),this.isValidAuthenticate(t);const n=i&&this.client.core.linkModeSupportedApps.includes(i)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),c=n?vr.link_mode:vr.relay;c===vr.relay&&await this.confirmOnlineStateOrThrow();const{chains:l,statement:u="",uri:f,domain:g,nonce:m,type:N,exp:A,nbf:_,methods:E=[],expiry:x}=t,S=[...t.resources||[]],{topic:D,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:D,uri:C}});const j=await this.client.core.crypto.generateKeyPair(),k=ff(j);if(await Promise.all([this.client.auth.authKeys.set(df,{responseTopic:k,publicKey:j}),this.client.auth.pairingTopics.set(k,{topic:k,pairingTopic:D})]),await this.client.core.relayer.subscribe(k,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${D}`),E.length>0){const{namespace:y}=uc(l[0]);let o=_7(y,"request",E);uf(S)&&(o=D7(o,S.pop())),S.push(o)}const P=x&&x>ai.wc_sessionAuthenticate.req.ttl?x:ai.wc_sessionAuthenticate.req.ttl,Q={authPayload:{type:N??"caip122",chains:l,statement:u,aud:f,domain:g,version:"1",nonce:m,iat:new Date().toISOString(),exp:A,nbf:_,resources:S},requester:{publicKey:j,metadata:this.client.metadata},expiryTimestamp:Jr(P)},F={eip155:{chains:l,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},$={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:D,proposer:{publicKey:j,metadata:this.client.metadata},expiryTimestamp:Jr(ai.wc_sessionPropose.req.ttl),id:li()},{done:Z,resolve:M,reject:a}=ja(P,"Request expired"),h=li(),d=Tt("session_connect",$.id),p=Tt("session_request",h),w=async({error:y,session:o})=>{this.events.off(p,b),y?a(y):o&&M({session:o})},b=async y=>{var o,v,R;if(await this.deletePendingAuthRequest(h,{message:"fulfilled",code:0}),y.error){const B=qt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return y.error.code===B.code?void 0:(this.events.off(d,w),a(y.error.message))}await this.deleteProposal($.id),this.events.off(d,w);const{cacaos:L,responder:z}=y.result,q=[],Y=[];for(const B of L){await ZI({cacao:B,projectId:this.client.core.projectId})||(this.client.logger.error(B,"Signature verification failed"),a(qt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:W}=B,V=uf(W.resources),U=[Qw(W.iss)],H=Cf(W.iss);if(V){const de=GI(V),ee=KI(V);q.push(...de),U.push(...ee)}for(const de of U)Y.push(`${de}:${H}`)}const T=await this.client.core.crypto.generateSharedKey(j,z.publicKey);let O;q.length>0&&(O={topic:T,acknowledged:!0,self:{publicKey:j,metadata:this.client.metadata},peer:z,controller:z.publicKey,expiry:Jr(No),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:D,namespaces:y4([...new Set(q)],[...new Set(Y)]),transportType:c},await this.client.core.relayer.subscribe(T,{transportType:c}),await this.client.session.set(T,O),D&&await this.client.core.pairing.updateMetadata({topic:D,metadata:z.metadata}),O=this.client.session.get(T)),(o=this.client.metadata.redirect)!=null&&o.linkMode&&(v=z.metadata.redirect)!=null&&v.linkMode&&(R=z.metadata.redirect)!=null&&R.universal&&i&&(this.client.core.addLinkModeSupportedApp(z.metadata.redirect.universal),this.client.session.update(T,{transportType:vr.link_mode})),M({auths:L,session:O})};this.events.once(d,w),this.events.once(p,b);let I;try{if(n){const y=$i("wc_sessionAuthenticate",Q,h);this.client.core.history.set(D,y);const o=await this.client.core.crypto.encode("",y,{type:Ul,encoding:nh});I=Su(i,D,o)}else await Promise.all([this.sendRequest({topic:D,method:"wc_sessionAuthenticate",params:Q,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:h}),this.sendRequest({topic:D,method:"wc_sessionPropose",params:$,expiry:ai.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:$.id})])}catch(y){throw this.events.off(d,w),this.events.off(p,b),y}return await this.setProposal($.id,$),await this.setAuthRequest(h,{request:Wi(Sr({},Q),{verifyContext:{}}),pairingTopic:D,transportType:c}),{uri:I??C,response:Z}}),Pe(this,"approveSessionAuthenticate",async t=>{const{id:i,auths:s}=t,n=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[Da.authenticated_session_approve_started]}});try{this.isInitialized()}catch(x){throw n.setError(oh.no_internet_connection),x}const c=this.getPendingAuthRequest(i);if(!c)throw n.setError(oh.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const l=c.transportType||vr.relay;l===vr.relay&&await this.confirmOnlineStateOrThrow();const u=c.requester.publicKey,f=await this.client.core.crypto.generateKeyPair(),g=ff(u),m={type:Cs,receiverPublicKey:u,senderPublicKey:f},N=[],A=[];for(const x of s){if(!await ZI({cacao:x,projectId:this.client.core.projectId})){n.setError(oh.invalid_cacao);const k=qt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:g,error:k,encodeOpts:m}),new Error(k.message)}n.addTrace(Da.cacaos_verified);const{p:S}=x,D=uf(S.resources),C=[Qw(S.iss)],j=Cf(S.iss);if(D){const k=GI(D),P=KI(D);N.push(...k),C.push(...P)}for(const k of C)A.push(`${k}:${j}`)}const _=await this.client.core.crypto.generateSharedKey(f,u);n.addTrace(Da.create_authenticated_session_topic);let E;if(N?.length>0){E={topic:_,acknowledged:!0,self:{publicKey:f,metadata:this.client.metadata},peer:{publicKey:u,metadata:c.requester.metadata},controller:u,expiry:Jr(No),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:y4([...new Set(N)],[...new Set(A)]),transportType:l},n.addTrace(Da.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:l})}catch(x){throw n.setError(oh.subscribe_authenticated_session_topic_failure),x}n.addTrace(Da.subscribe_authenticated_session_topic_success),await this.client.session.set(_,E),n.addTrace(Da.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}n.addTrace(Da.publishing_authenticated_session_approve);try{await this.sendResult({topic:g,id:i,result:{cacaos:s,responder:{publicKey:f,metadata:this.client.metadata}},encodeOpts:m,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,l)})}catch(x){throw n.setError(oh.authenticated_session_approve_publish_failure),x}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:E}}),Pe(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:i,reason:s}=t,n=this.getPendingAuthRequest(i);if(!n)throw new Error(`Could not find pending auth request with id ${i}`);n.transportType===vr.relay&&await this.confirmOnlineStateOrThrow();const c=n.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=ff(c),f={type:Cs,receiverPublicKey:c,senderPublicKey:l};await this.sendError({id:i,topic:u,error:s,encodeOpts:f,rpcOpts:ai.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,qt("USER_DISCONNECTED"))}),Pe(this,"formatAuthMessage",t=>{this.isInitialized();const{request:i,iss:s}=t;return rx(i,s)}),Pe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),Pe(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(n=>{var c,l;return((c=n.peerMetadata)==null?void 0:c.url)&&((l=n.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&n.topic&&n.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(n=>this.client.core.pairing.disconnect({topic:n.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}}),Pe(this,"deleteSession",async t=>{var i;const{topic:s,expirerHasDeleted:n=!1,emitEvent:c=!0,id:l=0}=t,{self:u}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,qt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),n||this.client.core.expirer.del(s),this.client.core.storage.removeItem(K4).catch(f=>this.client.logger.warn(f)),this.getPendingSessionRequests().forEach(f=>{f.topic===s&&this.deletePendingSessionRequest(f.id,qt("USER_DISCONNECTED"))}),s===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=is.idle),c&&this.client.events.emit("session_delete",{id:l,topic:s})}),Pe(this,"deleteProposal",async(t,i)=>{if(i)try{const s=this.client.proposal.get(t);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(Ea.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,qt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),Pe(this,"deletePendingSessionRequest",async(t,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(n=>n.id!==t),s&&(this.sessionRequestQueue.state=is.idle,this.client.events.emit("session_request_expire",{id:t}))}),Pe(this,"deletePendingAuthRequest",async(t,i,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)])}),Pe(this,"setExpiry",async(t,i)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,i),await this.client.session.update(t,{expiry:i}))}),Pe(this,"setProposal",async(t,i)=>{this.client.core.expirer.set(t,Jr(ai.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,i)}),Pe(this,"setAuthRequest",async(t,i)=>{const{request:s,pairingTopic:n,transportType:c=vr.relay}=i;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:n,verifyContext:s.verifyContext,transportType:c})}),Pe(this,"setPendingSessionRequest",async t=>{const{id:i,topic:s,params:n,verifyContext:c}=t,l=n.request.expiryTimestamp||Jr(ai.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,l),await this.client.pendingRequest.set(i,{id:i,topic:s,params:n,verifyContext:c})}),Pe(this,"sendRequest",async t=>{const{topic:i,method:s,params:n,expiry:c,relayRpcId:l,clientRpcId:u,throwOnFailedPublish:f,appLink:g,tvf:m}=t,N=$i(s,n,u);let A;const _=!!g;try{const S=_?nh:ra;A=await this.client.core.crypto.encode(i,N,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),S}let E;if(_Q.includes(s)){const S=js(JSON.stringify(N)),D=js(A);E=await this.client.core.verify.register({id:D,decryptedId:S})}const x=ai[s].req;if(x.attestation=E,c&&(x.ttl=c),l&&(x.id=l),this.client.core.history.set(i,N),_){const S=Su(g,i,A);await globalThis.Linking.openURL(S,this.client.name)}else{const S=ai[s].req;c&&(S.ttl=c),l&&(S.id=l),S.tvf=Wi(Sr({},m),{correlationId:N.id}),f?(S.internal=Wi(Sr({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,A,S)):this.client.core.relayer.publish(i,A,S).catch(D=>this.client.logger.error(D))}return N.id}),Pe(this,"sendResult",async t=>{const{id:i,topic:s,result:n,throwOnFailedPublish:c,encodeOpts:l,appLink:u}=t,f=wa(i,n);let g;const m=u&&typeof globalThis?.Linking<"u";try{const _=m?nh:ra;g=await this.client.core.crypto.encode(s,f,Wi(Sr({},l||{}),{encoding:_}))}catch(_){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),_}let N,A;try{N=await this.client.core.history.get(s,i);const _=N.request;try{this.shouldSetTVF(_.method,_.params)&&(A=this.getTVFParams(i,_.params,n))}catch(E){this.client.logger.warn("sendResult() -> getTVFParams() failed",E)}}catch(_){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${i}) failed`),_}if(m){const _=Su(u,s,g);await globalThis.Linking.openURL(_,this.client.name)}else{const _=N.request.method,E=ai[_].res;E.tvf=Wi(Sr({},A),{correlationId:i}),c?(E.internal=Wi(Sr({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,g,E)):this.client.core.relayer.publish(s,g,E).catch(x=>this.client.logger.error(x))}await this.client.core.history.resolve(f)}),Pe(this,"sendError",async t=>{const{id:i,topic:s,error:n,encodeOpts:c,rpcOpts:l,appLink:u}=t,f=Yc(i,n);let g;const m=u&&typeof globalThis?.Linking<"u";try{const A=m?nh:ra;g=await this.client.core.crypto.encode(s,f,Wi(Sr({},c||{}),{encoding:A}))}catch(A){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),A}let N;try{N=await this.client.core.history.get(s,i)}catch(A){throw this.client.logger.error(`sendError() -> history.get(${s}, ${i}) failed`),A}if(m){const A=Su(u,s,g);await globalThis.Linking.openURL(A,this.client.name)}else{const A=N.request.method,_=l||ai[A].res;this.client.core.relayer.publish(s,g,_)}await this.client.core.history.resolve(f)}),Pe(this,"cleanup",async()=>{const t=[],i=[];this.client.session.getAll().forEach(s=>{let n=!1;Gs(s.expiry)&&(n=!0),this.client.core.crypto.keychain.has(s.topic)||(n=!0),n&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Gs(s.expiryTimestamp)&&i.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...i.map(s=>this.deleteProposal(s))])}),Pe(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),Pe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===is.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=is.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=is.idle}),Pe(this,"processRequest",async t=>{const{topic:i,payload:s,attestation:n,transportType:c,encryptedId:l}=t,u=s.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:s,attestation:n,encryptedId:l});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,s);case"wc_sessionPing":return await this.onSessionPingRequest(i,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:s,attestation:n,encryptedId:l,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(i,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:s,attestation:n,encryptedId:l,transportType:c});default:return this.client.logger.info(`Unsupported request method ${u}`)}}),Pe(this,"onRelayEventResponse",async t=>{const{topic:i,payload:s,transportType:n}=t,c=(await this.client.core.history.get(i,s.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s,n);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),Pe(this,"onRelayEventUnknownPayload",t=>{const{topic:i}=t,{message:s}=Ue("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Pe(this,"shouldIgnorePairingRequest",t=>{const{topic:i,requestMethod:s}=t,n=this.expectedPairingMethodMap.get(i);return!n||n.includes(s)?!1:!!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Pe(this,"onSessionProposeRequest",async t=>{const{topic:i,payload:s,attestation:n,encryptedId:c}=t,{params:l,id:u}=s;try{const f=this.client.core.eventClient.getEvent({topic:i});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),f?.setError(xs.proposal_listener_not_found)),this.isValidConnect(Sr({},s.params));const g=l.expiryTimestamp||Jr(ai.wc_sessionPropose.req.ttl),m=Sr({id:u,pairingTopic:i,expiryTimestamp:g},l);await this.setProposal(u,m);const N=await this.getVerifyContext({attestationId:n,hash:js(JSON.stringify(s)),encryptedId:c,metadata:m.proposer.metadata});f?.addTrace(cs.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:m,verifyContext:N})}catch(f){await this.sendError({id:u,topic:i,error:f,rpcOpts:ai.wc_sessionPropose.autoReject}),this.client.logger.error(f)}}),Pe(this,"onSessionProposeResponse",async(t,i,s)=>{const{id:n}=i;if(ri(i)){const{result:c}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const u=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const f=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const g=await this.client.core.crypto.generateSharedKey(u,f);this.pendingSessions.set(n,{sessionTopic:g,pairingTopic:t,proposalId:n,publicKey:u});const m=await this.client.core.relayer.subscribe(g,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:m}),await this.client.core.pairing.activate({topic:t})}else if(zr(i)){await this.client.proposal.delete(n,qt("USER_DISCONNECTED"));const c=Tt("session_connect",n);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(c,{error:i.error})}}),Pe(this,"onSessionSettleRequest",async(t,i)=>{const{id:s,params:n}=i;try{this.isValidSessionSettleRequest(n);const{relay:c,controller:l,expiry:u,namespaces:f,sessionProperties:g,sessionConfig:m}=i.params,N=[...this.pendingSessions.values()].find(E=>E.sessionTopic===t);if(!N)return this.client.logger.error(`Pending session not found for topic ${t}`);const A=this.client.proposal.get(N.proposalId),_=Wi(Sr(Sr({topic:t,relay:c,expiry:u,namespaces:f,acknowledged:!0,pairingTopic:N.pairingTopic,requiredNamespaces:A.requiredNamespaces,optionalNamespaces:A.optionalNamespaces,controller:l.publicKey,self:{publicKey:N.publicKey,metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},g&&{sessionProperties:g}),m&&{sessionConfig:m}),{transportType:vr.relay});await this.client.session.set(_.topic,_),await this.setExpiry(_.topic,_.expiry),await this.client.core.pairing.updateMetadata({topic:N.pairingTopic,metadata:_.peer.metadata}),this.client.events.emit("session_connect",{session:_}),this.events.emit(Tt("session_connect",N.proposalId),{session:_}),this.pendingSessions.delete(N.proposalId),this.deleteProposal(N.proposalId,!1),this.cleanupDuplicatePairings(_),await this.sendResult({id:i.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(c){await this.sendError({id:s,topic:t,error:c}),this.client.logger.error(c)}}),Pe(this,"onSessionSettleResponse",async(t,i)=>{const{id:s}=i;ri(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Tt("session_approve",s),{})):zr(i)&&(await this.client.session.delete(t,qt("USER_DISCONNECTED")),this.events.emit(Tt("session_approve",s),{error:i.error}))}),Pe(this,"onSessionUpdateRequest",async(t,i)=>{const{params:s,id:n}=i;try{const c=`${t}_session_update`,l=sh.get(c);if(l&&this.isRequestOutOfSync(l,n)){this.client.logger.warn(`Discarding out of sync request - ${n}`),this.sendError({id:n,topic:t,error:qt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Sr({topic:t},s));try{sh.set(c,n),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0})}catch(u){throw sh.delete(c),u}this.client.events.emit("session_update",{id:n,topic:t,params:s})}catch(c){await this.sendError({id:n,topic:t,error:c}),this.client.logger.error(c)}}),Pe(this,"isRequestOutOfSync",(t,i)=>i.toString().slice(0,-3)<t.toString().slice(0,-3)),Pe(this,"onSessionUpdateResponse",(t,i)=>{const{id:s}=i,n=Tt("session_update",s);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);ri(i)?this.events.emit(Tt("session_update",s),{}):zr(i)&&this.events.emit(Tt("session_update",s),{error:i.error})}),Pe(this,"onSessionExtendRequest",async(t,i)=>{const{id:s}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Jr(No)),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(n){await this.sendError({id:s,topic:t,error:n}),this.client.logger.error(n)}}),Pe(this,"onSessionExtendResponse",(t,i)=>{const{id:s}=i,n=Tt("session_extend",s);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);ri(i)?this.events.emit(Tt("session_extend",s),{}):zr(i)&&this.events.emit(Tt("session_extend",s),{error:i.error})}),Pe(this,"onSessionPingRequest",async(t,i)=>{const{id:s}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(n){await this.sendError({id:s,topic:t,error:n}),this.client.logger.error(n)}}),Pe(this,"onSessionPingResponse",(t,i)=>{const{id:s}=i,n=Tt("session_ping",s);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);setTimeout(()=>{ri(i)?this.events.emit(Tt("session_ping",s),{}):zr(i)&&this.events.emit(Tt("session_ping",s),{error:i.error})},500)}),Pe(this,"onSessionDeleteRequest",async(t,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),Promise.all([new Promise(n=>{this.client.core.relayer.once(ui.publish,async()=>{n(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:qt("USER_DISCONNECTED")})]).catch(n=>this.client.logger.error(n))}catch(n){this.client.logger.error(n)}}),Pe(this,"onSessionRequest",async t=>{var i,s,n;const{topic:c,payload:l,attestation:u,encryptedId:f,transportType:g}=t,{id:m,params:N}=l;try{await this.isValidRequest(Sr({topic:c},N));const A=this.client.session.get(c),_=await this.getVerifyContext({attestationId:u,hash:js(JSON.stringify($i("wc_sessionRequest",N,m))),encryptedId:f,metadata:A.peer.metadata,transportType:g}),E={id:m,topic:c,params:N,verifyContext:_};await this.setPendingSessionRequest(E),g===vr.link_mode&&(i=A.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((s=A.peer.metadata.redirect)==null?void 0:s.universal),(n=this.client.signConfig)!=null&&n.disableRequestQueue?this.emitSessionRequest(E):(this.addSessionRequestToSessionRequestQueue(E),this.processSessionRequestQueue())}catch(A){await this.sendError({id:m,topic:c,error:A}),this.client.logger.error(A)}}),Pe(this,"onSessionRequestResponse",(t,i)=>{const{id:s}=i,n=Tt("session_request",s);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);ri(i)?this.events.emit(Tt("session_request",s),{result:i.result}):zr(i)&&this.events.emit(Tt("session_request",s),{error:i.error})}),Pe(this,"onSessionEventRequest",async(t,i)=>{const{id:s,params:n}=i;try{const c=`${t}_session_event_${n.event.name}`,l=sh.get(c);if(l&&this.isRequestOutOfSync(l,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Sr({topic:t},n)),this.client.events.emit("session_event",{id:s,topic:t,params:n}),sh.set(c,s)}catch(c){await this.sendError({id:s,topic:t,error:c}),this.client.logger.error(c)}}),Pe(this,"onSessionAuthenticateResponse",(t,i)=>{const{id:s}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:i}),ri(i)?this.events.emit(Tt("session_request",s),{result:i.result}):zr(i)&&this.events.emit(Tt("session_request",s),{error:i.error})}),Pe(this,"onSessionAuthenticateRequest",async t=>{var i;const{topic:s,payload:n,attestation:c,encryptedId:l,transportType:u}=t;try{const{requester:f,authPayload:g,expiryTimestamp:m}=n.params,N=await this.getVerifyContext({attestationId:c,hash:js(JSON.stringify(n)),encryptedId:l,metadata:f.metadata,transportType:u}),A={requester:f,pairingTopic:s,id:n.id,authPayload:g,verifyContext:N,expiryTimestamp:m};await this.setAuthRequest(n.id,{request:A,pairingTopic:s,transportType:u}),u===vr.link_mode&&(i=f.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(f.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:n.params,id:n.id,verifyContext:N})}catch(f){this.client.logger.error(f);const g=n.params.requester.publicKey,m=await this.client.core.crypto.generateKeyPair(),N=this.getAppLinkIfEnabled(n.params.requester.metadata,u),A={type:Cs,receiverPublicKey:g,senderPublicKey:m};await this.sendError({id:n.id,topic:s,error:f,encodeOpts:A,rpcOpts:ai.wc_sessionAuthenticate.autoReject,appLink:N})}}),Pe(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),Pe(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=is.idle,this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay))}),Pe(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:i})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(n=>n.topic===t&&n.request.method==="wc_sessionRequest").forEach(n=>{const c=n.request.id,l=Tt("session_request",c);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners`);this.events.emit(Tt("session_request",n.request.id),{error:i})})}),Pe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===is.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=is.active,this.emitSessionRequest(t)}catch(i){this.client.logger.error(i)}}),Pe(this,"emitSessionRequest",t=>{this.client.events.emit("session_request",t)}),Pe(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const i=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);i&&this.onSessionProposeRequest({topic:t.topic,payload:$i("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})}),Pe(this,"isValidConnect",async t=>{if(!Zi(t)){const{message:u}=Ue("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(u)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:n,sessionProperties:c,relays:l}=t;if(Ui(i)||await this.isValidPairingTopic(i),!nB(l)){const{message:u}=Ue("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(u)}!Ui(s)&&Hh(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Ui(n)&&Hh(n)!==0&&this.validateNamespaces(n,"optionalNamespaces"),Ui(c)||this.validateSessionProps(c,"sessionProperties")}),Pe(this,"validateNamespaces",(t,i)=>{const s=iB(t,"connect()",i);if(s)throw new Error(s.message)}),Pe(this,"isValidApprove",async t=>{if(!Zi(t))throw new Error(Ue("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:s,relayProtocol:n,sessionProperties:c}=t;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const l=this.client.proposal.get(i),u=jy(s,"approve()");if(u)throw new Error(u.message);const f=v4(l.requiredNamespaces,s,"approve()");if(f)throw new Error(f.message);if(!Rr(n,!0)){const{message:g}=Ue("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(g)}Ui(c)||this.validateSessionProps(c,"sessionProperties")}),Pe(this,"isValidReject",async t=>{if(!Zi(t)){const{message:n}=Ue("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(n)}const{id:i,reason:s}=t;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!aB(s)){const{message:n}=Ue("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(n)}}),Pe(this,"isValidSessionSettleRequest",t=>{if(!Zi(t)){const{message:f}=Ue("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(f)}const{relay:i,controller:s,namespaces:n,expiry:c}=t;if(!vx(i)){const{message:f}=Ue("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const l=K$(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);const u=jy(n,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(Gs(c)){const{message:f}=Ue("EXPIRED","onSessionSettleRequest()");throw new Error(f)}}),Pe(this,"isValidUpdate",async t=>{if(!Zi(t)){const{message:u}=Ue("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(u)}const{topic:i,namespaces:s}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const n=this.client.session.get(i),c=jy(s,"update()");if(c)throw new Error(c.message);const l=v4(n.requiredNamespaces,s,"update()");if(l)throw new Error(l.message)}),Pe(this,"isValidExtend",async t=>{if(!Zi(t)){const{message:s}=Ue("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:i}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)}),Pe(this,"isValidRequest",async t=>{if(!Zi(t)){const{message:u}=Ue("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(u)}const{topic:i,request:s,chainId:n,expiry:c}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:l}=this.client.session.get(i);if(!m4(l,n)){const{message:u}=Ue("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(u)}if(!oB(s)){const{message:u}=Ue("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(u)}if(!lB(l,n,s.method)){const{message:u}=Ue("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(u)}if(c&&!pB(c,Ry)){const{message:u}=Ue("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${Ry.min} and ${Ry.max}`);throw new Error(u)}}),Pe(this,"isValidRespond",async t=>{var i;if(!Zi(t)){const{message:c}=Ue("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:n}=t;try{await this.isValidSessionTopic(s)}catch(c){throw(i=t?.response)!=null&&i.id&&this.cleanupAfterResponse(t),c}if(!cB(n)){const{message:c}=Ue("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(c)}}),Pe(this,"isValidPing",async t=>{if(!Zi(t)){const{message:s}=Ue("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)}),Pe(this,"isValidEmit",async t=>{if(!Zi(t)){const{message:l}=Ue("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:i,event:s,chainId:n}=t;await this.isValidSessionTopic(i);const{namespaces:c}=this.client.session.get(i);if(!m4(c,n)){const{message:l}=Ue("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(l)}if(!hB(s)){const{message:l}=Ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!uB(c,n,s.name)){const{message:l}=Ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}}),Pe(this,"isValidDisconnect",async t=>{if(!Zi(t)){const{message:s}=Ue("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)}),Pe(this,"isValidAuthenticate",t=>{const{chains:i,uri:s,domain:n,nonce:c}=t;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!Rr(s,!1))throw new Error("uri is required parameter");if(!Rr(n,!1))throw new Error("domain is required parameter");if(!Rr(c,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(u=>uc(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:l}=uc(i[0]);if(l!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Pe(this,"getVerifyContext",async t=>{const{attestationId:i,hash:s,encryptedId:n,metadata:c,transportType:l}=t,u={verified:{verifyUrl:c.verifyUrl||zh,validation:"UNKNOWN",origin:c.url||""}};try{if(l===vr.link_mode){const g=this.getAppLinkIfEnabled(c,l);return u.verified.validation=g&&new URL(g).origin===new URL(c.url).origin?"VALID":"INVALID",u}const f=await this.client.core.verify.resolve({attestationId:i,hash:s,encryptedId:n,verifyUrl:c.verifyUrl});f&&(u.verified.origin=f.origin,u.verified.isScam=f.isScam,u.verified.validation=f.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(f){this.client.logger.warn(f)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u}),Pe(this,"validateSessionProps",(t,i)=>{Object.values(t).forEach(s=>{if(!Rr(s,!1)){const{message:n}=Ue("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(n)}})}),Pe(this,"getPendingAuthRequest",t=>{const i=this.client.auth.requests.get(t);return typeof i=="object"?i:void 0}),Pe(this,"addToRecentlyDeleted",(t,i)=>{if(this.recentlyDeletedMap.set(t,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const n=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(s++>=n)break;this.recentlyDeletedMap.delete(c)}}}),Pe(this,"checkRecentlyDeleted",t=>{const i=this.recentlyDeletedMap.get(t);if(i){const{message:s}=Ue("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${t}`);throw new Error(s)}}),Pe(this,"isLinkModeEnabled",(t,i)=>{var s,n,c,l,u,f,g,m,N;return!t||i!==vr.link_mode?!1:((n=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:n.linkMode)===!0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==void 0&&((f=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:f.universal)!==""&&((g=t?.redirect)==null?void 0:g.universal)!==void 0&&((m=t?.redirect)==null?void 0:m.universal)!==""&&((N=t?.redirect)==null?void 0:N.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof globalThis?.Linking<"u"}),Pe(this,"getAppLinkIfEnabled",(t,i)=>{var s;return this.isLinkModeEnabled(t,i)?(s=t?.redirect)==null?void 0:s.universal:void 0}),Pe(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const i=$I(t,"topic")||"",s=decodeURIComponent($I(t,"wc_ev")||""),n=this.client.session.keys.includes(i);n&&this.client.session.update(i,{transportType:vr.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:s,sessionExists:n})}),Pe(this,"registerLinkModeListeners",async()=>{var t;if(Sv()||ya()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const i=globalThis?.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await i.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Pe(this,"shouldSetTVF",(t,i)=>{if(!i||t!=="wc_sessionRequest")return!1;const{request:s}=i;return Object.keys(X4).includes(s.method)}),Pe(this,"getTVFParams",(t,i,s)=>{var n,c;try{const l=i.request.method,u=this.extractTxHashesFromResult(l,s);return Wi(Sr({correlationId:t,rpcMethods:[l],chainId:i.chainId},this.isValidContractData(i.request.params)&&{contractAddresses:[(c=(n=i.request.params)==null?void 0:n[0])==null?void 0:c.to]}),{txHashes:u})}catch(l){this.client.logger.warn("Error getting TVF params",l)}return{}}),Pe(this,"isValidContractData",t=>{var i;if(!t)return!1;try{const s=t?.data||((i=t?.[0])==null?void 0:i.data);if(!s.startsWith("0x"))return!1;const n=s.slice(2);return/^[0-9a-fA-F]*$/.test(n)?n.length%2===0:!1}catch{}return!1}),Pe(this,"extractTxHashesFromResult",(t,i)=>{try{const s=X4[t];if(typeof i=="string")return[i];const n=i[s.key];if(Za(n))return n;if(typeof n=="string")return[n]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}isInitialized(){if(!this.initialized){const{message:e}=Ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ui.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:t,message:i,attestation:s,transportType:n}=e,{publicKey:c}=this.client.auth.authKeys.keys.includes(df)?this.client.auth.authKeys.get(df):{publicKey:void 0},l=await this.client.core.crypto.decode(t,i,{receiverPublicKey:c,encoding:n===vr.link_mode?nh:ra});try{Wc(l)?(this.client.core.history.set(t,l),this.onRelayEventRequest({topic:t,payload:l,attestation:s,transportType:n,encryptedId:js(i)})):no(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:t,payload:l,transportType:n}),this.client.core.history.delete(t,l.id)):this.onRelayEventUnknownPayload({topic:t,payload:l,transportType:n})}catch(u){this.client.logger.error(u)}}registerExpirerEvents(){this.client.core.expirer.on(xn.expired,async e=>{const{topic:t,id:i}=FS(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,Ue("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,Ue("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(za.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(za.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Rr(e,!1)){const{message:t}=Ue("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Gs(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Ue("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Rr(e,!1)){const{message:t}=Ue("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Ue("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Gs(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Ue("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Ue("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Rr(e,!1)){const{message:t}=Ue("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=Ue("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!sB(e)){const{message:t}=Ue("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Ue("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Gs(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Ue("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}},PQ=class extends so{constructor(e,t){super(e,t,MQ,Rv),this.core=e,this.logger=t}},RQ=class extends so{constructor(e,t){super(e,t,NQ,Rv),this.core=e,this.logger=t}},UQ=class extends so{constructor(e,t){super(e,t,AQ,Rv,i=>i.id),this.core=e,this.logger=t}},$Q=class extends so{constructor(e,t){super(e,t,SQ,fd,()=>df),this.core=e,this.logger=t}},BQ=class extends so{constructor(e,t){super(e,t,xQ,fd),this.core=e,this.logger=t}},qQ=class extends so{constructor(e,t){super(e,t,TQ,fd,i=>i.id),this.core=e,this.logger=t}};var YQ=Object.defineProperty,WQ=(r,e,t)=>e in r?YQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Uy=(r,e,t)=>WQ(r,typeof e!="symbol"?e+"":e,t);let QQ=class{constructor(e,t){this.core=e,this.logger=t,Uy(this,"authKeys"),Uy(this,"pairingTopics"),Uy(this,"requests"),this.authKeys=new $Q(this.core,this.logger),this.pairingTopics=new BQ(this.core,this.logger),this.requests=new qQ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var VQ=Object.defineProperty,FQ=(r,e,t)=>e in r?VQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,dt=(r,e,t)=>FQ(r,typeof e!="symbol"?e+"":e,t);let HQ=class Vx extends vQ{constructor(e){super(e),dt(this,"protocol",Yx),dt(this,"version",Wx),dt(this,"name",Py.name),dt(this,"metadata"),dt(this,"core"),dt(this,"logger"),dt(this,"events",new ii.EventEmitter),dt(this,"engine"),dt(this,"session"),dt(this,"proposal"),dt(this,"pendingRequest"),dt(this,"auth"),dt(this,"signConfig"),dt(this,"on",(i,s)=>this.events.on(i,s)),dt(this,"once",(i,s)=>this.events.once(i,s)),dt(this,"off",(i,s)=>this.events.off(i,s)),dt(this,"removeListener",(i,s)=>this.events.removeListener(i,s)),dt(this,"removeAllListeners",i=>this.events.removeAllListeners(i)),dt(this,"connect",async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"pair",async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"approve",async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"reject",async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"update",async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"extend",async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"request",async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"respond",async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"ping",async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"emit",async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"disconnect",async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"find",i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}}),dt(this,"authenticate",async(i,s)=>{try{return await this.engine.authenticate(i,s)}catch(n){throw this.logger.error(n.message),n}}),dt(this,"formatAuthMessage",i=>{try{return this.engine.formatAuthMessage(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"approveSessionAuthenticate",async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}}),dt(this,"rejectSessionAuthenticate",async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||Py.name,this.metadata=e?.metadata||qS(),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:da(ks({level:e?.logger||Py.logger}));this.core=e?.core||new yQ(e),this.logger=Ot(t,this.name),this.session=new RQ(this.core,this.logger),this.proposal=new PQ(this.core,this.logger),this.pendingRequest=new UQ(this.core,this.logger),this.engine=new kQ(this),this.auth=new QQ(this.core,this.logger)}static async init(e){const t=new Vx(e);return await t.initialize(),t}get context(){return Zt(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ne.toMiliseconds(ne.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Tu={exports:{}},t3;function ZQ(){return t3||(t3=1,(function(r,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis,i=(function(){function n(){this.fetch=!1,this.DOMException=t.DOMException}return n.prototype=t,new n})();(function(n){(function(c){var l=typeof n<"u"&&n||typeof self<"u"&&self||typeof n<"u"&&n||{},u={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function f(p){return p&&DataView.prototype.isPrototypeOf(p)}if(u.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=ArrayBuffer.isView||function(p){return p&&g.indexOf(Object.prototype.toString.call(p))>-1};function N(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(p)||p==="")throw new TypeError('Invalid character in header field name: "'+p+'"');return p.toLowerCase()}function A(p){return typeof p!="string"&&(p=String(p)),p}function _(p){var w={next:function(){var b=p.shift();return{done:b===void 0,value:b}}};return u.iterable&&(w[Symbol.iterator]=function(){return w}),w}function E(p){this.map={},p instanceof E?p.forEach(function(w,b){this.append(b,w)},this):Array.isArray(p)?p.forEach(function(w){if(w.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+w.length);this.append(w[0],w[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(w){this.append(w,p[w])},this)}E.prototype.append=function(p,w){p=N(p),w=A(w);var b=this.map[p];this.map[p]=b?b+", "+w:w},E.prototype.delete=function(p){delete this.map[N(p)]},E.prototype.get=function(p){return p=N(p),this.has(p)?this.map[p]:null},E.prototype.has=function(p){return this.map.hasOwnProperty(N(p))},E.prototype.set=function(p,w){this.map[N(p)]=A(w)},E.prototype.forEach=function(p,w){for(var b in this.map)this.map.hasOwnProperty(b)&&p.call(w,this.map[b],b,this)},E.prototype.keys=function(){var p=[];return this.forEach(function(w,b){p.push(b)}),_(p)},E.prototype.values=function(){var p=[];return this.forEach(function(w){p.push(w)}),_(p)},E.prototype.entries=function(){var p=[];return this.forEach(function(w,b){p.push([b,w])}),_(p)},u.iterable&&(E.prototype[Symbol.iterator]=E.prototype.entries);function x(p){if(!p._noBody){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}}function S(p){return new Promise(function(w,b){p.onload=function(){w(p.result)},p.onerror=function(){b(p.error)}})}function D(p){var w=new FileReader,b=S(w);return w.readAsArrayBuffer(p),b}function C(p){var w=new FileReader,b=S(w),I=/charset=([A-Za-z0-9_-]+)/.exec(p.type),y=I?I[1]:"utf-8";return w.readAsText(p,y),b}function j(p){for(var w=new Uint8Array(p),b=new Array(w.length),I=0;I<w.length;I++)b[I]=String.fromCharCode(w[I]);return b.join("")}function k(p){if(p.slice)return p.slice(0);var w=new Uint8Array(p.byteLength);return w.set(new Uint8Array(p)),w.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(p){this.bodyUsed=this.bodyUsed,this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:u.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:u.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():u.arrayBuffer&&u.blob&&f(p)?(this._bodyArrayBuffer=k(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||m(p))?this._bodyArrayBuffer=k(p):this._bodyText=p=Object.prototype.toString.call(p):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var p=x(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var p=x(this);return p||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(u.blob)return this.blob().then(D);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var p=x(this);if(p)return p;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(Z)}),this.json=function(){return this.text().then(JSON.parse)},this}var Q=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function F(p){var w=p.toUpperCase();return Q.indexOf(w)>-1?w:p}function $(p,w){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var b=w.body;if(p instanceof $){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,w.headers||(this.headers=new E(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!b&&p._bodyInit!=null&&(b=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new E(w.headers)),this.method=F(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal||(function(){if("AbortController"in l){var o=new AbortController;return o.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&b)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(b),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var I=/([?&])_=[^&]*/;if(I.test(this.url))this.url=this.url.replace(I,"$1_="+new Date().getTime());else{var y=/\?/;this.url+=(y.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function Z(p){var w=new FormData;return p.trim().split("&").forEach(function(b){if(b){var I=b.split("="),y=I.shift().replace(/\+/g," "),o=I.join("=").replace(/\+/g," ");w.append(decodeURIComponent(y),decodeURIComponent(o))}}),w}function M(p){var w=new E,b=p.replace(/\r?\n[\t ]+/g," ");return b.split("\r").map(function(I){return I.indexOf(`
`)===0?I.substr(1,I.length):I}).forEach(function(I){var y=I.split(":"),o=y.shift().trim();if(o){var v=y.join(":").trim();try{w.append(o,v)}catch(R){console.warn("Response "+R.message)}}}),w}P.call($.prototype);function a(p,w){if(!(this instanceof a))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=w.statusText===void 0?"":""+w.statusText,this.headers=new E(w.headers),this.url=w.url||"",this._initBody(p)}P.call(a.prototype),a.prototype.clone=function(){return new a(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new E(this.headers),url:this.url})},a.error=function(){var p=new a(null,{status:200,statusText:""});return p.ok=!1,p.status=0,p.type="error",p};var h=[301,302,303,307,308];a.redirect=function(p,w){if(h.indexOf(w)===-1)throw new RangeError("Invalid status code");return new a(null,{status:w,headers:{location:p}})},c.DOMException=l.DOMException;try{new c.DOMException}catch{c.DOMException=function(w,b){this.message=w,this.name=b;var I=Error(w);this.stack=I.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function d(p,w){return new Promise(function(b,I){var y=new $(p,w);if(y.signal&&y.signal.aborted)return I(new c.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function v(){o.abort()}o.onload=function(){var z={statusText:o.statusText,headers:M(o.getAllResponseHeaders()||"")};y.url.indexOf("file://")===0&&(o.status<200||o.status>599)?z.status=200:z.status=o.status,z.url="responseURL"in o?o.responseURL:z.headers.get("X-Request-URL");var q="response"in o?o.response:o.responseText;setTimeout(function(){b(new a(q,z))},0)},o.onerror=function(){setTimeout(function(){I(new TypeError("Network request failed"))},0)},o.ontimeout=function(){setTimeout(function(){I(new TypeError("Network request timed out"))},0)},o.onabort=function(){setTimeout(function(){I(new c.DOMException("Aborted","AbortError"))},0)};function R(z){try{return z===""&&l.location.href?l.location.href:z}catch{return z}}if(o.open(y.method,R(y.url),!0),y.credentials==="include"?o.withCredentials=!0:y.credentials==="omit"&&(o.withCredentials=!1),"responseType"in o&&(u.blob?o.responseType="blob":u.arrayBuffer&&(o.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof E||l.Headers&&w.headers instanceof l.Headers)){var L=[];Object.getOwnPropertyNames(w.headers).forEach(function(z){L.push(N(z)),o.setRequestHeader(z,A(w.headers[z]))}),y.headers.forEach(function(z,q){L.indexOf(q)===-1&&o.setRequestHeader(q,z)})}else y.headers.forEach(function(z,q){o.setRequestHeader(q,z)});y.signal&&(y.signal.addEventListener("abort",v),o.onreadystatechange=function(){o.readyState===4&&y.signal.removeEventListener("abort",v)}),o.send(typeof y._bodyInit>"u"?null:y._bodyInit)})}return d.polyfill=!0,l.fetch||(l.fetch=d,l.Headers=E,l.Request=$,l.Response=a),c.Headers=E,c.Request=$,c.Response=a,c.fetch=d,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=t.fetch?t:i;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(Tu,Tu.exports)),Tu.exports}var GQ=ZQ();const r3=Vf(GQ);var KQ=Object.defineProperty,JQ=Object.defineProperties,XQ=Object.getOwnPropertyDescriptors,i3=Object.getOwnPropertySymbols,eV=Object.prototype.hasOwnProperty,tV=Object.prototype.propertyIsEnumerable,n3=(r,e,t)=>e in r?KQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,s3=(r,e)=>{for(var t in e||(e={}))eV.call(e,t)&&n3(r,t,e[t]);if(i3)for(var t of i3(e))tV.call(e,t)&&n3(r,t,e[t]);return r},a3=(r,e)=>JQ(r,XQ(e));const rV={Accept:"application/json","Content-Type":"application/json"},iV="POST",o3={headers:rV,method:iV},c3=10;let kr=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new ii.EventEmitter,this.isAvailable=!1,this.registering=!1,!E4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=fs(e),i=await(await r3(this.url,a3(s3({},o3),{body:t}))).json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!E4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",n=>{this.resetMaxListeners(),s(n)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=fs({id:1,jsonrpc:"2.0",method:"test",params:[]});await r3(e,a3(s3({},o3),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?zs(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),n=Yc(e,s);this.events.emit("payload",n)}parseError(e,t=this.url){return Nx(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>c3&&this.events.setMaxListeners(c3)}};const h3="error",nV="wss://relay.walletconnect.org",sV="wc",aV="universal_provider",l3=`${sV}@2:${aV}:`,Fx="https://rpc.walletconnect.org/v1/",Jo="generic",oV=`${Fx}bundler`,kn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function cV(){this.__data__=[],this.size=0}var hV=cV;function lV(r,e){return r===e||r!==r&&e!==e}var dd=lV,uV=dd;function fV(r,e){for(var t=r.length;t--;)if(uV(r[t][0],e))return t;return-1}var pd=fV,dV=pd,pV=Array.prototype,gV=pV.splice;function yV(r){var e=this.__data__,t=dV(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():gV.call(e,t,1),--this.size,!0}var wV=yV,mV=pd;function vV(r){var e=this.__data__,t=mV(e,r);return t<0?void 0:e[t][1]}var bV=vV,MV=pd;function NV(r){return MV(this.__data__,r)>-1}var IV=NV,AV=pd;function _V(r,e){var t=this.__data__,i=AV(t,r);return i<0?(++this.size,t.push([r,e])):t[i][1]=e,this}var EV=_V,DV=hV,SV=wV,xV=bV,TV=IV,jV=EV;function Xo(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}Xo.prototype.clear=DV,Xo.prototype.delete=SV,Xo.prototype.get=xV,Xo.prototype.has=TV,Xo.prototype.set=jV;var gd=Xo,CV=gd;function OV(){this.__data__=new CV,this.size=0}var LV=OV;function zV(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}var kV=zV;function PV(r){return this.__data__.get(r)}var RV=PV;function UV(r){return this.__data__.has(r)}var $V=UV,BV=typeof ju=="object"&&ju&&ju.Object===Object&&ju,Hx=BV,qV=Hx,YV=typeof self=="object"&&self&&self.Object===Object&&self,WV=qV||YV||Function("return this")(),Qc=WV,QV=Qc,VV=QV.Symbol,Zx=VV,u3=Zx,Gx=Object.prototype,FV=Gx.hasOwnProperty,HV=Gx.toString,lh=u3?u3.toStringTag:void 0;function ZV(r){var e=FV.call(r,lh),t=r[lh];try{r[lh]=void 0;var i=!0}catch{}var s=HV.call(r);return i&&(e?r[lh]=t:delete r[lh]),s}var GV=ZV,KV=Object.prototype,JV=KV.toString;function XV(r){return JV.call(r)}var eF=XV,f3=Zx,tF=GV,rF=eF,iF="[object Null]",nF="[object Undefined]",d3=f3?f3.toStringTag:void 0;function sF(r){return r==null?r===void 0?nF:iF:d3&&d3 in Object(r)?tF(r):rF(r)}var yd=sF;function aF(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var ao=aF,oF=yd,cF=ao,hF="[object AsyncFunction]",lF="[object Function]",uF="[object GeneratorFunction]",fF="[object Proxy]";function dF(r){if(!cF(r))return!1;var e=oF(r);return e==lF||e==uF||e==hF||e==fF}var Uv=dF,pF=Qc,gF=pF["__core-js_shared__"],yF=gF,$y=yF,p3=(function(){var r=/[^.]+$/.exec($y&&$y.keys&&$y.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function wF(r){return!!p3&&p3 in r}var mF=wF,vF=Function.prototype,bF=vF.toString;function MF(r){if(r!=null){try{return bF.call(r)}catch{}try{return r+""}catch{}}return""}var NF=MF,IF=Uv,AF=mF,_F=ao,EF=NF,DF=/[\\^$.*+?()[\]{}|]/g,SF=/^\[object .+?Constructor\]$/,xF=Function.prototype,TF=Object.prototype,jF=xF.toString,CF=TF.hasOwnProperty,OF=RegExp("^"+jF.call(CF).replace(DF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function LF(r){if(!_F(r)||AF(r))return!1;var e=IF(r)?OF:SF;return e.test(EF(r))}var zF=LF;function kF(r,e){return r?.[e]}var PF=kF,RF=zF,UF=PF;function $F(r,e){var t=UF(r,e);return RF(t)?t:void 0}var $v=$F,BF=$v,qF=Qc,YF=BF(qF,"Map"),Kx=YF,WF=$v,QF=WF(Object,"create"),wd=QF,g3=wd;function VF(){this.__data__=g3?g3(null):{},this.size=0}var FF=VF;function HF(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var ZF=HF,GF=wd,KF="__lodash_hash_undefined__",JF=Object.prototype,XF=JF.hasOwnProperty;function eH(r){var e=this.__data__;if(GF){var t=e[r];return t===KF?void 0:t}return XF.call(e,r)?e[r]:void 0}var tH=eH,rH=wd,iH=Object.prototype,nH=iH.hasOwnProperty;function sH(r){var e=this.__data__;return rH?e[r]!==void 0:nH.call(e,r)}var aH=sH,oH=wd,cH="__lodash_hash_undefined__";function hH(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=oH&&e===void 0?cH:e,this}var lH=hH,uH=FF,fH=ZF,dH=tH,pH=aH,gH=lH;function ec(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}ec.prototype.clear=uH,ec.prototype.delete=fH,ec.prototype.get=dH,ec.prototype.has=pH,ec.prototype.set=gH;var yH=ec,y3=yH,wH=gd,mH=Kx;function vH(){this.size=0,this.__data__={hash:new y3,map:new(mH||wH),string:new y3}}var bH=vH;function MH(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var NH=MH,IH=NH;function AH(r,e){var t=r.__data__;return IH(e)?t[typeof e=="string"?"string":"hash"]:t.map}var md=AH,_H=md;function EH(r){var e=_H(this,r).delete(r);return this.size-=e?1:0,e}var DH=EH,SH=md;function xH(r){return SH(this,r).get(r)}var TH=xH,jH=md;function CH(r){return jH(this,r).has(r)}var OH=CH,LH=md;function zH(r,e){var t=LH(this,r),i=t.size;return t.set(r,e),this.size+=t.size==i?0:1,this}var kH=zH,PH=bH,RH=DH,UH=TH,$H=OH,BH=kH;function tc(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}tc.prototype.clear=PH,tc.prototype.delete=RH,tc.prototype.get=UH,tc.prototype.has=$H,tc.prototype.set=BH;var qH=tc,YH=gd,WH=Kx,QH=qH,VH=200;function FH(r,e){var t=this.__data__;if(t instanceof YH){var i=t.__data__;if(!WH||i.length<VH-1)return i.push([r,e]),this.size=++t.size,this;t=this.__data__=new QH(i)}return t.set(r,e),this.size=t.size,this}var HH=FH,ZH=gd,GH=LV,KH=kV,JH=RV,XH=$V,eZ=HH;function rc(r){var e=this.__data__=new ZH(r);this.size=e.size}rc.prototype.clear=GH,rc.prototype.delete=KH,rc.prototype.get=JH,rc.prototype.has=XH,rc.prototype.set=eZ;var tZ=rc,rZ=$v,iZ=(function(){try{var r=rZ(Object,"defineProperty");return r({},"",{}),r}catch{}})(),Jx=iZ,w3=Jx;function nZ(r,e,t){e=="__proto__"&&w3?w3(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var Bv=nZ,sZ=Bv,aZ=dd;function oZ(r,e,t){(t!==void 0&&!aZ(r[e],t)||t===void 0&&!(e in r))&&sZ(r,e,t)}var Xx=oZ;function cZ(r){return function(e,t,i){for(var s=-1,n=Object(e),c=i(e),l=c.length;l--;){var u=c[r?l:++s];if(t(n[u],u,n)===!1)break}return e}}var hZ=cZ,lZ=hZ,uZ=lZ(),fZ=uZ,fm={exports:{}};(function(r,e){var t=Qc,i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,n=s&&s.exports===i,c=n?t.Buffer:void 0,l=c?c.allocUnsafe:void 0;function u(f,g){if(g)return f.slice();var m=f.length,N=l?l(m):new f.constructor(m);return f.copy(N),N}r.exports=u})(fm,fm.exports);var dZ=Qc,pZ=dZ.Uint8Array,gZ=pZ,m3=gZ;function yZ(r){var e=new r.constructor(r.byteLength);return new m3(e).set(new m3(r)),e}var wZ=yZ,mZ=wZ;function vZ(r,e){var t=e?mZ(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var bZ=vZ;function MZ(r,e){var t=-1,i=r.length;for(e||(e=Array(i));++t<i;)e[t]=r[t];return e}var NZ=MZ,IZ=ao,v3=Object.create,AZ=(function(){function r(){}return function(e){if(!IZ(e))return{};if(v3)return v3(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}})(),_Z=AZ;function EZ(r,e){return function(t){return r(e(t))}}var DZ=EZ,SZ=DZ,xZ=SZ(Object.getPrototypeOf,Object),eT=xZ,TZ=Object.prototype;function jZ(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||TZ;return r===t}var tT=jZ,CZ=_Z,OZ=eT,LZ=tT;function zZ(r){return typeof r.constructor=="function"&&!LZ(r)?CZ(OZ(r)):{}}var kZ=zZ;function PZ(r){return r!=null&&typeof r=="object"}var Bl=PZ,RZ=yd,UZ=Bl,$Z="[object Arguments]";function BZ(r){return UZ(r)&&RZ(r)==$Z}var qZ=BZ,b3=qZ,YZ=Bl,rT=Object.prototype,WZ=rT.hasOwnProperty,QZ=rT.propertyIsEnumerable,VZ=b3((function(){return arguments})())?b3:function(r){return YZ(r)&&WZ.call(r,"callee")&&!QZ.call(r,"callee")},iT=VZ,FZ=Array.isArray,nT=FZ,HZ=9007199254740991;function ZZ(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=HZ}var sT=ZZ,GZ=Uv,KZ=sT;function JZ(r){return r!=null&&KZ(r.length)&&!GZ(r)}var qv=JZ,XZ=qv,eG=Bl;function tG(r){return eG(r)&&XZ(r)}var rG=tG,zf={exports:{}};function iG(){return!1}var nG=iG;(function(r,e){var t=Qc,i=nG,s=e&&!e.nodeType&&e,n=s&&!0&&r&&!r.nodeType&&r,c=n&&n.exports===s,l=c?t.Buffer:void 0,u=l?l.isBuffer:void 0,f=u||i;r.exports=f})(zf,zf.exports);var sG=yd,aG=eT,oG=Bl,cG="[object Object]",hG=Function.prototype,lG=Object.prototype,aT=hG.toString,uG=lG.hasOwnProperty,fG=aT.call(Object);function dG(r){if(!oG(r)||sG(r)!=cG)return!1;var e=aG(r);if(e===null)return!0;var t=uG.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&aT.call(t)==fG}var pG=dG,gG=yd,yG=sT,wG=Bl,mG="[object Arguments]",vG="[object Array]",bG="[object Boolean]",MG="[object Date]",NG="[object Error]",IG="[object Function]",AG="[object Map]",_G="[object Number]",EG="[object Object]",DG="[object RegExp]",SG="[object Set]",xG="[object String]",TG="[object WeakMap]",jG="[object ArrayBuffer]",CG="[object DataView]",OG="[object Float32Array]",LG="[object Float64Array]",zG="[object Int8Array]",kG="[object Int16Array]",PG="[object Int32Array]",RG="[object Uint8Array]",UG="[object Uint8ClampedArray]",$G="[object Uint16Array]",BG="[object Uint32Array]",mr={};mr[OG]=mr[LG]=mr[zG]=mr[kG]=mr[PG]=mr[RG]=mr[UG]=mr[$G]=mr[BG]=!0,mr[mG]=mr[vG]=mr[jG]=mr[bG]=mr[CG]=mr[MG]=mr[NG]=mr[IG]=mr[AG]=mr[_G]=mr[EG]=mr[DG]=mr[SG]=mr[xG]=mr[TG]=!1;function qG(r){return wG(r)&&yG(r.length)&&!!mr[gG(r)]}var YG=qG;function WG(r){return function(e){return r(e)}}var QG=WG,dm={exports:{}};(function(r,e){var t=Hx,i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,n=s&&s.exports===i,c=n&&t.process,l=(function(){try{var u=s&&s.require&&s.require("util").types;return u||c&&c.binding&&c.binding("util")}catch{}})();r.exports=l})(dm,dm.exports);var VG=YG,FG=QG,M3=dm.exports,N3=M3&&M3.isTypedArray,HG=N3?FG(N3):VG,oT=HG;function ZG(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var cT=ZG,GG=Bv,KG=dd,JG=Object.prototype,XG=JG.hasOwnProperty;function eK(r,e,t){var i=r[e];(!(XG.call(r,e)&&KG(i,t))||t===void 0&&!(e in r))&&GG(r,e,t)}var tK=eK,rK=tK,iK=Bv;function nK(r,e,t,i){var s=!t;t||(t={});for(var n=-1,c=e.length;++n<c;){var l=e[n],u=i?i(t[l],r[l],l,t,r):void 0;u===void 0&&(u=r[l]),s?iK(t,l,u):rK(t,l,u)}return t}var sK=nK;function aK(r,e){for(var t=-1,i=Array(r);++t<r;)i[t]=e(t);return i}var oK=aK,cK=9007199254740991,hK=/^(?:0|[1-9]\d*)$/;function lK(r,e){var t=typeof r;return e=e??cK,!!e&&(t=="number"||t!="symbol"&&hK.test(r))&&r>-1&&r%1==0&&r<e}var hT=lK,uK=oK,fK=iT,dK=nT,pK=zf.exports,gK=hT,yK=oT,wK=Object.prototype,mK=wK.hasOwnProperty;function vK(r,e){var t=dK(r),i=!t&&fK(r),s=!t&&!i&&pK(r),n=!t&&!i&&!s&&yK(r),c=t||i||s||n,l=c?uK(r.length,String):[],u=l.length;for(var f in r)(e||mK.call(r,f))&&!(c&&(f=="length"||s&&(f=="offset"||f=="parent")||n&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||gK(f,u)))&&l.push(f);return l}var bK=vK;function MK(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var NK=MK,IK=ao,AK=tT,_K=NK,EK=Object.prototype,DK=EK.hasOwnProperty;function SK(r){if(!IK(r))return _K(r);var e=AK(r),t=[];for(var i in r)i=="constructor"&&(e||!DK.call(r,i))||t.push(i);return t}var xK=SK,TK=bK,jK=xK,CK=qv;function OK(r){return CK(r)?TK(r,!0):jK(r)}var lT=OK,LK=sK,zK=lT;function kK(r){return LK(r,zK(r))}var PK=kK,I3=Xx,RK=fm.exports,UK=bZ,$K=NZ,BK=kZ,A3=iT,_3=nT,qK=rG,YK=zf.exports,WK=Uv,QK=ao,VK=pG,FK=oT,E3=cT,HK=PK;function ZK(r,e,t,i,s,n,c){var l=E3(r,t),u=E3(e,t),f=c.get(u);if(f){I3(r,t,f);return}var g=n?n(l,u,t+"",r,e,c):void 0,m=g===void 0;if(m){var N=_3(u),A=!N&&YK(u),_=!N&&!A&&FK(u);g=u,N||A||_?_3(l)?g=l:qK(l)?g=$K(l):A?(m=!1,g=RK(u,!0)):_?(m=!1,g=UK(u,!0)):g=[]:VK(u)||A3(u)?(g=l,A3(l)?g=HK(l):(!QK(l)||WK(l))&&(g=BK(u))):m=!1}m&&(c.set(u,g),s(g,u,i,n,c),c.delete(u)),I3(r,t,g)}var GK=ZK,KK=tZ,JK=Xx,XK=fZ,eJ=GK,tJ=ao,rJ=lT,iJ=cT;function uT(r,e,t,i,s){r!==e&&XK(e,function(n,c){if(s||(s=new KK),tJ(n))eJ(r,e,c,t,uT,i,s);else{var l=i?i(iJ(r,c),n,c+"",r,e,s):void 0;l===void 0&&(l=n),JK(r,c,l)}},rJ)}var nJ=uT;function sJ(r){return r}var fT=sJ;function aJ(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var oJ=aJ,cJ=oJ,D3=Math.max;function hJ(r,e,t){return e=D3(e===void 0?r.length-1:e,0),function(){for(var i=arguments,s=-1,n=D3(i.length-e,0),c=Array(n);++s<n;)c[s]=i[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=i[s];return l[e]=t(c),cJ(r,this,l)}}var lJ=hJ;function uJ(r){return function(){return r}}var fJ=uJ,dJ=fJ,S3=Jx,pJ=fT,gJ=S3?function(r,e){return S3(r,"toString",{configurable:!0,enumerable:!1,value:dJ(e),writable:!0})}:pJ,yJ=gJ,wJ=800,mJ=16,vJ=Date.now;function bJ(r){var e=0,t=0;return function(){var i=vJ(),s=mJ-(i-t);if(t=i,s>0){if(++e>=wJ)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var MJ=bJ,NJ=yJ,IJ=MJ,AJ=IJ(NJ),_J=AJ,EJ=fT,DJ=lJ,SJ=_J;function xJ(r,e){return SJ(DJ(r,e,EJ),r+"")}var TJ=xJ,jJ=dd,CJ=qv,OJ=hT,LJ=ao;function zJ(r,e,t){if(!LJ(t))return!1;var i=typeof e;return(i=="number"?CJ(t)&&OJ(e,t.length):i=="string"&&e in t)?jJ(t[e],r):!1}var kJ=zJ,PJ=TJ,RJ=kJ;function UJ(r){return PJ(function(e,t){var i=-1,s=t.length,n=s>1?t[s-1]:void 0,c=s>2?t[2]:void 0;for(n=r.length>3&&typeof n=="function"?(s--,n):void 0,c&&RJ(t[0],t[1],c)&&(n=s<3?void 0:n,s=1),e=Object(e);++i<s;){var l=t[i];l&&r(e,l,i,n)}return e})}var $J=UJ,BJ=nJ,qJ=$J,YJ=qJ(function(r,e,t){BJ(r,e,t)}),WJ=YJ,QJ=Object.defineProperty,VJ=Object.defineProperties,FJ=Object.getOwnPropertyDescriptors,x3=Object.getOwnPropertySymbols,HJ=Object.prototype.hasOwnProperty,ZJ=Object.prototype.propertyIsEnumerable,T3=(r,e,t)=>e in r?QJ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Cu=(r,e)=>{for(var t in e||(e={}))HJ.call(e,t)&&T3(r,t,e[t]);if(x3)for(var t of x3(e))ZJ.call(e,t)&&T3(r,t,e[t]);return r},GJ=(r,e)=>VJ(r,FJ(e));function gn(r,e,t){var i;const s=uc(r);return((i=e.rpcMap)==null?void 0:i[s.reference])||`${Fx}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function oo(r){return r.includes(":")?r.split(":")[1]:r}function dT(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function KJ(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const i=[];return t.forEach(s=>{const n=e.namespaces[s].accounts;i.push(...n)}),i}function By(r={},e={}){const t=j3(r),i=j3(e);return WJ(t,i)}function j3(r){var e,t,i,s;const n={};if(!Hh(r))return n;for(const[c,l]of Object.entries(r)){const u=zv(c)?[c]:l.chains,f=l.methods||[],g=l.events||[],m=l.rpcMap||{},N=Ah(c);n[N]=GJ(Cu(Cu({},n[N]),l),{chains:lf(u,(e=n[N])==null?void 0:e.chains),methods:lf(f,(t=n[N])==null?void 0:t.methods),events:lf(g,(i=n[N])==null?void 0:i.events),rpcMap:Cu(Cu({},m),(s=n[N])==null?void 0:s.rpcMap)})}return n}function JJ(r){return r.includes(":")?r.split(":")[2]:r}function C3(r){const e={};for(const[t,i]of Object.entries(r)){const s=i.methods||[],n=i.events||[],c=i.accounts||[],l=zv(t)?[t]:i.chains?i.chains:dT(i.accounts);e[t]={chains:l,methods:s,events:n,accounts:c}}return e}function qy(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const pT={},At=r=>pT[r],Yy=(r,e)=>{pT[r]=e};var XJ=Object.defineProperty,eX=(r,e,t)=>e in r?XJ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Io=(r,e,t)=>eX(r,typeof e!="symbol"?e+"":e,t);class tX{constructor(e){Io(this,"name","polkadot"),Io(this,"client"),Io(this,"httpProviders"),Io(this,"events"),Io(this,"namespace"),Io(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,At("disableProviderPing")))}}var rX=Object.defineProperty,iX=Object.defineProperties,nX=Object.getOwnPropertyDescriptors,O3=Object.getOwnPropertySymbols,sX=Object.prototype.hasOwnProperty,aX=Object.prototype.propertyIsEnumerable,pm=(r,e,t)=>e in r?rX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,L3=(r,e)=>{for(var t in e||(e={}))sX.call(e,t)&&pm(r,t,e[t]);if(O3)for(var t of O3(e))aX.call(e,t)&&pm(r,t,e[t]);return r},z3=(r,e)=>iX(r,nX(e)),Ao=(r,e,t)=>pm(r,typeof e!="symbol"?e+"":e,t);class oX{constructor(e){Ao(this,"name","eip155"),Ao(this,"client"),Ao(this,"chainId"),Ao(this,"namespace"),Ao(this,"httpProviders"),Ao(this,"events"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||gn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,At("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=parseInt(oo(t));e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const n=parseInt(s,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${n}`);else throw new Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,s;const n=(i=(t=e.request)==null?void 0:t.params)==null?void 0:i[0];if(!n)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const c=this.client.session.get(e.topic),l=((s=c?.sessionProperties)==null?void 0:s.capabilities)||{};if(l!=null&&l[n])return l?.[n];const u=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:z3(L3({},c.sessionProperties||{}),{capabilities:z3(L3({},l||{}),{[n]:u})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return u}async getCallStatus(e){var t,i;const s=this.client.session.get(e.topic),n=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(n){const l=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(l,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,l)}}const c=(i=s.sessionProperties)==null?void 0:i.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var i;const s=new URL(e),n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($i("eth_getUserOperationReceipt",[(i=t.request.params)==null?void 0:i[0]]))});if(!n.ok)throw new Error(`Failed to fetch user operation receipt - ${n.status}`);return await n.json()}getBundlerUrl(e,t){return`${oV}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var cX=Object.defineProperty,hX=(r,e,t)=>e in r?cX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,_o=(r,e,t)=>hX(r,typeof e!="symbol"?e+"":e,t);class lX{constructor(e){_o(this,"name","solana"),_o(this,"client"),_o(this,"httpProviders"),_o(this,"events"),_o(this,"namespace"),_o(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,At("disableProviderPing")))}}var uX=Object.defineProperty,fX=(r,e,t)=>e in r?uX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Eo=(r,e,t)=>fX(r,typeof e!="symbol"?e+"":e,t);class dX{constructor(e){Eo(this,"name","cosmos"),Eo(this,"client"),Eo(this,"httpProviders"),Eo(this,"events"),Eo(this,"namespace"),Eo(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,At("disableProviderPing")))}}var pX=Object.defineProperty,gX=(r,e,t)=>e in r?pX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Do=(r,e,t)=>gX(r,typeof e!="symbol"?e+"":e,t);class yX{constructor(e){Do(this,"name","algorand"),Do(this,"client"),Do(this,"httpProviders"),Do(this,"events"),Do(this,"namespace"),Do(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||gn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new _r(new kr(i,At("disableProviderPing")))}}var wX=Object.defineProperty,mX=(r,e,t)=>e in r?wX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,So=(r,e,t)=>mX(r,typeof e!="symbol"?e+"":e,t);class vX{constructor(e){So(this,"name","cip34"),So(this,"client"),So(this,"httpProviders"),So(this,"events"),So(this,"namespace"),So(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),s=oo(t);e[s]=this.createHttpProvider(s,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,At("disableProviderPing")))}}var bX=Object.defineProperty,MX=(r,e,t)=>e in r?bX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xo=(r,e,t)=>MX(r,typeof e!="symbol"?e+"":e,t);class NX{constructor(e){xo(this,"name","elrond"),xo(this,"client"),xo(this,"httpProviders"),xo(this,"events"),xo(this,"namespace"),xo(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,At("disableProviderPing")))}}var IX=Object.defineProperty,AX=(r,e,t)=>e in r?IX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,To=(r,e,t)=>AX(r,typeof e!="symbol"?e+"":e,t);class _X{constructor(e){To(this,"name","multiversx"),To(this,"client"),To(this,"httpProviders"),To(this,"events"),To(this,"namespace"),To(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,At("disableProviderPing")))}}var EX=Object.defineProperty,DX=(r,e,t)=>e in r?EX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,jo=(r,e,t)=>DX(r,typeof e!="symbol"?e+"":e,t);class SX{constructor(e){jo(this,"name","near"),jo(this,"client"),jo(this,"httpProviders"),jo(this,"events"),jo(this,"namespace"),jo(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||gn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace);return typeof i>"u"?void 0:new _r(new kr(i,At("disableProviderPing")))}}var xX=Object.defineProperty,TX=(r,e,t)=>e in r?xX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Co=(r,e,t)=>TX(r,typeof e!="symbol"?e+"":e,t);class jX{constructor(e){Co(this,"name","tezos"),Co(this,"client"),Co(this,"httpProviders"),Co(this,"events"),Co(this,"namespace"),Co(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||gn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace);return typeof i>"u"?void 0:new _r(new kr(i))}}var CX=Object.defineProperty,OX=(r,e,t)=>e in r?CX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Oo=(r,e,t)=>OX(r,typeof e!="symbol"?e+"":e,t);class LX{constructor(e){Oo(this,"name",Jo),Oo(this,"client"),Oo(this,"httpProviders"),Oo(this,"events"),Oo(this,"namespace"),Oo(this,"chainId"),this.namespace=e.namespace,this.events=At("events"),this.client=At("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(kn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const i={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const n=uc(s);i[`${n.namespace}:${n.reference}`]=this.createHttpProvider(s)}),i}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||gn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,At("disableProviderPing")))}}var zX=Object.defineProperty,kX=Object.defineProperties,PX=Object.getOwnPropertyDescriptors,k3=Object.getOwnPropertySymbols,RX=Object.prototype.hasOwnProperty,UX=Object.prototype.propertyIsEnumerable,gm=(r,e,t)=>e in r?zX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ou=(r,e)=>{for(var t in e||(e={}))RX.call(e,t)&&gm(r,t,e[t]);if(k3)for(var t of k3(e))UX.call(e,t)&&gm(r,t,e[t]);return r},Wy=(r,e)=>kX(r,PX(e)),Yn=(r,e,t)=>gm(r,typeof e!="symbol"?e+"":e,t);let $X=class gT{constructor(e){Yn(this,"client"),Yn(this,"namespaces"),Yn(this,"optionalNamespaces"),Yn(this,"sessionProperties"),Yn(this,"events",new jc),Yn(this,"rpcProviders",{}),Yn(this,"session"),Yn(this,"providerOpts"),Yn(this,"logger"),Yn(this,"uri"),Yn(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:da(ks({level:e?.logger||h3})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new gT(e);return await t.initialize(),t}async request(e,t,i){const[s,n]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Ou({},e),chainId:`${s}:${n}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,s){const n=new Date().getTime();this.request(e,i,s).then(c=>t(null,wa(n,c))).catch(c=>t(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:qt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:s}=await this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit("display_uri",i));const n=await s();if(this.session=n.session,this.session){const c=C3(this.session.namespaces);this.namespaces=By(this.namespaces,c),this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const s=await i();this.session=s;const n=C3(s.namespaces);return this.namespaces=By(this.namespaces,n),this.persist("namespaces",this.namespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,s]=this.validateChain(e),n=this.getProvider(i);n.name===Jo?n.setDefaultChain(`${i}:${s}`,t):n.setDefaultChain(s,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Za(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await HQ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||h3,relayUrl:this.providerOpts.relayUrl||nV,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Ah(t)))];Yy("client",this.client),Yy("events",this.events),Yy("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=KJ(t,this.session),s=dT(i),n=By(this.namespaces,this.optionalNamespaces),c=Wy(Ou({},n[t]),{accounts:i,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new oX({namespace:c});break;case"algorand":this.rpcProviders[t]=new yX({namespace:c});break;case"solana":this.rpcProviders[t]=new lX({namespace:c});break;case"cosmos":this.rpcProviders[t]=new dX({namespace:c});break;case"polkadot":this.rpcProviders[t]=new tX({namespace:c});break;case"cip34":this.rpcProviders[t]=new vX({namespace:c});break;case"elrond":this.rpcProviders[t]=new NX({namespace:c});break;case"multiversx":this.rpcProviders[t]=new _X({namespace:c});break;case"near":this.rpcProviders[t]=new SX({namespace:c});break;case"tezos":this.rpcProviders[t]=new jX({namespace:c});break;default:this.rpcProviders[Jo]?this.rpcProviders[Jo].updateNamespace(c):this.rpcProviders[Jo]=new LX({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const s=i.data;s&&Za(s)&&this.events.emit("accountsChanged",s.map(JJ))}else if(i.name==="chainChanged"){const s=t.chainId,n=t.event.data,c=Ah(s),l=qy(s)!==qy(n)?`${c}:${qy(n)}`:s;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:s}=t,n=(i=this.client)==null?void 0:i.session.get(e);this.session=Wy(Ou({},n),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Wy(Ou({},qt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(kn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Jo]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:s}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(c=>Ah(c)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const s=Ah(Object.keys(this.namespaces)[0]),n=this.rpcProviders[s].getDefaultChain();return[s,n]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(t||this.getProvider(i).setDefaultChain(s),this.namespaces[i]?this.namespaces[i].defaultChain=s:this.namespaces[`${i}:${s}`]?this.namespaces[`${i}:${s}`].defaultChain=s:this.namespaces[`${i}:${s}`]={defaultChain:s},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${l3}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${l3}/${e}`)}};const BX=$X,yT={caipNetworkIdToNumber(r){return r?Number(r.split(":")[1]):void 0},parseEvmChainId(r){return typeof r=="string"?this.caipNetworkIdToNumber(r):r},getNetworksByNamespace(r,e){return r?.filter(t=>t.chainNamespace===e)||[]},getFirstNetworkByNamespace(r,e){return this.getNetworksByNamespace(r,e)[0]}};var qX=20,YX=1,Ga=1e6,P3=1e6,WX=-7,QX=21,VX=!1,ql="[big.js] ",co=ql+"Invalid ",vd=co+"decimal places",FX=co+"rounding mode",wT=ql+"Division by zero",Rt={},us=void 0,HX=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function mT(){function r(e){var t=this;if(!(t instanceof r))return e===us?mT():new r(e);if(e instanceof r)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(r.strict===!0&&typeof e!="bigint")throw TypeError(co+"value");e=e===0&&1/e<0?"-0":String(e)}ZX(t,e)}t.constructor=r}return r.prototype=Rt,r.DP=qX,r.RM=YX,r.NE=WX,r.PE=QX,r.strict=VX,r.roundDown=0,r.roundHalfUp=1,r.roundHalfEven=2,r.roundUp=3,r}function ZX(r,e){var t,i,s;if(!HX.test(e))throw Error(co+"number");for(r.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),s=e.length,i=0;i<s&&e.charAt(i)=="0";)++i;if(i==s)r.c=[r.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(r.e=t-i-1,r.c=[],t=0;i<=s;)r.c[t++]=+e.charAt(i++)}return r}function ho(r,e,t,i){var s=r.c;if(t===us&&(t=r.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(FX);if(e<1)i=t===3&&(i||!!s[0])||e===0&&(t===1&&s[0]>=5||t===2&&(s[0]>5||s[0]===5&&(i||s[1]!==us))),s.length=1,i?(r.e=r.e-e+1,s[0]=1):s[0]=r.e=0;else if(e<s.length){if(i=t===1&&s[e]>=5||t===2&&(s[e]>5||s[e]===5&&(i||s[e+1]!==us||s[e-1]&1))||t===3&&(i||!!s[0]),s.length=e,i){for(;++s[--e]>9;)if(s[e]=0,e===0){++r.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return r}function lo(r,e,t){var i=r.e,s=r.c.join(""),n=s.length;if(e)s=s.charAt(0)+(n>1?"."+s.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)s="0"+s;s="0."+s}else if(i>0)if(++i>n)for(i-=n;i--;)s+="0";else i<n&&(s=s.slice(0,i)+"."+s.slice(i));else n>1&&(s=s.charAt(0)+"."+s.slice(1));return r.s<0&&t?"-"+s:s}Rt.abs=function(){var r=new this.constructor(this);return r.s=1,r};Rt.cmp=function(r){var e,t=this,i=t.c,s=(r=new t.constructor(r)).c,n=t.s,c=r.s,l=t.e,u=r.e;if(!i[0]||!s[0])return i[0]?n:s[0]?-c:0;if(n!=c)return n;if(e=n<0,l!=u)return l>u^e?1:-1;for(c=(l=i.length)<(u=s.length)?l:u,n=-1;++n<c;)if(i[n]!=s[n])return i[n]>s[n]^e?1:-1;return l==u?0:l>u^e?1:-1};Rt.div=function(r){var e=this,t=e.constructor,i=e.c,s=(r=new t(r)).c,n=e.s==r.s?1:-1,c=t.DP;if(c!==~~c||c<0||c>Ga)throw Error(vd);if(!s[0])throw Error(wT);if(!i[0])return r.s=n,r.c=[r.e=0],r;var l,u,f,g,m,N=s.slice(),A=l=s.length,_=i.length,E=i.slice(0,l),x=E.length,S=r,D=S.c=[],C=0,j=c+(S.e=e.e-r.e)+1;for(S.s=n,n=j<0?0:j,N.unshift(0);x++<l;)E.push(0);do{for(f=0;f<10;f++){if(l!=(x=E.length))g=l>x?1:-1;else for(m=-1,g=0;++m<l;)if(s[m]!=E[m]){g=s[m]>E[m]?1:-1;break}if(g<0){for(u=x==l?s:N;x;){if(E[--x]<u[x]){for(m=x;m&&!E[--m];)E[m]=9;--E[m],E[x]+=10}E[x]-=u[x]}for(;!E[0];)E.shift()}else break}D[C++]=g?f:++f,E[0]&&g?E[x]=i[A]||0:E=[i[A]]}while((A++<_||E[0]!==us)&&n--);return!D[0]&&C!=1&&(D.shift(),S.e--,j--),C>j&&ho(S,j,t.RM,E[0]!==us),S};Rt.eq=function(r){return this.cmp(r)===0};Rt.gt=function(r){return this.cmp(r)>0};Rt.gte=function(r){return this.cmp(r)>-1};Rt.lt=function(r){return this.cmp(r)<0};Rt.lte=function(r){return this.cmp(r)<1};Rt.minus=Rt.sub=function(r){var e,t,i,s,n=this,c=n.constructor,l=n.s,u=(r=new c(r)).s;if(l!=u)return r.s=-u,n.plus(r);var f=n.c.slice(),g=n.e,m=r.c,N=r.e;if(!f[0]||!m[0])return m[0]?r.s=-u:f[0]?r=new c(n):r.s=1,r;if(l=g-N){for((s=l<0)?(l=-l,i=f):(N=g,i=m),i.reverse(),u=l;u--;)i.push(0);i.reverse()}else for(t=((s=f.length<m.length)?f:m).length,l=u=0;u<t;u++)if(f[u]!=m[u]){s=f[u]<m[u];break}if(s&&(i=f,f=m,m=i,r.s=-r.s),(u=(t=m.length)-(e=f.length))>0)for(;u--;)f[e++]=0;for(u=e;t>l;){if(f[--t]<m[t]){for(e=t;e&&!f[--e];)f[e]=9;--f[e],f[t]+=10}f[t]-=m[t]}for(;f[--u]===0;)f.pop();for(;f[0]===0;)f.shift(),--N;return f[0]||(r.s=1,f=[N=0]),r.c=f,r.e=N,r};Rt.mod=function(r){var e,t=this,i=t.constructor,s=t.s,n=(r=new i(r)).s;if(!r.c[0])throw Error(wT);return t.s=r.s=1,e=r.cmp(t)==1,t.s=s,r.s=n,e?new i(t):(s=i.DP,n=i.RM,i.DP=i.RM=0,t=t.div(r),i.DP=s,i.RM=n,this.minus(t.times(r)))};Rt.neg=function(){var r=new this.constructor(this);return r.s=-r.s,r};Rt.plus=Rt.add=function(r){var e,t,i,s=this,n=s.constructor;if(r=new n(r),s.s!=r.s)return r.s=-r.s,s.minus(r);var c=s.e,l=s.c,u=r.e,f=r.c;if(!l[0]||!f[0])return f[0]||(l[0]?r=new n(s):r.s=s.s),r;if(l=l.slice(),e=c-u){for(e>0?(u=c,i=f):(e=-e,i=l),i.reverse();e--;)i.push(0);i.reverse()}for(l.length-f.length<0&&(i=f,f=l,l=i),e=f.length,t=0;e;l[e]%=10)t=(l[--e]=l[e]+f[e]+t)/10|0;for(t&&(l.unshift(t),++u),e=l.length;l[--e]===0;)l.pop();return r.c=l,r.e=u,r};Rt.pow=function(r){var e=this,t=new e.constructor("1"),i=t,s=r<0;if(r!==~~r||r<-P3||r>P3)throw Error(co+"exponent");for(s&&(r=-r);r&1&&(i=i.times(e)),r>>=1,!!r;)e=e.times(e);return s?t.div(i):i};Rt.prec=function(r,e){if(r!==~~r||r<1||r>Ga)throw Error(co+"precision");return ho(new this.constructor(this),r,e)};Rt.round=function(r,e){if(r===us)r=0;else if(r!==~~r||r<-Ga||r>Ga)throw Error(vd);return ho(new this.constructor(this),r+this.e+1,e)};Rt.sqrt=function(){var r,e,t,i=this,s=i.constructor,n=i.s,c=i.e,l=new s("0.5");if(!i.c[0])return new s(i);if(n<0)throw Error(ql+"No square root");n=Math.sqrt(+lo(i,!0,!0)),n===0||n===1/0?(e=i.c.join(""),e.length+c&1||(e+="0"),n=Math.sqrt(e),c=((c+1)/2|0)-(c<0||c&1),r=new s((n==1/0?"5e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+c)):r=new s(n+""),c=r.e+(s.DP+=4);do t=r,r=l.times(t.plus(i.div(t)));while(t.c.slice(0,c).join("")!==r.c.slice(0,c).join(""));return ho(r,(s.DP-=4)+r.e+1,s.RM)};Rt.times=Rt.mul=function(r){var e,t=this,i=t.constructor,s=t.c,n=(r=new i(r)).c,c=s.length,l=n.length,u=t.e,f=r.e;if(r.s=t.s==r.s?1:-1,!s[0]||!n[0])return r.c=[r.e=0],r;for(r.e=u+f,c<l&&(e=s,s=n,n=e,f=c,c=l,l=f),e=new Array(f=c+l);f--;)e[f]=0;for(u=l;u--;){for(l=0,f=c+u;f>u;)l=e[f]+n[u]*s[f-u-1]+l,e[f--]=l%10,l=l/10|0;e[f]=l}for(l?++r.e:e.shift(),u=e.length;!e[--u];)e.pop();return r.c=e,r};Rt.toExponential=function(r,e){var t=this,i=t.c[0];if(r!==us){if(r!==~~r||r<0||r>Ga)throw Error(vd);for(t=ho(new t.constructor(t),++r,e);t.c.length<r;)t.c.push(0)}return lo(t,!0,!!i)};Rt.toFixed=function(r,e){var t=this,i=t.c[0];if(r!==us){if(r!==~~r||r<0||r>Ga)throw Error(vd);for(t=ho(new t.constructor(t),r+t.e+1,e),r=r+t.e+1;t.c.length<r;)t.c.push(0)}return lo(t,!1,!!i)};Rt[Symbol.for("nodejs.util.inspect.custom")]=Rt.toJSON=Rt.toString=function(){var r=this,e=r.constructor;return lo(r,r.e<=e.NE||r.e>=e.PE,!!r.c[0])};Rt.toNumber=function(){var r=+lo(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(r.toString()))throw Error(ql+"Imprecise conversion");return r};Rt.toPrecision=function(r,e){var t=this,i=t.constructor,s=t.c[0];if(r!==us){if(r!==~~r||r<1||r>Ga)throw Error(co+"precision");for(t=ho(new i(t),r,e);t.c.length<r;)t.c.push(0)}return lo(t,r<=t.e||t.e<=i.NE||t.e>=i.PE,!!s)};Rt.valueOf=function(){var r=this,e=r.constructor;if(e.strict===!0)throw Error(ql+"valueOf disallowed");return lo(r,r.e<=e.NE||r.e>=e.PE,!0)};var uh=mT();const Lu={bigNumber(r){return r?new uh(r):new uh(0)},multiply(r,e){if(r===void 0||e===void 0)return new uh(0);const t=new uh(r),i=new uh(e);return t.times(i)},formatNumberToLocalString(r,e=2){return r===void 0?"0.00":typeof r=="number"?r.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(r).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(r){return r===void 0?0:parseFloat(r.replace(/,/gu,""))}},GX=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],KX=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],JX=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],He={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},XX={getERC20Abi:r=>He.USDT_CONTRACT_ADDRESSES.includes(r)?JX:GX,getSwapAbi:()=>KX},Ws={validateCaipAddress(r){if(r.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return r},parseCaipAddress(r){const e=r.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${r}`);const[t,i,s]=e;if(!t||!i||!s)throw new Error(`Invalid CAIP-10 address: ${r}`);return{chainNamespace:t,chainId:i,address:s}},parseCaipNetworkId(r){const e=r.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${r}`);const[t,i]=e;if(!t||!i)throw new Error(`Invalid CAIP-2 network id: ${r}`);return{chainNamespace:t,chainId:i}}},lt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache"};function Qy(r){if(!r)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${r}:connected_connector_id`}const nt={setItem(r,e){Eh()&&e!==void 0&&localStorage.setItem(r,e)},getItem(r){if(Eh())return localStorage.getItem(r)||void 0},removeItem(r){Eh()&&localStorage.removeItem(r)},clear(){Eh()&&localStorage.clear()}};function Eh(){return typeof window<"u"&&typeof localStorage<"u"}function ia(r,e){return e==="light"?{"--w3m-accent":r?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":r?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const eee=Symbol(),R3=Object.getPrototypeOf,ym=new WeakMap,tee=r=>r&&(ym.has(r)?ym.get(r):R3(r)===Object.prototype||R3(r)===Array.prototype),ree=r=>tee(r)&&r[eee]||null,U3=(r,e=!0)=>{ym.set(r,e)},kf={},Vy=r=>typeof r=="object"&&r!==null,Ks=new WeakMap,Dh=new WeakSet,iee=(r=Object.is,e=(f,g)=>new Proxy(f,g),t=f=>Vy(f)&&!Dh.has(f)&&(Array.isArray(f)||!(Symbol.iterator in f))&&!(f instanceof WeakMap)&&!(f instanceof WeakSet)&&!(f instanceof Error)&&!(f instanceof Number)&&!(f instanceof Date)&&!(f instanceof String)&&!(f instanceof RegExp)&&!(f instanceof ArrayBuffer),i=f=>{switch(f.status){case"fulfilled":return f.value;case"rejected":throw f.reason;default:throw f}},s=new WeakMap,n=(f,g,m=i)=>{const N=s.get(f);if(N?.[0]===g)return N[1];const A=Array.isArray(f)?[]:Object.create(Object.getPrototypeOf(f));return U3(A,!0),s.set(f,[g,A]),Reflect.ownKeys(f).forEach(_=>{if(Object.getOwnPropertyDescriptor(A,_))return;const E=Reflect.get(f,_),{enumerable:x}=Reflect.getOwnPropertyDescriptor(f,_),S={value:E,enumerable:x,configurable:!0};if(Dh.has(E))U3(E,!1);else if(E instanceof Promise)delete S.value,S.get=()=>m(E);else if(Ks.has(E)){const[D,C]=Ks.get(E);S.value=n(D,C(),m)}Object.defineProperty(A,_,S)}),Object.preventExtensions(A)},c=new WeakMap,l=[1,1],u=f=>{if(!Vy(f))throw new Error("object required");const g=c.get(f);if(g)return g;let m=l[0];const N=new Set,A=($,Z=++l[0])=>{m!==Z&&(m=Z,N.forEach(M=>M($,Z)))};let _=l[1];const E=($=++l[1])=>(_!==$&&!N.size&&(_=$,S.forEach(([Z])=>{const M=Z[1]($);M>m&&(m=M)})),m),x=$=>(Z,M)=>{const a=[...Z];a[1]=[$,...a[1]],A(a,M)},S=new Map,D=($,Z)=>{if((kf?"production":void 0)!=="production"&&S.has($))throw new Error("prop listener already exists");if(N.size){const M=Z[3](x($));S.set($,[Z,M])}else S.set($,[Z])},C=$=>{var Z;const M=S.get($);M&&(S.delete($),(Z=M[1])==null||Z.call(M))},j=$=>(N.add($),N.size===1&&S.forEach(([M,a],h)=>{if((kf?"production":void 0)!=="production"&&a)throw new Error("remove already exists");const d=M[3](x(h));S.set(h,[M,d])}),()=>{N.delete($),N.size===0&&S.forEach(([M,a],h)=>{a&&(a(),S.set(h,[M]))})}),k=Array.isArray(f)?[]:Object.create(Object.getPrototypeOf(f)),Q=e(k,{deleteProperty($,Z){const M=Reflect.get($,Z);C(Z);const a=Reflect.deleteProperty($,Z);return a&&A(["delete",[Z],M]),a},set($,Z,M,a){const h=Reflect.has($,Z),d=Reflect.get($,Z,a);if(h&&(r(d,M)||c.has(M)&&r(d,c.get(M))))return!0;C(Z),Vy(M)&&(M=ree(M)||M);let p=M;if(M instanceof Promise)M.then(w=>{M.status="fulfilled",M.value=w,A(["resolve",[Z],w])}).catch(w=>{M.status="rejected",M.reason=w,A(["reject",[Z],w])});else{!Ks.has(M)&&t(M)&&(p=u(M));const w=!Dh.has(p)&&Ks.get(p);w&&D(Z,w)}return Reflect.set($,Z,p,a),A(["set",[Z],M,d]),!0}});c.set(f,Q);const F=[k,E,n,j];return Ks.set(Q,F),Reflect.ownKeys(f).forEach($=>{const Z=Object.getOwnPropertyDescriptor(f,$);"value"in Z&&(Q[$]=f[$],delete Z.value,delete Z.writable),Object.defineProperty(k,$,Z)}),Q})=>[u,Ks,Dh,r,e,t,i,s,n,c,l],[nee]=iee();function jr(r={}){return nee(r)}function Bi(r,e,t){const i=Ks.get(r);(kf?"production":void 0)!=="production"&&!i&&console.warn("Please use proxy object");let s;const n=[],c=i[3];let l=!1;const f=c(g=>{n.push(g),s||(s=Promise.resolve().then(()=>{s=void 0,l&&e(n.splice(0))}))});return l=!0,()=>{l=!1,f()}}function Gh(r,e){const t=Ks.get(r);(kf?"production":void 0)!=="production"&&!t&&console.warn("Please use proxy object");const[i,s,n]=t;return n(i,s(),e)}function Ka(r){return Dh.add(r),r}function mn(r,e,t,i){let s=r[e];return Bi(r,()=>{const n=r[e];Object.is(s,n)||t(s=n)})}function see(r){const e=jr({data:Array.from([]),has(t){return this.data.some(i=>i[0]===t)},set(t,i){const s=this.data.find(n=>n[0]===t);return s?s[1]=i:this.data.push([t,i]),this},get(t){var i;return(i=this.data.find(s=>s[0]===t))==null?void 0:i[1]},delete(t){const i=this.data.findIndex(s=>s[0]===t);return i===-1?!1:(this.data.splice(i,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(t){this.data.forEach(i=>{t(i[1],i[0],this)})},keys(){return this.data.map(t=>t[0]).values()},values(){return this.data.map(t=>t[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var $3={};const Fy=(typeof Be<"u"&&typeof $3<"u"?$3.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Ki={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Fy,SECURE_SITE_DASHBOARD:`${Fy}/dashboard`,SECURE_SITE_FAVICON:`${Fy}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155","solana"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Fe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(r,e){return Date.now()-r>e},getActiveNetworkProps(){const r=Fe.getActiveNamespace(),e=Fe.getActiveCaipNetworkId(),t=e?e.split(":")[1]:void 0,i=t?isNaN(Number(t))?t:Number(t):void 0;return{namespace:r,caipNetworkId:e,chainId:i}},setWalletConnectDeepLink({name:r,href:e}){try{nt.setItem(lt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:r}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const r=nt.getItem(lt.DEEPLINK_CHOICE);if(r)return JSON.parse(r)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{nt.removeItem(lt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(r){try{nt.setItem(lt.ACTIVE_NAMESPACE,r)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(r){try{nt.setItem(lt.ACTIVE_CAIP_NETWORK_ID,r),Fe.setActiveNamespace(r.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return nt.getItem(lt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{nt.removeItem(lt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(r){try{const e=Qy(r);nt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(r){try{const e=Fe.getRecentWallets();e.find(i=>i.id===r.id)||(e.unshift(r),e.length>2&&e.pop(),nt.setItem(lt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const r=nt.getItem(lt.RECENT_WALLETS);return r?JSON.parse(r):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(r,e){try{const t=Qy(r);nt.setItem(t,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return nt.getItem(lt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(r){if(r)try{const e=Qy(r);return nt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",r)}},setConnectedSocialProvider(r){try{nt.setItem(lt.CONNECTED_SOCIAL,r)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return nt.getItem(lt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{nt.removeItem(lt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return nt.getItem(lt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return nt.getItem(lt.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(r){try{nt.setItem(lt.CONNECTION_STATUS,r)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return nt.getItem(lt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const r=nt.getItem(lt.CONNECTED_NAMESPACES);return r?.length?r.split(","):[]}catch{return[]}},setConnectedNamespaces(r){try{const e=Array.from(new Set(r));nt.setItem(lt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(r){try{const e=Fe.getConnectedNamespaces();e.includes(r)||(e.push(r),Fe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(r){try{const e=Fe.getConnectedNamespaces(),t=e.indexOf(r);t>-1&&(e.splice(t,1),Fe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return nt.getItem(lt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(r){try{nt.setItem(lt.TELEGRAM_SOCIAL_PROVIDER,r)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{nt.removeItem(lt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let r={};try{const e=nt.getItem(lt.PORTFOLIO_CACHE);r=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return r},removeAddressFromBalanceCache(r){try{const e=Fe.getBalanceCache();nt.setItem(lt.PORTFOLIO_CACHE,JSON.stringify({...e,[r]:void 0}))}catch{console.info("Unable to remove address from balance cache",r)}},getBalanceCacheForCaipAddress(r){try{const t=Fe.getBalanceCache()[r];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;Fe.removeAddressFromBalanceCache(r)}catch{console.info("Unable to get balance cache for address",r)}},updateBalanceCache(r){try{const e=Fe.getBalanceCache();e[r.caipAddress]=r,nt.setItem(lt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",r)}},getNativeBalanceCache(){let r={};try{const e=nt.getItem(lt.NATIVE_BALANCE_CACHE);r=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return r},removeAddressFromNativeBalanceCache(r){try{const e=Fe.getBalanceCache();nt.setItem(lt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[r]:void 0}))}catch{console.info("Unable to remove address from balance cache",r)}},getNativeBalanceCacheForCaipAddress(r){try{const t=Fe.getNativeBalanceCache()[r];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",r),Fe.removeAddressFromBalanceCache(r)}catch{console.info("Unable to get balance cache for address",r)}},updateNativeBalanceCache(r){try{const e=Fe.getNativeBalanceCache();e[r.caipAddress]=r,nt.setItem(lt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",r)}},getEnsCache(){let r={};try{const e=nt.getItem(lt.ENS_CACHE);r=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return r},getEnsFromCacheForAddress(r){try{const t=Fe.getEnsCache()[r];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;Fe.removeEnsFromCache(r)}catch{console.info("Unable to get ens name from cache",r)}},updateEnsCache(r){try{const e=Fe.getEnsCache();e[r.address]=r,nt.setItem(lt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",r)}},removeEnsFromCache(r){try{const e=Fe.getEnsCache();nt.setItem(lt.ENS_CACHE,JSON.stringify({...e,[r]:void 0}))}catch{console.info("Unable to remove ens name from cache",r)}},getIdentityCache(){let r={};try{const e=nt.getItem(lt.IDENTITY_CACHE);r=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return r},getIdentityFromCacheForAddress(r){try{const t=Fe.getIdentityCache()[r];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;Fe.removeIdentityFromCache(r)}catch{console.info("Unable to get identity from cache",r)}},updateIdentityCache(r){try{const e=Fe.getIdentityCache();e[r.address]={identity:r.identity,timestamp:r.timestamp},nt.setItem(lt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",r)}},removeIdentityFromCache(r){try{const e=Fe.getIdentityCache();nt.setItem(lt.IDENTITY_CACHE,JSON.stringify({...e,[r]:void 0}))}catch{console.info("Unable to remove identity from cache",r)}},clearAddressCache(){try{nt.removeItem(lt.PORTFOLIO_CACHE),nt.removeItem(lt.NATIVE_BALANCE_CACHE),nt.removeItem(lt.ENS_CACHE),nt.removeItem(lt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}}},ot={isMobile(){return this.isClient()?!!(window?.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(r,e=""){return r?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const r=window?.navigator.userAgent.toLowerCase();return ot.isMobile()&&r.includes("android")},isIos(){if(!this.isMobile())return!1;const r=window?.navigator.userAgent.toLowerCase();return r.includes("iphone")||r.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(r){return r?r-Date.now()<=Ki.TEN_SEC_MS:!0},isAllowedRetry(r,e=Ki.ONE_SEC_MS){return Date.now()-r>=e},copyToClopboard(r){navigator.clipboard.writeText(r)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},getPairingExpiry(){return Date.now()+Ki.FOUR_MINUTES_MS},getNetworkId(r){return r?.split(":")[1]},getPlainAddress(r){return r?.split(":")[2]},async wait(r){return new Promise(e=>{setTimeout(e,r)})},debounce(r,e=500){let t;return(...i)=>{function s(){r(...i)}t&&clearTimeout(t),t=setTimeout(s,e)}},isHttpUrl(r){return r.startsWith("http://")||r.startsWith("https://")},formatNativeUrl(r,e){if(ot.isHttpUrl(r))return this.formatUniversalUrl(r,e);let t=r;t.includes("://")||(t=r.replaceAll("/","").replaceAll(":",""),t=`${t}://`),t.endsWith("/")||(t=`${t}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${t}wc?uri=${i}`,href:t}},formatUniversalUrl(r,e){if(!ot.isHttpUrl(r))return this.formatNativeUrl(r,e);let t=r;t.endsWith("/")||(t=`${t}/`);const i=encodeURIComponent(e);return{redirect:`${t}wc?uri=${i}`,href:t}},getOpenTargetForPlatform(r){return r==="popupWindow"?r:this.isTelegram()?Fe.getTelegramSocialProvider()?"_top":"_blank":r},openHref(r,e,t){window?.open(r,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},returnOpenHref(r,e,t){return window?.open(r,this.getOpenTargetForPlatform(e),t||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(r){const e=new Promise((t,i)=>{const s=new Image;s.onload=t,s.onerror=i,s.crossOrigin="anonymous",s.src=r});return Promise.race([e,ot.wait(2e3)])},formatBalance(r,e){let t="0.000";if(typeof r=="string"){const i=Number(r);if(i){const s=Math.floor(i*1e3)/1e3;s&&(t=s.toString())}}return`${t}${e?` ${e}`:""}`},formatBalance2(r,e){let t;if(r==="0")t="0";else if(typeof r=="string"){const i=Number(r);i&&(t=i.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:t??"0",rest:t==="0"?"000":"",symbol:e}},getApiUrl(){return He.W3M_API_URL},getBlockchainApiUrl(){return He.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return He.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})},parseError(r){return typeof r=="string"?r:typeof r?.issues?.[0]?.message=="string"?r.issues[0].message:r instanceof Error?r.message:"Unknown error"},sortRequestedNetworks(r,e=[]){const t={};return e&&r&&(r.forEach((i,s)=>{t[i]=s}),e.sort((i,s)=>{const n=t[i.id],c=t[s.id];return n!==void 0&&c!==void 0?n-c:n!==void 0?-1:c!==void 0?1:0})),e},calculateBalance(r){let e=0;for(const t of r)e+=t.value??0;return e},formatTokenBalance(r){const e=r.toFixed(2),[t,i]=e.split(".");return{dollars:t,pennies:i}},isAddress(r,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(r)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(r)||/^(?:0x)?[0-9A-F]{40}$/iu.test(r))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(r);default:return!1}},uniqueBy(r,e){const t=new Set;return r.filter(i=>{const s=i[e];return t.has(s)?!1:(t.add(s),!0)})},generateSdkVersion(r,e,t){const s=r.length===0?Ki.ADAPTER_TYPES.UNIVERSAL:r.map(n=>n.adapterType).join(",");return`${e}-${s}-${t}`},createAccount(r,e,t,i,s){return{namespace:r,address:e,type:t,publicKey:i,path:s}},isCaipAddress(r){if(typeof r!="string")return!1;const e=r.split(":"),t=e[0];return e.filter(Boolean).length===3&&t in He.CHAIN_NAME_MAP},isMac(){const r=window?.navigator.userAgent.toLowerCase();return r.includes("macintosh")&&!r.includes("safari")},formatTelegramSocialLoginUrl(r){const e=`--${encodeURIComponent(window?.location.href)}`,t="state=";if(new URL(r).host==="auth.magic.link"){const s="provider_authorization_url=",n=r.substring(r.indexOf(s)+s.length),c=this.injectIntoUrl(decodeURIComponent(n),t,e);return r.replace(n,encodeURIComponent(c))}return this.injectIntoUrl(r,t,e)},injectIntoUrl(r,e,t){const i=r.indexOf(e);if(i===-1)throw new Error(`${e} parameter not found in the URL: ${r}`);const s=r.indexOf("&",i),n=e.length,c=s!==-1?s:r.length,l=r.substring(0,i+n),u=r.substring(i+n,c),f=r.substring(s),g=u+t;return l+g+f}};async function fh(...r){const e=await fetch(...r);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class bd{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:i,...s}){const n=this.createUrl(s);return(await fh(n,{method:"GET",headers:e,signal:t,cache:i})).json()}async getBlob({headers:e,signal:t,...i}){const s=this.createUrl(i);return(await fh(s,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:i,...s}){const n=this.createUrl(s);return(await fh(n,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:i})).json()}async put({body:e,headers:t,signal:i,...s}){const n=this.createUrl(s);return(await fh(n,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:i})).json()}async delete({body:e,headers:t,signal:i,...s}){const n=this.createUrl(s);return(await fh(n,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:i})).json()}createUrl({path:e,params:t}){const i=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([s,n])=>{n&&i.searchParams.append(s,n)}),this.clientId&&i.searchParams.append("clientId",this.clientId),i}}const aee={handleSolanaDeeplinkRedirect(r){if(X.state.activeChain===He.CHAIN.SOLANA){const e=window.location.href,t=encodeURIComponent(e);if(r==="Phantom"&&!("phantom"in window)){const i=e.startsWith("https")?"https":"http",s=e.split("/")[2],n=encodeURIComponent(`${i}://${s}`);window.location.href=`https://phantom.app/ul/browse/${t}?ref=${n}`}r==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${t}`)}}},nn=jr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Zn={state:nn,subscribeNetworkImages(r){return Bi(nn.networkImages,()=>r(nn.networkImages))},subscribeKey(r,e){return mn(nn,r,e)},subscribe(r){return Bi(nn,()=>r(nn))},setWalletImage(r,e){nn.walletImages[r]=e},setNetworkImage(r,e){nn.networkImages[r]=e},setChainImage(r,e){nn.chainImages[r]=e},setConnectorImage(r,e){nn.connectorImages={...nn.connectorImages,[r]:e}},setTokenImage(r,e){nn.tokenImages[r]=e},setCurrencyImage(r,e){nn.currencyImages[r]=e}},oee={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},Hy=jr({networkImagePromises:{}}),vT={async fetchWalletImage(r){if(r)return await ct._fetchWalletImage(r),this.getWalletImageById(r)},async fetchNetworkImage(r){if(!r)return;const e=this.getNetworkImageById(r);return e||(Hy.networkImagePromises[r]||(Hy.networkImagePromises[r]=ct._fetchNetworkImage(r)),await Hy.networkImagePromises[r],this.getNetworkImageById(r))},getWalletImageById(r){if(r)return Zn.state.walletImages[r]},getWalletImage(r){if(r?.image_url)return r?.image_url;if(r?.image_id)return Zn.state.walletImages[r.image_id]},getNetworkImage(r){if(r?.assets?.imageUrl)return r?.assets?.imageUrl;if(r?.assets?.imageId)return Zn.state.networkImages[r.assets.imageId]},getNetworkImageById(r){if(r)return Zn.state.networkImages[r]},getConnectorImage(r){if(r?.imageUrl)return r.imageUrl;if(r?.imageId)return Zn.state.connectorImages[r.imageId]},getChainImage(r){return Zn.state.networkImages[oee[r]]}},cee={getFeatureValue(r,e){const t=e?.[r];return t===void 0?Ki.DEFAULT_FEATURES[r]:t},filterSocialsByPlatform(r){if(!r||!r.length)return r;if(ot.isTelegram()){if(ot.isIos())return r.filter(e=>e!=="google");if(ot.isMac())return r.filter(e=>e!=="x");if(ot.isAndroid())return r.filter(e=>!["facebook","x"].includes(e))}return r}},Je=jr({features:Ki.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Ki.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0}),Re={state:Je,subscribeKey(r,e){return mn(Je,r,e)},setOptions(r){Object.assign(Je,r)},setFeatures(r){if(!r)return;Je.features||(Je.features=Ki.DEFAULT_FEATURES);const e={...Je.features,...r};Je.features=e,Je.features.socials&&(Je.features.socials=cee.filterSocialsByPlatform(Je.features.socials))},setProjectId(r){Je.projectId=r},setCustomRpcUrls(r){Je.customRpcUrls=r},setAllWallets(r){Je.allWallets=r},setIncludeWalletIds(r){Je.includeWalletIds=r},setExcludeWalletIds(r){Je.excludeWalletIds=r},setFeaturedWalletIds(r){Je.featuredWalletIds=r},setTokens(r){Je.tokens=r},setTermsConditionsUrl(r){Je.termsConditionsUrl=r},setPrivacyPolicyUrl(r){Je.privacyPolicyUrl=r},setCustomWallets(r){Je.customWallets=r},setIsSiweEnabled(r){Je.isSiweEnabled=r},setIsUniversalProvider(r){Je.isUniversalProvider=r},setSdkVersion(r){Je.sdkVersion=r},setMetadata(r){Je.metadata=r},setDisableAppend(r){Je.disableAppend=r},setEIP6963Enabled(r){Je.enableEIP6963=r},setDebug(r){Je.debug=r},setEnableWalletConnect(r){Je.enableWalletConnect=r},setEnableWalletGuide(r){Je.enableWalletGuide=r},setEnableAuthLogger(r){Je.enableAuthLogger=r},setEnableWallets(r){Je.enableWallets=r},setHasMultipleAddresses(r){Je.hasMultipleAddresses=r},setSIWX(r){Je.siwx=r},setConnectMethodsOrder(r){Je.features={...Je.features,connectMethodsOrder:r}},setWalletFeaturesOrder(r){Je.features={...Je.features,walletFeaturesOrder:r}},setSocialsOrder(r){Je.features={...Je.features,socials:r}},setCollapseWallets(r){Je.features={...Je.features,collapseWallets:r}},setEnableEmbedded(r){Je.enableEmbedded=r},setAllowUnsupportedChain(r){Je.allowUnsupportedChain=r},setManualWCControl(r){Je.manualWCControl=r},setEnableNetworkSwitch(r){Je.enableNetworkSwitch=r},setDefaultAccountTypes(r={}){Object.entries(r).forEach(([e,t])=>{t&&(Je.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(r){Je.universalProviderConfigOverride=r},getUniversalProviderConfigOverride(){return Je.universalProviderConfigOverride},getSnapshot(){return Gh(Je)}},Qs=jr({message:"",variant:"info",open:!1}),pf={state:Qs,subscribeKey(r,e){return mn(Qs,r,e)},open(r,e){const{debug:t}=Re.state,{shortMessage:i,longMessage:s}=r;t&&(Qs.message=i,Qs.variant=e,Qs.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Qs.open=!1,Qs.message="",Qs.variant="info"}},hee=ot.getAnalyticsUrl(),lee=new bd({baseUrl:hee,clientId:null}),uee=["MODAL_CREATED"],_s=jr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),er={state:_s,subscribe(r){return Bi(_s,()=>r(_s))},getSdkProperties(){const{projectId:r,sdkType:e,sdkVersion:t}=Re.state;return{projectId:r,st:e,sv:t||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(r){try{const e=Ze.state.address;if(uee.includes(r.data.event)||typeof window>"u")return;await lee.post({path:"/e",params:er.getSdkProperties(),body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:r.timestamp,props:{...r.data,address:e}}}),_s.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===He.HTTP_STATUS_CODES.FORBIDDEN&&!_s.reportedErrors.FORBIDDEN&&(pf.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Eh()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),_s.reportedErrors.FORBIDDEN=!0)}},sendEvent(r){_s.timestamp=Date.now(),_s.data=r,Re.state.features?.analytics&&er._sendAnalyticsEvent(_s)}},fee=ot.getApiUrl(),ji=new bd({baseUrl:fee,clientId:null}),dee="40",B3="4",pee=20,Lt=jr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ct={state:Lt,subscribeKey(r,e){return mn(Lt,r,e)},_getSdkProperties(){const{projectId:r,sdkType:e,sdkVersion:t}=Re.state;return{projectId:r,st:e||"appkit",sv:t||"html-wagmi-4.2.2"}},_filterOutExtensions(r){return Re.state.isUniversalProvider?r.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):r},async _fetchWalletImage(r){const e=`${ji.baseUrl}/getWalletImage/${r}`,t=await ji.getBlob({path:e,params:ct._getSdkProperties()});Zn.setWalletImage(r,URL.createObjectURL(t))},async _fetchNetworkImage(r){const e=`${ji.baseUrl}/public/getAssetImage/${r}`,t=await ji.getBlob({path:e,params:ct._getSdkProperties()});Zn.setNetworkImage(r,URL.createObjectURL(t))},async _fetchConnectorImage(r){const e=`${ji.baseUrl}/public/getAssetImage/${r}`,t=await ji.getBlob({path:e,params:ct._getSdkProperties()});Zn.setConnectorImage(r,URL.createObjectURL(t))},async _fetchCurrencyImage(r){const e=`${ji.baseUrl}/public/getCurrencyImage/${r}`,t=await ji.getBlob({path:e,params:ct._getSdkProperties()});Zn.setCurrencyImage(r,URL.createObjectURL(t))},async _fetchTokenImage(r){const e=`${ji.baseUrl}/public/getTokenImage/${r}`,t=await ji.getBlob({path:e,params:ct._getSdkProperties()});Zn.setTokenImage(r,URL.createObjectURL(t))},async fetchNetworkImages(){const e=X.getAllRequestedCaipNetworks()?.map(({assets:t})=>t?.imageId).filter(Boolean).filter(t=>!vT.getNetworkImageById(t));e&&await Promise.allSettled(e.map(t=>ct._fetchNetworkImage(t)))},async fetchConnectorImages(){const{connectors:r}=at.state,e=r.map(({imageId:t})=>t).filter(Boolean);await Promise.allSettled(e.map(t=>ct._fetchConnectorImage(t)))},async fetchCurrencyImages(r=[]){await Promise.allSettled(r.map(e=>ct._fetchCurrencyImage(e)))},async fetchTokenImages(r=[]){await Promise.allSettled(r.map(e=>ct._fetchTokenImage(e)))},async fetchFeaturedWallets(){const{featuredWalletIds:r}=Re.state;if(r?.length){const{data:e}=await ji.get({path:"/getWallets",params:{...ct._getSdkProperties(),page:"1",entries:r?.length?String(r.length):B3,include:r?.join(",")}});e.sort((i,s)=>r.indexOf(i.id)-r.indexOf(s.id));const t=e.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(t.map(i=>ct._fetchWalletImage(i))),Lt.featured=e,Lt.allFeatured=e}},async fetchRecommendedWallets(){try{Lt.isFetchingRecommendedWallets=!0;const{includeWalletIds:r,excludeWalletIds:e,featuredWalletIds:t}=Re.state,i=[...e??[],...t??[]].filter(Boolean),s=X.getRequestedCaipNetworkIds().join(","),{data:n,count:c}=await ji.get({path:"/getWallets",params:{...ct._getSdkProperties(),page:"1",chains:s,entries:B3,include:r?.join(","),exclude:i?.join(",")}}),l=Fe.getRecentWallets(),u=n.map(g=>g.image_id).filter(Boolean),f=l.map(g=>g.image_id).filter(Boolean);await Promise.allSettled([...u,...f].map(g=>ct._fetchWalletImage(g))),Lt.recommended=n,Lt.allRecommended=n,Lt.count=c??0}catch{}finally{Lt.isFetchingRecommendedWallets=!1}},async fetchWallets({page:r}){const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:i}=Re.state,s=X.getRequestedCaipNetworkIds().join(","),n=[...Lt.recommended.map(({id:f})=>f),...t??[],...i??[]].filter(Boolean),{data:c,count:l}=await ji.get({path:"/getWallets",params:{...ct._getSdkProperties(),page:String(r),entries:dee,chains:s,include:e?.join(","),exclude:n.join(",")}}),u=c.slice(0,pee).map(f=>f.image_id).filter(Boolean);await Promise.allSettled(u.map(f=>ct._fetchWalletImage(f))),Lt.wallets=ot.uniqueBy([...Lt.wallets,...ct._filterOutExtensions(c)],"id"),Lt.count=l>Lt.count?l:Lt.count,Lt.page=r},async initializeExcludedWallets({ids:r}){const e=X.getRequestedCaipNetworkIds().join(","),{data:t}=await ji.get({path:"/getWallets",params:{...ct._getSdkProperties(),page:"1",entries:String(r.length),chains:e,include:r?.join(",")}});t&&t.forEach(i=>{i?.rdns&&Lt.excludedWallets.push({rdns:i.rdns,name:i.name})})},async searchWallet({search:r,badge:e}){const{includeWalletIds:t,excludeWalletIds:i}=Re.state;Lt.search=[];const s=X.getRequestedCaipNetworkIds().join(","),{data:n}=await ji.get({path:"/getWallets",params:{...ct._getSdkProperties(),page:"1",entries:"100",search:r?.trim(),badge_type:e,chains:s,include:t?.join(","),exclude:i?.join(",")}});er.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:r??""}});const c=n.map(l=>l.image_id).filter(Boolean);await Promise.allSettled([...c.map(l=>ct._fetchWalletImage(l)),ot.wait(300)]),Lt.search=ct._filterOutExtensions(n)},initPromise(r,e){const t=Lt.promises[r];return t||(Lt.promises[r]=e())},prefetch({fetchConnectorImages:r=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:t=!0,fetchNetworkImages:i=!0}={}){const s=[r&&ct.initPromise("connectorImages",ct.fetchConnectorImages),e&&ct.initPromise("featuredWallets",ct.fetchFeaturedWallets),t&&ct.initPromise("recommendedWallets",ct.fetchRecommendedWallets),i&&ct.initPromise("networkImages",ct.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){Re.state.features?.analytics&&ct.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:r}=await ji.get({path:"/getAnalyticsConfig",params:ct._getSdkProperties()});Re.setFeatures({analytics:r})}catch{Re.setFeatures({analytics:!1})}},setFilterByNamespace(r){if(!r){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=X.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(t=>t.chains?.some(i=>e.includes(i))),Lt.recommended=Lt.allRecommended.filter(t=>t.chains?.some(i=>e.includes(i)))}},xt=jr({view:"Connect",history:["Connect"],transactionStack:[]}),Pt={state:xt,subscribeKey(r,e){return mn(xt,r,e)},pushTransactionStack(r){xt.transactionStack.push(r)},popTransactionStack(r){const e=xt.transactionStack.pop();if(e)if(r)this.goBack(),e?.onCancel?.();else{if(e.goBack)this.goBack();else if(e.replace){const i=xt.history.indexOf("ConnectingSiwe");i>0?this.goBackToIndex(i-1):(Qr.close(),xt.history=[])}else e.view&&this.reset(e.view);e?.onSuccess?.()}},push(r,e){r!==xt.view&&(xt.view=r,xt.history.push(r),xt.data=e)},reset(r,e){xt.view=r,xt.history=[r],xt.data=e},replace(r,e){xt.history.at(-1)===r||(xt.view=r,xt.history[xt.history.length-1]=r,xt.data=e)},goBack(){const r=!X.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(xt.history.length>1&&!xt.history.includes("UnsupportedChain")){xt.history.pop();const[e]=xt.history.slice(-1);e&&(xt.view=e)}else Qr.close();xt.data?.wallet&&(xt.data.wallet=void 0),setTimeout(()=>{if(r){Ze.setFarcasterUrl(void 0,X.state.activeChain);const e=at.getAuthConnector();e?.provider?.reload();const t=Gh(Re.state);e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType})}},100)},goBackToIndex(r){if(xt.history.length>1){xt.history=xt.history.slice(0,r+1);const[e]=xt.history.slice(-1);e&&(xt.view=e)}}},Es=jr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Ri={state:Es,subscribe(r){return Bi(Es,()=>r(Es))},setThemeMode(r){Es.themeMode=r;try{const e=at.getAuthConnector();if(e){const t=Ri.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:r,themeVariables:t,w3mThemeVariables:ia(t,r)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(r){Es.themeVariables={...Es.themeVariables,...r};try{const e=at.getAuthConnector();if(e){const t=Ri.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:ia(Es.themeVariables,Es.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Gh(Es)}},bT={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},zt=jr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...bT}}),at={state:zt,subscribe(r){return Bi(zt,()=>{r(zt)})},subscribeKey(r,e){return mn(zt,r,e)},initialize(r){r.forEach(e=>{const t=Fe.getConnectedConnectorId(e);t&&this.setConnectorId(t,e)})},setActiveConnector(r){r&&(zt.activeConnector=Ka(r))},setConnectors(r){r.filter(t=>!zt.allConnectors.some(i=>i.id===t.id&&this.getConnectorName(i.name)===this.getConnectorName(t.name)&&i.chain===t.chain)).forEach(t=>{t.type!=="MULTI_CHAIN"&&zt.allConnectors.push(Ka(t))}),zt.connectors=this.mergeMultiChainConnectors(zt.allConnectors)},removeAdapter(r){zt.allConnectors=zt.allConnectors.filter(e=>e.chain!==r),zt.connectors=this.mergeMultiChainConnectors(zt.allConnectors)},mergeMultiChainConnectors(r){const e=this.generateConnectorMapByName(r),t=[];return e.forEach(i=>{const s=i[0],n=s?.id===He.CONNECTOR_ID.AUTH;i.length>1&&s?t.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...i],type:n?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&t.push(s)}),t},generateConnectorMapByName(r){const e=new Map;return r.forEach(t=>{const{name:i}=t,s=this.getConnectorName(i);if(!s)return;const n=e.get(s)||[];n.find(l=>l.chain===t.chain)||n.push(t),e.set(s,n)}),e},getConnectorName(r){return r&&({"Trust Wallet":"Trust"}[r]||r)},getUniqueConnectorsByName(r){const e=[];return r.forEach(t=>{e.find(i=>i.chain===t.chain)||e.push(t)}),e},addConnector(r){if(r.id===He.CONNECTOR_ID.AUTH){const e=r,t=Gh(Re.state),i=Ri.getSnapshot().themeMode,s=Ri.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType}),e?.provider?.syncTheme({themeMode:i,themeVariables:s,w3mThemeVariables:ia(s,i)}),this.setConnectors([r])}else this.setConnectors([r])},getAuthConnector(r){const e=r||X.state.activeChain,t=zt.connectors.find(i=>i.id===He.CONNECTOR_ID.AUTH);if(t)return t?.connectors?.length?t.connectors.find(s=>s.chain===e):t},getAnnouncedConnectorRdns(){return zt.connectors.filter(r=>r.type==="ANNOUNCED").map(r=>r.info?.rdns)},getConnectorById(r){return zt.allConnectors.find(e=>e.id===r)},getConnector(r,e){return zt.allConnectors.filter(i=>i.chain===X.state.activeChain).find(i=>i.explorerId===r||i.info?.rdns===e)},syncIfAuthConnector(r){if(r.id!=="ID_AUTH")return;const e=r,t=Gh(Re.state),i=Ri.getSnapshot().themeMode,s=Ri.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:i,themeVariables:s,w3mThemeVariables:ia(s,i)})},getConnectorsByNamespace(r){const e=zt.allConnectors.filter(t=>t.chain===r);return this.mergeMultiChainConnectors(e)},selectWalletConnector(r){const e=at.getConnector(r.id,r.rdns);X.state.activeChain===He.CHAIN.SOLANA&&aee.handleSolanaDeeplinkRedirect(e?.name||r.name||""),e?Pt.push("ConnectingExternal",{connector:e}):Pt.push("ConnectingWalletConnect",{wallet:r})},getConnectors(r){return r?this.getConnectorsByNamespace(r):this.mergeMultiChainConnectors(zt.allConnectors)},setFilterByNamespace(r){zt.filterByNamespace=r,zt.connectors=this.getConnectors(r),ct.setFilterByNamespace(r)},setConnectorId(r,e){r&&(zt.activeConnectorIds={...zt.activeConnectorIds,[e]:r},Fe.setConnectedConnectorId(e,r))},removeConnectorId(r){zt.activeConnectorIds={...zt.activeConnectorIds,[r]:void 0},Fe.deleteConnectedConnectorId(r)},getConnectorId(r){if(r)return zt.activeConnectorIds[r]},isConnected(r){return r?!!zt.activeConnectorIds[r]:Object.values(zt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){zt.activeConnectorIds={...bT}}};function zu(r,e){return at.getConnectorId(r)===e}function gee(r){const e=Array.from(X.state.chains.keys());let t=[];return r?(t.push([r,X.state.chains.get(r)]),zu(r,He.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(i=>{i!==r&&zu(i,He.CONNECTOR_ID.WALLET_CONNECT)&&t.push([i,X.state.chains.get(i)])}):zu(r,He.CONNECTOR_ID.AUTH)&&e.forEach(i=>{i!==r&&zu(i,He.CONNECTOR_ID.AUTH)&&t.push([i,X.state.chains.get(i)])})):t=Array.from(X.state.chains.entries()),t}var yee=Object.defineProperty,wee=(r,e,t)=>e in r?yee(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,q3=(r,e,t)=>wee(r,typeof e!="symbol"?e+"":e,t);let mee=class extends wn{constructor(e){super(),this.opts=e,q3(this,"protocol","wc"),q3(this,"version",2)}};var vee=Object.defineProperty,bee=(r,e,t)=>e in r?vee(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Mee=(r,e,t)=>bee(r,e+"",t);let Nee=class extends wn{constructor(e,t){super(),this.core=e,this.logger=t,Mee(this,"records",new Map)}},Iee=class{constructor(e,t){this.logger=e,this.core=t}},Aee=class extends wn{constructor(e,t){super(),this.relayer=e,this.logger=t}},_ee=class extends wn{constructor(e){super()}},Eee=class{constructor(e,t,i,s){this.core=e,this.logger=t,this.name=i}},Dee=class extends wn{constructor(e,t){super(),this.relayer=e,this.logger=t}},See=class extends wn{constructor(e,t){super(),this.core=e,this.logger=t}},xee=class{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}},Tee=class{constructor(e,t){this.projectId=e,this.logger=t}},jee=class{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}};var Cee=Object.defineProperty,Oee=(r,e,t)=>e in r?Cee(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Y3=(r,e,t)=>Oee(r,typeof e!="symbol"?e+"":e,t);let Lee=class{constructor(e){this.opts=e,Y3(this,"protocol","wc"),Y3(this,"version",2)}},zee=class{constructor(e){this.client=e}};const Js={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Ca=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Kr=jr({...Ca}),Ii={state:Kr,subscribeKey(r,e){return mn(Kr,r,e)},showLoading(r,e={}){this._showMessage({message:r,variant:"loading",...e})},showSuccess(r){this._showMessage({message:r,variant:"success"})},showSvg(r,e){this._showMessage({message:r,svg:e})},showError(r){const e=ot.parseError(r);this._showMessage({message:e,variant:"error"})},hide(){Kr.message=Ca.message,Kr.variant=Ca.variant,Kr.svg=Ca.svg,Kr.open=Ca.open,Kr.autoClose=Ca.autoClose},_showMessage({message:r,svg:e,variant:t="success",autoClose:i=Ca.autoClose}){Kr.open?(Kr.open=!1,setTimeout(()=>{Kr.message=r,Kr.variant=t,Kr.svg=e,Kr.open=!0,Kr.autoClose=i},150)):(Kr.message=r,Kr.variant=t,Kr.svg=e,Kr.open=!0,Kr.autoClose=i)}},kh={getSIWX(){return Re.state.siwx},async initializeIfEnabled(){const r=Re.state.siwx,e=X.getActiveCaipAddress();if(!(r&&e))return;const[t,i,s]=e.split(":");if(X.checkIfSupportedNetwork(t))try{if((await r.getSessions(`${t}:${i}`,s)).length)return;await Qr.open({view:"SIWXSignMessage"})}catch(n){console.error("SIWXUtil:initializeIfEnabled",n),er.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await Xt._getClient()?.disconnect().catch(console.error),Pt.reset("Connect"),Ii.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const r=Re.state.siwx,e=ot.getPlainAddress(X.getActiveCaipAddress()),t=X.getActiveCaipNetwork(),i=Xt._getClient();if(!r)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!t)throw new Error("No ActiveCaipNetwork or client found");if(!i)throw new Error("No ConnectionController client found");try{const s=await r.createMessage({chainId:t.caipNetworkId,accountAddress:e}),n=s.toString();at.getConnectorId(t.chainNamespace)===He.CONNECTOR_ID.AUTH&&Pt.pushTransactionStack({view:null,goBack:!1,replace:!0});const l=await i.signMessage(n);await r.addSession({data:s,message:n,signature:l}),Qr.close(),er.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const n=this.getSIWXEventProperties();(!Qr.state.open||Pt.state.view==="ApproveTransaction")&&await Qr.open({view:"SIWXSignMessage"}),n.isSmartAccount?Ii.showError("This application might not support Smart Accounts"):Ii.showError("Signature declined"),er.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:n}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){try{this.getSIWX()?.getRequired?.()?await Xt.disconnect():Qr.close(),Pt.reset("Connect"),er.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(r){console.error("SIWXUtil:cancelSignMessage",r)}},async getSessions(){const r=Re.state.siwx,e=ot.getPlainAddress(X.getActiveCaipAddress()),t=X.getActiveCaipNetwork();return r&&e&&t?r.getSessions(t.caipNetworkId,e):[]},async isSIWXCloseDisabled(){const r=this.getSIWX();if(r){const e=Pt.state.view==="ApproveTransaction",t=Pt.state.view==="SIWXSignMessage";if(e||t)return r.getRequired?.()&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:r,chains:e,methods:t}){const i=kh.getSIWX(),s=new Set(e.map(l=>l.split(":")[0]));if(!i||s.size!==1||!s.has("eip155"))return!1;const n=await i.createMessage({chainId:X.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),c=await r.authenticate({nonce:n.nonce,domain:n.domain,uri:n.uri,exp:n.expirationTime,iat:n.issuedAt,nbf:n.notBefore,requestId:n.requestId,version:n.version,resources:n.resources,statement:n.statement,chainId:n.chainId,methods:t,chains:[n.chainId,...e.filter(l=>l!==n.chainId)]});if(Ii.showLoading("Authenticating...",{autoClose:!1}),Ze.setConnectedWalletInfo({...c.session.peer.metadata,name:c.session.peer.metadata.name,icon:c.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(s)[0]),c?.auths?.length){const l=c.auths.map(u=>{const f=r.client.formatAuthMessage({request:u.p,iss:u.p.iss});return{data:{...u.p,accountAddress:u.p.iss.split(":").slice(-1).join(""),chainId:u.p.iss.split(":").slice(2,4).join(":"),uri:u.p.aud,version:u.p.version||n.version,expirationTime:u.p.exp,issuedAt:u.p.iat,notBefore:u.p.nbf},message:f,signature:u.s.s,cacao:u}});try{await i.setSessions(l),er.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:kh.getSIWXEventProperties()})}catch(u){throw console.error("SIWX:universalProviderAuth - failed to set sessions",u),er.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:kh.getSIWXEventProperties()}),await r.disconnect().catch(console.error),u}finally{Ii.hide()}}return!0},getSIWXEventProperties(){return{network:X.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:Ze.state.preferredAccountType===Js.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const r=this.getSIWX();r&&await r.setSessions([])}},Kt=jr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),kee={state:Kt,subscribe(r){return Bi(Kt,()=>r(Kt))},setLastNetworkInView(r){Kt.lastNetworkInView=r},async fetchTransactions(r,e){if(!r)throw new Error("Transactions can't be fetched without an accountAddress");Kt.loading=!0;try{const t=await Xe.fetchTransactions({account:r,cursor:Kt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:X.state.activeCaipNetwork?.caipNetworkId}),i=this.filterSpamTransactions(t.data),s=this.filterByConnectedChain(i),n=[...Kt.transactions,...s];Kt.loading=!1,e==="coinbase"?Kt.coinbaseTransactions=this.groupTransactionsByYearAndMonth(Kt.coinbaseTransactions,t.data):(Kt.transactions=n,Kt.transactionsByYear=this.groupTransactionsByYearAndMonth(Kt.transactionsByYear,s)),Kt.empty=n.length===0,Kt.next=t.next?t.next:void 0}catch{er.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:r,projectId:Re.state.projectId,cursor:Kt.next,isSmartAccount:Ze.state.preferredAccountType===Js.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ii.showError("Failed to fetch transactions"),Kt.loading=!1,Kt.empty=!0,Kt.next=void 0}},groupTransactionsByYearAndMonth(r={},e=[]){const t=r;return e.forEach(i=>{const s=new Date(i.metadata.minedAt).getFullYear(),n=new Date(i.metadata.minedAt).getMonth(),c=t[s]??{},u=(c[n]??[]).filter(f=>f.id!==i.id);t[s]={...c,[n]:[...u,i].sort((f,g)=>new Date(g.metadata.minedAt).getTime()-new Date(f.metadata.minedAt).getTime())}}),t},filterSpamTransactions(r){return r.filter(e=>!e.transfers.every(i=>i.nft_info?.flags.is_spam===!0))},filterByConnectedChain(r){const e=X.state.activeCaipNetwork?.caipNetworkId;return r.filter(i=>i.metadata.chain===e)},clearCursor(){Kt.next=void 0},resetTransactions(){Kt.transactions=[],Kt.transactionsByYear={},Kt.lastNetworkInView=void 0,Kt.loading=!1,Kt.empty=!1,Kt.next=void 0}},Nr=jr({wcError:!1,buffering:!1,status:"disconnected"});let Lo;const Xt={state:Nr,subscribeKey(r,e){return mn(Nr,r,e)},_getClient(){return Nr._client},setClient(r){Nr._client=Ka(r)},async connectWalletConnect(){if(ot.isTelegram()||ot.isSafari()&&ot.isIos()){if(Lo){await Lo,Lo=void 0;return}if(!ot.isPairingExpired(Nr?.wcPairingExpiry)){const r=Nr.wcUri;Nr.wcUri=r;return}Lo=this._getClient()?.connectWalletConnect?.().catch(()=>{}),this.state.status="connecting",await Lo,Lo=void 0,Nr.wcPairingExpiry=void 0,this.state.status="connected"}else await this._getClient()?.connectWalletConnect?.()},async connectExternal(r,e,t=!0){await this._getClient()?.connectExternal?.(r),t&&X.setActiveNamespace(e)},async reconnectExternal(r){await this._getClient()?.reconnectExternal?.(r);const e=r.chain||X.state.activeChain;e&&at.setConnectorId(r.id,e)},async setPreferredAccountType(r){Qr.setLoading(!0,X.state.activeChain);const e=at.getAuthConnector();e&&(await e?.provider.setPreferredAccount(r),await this.reconnectExternal(e),Qr.setLoading(!1,X.state.activeChain),er.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:r,network:X.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(r){return this._getClient()?.signMessage(r)},parseUnits(r,e){return this._getClient()?.parseUnits(r,e)},formatUnits(r,e){return this._getClient()?.formatUnits(r,e)},async sendTransaction(r){return this._getClient()?.sendTransaction(r)},async getCapabilities(r){return this._getClient()?.getCapabilities(r)},async grantPermissions(r){return this._getClient()?.grantPermissions(r)},async walletGetAssets(r){return this._getClient()?.walletGetAssets(r)??{}},async estimateGas(r){return this._getClient()?.estimateGas(r)},async writeContract(r){return this._getClient()?.writeContract(r)},async getEnsAddress(r){return this._getClient()?.getEnsAddress(r)},async getEnsAvatar(r){return this._getClient()?.getEnsAvatar(r)},checkInstalled(r){return this._getClient()?.checkInstalled?.(r)||!1},resetWcConnection(){Nr.wcUri=void 0,Nr.wcPairingExpiry=void 0,Nr.wcLinking=void 0,Nr.recentWallet=void 0,Nr.status="disconnected",kee.resetTransactions(),Fe.deleteWalletConnectDeepLink()},resetUri(){Nr.wcUri=void 0,Nr.wcPairingExpiry=void 0},finalizeWcConnection(){const{wcLinking:r,recentWallet:e}=Xt.state;r&&Fe.setWalletConnectDeepLink(r),e&&Fe.setAppKitRecent(e),er.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:r?"mobile":"qrcode",name:Pt.state.data?.wallet?.name||"Unknown"}})},setWcBasic(r){Nr.wcBasic=r},setUri(r){Nr.wcUri=r,Nr.wcPairingExpiry=ot.getPairingExpiry()},setWcLinking(r){Nr.wcLinking=r},setWcError(r){Nr.wcError=r,Nr.buffering=!1},setRecentWallet(r){Nr.recentWallet=r},setBuffering(r){Nr.buffering=r},setStatus(r){Nr.status=r},async disconnect(r){try{Qr.setLoading(!0,r),await kh.clearSessions(),await X.disconnect(r),Qr.setLoading(!1,r),at.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},dh=jr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Os={state:dh,subscribe(r){return Bi(dh,()=>r(dh))},set(r){Object.assign(dh,{...dh,...r})}};function Pee(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}function W3(r){return Pee(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}const MT="2.45.2";let Zy={getDocsUrl:({docsBaseUrl:r,docsPath:e="",docsSlug:t})=>e?`${r??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${MT}`},ws=class wm extends Error{constructor(e,t={}){const i=t.cause instanceof wm?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof wm&&t.cause.docsPath||t.docsPath,n=Zy.getDocsUrl?.({...t,docsPath:s}),c=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...i?[`Details: ${i}`]:[],...Zy.version?[`Version: ${Zy.version}`]:[]].join(`
`);super(c,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=MT}walk(e){return NT(this,e)}};function NT(r,e){return e?.(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause!==void 0?NT(r.cause,e):e?null:r}let IT=class extends ws{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};function Yv(r,{dir:e,size:t=32}={}){return typeof r=="string"?Ree(r,{dir:e,size:t}):Uee(r,{dir:e,size:t})}function Ree(r,{dir:e,size:t=32}={}){if(t===null)return r;const i=r.replace("0x","");if(i.length>t*2)throw new IT({size:Math.ceil(i.length/2),targetSize:t,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function Uee(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new IT({size:r.length,targetSize:t,type:"bytes"});const i=new Uint8Array(t);for(let s=0;s<t;s++){const n=e==="right";i[n?s:t-s-1]=r[n?s:r.length-s-1]}return i}let $ee=class extends ws{constructor({max:e,min:t,signed:i,size:s,value:n}){super(`Number "${n}" is not in safe ${s?`${s*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},Bee=class extends ws{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function AT(r,{size:e}){if(W3(r)>e)throw new Bee({givenSize:W3(r),maxSize:e})}const qee=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Q3(r,e={}){return typeof r=="number"||typeof r=="bigint"?Wee(r,e):typeof r=="string"?ET(r,e):typeof r=="boolean"?Yee(r,e):_T(r,e)}function Yee(r,e={}){const t=`0x${Number(r)}`;return typeof e.size=="number"?(AT(t,{size:e.size}),Yv(t,{size:e.size})):t}function _T(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=qee[r[s]];const i=`0x${t}`;return typeof e.size=="number"?(AT(i,{size:e.size}),Yv(i,{dir:"right",size:e.size})):i}function Wee(r,e={}){const{signed:t,size:i}=e,s=BigInt(r);let n;i?t?n=(1n<<BigInt(i)*8n-1n)-1n:n=2n**(BigInt(i)*8n)-1n:typeof r=="number"&&(n=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof n=="bigint"&&t?-n-1n:0;if(n&&s>n||s<c){const u=typeof r=="bigint"?"n":"";throw new $ee({max:n?`${n}${u}`:void 0,min:`${c}${u}`,signed:t,size:i,value:`${r}${u}`})}const l=`0x${(t&&s<0?(1n<<BigInt(i*8))+BigInt(s):s).toString(16)}`;return i?Yv(l,{size:i}):l}const Qee=new TextEncoder;function ET(r,e={}){const t=Qee.encode(r);return _T(t,e)}let Vee=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const i=this.keys().next().value;i&&this.delete(i)}return this}};const Ya=(r,e,t)=>JSON.stringify(r,(i,s)=>typeof s=="bigint"?s.toString():s,t);function Fee(r,e){let t=r.toString();const i=t.startsWith("-");i&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,n]=[t.slice(0,t.length-e),t.slice(t.length-e)];return n=n.replace(/(0+)$/,""),`${i?"-":""}${s||"0"}${n?`.${n}`:""}`}const Wv=r=>r;class Ph extends ws{constructor({body:e,cause:t,details:i,headers:s,status:n,url:c}){super("HTTP request failed.",{cause:t,details:i,metaMessages:[n&&`Status: ${n}`,`URL: ${Wv(c)}`,e&&`Request body: ${Ya(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=n,this.url=c}}class DT extends ws{constructor({body:e,error:t,url:i}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${Wv(i)}`,`Request body: ${Ya(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data,this.url=i}}class V3 extends ws{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Wv(t)}`,`Request body: ${Ya(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=t}}const Hee=-1;class Xi extends ws{constructor(e,{code:t,docsPath:i,metaMessages:s,name:n,shortMessage:c}){super(c,{cause:e,docsPath:i,metaMessages:s||e?.metaMessages,name:n||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=n||e.name,this.code=e instanceof DT?e.code:t??Hee}}class en extends Xi{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class Kh extends Xi{constructor(e){super(e,{code:Kh.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Kh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Jh extends Xi{constructor(e){super(e,{code:Jh.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Jh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Xh extends Xi{constructor(e,{method:t}={}){super(e,{code:Xh.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(Xh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class el extends Xi{constructor(e){super(e,{code:el.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(el,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Nc extends Xi{constructor(e){super(e,{code:Nc.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Nc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class tl extends Xi{constructor(e){super(e,{code:tl.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(tl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class rl extends Xi{constructor(e){super(e,{code:rl.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(rl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class il extends Xi{constructor(e){super(e,{code:il.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(il,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Ic extends Xi{constructor(e){super(e,{code:Ic.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Ic,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class $a extends Xi{constructor(e,{method:t}={}){super(e,{code:$a.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty($a,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Ac extends Xi{constructor(e){super(e,{code:Ac.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Ac,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class nl extends Xi{constructor(e){super(e,{code:nl.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(nl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Wa extends en{constructor(e){super(e,{code:Wa.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Wa,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class sl extends en{constructor(e){super(e,{code:sl.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(sl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class al extends en{constructor(e,{method:t}={}){super(e,{code:al.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(al,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class ol extends en{constructor(e){super(e,{code:ol.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(ol,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class cl extends en{constructor(e){super(e,{code:cl.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(cl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class hl extends en{constructor(e){super(e,{code:hl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(hl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class ll extends en{constructor(e){super(e,{code:ll.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(ll,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class ul extends en{constructor(e){super(e,{code:ul.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(ul,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class fl extends en{constructor(e){super(e,{code:fl.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(fl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class dl extends en{constructor(e){super(e,{code:dl.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(dl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class pl extends en{constructor(e){super(e,{code:pl.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(pl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class gl extends en{constructor(e){super(e,{code:gl.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(gl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class yl extends en{constructor(e){super(e,{code:yl.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(yl,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class _c extends en{constructor(e){super(e,{code:_c.code,name:"WalletConnectSessionSettlementError",shortMessage:"WalletConnect session settlement failed."})}}Object.defineProperty(_c,"code",{enumerable:!0,configurable:!0,writable:!0,value:7e3});class Zee extends Xi{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class Qv extends ws{constructor({cause:e,message:t}={}){const i=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${i?`with reason: ${i}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Qv,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Qv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});function Gee(){let r=()=>{},e=()=>{};return{promise:new Promise((i,s)=>{r=i,e=s}),resolve:r,reject:e}}const Gy=new Map;function Kee({fn:r,id:e,shouldSplitBatch:t,wait:i=0,sort:s}){const n=async()=>{const g=u();c();const m=g.map(({args:N})=>N);m.length!==0&&r(m).then(N=>{s&&Array.isArray(N)&&N.sort(s);for(let A=0;A<g.length;A++){const{resolve:_}=g[A];_?.([N[A],N])}}).catch(N=>{for(let A=0;A<g.length;A++){const{reject:_}=g[A];_?.(N)}})},c=()=>Gy.delete(e),l=()=>u().map(({args:g})=>g),u=()=>Gy.get(e)||[],f=g=>Gy.set(e,[...u(),g]);return{flush:c,async schedule(g){const{promise:m,resolve:N,reject:A}=Gee();return t?.([...l(),g])&&n(),u().length>0?(f({args:g,resolve:N,reject:A}),m):(f({args:g,resolve:N,reject:A}),setTimeout(n,i),m)}}}async function ST(r){return new Promise(e=>setTimeout(e,r))}function Jee(r,{delay:e=100,retryCount:t=2,shouldRetry:i=()=>!0}={}){return new Promise((s,n)=>{const c=async({count:l=0}={})=>{const u=async({error:f})=>{const g=typeof e=="function"?e({count:l,error:f}):e;g&&await ST(g),c({count:l+1})};try{const f=await r();s(f)}catch(f){if(l<t&&await i({count:l,error:f}))return u({error:f});n(f)}};c()})}const mm=256;let ku=mm,Pu;function Xee(r=11){if(!Pu||ku+r>mm*2){Pu="",ku=0;for(let e=0;e<mm;e++)Pu+=(256+Math.random()*256|0).toString(16).substring(1)}return Pu.substring(ku,ku+++r)}const Ru=new Vee(8192);function ete(r,{enabled:e=!0,id:t}){if(!e||!t)return r();if(Ru.get(t))return Ru.get(t);const i=r().finally(()=>Ru.delete(t));return Ru.set(t,i),i}function tte(r,e={}){return async(t,i={})=>{const{dedupe:s=!1,methods:n,retryDelay:c=150,retryCount:l=3,uid:u}={...e,...i},{method:f}=t;if(n?.exclude?.includes(f))throw new $a(new Error("method not supported"),{method:f});if(n?.include&&!n.include.includes(f))throw new $a(new Error("method not supported"),{method:f});const g=s?ET(`${u}.${Ya(t)}`):void 0;return ete(()=>Jee(async()=>{try{return await r(t)}catch(m){const N=m;switch(N.code){case Kh.code:throw new Kh(N);case Jh.code:throw new Jh(N);case Xh.code:throw new Xh(N,{method:t.method});case el.code:throw new el(N);case Nc.code:throw new Nc(N);case tl.code:throw new tl(N);case rl.code:throw new rl(N);case il.code:throw new il(N);case Ic.code:throw new Ic(N);case $a.code:throw new $a(N,{method:t.method});case Ac.code:throw new Ac(N);case nl.code:throw new nl(N);case Wa.code:throw new Wa(N);case sl.code:throw new sl(N);case al.code:throw new al(N);case ol.code:throw new ol(N);case cl.code:throw new cl(N);case hl.code:throw new hl(N);case ll.code:throw new ll(N);case ul.code:throw new ul(N);case fl.code:throw new fl(N);case dl.code:throw new dl(N);case pl.code:throw new pl(N);case gl.code:throw new gl(N);case yl.code:throw new yl(N);case 5e3:throw new Wa(N);case _c.code:throw new _c(N);default:throw m instanceof ws?m:new Zee(N)}}},{delay:({count:m,error:N})=>{if(N&&N instanceof Ph){const A=N?.headers?.get("Retry-After");if(A?.match(/\d/))return Number.parseInt(A,10)*1e3}return~~(1<<m)*c},retryCount:l,shouldRetry:({error:m})=>rte(m)}),{enabled:s,id:g})}}function rte(r){return"code"in r&&typeof r.code=="number"?r.code===-1||r.code===Ac.code||r.code===Nc.code:r instanceof Ph&&r.status?r.status===403||r.status===408||r.status===413||r.status===429||r.status===500||r.status===502||r.status===503||r.status===504:!0}function ite(r,{errorInstance:e=new Error("timed out"),timeout:t,signal:i}){return new Promise((s,n)=>{(async()=>{let c;try{const l=new AbortController;t>0&&(c=setTimeout(()=>{i&&l.abort()},t)),s(await r({signal:l?.signal||null}))}catch(l){l?.name==="AbortError"&&n(e),n(l)}finally{clearTimeout(c)}})()})}function nte(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const F3=nte();function ste(r,e={}){const{url:t,headers:i}=ate(r);return{async request(s){const{body:n,fetchFn:c=e.fetchFn??fetch,onRequest:l=e.onRequest,onResponse:u=e.onResponse,timeout:f=e.timeout??1e4}=s,g={...e.fetchOptions??{},...s.fetchOptions??{}},{headers:m,method:N,signal:A}=g;try{const _=await ite(async({signal:x})=>{const S={...g,body:Array.isArray(n)?Ya(n.map(k=>({jsonrpc:"2.0",id:k.id??F3.take(),...k}))):Ya({jsonrpc:"2.0",id:n.id??F3.take(),...n}),headers:{...i,"Content-Type":"application/json",...m},method:N||"POST",signal:A||(f>0?x:null)},D=new Request(t,S),C=await l?.(D,S)??{...S,url:t};return await c(C.url??t,C)},{errorInstance:new V3({body:n,url:t}),timeout:f,signal:!0});u&&await u(_);let E;if(_.headers.get("Content-Type")?.startsWith("application/json"))E=await _.json();else{E=await _.text();try{E=JSON.parse(E||"{}")}catch(x){if(_.ok)throw x;E={error:E}}}if(!_.ok)throw new Ph({body:n,details:Ya(E.error)||_.statusText,headers:_.headers,status:_.status,url:t});return E}catch(_){throw _ instanceof Ph||_ instanceof V3?_:new Ph({body:n,cause:_,url:t})}}}}function ate(r){try{const e=new URL(r),t=(()=>{if(e.username){const i=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`;return e.username="",e.password="",{url:e.toString(),headers:{Authorization:`Basic ${btoa(i)}`}}}})();return{url:e.toString(),...t}}catch{return{url:r}}}function xT({key:r,methods:e,name:t,request:i,retryCount:s=3,retryDelay:n=150,timeout:c,type:l},u){const f=Xee();return{config:{key:r,methods:e,name:t,request:i,retryCount:s,retryDelay:n,timeout:c,type:l},request:tte(i,{methods:e,retryCount:s,retryDelay:n,uid:f}),value:u}}function H3(r,e={}){const{key:t="fallback",name:i="Fallback",rank:s=!1,shouldThrow:n=ote,retryCount:c,retryDelay:l}=e;return(({chain:u,pollingInterval:f=4e3,timeout:g,...m})=>{let N=r,A=()=>{};const _=xT({key:t,name:i,async request({method:E,params:x}){let S;const D=async(C=0)=>{const j=N[C]({...m,chain:u,retryCount:0,timeout:g});try{const k=await j.request({method:E,params:x});return A({method:E,params:x,response:k,transport:j,status:"success"}),k}catch(k){if(A({error:k,method:E,params:x,transport:j,status:"error"}),n(k)||C===N.length-1||(S??=N.slice(C+1).some(P=>{const{include:Q,exclude:F}=P({chain:u}).config.methods||{};return Q?Q.includes(E):F?!F.includes(E):!0}),!S))throw k;return D(C+1)}};return D()},retryCount:c,retryDelay:l,type:"fallback"},{onResponse:E=>A=E,transports:N.map(E=>E({chain:u,retryCount:0}))});if(s){const E=typeof s=="object"?s:{};cte({chain:u,interval:E.interval??f,onTransports:x=>N=x,ping:E.ping,sampleCount:E.sampleCount,timeout:E.timeout,transports:N,weights:E.weights})}return _})}function ote(r){return!!("code"in r&&typeof r.code=="number"&&(r.code===Ic.code||r.code===Wa.code||r.code===_c.code||Qv.nodeMessage.test(r.message)||r.code===5e3))}function cte({chain:r,interval:e=4e3,onTransports:t,ping:i,sampleCount:s=10,timeout:n=1e3,transports:c,weights:l={}}){const{stability:u=.7,latency:f=.3}=l,g=[],m=async()=>{const N=await Promise.all(c.map(async E=>{const x=E({chain:r,retryCount:0,timeout:n}),S=Date.now();let D,C;try{await(i?i({transport:x}):x.request({method:"net_listening"})),C=1}catch{C=0}finally{D=Date.now()}return{latency:D-S,success:C}}));g.push(N),g.length>s&&g.shift();const A=Math.max(...g.map(E=>Math.max(...E.map(({latency:x})=>x)))),_=c.map((E,x)=>{const S=g.map(P=>P[x].latency),C=1-S.reduce((P,Q)=>P+Q,0)/S.length/A,j=g.map(P=>P[x].success),k=j.reduce((P,Q)=>P+Q,0)/j.length;return k===0?[0,x]:[f*C+u*k,x]}).sort((E,x)=>x[0]-E[0]);t(_.map(([,E])=>c[E])),await ST(e),m()};m()}class hte extends ws{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Ky(r,e={}){const{batch:t,fetchFn:i,fetchOptions:s,key:n="http",methods:c,name:l="HTTP JSON-RPC",onFetchRequest:u,onFetchResponse:f,retryDelay:g,raw:m}=e;return({chain:N,retryCount:A,timeout:_})=>{const{batchSize:E=1e3,wait:x=0}=typeof t=="object"?t:{},S=e.retryCount??A,D=_??e.timeout??1e4,C=r||N?.rpcUrls.default.http[0];if(!C)throw new hte;const j=ste(C,{fetchFn:i,fetchOptions:s,onRequest:u,onResponse:f,timeout:D});return xT({key:n,methods:c,name:l,async request({method:k,params:P}){const Q={method:k,params:P},{schedule:F}=Kee({id:C,wait:x,shouldSplitBatch(a){return a.length>E},fn:a=>j.request({body:a}),sort:(a,h)=>a.id-h.id}),$=async a=>t?F(a):[await j.request({body:a})],[{error:Z,result:M}]=await $(Q);if(m)return{error:Z,result:M};if(Z)throw new DT({body:Q,error:Z,url:C});return M},retryCount:S,retryDelay:g,timeout:D,type:"http"},{fetchOptions:s,url:C})}}const Jy={createBalance(r,e){const t={name:r.metadata.name||"",symbol:r.metadata.symbol||"",decimals:r.metadata.decimals||0,value:r.metadata.value||0,price:r.metadata.price||0,iconUrl:r.metadata.iconUrl||""};return{name:t.name,symbol:t.symbol,chainId:e,address:r.address==="native"?void 0:this.convertAddressToCAIP10Address(r.address,e),value:t.value,price:t.price,quantity:{decimals:t.decimals.toString(),numeric:this.convertHexToBalance({hex:r.balance,decimals:t.decimals})},iconUrl:t.iconUrl}},convertHexToBalance({hex:r,decimals:e}){return Fee(BigInt(r),e)},convertAddressToCAIP10Address(r,e){return`${e}:${r}`},createCAIP2ChainId(r,e){return`${e}:${parseInt(r,16)}`},getChainIdHexFromCAIP2ChainId(r){const e=r.split(":");if(e.length<2||!e[1])return"0x0";const t=e[1],i=parseInt(t,10);return isNaN(i)?"0x0":`0x${i.toString(16)}`},isWalletGetAssetsResponse(r){return typeof r!="object"||r===null?!1:Object.values(r).every(e=>Array.isArray(e)&&e.every(t=>this.isValidAsset(t)))},isValidAsset(r){return typeof r=="object"&&r!==null&&typeof r.address=="string"&&typeof r.balance=="string"&&(r.type==="ERC20"||r.type==="NATIVE")&&typeof r.metadata=="object"&&r.metadata!==null&&typeof r.metadata.name=="string"&&typeof r.metadata.symbol=="string"&&typeof r.metadata.decimals=="number"&&typeof r.metadata.price=="number"&&typeof r.metadata.iconUrl=="string"}},Z3={async getMyTokensWithBalance(r){const e=Ze.state.address,t=X.state.activeCaipNetwork;if(!e||!t)return[];if(t.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,t);if(s)return this.filterLowQualityTokens(s)}const i=await Xe.getBalance(e,t.caipNetworkId,r);return this.filterLowQualityTokens(i.balances)},async getEIP155Balances(r,e){try{const t=Jy.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await Xt.getCapabilities(r))?.[t]?.assetDiscovery?.supported)return null;const s=await Xt.walletGetAssets({account:r,chainFilter:[t]});return Jy.isWalletGetAssetsResponse(s)?(s[t]||[]).map(c=>Jy.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(r){return r.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(r){return r?.map(e=>({...e,address:e?.address?e.address:X.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]}},wt=jr({tokenBalances:[],loading:!1}),G3={state:wt,subscribe(r){return Bi(wt,()=>r(wt))},subscribeKey(r,e){return mn(wt,r,e)},setToken(r){r&&(wt.token=Ka(r))},setTokenAmount(r){wt.sendTokenAmount=r},setReceiverAddress(r){wt.receiverAddress=r},setReceiverProfileImageUrl(r){wt.receiverProfileImageUrl=r},setReceiverProfileName(r){wt.receiverProfileName=r},setGasPrice(r){wt.gasPrice=r},setGasPriceInUsd(r){wt.gasPriceInUSD=r},setNetworkBalanceInUsd(r){wt.networkBalanceInUSD=r},setLoading(r){wt.loading=r},sendToken(){switch(X.state.activeCaipNetwork?.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){this.state.token?.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(er.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:Ze.state.preferredAccountType===Js.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:X.state.activeCaipNetwork?.caipNetworkId||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&this.state.token?.quantity.decimals&&(er.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:Ze.state.preferredAccountType===Js.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol,amount:this.state.sendTokenAmount,network:X.state.activeCaipNetwork?.caipNetworkId||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(r){wt.loading=!0;const e=X.state.activeCaipNetwork?.caipNetworkId,t=X.state.activeCaipNetwork?.chainNamespace,i=X.state.activeCaipAddress,s=i?ot.getPlainAddress(i):void 0;if(wt.lastRetry&&!ot.isAllowedRetry(wt.lastRetry,30*Ki.ONE_SEC_MS))return wt.loading=!1,[];try{if(s&&e&&t){const n=await Z3.getMyTokensWithBalance();return wt.tokenBalances=n,wt.lastRetry=void 0,n}}catch(n){wt.lastRetry=Date.now(),r?.(n),Ii.showError("Token Balance Unavailable")}finally{wt.loading=!1}return[]},fetchNetworkBalance(){if(wt.tokenBalances.length===0)return;const r=Z3.mapBalancesToSwapTokens(wt.tokenBalances);if(!r)return;const e=r.find(t=>t.address===X.getActiveNetworkTokenAddress());e&&(wt.networkBalanceInUSD=e?Lu.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(r,e){const t=e||"0";return Lu.bigNumber(r).eq(0)?!0:Lu.bigNumber(Lu.bigNumber(t)).gt(r)},hasInsufficientGasFunds(){let r=!0;return Ze.state.preferredAccountType===Js.ACCOUNT_TYPES.SMART_ACCOUNT?r=!1:wt.networkBalanceInUSD&&(r=this.isInsufficientNetworkTokenForGas(wt.networkBalanceInUSD,wt.gasPriceInUSD)),r},async sendNativeToken(r){Pt.pushTransactionStack({view:"Account",goBack:!1});const e=r.receiverAddress,t=Ze.state.address,i=Xt.parseUnits(r.sendTokenAmount.toString(),Number(r.decimals)),s="0x";try{await Xt.sendTransaction({chainNamespace:"eip155",to:e,address:t,data:s,value:i??BigInt(0),gasPrice:r.gasPrice}),Ii.showSuccess("Transaction started"),er.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ze.state.preferredAccountType===Js.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:r.sendTokenAmount,network:X.state.activeCaipNetwork?.caipNetworkId||""}}),this.resetSend()}catch(n){console.error("SendController:sendERC20Token - failed to send native token",n);const c=n instanceof Error?n.message:"Unknown error";er.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:c,isSmartAccount:Ze.state.preferredAccountType===Js.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:r.sendTokenAmount,network:X.state.activeCaipNetwork?.caipNetworkId||""}}),Ii.showError("Something went wrong")}},async sendERC20Token(r){Pt.pushTransactionStack({view:"Account",goBack:!1});const e=Xt.parseUnits(r.sendTokenAmount.toString(),Number(r.decimals));try{if(Ze.state.address&&r.sendTokenAmount&&r.receiverAddress&&r.tokenAddress){const t=ot.getPlainAddress(r.tokenAddress);await Xt.writeContract({fromAddress:Ze.state.address,tokenAddress:t,args:[r.receiverAddress,e??BigInt(0)],method:"transfer",abi:XX.getERC20Abi(t),chainNamespace:"eip155"}),Ii.showSuccess("Transaction started"),this.resetSend()}}catch(t){console.error("SendController:sendERC20Token - failed to send erc20 token",t);const i=t instanceof Error?t.message:"Unknown error";er.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:i,isSmartAccount:Ze.state.preferredAccountType===Js.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:r.sendTokenAmount,network:X.state.activeCaipNetwork?.caipNetworkId||""}}),Ii.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){Ii.showError("Please enter a valid amount and receiver address");return}Pt.pushTransactionStack({view:"Account",goBack:!1}),Xt.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),Ze.fetchTokenBalance()}).catch(r=>{Ii.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",r)})},resetSend(){wt.token=void 0,wt.sendTokenAmount=void 0,wt.receiverAddress=void 0,wt.receiverProfileImageUrl=void 0,wt.receiverProfileName=void 0,wt.loading=!1,wt.tokenBalances=[]}},Xy={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Uu={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},qe=jr({chains:see(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),X={state:qe,subscribe(r){return Bi(qe,()=>{r(qe)})},subscribeKey(r,e){return mn(qe,r,e)},subscribeChainProp(r,e,t){let i;return Bi(qe.chains,()=>{const s=t||qe.activeChain;if(s){const n=qe.chains.get(s)?.[r];i!==n&&(i=n,e(n))}})},initialize(r,e,t){const{chainId:i,namespace:s}=Fe.getActiveNetworkProps(),n=e?.find(f=>f.id.toString()===i?.toString()),l=r.find(f=>f?.namespace===s)||r?.[0],u=new Set([...e?.map(f=>f.chainNamespace)??[]]);(r?.length===0||!l)&&(qe.noAdapters=!0),qe.noAdapters||(qe.activeChain=l?.namespace,qe.activeCaipNetwork=n,this.setChainNetworkData(l?.namespace,{caipNetwork:n}),qe.activeChain&&Os.set({activeChain:l?.namespace})),u.forEach(f=>{const g=e?.filter(m=>m.chainNamespace===f);X.state.chains.set(f,{namespace:f,networkState:jr({...Uu,caipNetwork:g?.[0]}),accountState:jr(Xy),caipNetworks:g??[],...t}),this.setRequestedCaipNetworks(g??[],f)})},removeAdapter(r){if(qe.activeChain===r){const e=Array.from(qe.chains.entries()).find(([t])=>t!==r);if(e){const t=e[1]?.caipNetworks?.[0];t&&this.setActiveCaipNetwork(t)}}qe.chains.delete(r)},addAdapter(r,{networkControllerClient:e,connectionControllerClient:t},i){qe.chains.set(r.namespace,{namespace:r.namespace,networkState:{...Uu,caipNetwork:i[0]},accountState:Xy,caipNetworks:i,connectionControllerClient:t,networkControllerClient:e}),this.setRequestedCaipNetworks(i?.filter(s=>s.chainNamespace===r.namespace)??[],r.namespace)},addNetwork(r){const e=qe.chains.get(r.chainNamespace);if(e){const t=[...e.caipNetworks||[]];e.caipNetworks?.find(i=>i.id===r.id)||t.push(r),qe.chains.set(r.chainNamespace,{...e,caipNetworks:t}),this.setRequestedCaipNetworks(t,r.chainNamespace)}},removeNetwork(r,e){const t=qe.chains.get(r);if(t){const i=qe.activeCaipNetwork?.id===e,s=[...t.caipNetworks?.filter(n=>n.id!==e)||[]];i&&t?.caipNetworks?.[0]&&this.setActiveCaipNetwork(t.caipNetworks[0]),qe.chains.set(r,{...t,caipNetworks:s}),this.setRequestedCaipNetworks(s||[],r)}},setAdapterNetworkState(r,e){const t=qe.chains.get(r);t&&(t.networkState={...t.networkState||Uu,...e},qe.chains.set(r,t))},setChainAccountData(r,e,t=!0){if(!r)throw new Error("Chain is required to update chain account data");const i=qe.chains.get(r);if(i){const s={...i.accountState||Xy,...e};qe.chains.set(r,{...i,accountState:s}),(qe.chains.size===1||qe.activeChain===r)&&(e.caipAddress&&(qe.activeCaipAddress=e.caipAddress),Ze.replaceState(s))}},setChainNetworkData(r,e){if(!r)return;const t=qe.chains.get(r);if(t){const i={...t.networkState||Uu,...e};qe.chains.set(r,{...t,networkState:i})}},setAccountProp(r,e,t,i=!0){this.setChainAccountData(t,{[r]:e},i),r==="status"&&e==="disconnected"&&t&&at.removeConnectorId(t)},setActiveNamespace(r){qe.activeChain=r;const e=r?qe.chains.get(r):void 0,t=e?.networkState?.caipNetwork;t?.id&&r&&(qe.activeCaipAddress=e?.accountState?.caipAddress,qe.activeCaipNetwork=t,this.setChainNetworkData(r,{caipNetwork:t}),Fe.setActiveCaipNetworkId(t?.caipNetworkId),Os.set({activeChain:r,selectedNetworkId:t?.caipNetworkId}))},setActiveCaipNetwork(r){if(!r)return;qe.activeChain!==r.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=qe.chains.get(r.chainNamespace);qe.activeChain=r.chainNamespace,qe.activeCaipNetwork=r,this.setChainNetworkData(r.chainNamespace,{caipNetwork:r}),e?.accountState?.address?qe.activeCaipAddress=`${r.chainNamespace}:${r.id}:${e?.accountState?.address}`:qe.activeCaipAddress=void 0,this.setAccountProp("caipAddress",qe.activeCaipAddress,r.chainNamespace),e&&Ze.replaceState(e.accountState),G3.resetSend(),Os.set({activeChain:qe.activeChain,selectedNetworkId:qe.activeCaipNetwork?.caipNetworkId}),Fe.setActiveCaipNetworkId(r.caipNetworkId),!this.checkIfSupportedNetwork(r.chainNamespace)&&Re.state.enableNetworkSwitch&&!Re.state.allowUnsupportedChain&&!Xt.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(r){if(!r)return;const e=qe.chains.get(r.chainNamespace);e&&e?.caipNetworks?.push(r)},async switchActiveNamespace(r){if(!r)return;const e=r!==X.state.activeChain,t=X.getNetworkData(r)?.caipNetwork,i=X.getCaipNetworkByNamespace(r,t?.id);e&&i&&await X.switchActiveNetwork(i)},async switchActiveNetwork(r){!X.state.chains.get(X.state.activeChain)?.caipNetworks?.some(s=>s.id===qe.activeCaipNetwork?.id)&&Pt.goBack();const i=this.getNetworkControllerClient(r.chainNamespace);i&&(await i.switchCaipNetwork(r),er.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:r.caipNetworkId}}))},getNetworkControllerClient(r){const e=r||qe.activeChain,t=qe.chains.get(e);if(!t)throw new Error("Chain adapter not found");if(!t.networkControllerClient)throw new Error("NetworkController client not set");return t.networkControllerClient},getConnectionControllerClient(r){const e=r||qe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const t=qe.chains.get(e);if(!t?.connectionControllerClient)throw new Error("ConnectionController client not set");return t.connectionControllerClient},getAccountProp(r,e){let t=qe.activeChain;if(e&&(t=e),!t)return;const i=qe.chains.get(t)?.accountState;if(i)return i[r]},getNetworkProp(r,e){const t=qe.chains.get(e)?.networkState;if(t)return t[r]},getRequestedCaipNetworks(r){const e=qe.chains.get(r),{approvedCaipNetworkIds:t=[],requestedCaipNetworks:i=[]}=e?.networkState||{};return ot.sortRequestedNetworks(t,i)},getAllRequestedCaipNetworks(){const r=[];return qe.chains.forEach(e=>{const t=this.getRequestedCaipNetworks(e.namespace);r.push(...t)}),r},setRequestedCaipNetworks(r,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:r})},getAllApprovedCaipNetworkIds(){const r=[];return qe.chains.forEach(e=>{const t=this.getApprovedCaipNetworkIds(e.namespace);r.push(...t)}),r},getActiveCaipNetwork(){return qe.activeCaipNetwork},getActiveCaipAddress(){return qe.activeCaipAddress},getApprovedCaipNetworkIds(r){return qe.chains.get(r)?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(r){const t=await this.getNetworkControllerClient()?.getApprovedCaipNetworksData();this.setAdapterNetworkState(r,{approvedCaipNetworkIds:t?.approvedCaipNetworkIds,supportsAllNetworks:t?.supportsAllNetworks})},checkIfSupportedNetwork(r,e){const t=e||qe.activeCaipNetwork,i=this.getRequestedCaipNetworks(r);return i.length?i?.some(s=>s.id===t?.id):!0},checkIfSupportedChainId(r){return qe.activeChain?this.getRequestedCaipNetworks(qe.activeChain)?.some(t=>t.id===r):!0},setSmartAccountEnabledNetworks(r,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:r})},checkIfSmartAccountEnabled(){const r=yT.caipNetworkIdToNumber(qe.activeCaipNetwork?.caipNetworkId),e=qe.activeChain;return!e||!r?!1:!!this.getNetworkProp("smartAccountEnabledNetworks",e)?.includes(Number(r))},getActiveNetworkTokenAddress(){const r=qe.activeCaipNetwork?.chainNamespace||"eip155",e=qe.activeCaipNetwork?.id||1,t=Ki.NATIVE_TOKEN_ADDRESS[r];return`${r}:${e}:${t}`},showUnsupportedChainUI(){Qr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const r=qe.activeCaipNetwork;return!!(r?.chainNamespace&&Ki.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(r.chainNamespace))},resetNetwork(r){this.setAdapterNetworkState(r,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(r){const e=r;if(!e)throw new Error("Chain is required to set account prop");qe.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),at.removeConnectorId(e)},async disconnect(r){const e=gee(r);try{G3.resetSend();const t=await Promise.allSettled(e.map(async([s,n])=>{try{const{caipAddress:c}=this.getAccountData(s)||{};c&&n.connectionControllerClient?.disconnect&&await n.connectionControllerClient.disconnect(s),this.resetAccount(s),this.resetNetwork(s)}catch(c){throw new Error(`Failed to disconnect chain ${s}: ${c.message}`)}}));Xt.resetWcConnection();const i=t.filter(s=>s.status==="rejected");if(i.length>0)throw new Error(i.map(s=>s.reason.message).join(", "));Fe.deleteConnectedSocialProvider(),r?at.removeConnectorId(r):at.resetConnectorIds(),er.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(t){console.error(t.message||"Failed to disconnect chains"),er.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:t.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(r){qe.isSwitchingNamespace=r},getFirstCaipNetworkSupportsAuthConnector(){const r=[];let e;if(qe.chains.forEach(t=>{He.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===t.namespace)&&t.namespace&&r.push(t.namespace)}),r.length>0){const t=r[0];return e=t?qe.chains.get(t)?.caipNetworks?.[0]:void 0,e}},getAccountData(r){return r?X.state.chains.get(r)?.accountState:Ze.state},getNetworkData(r){const e=r||qe.activeChain;if(e)return X.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(r,e){if(!r)return;const t=X.state.chains.get(r),i=t?.caipNetworks?.find(s=>s.id===e);return i||t?.networkState?.caipNetwork||t?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const r=at.state.filterByNamespace;return(r?[qe.chains.get(r)]:Array.from(qe.chains.values())).flatMap(t=>t?.caipNetworks||[]).map(t=>t.caipNetworkId)}},lte={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},TT=ot.getBlockchainApiUrl(),sn=jr({clientId:null,api:new bd({baseUrl:TT,clientId:null}),supportedChains:{http:[],ws:[]}}),Xe={state:sn,async get(r){const{st:e,sv:t}=Xe.getSdkProperties(),i=Re.state.projectId,s={...r.params||{},st:e,sv:t,projectId:i};return sn.api.get({...r,params:s})},getSdkProperties(){const{sdkType:r,sdkVersion:e}=Re.state;return{st:r||"unknown",sv:e||"unknown"}},async isNetworkSupported(r){if(!r)return!1;try{sn.supportedChains.http.length||await Xe.getSupportedNetworks()}catch{return!1}return sn.supportedChains.http.includes(r)},async getSupportedNetworks(){const r=await Xe.get({path:"v1/supported-chains"});return sn.supportedChains=r,r},async fetchIdentity({address:r,caipNetworkId:e}){if(!await Xe.isNetworkSupported(e))return{avatar:"",name:""};const i=Fe.getIdentityFromCacheForAddress(r);if(i)return i;const s=await Xe.get({path:`/v1/identity/${r}`,params:{sender:X.state.activeCaipAddress?ot.getPlainAddress(X.state.activeCaipAddress):void 0}});return Fe.updateIdentityCache({address:r,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:r,cursor:e,onramp:t,signal:i,cache:s,chainId:n}){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?Xe.get({path:`/v1/account/${r}/history`,params:{cursor:e,onramp:t,chainId:n},signal:i,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:r,userAddress:e,from:t,to:i,gasPrice:s}){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?Xe.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:r,userAddress:e,from:t,to:i,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:r}){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?Xe.get({path:"/v1/convert/tokens",params:{chainId:r}}):{tokens:[]}},async fetchTokenPrice({addresses:r}){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?sn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:r,projectId:Re.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:r,userAddress:e}){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?Xe.get({path:"/v1/convert/allowance",params:{tokenAddress:r,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:r}){const{st:e,sv:t}=Xe.getSdkProperties();if(!await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return Xe.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:r,st:e,sv:t}})},async generateSwapCalldata({amount:r,from:e,to:t,userAddress:i,disableEstimate:s}){if(!await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return sn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:r,eip155:{slippage:Ki.CONVERT_SLIPPAGE_TOLERANCE},projectId:Re.state.projectId,from:e,to:t,userAddress:i,disableEstimate:s}})},async generateApproveCalldata({from:r,to:e,userAddress:t}){const{st:i,sv:s}=Xe.getSdkProperties();if(!await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return Xe.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:t,from:r,to:e,st:i,sv:s}})},async getBalance(r,e,t){const{st:i,sv:s}=Xe.getSdkProperties();if(!await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId))return Ii.showError("Token Balance Unavailable"),{balances:[]};const c=`${e}:${r}`,l=Fe.getBalanceCacheForCaipAddress(c);if(l)return l;const u=await Xe.get({path:`/v1/account/${r}/balance`,params:{currency:"usd",chainId:e,forceUpdate:t,st:i,sv:s}});return Fe.updateBalanceCache({caipAddress:c,balance:u,timestamp:Date.now()}),u},async lookupEnsName(r){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?Xe.get({path:`/v1/profile/account/${r}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:r}){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?Xe.get({path:`/v1/profile/reverse/${r}`,params:{sender:Ze.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(r){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?Xe.get({path:`/v1/profile/suggestions/${r}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:r,address:e,message:t,signature:i}){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?sn.api.post({path:"/v1/profile/account",body:{coin_type:r,address:e,message:t,signature:i},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:r,partnerUserId:e,defaultNetwork:t,purchaseAmount:i,paymentAmount:s}){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?(await sn.api.post({path:"/v1/generators/onrampurl",params:{projectId:Re.state.projectId},body:{destinationWallets:r,defaultNetwork:t,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:i,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Xe.get({path:"/v1/onramp/options"})}catch{return lte}},async getOnrampQuote({purchaseCurrency:r,paymentCurrency:e,amount:t,network:i}){try{return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?await sn.api.post({path:"/v1/onramp/quote",params:{projectId:Re.state.projectId},body:{purchaseCurrency:r,paymentCurrency:e,amount:t,network:i}}):null}catch{return{coinbaseFee:{amount:t,currency:e.id},networkFee:{amount:t,currency:e.id},paymentSubtotal:{amount:t,currency:e.id},paymentTotal:{amount:t,currency:e.id},purchaseAmount:{amount:t,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(r){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?Xe.get({path:`/v1/sessions/${r}`}):[]},async revokeSmartSession(r,e,t){return await Xe.isNetworkSupported(X.state.activeCaipNetwork?.caipNetworkId)?sn.api.post({path:`/v1/sessions/${r}/revoke`,params:{projectId:Re.state.projectId},body:{pci:e,signature:t}}):{success:!1}},setClientId(r){sn.clientId=r,sn.api=new bd({baseUrl:TT,clientId:r})}},ns=jr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),Ze={state:ns,replaceState(r){r&&Object.assign(ns,Ka(r))},subscribe(r){return X.subscribeChainProp("accountState",e=>{if(e)return r(e)})},subscribeKey(r,e,t){let i;return X.subscribeChainProp("accountState",s=>{if(s){const n=s[r];i!==n&&(i=n,e(n))}},t)},setStatus(r,e){X.setAccountProp("status",r,e)},getCaipAddress(r){return X.getAccountProp("caipAddress",r)},setCaipAddress(r,e){const t=r?ot.getPlainAddress(r):void 0;e===X.state.activeChain&&(X.state.activeCaipAddress=r),X.setAccountProp("caipAddress",r,e),X.setAccountProp("address",t,e)},setBalance(r,e,t){X.setAccountProp("balance",r,t),X.setAccountProp("balanceSymbol",e,t)},setProfileName(r,e){X.setAccountProp("profileName",r,e)},setProfileImage(r,e){X.setAccountProp("profileImage",r,e)},setUser(r,e){X.setAccountProp("user",r,e)},setAddressExplorerUrl(r,e){X.setAccountProp("addressExplorerUrl",r,e)},setSmartAccountDeployed(r,e){X.setAccountProp("smartAccountDeployed",r,e)},setCurrentTab(r){X.setAccountProp("currentTab",r,X.state.activeChain)},setTokenBalance(r,e){r&&X.setAccountProp("tokenBalance",r,e)},setShouldUpdateToAddress(r,e){X.setAccountProp("shouldUpdateToAddress",r,e)},setAllAccounts(r,e){X.setAccountProp("allAccounts",r,e)},addAddressLabel(r,e,t){const i=X.getAccountProp("addressLabels",t)||new Map;i.set(r,e),X.setAccountProp("addressLabels",i,t)},removeAddressLabel(r,e){const t=X.getAccountProp("addressLabels",e)||new Map;t.delete(r),X.setAccountProp("addressLabels",t,e)},setConnectedWalletInfo(r,e){X.setAccountProp("connectedWalletInfo",r,e,!1)},setPreferredAccountType(r,e){X.setAccountProp("preferredAccountType",r,e)},setSocialProvider(r,e){r&&X.setAccountProp("socialProvider",r,e)},setSocialWindow(r,e){X.setAccountProp("socialWindow",r?Ka(r):void 0,e)},setFarcasterUrl(r,e){X.setAccountProp("farcasterUrl",r,e)},async fetchTokenBalance(r){ns.balanceLoading=!0;const e=X.state.activeCaipNetwork?.caipNetworkId,t=X.state.activeCaipNetwork?.chainNamespace,i=X.state.activeCaipAddress,s=i?ot.getPlainAddress(i):void 0;if(ns.lastRetry&&!ot.isAllowedRetry(ns.lastRetry,30*Ki.ONE_SEC_MS))return ns.balanceLoading=!1,[];try{if(s&&e&&t){const c=(await Xe.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return this.setTokenBalance(c,t),ns.lastRetry=void 0,ns.balanceLoading=!1,c}}catch(n){ns.lastRetry=Date.now(),r?.(n),Ii.showError("Token Balance Unavailable")}finally{ns.balanceLoading=!1}return[]},resetAccount(r){X.resetAccount(r)}},Qi=jr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Qr={state:Qi,subscribe(r){return Bi(Qi,()=>r(Qi))},subscribeKey(r,e){return mn(Qi,r,e)},async open(r){const e=Ze.state.status==="connected";Xt.state.wcBasic?ct.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ct.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),r?.namespace?(await X.switchActiveNamespace(r.namespace),Qr.setLoading(!0,r.namespace)):Qr.setLoading(!0),at.setFilterByNamespace(r?.namespace);const t=X.getAccountData(r?.namespace)?.caipAddress;X.state.noAdapters&&!t?ot.isMobile()?Pt.reset("AllWallets"):Pt.reset("ConnectingWalletConnectBasic"):r?.view?Pt.reset(r.view):t?Pt.reset("Account"):Pt.reset("Connect"),Qi.open=!0,Os.set({open:!0}),er.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!t}})},close(){const r=Re.state.enableEmbedded,e=!!X.state.activeCaipAddress;Qi.open&&er.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Qi.open=!1,Qr.clearLoading(),r?e?Pt.replace("Account"):Pt.push("Connect"):Os.set({open:!1}),Xt.resetUri()},setLoading(r,e){e&&Qi.loadingNamespaceMap.set(e,r),Qi.loading=r,Os.set({loading:r})},clearLoading(){Qi.loadingNamespaceMap.clear(),Qi.loading=!1},shake(){Qi.shake||(Qi.shake=!0,setTimeout(()=>{Qi.shake=!1},500))}},K3=2147483648,ute={convertEVMChainIdToCoinType(r){if(r>=K3)throw new Error("Invalid chainId");return(K3|r)>>>0}},_n=jr({suggestions:[],loading:!1}),jT={state:_n,subscribe(r){return Bi(_n,()=>r(_n))},subscribeKey(r,e){return mn(_n,r,e)},async resolveName(r){try{return await Xe.lookupEnsName(r)}catch(e){const t=e;throw new Error(t?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(r){try{return await Xe.lookupEnsName(r),!0}catch{return!1}},async getSuggestions(r){try{_n.loading=!0,_n.suggestions=[];const e=await Xe.getEnsNameSuggestions(r);return _n.suggestions=e.suggestions.map(t=>({...t,name:t.name}))||[],_n.suggestions}catch(e){const t=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(t)}finally{_n.loading=!1}},async getNamesForAddress(r){try{if(!X.state.activeCaipNetwork)return[];const t=Fe.getEnsFromCacheForAddress(r);if(t)return t;const i=await Xe.reverseLookupEnsName({address:r});return Fe.updateEnsCache({address:r,ens:i,timestamp:Date.now()}),i}catch(e){const t=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(t)}},async registerName(r){const e=X.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const t=Ze.state.address,i=at.getAuthConnector();if(!t||!i)throw new Error("Address or auth connector not found");_n.loading=!0;try{const s=JSON.stringify({name:r,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Pt.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){_n.loading=!1}});const n=await Xt.signMessage(s),c=e.id;if(!c)throw new Error("Network not found");const l=ute.convertEVMChainIdToCoinType(Number(c));await Xe.registerEnsName({coinType:l,address:t,signature:n,message:s}),Ze.setProfileName(r,e.chainNamespace),Pt.replace("RegisterAccountNameSuccess")}catch(s){const n=this.parseEnsApiError(s,`Error registering name ${r}`);throw Pt.replace("RegisterAccountName"),new Error(n)}finally{_n.loading=!1}},validateName(r){return/^[a-zA-Z0-9-]{4,}$/u.test(r)},parseEnsApiError(r,e){return r?.reasons?.[0]?.description||e}};function wl(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}function J3(r){return wl(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}const CT="2.23.2";let ew={getDocsUrl:({docsBaseUrl:r,docsPath:e="",docsSlug:t})=>e?`${r??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${CT}`};class Ja extends Error{constructor(e,t={}){const i=t.cause instanceof Ja?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof Ja&&t.cause.docsPath||t.docsPath,n=ew.getDocsUrl?.({...t,docsPath:s}),c=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...i?[`Details: ${i}`]:[],...ew.version?[`Version: ${ew.version}`]:[]].join(`
`);super(c,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=CT}walk(e){return OT(this,e)}}function OT(r,e){return e?.(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause!==void 0?OT(r.cause,e):e?null:r}class LT extends Ja{constructor({size:e,targetSize:t,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function Vc(r,{dir:e,size:t=32}={}){return typeof r=="string"?fte(r,{dir:e,size:t}):dte(r,{dir:e,size:t})}function fte(r,{dir:e,size:t=32}={}){if(t===null)return r;const i=r.replace("0x","");if(i.length>t*2)throw new LT({size:Math.ceil(i.length/2),targetSize:t,type:"hex"});return`0x${i[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function dte(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new LT({size:r.length,targetSize:t,type:"bytes"});const i=new Uint8Array(t);for(let s=0;s<t;s++){const n=e==="right";i[n?s:t-s-1]=r[n?s:r.length-s-1]}return i}class pte extends Ja{constructor({max:e,min:t,signed:i,size:s,value:n}){super(`Number "${n}" is not in safe ${s?`${s*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class gte extends Ja{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Fc(r,{size:e}){if(J3(r)>e)throw new gte({givenSize:J3(r),maxSize:e})}function vm(r,e={}){const{signed:t}=e;e.size&&Fc(r,{size:e.size});const i=BigInt(r);if(!t)return i;const s=(r.length-2)/2,n=(1n<<BigInt(s)*8n-1n)-1n;return i<=n?i:i-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function yte(r,e={}){return Number(vm(r,e))}const wte=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function bm(r,e={}){return typeof r=="number"||typeof r=="bigint"?kT(r,e):typeof r=="string"?bte(r,e):typeof r=="boolean"?mte(r,e):zT(r,e)}function mte(r,e={}){const t=`0x${Number(r)}`;return typeof e.size=="number"?(Fc(t,{size:e.size}),Vc(t,{size:e.size})):t}function zT(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=wte[r[s]];const i=`0x${t}`;return typeof e.size=="number"?(Fc(i,{size:e.size}),Vc(i,{dir:"right",size:e.size})):i}function kT(r,e={}){const{signed:t,size:i}=e,s=BigInt(r);let n;i?t?n=(1n<<BigInt(i)*8n-1n)-1n:n=2n**(BigInt(i)*8n)-1n:typeof r=="number"&&(n=BigInt(Number.MAX_SAFE_INTEGER));const c=typeof n=="bigint"&&t?-n-1n:0;if(n&&s>n||s<c){const u=typeof r=="bigint"?"n":"";throw new pte({max:n?`${n}${u}`:void 0,min:`${c}${u}`,signed:t,size:i,value:`${r}${u}`})}const l=`0x${(t&&s<0?(1n<<BigInt(i*8))+BigInt(s):s).toString(16)}`;return i?Vc(l,{size:i}):l}const vte=new TextEncoder;function bte(r,e={}){const t=vte.encode(r);return zT(t,e)}const Mte=new TextEncoder;function Nte(r,e={}){return typeof r=="number"||typeof r=="bigint"?Ate(r,e):typeof r=="boolean"?Ite(r,e):wl(r)?PT(r,e):RT(r,e)}function Ite(r,e={}){const t=new Uint8Array(1);return t[0]=Number(r),typeof e.size=="number"?(Fc(t,{size:e.size}),Vc(t,{size:e.size})):t}const Ds={zero:48,nine:57,A:65,F:70,a:97,f:102};function X3(r){if(r>=Ds.zero&&r<=Ds.nine)return r-Ds.zero;if(r>=Ds.A&&r<=Ds.F)return r-(Ds.A-10);if(r>=Ds.a&&r<=Ds.f)return r-(Ds.a-10)}function PT(r,e={}){let t=r;e.size&&(Fc(t,{size:e.size}),t=Vc(t,{dir:"right",size:e.size}));let i=t.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,n=new Uint8Array(s);for(let c=0,l=0;c<s;c++){const u=X3(i.charCodeAt(l++)),f=X3(i.charCodeAt(l++));if(u===void 0||f===void 0)throw new Ja(`Invalid byte sequence ("${i[l-2]}${i[l-1]}" in "${i}").`);n[c]=u*16+f}return n}function Ate(r,e){const t=kT(r,e);return PT(t)}function RT(r,e={}){const t=Mte.encode(r);return typeof e.size=="number"?(Fc(t,{size:e.size}),Vc(t,{dir:"right",size:e.size})):t}function Pf(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function _te(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Md(r,...e){if(!_te(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Dde(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Pf(r.outputLen),Pf(r.blockLen)}function eA(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Ete(r,e){Md(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const $u=BigInt(2**32-1),tA=BigInt(32);function Dte(r,e=!1){return e?{h:Number(r&$u),l:Number(r>>tA&$u)}:{h:Number(r>>tA&$u)|0,l:Number(r&$u)|0}}function Ste(r,e=!1){let t=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:n,l:c}=Dte(r[s],e);[t[s],i[s]]=[n,c]}return[t,i]}const xte=(r,e,t)=>r<<t|e>>>32-t,Tte=(r,e,t)=>e<<t|r>>>32-t,jte=(r,e,t)=>e<<t-32|r>>>64-t,Cte=(r,e,t)=>r<<t-32|e>>>64-t,zo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Ote(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function Sde(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function xde(r,e){return r<<32-e|r>>>e}const rA=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Lte(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function iA(r){for(let e=0;e<r.length;e++)r[e]=Lte(r[e])}function zte(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function UT(r){return typeof r=="string"&&(r=zte(r)),Md(r),r}function Tde(...r){let e=0;for(let i=0;i<r.length;i++){const s=r[i];Md(s),e+=s.length}const t=new Uint8Array(e);for(let i=0,s=0;i<r.length;i++){const n=r[i];t.set(n,s),s+=n.length}return t}class kte{clone(){return this._cloneInto()}}function Pte(r){const e=i=>r().update(UT(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function jde(r=32){if(zo&&typeof zo.getRandomValues=="function")return zo.getRandomValues(new Uint8Array(r));if(zo&&typeof zo.randomBytes=="function")return zo.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}const $T=[],BT=[],qT=[],Rte=BigInt(0),ph=BigInt(1),Ute=BigInt(2),$te=BigInt(7),Bte=BigInt(256),qte=BigInt(113);for(let r=0,e=ph,t=1,i=0;r<24;r++){[t,i]=[i,(2*t+3*i)%5],$T.push(2*(5*i+t)),BT.push((r+1)*(r+2)/2%64);let s=Rte;for(let n=0;n<7;n++)e=(e<<ph^(e>>$te)*qte)%Bte,e&Ute&&(s^=ph<<(ph<<BigInt(n))-ph);qT.push(s)}const[Yte,Wte]=Ste(qT,!0),nA=(r,e,t)=>t>32?jte(r,e,t):xte(r,e,t),sA=(r,e,t)=>t>32?Cte(r,e,t):Tte(r,e,t);function Qte(r,e=24){const t=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let c=0;c<10;c++)t[c]=r[c]^r[c+10]^r[c+20]^r[c+30]^r[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,u=(c+2)%10,f=t[u],g=t[u+1],m=nA(f,g,1)^t[l],N=sA(f,g,1)^t[l+1];for(let A=0;A<50;A+=10)r[c+A]^=m,r[c+A+1]^=N}let s=r[2],n=r[3];for(let c=0;c<24;c++){const l=BT[c],u=nA(s,n,l),f=sA(s,n,l),g=$T[c];s=r[g],n=r[g+1],r[g]=u,r[g+1]=f}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)t[l]=r[c+l];for(let l=0;l<10;l++)r[c+l]^=~t[(l+2)%10]&t[(l+4)%10]}r[0]^=Yte[i],r[1]^=Wte[i]}t.fill(0)}class Vv extends kte{constructor(e,t,i,s=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=s,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Pf(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ote(this.state)}keccak(){rA||iA(this.state32),Qte(this.state32,this.rounds),rA||iA(this.state32),this.posOut=0,this.pos=0}update(e){eA(this);const{blockLen:t,state:i}=this;e=UT(e);const s=e.length;for(let n=0;n<s;){const c=Math.min(t-this.pos,s-n);for(let l=0;l<c;l++)i[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:i,blockLen:s}=this;e[i]^=t,(t&128)!==0&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){eA(this,!1),Md(e),this.finish();const t=this.state,{blockLen:i}=this;for(let s=0,n=e.length;s<n;){this.posOut>=i&&this.keccak();const c=Math.min(i-this.posOut,n-s);e.set(t.subarray(this.posOut,this.posOut+c),s),this.posOut+=c,s+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Pf(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ete(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:i,outputLen:s,rounds:n,enableXOF:c}=this;return e||(e=new Vv(t,i,s,c,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=i,e.outputLen=s,e.enableXOF=c,e.destroyed=this.destroyed,e}}const Vte=(r,e,t)=>Pte(()=>new Vv(e,r,t)),Fte=Vte(1,136,256/8);function YT(r,e){const t=e||"hex",i=Fte(wl(r,{strict:!1})?Nte(r):r);return t==="bytes"?i:bm(i)}class Hte extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const i=this.keys().next().value;i&&this.delete(i)}return this}}const tw=new Hte(8192);function Zte(r,e){if(tw.has(`${r}.${e}`))return tw.get(`${r}.${e}`);const t=r.substring(2).toLowerCase(),i=YT(RT(t),"bytes"),s=t.split("");for(let c=0;c<40;c+=2)i[c>>1]>>4>=8&&s[c]&&(s[c]=s[c].toUpperCase()),(i[c>>1]&15)>=8&&s[c+1]&&(s[c+1]=s[c+1].toUpperCase());const n=`0x${s.join("")}`;return tw.set(`${r}.${e}`,n),n}function Gte(r){const e=YT(`0x${r.substring(4)}`).substring(26);return Zte(`0x${e}`)}async function Kte({hash:r,signature:e}){const t=wl(r)?r:bm(r),{secp256k1:i}=await pn(async()=>{const{secp256k1:c}=await import("./secp256k1-DH6Ji6I1.js");return{secp256k1:c}},__vite__mapDeps([19,1,2,3,4,11,7]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:f,s:g,v:m,yParity:N}=e,A=Number(N??m),_=aA(A);return new i.Signature(vm(f),vm(g)).addRecoveryBit(_)}const c=wl(e)?e:bm(e),l=yte(`0x${c.slice(130)}`),u=aA(l);return i.Signature.fromCompact(c.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(t.substring(2)).toHex(!1)}`}function aA(r){if(r===0||r===1)return r;if(r===27)return 0;if(r===28)return 1;throw new Error("Invalid yParityOrV value")}async function Jte({hash:r,signature:e}){return Gte(await Kte({hash:r,signature:e}))}function Xte(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<r.length;f++){const g=r.charAt(f),m=g.charCodeAt(0);if(e[m]!==255)throw new TypeError(g+" is ambiguous");e[m]=f}const t=r.length,i=r.charAt(0),s=Math.log(t)/Math.log(256),n=Math.log(256)/Math.log(t);function c(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let g=0,m=0,N=0;const A=f.length;for(;N!==A&&f[N]===0;)N++,g++;const _=(A-N)*n+1>>>0,E=new Uint8Array(_);for(;N!==A;){let D=f[N],C=0;for(let j=_-1;(D!==0||C<m)&&j!==-1;j--,C++)D+=256*E[j]>>>0,E[j]=D%t>>>0,D=D/t>>>0;if(D!==0)throw new Error("Non-zero carry");m=C,N++}let x=_-m;for(;x!==_&&E[x]===0;)x++;let S=i.repeat(g);for(;x<_;++x)S+=r.charAt(E[x]);return S}function l(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let g=0,m=0,N=0;for(;f[g]===i;)m++,g++;const A=(f.length-g)*s+1>>>0,_=new Uint8Array(A);for(;g<f.length;){const D=f.charCodeAt(g);if(D>255)return;let C=e[D];if(C===255)return;let j=0;for(let k=A-1;(C!==0||j<N)&&k!==-1;k--,j++)C+=t*_[k]>>>0,_[k]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");N=j,g++}let E=A-N;for(;E!==A&&_[E]===0;)E++;const x=new Uint8Array(m+(A-E));let S=m;for(;E!==A;)x[S++]=_[E++];return x}function u(f){const g=l(f);if(g)return g;throw new Error("Non-base"+t+" character")}return{encode:c,decodeUnsafe:l,decode:u}}var ere="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const WT=Xte(ere);var tre={};const rre=":";function fc(r){const[e,t]=r.split(rre);return{namespace:e,reference:t}}function QT(r,e){return r.includes(":")?[r]:e.chains||[]}const ire="ReactNative",dn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},nre="js";function Rf(){return typeof Be<"u"&&typeof Be.versions<"u"&&typeof Be.versions.node<"u"}function ma(){return!Ji.getDocument()&&!!Ji.getNavigator()&&navigator.product===ire}function sre(){return ma()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="android"}function are(){return ma()&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"&&globalThis?.Platform.OS==="ios"}function Yl(){return!Rf()&&!!Ji.getNavigator()&&!!Ji.getDocument()}function Wl(){return ma()?dn.reactNative:Rf()?dn.node:Yl()?dn.browser:dn.unknown}function oA(){var r;try{return ma()&&typeof globalThis<"u"&&typeof globalThis?.Application<"u"?(r=globalThis.Application)==null?void 0:r.applicationId:void 0}catch{return}}function ore(r,e){const t=new URLSearchParams(r);for(const i of Object.keys(e).sort())if(e.hasOwnProperty(i)){const s=e[i];s!==void 0&&t.set(i,s)}return t.toString()}function VT(){return gD.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function cre(){if(Wl()===dn.reactNative&&typeof globalThis<"u"&&typeof globalThis?.Platform<"u"){const{OS:t,Version:i}=globalThis.Platform;return[t,i].join("-")}const r=dD();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function hre(){var r;const e=Wl();return e===dn.browser?[e,((r=Ji.getLocation())==null?void 0:r.host)||"unknown"].join(":"):e}function FT(r,e,t){const i=cre(),s=hre();return[[r,e].join("-"),[nre,t].join("-"),i,s].join("/")}function lre({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:s,projectId:n,useOnCloseEvent:c,bundleId:l,packageName:u}){const f=t.split("?"),g=FT(r,e,i),m={auth:s,ua:g,projectId:n,useOnCloseEvent:c,packageName:u||void 0,bundleId:l||void 0},N=ore(f[1]||"",m);return f[0]+"?"+N}function Ba(r,e){return r.filter(t=>e.includes(t)).length===r.length}function Mm(r){return Object.fromEntries(r.entries())}function Nm(r){return new Map(Object.entries(r))}function Oa(r=ne.FIVE_MINUTES,e){const t=ne.toMiliseconds(r||ne.FIVE_MINUTES);let i,s,n,c;return{resolve:l=>{n&&i&&(clearTimeout(n),i(l),c=Promise.resolve(l))},reject:l=>{n&&s&&(clearTimeout(n),s(l))},done:()=>new Promise((l,u)=>{if(c)return l(c);n=setTimeout(()=>{const f=new Error(e);c=Promise.reject(f),u(f)},t),i=l,s=u})}}function na(r,e,t){return new Promise(async(i,s)=>{const n=setTimeout(()=>s(new Error(t)),e);try{const c=await r;i(c)}catch(c){s(c)}clearTimeout(n)})}function HT(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function ure(r){return HT("topic",r)}function fre(r){return HT("id",r)}function ZT(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function Xr(r,e){return ne.fromMiliseconds(Date.now()+ne.toMiliseconds(r))}function Xs(r){return Date.now()>=ne.toMiliseconds(r)}function jt(r,e){return`${r}${e?`:${e}`:""}`}function gf(r=[],e=[]){return[...new Set([...r,...e])]}async function dre({id:r,topic:e,wcDeepLink:t}){var i;try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t,n=s?.href;if(typeof n!="string")return;const c=pre(n,r,e),l=Wl();if(l===dn.browser){if(!((i=Ji.getDocument())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}gre(c)}else l===dn.reactNative&&typeof globalThis?.Linking<"u"&&await globalThis.Linking.openURL(c)}catch(s){console.error(s)}}function pre(r,e,t){const i=`requestId=${e}&sessionTopic=${t}`;r.endsWith("/")&&(r=r.slice(0,-1));let s=`${r}`;if(r.startsWith("https://t.me")){const n=r.includes("?")?"&startapp=":"?startapp=";s=`${s}${n}${vre(i,!0)}`}else s=`${s}/wc?${i}`;return s}function gre(r){let e="_self";mre()?e="_top":(wre()||r.startsWith("https://")||r.startsWith("http://"))&&(e="_blank"),window.open(r,e,"noreferrer noopener")}async function yre(r,e){let t="";try{if(Yl()&&(t=localStorage.getItem(e),t))return t;t=await r.getItem(e)}catch(i){console.error(i)}return t}function cA(r,e){if(!r.includes(e))return null;const t=r.split(/([&,?,=])/),i=t.indexOf(e);return t[i+2]}function hA(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}function Fv(){return typeof Be<"u"&&tre.IS_VITEST==="true"}function wre(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function mre(){try{return window.self!==window.top}catch{return!1}}function vre(r,e=!1){const t=We.from(r).toString("base64");return e?t.replace(/[=]/g,""):t}function GT(r){return We.from(r,"base64").toString("utf-8")}function bre(r){return new Promise(e=>setTimeout(e,r))}function ml(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Mre(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Nd(r,...e){if(!Mre(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Hv(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ml(r.outputLen),ml(r.blockLen)}function Ec(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function KT(r,e){Nd(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Bu=BigInt(2**32-1),lA=BigInt(32);function Nre(r,e=!1){return e?{h:Number(r&Bu),l:Number(r>>lA&Bu)}:{h:Number(r>>lA&Bu)|0,l:Number(r&Bu)|0}}function Ire(r,e=!1){let t=new Uint32Array(r.length),i=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:n,l:c}=Nre(r[s],e);[t[s],i[s]]=[n,c]}return[t,i]}const Are=(r,e,t)=>r<<t|e>>>32-t,_re=(r,e,t)=>e<<t|r>>>32-t,Ere=(r,e,t)=>e<<t-32|r>>>64-t,Dre=(r,e,t)=>r<<t-32|e>>>64-t,ko=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Sre(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function rw(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function ss(r,e){return r<<32-e|r>>>e}const uA=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function xre(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function fA(r){for(let e=0;e<r.length;e++)r[e]=xre(r[e])}function Tre(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function Dc(r){return typeof r=="string"&&(r=Tre(r)),Nd(r),r}let Zv=class{clone(){return this._cloneInto()}};function JT(r){const e=i=>r().update(Dc(i)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Ql(r=32){if(ko&&typeof ko.getRandomValues=="function")return ko.getRandomValues(new Uint8Array(r));if(ko&&typeof ko.randomBytes=="function")return ko.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}const XT=[],e5=[],t5=[],jre=BigInt(0),gh=BigInt(1),Cre=BigInt(2),Ore=BigInt(7),Lre=BigInt(256),zre=BigInt(113);for(let r=0,e=gh,t=1,i=0;r<24;r++){[t,i]=[i,(2*t+3*i)%5],XT.push(2*(5*i+t)),e5.push((r+1)*(r+2)/2%64);let s=jre;for(let n=0;n<7;n++)e=(e<<gh^(e>>Ore)*zre)%Lre,e&Cre&&(s^=gh<<(gh<<BigInt(n))-gh);t5.push(s)}const[kre,Pre]=Ire(t5,!0),dA=(r,e,t)=>t>32?Ere(r,e,t):Are(r,e,t),pA=(r,e,t)=>t>32?Dre(r,e,t):_re(r,e,t);function Rre(r,e=24){const t=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let c=0;c<10;c++)t[c]=r[c]^r[c+10]^r[c+20]^r[c+30]^r[c+40];for(let c=0;c<10;c+=2){const l=(c+8)%10,u=(c+2)%10,f=t[u],g=t[u+1],m=dA(f,g,1)^t[l],N=pA(f,g,1)^t[l+1];for(let A=0;A<50;A+=10)r[c+A]^=m,r[c+A+1]^=N}let s=r[2],n=r[3];for(let c=0;c<24;c++){const l=e5[c],u=dA(s,n,l),f=pA(s,n,l),g=XT[c];s=r[g],n=r[g+1],r[g]=u,r[g+1]=f}for(let c=0;c<50;c+=10){for(let l=0;l<10;l++)t[l]=r[c+l];for(let l=0;l<10;l++)r[c+l]^=~t[(l+2)%10]&t[(l+4)%10]}r[0]^=kre[i],r[1]^=Pre[i]}t.fill(0)}let Ure=class r5 extends Zv{constructor(e,t,i,s=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=i,this.enableXOF=s,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ml(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Sre(this.state)}keccak(){uA||fA(this.state32),Rre(this.state32,this.rounds),uA||fA(this.state32),this.posOut=0,this.pos=0}update(e){Ec(this);const{blockLen:t,state:i}=this;e=Dc(e);const s=e.length;for(let n=0;n<s;){const c=Math.min(t-this.pos,s-n);for(let l=0;l<c;l++)i[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:i,blockLen:s}=this;e[i]^=t,(t&128)!==0&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ec(this,!1),Nd(e),this.finish();const t=this.state,{blockLen:i}=this;for(let s=0,n=e.length;s<n;){this.posOut>=i&&this.keccak();const c=Math.min(i-this.posOut,n-s);e.set(t.subarray(this.posOut,this.posOut+c),s),this.posOut+=c,s+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ml(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(KT(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:i,outputLen:s,rounds:n,enableXOF:c}=this;return e||(e=new r5(t,i,s,c,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=i,e.outputLen=s,e.enableXOF=c,e.destroyed=this.destroyed,e}};const $re=(r,e,t)=>JT(()=>new Ure(e,r,t)),Bre=$re(1,136,256/8),qre="https://rpc.walletconnect.org/v1";function i5(r){const e=`Ethereum Signed Message:
${r.length}`,t=new TextEncoder().encode(e+r);return"0x"+We.from(Bre(t)).toString("hex")}async function Yre(r,e,t,i,s,n){switch(t.t){case"eip191":return await Wre(r,e,t.s);case"eip1271":return await Qre(r,e,t.s,i,s,n);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}async function Wre(r,e,t){return(await Jte({hash:i5(e),signature:t})).toLowerCase()===r.toLowerCase()}async function Qre(r,e,t,i,s,n){const c=fc(i);if(!c.namespace||!c.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{const l="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",f="0000000000000000000000000000000000000000000000000000000000000041",g=t.substring(2),m=i5(e).substring(2),N=l+m+u+f+g,A=await fetch(`${n||qre}/?chainId=${i}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:Vre(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:N},"latest"]})}),{result:_}=await A.json();return _?_.slice(0,l.length).toLowerCase()===l.toLowerCase():!1}catch(l){return console.error("isValidEip1271Signature: ",l),!1}}function Vre(){return Date.now()+Math.floor(Math.random()*1e3)}function Fre(r){const e=atob(r),t=new Uint8Array(e.length);for(let c=0;c<e.length;c++)t[c]=e.charCodeAt(c);const i=t[0];if(i===0)throw new Error("No signatures found");const s=1+i*64;if(t.length<s)throw new Error("Transaction data too short for claimed signature count");if(t.length<100)throw new Error("Transaction too short");const n=We.from(r,"base64").slice(1,65);return WT.encode(n)}var Hre=Object.defineProperty,Zre=Object.defineProperties,Gre=Object.getOwnPropertyDescriptors,gA=Object.getOwnPropertySymbols,Kre=Object.prototype.hasOwnProperty,Jre=Object.prototype.propertyIsEnumerable,yA=(r,e,t)=>e in r?Hre(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xre=(r,e)=>{for(var t in e||(e={}))Kre.call(e,t)&&yA(r,t,e[t]);if(gA)for(var t of gA(e))Jre.call(e,t)&&yA(r,t,e[t]);return r},eie=(r,e)=>Zre(r,Gre(e));const tie="did:pkh:",Gv=r=>r?.split(":"),rie=r=>{const e=r&&Gv(r);if(e)return r.includes(tie)?e[3]:e[1]},Im=r=>{const e=r&&Gv(r);if(e)return e[2]+":"+e[3]},Uf=r=>{const e=r&&Gv(r);if(e)return e.pop()};async function wA(r){const{cacao:e,projectId:t}=r,{s:i,p:s}=e,n=n5(s,s.iss),c=Uf(s.iss);return await Yre(c,n,i,Im(s.iss),t)}const n5=(r,e)=>{const t=`${r.domain} wants you to sign in with your Ethereum account:`,i=Uf(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=r.statement||void 0;const n=`URI: ${r.aud||r.uri}`,c=`Version: ${r.version}`,l=`Chain ID: ${rie(e)}`,u=`Nonce: ${r.nonce}`,f=`Issued At: ${r.iat}`,g=r.exp?`Expiration Time: ${r.exp}`:void 0,m=r.nbf?`Not Before: ${r.nbf}`:void 0,N=r.requestId?`Request ID: ${r.requestId}`:void 0,A=r.resources?`Resources:${r.resources.map(E=>`
- ${E}`).join("")}`:void 0,_=yf(r.resources);if(_){const E=vl(_);s=uie(s,E)}return[t,i,"",s,"",n,c,l,u,f,g,m,N,A].filter(E=>E!=null).join(`
`)};function iie(r){return We.from(JSON.stringify(r)).toString("base64")}function nie(r){return JSON.parse(We.from(r,"base64").toString("utf-8"))}function Xa(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const i=r.att[t];if(Array.isArray(i))throw new Error(`Resource must be an object: ${t}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(i).forEach(s=>{const n=i[s];if(!Array.isArray(n))throw new Error(`Ability limits ${s} must be an array of objects, found: ${n}`);if(!n.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);n.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${c}`)})})})}function sie(r,e,t,i={}){return t?.sort((s,n)=>s.localeCompare(n)),{att:{[r]:aie(e,t,i)}}}function aie(r,e,t={}){e=e?.sort((s,n)=>s.localeCompare(n));const i=e.map(s=>({[`${r}/${s}`]:[t]}));return Object.assign({},...i)}function s5(r){return Xa(r),`urn:recap:${iie(r).replace(/=/g,"")}`}function vl(r){const e=nie(r.replace("urn:recap:",""));return Xa(e),e}function oie(r,e,t){const i=sie(r,e,t);return s5(i)}function cie(r){return r&&r.includes("urn:recap:")}function hie(r,e){const t=vl(r),i=vl(e),s=lie(t,i);return s5(s)}function lie(r,e){Xa(r),Xa(e);const t=Object.keys(r.att).concat(Object.keys(e.att)).sort((s,n)=>s.localeCompare(n)),i={att:{}};return t.forEach(s=>{var n,c;Object.keys(((n=r.att)==null?void 0:n[s])||{}).concat(Object.keys(((c=e.att)==null?void 0:c[s])||{})).sort((l,u)=>l.localeCompare(u)).forEach(l=>{var u,f;i.att[s]=eie(Xre({},i.att[s]),{[l]:((u=r.att[s])==null?void 0:u[l])||((f=e.att[s])==null?void 0:f[l])})})}),i}function uie(r="",e){Xa(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;const i=[];let s=0;Object.keys(e.att).forEach(l=>{const u=Object.keys(e.att[l]).map(m=>({ability:m.split("/")[0],action:m.split("/")[1]}));u.sort((m,N)=>m.action.localeCompare(N.action));const f={};u.forEach(m=>{f[m.ability]||(f[m.ability]=[]),f[m.ability].push(m.action)});const g=Object.keys(f).map(m=>(s++,`(${s}) '${m}': '${f[m].join("', '")}' for '${l}'.`));i.push(g.join(", ").replace(".,","."))});const n=i.join(" "),c=`${t}${n}`;return`${r?r+" ":""}${c}`}function mA(r){var e;const t=vl(r);Xa(t);const i=(e=t.att)==null?void 0:e.eip155;return i?Object.keys(i).map(s=>s.split("/")[1]):[]}function vA(r){const e=vl(r);Xa(e);const t=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(s=>{var n;(n=s?.[0])!=null&&n.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function yf(r){if(!r)return;const e=r?.[r.length-1];return cie(e)?e:void 0}function iw(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function a5(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ln(r,...e){if(!a5(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function bA(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function fie(r,e){ln(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function MA(r){if(typeof r!="boolean")throw new Error(`boolean expected, not ${r}`)}const oa=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),die=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),pie=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!pie)throw new Error("Non little-endian hardware is not supported");function gie(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Am(r){if(typeof r=="string")r=gie(r);else if(a5(r))r=_m(r);else throw new Error("Uint8Array expected, got "+typeof r);return r}function yie(r,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(r,e)}function wie(r,e){if(r.length!==e.length)return!1;let t=0;for(let i=0;i<r.length;i++)t|=r[i]^e[i];return t===0}const mie=(r,e)=>{function t(i,...s){if(ln(i),r.nonceLength!==void 0){const f=s[0];if(!f)throw new Error("nonce / iv required");r.varSizeNonce?ln(f):ln(f,r.nonceLength)}const n=r.tagLength;n&&s[1]!==void 0&&ln(s[1]);const c=e(i,...s),l=(f,g)=>{if(g!==void 0){if(f!==2)throw new Error("cipher output not supported");ln(g)}};let u=!1;return{encrypt(f,g){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,ln(f),l(c.encrypt.length,g),c.encrypt(f,g)},decrypt(f,g){if(ln(f),n&&f.length<n)throw new Error("invalid ciphertext length: smaller than tagLength="+n);return l(c.decrypt.length,g),c.decrypt(f,g)}}}return Object.assign(t,r),t};function NA(r,e,t=!0){if(e===void 0)return new Uint8Array(r);if(e.length!==r)throw new Error("invalid output length, expected "+r+", got: "+e.length);if(t&&!vie(e))throw new Error("invalid output, must be aligned");return e}function IA(r,e,t,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,i);const s=BigInt(32),n=BigInt(4294967295),c=Number(t>>s&n),l=Number(t&n);r.setUint32(e+4,c,i),r.setUint32(e+0,l,i)}function vie(r){return r.byteOffset%4===0}function _m(r){return Uint8Array.from(r)}function Sc(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}const o5=r=>Uint8Array.from(r.split("").map(e=>e.charCodeAt(0))),bie=o5("expand 16-byte k"),Mie=o5("expand 32-byte k"),Nie=oa(bie),Iie=oa(Mie);function Nt(r,e){return r<<e|r>>>32-e}function Em(r){return r.byteOffset%4===0}const qu=64,Aie=16,c5=2**32-1,AA=new Uint32Array;function _ie(r,e,t,i,s,n,c,l){const u=s.length,f=new Uint8Array(qu),g=oa(f),m=Em(s)&&Em(n),N=m?oa(s):AA,A=m?oa(n):AA;for(let _=0;_<u;c++){if(r(e,t,i,g,c,l),c>=c5)throw new Error("arx: counter overflow");const E=Math.min(qu,u-_);if(m&&E===qu){const x=_/4;if(_%4!==0)throw new Error("arx: invalid block position");for(let S=0,D;S<Aie;S++)D=x+S,A[D]=N[D]^g[S];_+=qu;continue}for(let x=0,S;x<E;x++)S=_+x,n[S]=s[S]^f[x];_+=E}}function Eie(r,e){const{allowShortKeys:t,extendNonceFn:i,counterLength:s,counterRight:n,rounds:c}=yie({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof r!="function")throw new Error("core must be a function");return iw(s),iw(c),MA(n),MA(t),(l,u,f,g,m=0)=>{ln(l),ln(u),ln(f);const N=f.length;if(g===void 0&&(g=new Uint8Array(N)),ln(g),iw(m),m<0||m>=c5)throw new Error("arx: counter overflow");if(g.length<N)throw new Error(`arx: output (${g.length}) is shorter than data (${N})`);const A=[];let _=l.length,E,x;if(_===32)A.push(E=_m(l)),x=Iie;else if(_===16&&t)E=new Uint8Array(32),E.set(l),E.set(l,16),x=Nie,A.push(E);else throw new Error(`arx: invalid 32-byte key, got length=${_}`);Em(u)||A.push(u=_m(u));const S=oa(E);if(i){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(x,S,oa(u.subarray(0,16)),S),u=u.subarray(16)}const D=16-s;if(D!==u.length)throw new Error(`arx: nonce must be ${D} or 16 bytes`);if(D!==12){const j=new Uint8Array(12);j.set(u,n?0:12-u.length),u=j,A.push(u)}const C=oa(u);return _ie(r,x,S,C,f,g,m,c),Sc(...A),g}}const bi=(r,e)=>r[e++]&255|(r[e++]&255)<<8;let Die=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Am(e),ln(e,32);const t=bi(e,0),i=bi(e,2),s=bi(e,4),n=bi(e,6),c=bi(e,8),l=bi(e,10),u=bi(e,12),f=bi(e,14);this.r[0]=t&8191,this.r[1]=(t>>>13|i<<3)&8191,this.r[2]=(i>>>10|s<<6)&7939,this.r[3]=(s>>>7|n<<9)&8191,this.r[4]=(n>>>4|c<<12)&255,this.r[5]=c>>>1&8190,this.r[6]=(c>>>14|l<<2)&8191,this.r[7]=(l>>>11|u<<5)&8065,this.r[8]=(u>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let g=0;g<8;g++)this.pad[g]=bi(e,16+2*g)}process(e,t,i=!1){const s=i?0:2048,{h:n,r:c}=this,l=c[0],u=c[1],f=c[2],g=c[3],m=c[4],N=c[5],A=c[6],_=c[7],E=c[8],x=c[9],S=bi(e,t+0),D=bi(e,t+2),C=bi(e,t+4),j=bi(e,t+6),k=bi(e,t+8),P=bi(e,t+10),Q=bi(e,t+12),F=bi(e,t+14);let $=n[0]+(S&8191),Z=n[1]+((S>>>13|D<<3)&8191),M=n[2]+((D>>>10|C<<6)&8191),a=n[3]+((C>>>7|j<<9)&8191),h=n[4]+((j>>>4|k<<12)&8191),d=n[5]+(k>>>1&8191),p=n[6]+((k>>>14|P<<2)&8191),w=n[7]+((P>>>11|Q<<5)&8191),b=n[8]+((Q>>>8|F<<8)&8191),I=n[9]+(F>>>5|s),y=0,o=y+$*l+Z*(5*x)+M*(5*E)+a*(5*_)+h*(5*A);y=o>>>13,o&=8191,o+=d*(5*N)+p*(5*m)+w*(5*g)+b*(5*f)+I*(5*u),y+=o>>>13,o&=8191;let v=y+$*u+Z*l+M*(5*x)+a*(5*E)+h*(5*_);y=v>>>13,v&=8191,v+=d*(5*A)+p*(5*N)+w*(5*m)+b*(5*g)+I*(5*f),y+=v>>>13,v&=8191;let R=y+$*f+Z*u+M*l+a*(5*x)+h*(5*E);y=R>>>13,R&=8191,R+=d*(5*_)+p*(5*A)+w*(5*N)+b*(5*m)+I*(5*g),y+=R>>>13,R&=8191;let L=y+$*g+Z*f+M*u+a*l+h*(5*x);y=L>>>13,L&=8191,L+=d*(5*E)+p*(5*_)+w*(5*A)+b*(5*N)+I*(5*m),y+=L>>>13,L&=8191;let z=y+$*m+Z*g+M*f+a*u+h*l;y=z>>>13,z&=8191,z+=d*(5*x)+p*(5*E)+w*(5*_)+b*(5*A)+I*(5*N),y+=z>>>13,z&=8191;let q=y+$*N+Z*m+M*g+a*f+h*u;y=q>>>13,q&=8191,q+=d*l+p*(5*x)+w*(5*E)+b*(5*_)+I*(5*A),y+=q>>>13,q&=8191;let Y=y+$*A+Z*N+M*m+a*g+h*f;y=Y>>>13,Y&=8191,Y+=d*u+p*l+w*(5*x)+b*(5*E)+I*(5*_),y+=Y>>>13,Y&=8191;let T=y+$*_+Z*A+M*N+a*m+h*g;y=T>>>13,T&=8191,T+=d*f+p*u+w*l+b*(5*x)+I*(5*E),y+=T>>>13,T&=8191;let O=y+$*E+Z*_+M*A+a*N+h*m;y=O>>>13,O&=8191,O+=d*g+p*f+w*u+b*l+I*(5*x),y+=O>>>13,O&=8191;let B=y+$*x+Z*E+M*_+a*A+h*N;y=B>>>13,B&=8191,B+=d*m+p*g+w*f+b*u+I*l,y+=B>>>13,B&=8191,y=(y<<2)+y|0,y=y+o|0,o=y&8191,y=y>>>13,v+=y,n[0]=o,n[1]=v,n[2]=R,n[3]=L,n[4]=z,n[5]=q,n[6]=Y,n[7]=T,n[8]=O,n[9]=B}finalize(){const{h:e,pad:t}=this,i=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let l=2;l<10;l++)e[l]+=s,s=e[l]>>>13,e[l]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,i[0]=e[0]+5,s=i[0]>>>13,i[0]&=8191;for(let l=1;l<10;l++)i[l]=e[l]+s,s=i[l]>>>13,i[l]&=8191;i[9]-=8192;let n=(s^1)-1;for(let l=0;l<10;l++)i[l]&=n;n=~n;for(let l=0;l<10;l++)e[l]=e[l]&n|i[l];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let c=e[0]+t[0];e[0]=c&65535;for(let l=1;l<8;l++)c=(e[l]+t[l]|0)+(c>>>16)|0,e[l]=c&65535;Sc(i)}update(e){bA(this);const{buffer:t,blockLen:i}=this;e=Am(e);const s=e.length;for(let n=0;n<s;){const c=Math.min(i-this.pos,s-n);if(c===i){for(;i<=s-n;n+=i)this.process(e,n);continue}t.set(e.subarray(n,n+c),this.pos),this.pos+=c,n+=c,this.pos===i&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){Sc(this.h,this.r,this.buffer,this.pad)}digestInto(e){bA(this),fie(e,this),this.finished=!0;const{buffer:t,h:i}=this;let{pos:s}=this;if(s){for(t[s++]=1;s<16;s++)t[s]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let c=0;c<8;c++)e[n++]=i[c]>>>0,e[n++]=i[c]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const i=e.slice(0,t);return this.destroy(),i}};function Sie(r){const e=(i,s)=>r(s).update(Am(i)).digest(),t=r(new Uint8Array(32));return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=i=>r(i),e}const xie=Sie(r=>new Die(r));function Tie(r,e,t,i,s,n=20){let c=r[0],l=r[1],u=r[2],f=r[3],g=e[0],m=e[1],N=e[2],A=e[3],_=e[4],E=e[5],x=e[6],S=e[7],D=s,C=t[0],j=t[1],k=t[2],P=c,Q=l,F=u,$=f,Z=g,M=m,a=N,h=A,d=_,p=E,w=x,b=S,I=D,y=C,o=j,v=k;for(let L=0;L<n;L+=2)P=P+Z|0,I=Nt(I^P,16),d=d+I|0,Z=Nt(Z^d,12),P=P+Z|0,I=Nt(I^P,8),d=d+I|0,Z=Nt(Z^d,7),Q=Q+M|0,y=Nt(y^Q,16),p=p+y|0,M=Nt(M^p,12),Q=Q+M|0,y=Nt(y^Q,8),p=p+y|0,M=Nt(M^p,7),F=F+a|0,o=Nt(o^F,16),w=w+o|0,a=Nt(a^w,12),F=F+a|0,o=Nt(o^F,8),w=w+o|0,a=Nt(a^w,7),$=$+h|0,v=Nt(v^$,16),b=b+v|0,h=Nt(h^b,12),$=$+h|0,v=Nt(v^$,8),b=b+v|0,h=Nt(h^b,7),P=P+M|0,v=Nt(v^P,16),w=w+v|0,M=Nt(M^w,12),P=P+M|0,v=Nt(v^P,8),w=w+v|0,M=Nt(M^w,7),Q=Q+a|0,I=Nt(I^Q,16),b=b+I|0,a=Nt(a^b,12),Q=Q+a|0,I=Nt(I^Q,8),b=b+I|0,a=Nt(a^b,7),F=F+h|0,y=Nt(y^F,16),d=d+y|0,h=Nt(h^d,12),F=F+h|0,y=Nt(y^F,8),d=d+y|0,h=Nt(h^d,7),$=$+Z|0,o=Nt(o^$,16),p=p+o|0,Z=Nt(Z^p,12),$=$+Z|0,o=Nt(o^$,8),p=p+o|0,Z=Nt(Z^p,7);let R=0;i[R++]=c+P|0,i[R++]=l+Q|0,i[R++]=u+F|0,i[R++]=f+$|0,i[R++]=g+Z|0,i[R++]=m+M|0,i[R++]=N+a|0,i[R++]=A+h|0,i[R++]=_+d|0,i[R++]=E+p|0,i[R++]=x+w|0,i[R++]=S+b|0,i[R++]=D+I|0,i[R++]=C+y|0,i[R++]=j+o|0,i[R++]=k+v|0}const jie=Eie(Tie,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Cie=new Uint8Array(16),_A=(r,e)=>{r.update(e);const t=e.length%16;t&&r.update(Cie.subarray(t))},Oie=new Uint8Array(32);function EA(r,e,t,i,s){const n=r(e,t,Oie),c=xie.create(n);s&&_A(c,s),_A(c,i);const l=new Uint8Array(16),u=die(l);IA(u,0,BigInt(s?s.length:0),!0),IA(u,8,BigInt(i.length),!0),c.update(l);const f=c.digest();return Sc(n,l),f}const Lie=r=>(e,t,i)=>({encrypt(s,n){const c=s.length;n=NA(c+16,n,!1),n.set(s);const l=n.subarray(0,-16);r(e,t,l,l,1);const u=EA(r,e,t,l,i);return n.set(u,c),Sc(u),n},decrypt(s,n){n=NA(s.length-16,n,!1);const c=s.subarray(0,-16),l=s.subarray(-16),u=EA(r,e,t,c,i);if(!wie(l,u))throw new Error("invalid tag");return n.set(s.subarray(0,-16)),r(e,t,n,n,1),Sc(u),n}}),h5=mie({blockSize:64,nonceLength:12,tagLength:16},Lie(jie));let l5=class extends Zv{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Hv(e);const i=Dc(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,n=new Uint8Array(s);n.set(i.length>s?e.create().update(i).digest():i);for(let c=0;c<n.length;c++)n[c]^=54;this.iHash.update(n),this.oHash=e.create();for(let c=0;c<n.length;c++)n[c]^=106;this.oHash.update(n),n.fill(0)}update(e){return Ec(this),this.iHash.update(e),this}digestInto(e){Ec(this),Nd(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:i,finished:s,destroyed:n,blockLen:c,outputLen:l}=this;return e=e,e.finished=s,e.destroyed=n,e.blockLen=c,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Kv=(r,e,t)=>new l5(r,e).update(t).digest();Kv.create=(r,e)=>new l5(r,e);function zie(r,e,t){return Hv(r),t===void 0&&(t=new Uint8Array(r.outputLen)),Kv(r,Dc(t),Dc(e))}const nw=new Uint8Array([0]),DA=new Uint8Array;function kie(r,e,t,i=32){if(Hv(r),ml(i),i>255*r.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(i/r.outputLen);t===void 0&&(t=DA);const n=new Uint8Array(s*r.outputLen),c=Kv.create(r,e),l=c._cloneInto(),u=new Uint8Array(c.outputLen);for(let f=0;f<s;f++)nw[0]=f+1,l.update(f===0?DA:u).update(t).update(nw).digestInto(u),n.set(u,r.outputLen*f),c._cloneInto(l);return c.destroy(),l.destroy(),u.fill(0),nw.fill(0),n.slice(0,i)}const Pie=(r,e,t,i,s)=>kie(r,zie(r,e,t),i,s);function Rie(r,e,t,i){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,i);const s=BigInt(32),n=BigInt(4294967295),c=Number(t>>s&n),l=Number(t&n),u=i?4:0,f=i?0:4;r.setUint32(e+u,c,i),r.setUint32(e+f,l,i)}function Uie(r,e,t){return r&e^~r&t}function $ie(r,e,t){return r&e^r&t^e&t}class Bie extends Zv{constructor(e,t,i,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=rw(this.buffer)}update(e){Ec(this);const{view:t,buffer:i,blockLen:s}=this;e=Dc(e);const n=e.length;for(let c=0;c<n;){const l=Math.min(s-this.pos,n-c);if(l===s){const u=rw(e);for(;s<=n-c;c+=s)this.process(u,c);continue}i.set(e.subarray(c,c+l),this.pos),this.pos+=l,c+=l,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ec(this),KT(e,this),this.finished=!0;const{buffer:t,view:i,blockLen:s,isLE:n}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>s-c&&(this.process(i,0),c=0);for(let m=c;m<s;m++)t[m]=0;Rie(i,s-8,BigInt(this.length*8),n),this.process(i,0);const l=rw(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=u/4,g=this.get();if(f>g.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<f;m++)l.setUint32(4*m,g[m],n)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const i=e.slice(0,t);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:i,length:s,finished:n,destroyed:c,pos:l}=this;return e.length=s,e.pos=l,e.finished=n,e.destroyed=c,s%t&&e.buffer.set(i),e}}const qie=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fs=new Uint32Array(64);let Yie=class extends Bie{constructor(){super(64,32,8,!1),this.A=Vs[0]|0,this.B=Vs[1]|0,this.C=Vs[2]|0,this.D=Vs[3]|0,this.E=Vs[4]|0,this.F=Vs[5]|0,this.G=Vs[6]|0,this.H=Vs[7]|0}get(){const{A:e,B:t,C:i,D:s,E:n,F:c,G:l,H:u}=this;return[e,t,i,s,n,c,l,u]}set(e,t,i,s,n,c,l,u){this.A=e|0,this.B=t|0,this.C=i|0,this.D=s|0,this.E=n|0,this.F=c|0,this.G=l|0,this.H=u|0}process(e,t){for(let m=0;m<16;m++,t+=4)Fs[m]=e.getUint32(t,!1);for(let m=16;m<64;m++){const N=Fs[m-15],A=Fs[m-2],_=ss(N,7)^ss(N,18)^N>>>3,E=ss(A,17)^ss(A,19)^A>>>10;Fs[m]=E+Fs[m-7]+_+Fs[m-16]|0}let{A:i,B:s,C:n,D:c,E:l,F:u,G:f,H:g}=this;for(let m=0;m<64;m++){const N=ss(l,6)^ss(l,11)^ss(l,25),A=g+N+Uie(l,u,f)+qie[m]+Fs[m]|0,_=(ss(i,2)^ss(i,13)^ss(i,22))+$ie(i,s,n)|0;g=f,f=u,u=l,l=c+A|0,c=n,n=s,s=i,i=A+_|0}i=i+this.A|0,s=s+this.B|0,n=n+this.C|0,c=c+this.D|0,l=l+this.E|0,u=u+this.F|0,f=f+this.G|0,g=g+this.H|0,this.set(i,s,n,c,l,u,f,g)}roundClean(){Fs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Id=JT(()=>new Yie);const u5=BigInt(0);function Jv(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function f5(r){if(!Jv(r))throw new Error("Uint8Array expected")}const Wie=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Qie(r){f5(r);let e="";for(let t=0;t<r.length;t++)e+=Wie[r[t]];return e}function Vie(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?u5:BigInt("0x"+r)}const Ss={_0:48,_9:57,A:65,F:70,a:97,f:102};function SA(r){if(r>=Ss._0&&r<=Ss._9)return r-Ss._0;if(r>=Ss.A&&r<=Ss.F)return r-(Ss.A-10);if(r>=Ss.a&&r<=Ss.f)return r-(Ss.a-10)}function d5(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(t);for(let s=0,n=0;s<t;s++,n+=2){const c=SA(r.charCodeAt(n)),l=SA(r.charCodeAt(n+1));if(c===void 0||l===void 0){const u=r[n]+r[n+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+n)}i[s]=c*16+l}return i}function xA(r){return f5(r),Vie(Qie(Uint8Array.from(r).reverse()))}function Fie(r,e){return d5(r.toString(16).padStart(e*2,"0"))}function Hie(r,e){return Fie(r,e).reverse()}function TA(r,e,t){let i;if(typeof e=="string")try{i=d5(e)}catch(n){throw new Error(r+" must be hex string or Uint8Array, cause: "+n)}else if(Jv(e))i=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=i.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return i}const sw=r=>typeof r=="bigint"&&u5<=r;function Zie(r,e,t){return sw(r)&&sw(e)&&sw(t)&&e<=r&&r<t}function jA(r,e,t,i){if(!Zie(e,t,i))throw new Error("expected valid "+r+": "+t+" <= n < "+i+", got "+e)}const Gie={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Jv(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Kie(r,e,t={}){const i=(s,n,c)=>{const l=Gie[n];if(typeof l!="function")throw new Error("invalid validator function");const u=r[s];if(!(c&&u===void 0)&&!l(u,r))throw new Error("param "+String(s)+" is invalid. Expected "+n+", got "+u)};for(const[s,n]of Object.entries(e))i(s,n,!1);for(const[s,n]of Object.entries(t))i(s,n,!0);return r}const oc=BigInt(0),Yu=BigInt(1);function p5(r,e){const t=r%e;return t>=oc?t:e+t}function Jie(r,e,t){if(e<oc)throw new Error("invalid exponent, negatives unsupported");if(t<=oc)throw new Error("invalid modulus");if(t===Yu)return oc;let i=Yu;for(;e>oc;)e&Yu&&(i=i*r%t),r=r*r%t,e>>=Yu;return i}function Hn(r,e,t){let i=r;for(;e-- >oc;)i*=i,i%=t;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Po=BigInt(0),aw=BigInt(1);function Xie(r){return Kie(r,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...r})}function ene(r){const e=Xie(r),{P:t}=e,i=D=>p5(D,t),s=e.montgomeryBits,n=Math.ceil(s/8),c=e.nByteLength,l=e.adjustScalarBytes||(D=>D),u=e.powPminus2||(D=>Jie(D,t-BigInt(2),t));function f(D,C,j){const k=i(D*(C-j));return C=i(C-k),j=i(j+k),[C,j]}const g=(e.a-BigInt(2))/BigInt(4);function m(D,C){jA("u",D,Po,t),jA("scalar",C,Po,t);const j=C,k=D;let P=aw,Q=Po,F=D,$=aw,Z=Po,M;for(let h=BigInt(s-1);h>=Po;h--){const d=j>>h&aw;Z^=d,M=f(Z,P,F),P=M[0],F=M[1],M=f(Z,Q,$),Q=M[0],$=M[1],Z=d;const p=P+Q,w=i(p*p),b=P-Q,I=i(b*b),y=w-I,o=F+$,v=F-$,R=i(v*p),L=i(o*b),z=R+L,q=R-L;F=i(z*z),$=i(k*i(q*q)),P=i(w*I),Q=i(y*(w+i(g*y)))}M=f(Z,P,F),P=M[0],F=M[1],M=f(Z,Q,$),Q=M[0],$=M[1];const a=u(Q);return i(P*a)}function N(D){return Hie(i(D),n)}function A(D){const C=TA("u coordinate",D,n);return c===32&&(C[31]&=127),xA(C)}function _(D){const C=TA("scalar",D),j=C.length;if(j!==n&&j!==c){let k=""+n+" or "+c;throw new Error("invalid scalar, expected "+k+" bytes, got "+j)}return xA(l(C))}function E(D,C){const j=A(C),k=_(D),P=m(j,k);if(P===Po)throw new Error("invalid private or public key received");return N(P)}const x=N(e.Gu);function S(D){return E(D,x)}return{scalarMult:E,scalarMultBase:S,getSharedSecret:(D,C)=>E(D,C),getPublicKey:D=>S(D),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:x}}const Dm=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const tne=BigInt(1),CA=BigInt(2),rne=BigInt(3),ine=BigInt(5);BigInt(8);function nne(r){const e=BigInt(10),t=BigInt(20),i=BigInt(40),s=BigInt(80),n=Dm,c=r*r%n*r%n,l=Hn(c,CA,n)*c%n,u=Hn(l,tne,n)*r%n,f=Hn(u,ine,n)*u%n,g=Hn(f,e,n)*f%n,m=Hn(g,t,n)*g%n,N=Hn(m,i,n)*m%n,A=Hn(N,s,n)*N%n,_=Hn(A,s,n)*N%n,E=Hn(_,e,n)*f%n;return{pow_p_5_8:Hn(E,CA,n)*r%n,b2:c}}function sne(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Sm=ene({P:Dm,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:r=>{const e=Dm,{pow_p_5_8:t,b2:i}=nne(r);return p5(Hn(t,rne,e)*i,e)},adjustScalarBytes:sne,randomBytes:Ql}),g5="base10",zi="base16",sa="base64pad",yh="base64url",Vl="utf8",y5=0,Ls=1,Fl=2,ane=0,OA=1,Rh=12,Xv=32;function one(){const r=Sm.utils.randomPrivateKey(),e=Sm.getPublicKey(r);return{privateKey:Ct(r,zi),publicKey:Ct(e,zi)}}function xm(){const r=Ql(Xv);return Ct(r,zi)}function cne(r,e){const t=Sm.getSharedSecret(Ir(r,zi),Ir(e,zi)),i=Pie(Id,t,void 0,void 0,Xv);return Ct(i,zi)}function wf(r){const e=Id(Ir(r,zi));return Ct(e,zi)}function ls(r){const e=Id(Ir(r,Vl));return Ct(e,zi)}function w5(r){return Ir(`${r}`,g5)}function eo(r){return Number(Ct(r,g5))}function hne(r){const e=w5(typeof r.type<"u"?r.type:y5);if(eo(e)===Ls&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?Ir(r.senderPublicKey,zi):void 0,i=typeof r.iv<"u"?Ir(r.iv,zi):Ql(Rh),s=Ir(r.symKey,zi),n=h5(s,i).encrypt(Ir(r.message,Vl));return m5({type:e,sealed:n,iv:i,senderPublicKey:t,encoding:r.encoding})}function lne(r){const e=Ir(r.symKey,zi),{sealed:t,iv:i}=bl(r),s=h5(e,i).decrypt(t);if(s===null)throw new Error("Failed to decrypt");return Ct(s,Vl)}function une(r,e){const t=w5(Fl),i=Ql(Rh),s=Ir(r,Vl);return m5({type:t,sealed:s,iv:i,encoding:e})}function fne(r,e){const{sealed:t}=bl({encoded:r,encoding:e});return Ct(t,Vl)}function m5(r){const{encoding:e=sa}=r;if(eo(r.type)===Fl)return Ct(lc([r.type,r.sealed]),e);if(eo(r.type)===Ls){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ct(lc([r.type,r.senderPublicKey,r.iv,r.sealed]),e)}return Ct(lc([r.type,r.iv,r.sealed]),e)}function bl(r){const{encoded:e,encoding:t=sa}=r,i=Ir(e,t),s=i.slice(ane,OA),n=OA;if(eo(s)===Ls){const f=n+Xv,g=f+Rh,m=i.slice(n,f),N=i.slice(f,g),A=i.slice(g);return{type:s,sealed:A,iv:N,senderPublicKey:m}}if(eo(s)===Fl){const f=i.slice(n),g=Ql(Rh);return{type:s,sealed:f,iv:g}}const c=n+Rh,l=i.slice(n,c),u=i.slice(c);return{type:s,sealed:u,iv:l}}function dne(r,e){const t=bl({encoded:r,encoding:e?.encoding});return v5({type:eo(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Ct(t.senderPublicKey,zi):void 0,receiverPublicKey:e?.receiverPublicKey})}function v5(r){const e=r?.type||y5;if(e===Ls){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function LA(r){return r.type===Ls&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function zA(r){return r.type===Fl}function pne(r){return new RS.ec("p256").keyFromPublic({x:We.from(r.x,"base64").toString("hex"),y:We.from(r.y,"base64").toString("hex")},"hex")}function gne(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");const t=e.length%4;return t>0&&(e+="=".repeat(4-t)),e}function yne(r){return We.from(gne(r),"base64")}function wne(r,e){const[t,i,s]=r.split("."),n=yne(s);if(n.length!==64)throw new Error("Invalid signature length");const c=n.slice(0,32).toString("hex"),l=n.slice(32,64).toString("hex"),u=`${t}.${i}`,f=Id(u),g=pne(e),m=Ct(f,zi);if(!g.verify(m,{r:c,s:l}))throw new Error("Invalid signature");return gc(r).payload}const mne="irn";function $f(r){return r?.relay||{protocol:mne}}function Sh(r){const e=US[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}function vne(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const n=s.replace(i,""),c=r[s];t[n]=c}}),t}function kA(r){if(!r.includes("wc:")){const f=GT(r);f!=null&&f.includes("wc:")&&(r=f)}r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),s=r.substring(e+1,t).split("@"),n=typeof t<"u"?r.substring(t):"",c=new URLSearchParams(n),l={};c.forEach((f,g)=>{l[g]=f});const u=typeof l.methods=="string"?l.methods.split(","):void 0;return{protocol:i,topic:bne(s[0]),version:parseInt(s[1],10),symKey:l.symKey,relay:vne(l),methods:u,expiryTimestamp:l.expiryTimestamp?parseInt(l.expiryTimestamp,10):void 0}}function bne(r){return r.startsWith("//")?r.substring(2):r}function Mne(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(s=>{const n=s,c=t+e+n;r[n]&&(i[c]=r[n])}),i}function PA(r){const e=new URLSearchParams,t=Mne(r.relay);Object.keys(t).sort().forEach(s=>{e.set(s,t[s])}),e.set("symKey",r.symKey),r.expiryTimestamp&&e.set("expiryTimestamp",r.expiryTimestamp.toString()),r.methods&&e.set("methods",r.methods.join(","));const i=e.toString();return`${r.protocol}:${r.topic}@${r.version}?${i}`}function Wu(r,e,t){return`${r}?wc_ev=${t}&topic=${e}`}function Hc(r){const e=[];return r.forEach(t=>{const[i,s]=t.split(":");e.push(`${i}:${s}`)}),e}function Nne(r){const e=[];return Object.values(r).forEach(t=>{e.push(...Hc(t.accounts))}),e}function Ine(r,e){const t=[];return Object.values(r).forEach(i=>{Hc(i.accounts).includes(e)&&t.push(...i.methods)}),t}function Ane(r,e){const t=[];return Object.values(r).forEach(i=>{Hc(i.accounts).includes(e)&&t.push(...i.events)}),t}function e1(r){return r.includes(":")}function xh(r){return e1(r)?r.split(":")[0]:r}function _ne(r){const e={};return r?.forEach(t=>{var i;const[s,n]=t.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(t),(i=e[s].chains)==null||i.push(`${s}:${n}`)}),e}function RA(r,e){e=e.map(i=>i.replace("did:pkh:",""));const t=_ne(e);for(const[i,s]of Object.entries(t))s.methods?s.methods=gf(s.methods,r):s.methods=r,s.events=["chainChanged","accountsChanged"];return t}const Ene={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Dne={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function $e(r,e){const{message:t,code:i}=Dne[r];return{message:e?`${t} ${e}`:t,code:i}}function Yt(r,e){const{message:t,code:i}=Ene[r];return{message:e?`${t} ${e}`:t,code:i}}function to(r,e){return!!Array.isArray(r)}function Ml(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Ai(r){return typeof r>"u"}function Wr(r,e){return e&&Ai(r)?!0:typeof r=="string"&&!!r.trim().length}function t1(r,e){return e&&Ai(r)?!0:typeof r=="number"&&!isNaN(r)}function Sne(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),s=Object.keys(t);let n=!0;return Ba(s,i)?(i.forEach(c=>{const{accounts:l,methods:u,events:f}=r.namespaces[c],g=Hc(l),m=t[c];(!Ba(QT(c,m),g)||!Ba(m.methods,u)||!Ba(m.events,f))&&(n=!1)}),n):!1}function Bf(r){return Wr(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function xne(r){if(Wr(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Bf(t)}}return!1}function Tne(r){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(Wr(r,!1)){if(e(r))return!0;const t=GT(r);return e(t)}}catch{}return!1}function jne(r){var e;return(e=r?.proposer)==null?void 0:e.publicKey}function Cne(r){return r?.topic}function One(r,e){let t=null;return Wr(r?.publicKey,!1)||(t=$e("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function UA(r){let e=!0;return to(r)?r.length&&(e=r.every(t=>Wr(t,!1))):e=!1,e}function Lne(r,e,t){let i=null;return to(e)&&e.length?e.forEach(s=>{i||Bf(s)||(i=Yt("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Bf(r)||(i=Yt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function zne(r,e,t){let i=null;return Object.entries(r).forEach(([s,n])=>{if(i)return;const c=Lne(s,QT(s,n),`${e} ${t}`);c&&(i=c)}),i}function kne(r,e){let t=null;return to(r)?r.forEach(i=>{t||xne(i)||(t=Yt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=Yt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function Pne(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=kne(i?.accounts,`${e} namespace`);s&&(t=s)}),t}function Rne(r,e){let t=null;return UA(r?.methods)?UA(r?.events)||(t=Yt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Yt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function b5(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=Rne(i,`${e}, namespace`);s&&(t=s)}),t}function Une(r,e,t){let i=null;if(r&&Ml(r)){const s=b5(r,e);s&&(i=s);const n=zne(r,e,t);n&&(i=n)}else i=$e("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function ow(r,e){let t=null;if(r&&Ml(r)){const i=b5(r,e);i&&(t=i);const s=Pne(r,e);s&&(t=s)}else t=$e("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function M5(r){return Wr(r.protocol,!0)}function $ne(r,e){let t=!1;return r?r&&to(r)&&r.length&&r.forEach(i=>{t=M5(i)}):t=!0,t}function Bne(r){return typeof r=="number"}function Gi(r){return typeof r<"u"&&typeof r!==null}function qne(r){return!(!r||typeof r!="object"||!r.code||!t1(r.code,!1)||!r.message||!Wr(r.message,!1))}function Yne(r){return!(Ai(r)||!Wr(r.method,!1))}function Wne(r){return!(Ai(r)||Ai(r.result)&&Ai(r.error)||!t1(r.id,!1)||!Wr(r.jsonrpc,!1))}function Qne(r){return!(Ai(r)||!Wr(r.name,!1))}function $A(r,e){return!(!Bf(e)||!Nne(r).includes(e))}function Vne(r,e,t){return Wr(t,!1)?Ine(r,e).includes(t):!1}function Fne(r,e,t){return Wr(t,!1)?Ane(r,e).includes(t):!1}function BA(r,e,t){let i=null;const s=Hne(r),n=Zne(e),c=Object.keys(s),l=Object.keys(n),u=qA(Object.keys(r)),f=qA(Object.keys(e)),g=u.filter(m=>!f.includes(m));return g.length&&(i=$e("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${g.toString()}
      Received: ${Object.keys(e).toString()}`)),Ba(c,l)||(i=$e("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(m=>{if(!m.includes(":")||i)return;const N=Hc(e[m].accounts);N.includes(m)||(i=$e("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${m}
        Required: ${m}
        Approved: ${N.toString()}`))}),c.forEach(m=>{i||(Ba(s[m].methods,n[m].methods)?Ba(s[m].events,n[m].events)||(i=$e("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${m}`)):i=$e("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${m}`))}),i}function Hne(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(s=>{e[s]={methods:r[t].methods,events:r[t].events}})}),e}function qA(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Zne(r){const e={};return Object.keys(r).forEach(t=>{t.includes(":")?e[t]=r[t]:Hc(r[t].accounts)?.forEach(s=>{e[s]={accounts:r[t].accounts.filter(n=>n.includes(`${s}:`)),methods:r[t].methods,events:r[t].events}})}),e}function Gne(r,e){return t1(r,!1)&&r<=e.max&&r>=e.min}function YA(){const r=Wl();return new Promise(e=>{switch(r){case dn.browser:e(Kne());break;case dn.reactNative:e(Jne());break;case dn.node:e(Xne());break;default:e(!0)}})}function Kne(){return Yl()&&navigator?.onLine}async function Jne(){return ma()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo?(await globalThis?.NetInfo.fetch())?.isConnected:!0}function Xne(){return!0}function ese(r){switch(Wl()){case dn.browser:tse(r);break;case dn.reactNative:rse(r);break}}function tse(r){!ma()&&Yl()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function rse(r){ma()&&typeof globalThis<"u"&&globalThis!=null&&globalThis.NetInfo&&globalThis?.NetInfo.addEventListener(e=>r(e?.isConnected))}const cw={};class wh{static get(e){return cw[e]}static set(e,t){cw[e]=t}static delete(e){delete cw[e]}}const N5="wc",I5=2,Tm="core",ps=`${N5}@2:${Tm}:`,ise={logger:"error"},nse={database:":memory:"},sse="crypto",WA="client_ed25519_seed",ase=ne.ONE_DAY,ose="keychain",cse="0.3",hse="messages",lse="0.3",QA=ne.SIX_HOURS,use="publisher",A5="irn",fse="error",_5="wss://relay.walletconnect.org",dse="relayer",fi={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},pse="_subscription",En={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},gse=.1,jm="2.19.1",br={link_mode:"link_mode",relay:"relay"},mf={inbound:"inbound",outbound:"outbound"},yse="0.3",wse="WALLETCONNECT_CLIENT_ID",VA="WALLETCONNECT_LINK_MODE_APPS",cn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},mse="subscription",vse="0.3",bse="pairing",Mse="0.3",mh={wc_pairingDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ne.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:0},res:{ttl:ne.ONE_DAY,prompt:!1,tag:0}}},ka={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Wn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Nse="history",Ise="0.3",Ase="expirer",Tn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},_se="0.3",Ese="verify-api",Dse="https://verify.walletconnect.com",E5="https://verify.walletconnect.org",Uh=E5,Sse=`${Uh}/v3`,xse=[Dse,E5],Tse="echo",jse="https://echo.walletconnect.com",hs={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Ts={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Qn={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Sa={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},xa={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},vh={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Cse=.1,Ose="event-client",Lse=86400,zse="https://pulse.walletconnect.org/batch";function kse(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var n=r.charAt(s),c=n.charCodeAt(0);if(t[c]!==255)throw new TypeError(n+" is ambiguous");t[c]=s}var l=r.length,u=r.charAt(0),f=Math.log(l)/Math.log(256),g=Math.log(256)/Math.log(l);function m(_){if(_ instanceof Uint8Array||(ArrayBuffer.isView(_)?_=new Uint8Array(_.buffer,_.byteOffset,_.byteLength):Array.isArray(_)&&(_=Uint8Array.from(_))),!(_ instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(_.length===0)return"";for(var E=0,x=0,S=0,D=_.length;S!==D&&_[S]===0;)S++,E++;for(var C=(D-S)*g+1>>>0,j=new Uint8Array(C);S!==D;){for(var k=_[S],P=0,Q=C-1;(k!==0||P<x)&&Q!==-1;Q--,P++)k+=256*j[Q]>>>0,j[Q]=k%l>>>0,k=k/l>>>0;if(k!==0)throw new Error("Non-zero carry");x=P,S++}for(var F=C-x;F!==C&&j[F]===0;)F++;for(var $=u.repeat(E);F<C;++F)$+=r.charAt(j[F]);return $}function N(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return new Uint8Array;var E=0;if(_[E]!==" "){for(var x=0,S=0;_[E]===u;)x++,E++;for(var D=(_.length-E)*f+1>>>0,C=new Uint8Array(D);_[E];){var j=t[_.charCodeAt(E)];if(j===255)return;for(var k=0,P=D-1;(j!==0||k<S)&&P!==-1;P--,k++)j+=l*C[P]>>>0,C[P]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");S=k,E++}if(_[E]!==" "){for(var Q=D-S;Q!==D&&C[Q]===0;)Q++;for(var F=new Uint8Array(x+(D-Q)),$=x;Q!==D;)F[$++]=C[Q++];return F}}}function A(_){var E=N(_);if(E)return E;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:N,decode:A}}var Pse=kse,Rse=Pse;const D5=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Use=r=>new TextEncoder().encode(r),$se=r=>new TextDecoder().decode(r);class Bse{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class qse{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return S5(this,e)}}class Yse{constructor(e){this.decoders=e}or(e){return S5(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const S5=(r,e)=>new Yse({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Wse{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new Bse(e,t,i),this.decoder=new qse(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ad=({name:r,prefix:e,encode:t,decode:i})=>new Wse(r,e,t,i),Hl=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=Rse(t,e);return Ad({prefix:r,name:e,encode:i,decode:n=>D5(s(n))})},Qse=(r,e,t,i)=>{const s={};for(let g=0;g<e.length;++g)s[e[g]]=g;let n=r.length;for(;r[n-1]==="=";)--n;const c=new Uint8Array(n*t/8|0);let l=0,u=0,f=0;for(let g=0;g<n;++g){const m=s[r[g]];if(m===void 0)throw new SyntaxError(`Non-${i} character`);u=u<<t|m,l+=t,l>=8&&(l-=8,c[f++]=255&u>>l)}if(l>=t||255&u<<8-l)throw new SyntaxError("Unexpected end of data");return c},Vse=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let n="",c=0,l=0;for(let u=0;u<r.length;++u)for(l=l<<8|r[u],c+=8;c>t;)c-=t,n+=e[s&l>>c];if(c&&(n+=e[s&l<<t-c]),i)for(;n.length*t&7;)n+="=";return n},Si=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>Ad({prefix:e,name:r,encode(s){return Vse(s,i,t)},decode(s){return Qse(s,i,t,r)}}),Fse=Ad({prefix:"\0",name:"identity",encode:r=>$se(r),decode:r=>Use(r)});var Hse=Object.freeze({__proto__:null,identity:Fse});const Zse=Si({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Gse=Object.freeze({__proto__:null,base2:Zse});const Kse=Si({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Jse=Object.freeze({__proto__:null,base8:Kse});const Xse=Hl({prefix:"9",name:"base10",alphabet:"0123456789"});var eae=Object.freeze({__proto__:null,base10:Xse});const tae=Si({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rae=Si({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var iae=Object.freeze({__proto__:null,base16:tae,base16upper:rae});const nae=Si({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sae=Si({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),aae=Si({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),oae=Si({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cae=Si({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hae=Si({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lae=Si({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uae=Si({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fae=Si({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var dae=Object.freeze({__proto__:null,base32:nae,base32upper:sae,base32pad:aae,base32padupper:oae,base32hex:cae,base32hexupper:hae,base32hexpad:lae,base32hexpadupper:uae,base32z:fae});const pae=Hl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gae=Hl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var yae=Object.freeze({__proto__:null,base36:pae,base36upper:gae});const wae=Hl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),mae=Hl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vae=Object.freeze({__proto__:null,base58btc:wae,base58flickr:mae});const bae=Si({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Mae=Si({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Nae=Si({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Iae=Si({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Aae=Object.freeze({__proto__:null,base64:bae,base64pad:Mae,base64url:Nae,base64urlpad:Iae});const x5=Array.from(""),_ae=x5.reduce((r,e,t)=>(r[t]=e,r),[]),Eae=x5.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Dae(r){return r.reduce((e,t)=>(e+=_ae[t],e),"")}function Sae(r){const e=[];for(const t of r){const i=Eae[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const xae=Ad({prefix:"",name:"base256emoji",encode:Dae,decode:Sae});var Tae=Object.freeze({__proto__:null,base256emoji:xae}),jae=T5,FA=128,Cae=-128,Oae=Math.pow(2,31);function T5(r,e,t){e=e||[],t=t||0;for(var i=t;r>=Oae;)e[t++]=r&255|FA,r/=128;for(;r&Cae;)e[t++]=r&255|FA,r>>>=7;return e[t]=r|0,T5.bytes=t-i+1,e}var Lae=Cm,zae=128,HA=127;function Cm(r,i){var t=0,i=i||0,s=0,n=i,c,l=r.length;do{if(n>=l)throw Cm.bytes=0,new RangeError("Could not decode varint");c=r[n++],t+=s<28?(c&HA)<<s:(c&HA)*Math.pow(2,s),s+=7}while(c>=zae);return Cm.bytes=n-i,t}var kae=Math.pow(2,7),Pae=Math.pow(2,14),Rae=Math.pow(2,21),Uae=Math.pow(2,28),$ae=Math.pow(2,35),Bae=Math.pow(2,42),qae=Math.pow(2,49),Yae=Math.pow(2,56),Wae=Math.pow(2,63),Qae=function(r){return r<kae?1:r<Pae?2:r<Rae?3:r<Uae?4:r<$ae?5:r<Bae?6:r<qae?7:r<Yae?8:r<Wae?9:10},Vae={encode:jae,decode:Lae,encodingLength:Qae},j5=Vae;const ZA=(r,e,t=0)=>(j5.encode(r,e,t),e),GA=r=>j5.encodingLength(r),Om=(r,e)=>{const t=e.byteLength,i=GA(r),s=i+GA(t),n=new Uint8Array(s+t);return ZA(r,n,0),ZA(t,n,i),n.set(e,s),new Fae(r,t,e,n)};class Fae{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const C5=({name:r,code:e,encode:t})=>new Hae(r,e,t);class Hae{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Om(this.code,t):t.then(i=>Om(this.code,i))}else throw Error("Unknown type, must be binary type")}}const O5=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Zae=C5({name:"sha2-256",code:18,encode:O5("SHA-256")}),Gae=C5({name:"sha2-512",code:19,encode:O5("SHA-512")});var Kae=Object.freeze({__proto__:null,sha256:Zae,sha512:Gae});const L5=0,Jae="identity",z5=D5,Xae=r=>Om(L5,z5(r)),eoe={code:L5,name:Jae,encode:z5,digest:Xae};var toe=Object.freeze({__proto__:null,identity:eoe});new TextEncoder,new TextDecoder;const KA={...Hse,...Gse,...Jse,...eae,...iae,...dae,...yae,...vae,...Aae,...Tae};({...Kae,...toe});function roe(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function k5(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const JA=k5("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),hw=k5("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=roe(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),ioe={utf8:JA,"utf-8":JA,hex:KA.base16,latin1:hw,ascii:hw,binary:hw,...KA};function noe(r,e="utf8"){const t=ioe[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var soe=Object.defineProperty,aoe=(r,e,t)=>e in r?soe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,as=(r,e,t)=>aoe(r,typeof e!="symbol"?e+"":e,t);class ooe{constructor(e,t){this.core=e,this.logger=t,as(this,"keychain",new Map),as(this,"name",ose),as(this,"version",cse),as(this,"initialized",!1),as(this,"storagePrefix",ps),as(this,"init",async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}}),as(this,"has",i=>(this.isInitialized(),this.keychain.has(i))),as(this,"set",async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()}),as(this,"get",i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:n}=$e("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(n)}return s}),as(this,"del",async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()}),this.core=e,this.logger=Ot(t,this.name)}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Mm(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Nm(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var coe=Object.defineProperty,hoe=(r,e,t)=>e in r?coe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Mi=(r,e,t)=>hoe(r,typeof e!="symbol"?e+"":e,t);class loe{constructor(e,t,i){this.core=e,this.logger=t,Mi(this,"name",sse),Mi(this,"keychain"),Mi(this,"randomSessionIdentifier",xm()),Mi(this,"initialized",!1),Mi(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Mi(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Mi(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),n=xf(s);return cv(n.publicKey)}),Mi(this,"generateKeyPair",()=>{this.isInitialized();const s=one();return this.setPrivateKey(s.publicKey,s.privateKey)}),Mi(this,"signJWT",async s=>{this.isInitialized();const n=await this.getClientSeed(),c=xf(n),l=this.randomSessionIdentifier;return await fD(l,s,ase,c)}),Mi(this,"generateSharedKey",(s,n,c)=>{this.isInitialized();const l=this.getPrivateKey(s),u=cne(l,n);return this.setSymKey(u,c)}),Mi(this,"setSymKey",async(s,n)=>{this.isInitialized();const c=n||wf(s);return await this.keychain.set(c,s),c}),Mi(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Mi(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Mi(this,"encode",async(s,n,c)=>{this.isInitialized();const l=v5(c),u=fs(n);if(zA(l))return une(u,c?.encoding);if(LA(l)){const N=l.senderPublicKey,A=l.receiverPublicKey;s=await this.generateSharedKey(N,A)}const f=this.getSymKey(s),{type:g,senderPublicKey:m}=l;return hne({type:g,symKey:f,message:u,senderPublicKey:m,encoding:c?.encoding})}),Mi(this,"decode",async(s,n,c)=>{this.isInitialized();const l=dne(n,c);if(zA(l)){const u=fne(n,c?.encoding);return zs(u)}if(LA(l)){const u=l.receiverPublicKey,f=l.senderPublicKey;s=await this.generateSharedKey(u,f)}try{const u=this.getSymKey(s),f=lne({symKey:u,encoded:n,encoding:c?.encoding});return zs(f)}catch(u){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}}),Mi(this,"getPayloadType",(s,n=sa)=>{const c=bl({encoded:s,encoding:n});return eo(c.type)}),Mi(this,"getPayloadSenderPublicKey",(s,n=sa)=>{const c=bl({encoded:s,encoding:n});return c.senderPublicKey?Ct(c.senderPublicKey,zi):void 0}),this.core=e,this.logger=Ot(t,this.name),this.keychain=i||new ooe(this.core,this.logger)}get context(){return Zt(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(WA)}catch{e=xm(),await this.keychain.set(WA,e)}return noe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var uoe=Object.defineProperty,foe=Object.defineProperties,doe=Object.getOwnPropertyDescriptors,XA=Object.getOwnPropertySymbols,poe=Object.prototype.hasOwnProperty,goe=Object.prototype.propertyIsEnumerable,Lm=(r,e,t)=>e in r?uoe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,yoe=(r,e)=>{for(var t in e||(e={}))poe.call(e,t)&&Lm(r,t,e[t]);if(XA)for(var t of XA(e))goe.call(e,t)&&Lm(r,t,e[t]);return r},woe=(r,e)=>foe(r,doe(e)),an=(r,e,t)=>Lm(r,typeof e!="symbol"?e+"":e,t);class moe extends Iee{constructor(e,t){super(e,t),this.logger=e,this.core=t,an(this,"messages",new Map),an(this,"messagesWithoutClientAck",new Map),an(this,"name",hse),an(this,"version",lse),an(this,"initialized",!1),an(this,"storagePrefix",ps),an(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}}),an(this,"set",async(i,s,n)=>{this.isInitialized();const c=ls(s);let l=this.messages.get(i);if(typeof l>"u"&&(l={}),typeof l[c]<"u")return c;if(l[c]=s,this.messages.set(i,l),n===mf.inbound){const u=this.messagesWithoutClientAck.get(i)||{};this.messagesWithoutClientAck.set(i,woe(yoe({},u),{[c]:s}))}return await this.persist(),c}),an(this,"get",i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s}),an(this,"getWithoutAck",i=>{this.isInitialized();const s={};for(const n of i){const c=this.messagesWithoutClientAck.get(n)||{};s[n]=Object.values(c)}return s}),an(this,"has",(i,s)=>{this.isInitialized();const n=this.get(i),c=ls(s);return typeof n[c]<"u"}),an(this,"ack",async(i,s)=>{this.isInitialized();const n=this.messagesWithoutClientAck.get(i);if(typeof n>"u")return;const c=ls(s);delete n[c],Object.keys(n).length===0?this.messagesWithoutClientAck.delete(i):this.messagesWithoutClientAck.set(i,n),await this.persist()}),an(this,"del",async i=>{this.isInitialized(),this.messages.delete(i),this.messagesWithoutClientAck.delete(i),await this.persist()}),this.logger=Ot(e,this.name),this.core=t}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Mm(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Mm(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Nm(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Nm(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var voe=Object.defineProperty,boe=Object.defineProperties,Moe=Object.getOwnPropertyDescriptors,e_=Object.getOwnPropertySymbols,Noe=Object.prototype.hasOwnProperty,Ioe=Object.prototype.propertyIsEnumerable,zm=(r,e,t)=>e in r?voe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Qu=(r,e)=>{for(var t in e||(e={}))Noe.call(e,t)&&zm(r,t,e[t]);if(e_)for(var t of e_(e))Ioe.call(e,t)&&zm(r,t,e[t]);return r},lw=(r,e)=>boe(r,Moe(e)),Vn=(r,e,t)=>zm(r,typeof e!="symbol"?e+"":e,t);class Aoe extends Aee{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Vn(this,"events",new ii.EventEmitter),Vn(this,"name",use),Vn(this,"queue",new Map),Vn(this,"publishTimeout",ne.toMiliseconds(ne.ONE_MINUTE)),Vn(this,"initialPublishTimeout",ne.toMiliseconds(ne.ONE_SECOND*15)),Vn(this,"needsTransportRestart",!1),Vn(this,"publish",async(i,s,n)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}});const l=n?.ttl||QA,u=$f(n),f=n?.prompt||!1,g=n?.tag||0,m=n?.id||fn().toString(),N={topic:i,message:s,opts:{ttl:l,relay:u,prompt:f,tag:g,id:m,attestation:n?.attestation,tvf:n?.tvf}},A=`Failed to publish payload, please try again. id:${m} tag:${g}`;try{const _=new Promise(async E=>{const x=({id:D})=>{N.opts.id===D&&(this.removeRequestFromQueue(D),this.relayer.events.removeListener(fi.publish,x),E(N))};this.relayer.events.on(fi.publish,x);const S=na(new Promise((D,C)=>{this.rpcPublish({topic:i,message:s,ttl:l,prompt:f,tag:g,id:m,attestation:n?.attestation,tvf:n?.tvf}).then(D).catch(j=>{this.logger.warn(j,j?.message),C(j)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${m} tag:${g}`);try{await S,this.events.removeListener(fi.publish,x)}catch(D){this.queue.set(m,lw(Qu({},N),{attempt:1})),this.logger.warn(D,D?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:m,topic:i,message:s,opts:n}}),await na(_,this.publishTimeout,A)}catch(_){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(_),(c=n?.internal)!=null&&c.throwOnFailedPublish)throw _}finally{this.queue.delete(m)}}),Vn(this,"on",(i,s)=>{this.events.on(i,s)}),Vn(this,"once",(i,s)=>{this.events.once(i,s)}),Vn(this,"off",(i,s)=>{this.events.off(i,s)}),Vn(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),this.relayer=e,this.logger=Ot(t,this.name),this.registerEventListeners()}get context(){return Zt(this.logger)}async rpcPublish(e){var t,i,s,n;const{topic:c,message:l,ttl:u=QA,prompt:f,tag:g,id:m,attestation:N,tvf:A}=e,_={method:Sh($f().protocol).publish,params:Qu({topic:c,message:l,ttl:u,prompt:f,tag:g,attestation:N},A),id:m};Ai((t=_.params)==null?void 0:t.prompt)&&((i=_.params)==null||delete i.prompt),Ai((s=_.params)==null?void 0:s.tag)&&((n=_.params)==null||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_});const E=await this.relayer.request(_);return this.relayer.events.emit(fi.publish,e),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{const i=e.attempt+1;this.queue.set(t,lw(Qu({},e),{attempt:i}));const{topic:s,message:n,opts:c,attestation:l}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${i}`),await this.rpcPublish(lw(Qu({},e),{topic:s,message:n,ttl:c.ttl,prompt:c.prompt,tag:c.tag,id:c.id,attestation:l,tvf:c.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Kn.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(fi.connection_stalled);return}this.checkQueue()}),this.relayer.on(fi.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var _oe=Object.defineProperty,Eoe=(r,e,t)=>e in r?_oe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ro=(r,e,t)=>Eoe(r,typeof e!="symbol"?e+"":e,t);class Doe{constructor(){Ro(this,"map",new Map),Ro(this,"set",(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])}),Ro(this,"get",e=>this.map.get(e)||[]),Ro(this,"exists",(e,t)=>this.get(e).includes(t)),Ro(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter(n=>n!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Ro(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Soe=Object.defineProperty,xoe=Object.defineProperties,Toe=Object.getOwnPropertyDescriptors,t_=Object.getOwnPropertySymbols,joe=Object.prototype.hasOwnProperty,Coe=Object.prototype.propertyIsEnumerable,km=(r,e,t)=>e in r?Soe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,bh=(r,e)=>{for(var t in e||(e={}))joe.call(e,t)&&km(r,t,e[t]);if(t_)for(var t of t_(e))Coe.call(e,t)&&km(r,t,e[t]);return r},uw=(r,e)=>xoe(r,Toe(e)),Vt=(r,e,t)=>km(r,typeof e!="symbol"?e+"":e,t);class Ooe extends Dee{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Vt(this,"subscriptions",new Map),Vt(this,"topicMap",new Doe),Vt(this,"events",new ii.EventEmitter),Vt(this,"name",mse),Vt(this,"version",vse),Vt(this,"pending",new Map),Vt(this,"cached",[]),Vt(this,"initialized",!1),Vt(this,"storagePrefix",ps),Vt(this,"subscribeTimeout",ne.toMiliseconds(ne.ONE_MINUTE)),Vt(this,"initialSubscribeTimeout",ne.toMiliseconds(ne.ONE_SECOND*15)),Vt(this,"clientId"),Vt(this,"batchSubscribeTopicsLimit",500),Vt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Vt(this,"subscribe",async(i,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const n=$f(s),c={topic:i,relay:n,transportType:s?.transportType};this.pending.set(i,c);const l=await this.rpcSubscribe(i,n,s);return typeof l=="string"&&(this.onSubscribe(l,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),l}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}}),Vt(this,"unsubscribe",async(i,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)}),Vt(this,"isSubscribed",i=>new Promise(s=>{s(this.topicMap.topics.includes(i))})),Vt(this,"isKnownTopic",i=>new Promise(s=>{s(this.topicMap.topics.includes(i)||this.pending.has(i)||this.cached.some(n=>n.topic===i))})),Vt(this,"on",(i,s)=>{this.events.on(i,s)}),Vt(this,"once",(i,s)=>{this.events.once(i,s)}),Vt(this,"off",(i,s)=>{this.events.off(i,s)}),Vt(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),Vt(this,"start",async()=>{await this.onConnect()}),Vt(this,"stop",async()=>{await this.onDisconnect()}),Vt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Vt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const i=[];this.pending.forEach(s=>{i.push(s)}),await this.batchSubscribe(i)}),Vt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Kn.pulse,async()=>{await this.checkPending()}),this.events.on(cn.created,async i=>{const s=cn.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:i}),await this.persist()}),this.events.on(cn.deleted,async i=>{const s=cn.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:i}),await this.persist()})}),this.relayer=e,this.logger=Ot(t,this.name),this.clientId=""}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=$f(i);await this.restartToComplete({topic:e,id:t,relay:s}),await this.rpcUnsubscribe(e,t,s);const n=Yt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t,i){var s;(!i||i?.transportType===br.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const n={method:Sh(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});const c=(s=i?.internal)==null?void 0:s.throwOnFailedPublish;try{const l=await this.getSubscriptionId(e);if(i?.transportType===br.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(g=>this.logger.warn(g))},ne.toMiliseconds(ne.ONE_SECOND)),l;const u=new Promise(async g=>{const m=N=>{N.topic===e&&(this.events.removeListener(cn.created,m),g(N.id))};this.events.on(cn.created,m);try{const N=await na(new Promise((A,_)=>{this.relayer.request(n).catch(E=>{this.logger.warn(E,E?.message),_(E)}).then(A)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(cn.created,m),g(N)}catch{}}),f=await na(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!f&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return f?l:null}catch(l){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(fi.connection_stalled),c)throw l}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:Sh(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await na(new Promise(s=>{this.relayer.request(i).catch(n=>this.logger.warn(n)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(fi.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,i={method:Sh(t.protocol).batchFetchMessages,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let s;try{s=await await na(new Promise((n,c)=>{this.relayer.request(i).catch(l=>{this.logger.warn(l),c(l)}).then(n)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(fi.connection_stalled)}return s}rpcUnsubscribe(e,t,i){const s={method:Sh(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,uw(bh({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,bh({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,bh({},t)),this.topicMap.set(t.topic,e),this.events.emit(cn.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(cn.deleted,uw(bh({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(cn.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<t;i++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(cn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async t=>uw(bh({},t),{id:await this.getSubscriptionId(t.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await bre(ne.toMiliseconds(ne.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return ls(e+await this.getClientId())}}var Loe=Object.defineProperty,r_=Object.getOwnPropertySymbols,zoe=Object.prototype.hasOwnProperty,koe=Object.prototype.propertyIsEnumerable,Pm=(r,e,t)=>e in r?Loe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,i_=(r,e)=>{for(var t in e||(e={}))zoe.call(e,t)&&Pm(r,t,e[t]);if(r_)for(var t of r_(e))koe.call(e,t)&&Pm(r,t,e[t]);return r},It=(r,e,t)=>Pm(r,typeof e!="symbol"?e+"":e,t);class Poe extends _ee{constructor(e){super(e),It(this,"protocol","wc"),It(this,"version",2),It(this,"core"),It(this,"logger"),It(this,"events",new ii.EventEmitter),It(this,"provider"),It(this,"messages"),It(this,"subscriber"),It(this,"publisher"),It(this,"name",dse),It(this,"transportExplicitlyClosed",!1),It(this,"initialized",!1),It(this,"connectionAttemptInProgress",!1),It(this,"relayUrl"),It(this,"projectId"),It(this,"packageName"),It(this,"bundleId"),It(this,"hasExperiencedNetworkDisruption",!1),It(this,"pingTimeout"),It(this,"heartBeatTimeout",ne.toMiliseconds(ne.THIRTY_SECONDS+ne.FIVE_SECONDS)),It(this,"reconnectTimeout"),It(this,"connectPromise"),It(this,"reconnectInProgress",!1),It(this,"requestsInFlight",[]),It(this,"connectTimeout",ne.toMiliseconds(ne.ONE_SECOND*15)),It(this,"request",async t=>{var i,s;this.logger.debug("Publishing Request Payload");const n=t.id||fn().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:t.method,topic:(i=t.params)==null?void 0:i.topic},"relayer.request - publishing...");const c=`${n}:${((s=t.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(c);const l=await this.provider.request(t);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==c),l}catch(c){throw this.logger.debug(`Failed to Publish Request: ${n}`),c}}),It(this,"resetPingTimeout",()=>{Rf()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,i,s,n;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(n=(s=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null?void 0:s.terminate)==null||n.call(s)}catch(c){this.logger.warn(c,c?.message)}},this.heartBeatTimeout))}),It(this,"onPayloadHandler",t=>{this.onProviderPayload(t),this.resetPingTimeout()}),It(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(fi.connect)}),It(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),It(this,"onProviderErrorHandler",t=>{this.logger.fatal(`Fatal socket error: ${t.message}`),this.events.emit(fi.error,t),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),It(this,"registerProviderListeners",()=>{this.provider.on(En.payload,this.onPayloadHandler),this.provider.on(En.connect,this.onConnectHandler),this.provider.on(En.disconnect,this.onDisconnectHandler),this.provider.on(En.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ot(e.logger,this.name):da(ks({level:e.logger||fse})),this.messages=new moe(this.logger,e.core),this.subscriber=new Ooe(this,this.logger),this.publisher=new Aoe(this,this.logger),this.relayUrl=e?.relayUrl||_5,this.projectId=e.projectId,sre()?this.packageName=oA():are()&&(this.bundleId=oA()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return Zt(this.logger)}get connected(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===1||!1}get connecting(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:br.relay},mf.outbound)}async subscribe(e,t){var i,s,n;this.isInitialized(),(!(t!=null&&t.transportType)||t?.transportType==="relay")&&await this.toEstablishConnection();const c=typeof((i=t?.internal)==null?void 0:i.throwOnFailedPublish)>"u"?!0:(s=t?.internal)==null?void 0:s.throwOnFailedPublish;let l=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"",u;const f=g=>{g.topic===e&&(this.subscriber.off(cn.created,f),u())};return await Promise.all([new Promise(g=>{u=g,this.subscriber.on(cn.created,f)}),new Promise(async(g,m)=>{l=await this.subscriber.subscribe(e,i_({internal:{throwOnFailedPublish:c}},t)).catch(N=>{c&&m(N)})||l,g()})]),l}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await na(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,i)=>{await this.connect(e).then(t).catch(i).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await YA())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((i,s)=>i.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${t.length} message events sorted`);for(const i of t)try{await this.onMessageEvent(i)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:i}=e;if(!t.sessionExists){const s=Xr(ne.FIVE_MINUTES),n={topic:i,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,n)}this.events.emit(fi.message,e),await this.recordMessageEvent(e,mf.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(i,s)=>{const n=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(En.disconnect,n),await na(new Promise((c,l)=>{this.provider.connect().then(c).catch(l)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(c=>{s(c)}).finally(()=>{this.provider.off(En.disconnect,n),clearTimeout(this.reconnectTimeout)}),await new Promise(async(c,l)=>{const u=()=>{l(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(En.disconnect,u),await this.subscriber.start().then(c).catch(l).finally(()=>{this.provider.off(En.disconnect,u)})}),this.hasExperiencedNetworkDisruption=!1,i()})}catch(i){await this.subscriber.stop();const s=i;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(i=>setTimeout(i,ne.toMiliseconds(t*1))),t++}}startPingTimeout(){var e,t,i,s,n;if(Rf())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((n=(s=(i=this.provider)==null?void 0:i.connection)==null?void 0:s.socket)==null||n.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c,c?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new _r(new Ex(lre({sdkVersion:jm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:i,message:s}=e;await this.messages.set(i,s,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const s=this.messages.has(t,i);return s&&this.logger.warn(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Wc(e)){if(!e.method.endsWith(pse))return;const t=e.params,{topic:i,message:s,publishedAt:n,attestation:c}=t.data,l={topic:i,message:s,publishedAt:n,transportType:br.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(i_({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else no(e)&&this.events.emit(fi.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,mf.inbound),this.events.emit(fi.message,e))}async acknowledgePayload(e){const t=wa(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(En.payload,this.onPayloadHandler),this.provider.off(En.connect,this.onConnectHandler),this.provider.off(En.disconnect,this.onDisconnectHandler),this.provider.off(En.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await YA();ese(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(i=>this.logger.error(i,i?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(fi.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ne.toMiliseconds(gse)))))}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function Roe(){}function n_(r){if(!r||typeof r!="object")return!1;const e=Object.getPrototypeOf(r);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(r)==="[object Object]":!1}function s_(r){return Object.getOwnPropertySymbols(r).filter(e=>Object.prototype.propertyIsEnumerable.call(r,e))}function a_(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}const Uoe="[object RegExp]",$oe="[object String]",Boe="[object Number]",qoe="[object Boolean]",o_="[object Arguments]",Yoe="[object Symbol]",Woe="[object Date]",Qoe="[object Map]",Voe="[object Set]",Foe="[object Array]",Hoe="[object Function]",Zoe="[object ArrayBuffer]",fw="[object Object]",Goe="[object Error]",Koe="[object DataView]",Joe="[object Uint8Array]",Xoe="[object Uint8ClampedArray]",ece="[object Uint16Array]",tce="[object Uint32Array]",rce="[object BigUint64Array]",ice="[object Int8Array]",nce="[object Int16Array]",sce="[object Int32Array]",ace="[object BigInt64Array]",oce="[object Float32Array]",cce="[object Float64Array]";function hce(r,e){return r===e||Number.isNaN(r)&&Number.isNaN(e)}function lce(r,e,t){return Th(r,e,void 0,void 0,void 0,void 0,t)}function Th(r,e,t,i,s,n,c){const l=c(r,e,t,i,s,n);if(l!==void 0)return l;if(typeof r==typeof e)switch(typeof r){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return r===e;case"number":return r===e||Object.is(r,e);case"function":return r===e;case"object":return $h(r,e,n,c)}return $h(r,e,n,c)}function $h(r,e,t,i){if(Object.is(r,e))return!0;let s=a_(r),n=a_(e);if(s===o_&&(s=fw),n===o_&&(n=fw),s!==n)return!1;switch(s){case $oe:return r.toString()===e.toString();case Boe:{const u=r.valueOf(),f=e.valueOf();return hce(u,f)}case qoe:case Woe:case Yoe:return Object.is(r.valueOf(),e.valueOf());case Uoe:return r.source===e.source&&r.flags===e.flags;case Hoe:return r===e}t=t??new Map;const c=t.get(r),l=t.get(e);if(c!=null&&l!=null)return c===e;t.set(r,e),t.set(e,r);try{switch(s){case Qoe:{if(r.size!==e.size)return!1;for(const[u,f]of r.entries())if(!e.has(u)||!Th(f,e.get(u),u,r,e,t,i))return!1;return!0}case Voe:{if(r.size!==e.size)return!1;const u=Array.from(r.values()),f=Array.from(e.values());for(let g=0;g<u.length;g++){const m=u[g],N=f.findIndex(A=>Th(m,A,void 0,r,e,t,i));if(N===-1)return!1;f.splice(N,1)}return!0}case Foe:case Joe:case Xoe:case ece:case tce:case rce:case ice:case nce:case sce:case ace:case oce:case cce:{if(typeof We<"u"&&We.isBuffer(r)!==We.isBuffer(e)||r.length!==e.length)return!1;for(let u=0;u<r.length;u++)if(!Th(r[u],e[u],u,r,e,t,i))return!1;return!0}case Zoe:return r.byteLength!==e.byteLength?!1:$h(new Uint8Array(r),new Uint8Array(e),t,i);case Koe:return r.byteLength!==e.byteLength||r.byteOffset!==e.byteOffset?!1:$h(new Uint8Array(r),new Uint8Array(e),t,i);case Goe:return r.name===e.name&&r.message===e.message;case fw:{if(!($h(r.constructor,e.constructor,t,i)||n_(r)&&n_(e)))return!1;const u=[...Object.keys(r),...s_(r)],f=[...Object.keys(e),...s_(e)];if(u.length!==f.length)return!1;for(let g=0;g<u.length;g++){const m=u[g],N=r[m];if(!Object.hasOwn(e,m))return!1;const A=e[m];if(!Th(N,A,m,r,e,t,i))return!1}return!0}default:return!1}}finally{t.delete(r),t.delete(e)}}function uce(r,e){return lce(r,e,Roe)}var fce=Object.defineProperty,c_=Object.getOwnPropertySymbols,dce=Object.prototype.hasOwnProperty,pce=Object.prototype.propertyIsEnumerable,Rm=(r,e,t)=>e in r?fce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,h_=(r,e)=>{for(var t in e||(e={}))dce.call(e,t)&&Rm(r,t,e[t]);if(c_)for(var t of c_(e))pce.call(e,t)&&Rm(r,t,e[t]);return r},Vi=(r,e,t)=>Rm(r,typeof e!="symbol"?e+"":e,t);class uo extends Eee{constructor(e,t,i,s=ps,n=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,Vi(this,"map",new Map),Vi(this,"version",yse),Vi(this,"cached",[]),Vi(this,"initialized",!1),Vi(this,"getKey"),Vi(this,"storagePrefix",ps),Vi(this,"recentlyDeleted",[]),Vi(this,"recentlyDeletedLimit",200),Vi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Ai(c)?this.map.set(this.getKey(c),c):jne(c)?this.map.set(c.id,c):Cne(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)}),Vi(this,"set",async(c,l)=>{this.isInitialized(),this.map.has(c)?await this.update(c,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:l}),this.map.set(c,l),await this.persist())}),Vi(this,"get",c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c))),Vi(this,"getAll",c=>(this.isInitialized(),c?this.values.filter(l=>Object.keys(c).every(u=>uce(l[u],c[u]))):this.values)),Vi(this,"update",async(c,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:l});const u=h_(h_({},this.getData(c)),l);this.map.set(c,u),await this.persist()}),Vi(this,"delete",async(c,l)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:l}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())}),this.logger=Ot(t,this.name),this.storagePrefix=s,this.getKey=n}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=$e("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:i}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var gce=Object.defineProperty,yce=(r,e,t)=>e in r?gce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pt=(r,e,t)=>yce(r,typeof e!="symbol"?e+"":e,t);class wce{constructor(e,t){this.core=e,this.logger=t,pt(this,"name",bse),pt(this,"version",Mse),pt(this,"events",new jc),pt(this,"pairings"),pt(this,"initialized",!1),pt(this,"storagePrefix",ps),pt(this,"ignoredPayloadTypes",[Ls]),pt(this,"registeredMethods",[]),pt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),pt(this,"register",({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]}),pt(this,"create",async i=>{this.isInitialized();const s=xm(),n=await this.core.crypto.setSymKey(s),c=Xr(ne.FIVE_MINUTES),l={protocol:A5},u={topic:n,expiry:c,relay:l,active:!1,methods:i?.methods},f=PA({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:s,relay:l,expiryTimestamp:c,methods:i?.methods});return this.events.emit(ka.create,u),this.core.expirer.set(n,c),await this.pairings.set(n,u),await this.core.relayer.subscribe(n,{transportType:i?.transportType}),{topic:n,uri:f}}),pt(this,"pair",async i=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:i?.uri,trace:[hs.pairing_started]}});this.isValidPair(i,s);const{topic:n,symKey:c,relay:l,expiryTimestamp:u,methods:f}=kA(i.uri);s.props.properties.topic=n,s.addTrace(hs.pairing_uri_validation_success),s.addTrace(hs.pairing_uri_not_expired);let g;if(this.pairings.keys.includes(n)){if(g=this.pairings.get(n),s.addTrace(hs.existing_pairing),g.active)throw s.setError(Ts.active_pairing_already_exists),new Error(`Pairing already exists: ${n}. Please try again with a new connection URI.`);s.addTrace(hs.pairing_not_expired)}const m=u||Xr(ne.FIVE_MINUTES),N={topic:n,relay:l,expiry:m,active:!1,methods:f};this.core.expirer.set(n,m),await this.pairings.set(n,N),s.addTrace(hs.store_new_pairing),i.activatePairing&&await this.activate({topic:n}),this.events.emit(ka.create,N),s.addTrace(hs.emit_inactive_pairing),this.core.crypto.keychain.has(n)||await this.core.crypto.setSymKey(c,n),s.addTrace(hs.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Ts.no_internet_connection)}try{await this.core.relayer.subscribe(n,{relay:l})}catch(A){throw s.setError(Ts.subscribe_pairing_topic_failure),A}return s.addTrace(hs.subscribe_pairing_topic_success),N}),pt(this,"activate",async({topic:i})=>{this.isInitialized();const s=Xr(ne.FIVE_MINUTES);this.core.expirer.set(i,s),await this.pairings.update(i,{active:!0,expiry:s})}),pt(this,"ping",async i=>{this.isInitialized(),await this.isValidPing(i),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=i;if(this.pairings.keys.includes(s)){const n=await this.sendRequest(s,"wc_pairingPing",{}),{done:c,resolve:l,reject:u}=Oa();this.events.once(jt("pairing_ping",n),({error:f})=>{f?u(f):l()}),await c()}}),pt(this,"updateExpiry",async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})}),pt(this,"updateMetadata",async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})}),pt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),pt(this,"disconnect",async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Yt("USER_DISCONNECTED")),await this.deletePairing(s))}),pt(this,"formatUriFromPairing",i=>{this.isInitialized();const{topic:s,relay:n,expiry:c,methods:l}=i,u=this.core.crypto.keychain.get(s);return PA({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:u,relay:n,expiryTimestamp:c,methods:l})}),pt(this,"sendRequest",async(i,s,n)=>{const c=$i(s,n),l=await this.core.crypto.encode(i,c),u=mh[s].req;return this.core.history.set(i,c),this.core.relayer.publish(i,l,u),c.id}),pt(this,"sendResult",async(i,s,n)=>{const c=wa(i,n),l=await this.core.crypto.encode(s,c),u=(await this.core.history.get(s,i)).request.method,f=mh[u].res;await this.core.relayer.publish(s,l,f),await this.core.history.resolve(c)}),pt(this,"sendError",async(i,s,n)=>{const c=Yc(i,n),l=await this.core.crypto.encode(s,c),u=(await this.core.history.get(s,i)).request.method,f=mh[u]?mh[u].res:mh.unregistered_method.res;await this.core.relayer.publish(s,l,f),await this.core.history.resolve(c)}),pt(this,"deletePairing",async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Yt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])}),pt(this,"cleanup",async()=>{const i=this.pairings.getAll().filter(s=>Xs(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))}),pt(this,"onRelayEventRequest",async i=>{const{topic:s,payload:n}=i;switch(n.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,n);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,n);default:return await this.onUnknownRpcMethodRequest(s,n)}}),pt(this,"onRelayEventResponse",async i=>{const{topic:s,payload:n}=i,c=(await this.core.history.get(s,n.id)).request.method;return c==="wc_pairingPing"?this.onPairingPingResponse(s,n):this.onUnknownRpcMethodResponse(c)}),pt(this,"onPairingPingRequest",async(i,s)=>{const{id:n}=s;try{this.isValidPing({topic:i}),await this.sendResult(n,i,!0),this.events.emit(ka.ping,{id:n,topic:i})}catch(c){await this.sendError(n,i,c),this.logger.error(c)}}),pt(this,"onPairingPingResponse",(i,s)=>{const{id:n}=s;setTimeout(()=>{ri(s)?this.events.emit(jt("pairing_ping",n),{}):zr(s)&&this.events.emit(jt("pairing_ping",n),{error:s.error})},500)}),pt(this,"onPairingDeleteRequest",async(i,s)=>{const{id:n}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(ka.delete,{id:n,topic:i})}catch(c){await this.sendError(n,i,c),this.logger.error(c)}}),pt(this,"onUnknownRpcMethodRequest",async(i,s)=>{const{id:n,method:c}=s;try{if(this.registeredMethods.includes(c))return;const l=Yt("WC_METHOD_UNSUPPORTED",c);await this.sendError(n,i,l),this.logger.error(l)}catch(l){await this.sendError(n,i,l),this.logger.error(l)}}),pt(this,"onUnknownRpcMethodResponse",i=>{this.registeredMethods.includes(i)||this.logger.error(Yt("WC_METHOD_UNSUPPORTED",i))}),pt(this,"isValidPair",(i,s)=>{var n;if(!Gi(i)){const{message:l}=$e("MISSING_OR_INVALID",`pair() params: ${i}`);throw s.setError(Ts.malformed_pairing_uri),new Error(l)}if(!Tne(i.uri)){const{message:l}=$e("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw s.setError(Ts.malformed_pairing_uri),new Error(l)}const c=kA(i?.uri);if(!((n=c?.relay)!=null&&n.protocol)){const{message:l}=$e("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Ts.malformed_pairing_uri),new Error(l)}if(!(c!=null&&c.symKey)){const{message:l}=$e("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Ts.malformed_pairing_uri),new Error(l)}if(c!=null&&c.expiryTimestamp&&ne.toMiliseconds(c?.expiryTimestamp)<Date.now()){s.setError(Ts.pairing_expired);const{message:l}=$e("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}}),pt(this,"isValidPing",async i=>{if(!Gi(i)){const{message:n}=$e("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)}),pt(this,"isValidDisconnect",async i=>{if(!Gi(i)){const{message:n}=$e("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)}),pt(this,"isValidPairingTopic",async i=>{if(!Wr(i,!1)){const{message:s}=$e("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=$e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(Xs(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=$e("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}}),this.core=e,this.logger=Ot(t,this.name),this.pairings=new uo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Zt(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(fi.message,async e=>{const{topic:t,message:i,transportType:s}=e;if(this.pairings.keys.includes(t)&&s!==br.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))try{const n=await this.core.crypto.decode(t,i);Wc(n)?(this.core.history.set(t,n),await this.onRelayEventRequest({topic:t,payload:n})):no(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.core.history.delete(t,n.id)),await this.core.relayer.messages.ack(t,i)}catch(n){this.logger.error(n)}})}registerExpirerEvents(){this.core.expirer.on(Tn.expired,async e=>{const{topic:t}=ZT(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(ka.expire,{topic:t}))})}}var mce=Object.defineProperty,vce=(r,e,t)=>e in r?mce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ni=(r,e,t)=>vce(r,typeof e!="symbol"?e+"":e,t);class bce extends Nee{constructor(e,t){super(e,t),this.core=e,this.logger=t,Ni(this,"records",new Map),Ni(this,"events",new ii.EventEmitter),Ni(this,"name",Nse),Ni(this,"version",Ise),Ni(this,"cached",[]),Ni(this,"initialized",!1),Ni(this,"storagePrefix",ps),Ni(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ni(this,"set",(i,s,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:n}),this.records.has(s.id))return;const c={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:n,expiry:Xr(ne.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(Wn.created,c)}),Ni(this,"resolve",async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=zr(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.persist(),this.events.emit(Wn.updated,s))}),Ni(this,"get",async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s))),Ni(this,"delete",(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(n=>{if(n.topic===i){if(typeof s<"u"&&n.id!==s)return;this.records.delete(n.id),this.events.emit(Wn.deleted,n)}}),this.persist()}),Ni(this,"exists",async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1)),Ni(this,"on",(i,s)=>{this.events.on(i,s)}),Ni(this,"once",(i,s)=>{this.events.once(i,s)}),Ni(this,"off",(i,s)=>{this.events.off(i,s)}),Ni(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),this.logger=Ot(t,this.name)}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:$i(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Wn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Wn.created,e=>{const t=Wn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Wn.updated,e=>{const t=Wn.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Wn.deleted,e=>{const t=Wn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(Kn.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{ne.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Wn.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Mce=Object.defineProperty,Nce=(r,e,t)=>e in r?Mce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ci=(r,e,t)=>Nce(r,typeof e!="symbol"?e+"":e,t);class Ice extends See{constructor(e,t){super(e,t),this.core=e,this.logger=t,Ci(this,"expirations",new Map),Ci(this,"events",new ii.EventEmitter),Ci(this,"name",Ase),Ci(this,"version",_se),Ci(this,"cached",[]),Ci(this,"initialized",!1),Ci(this,"storagePrefix",ps),Ci(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ci(this,"has",i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Ci(this,"set",(i,s)=>{this.isInitialized();const n=this.formatTarget(i),c={target:n,expiry:s};this.expirations.set(n,c),this.checkExpiry(n,c),this.events.emit(Tn.created,{target:n,expiration:c})}),Ci(this,"get",i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)}),Ci(this,"del",i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),n=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Tn.deleted,{target:s,expiration:n})}}),Ci(this,"on",(i,s)=>{this.events.on(i,s)}),Ci(this,"once",(i,s)=>{this.events.once(i,s)}),Ci(this,"off",(i,s)=>{this.events.off(i,s)}),Ci(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),this.logger=Ot(t,this.name)}get context(){return Zt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ure(e);if(typeof e=="number")return fre(e);const{message:t}=$e("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Tn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=$e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=$e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;ne.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Tn.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Kn.pulse,()=>this.checkExpirations()),this.events.on(Tn.created,e=>{const t=Tn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Tn.expired,e=>{const t=Tn.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Tn.deleted,e=>{const t=Tn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ace=Object.defineProperty,_ce=(r,e,t)=>e in r?Ace(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Yr=(r,e,t)=>_ce(r,typeof e!="symbol"?e+"":e,t);class Ece extends xee{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,Yr(this,"name",Ese),Yr(this,"abortController"),Yr(this,"isDevEnv"),Yr(this,"verifyUrlV3",Sse),Yr(this,"storagePrefix",ps),Yr(this,"version",I5),Yr(this,"publicKey"),Yr(this,"fetchPromise"),Yr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ne.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Yr(this,"register",async s=>{if(!Yl()||this.isDevEnv)return;const n=window.location.origin,{id:c,decryptedId:l}=s,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${n}&id=${c}&decryptedId=${l}`;try{const f=Ji.getDocument(),g=this.startAbortTimer(ne.ONE_SECOND*5),m=await new Promise((N,A)=>{const _=()=>{window.removeEventListener("message",x),f.body.removeChild(E),A("attestation aborted")};this.abortController.signal.addEventListener("abort",_);const E=f.createElement("iframe");E.src=u,E.style.display="none",E.addEventListener("error",_,{signal:this.abortController.signal});const x=S=>{if(S.data&&typeof S.data=="string")try{const D=JSON.parse(S.data);if(D.type==="verify_attestation"){if(gc(D.attestation).payload.id!==c)return;clearInterval(g),f.body.removeChild(E),this.abortController.signal.removeEventListener("abort",_),window.removeEventListener("message",x),N(D.attestation===null?"":D.attestation)}}catch(D){this.logger.warn(D)}};f.body.appendChild(E),window.addEventListener("message",x,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",m),m}catch(f){this.logger.warn(f)}return""}),Yr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:n,hash:c,encryptedId:l}=s;if(n===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(n){if(gc(n).payload.id!==l)return;const f=await this.isValidJwtAttestation(n);if(f){if(!f.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return f}}if(!c)return;const u=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(c,u)}),Yr(this,"fetchAttestation",async(s,n)=>{this.logger.debug(`resolving attestation: ${s} from url: ${n}`);const c=this.startAbortTimer(ne.ONE_SECOND*5),l=await fetch(`${n}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?await l.json():void 0}),Yr(this,"getVerifyUrl",s=>{let n=s||Uh;return xse.includes(n)||(this.logger.info(`verify url: ${n}, not included in trusted list, assigning default: ${Uh}`),n=Uh),n}),Yr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ne.FIVE_SECONDS),n=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await n.json()}catch(s){this.logger.warn(s)}}),Yr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Yr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Yr(this,"isValidJwtAttestation",async s=>{const n=await this.getPublicKey();try{if(n)return this.validateAttestation(s,n)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(s,c)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}}),Yr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Yr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async n=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),n(c))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Yr(this,"validateAttestation",(s,n)=>{const c=wne(s,n.publicKey),l={hasExpired:ne.toMiliseconds(c.exp)<Date.now(),payload:c};if(l.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:l.payload.origin,isScam:l.payload.isScam,isVerified:l.payload.isVerified}}),this.logger=Ot(t,this.name),this.abortController=new AbortController,this.isDevEnv=Fv(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Zt(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ne.toMiliseconds(e))}}var Dce=Object.defineProperty,Sce=(r,e,t)=>e in r?Dce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,l_=(r,e,t)=>Sce(r,typeof e!="symbol"?e+"":e,t);class xce extends Tee{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,l_(this,"context",Tse),l_(this,"registerDeviceToken",async i=>{const{clientId:s,token:n,notificationType:c,enableEncrypted:l=!1}=i,u=`${jse}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:c,token:n,always_raw:l})})}),this.logger=Ot(t,this.context)}}var Tce=Object.defineProperty,u_=Object.getOwnPropertySymbols,jce=Object.prototype.hasOwnProperty,Cce=Object.prototype.propertyIsEnumerable,Um=(r,e,t)=>e in r?Tce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Mh=(r,e)=>{for(var t in e||(e={}))jce.call(e,t)&&Um(r,t,e[t]);if(u_)for(var t of u_(e))Cce.call(e,t)&&Um(r,t,e[t]);return r},oi=(r,e,t)=>Um(r,typeof e!="symbol"?e+"":e,t);class Oce extends jee{constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,oi(this,"context",Ose),oi(this,"storagePrefix",ps),oi(this,"storageVersion",Cse),oi(this,"events",new Map),oi(this,"shouldPersist",!1),oi(this,"init",async()=>{if(!Fv())try{const s={eventId:hA(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:FT(this.core.relayer.protocol,this.core.relayer.version,jm)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),oi(this,"createEvent",s=>{const{event:n="ERROR",type:c="",properties:{topic:l,trace:u}}=s,f=hA(),g=this.core.projectId||"",m=Date.now(),N=Mh({eventId:f,timestamp:m,props:{event:n,type:c,properties:{topic:l,trace:u}},bundleId:g,domain:this.getAppDomain()},this.setMethods(f));return this.telemetryEnabled&&(this.events.set(f,N),this.shouldPersist=!0),N}),oi(this,"getEvent",s=>{const{eventId:n,topic:c}=s;if(n)return this.events.get(n);const l=Array.from(this.events.values()).find(u=>u.props.properties.topic===c);if(l)return Mh(Mh({},l),this.setMethods(l.eventId))}),oi(this,"deleteEvent",s=>{const{eventId:n}=s;this.events.delete(n),this.shouldPersist=!0}),oi(this,"setEventListeners",()=>{this.core.heartbeat.on(Kn.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ne.fromMiliseconds(Date.now())-ne.fromMiliseconds(s.timestamp)>Lse&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),oi(this,"setMethods",s=>({addTrace:n=>this.addTrace(s,n),setError:n=>this.setError(s,n)})),oi(this,"addTrace",(s,n)=>{const c=this.events.get(s);c&&(c.props.properties.trace.push(n),this.events.set(s,c),this.shouldPersist=!0)}),oi(this,"setError",(s,n)=>{const c=this.events.get(s);c&&(c.props.type=n,c.timestamp=Date.now(),this.events.set(s,c),this.shouldPersist=!0)}),oi(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),oi(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(n=>{this.events.set(n.eventId,Mh(Mh({},n),this.setMethods(n.eventId)))})}catch(s){this.logger.warn(s)}}),oi(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[n,c]of this.events)c.props.type&&s.push(c);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const n of s)this.events.delete(n.eventId),this.shouldPersist=!0}catch(n){this.logger.warn(n)}}),oi(this,"sendEvent",async s=>{const n=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${zse}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${jm}${n}`,{method:"POST",body:JSON.stringify(s)})}),oi(this,"getAppDomain",()=>VT().url),this.logger=Ot(t,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Lce=Object.defineProperty,f_=Object.getOwnPropertySymbols,zce=Object.prototype.hasOwnProperty,kce=Object.prototype.propertyIsEnumerable,$m=(r,e,t)=>e in r?Lce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,d_=(r,e)=>{for(var t in e||(e={}))zce.call(e,t)&&$m(r,t,e[t]);if(f_)for(var t of f_(e))kce.call(e,t)&&$m(r,t,e[t]);return r},Jt=(r,e,t)=>$m(r,typeof e!="symbol"?e+"":e,t);let Pce=class P5 extends mee{constructor(e){var t;super(e),Jt(this,"protocol",N5),Jt(this,"version",I5),Jt(this,"name",Tm),Jt(this,"relayUrl"),Jt(this,"projectId"),Jt(this,"customStoragePrefix"),Jt(this,"events",new ii.EventEmitter),Jt(this,"logger"),Jt(this,"heartbeat"),Jt(this,"relayer"),Jt(this,"crypto"),Jt(this,"storage"),Jt(this,"history"),Jt(this,"expirer"),Jt(this,"pairing"),Jt(this,"verify"),Jt(this,"echoClient"),Jt(this,"linkModeSupportedApps"),Jt(this,"eventClient"),Jt(this,"initialized",!1),Jt(this,"logChunkController"),Jt(this,"on",(c,l)=>this.events.on(c,l)),Jt(this,"once",(c,l)=>this.events.once(c,l)),Jt(this,"off",(c,l)=>this.events.off(c,l)),Jt(this,"removeListener",(c,l)=>this.events.removeListener(c,l)),Jt(this,"dispatchEnvelope",({topic:c,message:l,sessionExists:u})=>{if(!c||!l)return;const f={topic:c,message:l,publishedAt:Date.now(),transportType:br.link_mode};this.relayer.onLinkMessageEvent(f,{sessionExists:u})}),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||_5,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=ks({level:typeof e?.logger=="string"&&e.logger?e.logger:ise.logger,name:Tm}),{logger:s,chunkLoggerController:n}=ev({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=n,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var c,l;(c=this.logChunkController)!=null&&c.downloadLogsBlobInBrowser&&((l=this.logChunkController)==null||l.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ot(s,this.name),this.heartbeat=new OE,this.crypto=new loe(this,this.logger,e?.keychain),this.history=new bce(this,this.logger),this.expirer=new Ice(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new kE(d_(d_({},nse),e?.storageOptions)),this.relayer=new Poe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new wce(this,this.logger),this.verify=new Ece(this,this.logger,this.storage),this.echoClient=new xce(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Oce(this,this.logger,e?.telemetryEnabled)}static async init(e){const t=new P5(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(wse,i),t}get context(){return Zt(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(VA,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(VA)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const Rce=Pce,R5="wc",U5=2,$5="client",r1=`${R5}@${U5}:${$5}:`,dw={name:$5,logger:"error"},p_="WALLETCONNECT_DEEPLINK_CHOICE",Uce="proposal",g_="Proposal expired",$ce="session",Uo=ne.SEVEN_DAYS,Bce="engine",ci={wc_sessionPropose:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ne.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ne.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ne.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ne.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ne.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ne.FIVE_MINUTES,prompt:!1,tag:1119}}},pw={min:ne.FIVE_MINUTES,max:ne.SEVEN_DAYS},os={idle:"IDLE",active:"ACTIVE"},y_={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},qce="request",Yce=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Wce="wc",Qce="auth",Vce="authKeys",Fce="pairingTopics",Hce="requests",_d=`${Wce}@${1.5}:${Qce}:`,vf=`${_d}:PUB_KEY`;var Zce=Object.defineProperty,Gce=Object.defineProperties,Kce=Object.getOwnPropertyDescriptors,w_=Object.getOwnPropertySymbols,Jce=Object.prototype.hasOwnProperty,Xce=Object.prototype.propertyIsEnumerable,Bm=(r,e,t)=>e in r?Zce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ft=(r,e)=>{for(var t in e||(e={}))Jce.call(e,t)&&Bm(r,t,e[t]);if(w_)for(var t of w_(e))Xce.call(e,t)&&Bm(r,t,e[t]);return r},Pi=(r,e)=>Gce(r,Kce(e)),ke=(r,e,t)=>Bm(r,typeof e!="symbol"?e+"":e,t);class ehe extends zee{constructor(e){super(e),ke(this,"name",Bce),ke(this,"events",new jc),ke(this,"initialized",!1),ke(this,"requestQueue",{state:os.idle,queue:[]}),ke(this,"sessionRequestQueue",{state:os.idle,queue:[]}),ke(this,"requestQueueDelay",ne.ONE_SECOND),ke(this,"expectedPairingMethodMap",new Map),ke(this,"recentlyDeletedMap",new Map),ke(this,"recentlyDeletedLimit",200),ke(this,"relayMessageCache",[]),ke(this,"pendingSessions",new Map),ke(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ci)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay)))}),ke(this,"connect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=Pi(Ft({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:n,optionalNamespaces:c,sessionProperties:l,scopedProperties:u,relays:f}=i;let g=s,m,N=!1;try{if(g){const P=this.client.core.pairing.pairings.get(g);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),N=P.active}}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${g}) failed`),P}if(!g||!N){const{topic:P,uri:Q}=await this.client.core.pairing.create();g=P,m=Q}if(!g){const{message:P}=$e("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(P)}const A=await this.client.core.crypto.generateKeyPair(),_=ci.wc_sessionPropose.req.ttl||ne.FIVE_MINUTES,E=Xr(_),x=Pi(Ft(Ft({requiredNamespaces:n,optionalNamespaces:c,relays:f??[{protocol:A5}],proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:g},l&&{sessionProperties:l}),u&&{scopedProperties:u}),{id:li()}),S=jt("session_connect",x.id),{reject:D,resolve:C,done:j}=Oa(_,g_),k=({id:P})=>{P===x.id&&(this.client.events.off("proposal_expire",k),this.pendingSessions.delete(x.id),this.events.emit(S,{error:{message:g_,code:0}}))};return this.client.events.on("proposal_expire",k),this.events.once(S,({error:P,session:Q})=>{this.client.events.off("proposal_expire",k),P?D(P):Q&&C(Q)}),await this.sendRequest({topic:g,method:"wc_sessionPropose",params:x,throwOnFailedPublish:!0,clientRpcId:x.id}),await this.setProposal(x.id,x),{uri:m,approval:j}}),ke(this,"pair",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(i){throw this.client.logger.error("pair() failed"),i}}),ke(this,"approve",async t=>{var i,s,n;const c=this.client.core.eventClient.createEvent({properties:{topic:(i=t?.id)==null?void 0:i.toString(),trace:[Qn.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch($){throw c.setError(Sa.no_internet_connection),$}try{await this.isValidProposalId(t?.id)}catch($){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),c.setError(Sa.proposal_not_found),$}try{await this.isValidApprove(t)}catch($){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(Sa.session_approve_namespace_validation_failure),$}const{id:l,relayProtocol:u,namespaces:f,sessionProperties:g,scopedProperties:m,sessionConfig:N}=t,A=this.client.proposal.get(l);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:_,proposer:E,requiredNamespaces:x,optionalNamespaces:S}=A;let D=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:_});D||(D=(n=this.client.core.eventClient)==null?void 0:n.createEvent({type:Qn.session_approve_started,properties:{topic:_,trace:[Qn.session_approve_started,Qn.session_namespaces_validation_success]}}));const C=await this.client.core.crypto.generateKeyPair(),j=E.publicKey,k=await this.client.core.crypto.generateSharedKey(C,j),P=Ft(Ft(Ft({relay:{protocol:u??"irn"},namespaces:f,controller:{publicKey:C,metadata:this.client.metadata},expiry:Xr(Uo)},g&&{sessionProperties:g}),m&&{scopedProperties:m}),N&&{sessionConfig:N}),Q=br.relay;D.addTrace(Qn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(k,{transportType:Q})}catch($){throw D.setError(Sa.subscribe_session_topic_failure),$}D.addTrace(Qn.subscribe_session_topic_success);const F=Pi(Ft({},P),{topic:k,requiredNamespaces:x,optionalNamespaces:S,pairingTopic:_,acknowledged:!1,self:P.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:C,transportType:br.relay});await this.client.session.set(k,F),D.addTrace(Qn.store_session);try{D.addTrace(Qn.publishing_session_settle),await this.sendRequest({topic:k,method:"wc_sessionSettle",params:P,throwOnFailedPublish:!0}).catch($=>{throw D?.setError(Sa.session_settle_publish_failure),$}),D.addTrace(Qn.session_settle_publish_success),D.addTrace(Qn.publishing_session_approve),await this.sendResult({id:l,topic:_,result:{relay:{protocol:u??"irn"},responderPublicKey:C},throwOnFailedPublish:!0}).catch($=>{throw D?.setError(Sa.session_approve_publish_failure),$}),D.addTrace(Qn.session_approve_publish_success)}catch($){throw this.client.logger.error($),this.client.session.delete(k,Yt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(k),$}return this.client.core.eventClient.deleteEvent({eventId:D.eventId}),await this.client.core.pairing.updateMetadata({topic:_,metadata:E.metadata}),await this.client.proposal.delete(l,Yt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:_}),await this.setExpiry(k,Xr(Uo)),{topic:k,acknowledged:()=>Promise.resolve(this.client.session.get(k))}}),ke(this,"reject",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:i,reason:s}=t;let n;try{n=this.client.proposal.get(i).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),c}n&&(await this.sendError({id:i,topic:n,error:s,rpcOpts:ci.wc_sessionPropose.reject}),await this.client.proposal.delete(i,Yt("USER_DISCONNECTED")))}),ke(this,"update",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(m){throw this.client.logger.error("update() -> isValidUpdate() failed"),m}const{topic:i,namespaces:s}=t,{done:n,resolve:c,reject:l}=Oa(),u=li(),f=fn().toString(),g=this.client.session.get(i).namespaces;return this.events.once(jt("session_update",u),({error:m})=>{m?l(m):c()}),await this.client.session.update(i,{namespaces:s}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:f}).catch(m=>{this.client.logger.error(m),this.client.session.update(i,{namespaces:g}),l(m)}),{acknowledged:n}}),ke(this,"extend",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:i}=t,s=li(),{done:n,resolve:c,reject:l}=Oa();return this.events.once(jt("session_extend",s),({error:u})=>{u?l(u):c()}),await this.setExpiry(i,Xr(Uo)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(u=>{l(u)}),{acknowledged:n}}),ke(this,"request",async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(S){throw this.client.logger.error("request() -> isValidRequest() failed"),S}const{chainId:i,request:s,topic:n,expiry:c=ci.wc_sessionRequest.req.ttl}=t,l=this.client.session.get(n);l?.transportType===br.relay&&await this.confirmOnlineStateOrThrow();const u=li(),f=fn().toString(),{done:g,resolve:m,reject:N}=Oa(c,"Request expired. Please try again.");this.events.once(jt("session_request",u),({error:S,result:D})=>{S?N(S):m(D)});const A="wc_sessionRequest",_=this.getAppLinkIfEnabled(l.peer.metadata,l.transportType);if(_)return await this.sendRequest({clientRpcId:u,relayRpcId:f,topic:n,method:A,params:{request:Pi(Ft({},s),{expiryTimestamp:Xr(c)}),chainId:i},expiry:c,throwOnFailedPublish:!0,appLink:_}).catch(S=>N(S)),this.client.events.emit("session_request_sent",{topic:n,request:s,chainId:i,id:u}),await g();const E={request:Pi(Ft({},s),{expiryTimestamp:Xr(c)}),chainId:i},x=this.shouldSetTVF(A,E);return await Promise.all([new Promise(async S=>{await this.sendRequest(Ft({clientRpcId:u,relayRpcId:f,topic:n,method:A,params:E,expiry:c,throwOnFailedPublish:!0},x&&{tvf:this.getTVFParams(u,E)})).catch(D=>N(D)),this.client.events.emit("session_request_sent",{topic:n,request:s,chainId:i,id:u}),S()}),new Promise(async S=>{var D;if(!((D=l.sessionConfig)!=null&&D.disableDeepLink)){const C=await yre(this.client.core.storage,p_);await dre({id:u,topic:n,wcDeepLink:C})}S()}),g()]).then(S=>S[2])}),ke(this,"respond",async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:s}=t,{id:n}=s,c=this.client.session.get(i);c.transportType===br.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);ri(s)?await this.sendResult({id:n,topic:i,result:s.result,throwOnFailedPublish:!0,appLink:l}):zr(s)&&await this.sendError({id:n,topic:i,error:s.error,appLink:l}),this.cleanupAfterResponse(t)}),ke(this,"ping",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=li(),n=fn().toString(),{done:c,resolve:l,reject:u}=Oa();this.events.once(jt("session_ping",s),({error:f})=>{f?u(f):l()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:n}),c()])}else this.client.core.pairing.pairings.keys.includes(i)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:i}))}),ke(this,"emit",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:i,event:s,chainId:n}=t,c=fn().toString(),l=li();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:s,chainId:n},throwOnFailedPublish:!0,relayRpcId:c,clientRpcId:l})}),ke(this,"disconnect",async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:Yt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:s}=$e("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(s)}}),ke(this,"find",t=>(this.isInitialized(),this.client.session.getAll().filter(i=>Sne(i,t)))),ke(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ke(this,"authenticate",async(t,i)=>{var s;this.isInitialized(),this.isValidAuthenticate(t);const n=i&&this.client.core.linkModeSupportedApps.includes(i)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),c=n?br.link_mode:br.relay;c===br.relay&&await this.confirmOnlineStateOrThrow();const{chains:l,statement:u="",uri:f,domain:g,nonce:m,type:N,exp:A,nbf:_,methods:E=[],expiry:x}=t,S=[...t.resources||[]],{topic:D,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:D,uri:C}});const j=await this.client.core.crypto.generateKeyPair(),k=wf(j);if(await Promise.all([this.client.auth.authKeys.set(vf,{responseTopic:k,publicKey:j}),this.client.auth.pairingTopics.set(k,{topic:k,pairingTopic:D})]),await this.client.core.relayer.subscribe(k,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${D}`),E.length>0){const{namespace:y}=fc(l[0]);let o=oie(y,"request",E);yf(S)&&(o=hie(o,S.pop())),S.push(o)}const P=x&&x>ci.wc_sessionAuthenticate.req.ttl?x:ci.wc_sessionAuthenticate.req.ttl,Q={authPayload:{type:N??"caip122",chains:l,statement:u,aud:f,domain:g,version:"1",nonce:m,iat:new Date().toISOString(),exp:A,nbf:_,resources:S},requester:{publicKey:j,metadata:this.client.metadata},expiryTimestamp:Xr(P)},F={eip155:{chains:l,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},$={requiredNamespaces:{},optionalNamespaces:F,relays:[{protocol:"irn"}],pairingTopic:D,proposer:{publicKey:j,metadata:this.client.metadata},expiryTimestamp:Xr(ci.wc_sessionPropose.req.ttl),id:li()},{done:Z,resolve:M,reject:a}=Oa(P,"Request expired"),h=li(),d=jt("session_connect",$.id),p=jt("session_request",h),w=async({error:y,session:o})=>{this.events.off(p,b),y?a(y):o&&M({session:o})},b=async y=>{var o,v,R;if(await this.deletePendingAuthRequest(h,{message:"fulfilled",code:0}),y.error){const B=Yt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return y.error.code===B.code?void 0:(this.events.off(d,w),a(y.error.message))}await this.deleteProposal($.id),this.events.off(d,w);const{cacaos:L,responder:z}=y.result,q=[],Y=[];for(const B of L){await wA({cacao:B,projectId:this.client.core.projectId})||(this.client.logger.error(B,"Signature verification failed"),a(Yt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:W}=B,V=yf(W.resources),U=[Im(W.iss)],H=Uf(W.iss);if(V){const de=mA(V),ee=vA(V);q.push(...de),U.push(...ee)}for(const de of U)Y.push(`${de}:${H}`)}const T=await this.client.core.crypto.generateSharedKey(j,z.publicKey);let O;q.length>0&&(O={topic:T,acknowledged:!0,self:{publicKey:j,metadata:this.client.metadata},peer:z,controller:z.publicKey,expiry:Xr(Uo),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:D,namespaces:RA([...new Set(q)],[...new Set(Y)]),transportType:c},await this.client.core.relayer.subscribe(T,{transportType:c}),await this.client.session.set(T,O),D&&await this.client.core.pairing.updateMetadata({topic:D,metadata:z.metadata}),O=this.client.session.get(T)),(o=this.client.metadata.redirect)!=null&&o.linkMode&&(v=z.metadata.redirect)!=null&&v.linkMode&&(R=z.metadata.redirect)!=null&&R.universal&&i&&(this.client.core.addLinkModeSupportedApp(z.metadata.redirect.universal),this.client.session.update(T,{transportType:br.link_mode})),M({auths:L,session:O})};this.events.once(d,w),this.events.once(p,b);let I;try{if(n){const y=$i("wc_sessionAuthenticate",Q,h);this.client.core.history.set(D,y);const o=await this.client.core.crypto.encode("",y,{type:Fl,encoding:yh});I=Wu(i,D,o)}else await Promise.all([this.sendRequest({topic:D,method:"wc_sessionAuthenticate",params:Q,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:h}),this.sendRequest({topic:D,method:"wc_sessionPropose",params:$,expiry:ci.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:$.id})])}catch(y){throw this.events.off(d,w),this.events.off(p,b),y}return await this.setProposal($.id,$),await this.setAuthRequest(h,{request:Pi(Ft({},Q),{verifyContext:{}}),pairingTopic:D,transportType:c}),{uri:I??C,response:Z}}),ke(this,"approveSessionAuthenticate",async t=>{const{id:i,auths:s}=t,n=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[xa.authenticated_session_approve_started]}});try{this.isInitialized()}catch(x){throw n.setError(vh.no_internet_connection),x}const c=this.getPendingAuthRequest(i);if(!c)throw n.setError(vh.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const l=c.transportType||br.relay;l===br.relay&&await this.confirmOnlineStateOrThrow();const u=c.requester.publicKey,f=await this.client.core.crypto.generateKeyPair(),g=wf(u),m={type:Ls,receiverPublicKey:u,senderPublicKey:f},N=[],A=[];for(const x of s){if(!await wA({cacao:x,projectId:this.client.core.projectId})){n.setError(vh.invalid_cacao);const k=Yt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:g,error:k,encodeOpts:m}),new Error(k.message)}n.addTrace(xa.cacaos_verified);const{p:S}=x,D=yf(S.resources),C=[Im(S.iss)],j=Uf(S.iss);if(D){const k=mA(D),P=vA(D);N.push(...k),C.push(...P)}for(const k of C)A.push(`${k}:${j}`)}const _=await this.client.core.crypto.generateSharedKey(f,u);n.addTrace(xa.create_authenticated_session_topic);let E;if(N?.length>0){E={topic:_,acknowledged:!0,self:{publicKey:f,metadata:this.client.metadata},peer:{publicKey:u,metadata:c.requester.metadata},controller:u,expiry:Xr(Uo),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:RA([...new Set(N)],[...new Set(A)]),transportType:l},n.addTrace(xa.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:l})}catch(x){throw n.setError(vh.subscribe_authenticated_session_topic_failure),x}n.addTrace(xa.subscribe_authenticated_session_topic_success),await this.client.session.set(_,E),n.addTrace(xa.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}n.addTrace(xa.publishing_authenticated_session_approve);try{await this.sendResult({topic:g,id:i,result:{cacaos:s,responder:{publicKey:f,metadata:this.client.metadata}},encodeOpts:m,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,l)})}catch(x){throw n.setError(vh.authenticated_session_approve_publish_failure),x}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:E}}),ke(this,"rejectSessionAuthenticate",async t=>{this.isInitialized();const{id:i,reason:s}=t,n=this.getPendingAuthRequest(i);if(!n)throw new Error(`Could not find pending auth request with id ${i}`);n.transportType===br.relay&&await this.confirmOnlineStateOrThrow();const c=n.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=wf(c),f={type:Ls,receiverPublicKey:c,senderPublicKey:l};await this.sendError({id:i,topic:u,error:s,encodeOpts:f,rpcOpts:ci.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,Yt("USER_DISCONNECTED"))}),ke(this,"formatAuthMessage",t=>{this.isInitialized();const{request:i,iss:s}=t;return n5(i,s)}),ke(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)}),ke(this,"cleanupDuplicatePairings",async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(n=>{var c,l;return((c=n.peerMetadata)==null?void 0:c.url)&&((l=n.peerMetadata)==null?void 0:l.url)===t.peer.metadata.url&&n.topic&&n.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(n=>this.client.core.pairing.disconnect({topic:n.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}}),ke(this,"deleteSession",async t=>{var i;const{topic:s,expirerHasDeleted:n=!1,emitEvent:c=!0,id:l=0}=t,{self:u}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Yt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),n||this.client.core.expirer.del(s),this.client.core.storage.removeItem(p_).catch(f=>this.client.logger.warn(f)),this.getPendingSessionRequests().forEach(f=>{f.topic===s&&this.deletePendingSessionRequest(f.id,Yt("USER_DISCONNECTED"))}),s===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=os.idle),c&&this.client.events.emit("session_delete",{id:l,topic:s})}),ke(this,"deleteProposal",async(t,i)=>{if(i)try{const s=this.client.proposal.get(t);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(Sa.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,Yt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")}),ke(this,"deletePendingSessionRequest",async(t,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(n=>n.id!==t),s&&(this.sessionRequestQueue.state=os.idle,this.client.events.emit("session_request_expire",{id:t}))}),ke(this,"deletePendingAuthRequest",async(t,i,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)])}),ke(this,"setExpiry",async(t,i)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,i),await this.client.session.update(t,{expiry:i}))}),ke(this,"setProposal",async(t,i)=>{this.client.core.expirer.set(t,Xr(ci.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,i)}),ke(this,"setAuthRequest",async(t,i)=>{const{request:s,pairingTopic:n,transportType:c=br.relay}=i;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:n,verifyContext:s.verifyContext,transportType:c})}),ke(this,"setPendingSessionRequest",async t=>{const{id:i,topic:s,params:n,verifyContext:c}=t,l=n.request.expiryTimestamp||Xr(ci.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,l),await this.client.pendingRequest.set(i,{id:i,topic:s,params:n,verifyContext:c})}),ke(this,"sendRequest",async t=>{const{topic:i,method:s,params:n,expiry:c,relayRpcId:l,clientRpcId:u,throwOnFailedPublish:f,appLink:g,tvf:m}=t,N=$i(s,n,u);let A;const _=!!g;try{const S=_?yh:sa;A=await this.client.core.crypto.encode(i,N,{encoding:S})}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),S}let E;if(Yce.includes(s)){const S=ls(JSON.stringify(N)),D=ls(A);E=await this.client.core.verify.register({id:D,decryptedId:S})}const x=ci[s].req;if(x.attestation=E,c&&(x.ttl=c),l&&(x.id=l),this.client.core.history.set(i,N),_){const S=Wu(g,i,A);await globalThis.Linking.openURL(S,this.client.name)}else{const S=ci[s].req;c&&(S.ttl=c),l&&(S.id=l),S.tvf=Pi(Ft({},m),{correlationId:N.id}),f?(S.internal=Pi(Ft({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,A,S)):this.client.core.relayer.publish(i,A,S).catch(D=>this.client.logger.error(D))}return N.id}),ke(this,"sendResult",async t=>{const{id:i,topic:s,result:n,throwOnFailedPublish:c,encodeOpts:l,appLink:u}=t,f=wa(i,n);let g;const m=u&&typeof globalThis?.Linking<"u";try{const _=m?yh:sa;g=await this.client.core.crypto.encode(s,f,Pi(Ft({},l||{}),{encoding:_}))}catch(_){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),_}let N,A;try{N=await this.client.core.history.get(s,i);const _=N.request;try{this.shouldSetTVF(_.method,_.params)&&(A=this.getTVFParams(i,_.params,n))}catch(E){this.client.logger.warn("sendResult() -> getTVFParams() failed",E)}}catch(_){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${i}) failed`),_}if(m){const _=Wu(u,s,g);await globalThis.Linking.openURL(_,this.client.name)}else{const _=N.request.method,E=ci[_].res;E.tvf=Pi(Ft({},A),{correlationId:i}),c?(E.internal=Pi(Ft({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,g,E)):this.client.core.relayer.publish(s,g,E).catch(x=>this.client.logger.error(x))}await this.client.core.history.resolve(f)}),ke(this,"sendError",async t=>{const{id:i,topic:s,error:n,encodeOpts:c,rpcOpts:l,appLink:u}=t,f=Yc(i,n);let g;const m=u&&typeof globalThis?.Linking<"u";try{const A=m?yh:sa;g=await this.client.core.crypto.encode(s,f,Pi(Ft({},c||{}),{encoding:A}))}catch(A){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),A}let N;try{N=await this.client.core.history.get(s,i)}catch(A){throw this.client.logger.error(`sendError() -> history.get(${s}, ${i}) failed`),A}if(m){const A=Wu(u,s,g);await globalThis.Linking.openURL(A,this.client.name)}else{const A=N.request.method,_=l||ci[A].res;this.client.core.relayer.publish(s,g,_)}await this.client.core.history.resolve(f)}),ke(this,"cleanup",async()=>{const t=[],i=[];this.client.session.getAll().forEach(s=>{let n=!1;Xs(s.expiry)&&(n=!0),this.client.core.crypto.keychain.has(s.topic)||(n=!0),n&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Xs(s.expiryTimestamp)&&i.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...i.map(s=>this.deleteProposal(s))])}),ke(this,"onProviderMessageEvent",async t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):await this.onRelayMessage(t)}),ke(this,"onRelayEventRequest",async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()}),ke(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===os.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=os.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=os.idle}),ke(this,"processRequest",async t=>{const{topic:i,payload:s,attestation:n,transportType:c,encryptedId:l}=t,u=s.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:s,attestation:n,encryptedId:l});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,s);case"wc_sessionPing":return await this.onSessionPingRequest(i,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:s,attestation:n,encryptedId:l,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(i,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:s,attestation:n,encryptedId:l,transportType:c});default:return this.client.logger.info(`Unsupported request method ${u}`)}}),ke(this,"onRelayEventResponse",async t=>{const{topic:i,payload:s,transportType:n}=t,c=(await this.client.core.history.get(i,s.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s,n);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${c}`)}}),ke(this,"onRelayEventUnknownPayload",t=>{const{topic:i}=t,{message:s}=$e("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ke(this,"shouldIgnorePairingRequest",t=>{const{topic:i,requestMethod:s}=t,n=this.expectedPairingMethodMap.get(i);return!n||n.includes(s)?!1:!!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ke(this,"onSessionProposeRequest",async t=>{const{topic:i,payload:s,attestation:n,encryptedId:c}=t,{params:l,id:u}=s;try{const f=this.client.core.eventClient.getEvent({topic:i});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),f?.setError(Ts.proposal_listener_not_found)),this.isValidConnect(Ft({},s.params));const g=l.expiryTimestamp||Xr(ci.wc_sessionPropose.req.ttl),m=Ft({id:u,pairingTopic:i,expiryTimestamp:g},l);await this.setProposal(u,m);const N=await this.getVerifyContext({attestationId:n,hash:ls(JSON.stringify(s)),encryptedId:c,metadata:m.proposer.metadata});f?.addTrace(hs.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:m,verifyContext:N})}catch(f){await this.sendError({id:u,topic:i,error:f,rpcOpts:ci.wc_sessionPropose.autoReject}),this.client.logger.error(f)}}),ke(this,"onSessionProposeResponse",async(t,i,s)=>{const{id:n}=i;if(ri(i)){const{result:c}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const u=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const f=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:f});const g=await this.client.core.crypto.generateSharedKey(u,f);this.pendingSessions.set(n,{sessionTopic:g,pairingTopic:t,proposalId:n,publicKey:u});const m=await this.client.core.relayer.subscribe(g,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:m}),await this.client.core.pairing.activate({topic:t})}else if(zr(i)){await this.client.proposal.delete(n,Yt("USER_DISCONNECTED"));const c=jt("session_connect",n);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(c,{error:i.error})}}),ke(this,"onSessionSettleRequest",async(t,i)=>{const{id:s,params:n}=i;try{this.isValidSessionSettleRequest(n);const{relay:c,controller:l,expiry:u,namespaces:f,sessionProperties:g,scopedProperties:m,sessionConfig:N}=i.params,A=[...this.pendingSessions.values()].find(x=>x.sessionTopic===t);if(!A)return this.client.logger.error(`Pending session not found for topic ${t}`);const _=this.client.proposal.get(A.proposalId),E=Pi(Ft(Ft(Ft({topic:t,relay:c,expiry:u,namespaces:f,acknowledged:!0,pairingTopic:A.pairingTopic,requiredNamespaces:_.requiredNamespaces,optionalNamespaces:_.optionalNamespaces,controller:l.publicKey,self:{publicKey:A.publicKey,metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},g&&{sessionProperties:g}),m&&{scopedProperties:m}),N&&{sessionConfig:N}),{transportType:br.relay});await this.client.session.set(E.topic,E),await this.setExpiry(E.topic,E.expiry),await this.client.core.pairing.updateMetadata({topic:A.pairingTopic,metadata:E.peer.metadata}),this.client.events.emit("session_connect",{session:E}),this.events.emit(jt("session_connect",A.proposalId),{session:E}),this.pendingSessions.delete(A.proposalId),this.deleteProposal(A.proposalId,!1),this.cleanupDuplicatePairings(E),await this.sendResult({id:i.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(c){await this.sendError({id:s,topic:t,error:c}),this.client.logger.error(c)}}),ke(this,"onSessionSettleResponse",async(t,i)=>{const{id:s}=i;ri(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(jt("session_approve",s),{})):zr(i)&&(await this.client.session.delete(t,Yt("USER_DISCONNECTED")),this.events.emit(jt("session_approve",s),{error:i.error}))}),ke(this,"onSessionUpdateRequest",async(t,i)=>{const{params:s,id:n}=i;try{const c=`${t}_session_update`,l=wh.get(c);if(l&&this.isRequestOutOfSync(l,n)){this.client.logger.warn(`Discarding out of sync request - ${n}`),this.sendError({id:n,topic:t,error:Yt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Ft({topic:t},s));try{wh.set(c,n),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:n,topic:t,result:!0,throwOnFailedPublish:!0})}catch(u){throw wh.delete(c),u}this.client.events.emit("session_update",{id:n,topic:t,params:s})}catch(c){await this.sendError({id:n,topic:t,error:c}),this.client.logger.error(c)}}),ke(this,"isRequestOutOfSync",(t,i)=>i.toString().slice(0,-3)<t.toString().slice(0,-3)),ke(this,"onSessionUpdateResponse",(t,i)=>{const{id:s}=i,n=jt("session_update",s);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);ri(i)?this.events.emit(jt("session_update",s),{}):zr(i)&&this.events.emit(jt("session_update",s),{error:i.error})}),ke(this,"onSessionExtendRequest",async(t,i)=>{const{id:s}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Xr(Uo)),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(n){await this.sendError({id:s,topic:t,error:n}),this.client.logger.error(n)}}),ke(this,"onSessionExtendResponse",(t,i)=>{const{id:s}=i,n=jt("session_extend",s);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);ri(i)?this.events.emit(jt("session_extend",s),{}):zr(i)&&this.events.emit(jt("session_extend",s),{error:i.error})}),ke(this,"onSessionPingRequest",async(t,i)=>{const{id:s}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(n){await this.sendError({id:s,topic:t,error:n}),this.client.logger.error(n)}}),ke(this,"onSessionPingResponse",(t,i)=>{const{id:s}=i,n=jt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners 2176`);ri(i)?this.events.emit(jt("session_ping",s),{}):zr(i)&&this.events.emit(jt("session_ping",s),{error:i.error})},500)}),ke(this,"onSessionDeleteRequest",async(t,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),Promise.all([new Promise(n=>{this.client.core.relayer.once(fi.publish,async()=>{n(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:Yt("USER_DISCONNECTED")})]).catch(n=>this.client.logger.error(n))}catch(n){this.client.logger.error(n)}}),ke(this,"onSessionRequest",async t=>{var i,s,n;const{topic:c,payload:l,attestation:u,encryptedId:f,transportType:g}=t,{id:m,params:N}=l;try{await this.isValidRequest(Ft({topic:c},N));const A=this.client.session.get(c),_=await this.getVerifyContext({attestationId:u,hash:ls(JSON.stringify($i("wc_sessionRequest",N,m))),encryptedId:f,metadata:A.peer.metadata,transportType:g}),E={id:m,topic:c,params:N,verifyContext:_};await this.setPendingSessionRequest(E),g===br.link_mode&&(i=A.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((s=A.peer.metadata.redirect)==null?void 0:s.universal),(n=this.client.signConfig)!=null&&n.disableRequestQueue?this.emitSessionRequest(E):(this.addSessionRequestToSessionRequestQueue(E),this.processSessionRequestQueue())}catch(A){await this.sendError({id:m,topic:c,error:A}),this.client.logger.error(A)}}),ke(this,"onSessionRequestResponse",(t,i)=>{const{id:s}=i,n=jt("session_request",s);if(this.events.listenerCount(n)===0)throw new Error(`emitting ${n} without any listeners`);ri(i)?this.events.emit(jt("session_request",s),{result:i.result}):zr(i)&&this.events.emit(jt("session_request",s),{error:i.error})}),ke(this,"onSessionEventRequest",async(t,i)=>{const{id:s,params:n}=i;try{const c=`${t}_session_event_${n.event.name}`,l=wh.get(c);if(l&&this.isRequestOutOfSync(l,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Ft({topic:t},n)),this.client.events.emit("session_event",{id:s,topic:t,params:n}),wh.set(c,s)}catch(c){await this.sendError({id:s,topic:t,error:c}),this.client.logger.error(c)}}),ke(this,"onSessionAuthenticateResponse",(t,i)=>{const{id:s}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:i}),ri(i)?this.events.emit(jt("session_request",s),{result:i.result}):zr(i)&&this.events.emit(jt("session_request",s),{error:i.error})}),ke(this,"onSessionAuthenticateRequest",async t=>{var i;const{topic:s,payload:n,attestation:c,encryptedId:l,transportType:u}=t;try{const{requester:f,authPayload:g,expiryTimestamp:m}=n.params,N=await this.getVerifyContext({attestationId:c,hash:ls(JSON.stringify(n)),encryptedId:l,metadata:f.metadata,transportType:u}),A={requester:f,pairingTopic:s,id:n.id,authPayload:g,verifyContext:N,expiryTimestamp:m};await this.setAuthRequest(n.id,{request:A,pairingTopic:s,transportType:u}),u===br.link_mode&&(i=f.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(f.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:n.params,id:n.id,verifyContext:N})}catch(f){this.client.logger.error(f);const g=n.params.requester.publicKey,m=await this.client.core.crypto.generateKeyPair(),N=this.getAppLinkIfEnabled(n.params.requester.metadata,u),A={type:Ls,receiverPublicKey:g,senderPublicKey:m};await this.sendError({id:n.id,topic:s,error:f,encodeOpts:A,rpcOpts:ci.wc_sessionAuthenticate.autoReject,appLink:N})}}),ke(this,"addSessionRequestToSessionRequestQueue",t=>{this.sessionRequestQueue.queue.push(t)}),ke(this,"cleanupAfterResponse",t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=os.idle,this.processSessionRequestQueue()},ne.toMiliseconds(this.requestQueueDelay))}),ke(this,"cleanupPendingSentRequestsForTopic",({topic:t,error:i})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(n=>n.topic===t&&n.request.method==="wc_sessionRequest").forEach(n=>{const c=n.request.id,l=jt("session_request",c);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners`);this.events.emit(jt("session_request",n.request.id),{error:i})})}),ke(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===os.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=os.active,this.emitSessionRequest(t)}catch(i){this.client.logger.error(i)}}),ke(this,"emitSessionRequest",t=>{this.client.events.emit("session_request",t)}),ke(this,"onPairingCreated",t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const i=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);i&&this.onSessionProposeRequest({topic:t.topic,payload:$i("wc_sessionPropose",Pi(Ft({},i),{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties,scopedProperties:i.scopedProperties}),i.id)})}),ke(this,"isValidConnect",async t=>{if(!Gi(t)){const{message:f}=$e("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(f)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:n,sessionProperties:c,scopedProperties:l,relays:u}=t;if(Ai(i)||await this.isValidPairingTopic(i),!$ne(u)){const{message:f}=$e("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(f)}if(!Ai(s)&&Ml(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Ai(n)&&Ml(n)!==0&&this.validateNamespaces(n,"optionalNamespaces"),Ai(c)||this.validateSessionProps(c,"sessionProperties"),!Ai(l)){this.validateSessionProps(l,"scopedProperties");const f=Object.keys(s||{}).concat(Object.keys(n||{}));if(!Object.keys(l).every(g=>f.includes(g)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(l)}, required/optional namespaces: ${JSON.stringify(f)}`)}}),ke(this,"validateNamespaces",(t,i)=>{const s=Une(t,"connect()",i);if(s)throw new Error(s.message)}),ke(this,"isValidApprove",async t=>{if(!Gi(t))throw new Error($e("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:s,relayProtocol:n,sessionProperties:c,scopedProperties:l}=t;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const u=this.client.proposal.get(i),f=ow(s,"approve()");if(f)throw new Error(f.message);const g=BA(u.requiredNamespaces,s,"approve()");if(g)throw new Error(g.message);if(!Wr(n,!0)){const{message:m}=$e("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(m)}if(Ai(c)||this.validateSessionProps(c,"sessionProperties"),!Ai(l)){this.validateSessionProps(l,"scopedProperties");const m=new Set(Object.keys(s));if(!Object.keys(l).every(N=>m.has(N)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(l)}, approved namespaces: ${Array.from(m).join(", ")}`)}}),ke(this,"isValidReject",async t=>{if(!Gi(t)){const{message:n}=$e("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(n)}const{id:i,reason:s}=t;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!qne(s)){const{message:n}=$e("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(n)}}),ke(this,"isValidSessionSettleRequest",t=>{if(!Gi(t)){const{message:f}=$e("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(f)}const{relay:i,controller:s,namespaces:n,expiry:c}=t;if(!M5(i)){const{message:f}=$e("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const l=One(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);const u=ow(n,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(Xs(c)){const{message:f}=$e("EXPIRED","onSessionSettleRequest()");throw new Error(f)}}),ke(this,"isValidUpdate",async t=>{if(!Gi(t)){const{message:u}=$e("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(u)}const{topic:i,namespaces:s}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const n=this.client.session.get(i),c=ow(s,"update()");if(c)throw new Error(c.message);const l=BA(n.requiredNamespaces,s,"update()");if(l)throw new Error(l.message)}),ke(this,"isValidExtend",async t=>{if(!Gi(t)){const{message:s}=$e("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:i}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)}),ke(this,"isValidRequest",async t=>{if(!Gi(t)){const{message:u}=$e("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(u)}const{topic:i,request:s,chainId:n,expiry:c}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:l}=this.client.session.get(i);if(!$A(l,n)){const{message:u}=$e("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(u)}if(!Yne(s)){const{message:u}=$e("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(u)}if(!Vne(l,n,s.method)){const{message:u}=$e("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(u)}if(c&&!Gne(c,pw)){const{message:u}=$e("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${pw.min} and ${pw.max}`);throw new Error(u)}}),ke(this,"isValidRespond",async t=>{var i;if(!Gi(t)){const{message:c}=$e("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:n}=t;try{await this.isValidSessionTopic(s)}catch(c){throw(i=t?.response)!=null&&i.id&&this.cleanupAfterResponse(t),c}if(!Wne(n)){const{message:c}=$e("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(c)}}),ke(this,"isValidPing",async t=>{if(!Gi(t)){const{message:s}=$e("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)}),ke(this,"isValidEmit",async t=>{if(!Gi(t)){const{message:l}=$e("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(l)}const{topic:i,event:s,chainId:n}=t;await this.isValidSessionTopic(i);const{namespaces:c}=this.client.session.get(i);if(!$A(c,n)){const{message:l}=$e("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(l)}if(!Qne(s)){const{message:l}=$e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}if(!Fne(c,n,s.name)){const{message:l}=$e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(l)}}),ke(this,"isValidDisconnect",async t=>{if(!Gi(t)){const{message:s}=$e("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)}),ke(this,"isValidAuthenticate",t=>{const{chains:i,uri:s,domain:n,nonce:c}=t;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!Wr(s,!1))throw new Error("uri is required parameter");if(!Wr(n,!1))throw new Error("domain is required parameter");if(!Wr(c,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(u=>fc(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:l}=fc(i[0]);if(l!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ke(this,"getVerifyContext",async t=>{const{attestationId:i,hash:s,encryptedId:n,metadata:c,transportType:l}=t,u={verified:{verifyUrl:c.verifyUrl||Uh,validation:"UNKNOWN",origin:c.url||""}};try{if(l===br.link_mode){const g=this.getAppLinkIfEnabled(c,l);return u.verified.validation=g&&new URL(g).origin===new URL(c.url).origin?"VALID":"INVALID",u}const f=await this.client.core.verify.resolve({attestationId:i,hash:s,encryptedId:n,verifyUrl:c.verifyUrl});f&&(u.verified.origin=f.origin,u.verified.isScam=f.isScam,u.verified.validation=f.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(f){this.client.logger.warn(f)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u}),ke(this,"validateSessionProps",(t,i)=>{Object.values(t).forEach((s,n)=>{if(s==null){const{message:c}=$e("MISSING_OR_INVALID",`${i} must contain an existing value for each key. Received: ${s} for key ${Object.keys(t)[n]}`);throw new Error(c)}})}),ke(this,"getPendingAuthRequest",t=>{const i=this.client.auth.requests.get(t);return typeof i=="object"?i:void 0}),ke(this,"addToRecentlyDeleted",(t,i)=>{if(this.recentlyDeletedMap.set(t,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const n=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(s++>=n)break;this.recentlyDeletedMap.delete(c)}}}),ke(this,"checkRecentlyDeleted",t=>{const i=this.recentlyDeletedMap.get(t);if(i){const{message:s}=$e("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${t}`);throw new Error(s)}}),ke(this,"isLinkModeEnabled",(t,i)=>{var s,n,c,l,u,f,g,m,N;return!t||i!==br.link_mode?!1:((n=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:n.linkMode)===!0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==void 0&&((f=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:f.universal)!==""&&((g=t?.redirect)==null?void 0:g.universal)!==void 0&&((m=t?.redirect)==null?void 0:m.universal)!==""&&((N=t?.redirect)==null?void 0:N.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof globalThis?.Linking<"u"}),ke(this,"getAppLinkIfEnabled",(t,i)=>{var s;return this.isLinkModeEnabled(t,i)?(s=t?.redirect)==null?void 0:s.universal:void 0}),ke(this,"handleLinkModeMessage",({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const i=cA(t,"topic")||"",s=decodeURIComponent(cA(t,"wc_ev")||""),n=this.client.session.keys.includes(i);n&&this.client.session.update(i,{transportType:br.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:s,sessionExists:n})}),ke(this,"registerLinkModeListeners",async()=>{var t;if(Fv()||ma()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const i=globalThis?.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await i.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ke(this,"shouldSetTVF",(t,i)=>{if(!i||t!=="wc_sessionRequest")return!1;const{request:s}=i;return Object.keys(y_).includes(s.method)}),ke(this,"getTVFParams",(t,i,s)=>{var n,c;try{const l=i.request.method,u=this.extractTxHashesFromResult(l,s);return Pi(Ft({correlationId:t,rpcMethods:[l],chainId:i.chainId},this.isValidContractData(i.request.params)&&{contractAddresses:[(c=(n=i.request.params)==null?void 0:n[0])==null?void 0:c.to]}),{txHashes:u})}catch(l){this.client.logger.warn("Error getting TVF params",l)}return{}}),ke(this,"isValidContractData",t=>{var i;if(!t)return!1;try{const s=t?.data||((i=t?.[0])==null?void 0:i.data);if(!s.startsWith("0x"))return!1;const n=s.slice(2);return/^[0-9a-fA-F]*$/.test(n)?n.length%2===0:!1}catch{}return!1}),ke(this,"extractTxHashesFromResult",(t,i)=>{try{const s=y_[t];if(typeof i=="string")return[i];const n=i[s.key];if(to(n))return t==="solana_signAllTransactions"?n.map(c=>Fre(c)):n;if(typeof n=="string")return[n]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[i,s]of Object.entries(t))for(const n of s)try{await this.onProviderMessageEvent({topic:i,message:n,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${i}, message: ${n}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=$e("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(fi.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:t,message:i,attestation:s,transportType:n}=e,{publicKey:c}=this.client.auth.authKeys.keys.includes(vf)?this.client.auth.authKeys.get(vf):{publicKey:void 0};try{const l=await this.client.core.crypto.decode(t,i,{receiverPublicKey:c,encoding:n===br.link_mode?yh:sa});Wc(l)?(this.client.core.history.set(t,l),await this.onRelayEventRequest({topic:t,payload:l,attestation:s,transportType:n,encryptedId:ls(i)})):no(l)?(await this.client.core.history.resolve(l),await this.onRelayEventResponse({topic:t,payload:l,transportType:n}),this.client.core.history.delete(t,l.id)):await this.onRelayEventUnknownPayload({topic:t,payload:l,transportType:n}),await this.client.core.relayer.messages.ack(t,i)}catch(l){this.client.logger.error(l)}}registerExpirerEvents(){this.client.core.expirer.on(Tn.expired,async e=>{const{topic:t,id:i}=ZT(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,$e("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,$e("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(ka.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ka.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Wr(e,!1)){const{message:t}=$e("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=$e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Xs(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=$e("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Wr(e,!1)){const{message:t}=$e("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=$e("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Xs(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=$e("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=$e("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Wr(e,!1)){const{message:t}=$e("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=$e("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!Bne(e)){const{message:t}=$e("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=$e("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Xs(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=$e("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class the extends uo{constructor(e,t){super(e,t,Uce,r1),this.core=e,this.logger=t}}let rhe=class extends uo{constructor(e,t){super(e,t,$ce,r1),this.core=e,this.logger=t}};class ihe extends uo{constructor(e,t){super(e,t,qce,r1,i=>i.id),this.core=e,this.logger=t}}class nhe extends uo{constructor(e,t){super(e,t,Vce,_d,()=>vf),this.core=e,this.logger=t}}class she extends uo{constructor(e,t){super(e,t,Fce,_d),this.core=e,this.logger=t}}class ahe extends uo{constructor(e,t){super(e,t,Hce,_d,i=>i.id),this.core=e,this.logger=t}}var ohe=Object.defineProperty,che=(r,e,t)=>e in r?ohe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,gw=(r,e,t)=>che(r,typeof e!="symbol"?e+"":e,t);class hhe{constructor(e,t){this.core=e,this.logger=t,gw(this,"authKeys"),gw(this,"pairingTopics"),gw(this,"requests"),this.authKeys=new nhe(this.core,this.logger),this.pairingTopics=new she(this.core,this.logger),this.requests=new ahe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var lhe=Object.defineProperty,uhe=(r,e,t)=>e in r?lhe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,gt=(r,e,t)=>uhe(r,typeof e!="symbol"?e+"":e,t);let fhe=class B5 extends Lee{constructor(e){super(e),gt(this,"protocol",R5),gt(this,"version",U5),gt(this,"name",dw.name),gt(this,"metadata"),gt(this,"core"),gt(this,"logger"),gt(this,"events",new ii.EventEmitter),gt(this,"engine"),gt(this,"session"),gt(this,"proposal"),gt(this,"pendingRequest"),gt(this,"auth"),gt(this,"signConfig"),gt(this,"on",(i,s)=>this.events.on(i,s)),gt(this,"once",(i,s)=>this.events.once(i,s)),gt(this,"off",(i,s)=>this.events.off(i,s)),gt(this,"removeListener",(i,s)=>this.events.removeListener(i,s)),gt(this,"removeAllListeners",i=>this.events.removeAllListeners(i)),gt(this,"connect",async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"pair",async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"approve",async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"reject",async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"update",async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"extend",async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"request",async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"respond",async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"ping",async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"emit",async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"disconnect",async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"find",i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}}),gt(this,"authenticate",async(i,s)=>{try{return await this.engine.authenticate(i,s)}catch(n){throw this.logger.error(n.message),n}}),gt(this,"formatAuthMessage",i=>{try{return this.engine.formatAuthMessage(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"approveSessionAuthenticate",async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}}),gt(this,"rejectSessionAuthenticate",async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||dw.name,this.metadata=e?.metadata||VT(),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:da(ks({level:e?.logger||dw.logger}));this.core=e?.core||new Rce(e),this.logger=Ot(t,this.name),this.session=new rhe(this.core,this.logger),this.proposal=new the(this.core,this.logger),this.pendingRequest=new ihe(this.core,this.logger),this.engine=new ehe(this),this.auth=new hhe(this.core,this.logger)}static async init(e){const t=new B5(e);return await t.initialize(),t}get context(){return Zt(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ne.toMiliseconds(ne.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const m_="error",dhe="wss://relay.walletconnect.org",phe="wc",ghe="universal_provider",Vu=`${phe}@2:${ghe}:`,q5="https://rpc.walletconnect.org/v1/",ic="generic",yhe=`${q5}bundler`,Pn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function whe(){}function i1(r){return r==null||typeof r!="object"&&typeof r!="function"}function n1(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function mhe(r){if(i1(r))return r;if(Array.isArray(r)||n1(r)||r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer)return r.slice(0);const e=Object.getPrototypeOf(r),t=e.constructor;if(r instanceof Date||r instanceof Map||r instanceof Set)return new t(r);if(r instanceof RegExp){const i=new t(r);return i.lastIndex=r.lastIndex,i}if(r instanceof DataView)return new t(r.buffer.slice(0));if(r instanceof Error){const i=new t(r.message);return i.stack=r.stack,i.name=r.name,i.cause=r.cause,i}if(typeof File<"u"&&r instanceof File)return new t([r],r.name,{type:r.type,lastModified:r.lastModified});if(typeof r=="object"){const i=Object.create(e);return Object.assign(i,r)}return r}function v_(r){return typeof r=="object"&&r!==null}function Y5(r){return Object.getOwnPropertySymbols(r).filter(e=>Object.prototype.propertyIsEnumerable.call(r,e))}function W5(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}const vhe="[object RegExp]",Q5="[object String]",V5="[object Number]",F5="[object Boolean]",H5="[object Arguments]",bhe="[object Symbol]",Mhe="[object Date]",Nhe="[object Map]",Ihe="[object Set]",Ahe="[object Array]",_he="[object ArrayBuffer]",Ehe="[object Object]",Dhe="[object DataView]",She="[object Uint8Array]",xhe="[object Uint8ClampedArray]",The="[object Uint16Array]",jhe="[object Uint32Array]",Che="[object Int8Array]",Ohe="[object Int16Array]",Lhe="[object Int32Array]",zhe="[object Float32Array]",khe="[object Float64Array]";function Phe(r,e){return cc(r,void 0,r,new Map,e)}function cc(r,e,t,i=new Map,s=void 0){const n=s?.(r,e,t,i);if(n!=null)return n;if(i1(r))return r;if(i.has(r))return i.get(r);if(Array.isArray(r)){const c=new Array(r.length);i.set(r,c);for(let l=0;l<r.length;l++)c[l]=cc(r[l],l,t,i,s);return Object.hasOwn(r,"index")&&(c.index=r.index),Object.hasOwn(r,"input")&&(c.input=r.input),c}if(r instanceof Date)return new Date(r.getTime());if(r instanceof RegExp){const c=new RegExp(r.source,r.flags);return c.lastIndex=r.lastIndex,c}if(r instanceof Map){const c=new Map;i.set(r,c);for(const[l,u]of r)c.set(l,cc(u,l,t,i,s));return c}if(r instanceof Set){const c=new Set;i.set(r,c);for(const l of r)c.add(cc(l,void 0,t,i,s));return c}if(typeof We<"u"&&We.isBuffer(r))return r.subarray();if(n1(r)){const c=new(Object.getPrototypeOf(r)).constructor(r.length);i.set(r,c);for(let l=0;l<r.length;l++)c[l]=cc(r[l],l,t,i,s);return c}if(r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer)return r.slice(0);if(r instanceof DataView){const c=new DataView(r.buffer.slice(0),r.byteOffset,r.byteLength);return i.set(r,c),Pa(c,r,t,i,s),c}if(typeof File<"u"&&r instanceof File){const c=new File([r],r.name,{type:r.type});return i.set(r,c),Pa(c,r,t,i,s),c}if(r instanceof Blob){const c=new Blob([r],{type:r.type});return i.set(r,c),Pa(c,r,t,i,s),c}if(r instanceof Error){const c=new r.constructor;return i.set(r,c),c.message=r.message,c.name=r.name,c.stack=r.stack,c.cause=r.cause,Pa(c,r,t,i,s),c}if(typeof r=="object"&&Rhe(r)){const c=Object.create(Object.getPrototypeOf(r));return i.set(r,c),Pa(c,r,t,i,s),c}return r}function Pa(r,e,t=r,i,s){const n=[...Object.keys(e),...Y5(e)];for(let c=0;c<n.length;c++){const l=n[c],u=Object.getOwnPropertyDescriptor(r,l);(u==null||u.writable)&&(r[l]=cc(e[l],l,t,i,s))}}function Rhe(r){switch(W5(r)){case H5:case Ahe:case _he:case Dhe:case F5:case Mhe:case zhe:case khe:case Che:case Ohe:case Lhe:case Nhe:case V5:case Ehe:case vhe:case Ihe:case Q5:case bhe:case She:case xhe:case The:case jhe:return!0;default:return!1}}function Uhe(r,e){return Phe(r,(t,i,s,n)=>{if(typeof r=="object")switch(Object.prototype.toString.call(r)){case V5:case Q5:case F5:{const c=new r.constructor(r?.valueOf());return Pa(c,r),c}case H5:{const c={};return Pa(c,r),c.length=r.length,c[Symbol.iterator]=r[Symbol.iterator],c}default:return}})}function b_(r){return Uhe(r)}function M_(r){return r!==null&&typeof r=="object"&&W5(r)==="[object Arguments]"}function $he(r){return n1(r)}function Bhe(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const t=r[Symbol.toStringTag];return t==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${t}]`}let e=r;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function qhe(r,...e){const t=e.slice(0,-1),i=e[e.length-1];let s=r;for(let n=0;n<t.length;n++){const c=t[n];s=qm(s,c,i,new Map)}return s}function qm(r,e,t,i){if(i1(r)&&(r=Object(r)),e==null||typeof e!="object")return r;if(i.has(e))return mhe(i.get(e));if(i.set(e,r),Array.isArray(e)){e=e.slice();for(let n=0;n<e.length;n++)e[n]=e[n]??void 0}const s=[...Object.keys(e),...Y5(e)];for(let n=0;n<s.length;n++){const c=s[n];let l=e[c],u=r[c];if(M_(l)&&(l={...l}),M_(u)&&(u={...u}),typeof We<"u"&&We.isBuffer(l)&&(l=b_(l)),Array.isArray(l))if(typeof u=="object"&&u!=null){const g=[],m=Reflect.ownKeys(u);for(let N=0;N<m.length;N++){const A=m[N];g[A]=u[A]}u=g}else u=[];const f=t(u,l,c,r,e,i);f!=null?r[c]=f:Array.isArray(l)||v_(u)&&v_(l)?r[c]=qm(u,l,t,i):u==null&&Bhe(l)?r[c]=qm({},l,t,i):u==null&&$he(l)?r[c]=b_(l):(u===void 0||l!==void 0)&&(r[c]=l)}return r}function Yhe(r,...e){return qhe(r,...e,whe)}var Whe=Object.defineProperty,Qhe=Object.defineProperties,Vhe=Object.getOwnPropertyDescriptors,N_=Object.getOwnPropertySymbols,Fhe=Object.prototype.hasOwnProperty,Hhe=Object.prototype.propertyIsEnumerable,I_=(r,e,t)=>e in r?Whe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Fu=(r,e)=>{for(var t in e||(e={}))Fhe.call(e,t)&&I_(r,t,e[t]);if(N_)for(var t of N_(e))Hhe.call(e,t)&&I_(r,t,e[t]);return r},Zhe=(r,e)=>Qhe(r,Vhe(e));function yn(r,e,t){var i;const s=fc(r);return((i=e.rpcMap)==null?void 0:i[s.reference])||`${q5}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function fo(r){return r.includes(":")?r.split(":")[1]:r}function Z5(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Ghe(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const i=[];return t.forEach(s=>{const n=e.namespaces[s].accounts;i.push(...n)}),i}function yw(r={},e={}){const t=A_(r),i=A_(e);return Yhe(t,i)}function A_(r){var e,t,i,s;const n={};if(!Ml(r))return n;for(const[c,l]of Object.entries(r)){const u=e1(c)?[c]:l.chains,f=l.methods||[],g=l.events||[],m=l.rpcMap||{},N=xh(c);n[N]=Zhe(Fu(Fu({},n[N]),l),{chains:gf(u,(e=n[N])==null?void 0:e.chains),methods:gf(f,(t=n[N])==null?void 0:t.methods),events:gf(g,(i=n[N])==null?void 0:i.events),rpcMap:Fu(Fu({},m),(s=n[N])==null?void 0:s.rpcMap)})}return n}function Khe(r){return r.includes(":")?r.split(":")[2]:r}function __(r){const e={};for(const[t,i]of Object.entries(r)){const s=i.methods||[],n=i.events||[],c=i.accounts||[],l=e1(t)?[t]:i.chains?i.chains:Z5(i.accounts);e[t]={chains:l,methods:s,events:n,accounts:c}}return e}function ww(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const G5={},_t=r=>G5[r],mw=(r,e)=>{G5[r]=e};var Jhe=Object.defineProperty,Xhe=(r,e,t)=>e in r?Jhe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$o=(r,e,t)=>Xhe(r,typeof e!="symbol"?e+"":e,t);class ele{constructor(e){$o(this,"name","polkadot"),$o(this,"client"),$o(this,"httpProviders"),$o(this,"events"),$o(this,"namespace"),$o(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=fo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||yn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,_t("disableProviderPing")))}}var tle=Object.defineProperty,rle=Object.defineProperties,ile=Object.getOwnPropertyDescriptors,E_=Object.getOwnPropertySymbols,nle=Object.prototype.hasOwnProperty,sle=Object.prototype.propertyIsEnumerable,Ym=(r,e,t)=>e in r?tle(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,D_=(r,e)=>{for(var t in e||(e={}))nle.call(e,t)&&Ym(r,t,e[t]);if(E_)for(var t of E_(e))sle.call(e,t)&&Ym(r,t,e[t]);return r},S_=(r,e)=>rle(r,ile(e)),Bo=(r,e,t)=>Ym(r,typeof e!="symbol"?e+"":e,t);class ale{constructor(e){Bo(this,"name","eip155"),Bo(this,"client"),Bo(this,"chainId"),Bo(this,"namespace"),Bo(this,"httpProviders"),Bo(this,"events"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||yn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,_t("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=parseInt(fo(t));e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const n=parseInt(s,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${n}`);else throw new Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,s;const n=(i=(t=e.request)==null?void 0:t.params)==null?void 0:i[0];if(!n)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const c=this.client.session.get(e.topic),l=((s=c?.sessionProperties)==null?void 0:s.capabilities)||{};if(l!=null&&l[n])return l?.[n];const u=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:S_(D_({},c.sessionProperties||{}),{capabilities:S_(D_({},l||{}),{[n]:u})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return u}async getCallStatus(e){var t,i;const s=this.client.session.get(e.topic),n=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(n){const l=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(l,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,l)}}const c=(i=s.sessionProperties)==null?void 0:i.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,e)}catch(l){console.warn("Failed to fetch call status from custom bundler",l,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var i;const s=new URL(e),n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($i("eth_getUserOperationReceipt",[(i=t.request.params)==null?void 0:i[0]]))});if(!n.ok)throw new Error(`Failed to fetch user operation receipt - ${n.status}`);return await n.json()}getBundlerUrl(e,t){return`${yhe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var ole=Object.defineProperty,cle=(r,e,t)=>e in r?ole(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qo=(r,e,t)=>cle(r,typeof e!="symbol"?e+"":e,t);class hle{constructor(e){qo(this,"name","solana"),qo(this,"client"),qo(this,"httpProviders"),qo(this,"events"),qo(this,"namespace"),qo(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=fo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||yn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,_t("disableProviderPing")))}}var lle=Object.defineProperty,ule=(r,e,t)=>e in r?lle(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Yo=(r,e,t)=>ule(r,typeof e!="symbol"?e+"":e,t);class fle{constructor(e){Yo(this,"name","cosmos"),Yo(this,"client"),Yo(this,"httpProviders"),Yo(this,"events"),Yo(this,"namespace"),Yo(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=fo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||yn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,_t("disableProviderPing")))}}var dle=Object.defineProperty,ple=(r,e,t)=>e in r?dle(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Wo=(r,e,t)=>ple(r,typeof e!="symbol"?e+"":e,t);class gle{constructor(e){Wo(this,"name","algorand"),Wo(this,"client"),Wo(this,"httpProviders"),Wo(this,"events"),Wo(this,"namespace"),Wo(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||yn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||yn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new _r(new kr(i,_t("disableProviderPing")))}}var yle=Object.defineProperty,wle=(r,e,t)=>e in r?yle(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Qo=(r,e,t)=>wle(r,typeof e!="symbol"?e+"":e,t);class mle{constructor(e){Qo(this,"name","cip34"),Qo(this,"client"),Qo(this,"httpProviders"),Qo(this,"events"),Qo(this,"namespace"),Qo(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),s=fo(t);e[s]=this.createHttpProvider(s,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,_t("disableProviderPing")))}}var vle=Object.defineProperty,ble=(r,e,t)=>e in r?vle(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Vo=(r,e,t)=>ble(r,typeof e!="symbol"?e+"":e,t);class Mle{constructor(e){Vo(this,"name","elrond"),Vo(this,"client"),Vo(this,"httpProviders"),Vo(this,"events"),Vo(this,"namespace"),Vo(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=fo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||yn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,_t("disableProviderPing")))}}var Nle=Object.defineProperty,Ile=(r,e,t)=>e in r?Nle(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Fo=(r,e,t)=>Ile(r,typeof e!="symbol"?e+"":e,t);class Ale{constructor(e){Fo(this,"name","multiversx"),Fo(this,"client"),Fo(this,"httpProviders"),Fo(this,"events"),Fo(this,"namespace"),Fo(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=fo(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||yn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,_t("disableProviderPing")))}}var _le=Object.defineProperty,Ele=(r,e,t)=>e in r?_le(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ho=(r,e,t)=>Ele(r,typeof e!="symbol"?e+"":e,t);class Dle{constructor(e){Ho(this,"name","near"),Ho(this,"client"),Ho(this,"httpProviders"),Ho(this,"events"),Ho(this,"namespace"),Ho(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||yn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||yn(e,this.namespace);return typeof i>"u"?void 0:new _r(new kr(i,_t("disableProviderPing")))}}var Sle=Object.defineProperty,xle=(r,e,t)=>e in r?Sle(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zo=(r,e,t)=>xle(r,typeof e!="symbol"?e+"":e,t);class Tle{constructor(e){Zo(this,"name","tezos"),Zo(this,"client"),Zo(this,"httpProviders"),Zo(this,"events"),Zo(this,"namespace"),Zo(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||yn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||yn(e,this.namespace);return typeof i>"u"?void 0:new _r(new kr(i))}}var jle=Object.defineProperty,Cle=(r,e,t)=>e in r?jle(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Go=(r,e,t)=>Cle(r,typeof e!="symbol"?e+"":e,t);class Ole{constructor(e){Go(this,"name",ic),Go(this,"client"),Go(this,"httpProviders"),Go(this,"events"),Go(this,"namespace"),Go(this,"chainId"),this.namespace=e.namespace,this.events=_t("events"),this.client=_t("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Pn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const i={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const n=fc(s);i[`${n.namespace}:${n.reference}`]=this.createHttpProvider(s)}),i}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||yn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new _r(new kr(i,_t("disableProviderPing")))}}var Lle=Object.defineProperty,zle=Object.defineProperties,kle=Object.getOwnPropertyDescriptors,x_=Object.getOwnPropertySymbols,Ple=Object.prototype.hasOwnProperty,Rle=Object.prototype.propertyIsEnumerable,Wm=(r,e,t)=>e in r?Lle(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Hu=(r,e)=>{for(var t in e||(e={}))Ple.call(e,t)&&Wm(r,t,e[t]);if(x_)for(var t of x_(e))Rle.call(e,t)&&Wm(r,t,e[t]);return r},vw=(r,e)=>zle(r,kle(e)),Dn=(r,e,t)=>Wm(r,typeof e!="symbol"?e+"":e,t);let Ule=class K5{constructor(e){Dn(this,"client"),Dn(this,"namespaces"),Dn(this,"optionalNamespaces"),Dn(this,"sessionProperties"),Dn(this,"scopedProperties"),Dn(this,"events",new jc),Dn(this,"rpcProviders",{}),Dn(this,"session"),Dn(this,"providerOpts"),Dn(this,"logger"),Dn(this,"uri"),Dn(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:da(ks({level:e?.logger||m_})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new K5(e);return await t.initialize(),t}async request(e,t,i){const[s,n]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Hu({},e),chainId:`${s}:${n}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,s){const n=new Date().getTime();this.request(e,i,s).then(c=>t(null,wa(n,c))).catch(c=>t(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Yt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:s}=await this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit("display_uri",i));const n=await s();if(this.session=n.session,this.session){const c=__(this.session.namespaces);this.namespaces=yw(this.namespaces,c),await this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const s=await i();this.session=s;const n=__(s.namespaces);return this.namespaces=yw(this.namespaces,n),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,s]=this.validateChain(e),n=this.getProvider(i);n.name===ic?n.setDefaultChain(`${i}:${s}`,t):n.setDefaultChain(s,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(to(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await fhe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||m_,relayUrl:this.providerOpts.relayUrl||dhe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(i){throw this.logger.error("Failed to get session",i),new Error(`The provided session: ${(t=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:t.topic} doesn't exist in the Sign client`)}else{const i=this.client.session.getAll();this.session=i[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>xh(t)))];mw("client",this.client),mw("events",this.events),mw("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=Ghe(t,this.session),s=Z5(i),n=yw(this.namespaces,this.optionalNamespaces),c=vw(Hu({},n[t]),{accounts:i,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new ale({namespace:c});break;case"algorand":this.rpcProviders[t]=new gle({namespace:c});break;case"solana":this.rpcProviders[t]=new hle({namespace:c});break;case"cosmos":this.rpcProviders[t]=new fle({namespace:c});break;case"polkadot":this.rpcProviders[t]=new ele({namespace:c});break;case"cip34":this.rpcProviders[t]=new mle({namespace:c});break;case"elrond":this.rpcProviders[t]=new Mle({namespace:c});break;case"multiversx":this.rpcProviders[t]=new Ale({namespace:c});break;case"near":this.rpcProviders[t]=new Dle({namespace:c});break;case"tezos":this.rpcProviders[t]=new Tle({namespace:c});break;default:this.rpcProviders[ic]?this.rpcProviders[ic].updateNamespace(c):this.rpcProviders[ic]=new Ole({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;const{topic:i}=e;i===((t=this.session)==null?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;const{params:i,topic:s}=e;if(s!==((t=this.session)==null?void 0:t.topic))return;const{event:n}=i;if(n.name==="accountsChanged"){const c=n.data;c&&to(c)&&this.events.emit("accountsChanged",c.map(Khe))}else if(n.name==="chainChanged"){const c=i.chainId,l=i.event.data,u=xh(c),f=ww(c)!==ww(l)?`${u}:${ww(l)}`:c;this.onChainChanged(f)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i,s;if(e!==((i=this.session)==null?void 0:i.topic))return;const{namespaces:n}=t,c=(s=this.client)==null?void 0:s.session.get(e);this.session=vw(Hu({},c),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===((t=this.session)==null?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",vw(Hu({},Yt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Pn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ic]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:s,scopedProperties:n}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.scopedProperties=n}validateChain(e){const[t,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(c=>xh(c)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const s=xh(Object.keys(this.namespaces)[0]),n=this.rpcProviders[s].getDefaultChain();return[s,n]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(t||this.getProvider(i).setDefaultChain(s),this.namespaces[i]?this.namespaces[i].defaultChain=s:this.namespaces[`${i}:${s}`]?this.namespaces[`${i}:${s}`].defaultChain=s:this.namespaces[`${i}:${s}`]={defaultChain:s},this.events.emit("chainChanged",s),await this.persist("namespaces",this.namespaces))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var i;const s=((i=this.session)==null?void 0:i.topic)||"";await this.client.core.storage.setItem(`${Vu}/${e}${s}`,t)}async getFromStore(e){var t;const i=((t=this.session)==null?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${Vu}/${e}${i}`)}async deleteFromStore(e){var t;const i=((t=this.session)==null?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${Vu}/${e}${i}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const i of t)i.startsWith(Vu)&&await this.client.core.storage.removeItem(i)}catch(t){this.logger.warn("Failed to cleanup storage",t)}}};const Hs={EIP155:"eip155",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED"},qf={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[He.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[He.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[He.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[He.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[He.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[He.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[He.CONNECTOR_ID.INJECTED]:"Browser Wallet",[He.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[He.CONNECTOR_ID.COINBASE]:"Coinbase",[He.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[He.CONNECTOR_ID.LEDGER]:"Ledger",[He.CONNECTOR_ID.SAFE]:"Safe"}},J5={getCaipTokens(r){if(!r)return;const e={};return Object.entries(r).forEach(([t,i])=>{e[`${Hs.EIP155}:${t}`]=i}),e},isLowerCaseMatch(r,e){return r?.toLowerCase()===e?.toLowerCase()}},Zu={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${$le()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function $le(){return typeof window<"u"}const Ble={createLogger(r,e="error"){const t=ks({level:e}),{logger:i}=ev({opts:t});return i.error=(...s)=>{for(const n of s)if(n instanceof Error){r(n,...s);return}r(void 0,...s)},i}},qle="rpc.walletconnect.org";function Yle(r,e){const t=new URL("https://rpc.walletconnect.org/v1/");return t.searchParams.set("chainId",r),t.searchParams.set("projectId",e),t.toString()}const bw=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],nc={extendRpcUrlWithProjectId(r,e){let t=!1;try{t=new URL(r).host===qle}catch{t=!1}if(t){const i=new URL(r);return i.searchParams.has("projectId")||i.searchParams.set("projectId",e),i.toString()}return r},isCaipNetwork(r){return"chainNamespace"in r&&"caipNetworkId"in r},getChainNamespace(r){return this.isCaipNetwork(r)?r.chainNamespace:He.CHAIN.EVM},getCaipNetworkId(r){return this.isCaipNetwork(r)?r.caipNetworkId:`${He.CHAIN.EVM}:${r.id}`},getDefaultRpcUrl(r,e,t){const i=r.rpcUrls?.default?.http?.[0];return bw.includes(e)?Yle(e,t):i||""},extendCaipNetwork(r,{customNetworkImageUrls:e,projectId:t,customRpcUrls:i}){const s=this.getChainNamespace(r),n=this.getCaipNetworkId(r),c=r.rpcUrls.default.http?.[0],l=this.getDefaultRpcUrl(r,n,t),u=r?.rpcUrls?.chainDefault?.http?.[0]||c,f=i?.[n]?.map(N=>N.url)||[],g=[...f,l],m=[...f];return u&&!m.includes(u)&&m.push(u),{...r,chainNamespace:s,caipNetworkId:n,assets:{imageId:qf.NetworkImageIds[r.id],imageUrl:e?.[r.id]},rpcUrls:{...r.rpcUrls,default:{http:g},chainDefault:{http:m}}}},extendCaipNetworks(r,{customNetworkImageUrls:e,projectId:t,customRpcUrls:i}){return r.map(s=>nc.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:i,projectId:t}))},getViemTransport(r,e,t){const i=[];if(t?.forEach(s=>{i.push(Ky(s.url,s.config))}),bw.includes(r.caipNetworkId)){const s=this.getDefaultRpcUrl(r,r.caipNetworkId,e);i.push(Ky(s,{fetchOptions:{headers:{"Content-Type":"text/plain"}}}))}return H3(i)},extendWagmiTransports(r,e,t){if(bw.includes(r.caipNetworkId)){const i=this.getDefaultRpcUrl(r,r.caipNetworkId,e);return H3([t,Ky(i)])}return t},getUnsupportedNetwork(r){return{id:r.split(":")[1],caipNetworkId:r,name:He.UNSUPPORTED_NETWORK_NAME,chainNamespace:r.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(r){const e=Fe.getActiveCaipNetworkId(),t=X.getAllRequestedCaipNetworks(),i=Array.from(X.state.chains?.keys()||[]),s=e?.split(":")[0],n=s?i.includes(s):!1,c=t?.find(u=>u.caipNetworkId===e);return n&&!c&&e?this.getUnsupportedNetwork(e):c||r||t?.[0]}},Yf={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Fi=jr({providers:{...Yf},providerIds:{...Yf}}),xr={state:Fi,subscribeKey(r,e){return mn(Fi,r,e)},subscribe(r){return Bi(Fi,()=>{r(Fi)})},subscribeProviders(r){return Bi(Fi.providers,()=>r(Fi.providers))},setProvider(r,e){e&&(Fi.providers[r]=Ka(e))},getProvider(r){return Fi.providers[r]},setProviderId(r,e){e&&(Fi.providerIds[r]=e)},getProviderId(r){if(r)return Fi.providerIds[r]},reset(){Fi.providers={...Yf},Fi.providerIds={...Yf}},resetChain(r){Fi.providers[r]=void 0,Fi.providerIds[r]=void 0}},Wle={VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},Qm={filterOutDuplicatesByRDNS(r){const e=Re.state.enableEIP6963?at.state.connectors:[],t=Fe.getRecentWallets(),i=e.map(l=>l.info?.rdns).filter(Boolean),s=t.map(l=>l.rdns).filter(Boolean),n=i.concat(s);if(n.includes("io.metamask.mobile")&&ot.isMobile()){const l=n.indexOf("io.metamask.mobile");n[l]="io.metamask"}return r.filter(l=>!n.includes(String(l?.rdns)))},filterOutDuplicatesByIds(r){const e=at.state.connectors.filter(l=>l.type==="ANNOUNCED"||l.type==="INJECTED"),t=Fe.getRecentWallets(),i=e.map(l=>l.explorerId),s=t.map(l=>l.id),n=i.concat(s);return r.filter(l=>!n.includes(l?.id))},filterOutDuplicateWallets(r){const e=this.filterOutDuplicatesByRDNS(r);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(r){const{connectors:e}=at.state,t=e.filter(n=>n.type==="ANNOUNCED").reduce((n,c)=>(c.info?.rdns&&(n[c.info.rdns]=!0),n),{});return r.map(n=>({...n,installed:!!n.rdns&&!!t[n.rdns??""]})).sort((n,c)=>Number(c.installed)-Number(n.installed))},getConnectOrderMethod(r,e){const t=r?.connectMethodsOrder||Re.state.features?.connectMethodsOrder,i=e||at.state.connectors;if(t)return t;const{injected:s,announced:n}=bf.getConnectorsByType(i,ct.state.recommended,ct.state.featured),c=s.filter(bf.showConnector),l=n.filter(bf.showConnector);return c.length||l.length?["wallet","email","social"]:Wle.DEFAULT_CONNECT_METHOD_ORDER}},bf={getConnectorsByType(r,e,t){const{customWallets:i}=Re.state,s=Fe.getRecentWallets(),n=Qm.filterOutDuplicateWallets(e),c=Qm.filterOutDuplicateWallets(t),l=r.filter(m=>m.type==="MULTI_CHAIN"),u=r.filter(m=>m.type==="ANNOUNCED"),f=r.filter(m=>m.type==="INJECTED"),g=r.filter(m=>m.type==="EXTERNAL");return{custom:i,recent:s,external:g,multiChain:l,announced:u,injected:f,recommended:n,featured:c}},showConnector(r){const e=r.info?.rdns,t=!!e&&ct.state.excludedWallets.some(s=>s.rdns===e),i=!!r.name&&ct.state.excludedWallets.some(s=>J5.isLowerCaseMatch(s.name,r.name));return!(r.type==="INJECTED"&&(!ot.isMobile()&&r.name==="Browser Wallet"||!e&&!Xt.checkInstalled()||t||i)||r.type==="ANNOUNCED"&&(t||i))},getIsConnectedWithWC(){return Array.from(X.state.chains.values()).some(t=>at.getConnectorId(t.namespace)===He.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:r,featured:e,custom:t,recent:i,announced:s,injected:n,multiChain:c,external:l,overriddenConnectors:u=Re.state.features?.connectorTypeOrder??[]}){const f=bf.getIsConnectedWithWC(),N=[{type:"walletConnect",isEnabled:Re.state.enableWalletConnect&&!f},{type:"recent",isEnabled:i.length>0},{type:"injected",isEnabled:[...n,...s,...c].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:t&&t.length>0},{type:"external",isEnabled:l.length>0},{type:"recommended",isEnabled:r.length>0}].filter(x=>x.isEnabled),A=new Set(N.map(x=>x.type)),_=u.filter(x=>A.has(x)).map(x=>({type:x,isEnabled:!0})),E=N.filter(({type:x})=>!_.some(({type:D})=>D===x));return Array.from(new Set([..._,...E].map(({type:x})=>x)))}};const Mf=globalThis,s1=Mf.ShadowRoot&&(Mf.ShadyCSS===void 0||Mf.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,a1=Symbol(),T_=new WeakMap;let X5=class{constructor(e,t,i){if(this._$cssResult$=!0,i!==a1)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(s1&&e===void 0){const i=t!==void 0&&t.length===1;i&&(e=T_.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&T_.set(t,e))}return e}toString(){return this.cssText}};const Sn=r=>new X5(typeof r=="string"?r:r+"",void 0,a1),dc=(r,...e)=>{const t=r.length===1?r[0]:e.reduce((i,s,n)=>i+(c=>{if(c._$cssResult$===!0)return c.cssText;if(typeof c=="number")return c;throw Error("Value passed to 'css' function must be a 'css' function result: "+c+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+r[n+1],r[0]);return new X5(t,r,a1)},Qle=(r,e)=>{if(s1)r.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const i=document.createElement("style"),s=Mf.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=t.cssText,r.appendChild(i)}},j_=s1?r=>r:r=>r instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return Sn(t)})(r):r;const{is:Vle,defineProperty:Fle,getOwnPropertyDescriptor:Hle,getOwnPropertyNames:Zle,getOwnPropertySymbols:Gle,getPrototypeOf:Kle}=Object,Ed=globalThis,C_=Ed.trustedTypes,Jle=C_?C_.emptyScript:"",Xle=Ed.reactiveElementPolyfillSupport,Bh=(r,e)=>r,Vm={toAttribute(r,e){switch(e){case Boolean:r=r?Jle:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,e){let t=r;switch(e){case Boolean:t=r!==null;break;case Number:t=r===null?null:Number(r);break;case Object:case Array:try{t=JSON.parse(r)}catch{t=null}}return t}},ej=(r,e)=>!Vle(r,e),O_={attribute:!0,type:String,converter:Vm,reflect:!1,useDefault:!1,hasChanged:ej};Symbol.metadata??=Symbol("metadata"),Ed.litPropertyMetadata??=new WeakMap;let sc=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=O_){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),s=this.getPropertyDescriptor(e,i,t);s!==void 0&&Fle(this.prototype,e,s)}}static getPropertyDescriptor(e,t,i){const{get:s,set:n}=Hle(this.prototype,e)??{get(){return this[t]},set(c){this[t]=c}};return{get:s,set(c){const l=s?.call(this);n?.call(this,c),this.requestUpdate(e,l,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??O_}static _$Ei(){if(this.hasOwnProperty(Bh("elementProperties")))return;const e=Kle(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Bh("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Bh("properties"))){const t=this.properties,i=[...Zle(t),...Gle(t)];for(const s of i)this.createProperty(s,t[s])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[i,s]of t)this.elementProperties.set(i,s)}this._$Eh=new Map;for(const[t,i]of this.elementProperties){const s=this._$Eu(t,i);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const s of i)t.unshift(j_(s))}else e!==void 0&&t.push(j_(e));return t}static _$Eu(e,t){const i=t.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Qle(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$ET(e,t){const i=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,i);if(s!==void 0&&i.reflect===!0){const n=(i.converter?.toAttribute!==void 0?i.converter:Vm).toAttribute(t,i.type);this._$Em=e,n==null?this.removeAttribute(s):this.setAttribute(s,n),this._$Em=null}}_$AK(e,t){const i=this.constructor,s=i._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const n=i.getPropertyOptions(s),c=typeof n.converter=="function"?{fromAttribute:n.converter}:n.converter?.fromAttribute!==void 0?n.converter:Vm;this._$Em=s;const l=c.fromAttribute(t,n.type);this[s]=l??this._$Ej?.get(s)??l,this._$Em=null}}requestUpdate(e,t,i,s=!1,n){if(e!==void 0){const c=this.constructor;if(s===!1&&(n=this[e]),i??=c.getPropertyOptions(e),!((i.hasChanged??ej)(n,t)||i.useDefault&&i.reflect&&n===this._$Ej?.get(e)&&!this.hasAttribute(c._$Eu(e,i))))return;this.C(e,t,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:i,reflect:s,wrapped:n},c){i&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,c??t??this[e]),n!==!0||c!==void 0)||(this._$AL.has(e)||(this.hasUpdated||i||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,n]of this._$Ep)this[s]=n;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,n]of i){const{wrapped:c}=n,l=this[s];c!==!0||this._$AL.has(s)||l===void 0||this.C(s,void 0,n,l)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(i=>i.hostUpdate?.()),this.update(t)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(e){}firstUpdated(e){}};sc.elementStyles=[],sc.shadowRootOptions={mode:"open"},sc[Bh("elementProperties")]=new Map,sc[Bh("finalized")]=new Map,Xle?.({ReactiveElement:sc}),(Ed.reactiveElementVersions??=[]).push("2.1.2");const o1=globalThis,L_=r=>r,Wf=o1.trustedTypes,z_=Wf?Wf.createPolicy("lit-html",{createHTML:r=>r}):void 0,tj="$lit$",ea=`lit$${Math.random().toFixed(9).slice(2)}$`,rj="?"+ea,eue=`<${rj}>`,ro=document,Nl=()=>ro.createComment(""),Il=r=>r===null||typeof r!="object"&&typeof r!="function",c1=Array.isArray,tue=r=>c1(r)||typeof r?.[Symbol.iterator]=="function",Mw=`[ 	
\f\r]`,Nh=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,k_=/-->/g,P_=/>/g,Ta=RegExp(`>|${Mw}(?:([^\\s"'>=/]+)(${Mw}*=${Mw}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),R_=/'/g,U_=/"/g,ij=/^(?:script|style|textarea|title)$/i,nj=r=>(e,...t)=>({_$litType$:r,strings:e,values:t}),Ude=nj(1),$de=nj(2),xc=Symbol.for("lit-noChange"),di=Symbol.for("lit-nothing"),$_=new WeakMap,qa=ro.createTreeWalker(ro,129);function sj(r,e){if(!c1(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return z_!==void 0?z_.createHTML(e):e}const rue=(r,e)=>{const t=r.length-1,i=[];let s,n=e===2?"<svg>":e===3?"<math>":"",c=Nh;for(let l=0;l<t;l++){const u=r[l];let f,g,m=-1,N=0;for(;N<u.length&&(c.lastIndex=N,g=c.exec(u),g!==null);)N=c.lastIndex,c===Nh?g[1]==="!--"?c=k_:g[1]!==void 0?c=P_:g[2]!==void 0?(ij.test(g[2])&&(s=RegExp("</"+g[2],"g")),c=Ta):g[3]!==void 0&&(c=Ta):c===Ta?g[0]===">"?(c=s??Nh,m=-1):g[1]===void 0?m=-2:(m=c.lastIndex-g[2].length,f=g[1],c=g[3]===void 0?Ta:g[3]==='"'?U_:R_):c===U_||c===R_?c=Ta:c===k_||c===P_?c=Nh:(c=Ta,s=void 0);const A=c===Ta&&r[l+1].startsWith("/>")?" ":"";n+=c===Nh?u+eue:m>=0?(i.push(f),u.slice(0,m)+tj+u.slice(m)+ea+A):u+ea+(m===-2?l:A)}return[sj(r,n+(r[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};class Al{constructor({strings:e,_$litType$:t},i){let s;this.parts=[];let n=0,c=0;const l=e.length-1,u=this.parts,[f,g]=rue(e,t);if(this.el=Al.createElement(f,i),qa.currentNode=this.el.content,t===2||t===3){const m=this.el.content.firstChild;m.replaceWith(...m.childNodes)}for(;(s=qa.nextNode())!==null&&u.length<l;){if(s.nodeType===1){if(s.hasAttributes())for(const m of s.getAttributeNames())if(m.endsWith(tj)){const N=g[c++],A=s.getAttribute(m).split(ea),_=/([.?@])?(.*)/.exec(N);u.push({type:1,index:n,name:_[2],strings:A,ctor:_[1]==="."?nue:_[1]==="?"?sue:_[1]==="@"?aue:Dd}),s.removeAttribute(m)}else m.startsWith(ea)&&(u.push({type:6,index:n}),s.removeAttribute(m));if(ij.test(s.tagName)){const m=s.textContent.split(ea),N=m.length-1;if(N>0){s.textContent=Wf?Wf.emptyScript:"";for(let A=0;A<N;A++)s.append(m[A],Nl()),qa.nextNode(),u.push({type:2,index:++n});s.append(m[N],Nl())}}}else if(s.nodeType===8)if(s.data===rj)u.push({type:2,index:n});else{let m=-1;for(;(m=s.data.indexOf(ea,m+1))!==-1;)u.push({type:7,index:n}),m+=ea.length-1}n++}}static createElement(e,t){const i=ro.createElement("template");return i.innerHTML=e,i}}function Tc(r,e,t=r,i){if(e===xc)return e;let s=i!==void 0?t._$Co?.[i]:t._$Cl;const n=Il(e)?void 0:e._$litDirective$;return s?.constructor!==n&&(s?._$AO?.(!1),n===void 0?s=void 0:(s=new n(r),s._$AT(r,t,i)),i!==void 0?(t._$Co??=[])[i]=s:t._$Cl=s),s!==void 0&&(e=Tc(r,s._$AS(r,e.values),s,i)),e}class iue{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,s=(e?.creationScope??ro).importNode(t,!0);qa.currentNode=s;let n=qa.nextNode(),c=0,l=0,u=i[0];for(;u!==void 0;){if(c===u.index){let f;u.type===2?f=new Zl(n,n.nextSibling,this,e):u.type===1?f=new u.ctor(n,u.name,u.strings,this,e):u.type===6&&(f=new oue(n,this,e)),this._$AV.push(f),u=i[++l]}c!==u?.index&&(n=qa.nextNode(),c++)}return qa.currentNode=ro,s}p(e){let t=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class Zl{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,i,s){this.type=2,this._$AH=di,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Tc(this,e,t),Il(e)?e===di||e==null||e===""?(this._$AH!==di&&this._$AR(),this._$AH=di):e!==this._$AH&&e!==xc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):tue(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==di&&Il(this._$AH)?this._$AA.nextSibling.data=e:this.T(ro.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:i}=e,s=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=Al.createElement(sj(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===s)this._$AH.p(t);else{const n=new iue(s,this),c=n.u(this.options);n.p(t),this.T(c),this._$AH=n}}_$AC(e){let t=$_.get(e.strings);return t===void 0&&$_.set(e.strings,t=new Al(e)),t}k(e){c1(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,s=0;for(const n of e)s===t.length?t.push(i=new Zl(this.O(Nl()),this.O(Nl()),this,this.options)):i=t[s],i._$AI(n),s++;s<t.length&&(this._$AR(i&&i._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){const i=L_(e).nextSibling;L_(e).remove(),e=i}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class Dd{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,s,n){this.type=1,this._$AH=di,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=n,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=di}_$AI(e,t=this,i,s){const n=this.strings;let c=!1;if(n===void 0)e=Tc(this,e,t,0),c=!Il(e)||e!==this._$AH&&e!==xc,c&&(this._$AH=e);else{const l=e;let u,f;for(e=n[0],u=0;u<n.length-1;u++)f=Tc(this,l[i+u],t,u),f===xc&&(f=this._$AH[u]),c||=!Il(f)||f!==this._$AH[u],f===di?e=di:e!==di&&(e+=(f??"")+n[u+1]),this._$AH[u]=f}c&&!s&&this.j(e)}j(e){e===di?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class nue extends Dd{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===di?void 0:e}}class sue extends Dd{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==di)}}class aue extends Dd{constructor(e,t,i,s,n){super(e,t,i,s,n),this.type=5}_$AI(e,t=this){if((e=Tc(this,e,t,0)??di)===xc)return;const i=this._$AH,s=e===di&&i!==di||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,n=e!==di&&(i===di||s);s&&this.element.removeEventListener(this.name,this,i),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class oue{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Tc(this,e)}}const cue=o1.litHtmlPolyfillSupport;cue?.(Al,Zl),(o1.litHtmlVersions??=[]).push("3.3.2");const hue=(r,e,t)=>{const i=t?.renderBefore??e;let s=i._$litPart$;if(s===void 0){const n=t?.renderBefore??null;i._$litPart$=s=new Zl(e.insertBefore(Nl(),n),n,void 0,t??{})}return s._$AI(r),s};const h1=globalThis;class Nf extends sc{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=hue(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return xc}}Nf._$litElement$=!0,Nf.finalized=!0,h1.litElementHydrateSupport?.({LitElement:Nf});const lue=h1.litElementPolyfillSupport;lue?.({LitElement:Nf});(h1.litElementVersions??=[]).push("4.2.2");let qh,ca,ha;function Bde(r,e){qh=document.createElement("style"),ca=document.createElement("style"),ha=document.createElement("style"),qh.textContent=pc(r).core.cssText,ca.textContent=pc(r).dark.cssText,ha.textContent=pc(r).light.cssText,document.head.appendChild(qh),document.head.appendChild(ca),document.head.appendChild(ha),aj(e)}function aj(r){ca&&ha&&(r==="light"?(ca.removeAttribute("media"),ha.media="enabled"):(ha.removeAttribute("media"),ca.media="enabled"))}function uue(r){qh&&ca&&ha&&(qh.textContent=pc(r).core.cssText,ca.textContent=pc(r).dark.cssText,ha.textContent=pc(r).light.cssText)}function pc(r){return{core:dc`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Sn(r?.["--w3m-color-mix-strength"]?`${r["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Sn(r?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Sn(r?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${Sn(r?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${Sn(r?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:dc`
      :root {
        --w3m-color-mix: ${Sn(r?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${Sn(ia(r,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Sn(ia(r,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:dc`
      :root {
        --w3m-color-mix: ${Sn(r?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${Sn(ia(r,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Sn(ia(r,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const qde=dc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,Yde=dc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Wde=dc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Gu={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};function Gl(r){return{formatters:void 0,fees:void 0,serializers:void 0,...r}}const Fm=Gl({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),Hm=Gl({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),fue=Gl({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Gl({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Gl({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const due={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},oj={getMethodsByChainNamespace(r){return due[r]||[]},createDefaultNamespace(r){return{methods:this.getMethodsByChainNamespace(r),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(r,e){if(!e)return{...r};const t={...r},i=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>i.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>i.add(s)),e.events&&Object.keys(e.events).forEach(s=>i.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[n]=s.split(":");n&&i.add(n)}),i.forEach(s=>{t[s]||(t[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,n])=>{t[s]&&(t[s].methods=n)}),e.chains&&Object.entries(e.chains).forEach(([s,n])=>{t[s]&&(t[s].chains=n)}),e.events&&Object.entries(e.events).forEach(([s,n])=>{t[s]&&(t[s].events=n)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([n,c])=>{const[l,u]=n.split(":");!l||!u||!t[l]||(t[l].rpcMap||(t[l].rpcMap={}),s.has(l)||(t[l].rpcMap={},s.add(l)),t[l].rpcMap[u]=c)})}return t},createNamespaces(r,e){const t=r.reduce((i,s)=>{const{id:n,chainNamespace:c,rpcUrls:l}=s,u=l.default.http[0];i[c]||(i[c]=this.createDefaultNamespace(c));const f=`${c}:${n}`,g=i[c];switch(g.chains.push(f),f){case Fm.caipNetworkId:g.chains.push(Fm.deprecatedCaipNetworkId);break;case Hm.caipNetworkId:g.chains.push(Hm.deprecatedCaipNetworkId);break}return g?.rpcMap&&u&&(g.rpcMap[n]=u),i},{});return this.applyNamespaceOverrides(t,e)},resolveReownName:async r=>{const e=await jT.resolveName(r);return(Object.values(e?.addresses)||[])[0]?.address||!1},getChainsFromNamespaces(r={}){return Object.values(r).flatMap(e=>{const t=e.chains||[],i=e.accounts.map(s=>{const[n,c]=s.split(":");return`${n}:${c}`});return Array.from(new Set([...t,...i]))})},isSessionEventData(r){return typeof r=="object"&&r!==null&&"id"in r&&"topic"in r&&"params"in r&&typeof r.params=="object"&&r.params!==null&&"chainId"in r.params&&"event"in r.params&&typeof r.params.event=="object"&&r.params.event!==null}};class cj{constructor({provider:e,caipNetworks:t,namespace:i}){this.id=He.CONNECTOR_ID.WALLET_CONNECT,this.name=qf.ConnectorNamesMap[He.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=qf.ConnectorImageIds[He.CONNECTOR_ID.WALLET_CONNECT],this.caipNetworks=t,this.provider=e,this.chain=i}get chains(){return this.caipNetworks}async connectWalletConnect(){if(!await this.authenticate()){const t=Re.state.universalProviderConfigOverride,i=oj.createNamespaces(this.caipNetworks,t);await this.provider.connect({optionalNamespaces:i})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(t=>t.caipNetworkId);return kh.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:pue})}}const pue=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class gue{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,e&&this.construct(e)}construct(e){this.caipNetworks=e.networks,this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.caipNetworks||[]}setAuthProvider(e){this.addConnector({id:He.CONNECTOR_ID.AUTH,type:"AUTH",name:He.CONNECTOR_NAMES.AUTH,provider:e,imageId:qf.ConnectorImageIds[He.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(i=>t.has(i.id)?!1:(t.add(i.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){Ze.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){const i=this.eventListeners.get(e);i&&i.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){const i=this.eventListeners.get(e);i&&i.forEach(s=>s(t))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:t,providerType:i}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(i==="WALLET_CONNECT"){s.setDefaultChain(t.caipNetworkId);return}if(s&&i==="AUTH"){const n=s;await n.switchNetwork(t.caipNetworkId);const c=await n.getUser({chainId:t.caipNetworkId,preferredAccountType:Re.state.defaultAccountTypes[t.chainNamespace]});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(t=>t instanceof cj);if(!e)throw new Error("WalletConnectConnector not found");return e}}class yue extends gue{setUniversalProvider(e){this.addConnector(new cj({provider:e,caipNetworks:this.caipNetworks||[],namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){const i=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,n]=s.split(":");return n}).filter((s,n,c)=>c.indexOf(s)===n)||[];return Promise.resolve({accounts:i.map(s=>ot.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&Ki.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(Ze.state.balanceLoading&&e.chainId===X.state.activeCaipNetwork?.id)return{balance:Ze.state.balance||"0.00",symbol:Ze.state.balanceSymbol||""};const s=(await Ze.fetchTokenBalance()).find(n=>n.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&n.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:s?.quantity.numeric||"0.00",symbol:s?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:t,message:i,address:s}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let n="";return X.state.activeCaipNetwork?.chainNamespace===He.CHAIN.SOLANA?n=(await t.request({method:"solana_signMessage",params:{message:WT.encode(new TextEncoder().encode(i)),pubkey:s}},X.state.activeCaipNetwork?.caipNetworkId)).signature:n=await t.request({method:"personal_sign",params:[i,s]},X.state.activeCaipNetwork?.caipNetworkId),{signature:n}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:t}=e,i=this.getWalletConnectConnector();if(t.chainNamespace===He.CHAIN.EVM)try{await i.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:Q3(t.id)}]})}catch(s){if(s.code===Gu.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===Gu.ERROR_INVALID_CHAIN_ID||s.code===Gu.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===Gu.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await i.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:Q3(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}i.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(i=>i.type==="WALLET_CONNECT")?.provider}}class wue{constructor(e){this.hasSwitchedToPreferredAccountTypeOnConnect=!1,this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=t=>{if(t){const i=X.getNetworkData(t)?.caipNetwork;return i||X.getRequestedCaipNetworks(t).filter(s=>s.chainNamespace===t)?.[0]}return X.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const t=this.getCaipNetwork();if(t)return t.id},this.getCaipNetworks=t=>X.getRequestedCaipNetworks(t),this.getActiveChainNamespace=()=>X.state.activeChain,this.setRequestedCaipNetworks=(t,i)=>{X.setRequestedCaipNetworks(t,i)},this.getApprovedCaipNetworkIds=()=>X.getAllApprovedCaipNetworkIds(),this.getCaipAddress=t=>X.state.activeChain===t||!t?X.state.activeCaipAddress:X.getAccountProp("caipAddress",t),this.setClientId=t=>{Xe.setClientId(t)},this.getProvider=t=>xr.getProvider(t),this.getProviderType=t=>xr.getProviderId(t),this.getPreferredAccountType=()=>Ze.state.preferredAccountType,this.setCaipAddress=(t,i)=>{Ze.setCaipAddress(t,i)},this.setBalance=(t,i,s)=>{Ze.setBalance(t,i,s)},this.setProfileName=(t,i)=>{Ze.setProfileName(t,i)},this.setProfileImage=(t,i)=>{Ze.setProfileImage(t,i)},this.setUser=(t,i)=>{Ze.setUser(t,i),Re.state.enableEmbedded&&Qr.close()},this.resetAccount=t=>{Ze.resetAccount(t)},this.setCaipNetwork=t=>{X.setActiveCaipNetwork(t)},this.setCaipNetworkOfNamespace=(t,i)=>{X.setChainNetworkData(i,{caipNetwork:t})},this.setAllAccounts=(t,i)=>{Ze.setAllAccounts(t,i),Re.setHasMultipleAddresses(t?.length>1)},this.setStatus=(t,i)=>{Ze.setStatus(t,i),at.isConnected()?Fe.setConnectionStatus("connected"):Fe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=t=>X.getAccountProp("address",t),this.setConnectors=t=>{const i=[...at.getConnectors(),...t];at.setConnectors(i)},this.fetchIdentity=t=>Xe.fetchIdentity(t),this.getReownName=t=>jT.getNamesForAddress(t),this.getConnectors=()=>at.getConnectors(),this.getConnectorImage=t=>vT.getConnectorImage(t),this.setConnectedWalletInfo=(t,i)=>{const s=xr.getProviderId(i),n=t?{...t,type:s}:void 0;Ze.setConnectedWalletInfo(n,i)},this.getIsConnectedState=()=>!!X.state.activeCaipAddress,this.addAddressLabel=(t,i,s)=>{Ze.addAddressLabel(t,i,s)},this.removeAddressLabel=(t,i)=>{Ze.removeAddressLabel(t,i)},this.getAddress=t=>X.state.activeChain===t||!t?Ze.state.address:X.getAccountProp("address",t),this.setApprovedCaipNetworksData=t=>X.setApprovedCaipNetworksData(t),this.resetNetwork=t=>{X.resetNetwork(t)},this.addConnector=t=>{at.addConnector(t)},this.resetWcConnection=()=>{Xt.resetWcConnection()},this.setAddressExplorerUrl=(t,i)=>{Ze.setAddressExplorerUrl(t,i)},this.setSmartAccountDeployed=(t,i)=>{Ze.setSmartAccountDeployed(t,i)},this.setSmartAccountEnabledNetworks=(t,i)=>{X.setSmartAccountEnabledNetworks(t,i)},this.setPreferredAccountType=(t,i)=>{Ze.setPreferredAccountType(t,i)},this.setEIP6963Enabled=t=>{Re.setEIP6963Enabled(t)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=[...new Set(this.caipNetworks?.map(t=>t.chainNamespace))],this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e),this.sendInitializeEvent(e)}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),await this.syncExistingConnection(),Os.set({initialized:!0})}sendInitializeEvent(e){const{...t}=e;delete t.adapters,er.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(i=>i.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Ri.setThemeMode(e.themeMode),e.themeVariables&&Ri.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");X.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const t=this.getDefaultNetwork();t&&X.setActiveCaipNetwork(t)}initializeConnectionController(e){Xt.setWcBasic(e.basic??!1)}initializeConnectorController(){at.initialize(this.chainNamespaces)}initializeOptionsController(e){Re.setDebug(e.debug!==!1),Re.setEnableWalletConnect(e.enableWalletConnect!==!1),Re.setEnableWalletGuide(e.enableWalletGuide!==!1),Re.setEnableWallets(e.enableWallets!==!1),Re.setEIP6963Enabled(e.enableEIP6963!==!1),Re.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),Re.setEnableAuthLogger(e.enableAuthLogger!==!1),Re.setCustomRpcUrls(e.customRpcUrls),Re.setSdkVersion(e.sdkVersion),Re.setProjectId(e.projectId),Re.setEnableEmbedded(e.enableEmbedded),Re.setAllWallets(e.allWallets),Re.setIncludeWalletIds(e.includeWalletIds),Re.setExcludeWalletIds(e.excludeWalletIds),Re.setFeaturedWalletIds(e.featuredWalletIds),Re.setTokens(e.tokens),Re.setTermsConditionsUrl(e.termsConditionsUrl),Re.setPrivacyPolicyUrl(e.privacyPolicyUrl),Re.setCustomWallets(e.customWallets),Re.setFeatures(e.features),Re.setAllowUnsupportedChain(e.allowUnsupportedChain),Re.setDefaultAccountTypes(e.defaultAccountTypes),Re.setUniversalProviderConfigOverride(e.universalProviderConfigOverride);const t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),Re.setMetadata(e.metadata),Re.setDisableAppend(e.disableAppend),Re.setEnableEmbedded(e.enableEmbedded),Re.setSIWX(e.siwx),!e.projectId){pf.open(Zu.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===He.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");Re.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return typeof window<"u"&&typeof document<"u"?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const i=nc.getUnsupportedNetwork(`${t}:${e}`);X.setActiveCaipNetwork(i)}}getDefaultNetwork(){return nc.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return nc.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return nc.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const t=e.networks.find(s=>s.id===e.defaultNetwork?.id);return t?nc.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=X.state.activeChain,t=this.getAdapter(e),i=this.getCaipNetwork(e)?.id;if(!t)throw new Error("Adapter not found");const s=await t.connectWalletConnect(i);this.close(),this.setClientId(s?.clientId||null),Fe.setConnectedNamespaces([...X.state.chains.keys()]),this.chainNamespaces.forEach(n=>{at.setConnectorId(Hs.CONNECTOR_TYPE_WALLET_CONNECT,n)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:i,provider:s,chain:n,caipNetwork:c})=>{const l=X.state.activeChain,u=n||l,f=this.getAdapter(u);if(n&&n!==l&&!c){const A=this.caipNetworks?.find(_=>_.chainNamespace===n);A&&this.setCaipNetwork(A)}if(!f)throw new Error("Adapter not found");const g=this.getCaipNetwork(u),m=await f.connect({id:e,info:t,type:i,provider:s,chainId:c?.id||g?.id,rpcUrl:c?.rpcUrls?.default?.http?.[0]||g?.rpcUrls?.default?.http?.[0]});if(!m)return;Fe.addConnectedNamespace(u),this.syncProvider({...m,chainNamespace:u}),await this.syncAccount({...m,chainNamespace:u});const{accounts:N}=await f.getAccounts({namespace:u,id:e});this.setAllAccounts(N,u)},reconnectExternal:async({id:e,info:t,type:i,provider:s})=>{const n=X.state.activeChain,c=this.getAdapter(n);c?.reconnect&&(await c?.reconnect({id:e,info:t,type:i,provider:s,chainId:this.getCaipNetwork()?.id}),Fe.addConnectedNamespace(n))},disconnect:async e=>{const t=e||X.state.activeChain,i=this.getAdapter(t),s=xr.getProvider(t),n=xr.getProviderId(t);await i?.disconnect({provider:s,providerType:n}),Fe.removeConnectedNamespace(t),xr.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.hasSwitchedToPreferredAccountTypeOnConnect=!1},checkInstalled:e=>e?e.some(t=>!!window.ethereum?.[String(t)]):!!window.ethereum,signMessage:async e=>(await this.getAdapter(X.state.activeChain)?.signMessage({message:e,address:Ze.state.address,provider:xr.getProvider(X.state.activeChain)}))?.signature||"",sendTransaction:async e=>{if(e.chainNamespace===He.CHAIN.EVM){const t=this.getAdapter(X.state.activeChain),i=xr.getProvider(X.state.activeChain);return(await t?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:i}))?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===He.CHAIN.EVM){const t=this.getAdapter(X.state.activeChain),i=xr.getProvider(X.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");return(await t?.estimateGas({...e,provider:i,caipNetwork:s}))?.gas||0n}return 0n},getEnsAvatar:async()=>(await this.getAdapter(X.state.activeChain)?.getProfile({address:Ze.state.address,chainId:Number(this.getCaipNetwork()?.id)}))?.profileImage||!1,getEnsAddress:async e=>{const t=this.getAdapter(X.state.activeChain),i=this.getCaipNetwork();return i&&(await t?.getEnsAddress({name:e,caipNetwork:i}))?.address||!1},writeContract:async e=>{const t=this.getAdapter(X.state.activeChain),i=this.getCaipNetwork(),s=this.getCaipAddress(),n=xr.getProvider(X.state.activeChain);if(!i||!s)throw new Error("CaipNetwork or CaipAddress is undefined");return(await t?.writeContract({...e,caipNetwork:i,provider:n,caipAddress:s}))?.hash},parseUnits:(e,t)=>this.getAdapter(X.state.activeChain)?.parseUnits({value:e,decimals:t})??0n,formatUnits:(e,t)=>this.getAdapter(X.state.activeChain)?.formatUnits({value:e,decimals:t})??"0",getCapabilities:async e=>await this.getAdapter(X.state.activeChain)?.getCapabilities(e),grantPermissions:async e=>await this.getAdapter(X.state.activeChain)?.grantPermissions(e),revokePermissions:async e=>{const t=this.getAdapter(X.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>await this.getAdapter(X.state.activeChain)?.walletGetAssets(e)??{}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Xt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(xr.getProviderId(X.state.activeChain)===Hs.CONNECTOR_TYPE_WALLET_CONNECT){const t=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(t)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=xr.getProvider(t),n=xr.getProviderId(t);if(e.chainNamespace===X.state.activeChain)await this.getAdapter(t)?.switchNetwork({caipNetwork:e,provider:s,providerType:n});else if(this.setCaipNetwork(e),n===Hs.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const c=this.getAddressByChainNamespace(t);c&&this.syncAccount({address:c,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(t=>{const i=t.chains||[],s=t.accounts.map(n=>{const{chainId:c,chainNamespace:l}=Ws.parseCaipAddress(n);return`${l}:${c}`});return Array.from(new Set([...i,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,i)=>{const s=e?.find(n=>n.namespace===i);return s?(t[i]=s,t[i].namespace=i,t[i].construct({namespace:i,projectId:this.options?.projectId,networks:this.caipNetworks})):t[i]=new yue({namespace:i,networks:this.caipNetworks}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const i=Fe.getConnectionStatus();i==="connected"?this.setStatus("connecting",e):i==="disconnected"?(Fe.clearAddressCache(),this.setStatus(i,e)):this.setStatus(i,e),t.on("switchNetwork",({address:s,chainId:n})=>{const c=this.caipNetworks?.find(f=>f.id===n||f.caipNetworkId===n),l=X.state.activeChain===e,u=X.getAccountProp("address",e);if(c){const f=l&&s?s:u;f&&this.syncAccount({address:f,chainId:n,chainNamespace:e})}else this.setUnsupportedNetwork(n)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("pendingTransactions",()=>{const s=Ze.state.address,n=X.state.activeCaipNetwork;!s||!n?.id||this.updateNativeBalance(s,n.id,n.chainNamespace)}),t.on("accountChanged",({address:s,chainId:n})=>{const c=X.state.activeChain===e;c&&n?this.syncAccount({address:s,chainId:n,chainNamespace:e}):c&&X.state.activeCaipNetwork?.id?this.syncAccount({address:s,chainId:X.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(s,n,e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const t=at.getConnectorId(e);switch(this.setStatus("connecting",e),t){case He.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case He.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){const t=this.getAdapter(e),i=at.getConnectorId(e),s=this.getCaipNetwork(e),n=at.getConnectors(e).find(c=>c.id===i);try{if(!t||!n)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!s?.id)throw new Error("CaipNetwork not found");const c=await t?.syncConnection({namespace:e,id:n.id,chainId:s.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]});if(c){const l=await t?.getAccounts({namespace:e,id:n.id});l&&l.accounts.length>0?this.setAllAccounts(l.accounts,e):this.setAllAccounts([ot.createAccount(e,c.address,"eoa")],e),this.syncProvider({...c,chainNamespace:e}),await this.syncAccount({...c,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async t=>{const i=this.getAdapter(t),s=this.universalProvider?.session?.namespaces?.[t]?.accounts||[],n=X.state.activeCaipNetwork?.id,c=s.find(l=>{const{chainId:u}=Ws.parseCaipAddress(l);return u===n?.toString()})||s[0];if(c){const l=Ws.validateCaipAddress(c),{chainId:u,address:f}=Ws.parseCaipAddress(l);if(xr.setProviderId(t,Hs.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&X.state.activeCaipNetwork&&i?.namespace!==He.CHAIN.EVM){const g=i?.getWalletConnectProvider({caipNetworks:this.caipNetworks,provider:this.universalProvider,activeCaipNetwork:X.state.activeCaipNetwork});xr.setProvider(t,g)}else xr.setProvider(t,this.universalProvider);at.setConnectorId(He.CONNECTOR_ID.WALLET_CONNECT,t),Fe.addConnectedNamespace(t),this.syncWalletConnectAccounts(t),await this.syncAccount({address:f,chainId:u,chainNamespace:t})}else this.setStatus("disconnected",t);await X.setApprovedCaipNetworksData(t)});await Promise.all(e)}syncWalletConnectAccounts(e){const t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(i=>{const{address:s}=Ws.parseCaipAddress(i);return s}).filter((i,s,n)=>n.indexOf(i)===s);t&&this.setAllAccounts(t.map(i=>ot.createAccount(e,i,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:i,chainNamespace:s}){xr.setProviderId(s,e),xr.setProvider(s,t),at.setConnectorId(i,s)}async syncAccount(e){const t=e.chainNamespace===X.state.activeChain,i=X.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:n,chainNamespace:c}=e,{chainId:l}=Fe.getActiveNetworkProps(),u=n||l,f=X.state.activeCaipNetwork?.name===He.UNSUPPORTED_NETWORK_NAME,g=X.getNetworkProp("supportsAllNetworks",c);if(this.setStatus("connected",c),!(f&&!g)&&u){let m=this.caipNetworks?.find(_=>_.id.toString()===u.toString()),N=this.caipNetworks?.find(_=>_.chainNamespace===c);if(!g&&!m&&!N){const _=this.getApprovedCaipNetworkIds()||[],E=_.find(S=>Ws.parseCaipNetworkId(S)?.chainId===u.toString()),x=_.find(S=>Ws.parseCaipNetworkId(S)?.chainNamespace===c);m=this.caipNetworks?.find(S=>S.caipNetworkId===E),N=this.caipNetworks?.find(S=>S.caipNetworkId===x||"deprecatedCaipNetworkId"in S&&S.deprecatedCaipNetworkId===x)}const A=m||N;A?.chainNamespace===X.state.activeChain?Re.state.enableNetworkSwitch&&!Re.state.allowUnsupportedChain&&X.state.activeCaipNetwork?.name===He.UNSUPPORTED_NETWORK_NAME?X.showUnsupportedChainUI():this.setCaipNetwork(A):t||i&&this.setCaipNetworkOfNamespace(i,c),this.syncConnectedWalletInfo(c),J5.isLowerCaseMatch(s,Ze.state.address)||this.syncAccountInfo(s,A?.id,c),t?await this.syncBalance({address:s,chainId:A?.id,chainNamespace:c}):await this.syncBalance({address:s,chainId:i?.id,chainNamespace:c})}}async syncAccountInfo(e,t,i){const s=this.getCaipAddress(i),n=t||s?.split(":")[1];if(!n)return;const c=`${i}:${n}:${e}`;this.setCaipAddress(c,i),await this.syncIdentity({address:e,chainId:n,chainNamespace:i})}async syncReownName(e,t){try{const i=await this.getReownName(e);if(i[0]){const s=i[0];this.setProfileName(s.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){const t=at.getConnectorId(e),i=xr.getProviderId(e);if(i===Hs.CONNECTOR_TYPE_ANNOUNCED||i===Hs.CONNECTOR_TYPE_INJECTED){if(t){const s=this.getConnectors().find(n=>n.id===t);if(s){const{info:n,name:c,imageUrl:l}=s,u=l||this.getConnectorImage(s);this.setConnectedWalletInfo({name:c,icon:u,...n},e)}}}else if(i===Hs.CONNECTOR_TYPE_WALLET_CONNECT){const s=xr.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(t)if(t===He.CONNECTOR_ID.COINBASE){const s=this.getConnectors().find(n=>n.id===He.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(s)},e)}else this.setConnectedWalletInfo({name:t},e)}async syncBalance(e){!yT.getNetworksByNamespace(this.caipNetworks,e.chainNamespace).find(i=>i.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,t,i){const s=this.getAdapter(i);if(s){const n=await s.getBalance({address:e,chainId:t,caipNetwork:this.getCaipNetwork(i),tokens:this.options.tokens});this.setBalance(n.balance,n.symbol,i)}}async initializeUniversalAdapter(){const e=Ble.createLogger((i,...s)=>{i&&this.handleAlertError(i),console.error(...s)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};Re.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await Ule.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Xt.setUri(e)}),this.universalProvider.on("connect",Xt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Xt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const t=this.caipNetworks?.find(s=>s.id==e),i=this.getCaipNetwork();if(!t){this.setUnsupportedNetwork(e);return}i?.id!==t?.id&&this.setCaipNetwork(t)}),this.universalProvider.on("session_event",e=>{if(oj.isSessionEventData(e)){const{name:t,data:i}=e.params.event;t==="accountsChanged"&&Array.isArray(i)&&ot.isCaipAddress(i[0])&&this.syncAccount(Ws.parseCaipAddress(i[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&ot.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){er.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const t=Object.entries(Zu.UniversalProviderErrors).find(([,{message:l}])=>e.message.includes(l)),[i,s]=t??[],{message:n,alertErrorKey:c}=s??{};if(i&&n&&!this.reportedAlertErrors[i]){const l=Zu.ALERT_ERRORS[c];l&&(pf.open(l,"error"),this.reportedAlertErrors[i]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const i=e;i.namespace=t,i.construct({namespace:t,projectId:this.options?.projectId,networks:this.caipNetworks}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=i)}async open(e){await this.injectModalUi(),e?.uri&&Xt.setUri(e.uri),await Qr.open(e)}async close(){await this.injectModalUi(),Qr.close()}setLoading(e,t){Qr.setLoading(e,t)}async disconnect(e){await Xt.disconnect(e)}getError(){return""}getChainId(){return X.state.activeCaipNetwork?.id}async switchNetwork(e){const t=this.caipNetworks?.find(i=>i.id===e.id);if(!t){pf.open(Zu.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await X.switchActiveNetwork(t)}getWalletProvider(){return X.state.activeChain?xr.state.providers[X.state.activeChain]:null}getWalletProviderType(){return xr.getProviderId(X.state.activeChain)}subscribeProviders(e){return xr.subscribeProviders(e)}getThemeMode(){return Ri.state.themeMode}getThemeVariables(){return Ri.state.themeVariables}setThemeMode(e){Ri.setThemeMode(e),aj(Ri.state.themeMode)}setTermsConditionsUrl(e){Re.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){Re.setPrivacyPolicyUrl(e)}setThemeVariables(e){Ri.setThemeVariables(e),uue(Ri.state.themeVariables)}subscribeTheme(e){return Ri.subscribe(e)}getWalletInfo(){return Ze.state.connectedWalletInfo}getAccount(e){const t=at.getAuthConnector(e),i=X.getAccountData(e);if(i)return{allAccounts:i.allAccounts,caipAddress:i.caipAddress,address:ot.getPlainAddress(i.caipAddress),isConnected:!!i.caipAddress,status:i.status,embeddedWalletInfo:t?{user:i.user,authProvider:i.socialProvider||"email",accountType:i.preferredAccountType,isSmartAccountDeployed:!!i.smartAccountDeployed}:void 0}}subscribeAccount(e,t){const i=()=>{const s=this.getAccount(t);s&&e(s)};t?X.subscribeChainProp("accountState",i,t):X.subscribe(i),at.subscribe(i)}subscribeNetwork(e){return X.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return Ze.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ze.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){X.subscribeKey("activeCaipNetwork",e)}getState(){return Os.state}subscribeState(e){return Os.subscribe(e)}showErrorMessage(e){Ii.showError(e)}showSuccessMessage(e){Ii.showSuccess(e)}getEvent(){return{...er.state}}subscribeEvents(e){return er.subscribe(e)}replace(e){Pt.replace(e)}redirect(e){Pt.push(e)}popTransactionStack(e){Pt.popTransactionStack(e)}isOpen(){return Qr.state.open}isTransactionStackEmpty(){return Pt.state.transactionStack.length===0}isTransactionShouldReplaceView(){return Pt.state.transactionStack[Pt.state.transactionStack.length-1]?.replace}static getInstance(){return this.instance}updateFeatures(e){Re.setFeatures(e)}updateOptions(e){const i={...Re.state||{},...e};Re.setOptions(i)}setConnectMethodsOrder(e){Re.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){Re.setWalletFeaturesOrder(e)}setCollapseWallets(e){Re.setCollapseWallets(e)}setSocialsOrder(e){Re.setSocialsOrder(e)}getConnectMethodsOrder(){return Qm.getConnectOrderMethod(Re.state.features,at.getConnectors())}removeAdapter(e){const t=this.getIsConnectedState(),i=this.getAdapter(e);if(!i||!this.chainAdapters||t)return;const s=this.caipNetworks?.filter(n=>n.chainNamespace!==e);X.removeAdapter(e),at.removeAdapter(e),this.chainNamespaces=this.chainNamespaces.filter(n=>n!==e),this.caipNetworks=s,i.removeAllEventListeners(),Reflect.deleteProperty(this.chainAdapters,e)}addAdapter(e,t){const i=e.namespace;if(!this.connectionControllerClient||!this.networkControllerClient||!this.chainAdapters||!i)return;const s=this.extendCaipNetworks({...this.options,networks:t});this.caipNetworks=[...this.caipNetworks||[],...s],this.createAdapter(e),this.initChainAdapter(i),X.addAdapter(e,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient},s)}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const i=this.extendCaipNetwork(t,this.options);X.addNetwork(i),this.caipNetworks&&!this.caipNetworks?.find(s=>s.id===i.id)&&this.caipNetworks.push(i)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);if(!this.caipNetworks?.find(n=>n.id===t))throw new Error(`Network with ID ${t} not found`);if(!this.caipNetworks)return;const s=this.caipNetworks.filter(n=>n.chainNamespace===e&&n.id!==t);if(!s?.length)throw new Error("Cannot remove last network for a namespace");X.removeNetwork(e,t),this.caipNetworks=[...s]}}let B_=!1;class mue extends wue{async open(e){at.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&Xt.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!B_&&ot.isClient()){if(await pn(()=>import("./basic-Bam4u1Xq.js"),__vite__mapDeps([20,21,2,3,22,1,4,11,7])),await pn(()=>import("./w3m-modal-DjysK44w.js"),__vite__mapDeps([23,21,2,3,1,4,11,7])),!document.querySelector("w3m-modal")){const t=document.createElement("w3m-modal");!Re.state.disableAppend&&!Re.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",t)}B_=!0}}}const vue="1.7.2";function bue(r){return new mue({...r,basic:!0,sdkVersion:`html-core-${vue}`})}function Mue(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let f=0;f<e.length;f++)e[f]=255;for(let f=0;f<r.length;f++){const g=r.charAt(f),m=g.charCodeAt(0);if(e[m]!==255)throw new TypeError(g+" is ambiguous");e[m]=f}const t=r.length,i=r.charAt(0),s=Math.log(t)/Math.log(256),n=Math.log(256)/Math.log(t);function c(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";let g=0,m=0,N=0;const A=f.length;for(;N!==A&&f[N]===0;)N++,g++;const _=(A-N)*n+1>>>0,E=new Uint8Array(_);for(;N!==A;){let D=f[N],C=0;for(let j=_-1;(D!==0||C<m)&&j!==-1;j--,C++)D+=256*E[j]>>>0,E[j]=D%t>>>0,D=D/t>>>0;if(D!==0)throw new Error("Non-zero carry");m=C,N++}let x=_-m;for(;x!==_&&E[x]===0;)x++;let S=i.repeat(g);for(;x<_;++x)S+=r.charAt(E[x]);return S}function l(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;let g=0,m=0,N=0;for(;f[g]===i;)m++,g++;const A=(f.length-g)*s+1>>>0,_=new Uint8Array(A);for(;g<f.length;){const D=f.charCodeAt(g);if(D>255)return;let C=e[D];if(C===255)return;let j=0;for(let k=A-1;(C!==0||j<N)&&k!==-1;k--,j++)C+=t*_[k]>>>0,_[k]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");N=j,g++}let E=A-N;for(;E!==A&&_[E]===0;)E++;const x=new Uint8Array(m+(A-E));let S=m;for(;E!==A;)x[S++]=_[E++];return x}function u(f){const g=l(f);if(g)return g;throw new Error("Non-base"+t+" character")}return{encode:c,decodeUnsafe:l,decode:u}}var Nue="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Nw=Mue(Nue);class hc extends Error{constructor(){super(),Object.setPrototypeOf(this,hc.prototype)}}class q_ extends Error{constructor(e){super(`WalletConnect Adapter - Method ${e} is not supported by the wallet`),this.name="WalletConnectFeatureNotSupportedError"}}function Iue(r){let e=[r];return r===ei.Mainnet||r===ei.Deprecated_Mainnet?(e=[ei.Mainnet,ei.Deprecated_Mainnet],r===ei.Deprecated_Mainnet&&console.warn(Qf.mainnet)):(r===ei.Deprecated_Devnet||r===ei.Devnet)&&(e=[ei.Devnet,ei.Deprecated_Devnet],console.warn(Qf.devnet)),e}const Qf={mainnet:`You are using a deprecated chain ID for Solana Mainnet, please use ${ei.Mainnet} instead.`,devnet:`You are using a deprecated chain ID for Solana Devnet, please use ${ei.Devnet} instead.`,wallet:"The connected wallet is using a deprecated chain ID for Solana. Please, contact them to upgrade. You can learn more at https://github.com/ChainAgnostic/namespaces/blob/main/solana/caip10.md#chain-ids"};function Y_(r,e){const t=r.namespaces.solana?.accounts.map(i=>`solana:${i.split(":")[1]}`);if(e===ei.Mainnet)return t?.find(i=>i===ei.Mainnet)?ei.Mainnet:(console.warn(Qf.wallet),ei.Deprecated_Mainnet);if(e===ei.Devnet)return t?.find(i=>i===ei.Devnet)?ei.Devnet:(console.warn(Qf.wallet),ei.Deprecated_Devnet);throw Error("WalletConnect Solana Adapter: Unable to get a default chain from the session.")}function Aue(r){return{optionalNamespaces:{solana:{chains:Iue(r),methods:[jn.signTransaction,jn.signMessage],events:[]}}}}class l1 extends Error{constructor(){super("QR Code Modal was closed by user"),Object.setPrototypeOf(this,l1.prototype),this.name="QRCodeModalError"}}class _ue{_UniversalProvider;_session;_modal;_projectId;_network;_ConnectQueueResolver;constructor(e){if(this.initClient(e.options),this._network=e.network,!e.options.projectId)throw Error("WalletConnect Adapter: Project ID is undefined");this._projectId=e.options.projectId}async connect(){if(this._UniversalProvider||await new Promise(s=>{this._ConnectQueueResolver=s}),!this._UniversalProvider)throw new Error("WalletConnect Adapter - Universal Provider was undefined while calling 'connect()'");if(this._UniversalProvider.session){this._session=this._UniversalProvider.session;const s=Y_(this._session,this._network);return this._network=s,this._UniversalProvider.setDefaultChain(s),{publicKey:this.publicKey}}await this.initModal();const e=Aue(this._network);this._modal?.open();const t=new AbortController,i=t.signal;this._modal?.subscribeState(s=>{s.open||t.abort(new l1)});try{const s=await Promise.race([this._UniversalProvider?.connect(e),new Promise((c,l)=>{i.addEventListener("abort",()=>{l(i.reason)})})]);if(this._modal?.close(),this._session=s,!s)throw new Tr;const n=Y_(s,this._network);return this._network=n,this._UniversalProvider?.setDefaultChain(n),{publicKey:this.publicKey}}catch(s){throw this._modal?.close(),s}}async disconnect(){if(this._UniversalProvider?.session){if(await this.initModal(),!this._modal)throw Error("WalletConnect Adapter -Modal is undefined: unable to disconnect");await this.client.disconnect(),this._session=void 0}else throw new hc}get client(){if(this._UniversalProvider)return this._UniversalProvider;throw new hc}get session(){if(!this._session)throw new hc;return this._session}get publicKey(){if(this._UniversalProvider?.session&&this._session){const{address:e}=MU(this._session?.namespaces.solana?.accounts[0]??"");return new ht(e)}throw new hc}async signTransaction(e){this.checkIfWalletSupportsMethod(jn.signTransaction);const t=Gn(e),i=t?{}:e,{signature:s,transaction:n}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:jn.signTransaction,params:{...i,transaction:this.serialize(e)}}});return n?this.deserialize(n,t):(e.addSignature(this.publicKey,We.from(Nw.decode(s))),e)}async signMessage(e){this.checkIfWalletSupportsMethod(jn.signMessage);const{signature:t}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:jn.signMessage,params:{pubkey:this.publicKey.toString(),message:Nw.encode(e)}}});return Nw.decode(t)}async signAndSendTransaction(e){this.checkIfWalletSupportsMethod(jn.signAndSendTransaction);const{signature:t}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:jn.signAndSendTransaction,params:{transaction:this.serialize(e)}}});return t}async signAllTransactions(e){try{this.checkIfWalletSupportsMethod(jn.signAllTransactions);const t=e.map(s=>this.serialize(s)),{transactions:i}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:jn.signAllTransactions,params:{transactions:t}}});return e.map((s,n)=>Gn(s)?this.deserialize(i[n]??"",!0):this.deserialize(i[n]??""))}catch(t){if(t instanceof q_){const i=e.map(n=>this.signTransaction(n));return await Promise.all(i)}throw t}}async initClient(e){const t=await BX.init(e);this._UniversalProvider=t,this._ConnectQueueResolver&&this._ConnectQueueResolver(!0)}async initModal(){if(!this._modal){if(!this._UniversalProvider)throw new Error("WalletConnect Adapter - cannot init modal when Universal Provider is undefined");this._modal=bue({projectId:this._projectId,universalProvider:this._UniversalProvider,networks:[Fm,Hm,fue],manualWCControl:!0})}}serialize(e){return We.from(e.serialize({verifySignatures:!1})).toString("base64")}deserialize(e,t=!1){return t?Lj.deserialize(We.from(e,"base64")):zj.from(We.from(e,"base64"))}checkIfWalletSupportsMethod(e){if(!this.session.namespaces.solana?.methods.includes(e))throw new q_(e)}}const hj="WalletConnect";class Eue extends la{name=hj;url="https://walletconnect.org";icon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+";supportedTransactionVersions=new Set(["legacy",0]);_publicKey;_connecting;_wallet;_config;_readyState;_onDisconnect;constructor(e){super(),this._publicKey=null,this._connecting=!1,this._config=e,this._wallet=null,this._readyState=typeof window>"u"?ie.Unsupported:ie.Loadable,this._onDisconnect=this.disconnect.bind(this)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Loadable)throw new yt;this._connecting=!0,this._wallet=new _ue({network:this._config.network===If.Mainnet?Af.Mainnet:Af.Devnet,options:this._config.options});const{publicKey:e}=await this._wallet.connect();this._publicKey=e,this.emit("connect",e),this._wallet.client.on("session_delete",this._onDisconnect)}catch(e){throw e.constructor.name==="QRCodeModalError"||e instanceof Error&&e.name==="QRCodeModalError"?new Fj:(this._connecting=!1,e)}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.client.off("session_delete",this._onDisconnect),this._publicKey=null;try{e.client.session&&await e.disconnect()}catch(t){console.error("WalletConnectWalletAdapter: disconnect error",t),this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signMessage(e)}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAndSendTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAndSendTransaction(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const lj="XDEFI";class Due extends Ht{constructor(e={}){super(),this.name=lj,this.url="https://xdefi.io",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE0LjI2MjggMTMuNDAxM0MxMi40MjI4IDE0LjUzMDcgOS45NTk5NyAxNS4xMTI0IDcuNDY1NjkgMTQuOTg4MUM1LjM2ODU1IDE0Ljg4NjUgMy42NDg1NSAxNC4xNDExIDIuNjA4NTUgMTIuOTE1N0MxLjY5NDI2IDExLjgyMDEgMS4zMzk5OCAxMC4zNzQ1IDEuNTc5OTggOC43MTE0M0MxLjY2MTMyIDguMTU4NzQgMS44MjgwMiA3LjYyMTY2IDIuMDc0MjYgNy4xMTg5NkwyLjEwODU1IDcuMDQ4MzdDMi45NzE4IDUuNDA1OTUgNC4yNTI5MyA0LjAxMzk3IDUuODI1ODQgMy4wMDk0MkM3LjM5ODc1IDIuMDA0ODYgOS4yMDkyNCAxLjQyMjM2IDExLjA3OTEgMS4zMTkyNEMxMi45NDkgMS4yMTYxMSAxNC44MTM4IDEuNTk1OTIgMTYuNDkwMSAyLjQyMTI4QzE4LjE2NjMgMy4yNDY2NSAxOS41OTYyIDQuNDg5MTIgMjAuNjM5IDYuMDI2NDFDMjEuNjgxOSA3LjU2MzcxIDIyLjMwMTcgOS4zNDI4NSAyMi40Mzc0IDExLjE4ODdDMjIuNTczMiAxMy4wMzQ2IDIyLjIyMDMgMTQuODgzNiAyMS40MTM0IDE2LjU1MzhDMjAuNjA2NSAxOC4yMjQgMTkuMzczNSAxOS42NTc3IDE3LjgzNTYgMjAuNzE0QzE2LjI5NzggMjEuNzcwMiAxNC41MDgxIDIyLjQxMjYgMTIuNjQyOCAyMi41Nzc4TDEyLjc1NzEgMjMuODczOEMxNC44NTE0IDIzLjY4OTQgMTYuODYxIDIyLjk2OTEgMTguNTg3OCAyMS43ODM3QzIwLjMxNDcgMjAuNTk4NCAyMS42OTkzIDE4Ljk4ODkgMjIuNjA1MiAxNy4xMTM4QzIzLjUxMTEgMTUuMjM4NyAyMy45MDcxIDEzLjE2MjcgMjMuNzU0MiAxMS4wOTA0QzIzLjYwMTIgOS4wMTgwOCAyMi45MDQ2IDcuMDIwODggMjEuNzMyOSA1LjI5NTU1QzIwLjU2MTMgMy41NzAyMiAxOC45NTUgMi4xNzYzIDE3LjA3MjQgMS4yNTExMUMxNS4xODk4IDAuMzI1OTA5IDEzLjA5NTcgLTAuMDk4NjQxMSAxMC45OTY1IDAuMDE5Mjc4N0M4Ljg5NzMzIDAuMTM3MTk4IDYuODY1NDQgMC43OTM1MiA1LjEwMTAyIDEuOTIzNTlDMy4zMzY2IDMuMDUzNjUgMS45MDA1MyA0LjYxODQ4IDAuOTM0MjY0IDYuNDYzOUwwLjg4ODU0OCA2LjU1NzA3QzAuNTgzMDgzIDcuMTgwOSAwLjM3Njg0NyA3Ljg0NzU2IDAuMjc3MTIgOC41MzM1NEMtMC4wMDg1OTQ1IDEwLjU2MDggMC40MzQyNiAxMi4zNjUxIDEuNTkxNCAxMy43NTQyQzIuODU3MTIgMTUuMjczMyA0LjkxNzEyIDE2LjE3NjggNy4zODg1NSAxNi4yOTU0QzEwLjM5NzEgMTYuNDQ1MSAxMy4zODg1IDE1LjYzNDcgMTUuNTExNCAxNC4xNDM5TDE0LjI2MjggMTMuNDAxM1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNi43OCAxNC44NzUxQzE1LjU4MjkgMTUuOTAyOSAxMi44IDE3Ljc2NjQgOC4xODI4NiAxOC4wMjA1QzMuMDE0MjkgMTguMzAyOSAwLjg2MDAwMSAxNi42NDI3IDAuODQwMDAxIDE2LjYyNTdMMC40MjI4NTYgMTcuMTMzOUwwLjg0Mjg1NiAxNi42MzQyTDAgMTcuNjMzN0MwLjA5MTQyODYgMTcuNzA5OSAyLjE1NzE0IDE5LjM1ODkgNy4wMDg1NyAxOS4zNTg5QzcuNDA1NzEgMTkuMzU4OSA3LjgyMjg2IDE5LjM1ODkgOC4yNTcxNCAxOS4zMjVDMTMuODM3MSAxOS4wMTcyIDE2LjkwMjkgMTYuNjExNiAxNy45NzE0IDE1LjU4MzhMMTYuNzggMTQuODc1MVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xOS4wMiAxNi4yMTkyQzE4LjMxMjEgMTcuMTM4NyAxNy40NDA4IDE3LjkyMzMgMTYuNDQ4NiAxOC41MzQ1QzEyLjk1MTUgMjAuNzY1IDguNTAyODkgMjEuMDUzIDUuMzg4NiAyMC44OTc4TDUuMzIyODkgMjIuMTk5NEM1Ljg0NTc1IDIyLjIyNDggNi4zNDg2MSAyMi4yMzYxIDYuODM3MTggMjIuMjM2MUMxNS42MiAyMi4yMzYxIDE5LjE2ODYgMTguMjgzMiAyMC4xNiAxNi44NzE0TDE5LjAxNzIgMTYuMjA3OSIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE4LjY4NTcgMTEuMjkyMkMxOS4yNjggMTEuMjkyMiAxOS43NCAxMC44MjU3IDE5Ljc0IDEwLjI1MDNDMTkuNzQgOS42NzQ4OSAxOS4yNjggOS4yMDg0MiAxOC42ODU3IDkuMjA4NDJDMTguMTAzNCA5LjIwODQyIDE3LjYzMTQgOS42NzQ4OSAxNy42MzE0IDEwLjI1MDNDMTcuNjMxNCAxMC44MjU3IDE4LjEwMzQgMTEuMjkyMiAxOC42ODU3IDExLjI5MjJaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?ie.Unsupported:ie.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new $r),this.emit("disconnect"))},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==ie.Unsupported&&Wt(()=>window.xfi?.solana?.isXDEFI?(this._readyState=ie.Installed,this.emit("readyStateChange",this._readyState),!0):!1)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isConnected}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==ie.Installed)throw new yt;this._connecting=!0;const e=window.xfi.solana;if(!e.isConnected)try{await e.connect()}catch(i){throw new Tr(i?.message,i)}if(!e.publicKey)throw new Et;let t;try{t=new ht(e.publicKey.toBytes())}catch(i){throw new ut(i?.message,i)}e.on("disconnect",this._disconnected),this._wallet=e,this._publicKey=t,this.emit("connect",t)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new Mr(t?.message,t))}}this.emit("disconnect")}async signTransaction(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signTransaction(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new Le;try{return await t.signAllTransactions(e)||e}catch(i){throw new Ye(i?.message,i)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new Le;try{const{signature:i}=await t.signMessage(e);return i}catch(i){throw new Ar(i?.message,i)}}catch(t){throw this.emit("error",t),t}}}const Qde=Object.freeze(Object.defineProperty({__proto__:null,AlphaWalletAdapter:Jj,AlphaWalletName:W_,AvanaWalletAdapter:Xj,AvanaWalletName:Q_,BitKeepWalletAdapter:tC,BitKeepWalletName:eC,BitgetWalletAdapter:V_,BitgetWalletName:Km,BitpieWalletAdapter:rC,BitpieWalletName:F_,CloverWalletAdapter:iC,CloverWalletName:H_,Coin98WalletAdapter:aC,Coin98WalletName:Z_,CoinbaseWalletAdapter:oC,CoinbaseWalletName:G_,CoinhubWalletAdapter:cC,CoinhubWalletName:K_,FractalWalletAdapter:hC,FractalWalletName:J_,HuobiWalletAdapter:lC,HuobiWalletName:X_,HyperPayWalletAdapter:uC,HyperPayWalletName:eE,KeystoneWalletAdapter:fC,KeystoneWalletName:tE,KrystalWalletAdapter:dC,KrystalWalletName:rE,LedgerWalletAdapter:xC,LedgerWalletName:cE,MathWalletAdapter:TC,MathWalletName:hE,NekoWalletAdapter:jC,NekoWalletName:lE,NightlyWalletAdapter:CC,NightlyWalletName:uE,NufiWalletAdapter:OC,NufiWalletName:fE,OntoWalletAdapter:LC,OntoWalletName:dE,ParticleAdapter:zC,ParticleName:pE,PhantomWalletAdapter:kC,PhantomWalletName:gE,SafePalWalletAdapter:PC,SafePalWalletName:yE,SaifuWalletAdapter:RC,SaifuWalletName:wE,SalmonWalletAdapter:UC,SalmonWalletName:mE,SkyWalletAdapter:$C,SkyWalletName:vE,SolflareWalletAdapter:VC,SolflareWalletName:NE,SolongWalletAdapter:FC,SolongWalletName:IE,SpotWalletAdapter:HC,SpotWalletName:AE,TokenPocketWalletAdapter:GC,TokenPocketWalletName:EE,TokenaryWalletAdapter:ZC,TokenaryWalletName:_E,TorusWalletAdapter:KC,TorusWalletName:DE,TrezorWalletAdapter:JC,TrezorWalletName:SE,TrustWalletAdapter:XC,TrustWalletName:xE,UnsafeBurnerWalletAdapter:e6,UnsafeBurnerWalletName:TE,WalletConnectWalletAdapter:Eue,WalletConnectWalletName:hj,XDEFIWalletAdapter:Due,XDEFIWalletName:lj,getDerivationPath:aE},Symbol.toStringTag,{value:"Module"}));export{jr as $,ct as A,ot as B,jc as C,Oue as D,er as E,bf as F,vT as G,Xt as H,Fe as I,He as J,Zn as K,Ju as L,Ri as M,Ii as N,Re as O,Qr as P,Ki as Q,Pt as R,jh as S,yC as T,$de as U,X as V,Qm as W,di as X,Wde as Y,mn as Z,Bi as _,mv as a,pf as a0,Wle as a1,kh as a2,Ze as a3,Bde as a4,ej as a5,Vm as a6,xc as a7,wk as a8,yfe as a9,vb as aa,ID as ab,ok as ac,mk as ad,wfe as ae,gfe as af,Xf as ag,bfe as ah,mfe as ai,kte as aj,Sde as ak,eA as al,UT as am,Ete as an,Pte as ao,xde as ap,Dde as aq,Md as ar,jde as as,Tde as at,Qde as au,Uc as b,kD as c,Rc as d,PD as e,uP as f,YD as g,cP as h,oP as i,fa as j,_l as k,zue as l,Lue as m,kue as n,Cue as o,rU as p,ii as q,jl as r,Va as s,CR as t,dc as u,Yde as v,qde as w,Nf as x,Ude as y,at as z};
