import{C as Vr,P as Sr,V as Hr,T as rn,a as on}from"./index.browser.esm-DoJvUpVg.js";import{r as N,R as Rn,u as Gr,W as Yr}from"./index-CB5bOWEU.js";import{W as Wn,a as G,b as Ar,c as yt,d as Xe,e as Mr,f as an,g as ce,h as sn,B as Jr,i as Qr,j as Zr,k as Ue,l as xe,m as Pn}from"./adapter-DStSkdP5.js";import{r as Xr}from"./dijkstra-COg3n3zL.js";import{S as In,a as Nn,b as $,c as x,d as bt,e as $r,f as ei,g as ti,h as ni,i as me,j as ln,B as ri,k as Ke}from"./signIn-DmV4RaXv.js";import{b as cn}from"./index-8G3kzy2I.js";import"./index-dlOhDcmq.js";import"./index-Do4OYDqa.js";const Tr=N.createContext({});function ii(){return N.useContext(Tr)}const ba=({children:r,endpoint:n,config:e={commitment:"confirmed"}})=>{const t=N.useMemo(()=>new Vr(n,e),[n,e]);return Rn.createElement(Tr.Provider,{value:{connection:t}},r)},Ce="solana:signIn";function oi(r){return In in r.features&&Nn in r.features&&($ in r.features||x in r.features)}class Dn extends Wn{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}function Ea(){const{publicKey:r,signTransaction:n,signAllTransactions:e}=Gr();return N.useMemo(()=>r&&n&&e?{publicKey:r,signTransaction:n,signAllTransactions:e}:void 0,[r,n,e])}function ai(r,n){const e=N.useState(()=>{try{const o=localStorage.getItem(r);if(o)return JSON.parse(o)}catch(o){typeof window<"u"&&console.error(o)}return n}),t=e[0],i=N.useRef(!0);return N.useEffect(()=>{if(i.current){i.current=!1;return}try{t===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(t))}catch(o){typeof window<"u"&&console.error(o)}},[t,r]),e}var Ne={},Rt,Un;function si(){return Un||(Un=1,Rt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Rt}var Wt={},fe={},kn;function Re(){if(kn)return fe;kn=1;let r;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return fe.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17},fe.getSymbolTotalCodewords=function(t){return n[t]},fe.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t},fe.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');r=t},fe.isKanjiModeEnabled=function(){return typeof r<"u"},fe.toSJIS=function(t){return r(t)},fe}var It={},zn;function Ln(){return zn||(zn=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function n(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}r.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4},r.from=function(t,i){if(r.isValid(t))return t;try{return n(t)}catch{return i}}})(It)),It}var Nt,Fn;function li(){if(Fn)return Nt;Fn=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}},Nt=r,Nt}var Lt,jn;function ci(){if(jn)return Lt;jn=1;function r(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}return r.prototype.set=function(n,e,t,i){const o=n*this.size+e;this.data[o]=t,i&&(this.reservedBit[o]=!0)},r.prototype.get=function(n,e){return this.data[n*this.size+e]},r.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t},r.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]},Lt=r,Lt}var Bt={},xn;function di(){return xn||(xn=1,(function(r){const n=Re().getSymbolSize;r.getRowColCoords=function(t){if(t===1)return[];const i=Math.floor(t/7)+2,o=n(t),a=o===145?26:Math.ceil((o-13)/(2*i-2))*2,s=[o-7];for(let l=1;l<i-1;l++)s[l]=s[l-1]-a;return s.push(6),s.reverse()},r.getPositions=function(t){const i=[],o=r.getRowColCoords(t),a=o.length;for(let s=0;s<a;s++)for(let l=0;l<a;l++)s===0&&l===0||s===0&&l===a-1||s===a-1&&l===0||i.push([o[s],o[l]]);return i}})(Bt)),Bt}var Ot={},Kn;function ui(){if(Kn)return Ot;Kn=1;const r=Re().getSymbolSize,n=7;return Ot.getPositions=function(t){const i=r(t);return[[0,0],[i-n,0],[0,i-n]]},Ot}var Pt={},qn;function fi(){return qn||(qn=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};r.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},r.from=function(i){return r.isValid(i)?parseInt(i,10):void 0},r.getPenaltyN1=function(i){const o=i.size;let a=0,s=0,l=0,c=null,d=null;for(let f=0;f<o;f++){s=l=0,c=d=null;for(let h=0;h<o;h++){let g=i.get(f,h);g===c?s++:(s>=5&&(a+=n.N1+(s-5)),c=g,s=1),g=i.get(h,f),g===d?l++:(l>=5&&(a+=n.N1+(l-5)),d=g,l=1)}s>=5&&(a+=n.N1+(s-5)),l>=5&&(a+=n.N1+(l-5))}return a},r.getPenaltyN2=function(i){const o=i.size;let a=0;for(let s=0;s<o-1;s++)for(let l=0;l<o-1;l++){const c=i.get(s,l)+i.get(s,l+1)+i.get(s+1,l)+i.get(s+1,l+1);(c===4||c===0)&&a++}return a*n.N2},r.getPenaltyN3=function(i){const o=i.size;let a=0,s=0,l=0;for(let c=0;c<o;c++){s=l=0;for(let d=0;d<o;d++)s=s<<1&2047|i.get(c,d),d>=10&&(s===1488||s===93)&&a++,l=l<<1&2047|i.get(d,c),d>=10&&(l===1488||l===93)&&a++}return a*n.N3},r.getPenaltyN4=function(i){let o=0;const a=i.data.length;for(let l=0;l<a;l++)o+=i.data[l];return Math.abs(Math.ceil(o*100/a/5)-10)*n.N4};function e(t,i,o){switch(t){case r.Patterns.PATTERN000:return(i+o)%2===0;case r.Patterns.PATTERN001:return i%2===0;case r.Patterns.PATTERN010:return o%3===0;case r.Patterns.PATTERN011:return(i+o)%3===0;case r.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case r.Patterns.PATTERN101:return i*o%2+i*o%3===0;case r.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case r.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}r.applyMask=function(i,o){const a=o.size;for(let s=0;s<a;s++)for(let l=0;l<a;l++)o.isReserved(l,s)||o.xor(l,s,e(i,l,s))},r.getBestMask=function(i,o){const a=Object.keys(r.Patterns).length;let s=0,l=1/0;for(let c=0;c<a;c++){o(c),r.applyMask(c,i);const d=r.getPenaltyN1(i)+r.getPenaltyN2(i)+r.getPenaltyN3(i)+r.getPenaltyN4(i);r.applyMask(c,i),d<l&&(l=d,s=c)}return s}})(Pt)),Pt}var et={},Vn;function Cr(){if(Vn)return et;Vn=1;const r=Ln(),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return et.getBlocksCount=function(i,o){switch(o){case r.L:return n[(i-1)*4+0];case r.M:return n[(i-1)*4+1];case r.Q:return n[(i-1)*4+2];case r.H:return n[(i-1)*4+3];default:return}},et.getTotalCodewordsCount=function(i,o){switch(o){case r.L:return e[(i-1)*4+0];case r.M:return e[(i-1)*4+1];case r.Q:return e[(i-1)*4+2];case r.H:return e[(i-1)*4+3];default:return}},et}var Dt={},Fe={},Hn;function hi(){if(Hn)return Fe;Hn=1;const r=new Uint8Array(512),n=new Uint8Array(256);return(function(){let t=1;for(let i=0;i<255;i++)r[i]=t,n[t]=i,t<<=1,t&256&&(t^=285);for(let i=255;i<512;i++)r[i]=r[i-255]})(),Fe.log=function(t){if(t<1)throw new Error("log("+t+")");return n[t]},Fe.exp=function(t){return r[t]},Fe.mul=function(t,i){return t===0||i===0?0:r[n[t]+n[i]]},Fe}var Gn;function gi(){return Gn||(Gn=1,(function(r){const n=hi();r.mul=function(t,i){const o=new Uint8Array(t.length+i.length-1);for(let a=0;a<t.length;a++)for(let s=0;s<i.length;s++)o[a+s]^=n.mul(t[a],i[s]);return o},r.mod=function(t,i){let o=new Uint8Array(t);for(;o.length-i.length>=0;){const a=o[0];for(let l=0;l<i.length;l++)o[l]^=n.mul(i[l],a);let s=0;for(;s<o.length&&o[s]===0;)s++;o=o.slice(s)}return o},r.generateECPolynomial=function(t){let i=new Uint8Array([1]);for(let o=0;o<t;o++)i=r.mul(i,new Uint8Array([1,n.exp(o)]));return i}})(Dt)),Dt}var Ut,Yn;function wi(){if(Yn)return Ut;Yn=1;const r=gi();function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return n.prototype.initialize=function(t){this.degree=t,this.genPoly=r.generateECPolynomial(this.degree)},n.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(t.length+this.degree);i.set(t);const o=r.mod(i,this.genPoly),a=this.degree-o.length;if(a>0){const s=new Uint8Array(this.degree);return s.set(o,a),s}return o},Ut=n,Ut}var kt={},zt={},Ft={},Jn;function Rr(){return Jn||(Jn=1,Ft.isValid=function(n){return!isNaN(n)&&n>=1&&n<=40}),Ft}var re={},Qn;function Wr(){if(Qn)return re;Qn=1;const r="[0-9]+",n="[A-Z $%*+\\-./:]+";let e="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";e=e.replace(/u/g,"\\u");const t="(?:(?![A-Z0-9 $%*+\\-./:]|"+e+`)(?:.|[\r
]))+`;re.KANJI=new RegExp(e,"g"),re.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),re.BYTE=new RegExp(t,"g"),re.NUMERIC=new RegExp(r,"g"),re.ALPHANUMERIC=new RegExp(n,"g");const i=new RegExp("^"+e+"$"),o=new RegExp("^"+r+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return re.testKanji=function(l){return i.test(l)},re.testNumeric=function(l){return o.test(l)},re.testAlphanumeric=function(l){return a.test(l)},re}var Zn;function We(){return Zn||(Zn=1,(function(r){const n=Rr(),e=Wr();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!n.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},r.getBestModeForData=function(o){return e.testNumeric(o)?r.NUMERIC:e.testAlphanumeric(o)?r.ALPHANUMERIC:e.testKanji(o)?r.KANJI:r.BYTE},r.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},r.isValid=function(o){return o&&o.bit&&o.ccBits};function t(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+i)}}r.from=function(o,a){if(r.isValid(o))return o;try{return t(o)}catch{return a}}})(zt)),zt}var Xn;function mi(){return Xn||(Xn=1,(function(r){const n=Re(),e=Cr(),t=Ln(),i=We(),o=Rr(),a=7973,s=n.getBCHDigit(a);function l(h,g,C){for(let A=1;A<=40;A++)if(g<=r.getCapacity(A,C,h))return A}function c(h,g){return i.getCharCountIndicator(h,g)+4}function d(h,g){let C=0;return h.forEach(function(A){const B=c(A.mode,g);C+=B+A.getBitsLength()}),C}function f(h,g){for(let C=1;C<=40;C++)if(d(h,C)<=r.getCapacity(C,g,i.MIXED))return C}r.from=function(g,C){return o.isValid(g)?parseInt(g,10):C},r.getCapacity=function(g,C,A){if(!o.isValid(g))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=i.BYTE);const B=n.getSymbolTotalCodewords(g),R=e.getTotalCodewordsCount(g,C),m=(B-R)*8;if(A===i.MIXED)return m;const p=m-c(A,g);switch(A){case i.NUMERIC:return Math.floor(p/10*3);case i.ALPHANUMERIC:return Math.floor(p/11*2);case i.KANJI:return Math.floor(p/13);case i.BYTE:default:return Math.floor(p/8)}},r.getBestVersionForData=function(g,C){let A;const B=t.from(C,t.M);if(Array.isArray(g)){if(g.length>1)return f(g,B);if(g.length===0)return 1;A=g[0]}else A=g;return l(A.mode,A.getLength(),B)},r.getEncodedBits=function(g){if(!o.isValid(g)||g<7)throw new Error("Invalid QR Code version");let C=g<<12;for(;n.getBCHDigit(C)-s>=0;)C^=a<<n.getBCHDigit(C)-s;return g<<12|C}})(kt)),kt}var jt={},$n;function pi(){if($n)return jt;$n=1;const r=Re(),n=1335,e=21522,t=r.getBCHDigit(n);return jt.getEncodedBits=function(o,a){const s=o.bit<<3|a;let l=s<<10;for(;r.getBCHDigit(l)-t>=0;)l^=n<<r.getBCHDigit(l)-t;return(s<<10|l)^e},jt}var xt={},Kt,er;function yi(){if(er)return Kt;er=1;const r=We();function n(e){this.mode=r.NUMERIC,this.data=e.toString()}return n.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){let i,o,a;for(i=0;i+3<=this.data.length;i+=3)o=this.data.substr(i,3),a=parseInt(o,10),t.put(a,10);const s=this.data.length-i;s>0&&(o=this.data.substr(i),a=parseInt(o,10),t.put(a,s*3+1))},Kt=n,Kt}var qt,tr;function bi(){if(tr)return qt;tr=1;const r=We(),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function e(t){this.mode=r.ALPHANUMERIC,this.data=t}return e.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let o;for(o=0;o+2<=this.data.length;o+=2){let a=n.indexOf(this.data[o])*45;a+=n.indexOf(this.data[o+1]),i.put(a,11)}this.data.length%2&&i.put(n.indexOf(this.data[o]),6)},qt=e,qt}var Vt,nr;function Ei(){if(nr)return Vt;nr=1;const r=We();function n(e){this.mode=r.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}return n.getBitsLength=function(t){return t*8},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)},Vt=n,Vt}var Ht,rr;function _i(){if(rr)return Ht;rr=1;const r=We(),n=Re();function e(t){this.mode=r.KANJI,this.data=t}return e.getBitsLength=function(i){return i*13},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){let i;for(i=0;i<this.data.length;i++){let o=n.toSJIS(this.data[i]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),t.put(o,13)}},Ht=e,Ht}var ir;function vi(){return ir||(ir=1,(function(r){const n=We(),e=yi(),t=bi(),i=Ei(),o=_i(),a=Wr(),s=Re(),l=Xr();function c(R){return unescape(encodeURIComponent(R)).length}function d(R,m,p){const E=[];let P;for(;(P=R.exec(p))!==null;)E.push({data:P[0],index:P.index,mode:m,length:P[0].length});return E}function f(R){const m=d(a.NUMERIC,n.NUMERIC,R),p=d(a.ALPHANUMERIC,n.ALPHANUMERIC,R);let E,P;return s.isKanjiModeEnabled()?(E=d(a.BYTE,n.BYTE,R),P=d(a.KANJI,n.KANJI,R)):(E=d(a.BYTE_KANJI,n.BYTE,R),P=[]),m.concat(p,E,P).sort(function(M,b){return M.index-b.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function h(R,m){switch(m){case n.NUMERIC:return e.getBitsLength(R);case n.ALPHANUMERIC:return t.getBitsLength(R);case n.KANJI:return o.getBitsLength(R);case n.BYTE:return i.getBitsLength(R)}}function g(R){return R.reduce(function(m,p){const E=m.length-1>=0?m[m.length-1]:null;return E&&E.mode===p.mode?(m[m.length-1].data+=p.data,m):(m.push(p),m)},[])}function C(R){const m=[];for(let p=0;p<R.length;p++){const E=R[p];switch(E.mode){case n.NUMERIC:m.push([E,{data:E.data,mode:n.ALPHANUMERIC,length:E.length},{data:E.data,mode:n.BYTE,length:E.length}]);break;case n.ALPHANUMERIC:m.push([E,{data:E.data,mode:n.BYTE,length:E.length}]);break;case n.KANJI:m.push([E,{data:E.data,mode:n.BYTE,length:c(E.data)}]);break;case n.BYTE:m.push([{data:E.data,mode:n.BYTE,length:c(E.data)}])}}return m}function A(R,m){const p={},E={start:{}};let P=["start"];for(let w=0;w<R.length;w++){const M=R[w],b=[];for(let y=0;y<M.length;y++){const W=M[y],T=""+w+y;b.push(T),p[T]={node:W,lastCount:0},E[T]={};for(let v=0;v<P.length;v++){const S=P[v];p[S]&&p[S].node.mode===W.mode?(E[S][T]=h(p[S].lastCount+W.length,W.mode)-h(p[S].lastCount,W.mode),p[S].lastCount+=W.length):(p[S]&&(p[S].lastCount=W.length),E[S][T]=h(W.length,W.mode)+4+n.getCharCountIndicator(W.mode,m))}}P=b}for(let w=0;w<P.length;w++)E[P[w]].end=0;return{map:E,table:p}}function B(R,m){let p;const E=n.getBestModeForData(R);if(p=n.from(m,E),p!==n.BYTE&&p.bit<E.bit)throw new Error('"'+R+'" cannot be encoded with mode '+n.toString(p)+`.
 Suggested mode is: `+n.toString(E));switch(p===n.KANJI&&!s.isKanjiModeEnabled()&&(p=n.BYTE),p){case n.NUMERIC:return new e(R);case n.ALPHANUMERIC:return new t(R);case n.KANJI:return new o(R);case n.BYTE:return new i(R)}}r.fromArray=function(m){return m.reduce(function(p,E){return typeof E=="string"?p.push(B(E,null)):E.data&&p.push(B(E.data,E.mode)),p},[])},r.fromString=function(m,p){const E=f(m,s.isKanjiModeEnabled()),P=C(E),w=A(P,p),M=l.find_path(w.map,"start","end"),b=[];for(let y=1;y<M.length-1;y++)b.push(w.table[M[y]].node);return r.fromArray(g(b))},r.rawSplit=function(m){return r.fromArray(f(m,s.isKanjiModeEnabled()))}})(xt)),xt}var or;function Si(){if(or)return Wt;or=1;const r=Re(),n=Ln(),e=li(),t=ci(),i=di(),o=ui(),a=fi(),s=Cr(),l=wi(),c=mi(),d=pi(),f=We(),h=vi();function g(w,M){const b=w.size,y=o.getPositions(M);for(let W=0;W<y.length;W++){const T=y[W][0],v=y[W][1];for(let S=-1;S<=7;S++)if(!(T+S<=-1||b<=T+S))for(let L=-1;L<=7;L++)v+L<=-1||b<=v+L||(S>=0&&S<=6&&(L===0||L===6)||L>=0&&L<=6&&(S===0||S===6)||S>=2&&S<=4&&L>=2&&L<=4?w.set(T+S,v+L,!0,!0):w.set(T+S,v+L,!1,!0))}}function C(w){const M=w.size;for(let b=8;b<M-8;b++){const y=b%2===0;w.set(b,6,y,!0),w.set(6,b,y,!0)}}function A(w,M){const b=i.getPositions(M);for(let y=0;y<b.length;y++){const W=b[y][0],T=b[y][1];for(let v=-2;v<=2;v++)for(let S=-2;S<=2;S++)v===-2||v===2||S===-2||S===2||v===0&&S===0?w.set(W+v,T+S,!0,!0):w.set(W+v,T+S,!1,!0)}}function B(w,M){const b=w.size,y=c.getEncodedBits(M);let W,T,v;for(let S=0;S<18;S++)W=Math.floor(S/3),T=S%3+b-8-3,v=(y>>S&1)===1,w.set(W,T,v,!0),w.set(T,W,v,!0)}function R(w,M,b){const y=w.size,W=d.getEncodedBits(M,b);let T,v;for(T=0;T<15;T++)v=(W>>T&1)===1,T<6?w.set(T,8,v,!0):T<8?w.set(T+1,8,v,!0):w.set(y-15+T,8,v,!0),T<8?w.set(8,y-T-1,v,!0):T<9?w.set(8,15-T-1+1,v,!0):w.set(8,15-T-1,v,!0);w.set(y-8,8,1,!0)}function m(w,M){const b=w.size;let y=-1,W=b-1,T=7,v=0;for(let S=b-1;S>0;S-=2)for(S===6&&S--;;){for(let L=0;L<2;L++)if(!w.isReserved(W,S-L)){let O=!1;v<M.length&&(O=(M[v]>>>T&1)===1),w.set(W,S-L,O),T--,T===-1&&(v++,T=7)}if(W+=y,W<0||b<=W){W-=y,y=-y;break}}}function p(w,M,b){const y=new e;b.forEach(function(L){y.put(L.mode.bit,4),y.put(L.getLength(),f.getCharCountIndicator(L.mode,w)),L.write(y)});const W=r.getSymbolTotalCodewords(w),T=s.getTotalCodewordsCount(w,M),v=(W-T)*8;for(y.getLengthInBits()+4<=v&&y.put(0,4);y.getLengthInBits()%8!==0;)y.putBit(0);const S=(v-y.getLengthInBits())/8;for(let L=0;L<S;L++)y.put(L%2?17:236,8);return E(y,w,M)}function E(w,M,b){const y=r.getSymbolTotalCodewords(M),W=s.getTotalCodewordsCount(M,b),T=y-W,v=s.getBlocksCount(M,b),S=y%v,L=v-S,O=Math.floor(y/v),D=Math.floor(T/v),z=D+1,Q=O-D,ne=new l(Q);let ye=0;const $e=new Array(v),Bn=new Array(v);let Mt=0;const qr=new Uint8Array(w.buffer);for(let Ie=0;Ie<v;Ie++){const Ct=Ie<L?D:z;$e[Ie]=qr.slice(ye,ye+Ct),Bn[Ie]=ne.encode($e[Ie]),ye+=Ct,Mt=Math.max(Mt,Ct)}const Tt=new Uint8Array(y);let On=0,ie,oe;for(ie=0;ie<Mt;ie++)for(oe=0;oe<v;oe++)ie<$e[oe].length&&(Tt[On++]=$e[oe][ie]);for(ie=0;ie<Q;ie++)for(oe=0;oe<v;oe++)Tt[On++]=Bn[oe][ie];return Tt}function P(w,M,b,y){let W;if(Array.isArray(w))W=h.fromArray(w);else if(typeof w=="string"){let O=M;if(!O){const D=h.rawSplit(w);O=c.getBestVersionForData(D,b)}W=h.fromString(w,O||40)}else throw new Error("Invalid data");const T=c.getBestVersionForData(W,b);if(!T)throw new Error("The amount of data is too big to be stored in a QR Code");if(!M)M=T;else if(M<T)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+T+`.
`);const v=p(M,b,W),S=r.getSymbolSize(M),L=new t(S);return g(L,M),C(L),A(L,M),R(L,b,0),M>=7&&B(L,M),m(L,v),isNaN(y)&&(y=a.getBestMask(L,R.bind(null,L,b))),a.applyMask(y,L),R(L,b,y),{modules:L,version:M,errorCorrectionLevel:b,maskPattern:y,segments:W}}return Wt.create=function(M,b){if(typeof M>"u"||M==="")throw new Error("No input text");let y=n.M,W,T;return typeof b<"u"&&(y=n.from(b.errorCorrectionLevel,n.M),W=c.from(b.version),T=a.from(b.maskPattern),b.toSJISFunc&&r.setToSJISFunction(b.toSJISFunc)),P(M,W,y,T)},Wt}var Gt={},Yt={},ar;function Ir(){return ar||(ar=1,(function(r){function n(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+e);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(o){return[o,o]}))),t.length===6&&t.push("F","F");const i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+t.slice(0,6).join("")}}r.getOptions=function(t){t||(t={}),t.color||(t.color={});const i=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,o=t.width&&t.width>=21?t.width:void 0,a=t.scale||4;return{width:o,scale:o?4:a,margin:i,color:{dark:n(t.color.dark||"#000000ff"),light:n(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},r.getScale=function(t,i){return i.width&&i.width>=t+i.margin*2?i.width/(t+i.margin*2):i.scale},r.getImageWidth=function(t,i){const o=r.getScale(t,i);return Math.floor((t+i.margin*2)*o)},r.qrToImageData=function(t,i,o){const a=i.modules.size,s=i.modules.data,l=r.getScale(a,o),c=Math.floor((a+o.margin*2)*l),d=o.margin*l,f=[o.color.light,o.color.dark];for(let h=0;h<c;h++)for(let g=0;g<c;g++){let C=(h*c+g)*4,A=o.color.light;if(h>=d&&g>=d&&h<c-d&&g<c-d){const B=Math.floor((h-d)/l),R=Math.floor((g-d)/l);A=f[s[B*a+R]?1:0]}t[C++]=A.r,t[C++]=A.g,t[C++]=A.b,t[C]=A.a}}})(Yt)),Yt}var sr;function Ai(){return sr||(sr=1,(function(r){const n=Ir();function e(i,o,a){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function t(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(o,a,s){let l=s,c=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(c=t()),l=n.getOptions(l);const d=n.getImageWidth(o.modules.size,l),f=c.getContext("2d"),h=f.createImageData(d,d);return n.qrToImageData(h.data,o,l),e(f,c,d),f.putImageData(h,0,0),c},r.renderToDataURL=function(o,a,s){let l=s;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const c=r.render(o,a,l),d=l.type||"image/png",f=l.rendererOpts||{};return c.toDataURL(d,f.quality)}})(Gt)),Gt}var Jt={},lr;function Mi(){if(lr)return Jt;lr=1;const r=Ir();function n(i,o){const a=i.a/255,s=o+'="'+i.hex+'"';return a<1?s+" "+o+'-opacity="'+a.toFixed(2).slice(1)+'"':s}function e(i,o,a){let s=i+o;return typeof a<"u"&&(s+=" "+a),s}function t(i,o,a){let s="",l=0,c=!1,d=0;for(let f=0;f<i.length;f++){const h=Math.floor(f%o),g=Math.floor(f/o);!h&&!c&&(c=!0),i[f]?(d++,f>0&&h>0&&i[f-1]||(s+=c?e("M",h+a,.5+g+a):e("m",l,0),l=0,c=!1),h+1<o&&i[f+1]||(s+=e("h",d),d=0)):l++}return s}return Jt.render=function(o,a,s){const l=r.getOptions(a),c=o.modules.size,d=o.modules.data,f=c+l.margin*2,h=l.color.light.a?"<path "+n(l.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",g="<path "+n(l.color.dark,"stroke")+' d="'+t(d,c,l.margin)+'"/>',C='viewBox="0 0 '+f+" "+f+'"',B='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+C+' shape-rendering="crispEdges">'+h+g+`</svg>
`;return typeof s=="function"&&s(null,B),B},Jt}var cr;function Ti(){if(cr)return Ne;cr=1;const r=si(),n=Si(),e=Ai(),t=Mi();function i(o,a,s,l,c){const d=[].slice.call(arguments,1),f=d.length,h=typeof d[f-1]=="function";if(!h&&!r())throw new Error("Callback required as last argument");if(h){if(f<2)throw new Error("Too few arguments provided");f===2?(c=s,s=a,a=l=void 0):f===3&&(a.getContext&&typeof c>"u"?(c=l,l=void 0):(c=l,l=s,s=a,a=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(s=a,a=l=void 0):f===2&&!a.getContext&&(l=s,s=a,a=void 0),new Promise(function(g,C){try{const A=n.create(s,l);g(o(A,a,l))}catch(A){C(A)}})}try{const g=n.create(s,l);c(null,o(g,a,l))}catch(g){c(g)}}return Ne.create=n.create,Ne.toCanvas=i.bind(null,e.render),Ne.toDataURL=i.bind(null,e.renderToDataURL),Ne.toString=i.bind(null,function(o,a,s){return t.render(o,s)}),Ne}Ti();function Qt(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Ci="https://api.mainnet-beta.solana.com";function Ri(r){return r.includes(Ci)?bt:/\bdevnet\b/i.test(r)?$r:/\btestnet\b/i.test(r)?ei:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?ti:bt}function Wi(r){return Object.freeze({...r,decode:(n,e=0)=>r.read(n,e)[0]})}var Ii=r=>Wi({read(n,e){const t=e===0?n:n.slice(e);if(t.length===0)return["",0];let i=t.findIndex(l=>l!==0);i=i===-1?t.length:i;const o=r[0].repeat(i);if(i===t.length)return[o,n.length];const a=t.slice(i).reduce((l,c)=>l*256n+BigInt(c),0n),s=Ni(a,r);return[o+s,n.length]}});function Ni(r,n){const e=BigInt(n.length),t=[];for(;r>0n;)t.unshift(n[Number(r%e)]),r/=e;return t.join("")}var Li="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Bi=()=>Ii(Li);const de={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class ue extends Error{constructor(...n){const[e,t,i]=n;super(t),this.code=e,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class Nr extends Error{constructor(...n){const[e,t,i,o]=n;super(i),this.code=t,this.data=o,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function V(r,n,e,t){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(d){try{c(t.next(d))}catch(f){a(f)}}function l(d){try{c(t.throw(d))}catch(f){a(f)}}function c(d){d.done?o(d.value):i(d.value).then(s,l)}c((t=t.apply(r,[])).next())})}function Oi(r){return window.btoa(r)}function dr(r,n){return window.btoa(String.fromCharCode.call(null,...r))}function Lr(r){return new Uint8Array(window.atob(r).split("").map(n=>n.charCodeAt(0)))}function Zt(r,n){return V(this,void 0,void 0,function*(){const e=yield crypto.subtle.exportKey("raw",r),t=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},n,e),i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),i})}function Pi(r){return ni(r)}function Di(r){return Oi(Pi(r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const Ui="solana:signTransactions",ur="solana:cloneAuthorization";function ki(r){return Bi().decode(r)}function zi(r){return ki(Lr(r))}function Fi(r,n){return new Proxy({},{get(e,t){return t==="then"?null:(e[t]==null&&(e[t]=function(i){return V(this,void 0,void 0,function*(){const{method:o,params:a}=ji(t,i,r),s=yield n(o,a);return o==="authorize"&&a.sign_in_payload&&!s.sign_in_result&&(s.sign_in_result=yield Ki(a.sign_in_payload,s,n)),xi(t,s,r)})}),e[t])},defineProperty(){return!1},deleteProperty(){return!1}})}function ji(r,n,e){let t=n,i=r.toString().replace(/[A-Z]/g,o=>`_${o.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:o}=t;if(e==="legacy"){switch(o){case"solana:testnet":{o="testnet";break}case"solana:devnet":{o="devnet";break}case"solana:mainnet":{o="mainnet-beta";break}default:o=t.cluster}t.cluster=o}else{switch(o){case"testnet":case"devnet":{o=`solana:${o}`;break}case"mainnet-beta":{o="solana:mainnet";break}}t.chain=o}}case"reauthorize":{const{auth_token:o,identity:a}=t;o&&(e==="legacy"?(i="reauthorize",t={auth_token:o,identity:a}):i="authorize");break}}return{method:i,params:t}}function xi(r,n,e){switch(r){case"getCapabilities":{const t=n;switch(e){case"legacy":{const i=[Ui];return t.supports_clone_authorization===!0&&i.push(ur),Object.assign(Object.assign({},t),{features:i})}case"v1":return Object.assign(Object.assign({},t),{supports_sign_and_send_transactions:!0,supports_clone_authorization:t.features.includes(ur)})}}}return n}function Ki(r,n,e){var t;return V(this,void 0,void 0,function*(){const i=(t=r.domain)!==null&&t!==void 0?t:window.location.host,o=n.accounts[0].address,a=Di(Object.assign(Object.assign({},r),{domain:i,address:zi(o)})),s=yield e("sign_messages",{addresses:[o],payloads:[a]}),l=Lr(s.signed_payloads[0]),c=dr(l.slice(0,l.length-64)),d=dr(l.slice(l.length-64));return{address:o,signed_message:c.length==0?a:c,signature:d}})}const Se=4;function qi(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const n=new ArrayBuffer(Se);return new DataView(n).setUint32(0,r,!1),new Uint8Array(n)}const dn=12,Br=65;function Vi(r,n,e){return V(this,void 0,void 0,function*(){const t=qi(n),i=new Uint8Array(dn);crypto.getRandomValues(i);const o=yield crypto.subtle.encrypt(Pr(t,i),e,new TextEncoder().encode(r)),a=new Uint8Array(t.byteLength+i.byteLength+o.byteLength);return a.set(new Uint8Array(t),0),a.set(new Uint8Array(i),t.byteLength),a.set(new Uint8Array(o),t.byteLength+i.byteLength),a})}function Or(r,n){return V(this,void 0,void 0,function*(){const e=r.slice(0,Se),t=r.slice(Se,Se+dn),i=r.slice(Se+dn),o=yield crypto.subtle.decrypt(Pr(e,t),n,i);return Hi().decode(o)})}function Pr(r,n){return{additionalData:r,iv:n,name:"AES-GCM",tagLength:128}}let Xt;function Hi(){return Xt===void 0&&(Xt=new TextDecoder("utf-8")),Xt}function Gi(){return V(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function $t(){return V(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Yi(r){let n="";const e=new Uint8Array(r),t=e.byteLength;for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return window.btoa(n)}function Ji(){return Dr(49152+Math.floor(Math.random()*16384))}function Dr(r){if(r<49152||r>65535)throw new ue(de.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function Qi(r){return r.replace(/[/+=]/g,n=>({"/":"_","+":"-","=":"."})[n])}const Zi="solana-wallet";function fr(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function Xi(r,n){let e=null;if(n){try{e=new URL(n)}catch{}if(e?.protocol!=="https:")throw new ue(de.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}e||(e=new URL(`${Zi}:/`));const t=r.startsWith("/")?r:[...fr(e.pathname),...fr(r)].join("/");return new URL(t,e)}function $i(r,n,e,t=["v1"]){return V(this,void 0,void 0,function*(){const i=Dr(n),o=yield crypto.subtle.exportKey("raw",r),a=Yi(o),s=Xi("v1/associate/local",e);return s.searchParams.set("association",Qi(a)),s.searchParams.set("port",`${i}`),t.forEach(l=>{s.searchParams.set("v",l)}),s})}function eo(r,n){return V(this,void 0,void 0,function*(){const e=JSON.stringify(r),t=r.id;return Vi(e,t,n)})}function to(r,n){return V(this,void 0,void 0,function*(){const e=yield Or(r,n),t=JSON.parse(e);if(Object.hasOwnProperty.call(t,"error"))throw new Nr(t.id,t.error.code,t.error.message);return t})}function no(r,n,e){return V(this,void 0,void 0,function*(){const[t,i]=yield Promise.all([crypto.subtle.exportKey("raw",n),crypto.subtle.importKey("raw",r.slice(0,Br),{name:"ECDH",namedCurve:"P-256"},!1,[])]),o=yield crypto.subtle.deriveBits({name:"ECDH",public:i},e,256),a=yield crypto.subtle.importKey("raw",o,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(t),info:new Uint8Array},a,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function ro(r,n){return V(this,void 0,void 0,function*(){const e=yield Or(r,n),t=JSON.parse(e);let i="legacy";if(Object.hasOwnProperty.call(t,"v"))switch(t.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new ue(de.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${t.v}`)}return{protocol_version:i}})}const Et={Firefox:0,Other:1};function io(){return navigator.userAgent.indexOf("Firefox/")!==-1?Et.Firefox:Et.Other}function oo(){return new Promise((r,n)=>{function e(){clearTimeout(i),window.removeEventListener("blur",t)}function t(){e(),r()}window.addEventListener("blur",t);const i=setTimeout(()=>{e(),n()},3e3)})}let je=null;function ao(r){je==null&&(je=document.createElement("iframe"),je.style.display="none",document.body.appendChild(je)),je.contentWindow.location.href=r.toString()}function so(r){return V(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const n=io();switch(n){case Et.Firefox:ao(r);break;case Et.Other:{const e=oo();window.location.assign(r),yield e;break}default:}}catch{throw new ue(de.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function lo(r,n){return V(this,void 0,void 0,function*(){const e=Ji(),t=yield $i(r,e,n);return yield so(t),e})}const hr={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},co="com.solana.mobilewalletadapter.v1";function uo(){if(typeof window>"u"||window.isSecureContext!==!0)throw new ue(de.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function fo(r){let n;try{n=new URL(r)}catch{throw new ue(de.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(n.protocol!=="https:")throw new ue(de.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function gr(r){return new DataView(r).getUint32(0,!1)}function ho(r,n){return V(this,void 0,void 0,function*(){uo();const e=yield Gi(),i=`ws://localhost:${yield lo(e.publicKey,n?.baseUri)}/solana-wallet`;let o;const a=(()=>{const d=[...hr.retryDelayScheduleMs];return()=>d.length>1?d.shift():d[0]})();let s=1,l=0,c={__type:"disconnected"};return new Promise((d,f)=>{let h;const g={},C=()=>V(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}h.removeEventListener("open",C);const{associationKeypair:P}=c,w=yield $t();h.send(yield Zt(w.publicKey,P.privateKey)),c={__type:"hello_req_sent",associationPublicKey:P.publicKey,ecdhPrivateKey:w.privateKey}}),A=P=>{P.wasClean?c={__type:"disconnected"}:f(new ue(de.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${P.code}: ${P.reason}).`,{closeEvent:P})),m()},B=P=>V(this,void 0,void 0,function*(){m(),Date.now()-o>=hr.timeoutMs?f(new ue(de.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(w=>{const M=a();p=window.setTimeout(w,M)}),E())}),R=P=>V(this,void 0,void 0,function*(){const w=yield P.data.arrayBuffer();switch(c.__type){case"connecting":if(w.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const M=yield $t();h.send(yield Zt(M.publicKey,e.privateKey)),c={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:M.privateKey};break;case"connected":try{const b=w.slice(0,Se),y=gr(b);if(y!==l+1)throw new Error("Encrypted message has invalid sequence number");l=y;const W=yield to(w,c.sharedSecret),T=g[W.id];delete g[W.id],T.resolve(W.result)}catch(b){if(b instanceof Nr){const y=g[b.jsonRpcMessageId];delete g[b.jsonRpcMessageId],y.reject(b)}else throw b}break;case"hello_req_sent":{if(w.byteLength===0){const v=yield $t();h.send(yield Zt(v.publicKey,e.privateKey)),c={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:v.privateKey};break}const b=yield no(w,c.associationPublicKey,c.ecdhPrivateKey),y=w.slice(Br),W=y.byteLength!==0?yield V(this,void 0,void 0,function*(){const v=y.slice(0,Se),S=gr(v);if(S!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=S,ro(y,b)}):{protocol_version:"legacy"};c={__type:"connected",sharedSecret:b,sessionProperties:W};const T=Fi(W.protocol_version,(v,S)=>V(this,void 0,void 0,function*(){const L=s++;return h.send(yield eo({id:L,jsonrpc:"2.0",method:v,params:S??{}},b)),new Promise((O,D)=>{g[L]={resolve(z){switch(v){case"authorize":case"reauthorize":{const{wallet_uri_base:Q}=z;if(Q!=null)try{fo(Q)}catch(ne){D(ne);return}break}}O(z)},reject:D}})}));try{d(yield r(T))}catch(v){f(v)}finally{m(),h.close()}break}}});let m,p;const E=()=>{m&&m(),c={__type:"connecting",associationKeypair:e},o===void 0&&(o=Date.now()),h=new WebSocket(i,[co]),h.addEventListener("open",C),h.addEventListener("close",A),h.addEventListener("error",B),h.addEventListener("message",R),m=()=>{window.clearTimeout(p),h.removeEventListener("open",C),h.removeEventListener("close",A),h.removeEventListener("error",B),h.removeEventListener("message",R)}};E()})})}function F(r,n,e,t){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(d){try{c(t.next(d))}catch(f){a(f)}}function l(d){try{c(t.throw(d))}catch(f){a(f)}}function c(d){d.done?o(d.value):i(d.value).then(s,l)}c((t=t.apply(r,[])).next())})}function u(r,n,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!t:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(r):t?t.value:n.get(r)}function K(r,n,e,t,i){if(typeof n=="function"?r!==n||!0:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n.set(r,e),e}var qe,H,be,Le,Ur,kr,zr,nt;const go=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,wo=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,mo=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class po{constructor(){qe.add(this),H.set(this,null),be.set(this,{}),Le.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),u(this,qe,"m",kr).call(this),u(this,H,"f")&&(u(this,H,"f").style.display="flex")},this.close=(n=void 0)=>{var e;console.debug("Modal close"),u(this,qe,"m",zr).call(this),u(this,H,"f")&&(u(this,H,"f").style.display="none"),(e=u(this,be,"f").close)===null||e===void 0||e.forEach(t=>t(n))},nt.set(this,n=>{n.key==="Escape"&&this.close(n)}),this.init=this.init.bind(this),K(this,H,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return F(this,void 0,void 0,function*(){console.log("Injecting modal"),u(this,qe,"m",Ur).call(this)})}addEventListener(n,e){var t;return!((t=u(this,be,"f")[n])===null||t===void 0)&&t.push(e)||(u(this,be,"f")[n]=[e]),()=>this.removeEventListener(n,e)}removeEventListener(n,e){var t;u(this,be,"f")[n]=(t=u(this,be,"f")[n])===null||t===void 0?void 0:t.filter(i=>e!==i)}}H=new WeakMap,be=new WeakMap,Le=new WeakMap,nt=new WeakMap,qe=new WeakSet,Ur=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){u(this,H,"f")||K(this,H,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}K(this,H,document.createElement("div")),u(this,H,"f").id="mobile-wallet-adapter-embedded-root-ui",u(this,H,"f").innerHTML=go,u(this,H,"f").style.display="none";const n=u(this,H,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");n&&(n.innerHTML=this.contentHtml);const e=document.createElement("style");e.id="mobile-wallet-adapter-embedded-modal-styles",e.textContent=wo+this.contentStyles;const t=document.createElement("div");t.innerHTML=mo,this.dom=t.attachShadow({mode:"closed"}),this.dom.appendChild(e),this.dom.appendChild(u(this,H,"f")),document.body.appendChild(t)},kr=function(){if(!u(this,H,"f")||u(this,Le,"f"))return;[...u(this,H,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e?.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",u(this,nt,"f")),K(this,Le,!0)},zr=function(){if(!u(this,Le,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",u(this,nt,"f")),!u(this,H,"f")))return;[...u(this,H,"f").querySelectorAll("[data-modal-close]")].forEach(e=>e?.removeEventListener("click",this.close)),K(this,Le,!1)};const yo="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function tt(r){return window.btoa(String.fromCharCode.call(null,...r))}function he(r){return new Uint8Array(window.atob(r).split("").map(n=>n.charCodeAt(0)))}var Be,Ae,un,fn,hn,gn,Ve,Z,ae,ge,Oe,Ee,rt,He,it,wn,ot,Fr,mn,at,Pe,st,Ge,lt,De,Ye,ct,pn,yn,dt,ut,bn,En,ft;const jr="Mobile Wallet Adapter",bo=64,Eo=[$,x,me,Ce];class _o{constructor(n){Be.add(this),Ae.set(this,{}),un.set(this,"1.0.0"),fn.set(this,jr),hn.set(this,"https://solanamobile.com/wallets"),gn.set(this,yo),Ve.set(this,void 0),Z.set(this,void 0),ae.set(this,void 0),ge.set(this,!1),Oe.set(this,0),Ee.set(this,[]),rt.set(this,void 0),He.set(this,void 0),it.set(this,void 0),wn.set(this,(e,t)=>{var i;return!((i=u(this,Ae,"f")[e])===null||i===void 0)&&i.push(t)||(u(this,Ae,"f")[e]=[t]),()=>u(this,Be,"m",Fr).call(this,e,t)}),mn.set(this,({silent:e}={})=>F(this,void 0,void 0,function*(){if(u(this,ge,"f")||this.connected)return{accounts:this.accounts};K(this,ge,!0);try{if(e){const t=yield u(this,ae,"f").get();if(t)yield u(this,st,"f").call(this,t.capabilities),yield u(this,Pe,"f").call(this,t);else return{accounts:this.accounts}}else yield u(this,at,"f").call(this)}catch(t){throw new Error(t instanceof Error&&t.message||"Unknown error")}finally{K(this,ge,!1)}return{accounts:this.accounts}})),at.set(this,e=>F(this,void 0,void 0,function*(){try{const t=yield u(this,ae,"f").get();if(t)return u(this,Pe,"f").call(this,t),t;const i=yield u(this,rt,"f").select(u(this,Ee,"f"));return yield u(this,De,"f").call(this,o=>F(this,void 0,void 0,function*(){const[a,s]=yield Promise.all([o.getCapabilities(),o.authorize({chain:i,identity:u(this,Ve,"f"),sign_in_payload:e})]),l=u(this,ct,"f").call(this,s.accounts),c=Object.assign(Object.assign({},s),{accounts:l,chain:i,capabilities:a});return Promise.all([u(this,st,"f").call(this,a),u(this,ae,"f").set(c),u(this,Pe,"f").call(this,c)]),c}))}catch(t){throw new Error(t instanceof Error&&t.message||"Unknown error")}})),Pe.set(this,e=>F(this,void 0,void 0,function*(){var t;const i=u(this,Z,"f")==null||((t=u(this,Z,"f"))===null||t===void 0?void 0:t.accounts.length)!==e.accounts.length||u(this,Z,"f").accounts.some((o,a)=>o.address!==e.accounts[a].address);K(this,Z,e),i&&u(this,Be,"m",ot).call(this,"change",{accounts:this.accounts})})),st.set(this,e=>F(this,void 0,void 0,function*(){const t=e.features.includes("solana:signTransactions"),i=e.supports_sign_and_send_transactions,o=$ in this.features!==i||x in this.features!==t;K(this,He,Object.assign(Object.assign({},(i||!i&&!t)&&{[$]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:u(this,dt,"f")}}),t&&{[x]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:u(this,ut,"f")}})),o&&u(this,Be,"m",ot).call(this,"change",{features:this.features})})),Ge.set(this,(e,t,i)=>F(this,void 0,void 0,function*(){var o,a;try{const[s,l]=yield Promise.all([(a=(o=u(this,Z,"f"))===null||o===void 0?void 0:o.capabilities)!==null&&a!==void 0?a:yield e.getCapabilities(),e.authorize({auth_token:t,identity:u(this,Ve,"f"),chain:i})]),c=u(this,ct,"f").call(this,l.accounts),d=Object.assign(Object.assign({},l),{accounts:c,chain:i,capabilities:s});Promise.all([u(this,ae,"f").set(d),u(this,Pe,"f").call(this,d)])}catch(s){throw u(this,lt,"f").call(this),new Error(s instanceof Error&&s.message||"Unknown error")}})),lt.set(this,()=>F(this,void 0,void 0,function*(){var e;u(this,ae,"f").clear(),K(this,ge,!1),K(this,Oe,(e=u(this,Oe,"f"),e++,e)),K(this,Z,void 0),u(this,Be,"m",ot).call(this,"change",{accounts:this.accounts})})),De.set(this,e=>F(this,void 0,void 0,function*(){var t;const i=(t=u(this,Z,"f"))===null||t===void 0?void 0:t.wallet_uri_base,o=i?{baseUri:i}:void 0,a=u(this,Oe,"f");try{return yield ho(e,o)}catch(s){throw u(this,Oe,"f")!==a&&(yield new Promise(()=>{})),s instanceof Error&&s.name==="SolanaMobileWalletAdapterError"&&s.code==="ERROR_WALLET_NOT_FOUND"&&(yield u(this,it,"f").call(this,this)),s}})),Ye.set(this,()=>{if(!u(this,Z,"f"))throw new Error("Wallet not connected");return{authToken:u(this,Z,"f").auth_token,chain:u(this,Z,"f").chain}}),ct.set(this,e=>e.map(t=>{var i,o;const a=he(t.address);return{address:cn.encode(a),publicKey:a,label:t.label,icon:t.icon,chains:(i=t.chains)!==null&&i!==void 0?i:u(this,Ee,"f"),features:(o=t.features)!==null&&o!==void 0?o:Eo}})),pn.set(this,e=>F(this,void 0,void 0,function*(){const{authToken:t,chain:i}=u(this,Ye,"f").call(this);try{const o=e.map(a=>tt(a));return yield u(this,De,"f").call(this,a=>F(this,void 0,void 0,function*(){return yield u(this,Ge,"f").call(this,a,t,i),(yield a.signTransactions({payloads:o})).signed_payloads.map(he)}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),yn.set(this,(e,t)=>F(this,void 0,void 0,function*(){const{authToken:i,chain:o}=u(this,Ye,"f").call(this);try{return yield u(this,De,"f").call(this,a=>F(this,void 0,void 0,function*(){const[s,l]=yield Promise.all([a.getCapabilities(),u(this,Ge,"f").call(this,a,i,o)]);if(s.supports_sign_and_send_transactions){const c=tt(e);return(yield a.signAndSendTransactions(Object.assign(Object.assign({},t),{payloads:[c]}))).signatures.map(he)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),dt.set(this,(...e)=>F(this,void 0,void 0,function*(){const t=[];for(const i of e){const o=yield u(this,yn,"f").call(this,i.transaction,i.options);t.push({signature:o})}return t})),ut.set(this,(...e)=>F(this,void 0,void 0,function*(){return(yield u(this,pn,"f").call(this,e.map(({transaction:t})=>t))).map(t=>({signedTransaction:t}))})),bn.set(this,(...e)=>F(this,void 0,void 0,function*(){const{authToken:t,chain:i}=u(this,Ye,"f").call(this),o=e.map(({account:s})=>tt(s.publicKey)),a=e.map(({message:s})=>tt(s));try{return yield u(this,De,"f").call(this,s=>F(this,void 0,void 0,function*(){return yield u(this,Ge,"f").call(this,s,t,i),(yield s.signMessages({addresses:o,payloads:a})).signed_payloads.map(he).map(c=>({signedMessage:c,signature:c.slice(-bo)}))}))}catch(s){throw new Error(s instanceof Error&&s.message||"Unknown error")}})),En.set(this,(...e)=>F(this,void 0,void 0,function*(){const t=[];if(e.length>1)for(const i of e)t.push(yield u(this,ft,"f").call(this,i));else return[yield u(this,ft,"f").call(this,e[0])];return t})),ft.set(this,e=>F(this,void 0,void 0,function*(){var t,i,o;K(this,ge,!0);try{const a=yield u(this,at,"f").call(this,Object.assign(Object.assign({},e),{domain:(t=e?.domain)!==null&&t!==void 0?t:window.location.host}));if(!a.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=a.sign_in_result.address,l=a.accounts.find(c=>c.address==s);return{account:Object.assign(Object.assign({},l??{address:cn.encode(he(s))}),{publicKey:he(s),chains:(i=l?.chains)!==null&&i!==void 0?i:u(this,Ee,"f"),features:(o=l?.features)!==null&&o!==void 0?o:a.capabilities.features}),signedMessage:he(a.sign_in_result.signed_message),signature:he(a.sign_in_result.signature)}}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}finally{K(this,ge,!1)}})),K(this,ae,n.authorizationCache),K(this,Ve,n.appIdentity),K(this,Ee,n.chains),K(this,rt,n.chainSelector),K(this,it,n.onWalletNotFound),K(this,He,{[$]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:u(this,dt,"f")},[x]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:u(this,ut,"f")}})}get version(){return u(this,un,"f")}get name(){return u(this,fn,"f")}get url(){return u(this,hn,"f")}get icon(){return u(this,gn,"f")}get chains(){return u(this,Ee,"f")}get features(){return Object.assign({[In]:{version:"1.0.0",connect:u(this,mn,"f")},[ln]:{version:"1.0.0",disconnect:u(this,lt,"f")},[Nn]:{version:"1.0.0",on:u(this,wn,"f")},[me]:{version:"1.0.0",signMessage:u(this,bn,"f")},[Ce]:{version:"1.0.0",signIn:u(this,En,"f")}},u(this,He,"f"))}get accounts(){var n,e;return(e=(n=u(this,Z,"f"))===null||n===void 0?void 0:n.accounts)!==null&&e!==void 0?e:[]}get connected(){return!!u(this,Z,"f")}get isAuthorized(){return!!u(this,Z,"f")}get currentAuthorization(){return u(this,Z,"f")}get cachedAuthorizationResult(){return u(this,ae,"f").get()}}Ae=new WeakMap,un=new WeakMap,fn=new WeakMap,hn=new WeakMap,gn=new WeakMap,Ve=new WeakMap,Z=new WeakMap,ae=new WeakMap,ge=new WeakMap,Oe=new WeakMap,Ee=new WeakMap,rt=new WeakMap,He=new WeakMap,it=new WeakMap,wn=new WeakMap,mn=new WeakMap,at=new WeakMap,Pe=new WeakMap,st=new WeakMap,Ge=new WeakMap,lt=new WeakMap,De=new WeakMap,Ye=new WeakMap,ct=new WeakMap,pn=new WeakMap,yn=new WeakMap,dt=new WeakMap,ut=new WeakMap,bn=new WeakMap,En=new WeakMap,ft=new WeakMap,Be=new WeakSet,ot=function(n,...e){var t;(t=u(this,Ae,"f")[n])===null||t===void 0||t.forEach(i=>i.apply(null,e))},Fr=function(n,e){var t;u(this,Ae,"f")[n]=(t=u(this,Ae,"f")[n])===null||t===void 0?void 0:t.filter(i=>e!==i)};const vo="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",So="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class Ao extends po{constructor(){super(...arguments),this.contentStyles=To,this.contentHtml=Mo}initWithError(n){super.init(),this.populateError(n)}populateError(n){var e,t;const i=(e=this.dom)===null||e===void 0?void 0:e.getElementById("mobile-wallet-adapter-error-message"),o=(t=this.dom)===null||t===void 0?void 0:t.getElementById("mobile-wallet-adapter-error-action");if(i){if(n.name==="SolanaMobileWalletAdapterError")switch(n.code){case"ERROR_WALLET_NOT_FOUND":i.innerHTML=vo,o&&o.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":i.innerHTML=So,o&&(o.style.display="none");return}i.innerHTML=`An unexpected error occurred: ${n.message}`}else console.log("Failed to locate error dialog element")}}const Mo=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,To=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function Co(){return F(this,void 0,void 0,function*(){if(typeof window<"u"){const r=window.navigator.userAgent.toLowerCase(),n=new Ao;r.includes("wv")?n.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):n.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),n.open()}})}const en="SolanaMobileWalletAdapterDefaultAuthorizationCache";function Ro(){let r;try{r=window.localStorage}catch{}return{clear(){return F(this,void 0,void 0,function*(){if(r)try{r.removeItem(en)}catch{}})},get(){return F(this,void 0,void 0,function*(){if(r)try{const n=JSON.parse(r.getItem(en));if(n&&n.accounts){const e=n.accounts.map(t=>Object.assign(Object.assign({},t),{publicKey:"publicKey"in t?new Uint8Array(Object.values(t.publicKey)):cn.decode(t.address)}));return Object.assign(Object.assign({},n),{accounts:e})}else return n||void 0}catch{}})},set(n){return F(this,void 0,void 0,function*(){if(r)try{r.setItem(en,JSON.stringify(n))}catch{}})}}}function Wo(){return{select(r){return F(this,void 0,void 0,function*(){return r.length===1?r[0]:r.includes(bt)?bt:r[0]})}}}function k(r,n,e,t){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(d){try{c(t.next(d))}catch(f){a(f)}}function l(d){try{c(t.throw(d))}catch(f){a(f)}}function c(d){d.done?o(d.value):i(d.value).then(s,l)}c((t=t.apply(r,[])).next())})}function I(r,n,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!t:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(r):t?t.value:n.get(r)}function ee(r,n,e,t,i){if(typeof n=="function"?r!==n||!0:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n.set(r,e),e}const _n="standard:connect",Io="standard:disconnect",No="standard:events";function tn(r){return window.btoa(String.fromCharCode.call(null,...r))}function Lo(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var Y,j,pe,le,ht,se,_e,vn,Sn,xr,_t,gt,we;const wt=jr,Bo=64;function Oo(r){return"version"in r}function Kr(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return r}}class Po extends ri{constructor(n,e){super(),Y.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),j.set(this,void 0),pe.set(this,!1),le.set(this,Lo()?G.Loadable:G.Unsupported),ht.set(this,void 0),se.set(this,void 0),_e.set(this,void 0),vn.set(this,t=>k(this,void 0,void 0,function*(){if(t.accounts&&t.accounts.length>0){I(this,Y,"m",xr).call(this);const i=yield I(this,ht,"f").call(this,t.accounts);i!==I(this,se,"f")&&(ee(this,se,i),ee(this,_e,void 0),this.emit("connect",this.publicKey))}})),ee(this,ht,t=>k(this,void 0,void 0,function*(){var i;const o=yield e.addressSelector.select(t.map(({publicKey:a})=>tn(a)));return(i=t.find(({publicKey:a})=>tn(a)===o))!==null&&i!==void 0?i:t[0]})),ee(this,j,n),I(this,j,"f").features[No].on("change",I(this,vn,"f")),this.name=I(this,j,"f").name,this.icon=I(this,j,"f").icon,this.url=I(this,j,"f").url}get publicKey(){var n;if(!I(this,_e,"f")&&I(this,se,"f"))try{ee(this,_e,new Sr(I(this,se,"f").publicKey),"f")}catch(e){throw new Ar(e instanceof Error&&e?.message||"Unknown error",e)}return(n=I(this,_e,"f"))!==null&&n!==void 0?n:null}get connected(){return I(this,j,"f").connected}get connecting(){return I(this,pe,"f")}get readyState(){return I(this,le,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return k(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return k(this,void 0,void 0,function*(){I(this,Y,"m",Sn).call(this,!0)})}connect(){return k(this,void 0,void 0,function*(){I(this,Y,"m",Sn).call(this)})}performAuthorization(n){return k(this,void 0,void 0,function*(){try{const e=yield I(this,j,"f").cachedAuthorizationResult;return e?(yield I(this,j,"f").features[_n].connect({silent:!0}),e):(n?yield I(this,j,"f").features[Ce].signIn(n):yield I(this,j,"f").features[_n].connect(),yield yield I(this,j,"f").cachedAuthorizationResult)}catch(e){throw new yt(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return k(this,void 0,void 0,function*(){return yield I(this,Y,"m",we).call(this,()=>k(this,void 0,void 0,function*(){ee(this,pe,!1),ee(this,_e,void 0),ee(this,se,void 0),yield I(this,j,"f").features[Io].disconnect(),this.emit("disconnect")}))})}signIn(n){return k(this,void 0,void 0,function*(){return I(this,Y,"m",we).call(this,()=>k(this,void 0,void 0,function*(){var e;if(I(this,le,"f")!==G.Installed&&I(this,le,"f")!==G.Loadable)throw new Xe;ee(this,pe,!0);try{const t=yield I(this,j,"f").features[Ce].signIn(Object.assign(Object.assign({},n),{domain:(e=n?.domain)!==null&&e!==void 0?e:window.location.host}));if(t.length>0)return t[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(t){throw new yt(t instanceof Error&&t.message||"Unknown error",t)}finally{ee(this,pe,!1)}}))})}signMessage(n){return k(this,void 0,void 0,function*(){return yield I(this,Y,"m",we).call(this,()=>k(this,void 0,void 0,function*(){const e=I(this,Y,"m",_t).call(this);try{return(yield I(this,j,"f").features[me].signMessage({account:e,message:n}))[0].signature}catch(t){throw new Mr(t?.message,t)}}))})}sendTransaction(n,e,t){return k(this,void 0,void 0,function*(){return yield I(this,Y,"m",we).call(this,()=>k(this,void 0,void 0,function*(){const i=I(this,Y,"m",_t).call(this);try{let o=function(){let a;switch(e.commitment){case"confirmed":case"finalized":case"processed":a=e.commitment;break;default:a="finalized"}let s;switch(t?.preflightCommitment){case"confirmed":case"finalized":case"processed":s=t.preflightCommitment;break;case void 0:s=a;break;default:s="finalized"}return(s==="finalized"?2:s==="confirmed"?1:0)<(a==="finalized"?2:a==="confirmed"?1:0)?s:a};if($ in I(this,j,"f").features){const a=Kr(I(this,j,"f").currentAuthorization.chain),[s]=(yield I(this,j,"f").features[$].signAndSendTransaction({account:i,transaction:n.serialize(),chain:a,options:t?{skipPreflight:t.skipPreflight,maxRetries:t.maxRetries}:void 0})).map((l=>tn(l.signature)));return s}else{const[a]=yield I(this,Y,"m",gt).call(this,[n]);if(Oo(a))return yield e.sendTransaction(a);{const s=a.serialize();return yield e.sendRawTransaction(s,Object.assign(Object.assign({},t),{preflightCommitment:o()}))}}}catch(o){throw new an(o?.message,o)}}))})}signTransaction(n){return k(this,void 0,void 0,function*(){return yield I(this,Y,"m",we).call(this,()=>k(this,void 0,void 0,function*(){const[e]=yield I(this,Y,"m",gt).call(this,[n]);return e}))})}signAllTransactions(n){return k(this,void 0,void 0,function*(){return yield I(this,Y,"m",we).call(this,()=>k(this,void 0,void 0,function*(){return yield I(this,Y,"m",gt).call(this,n)}))})}}j=new WeakMap,pe=new WeakMap,le=new WeakMap,ht=new WeakMap,se=new WeakMap,_e=new WeakMap,vn=new WeakMap,Y=new WeakSet,Sn=function(n=!1){return k(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield I(this,Y,"m",we).call(this,()=>k(this,void 0,void 0,function*(){if(I(this,le,"f")!==G.Installed&&I(this,le,"f")!==G.Loadable)throw new Xe;ee(this,pe,!0);try{yield I(this,j,"f").features[_n].connect({silent:n})}catch(e){throw new yt(e instanceof Error&&e.message||"Unknown error",e)}finally{ee(this,pe,!1)}}))})},xr=function(){I(this,le,"f")!==G.Installed&&this.emit("readyStateChange",ee(this,le,G.Installed))},_t=function(){if(!I(this,j,"f").isAuthorized||!I(this,se,"f"))throw new ce;return I(this,se,"f")},gt=function(n){return k(this,void 0,void 0,function*(){const e=I(this,Y,"m",_t).call(this);try{if(x in I(this,j,"f").features)return I(this,j,"f").features[x].signTransaction(...n.map(t=>({account:e,transaction:t.serialize()}))).then(t=>t.map(i=>{const o=i.signedTransaction,s=o[0]*Bo+1;return Hr.deserializeMessageVersion(o.slice(s,o.length))==="legacy"?rn.from(o):on.deserialize(o)}));throw new Error("Connected wallet does not support signing transactions")}catch(t){throw new sn(t?.message,t)}})},we=function(n){return k(this,void 0,void 0,function*(){try{return yield n()}catch(e){throw this.emit("error",e),e}})};class Do extends Po{constructor(n){var e;const t=Kr((e=n.chain)!==null&&e!==void 0?e:n.cluster);super(new _o({appIdentity:n.appIdentity,authorizationCache:{set:n.authorizationResultCache.set,get:()=>k(this,void 0,void 0,function*(){return yield n.authorizationResultCache.get()}),clear:n.authorizationResultCache.clear},chains:[t],chainSelector:Wo(),onWalletNotFound:()=>k(this,void 0,void 0,function*(){n.onWalletNotFound(this)})}),{addressSelector:n.addressSelector,chain:t})}}class Uo extends Do{}function ko(){return{select(r){return k(this,void 0,void 0,function*(){return r[0]})}}}function zo(){return Ro()}function Fo(r){return k(this,void 0,void 0,function*(){return Co()})}function jo(){return Fo}function xo(r,n){if(r===n)return!0;const e=r.length;if(e!==n.length)return!1;for(let t=0;t<e;t++)if(r[t]!==n[t])return!1;return!0}function Ko(r){if(r.length>=255)throw new TypeError("Alphabet too long");const n=new Uint8Array(256);for(let c=0;c<n.length;c++)n[c]=255;for(let c=0;c<r.length;c++){const d=r.charAt(c),f=d.charCodeAt(0);if(n[f]!==255)throw new TypeError(d+" is ambiguous");n[f]=c}const e=r.length,t=r.charAt(0),i=Math.log(e)/Math.log(256),o=Math.log(256)/Math.log(e);function a(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let d=0,f=0,h=0;const g=c.length;for(;h!==g&&c[h]===0;)h++,d++;const C=(g-h)*o+1>>>0,A=new Uint8Array(C);for(;h!==g;){let m=c[h],p=0;for(let E=C-1;(m!==0||p<f)&&E!==-1;E--,p++)m+=256*A[E]>>>0,A[E]=m%e>>>0,m=m/e>>>0;if(m!==0)throw new Error("Non-zero carry");f=p,h++}let B=C-f;for(;B!==C&&A[B]===0;)B++;let R=t.repeat(d);for(;B<C;++B)R+=r.charAt(A[B]);return R}function s(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let d=0,f=0,h=0;for(;c[d]===t;)f++,d++;const g=(c.length-d)*i+1>>>0,C=new Uint8Array(g);for(;d<c.length;){const m=c.charCodeAt(d);if(m>255)return;let p=n[m];if(p===255)return;let E=0;for(let P=g-1;(p!==0||E<h)&&P!==-1;P--,E++)p+=e*C[P]>>>0,C[P]=p%256>>>0,p=p/256>>>0;if(p!==0)throw new Error("Non-zero carry");h=E,d++}let A=g-h;for(;A!==g&&C[A]===0;)A++;const B=new Uint8Array(f+(g-A));let R=f;for(;A!==g;)B[R++]=C[A++];return B}function l(c){const d=s(c);if(d)return d;throw new Error("Non-base"+e+" character")}return{encode:a,decodeUnsafe:s,decode:l}}var qo="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Vo=Ko(qo);var _=function(r,n,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!t:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(r):t?t.value:n.get(r)},q=function(r,n,e,t,i){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?r!==n||!i:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?i.call(r,e):i?i.value=e:n.set(r,e),e},J,X,Me,Te,ve,Je,vt,U,St,An,mt,Mn,Qe,Tn,wr,mr,pr,yr;class Ho extends Jr{get name(){return _(this,U,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return _(this,U,"f").icon}get readyState(){return _(this,St,"f")}get publicKey(){return _(this,Me,"f")}get connecting(){return _(this,Te,"f")}get supportedTransactionVersions(){return _(this,vt,"f")}get wallet(){return _(this,U,"f")}get standard(){return!0}constructor({wallet:n}){super(),J.add(this),X.set(this,void 0),Me.set(this,void 0),Te.set(this,void 0),ve.set(this,void 0),Je.set(this,void 0),vt.set(this,void 0),U.set(this,void 0),St.set(this,typeof window>"u"||typeof document>"u"?G.Unsupported:G.Installed),Tn.set(this,e=>{if("accounts"in e){const t=_(this,U,"f").accounts[0];_(this,X,"f")&&!_(this,ve,"f")&&t!==_(this,X,"f")&&(t?_(this,J,"m",mt).call(this,t):(this.emit("error",new Qr),_(this,J,"m",Mn).call(this)))}"features"in e&&_(this,J,"m",Qe).call(this)}),q(this,U,n,"f"),q(this,X,null,"f"),q(this,Me,null,"f"),q(this,Te,!1,"f"),q(this,ve,!1,"f"),q(this,Je,_(this,U,"f").features[Nn].on("change",_(this,Tn,"f")),"f"),_(this,J,"m",Qe).call(this)}destroy(){q(this,X,null,"f"),q(this,Me,null,"f"),q(this,Te,!1,"f"),q(this,ve,!1,"f");const n=_(this,Je,"f");n&&(q(this,Je,null,"f"),n())}async autoConnect(){return _(this,J,"m",An).call(this,{silent:!0})}async connect(){return _(this,J,"m",An).call(this)}async disconnect(){if(ln in _(this,U,"f").features)try{q(this,ve,!0,"f"),await _(this,U,"f").features[ln].disconnect()}catch(n){this.emit("error",new Zr(n?.message,n))}finally{q(this,ve,!1,"f")}_(this,J,"m",Mn).call(this)}async sendTransaction(n,e,t={}){try{const i=_(this,X,"f");if(!i)throw new ce;let o;if($ in _(this,U,"f").features)if(i.features.includes($))o=$;else if(x in _(this,U,"f").features&&i.features.includes(x))o=x;else throw new Ue;else if(x in _(this,U,"f").features){if(!i.features.includes(x))throw new Ue;o=x}else throw new xe;const a=Ri(e.rpcEndpoint);if(!i.chains.includes(a))throw new an;try{const{signers:s,...l}=t;let c;if(Ke(n)?(s?.length&&n.sign(s),c=n.serialize()):(n=await this.prepareTransaction(n,e,l),s?.length&&n.partialSign(...s),c=new Uint8Array(n.serialize({requireAllSignatures:!1,verifySignatures:!1}))),o===$){const[d]=await _(this,U,"f").features[$].signAndSendTransaction({account:i,chain:a,transaction:c,options:{preflightCommitment:Qt(l.preflightCommitment||e.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return Vo.encode(d.signature)}else{const[d]=await _(this,U,"f").features[x].signTransaction({account:i,chain:a,transaction:c,options:{preflightCommitment:Qt(l.preflightCommitment||e.commitment),minContextSlot:l.minContextSlot}});return await e.sendRawTransaction(d.signedTransaction,{...l,preflightCommitment:Qt(l.preflightCommitment||e.commitment)})}}catch(s){throw s instanceof Wn?s:new an(s?.message,s)}}catch(i){throw this.emit("error",i),i}}}X=new WeakMap,Me=new WeakMap,Te=new WeakMap,ve=new WeakMap,Je=new WeakMap,vt=new WeakMap,U=new WeakMap,St=new WeakMap,Tn=new WeakMap,J=new WeakSet,An=async function(n){try{if(this.connected||this.connecting)return;if(_(this,St,"f")!==G.Installed)throw new Xe;if(q(this,Te,!0,"f"),!_(this,U,"f").accounts.length)try{await _(this,U,"f").features[In].connect(n)}catch(t){throw new yt(t?.message,t)}const e=_(this,U,"f").accounts[0];if(!e)throw new Ue;_(this,J,"m",mt).call(this,e)}catch(e){throw this.emit("error",e),e}finally{q(this,Te,!1,"f")}},mt=function(n){let e;try{e=new Sr(n.address)}catch(t){throw new Ar(t?.message,t)}q(this,X,n,"f"),q(this,Me,e,"f"),_(this,J,"m",Qe).call(this),this.emit("connect",e)},Mn=function(){q(this,X,null,"f"),q(this,Me,null,"f"),_(this,J,"m",Qe).call(this),this.emit("disconnect")},Qe=function(){const n=$ in _(this,U,"f").features?_(this,U,"f").features[$].supportedTransactionVersions:_(this,U,"f").features[x].supportedTransactionVersions;q(this,vt,xo(n,["legacy"])?null:new Set(n),"f"),x in _(this,U,"f").features&&_(this,X,"f")?.features.includes(x)?(this.signTransaction=_(this,J,"m",wr),this.signAllTransactions=_(this,J,"m",mr)):(delete this.signTransaction,delete this.signAllTransactions),me in _(this,U,"f").features&&_(this,X,"f")?.features.includes(me)?this.signMessage=_(this,J,"m",pr):delete this.signMessage,Ce in _(this,U,"f").features?this.signIn=_(this,J,"m",yr):delete this.signIn},wr=async function(n){try{const e=_(this,X,"f");if(!e)throw new ce;if(!(x in _(this,U,"f").features))throw new xe;if(!e.features.includes(x))throw new Ue;try{const i=(await _(this,U,"f").features[x].signTransaction({account:e,transaction:Ke(n)?n.serialize():new Uint8Array(n.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Ke(n)?on.deserialize(i):rn.from(i)}catch(t){throw t instanceof Wn?t:new sn(t?.message,t)}}catch(e){throw this.emit("error",e),e}},mr=async function(n){try{const e=_(this,X,"f");if(!e)throw new ce;if(!(x in _(this,U,"f").features))throw new xe;if(!e.features.includes(x))throw new Ue;try{const t=await _(this,U,"f").features[x].signTransaction(...n.map(i=>({account:e,transaction:Ke(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return n.map((i,o)=>{const a=t[o].signedTransaction;return Ke(i)?on.deserialize(a):rn.from(a)})}catch(t){throw new sn(t?.message,t)}}catch(e){throw this.emit("error",e),e}},pr=async function(n){try{const e=_(this,X,"f");if(!e)throw new ce;if(!(me in _(this,U,"f").features))throw new xe;if(!e.features.includes(me))throw new Ue;try{return(await _(this,U,"f").features[me].signMessage({account:e,message:n}))[0].signature}catch(t){throw new Mr(t?.message,t)}}catch(e){throw this.emit("error",e),e}},yr=async function(n={}){try{if(!(Ce in _(this,U,"f").features))throw new xe;let e;try{[e]=await _(this,U,"f").features[Ce].signIn(n)}catch(t){throw new Pn(t?.message,t)}if(!e)throw new Pn;return _(this,J,"m",mt).call(this,e.account),e}catch(e){throw this.emit("error",e),e}};const Go=oi;var Yo=function(r,n,e,t){if(e==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!t:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?t:e==="a"?t.call(r):t?t.value:n.get(r)},Jo=function(r,n,e,t,i){if(t==="m")throw new TypeError("Private method is not writable");if(t==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?r!==n||!i:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t==="a"?i.call(r,e):i?i.value=e:n.set(r,e),e},pt;let te;const At=new Set;function Qo(r){Ze=void 0,At.add(r)}function Zo(r){Ze=void 0,At.delete(r)}const ke={};function Xo(){if(te||(te=Object.freeze({register:br,get:$o,on:ea}),typeof window>"u"))return te;const r=Object.freeze({register:br});try{window.addEventListener("wallet-standard:register-wallet",({detail:n})=>n(r))}catch(n){console.error(`wallet-standard:register-wallet event listener could not be added
`,n)}try{window.dispatchEvent(new ta(r))}catch(n){console.error(`wallet-standard:app-ready event could not be dispatched
`,n)}return te}function br(...r){return r=r.filter(n=>!At.has(n)),r.length?(r.forEach(n=>Qo(n)),ke.register?.forEach(n=>Cn(()=>n(...r))),function(){r.forEach(e=>Zo(e)),ke.unregister?.forEach(e=>Cn(()=>e(...r)))}):()=>{}}let Ze;function $o(){return Ze||(Ze=[...At]),Ze}function ea(r,n){return ke[r]?.push(n)||(ke[r]=[n]),function(){ke[r]=ke[r]?.filter(t=>n!==t)}}function Cn(r){try{r()}catch(n){console.error(n)}}class ta extends Event{get detail(){return Yo(this,pt,"f")}get type(){return"wallet-standard:app-ready"}constructor(n){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),pt.set(this,void 0),Jo(this,pt,n,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}pt=new WeakMap;function na(){if(te||(te=Xo(),typeof window>"u"))return te;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),te;const{register:n}=te,e=(...t)=>t.forEach(i=>Cn(()=>i({register:n})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:e})})}catch{return console.error("window.navigator.wallets could not be set"),te}return e(...r),te}function ra(r){const n=Er(()=>new Set),{get:e,on:t}=Er(()=>na()),[i,o]=N.useState(()=>_r(e()));N.useEffect(()=>{const s=[t("register",(...l)=>o(c=>[...c,..._r(l)])),t("unregister",(...l)=>o(c=>c.filter(d=>l.some(f=>f===d.wallet))))];return()=>s.forEach(l=>l())},[t]);const a=ia(i);return N.useEffect(()=>{if(!a)return;const s=new Set(i);new Set(a.filter(c=>!s.has(c))).forEach(c=>c.destroy())},[a,i]),N.useEffect(()=>()=>i.forEach(s=>s.destroy()),[]),N.useMemo(()=>[...i,...r.filter(({name:s})=>i.some(l=>l.name===s)?(n.has(s)||(n.add(s),console.warn(`${s} was registered as a Standard Wallet. The Wallet Adapter for ${s} can be removed from your app.`)),!1):!0)],[i,r,n])}function Er(r){const n=N.useRef(void 0);return n.current===void 0&&(n.current={value:r()}),n.current.value}function ia(r){const n=N.useRef(void 0);return N.useEffect(()=>{n.current=r}),n.current}function _r(r){return r.filter(Go).map(n=>new Ho({wallet:n}))}var ze;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(ze||(ze={}));function oa(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function aa({adapters:r,userAgentString:n}){return r.some(e=>e.name!==wt&&e.readyState===G.Installed)?ze.DESKTOP_WEB:n&&/android/i.test(n)&&!oa(n)?ze.MOBILE_WEB:ze.DESKTOP_WEB}function sa(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function la({children:r,wallets:n,adapter:e,isUnloadingRef:t,onAutoConnectRequest:i,onConnectError:o,onError:a,onSelectWallet:s}){const l=N.useRef(!1),[c,d]=N.useState(!1),f=N.useRef(!1),[h,g]=N.useState(!1),[C,A]=N.useState(()=>e?.publicKey??null),[B,R]=N.useState(()=>e?.connected??!1),m=N.useRef(a);N.useEffect(()=>(m.current=a,()=>{m.current=void 0}),[a]);const p=N.useRef((O,D)=>(t.current||(m.current?m.current(O,D):(console.error(O,D),O instanceof Xe&&typeof window<"u"&&D&&window.open(D.url,"_blank"))),O)),[E,P]=N.useState(()=>n.map(O=>({adapter:O,readyState:O.readyState})).filter(({readyState:O})=>O!==G.Unsupported));N.useEffect(()=>{P(D=>n.map((z,Q)=>{const ne=D[Q];return ne&&ne.adapter===z&&ne.readyState===z.readyState?ne:{adapter:z,readyState:z.readyState}}).filter(({readyState:z})=>z!==G.Unsupported));function O(D){P(z=>{const Q=z.findIndex(({adapter:ye})=>ye===this);if(Q===-1)return z;const{adapter:ne}=z[Q];return[...z.slice(0,Q),{adapter:ne,readyState:D},...z.slice(Q+1)].filter(({readyState:ye})=>ye!==G.Unsupported)})}return n.forEach(D=>D.on("readyStateChange",O,D)),()=>{n.forEach(D=>D.off("readyStateChange",O,D))}},[e,n]);const w=N.useMemo(()=>E.find(O=>O.adapter===e)??null,[e,E]);N.useEffect(()=>{if(!e)return;const O=Q=>{A(Q),l.current=!1,d(!1),R(!0),f.current=!1,g(!1)},D=()=>{t.current||(A(null),l.current=!1,d(!1),R(!1),f.current=!1,g(!1))},z=Q=>{p.current(Q,e)};return e.on("connect",O),e.on("disconnect",D),e.on("error",z),()=>{e.off("connect",O),e.off("disconnect",D),e.off("error",z),D()}},[e,t]);const M=N.useRef(!1);N.useEffect(()=>()=>{M.current=!1},[e]),N.useEffect(()=>{M.current||l.current||B||!i||!(w?.readyState===G.Installed||w?.readyState===G.Loadable)||(l.current=!0,d(!0),M.current=!0,(async function(){try{await i()}catch{o()}finally{d(!1),l.current=!1}})())},[B,i,o,w]);const b=N.useCallback(async(O,D,z)=>{if(!e)throw p.current(new Dn);if(!B)throw p.current(new ce,e);return await e.sendTransaction(O,D,z)},[e,B]),y=N.useMemo(()=>e&&"signTransaction"in e?async O=>{if(!B)throw p.current(new ce,e);return await e.signTransaction(O)}:void 0,[e,B]),W=N.useMemo(()=>e&&"signAllTransactions"in e?async O=>{if(!B)throw p.current(new ce,e);return await e.signAllTransactions(O)}:void 0,[e,B]),T=N.useMemo(()=>e&&"signMessage"in e?async O=>{if(!B)throw p.current(new ce,e);return await e.signMessage(O)}:void 0,[e,B]),v=N.useMemo(()=>e&&"signIn"in e?async O=>await e.signIn(O):void 0,[e]),S=N.useCallback(async()=>{if(l.current||f.current||w?.adapter.connected)return;if(!w)throw p.current(new Dn);const{adapter:O,readyState:D}=w;if(!(D===G.Installed||D===G.Loadable))throw p.current(new Xe,O);l.current=!0,d(!0);try{await O.connect()}catch(z){throw o(),z}finally{d(!1),l.current=!1}},[o,w]),L=N.useCallback(async()=>{if(!f.current&&e){f.current=!0,g(!0);try{await e.disconnect()}finally{g(!1),f.current=!1}}},[e]);return Rn.createElement(Yr.Provider,{value:{autoConnect:!!i,wallets:E,wallet:w,publicKey:C,connected:B,connecting:c,disconnecting:h,select:s,connect:S,disconnect:L,sendTransaction:b,signTransaction:y,signAllTransactions:W,signMessage:T,signIn:v}},r)}let nn;function ca(){return nn===void 0&&(nn=globalThis.navigator?.userAgent??null),nn}function vr(r){const n=ca();return aa({adapters:r,userAgentString:n})===ze.MOBILE_WEB}function da(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function _a({children:r,wallets:n,autoConnect:e,localStorageKey:t="walletName",onError:i}){const{connection:o}=ii(),a=ra(n),s=N.useMemo(()=>{if(!vr(a))return null;const m=a.find(p=>p.name===wt);return m||new Uo({addressSelector:ko(),appIdentity:{uri:da()},authorizationResultCache:zo(),cluster:sa(o?.rpcEndpoint),onWalletNotFound:jo()})},[a,o?.rpcEndpoint]),l=N.useMemo(()=>s==null||a.indexOf(s)!==-1?a:[s,...a],[a,s]),[c,d]=ai(t,null),f=N.useMemo(()=>l.find(m=>m.name===c)??null,[l,c]),h=N.useCallback(m=>{c!==m&&(f&&f.name!==wt&&f.disconnect(),d(m))},[f,d,c]);N.useEffect(()=>{if(!f)return;function m(){A.current||d(null)}return f.on("disconnect",m),()=>{f.off("disconnect",m)}},[f,a,d,c]);const g=N.useRef(!1),C=N.useMemo(()=>{if(!(!e||!f))return async()=>{(e===!0||await e(f))&&(g.current?await f.connect():await f.autoConnect())}},[e,f]),A=N.useRef(!1);N.useEffect(()=>{if(c===wt&&vr(a)){A.current=!1;return}function m(){A.current=!0}return window.addEventListener("beforeunload",m),()=>{window.removeEventListener("beforeunload",m)}},[a,c]);const B=N.useCallback(()=>{f&&h(null)},[f,h]),R=N.useCallback(m=>{g.current=!0,h(m)},[h]);return Rn.createElement(la,{wallets:l,adapter:f,isUnloadingRef:A,onAutoConnectRequest:C,onConnectError:B,onError:i,onSelectWallet:R},r)}export{Tr as ConnectionContext,ba as ConnectionProvider,Yr as WalletContext,Dn as WalletNotSelectedError,_a as WalletProvider,Ea as useAnchorWallet,ii as useConnection,ai as useLocalStorage,Gr as useWallet};
