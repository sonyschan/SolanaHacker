import{j as Gi,k as Io}from"./index-BlDiaEgJ.js";import{E as Bo}from"./index-BhVOWNjT.js";var ji={},Mn={};Mn.byteLength=ja;Mn.toByteArray=Za;Mn.fromByteArray=Qa;var De=[],Ce=[],Ha=typeof Uint8Array<"u"?Uint8Array:Array,ui="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var xr=0,Ga=ui.length;xr<Ga;++xr)De[xr]=ui[xr],Ce[ui.charCodeAt(xr)]=xr;Ce[45]=62;Ce[95]=63;function xo(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function ja(n){var t=xo(n),e=t[0],r=t[1];return(e+r)*3/4-r}function Ya(n,t,e){return(t+e)*3/4-e}function Za(n){var t,e=xo(n),r=e[0],s=e[1],i=new Ha(Ya(n,r,s)),o=0,g=s>0?r-4:r,y;for(y=0;y<g;y+=4)t=Ce[n.charCodeAt(y)]<<18|Ce[n.charCodeAt(y+1)]<<12|Ce[n.charCodeAt(y+2)]<<6|Ce[n.charCodeAt(y+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Ce[n.charCodeAt(y)]<<2|Ce[n.charCodeAt(y+1)]>>4,i[o++]=t&255),s===1&&(t=Ce[n.charCodeAt(y)]<<10|Ce[n.charCodeAt(y+1)]<<4|Ce[n.charCodeAt(y+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function Xa(n){return De[n>>18&63]+De[n>>12&63]+De[n>>6&63]+De[n&63]}function Ja(n,t,e){for(var r,s=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),s.push(Xa(r));return s.join("")}function Qa(n){for(var t,e=n.length,r=e%3,s=[],i=16383,o=0,g=e-r;o<g;o+=i)s.push(Ja(n,o,o+i>g?g:o+i));return r===1?(t=n[e-1],s.push(De[t>>2]+De[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],s.push(De[t>>10]+De[t>>4&63]+De[t<<2&63]+"=")),s.join("")}var Yi={};Yi.read=function(n,t,e,r,s){var i,o,g=s*8-r-1,y=(1<<g)-1,B=y>>1,b=-7,O=e?s-1:0,L=e?-1:1,T=n[t+O];for(O+=L,i=T&(1<<-b)-1,T>>=-b,b+=g;b>0;i=i*256+n[t+O],O+=L,b-=8);for(o=i&(1<<-b)-1,i>>=-b,b+=r;b>0;o=o*256+n[t+O],O+=L,b-=8);if(i===0)i=1-B;else{if(i===y)return o?NaN:(T?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-B}return(T?-1:1)*o*Math.pow(2,i-r)};Yi.write=function(n,t,e,r,s,i){var o,g,y,B=i*8-s-1,b=(1<<B)-1,O=b>>1,L=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=r?0:i-1,F=r?1:-1,K=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(g=isNaN(t)?1:0,o=b):(o=Math.floor(Math.log(t)/Math.LN2),t*(y=Math.pow(2,-o))<1&&(o--,y*=2),o+O>=1?t+=L/y:t+=L*Math.pow(2,1-O),t*y>=2&&(o++,y/=2),o+O>=b?(g=0,o=b):o+O>=1?(g=(t*y-1)*Math.pow(2,s),o=o+O):(g=t*Math.pow(2,O-1)*Math.pow(2,s),o=0));s>=8;n[e+T]=g&255,T+=F,g/=256,s-=8);for(o=o<<s|g,B+=s;B>0;n[e+T]=o&255,T+=F,o/=256,B-=8);n[e+T-F]|=K*128};(function(n){const t=Mn,e=Yi,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=b,n.SlowBuffer=at,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:g}=globalThis;b.TYPED_ARRAY_SUPPORT=y(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function y(){try{const k=new i(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,i.prototype),Object.setPrototypeOf(k,h),k.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function B(k){if(k>s)throw new RangeError('The value "'+k+'" is invalid for option "size"');const h=new i(k);return Object.setPrototypeOf(h,b.prototype),h}function b(k,h,d){if(typeof k=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return F(k)}return O(k,h,d)}b.poolSize=8192;function O(k,h,d){if(typeof k=="string")return K(k,h);if(o.isView(k))return Y(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(be(k,o)||k&&be(k.buffer,o)||typeof g<"u"&&(be(k,g)||k&&be(k.buffer,g)))return j(k,h,d);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=k.valueOf&&k.valueOf();if(x!=null&&x!==k)return b.from(x,h,d);const q=W(k);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return b.from(k[Symbol.toPrimitive]("string"),h,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}b.from=function(k,h,d){return O(k,h,d)},Object.setPrototypeOf(b.prototype,i.prototype),Object.setPrototypeOf(b,i);function L(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function T(k,h,d){return L(k),k<=0?B(k):h!==void 0?typeof d=="string"?B(k).fill(h,d):B(k).fill(h):B(k)}b.alloc=function(k,h,d){return T(k,h,d)};function F(k){return L(k),B(k<0?0:rt(k)|0)}b.allocUnsafe=function(k){return F(k)},b.allocUnsafeSlow=function(k){return F(k)};function K(k,h){if((typeof h!="string"||h==="")&&(h="utf8"),!b.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const d=it(k,h)|0;let x=B(d);const q=x.write(k,h);return q!==d&&(x=x.slice(0,q)),x}function H(k){const h=k.length<0?0:rt(k.length)|0,d=B(h);for(let x=0;x<h;x+=1)d[x]=k[x]&255;return d}function Y(k){if(be(k,i)){const h=new i(k);return j(h.buffer,h.byteOffset,h.byteLength)}return H(k)}function j(k,h,d){if(h<0||k.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<h+(d||0))throw new RangeError('"length" is outside of buffer bounds');let x;return h===void 0&&d===void 0?x=new i(k):d===void 0?x=new i(k,h):x=new i(k,h,d),Object.setPrototypeOf(x,b.prototype),x}function W(k){if(b.isBuffer(k)){const h=rt(k.length)|0,d=B(h);return d.length===0||k.copy(d,0,0,h),d}if(k.length!==void 0)return typeof k.length!="number"||qt(k.length)?B(0):H(k);if(k.type==="Buffer"&&Array.isArray(k.data))return H(k.data)}function rt(k){if(k>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return k|0}function at(k){return+k!=k&&(k=0),b.alloc(+k)}b.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==b.prototype},b.compare=function(h,d){if(be(h,i)&&(h=b.from(h,h.offset,h.byteLength)),be(d,i)&&(d=b.from(d,d.offset,d.byteLength)),!b.isBuffer(h)||!b.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===d)return 0;let x=h.length,q=d.length;for(let G=0,Q=Math.min(x,q);G<Q;++G)if(h[G]!==d[G]){x=h[G],q=d[G];break}return x<q?-1:q<x?1:0},b.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(h,d){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return b.alloc(0);let x;if(d===void 0)for(d=0,x=0;x<h.length;++x)d+=h[x].length;const q=b.allocUnsafe(d);let G=0;for(x=0;x<h.length;++x){let Q=h[x];if(be(Q,i))G+Q.length>q.length?(b.isBuffer(Q)||(Q=b.from(Q)),Q.copy(q,G)):i.prototype.set.call(q,Q,G);else if(b.isBuffer(Q))Q.copy(q,G);else throw new TypeError('"list" argument must be an Array of Buffers');G+=Q.length}return q};function it(k,h){if(b.isBuffer(k))return k.length;if(o.isView(k)||be(k,o))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const d=k.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&d===0)return 0;let q=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return Vt(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return _t(k).length;default:if(q)return x?-1:Vt(k).length;h=(""+h).toLowerCase(),q=!0}}b.byteLength=it;function st(k,h,d){let x=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,h>>>=0,d<=h))return"";for(k||(k="utf8");;)switch(k){case"hex":return c(this,h,d);case"utf8":case"utf-8":return E(this,h,d);case"ascii":return N(this,h,d);case"latin1":case"binary":return I(this,h,d);case"base64":return w(this,h,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u(this,h,d);default:if(x)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),x=!0}}b.prototype._isBuffer=!0;function nt(k,h,d){const x=k[h];k[h]=k[d],k[d]=x}b.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<h;d+=2)nt(this,d,d+1);return this},b.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<h;d+=4)nt(this,d,d+3),nt(this,d+1,d+2);return this},b.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<h;d+=8)nt(this,d,d+7),nt(this,d+1,d+6),nt(this,d+2,d+5),nt(this,d+3,d+4);return this},b.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?E(this,0,h):st.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(h){if(!b.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:b.compare(this,h)===0},b.prototype.inspect=function(){let h="";const d=n.INSPECT_MAX_BYTES;return h=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(h+=" ... "),"<Buffer "+h+">"},r&&(b.prototype[r]=b.prototype.inspect),b.prototype.compare=function(h,d,x,q,G){if(be(h,i)&&(h=b.from(h,h.offset,h.byteLength)),!b.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(d===void 0&&(d=0),x===void 0&&(x=h?h.length:0),q===void 0&&(q=0),G===void 0&&(G=this.length),d<0||x>h.length||q<0||G>this.length)throw new RangeError("out of range index");if(q>=G&&d>=x)return 0;if(q>=G)return-1;if(d>=x)return 1;if(d>>>=0,x>>>=0,q>>>=0,G>>>=0,this===h)return 0;let Q=G-q,It=x-d;const kt=Math.min(Q,It),vt=this.slice(q,G),Dt=h.slice(d,x);for(let mt=0;mt<kt;++mt)if(vt[mt]!==Dt[mt]){Q=vt[mt],It=Dt[mt];break}return Q<It?-1:It<Q?1:0};function U(k,h,d,x,q){if(k.length===0)return-1;if(typeof d=="string"?(x=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,qt(d)&&(d=q?0:k.length-1),d<0&&(d=k.length+d),d>=k.length){if(q)return-1;d=k.length-1}else if(d<0)if(q)d=0;else return-1;if(typeof h=="string"&&(h=b.from(h,x)),b.isBuffer(h))return h.length===0?-1:z(k,h,d,x,q);if(typeof h=="number")return h=h&255,typeof i.prototype.indexOf=="function"?q?i.prototype.indexOf.call(k,h,d):i.prototype.lastIndexOf.call(k,h,d):z(k,[h],d,x,q);throw new TypeError("val must be string, number or Buffer")}function z(k,h,d,x,q){let G=1,Q=k.length,It=h.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(k.length<2||h.length<2)return-1;G=2,Q/=2,It/=2,d/=2}function kt(Dt,mt){return G===1?Dt[mt]:Dt.readUInt16BE(mt*G)}let vt;if(q){let Dt=-1;for(vt=d;vt<Q;vt++)if(kt(k,vt)===kt(h,Dt===-1?0:vt-Dt)){if(Dt===-1&&(Dt=vt),vt-Dt+1===It)return Dt*G}else Dt!==-1&&(vt-=vt-Dt),Dt=-1}else for(d+It>Q&&(d=Q-It),vt=d;vt>=0;vt--){let Dt=!0;for(let mt=0;mt<It;mt++)if(kt(k,vt+mt)!==kt(h,mt)){Dt=!1;break}if(Dt)return vt}return-1}b.prototype.includes=function(h,d,x){return this.indexOf(h,d,x)!==-1},b.prototype.indexOf=function(h,d,x){return U(this,h,d,x,!0)},b.prototype.lastIndexOf=function(h,d,x){return U(this,h,d,x,!1)};function V(k,h,d,x){d=Number(d)||0;const q=k.length-d;x?(x=Number(x),x>q&&(x=q)):x=q;const G=h.length;x>G/2&&(x=G/2);let Q;for(Q=0;Q<x;++Q){const It=parseInt(h.substr(Q*2,2),16);if(qt(It))return Q;k[d+Q]=It}return Q}function A(k,h,d,x){return Ft(Vt(h,k.length-d),k,d,x)}function m(k,h,d,x){return Ft(Qt(h),k,d,x)}function a(k,h,d,x){return Ft(_t(h),k,d,x)}function f(k,h,d,x){return Ft(ee(h,k.length-d),k,d,x)}b.prototype.write=function(h,d,x,q){if(d===void 0)q="utf8",x=this.length,d=0;else if(x===void 0&&typeof d=="string")q=d,x=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(x)?(x=x>>>0,q===void 0&&(q="utf8")):(q=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const G=this.length-d;if((x===void 0||x>G)&&(x=G),h.length>0&&(x<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let Q=!1;for(;;)switch(q){case"hex":return V(this,h,d,x);case"utf8":case"utf-8":return A(this,h,d,x);case"ascii":case"latin1":case"binary":return m(this,h,d,x);case"base64":return a(this,h,d,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f(this,h,d,x);default:if(Q)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),Q=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(k,h,d){return h===0&&d===k.length?t.fromByteArray(k):t.fromByteArray(k.slice(h,d))}function E(k,h,d){d=Math.min(k.length,d);const x=[];let q=h;for(;q<d;){const G=k[q];let Q=null,It=G>239?4:G>223?3:G>191?2:1;if(q+It<=d){let kt,vt,Dt,mt;switch(It){case 1:G<128&&(Q=G);break;case 2:kt=k[q+1],(kt&192)===128&&(mt=(G&31)<<6|kt&63,mt>127&&(Q=mt));break;case 3:kt=k[q+1],vt=k[q+2],(kt&192)===128&&(vt&192)===128&&(mt=(G&15)<<12|(kt&63)<<6|vt&63,mt>2047&&(mt<55296||mt>57343)&&(Q=mt));break;case 4:kt=k[q+1],vt=k[q+2],Dt=k[q+3],(kt&192)===128&&(vt&192)===128&&(Dt&192)===128&&(mt=(G&15)<<18|(kt&63)<<12|(vt&63)<<6|Dt&63,mt>65535&&mt<1114112&&(Q=mt))}}Q===null?(Q=65533,It=1):Q>65535&&(Q-=65536,x.push(Q>>>10&1023|55296),Q=56320|Q&1023),x.push(Q),q+=It}return P(x)}const _=4096;function P(k){const h=k.length;if(h<=_)return String.fromCharCode.apply(String,k);let d="",x=0;for(;x<h;)d+=String.fromCharCode.apply(String,k.slice(x,x+=_));return d}function N(k,h,d){let x="";d=Math.min(k.length,d);for(let q=h;q<d;++q)x+=String.fromCharCode(k[q]&127);return x}function I(k,h,d){let x="";d=Math.min(k.length,d);for(let q=h;q<d;++q)x+=String.fromCharCode(k[q]);return x}function c(k,h,d){const x=k.length;(!h||h<0)&&(h=0),(!d||d<0||d>x)&&(d=x);let q="";for(let G=h;G<d;++G)q+=jt[k[G]];return q}function u(k,h,d){const x=k.slice(h,d);let q="";for(let G=0;G<x.length-1;G+=2)q+=String.fromCharCode(x[G]+x[G+1]*256);return q}b.prototype.slice=function(h,d){const x=this.length;h=~~h,d=d===void 0?x:~~d,h<0?(h+=x,h<0&&(h=0)):h>x&&(h=x),d<0?(d+=x,d<0&&(d=0)):d>x&&(d=x),d<h&&(d=h);const q=this.subarray(h,d);return Object.setPrototypeOf(q,b.prototype),q};function v(k,h,d){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+h>d)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(h,d,x){h=h>>>0,d=d>>>0,x||v(h,d,this.length);let q=this[h],G=1,Q=0;for(;++Q<d&&(G*=256);)q+=this[h+Q]*G;return q},b.prototype.readUintBE=b.prototype.readUIntBE=function(h,d,x){h=h>>>0,d=d>>>0,x||v(h,d,this.length);let q=this[h+--d],G=1;for(;d>0&&(G*=256);)q+=this[h+--d]*G;return q},b.prototype.readUint8=b.prototype.readUInt8=function(h,d){return h=h>>>0,d||v(h,1,this.length),this[h]},b.prototype.readUint16LE=b.prototype.readUInt16LE=function(h,d){return h=h>>>0,d||v(h,2,this.length),this[h]|this[h+1]<<8},b.prototype.readUint16BE=b.prototype.readUInt16BE=function(h,d){return h=h>>>0,d||v(h,2,this.length),this[h]<<8|this[h+1]},b.prototype.readUint32LE=b.prototype.readUInt32LE=function(h,d){return h=h>>>0,d||v(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},b.prototype.readUint32BE=b.prototype.readUInt32BE=function(h,d){return h=h>>>0,d||v(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},b.prototype.readBigUInt64LE=Ae(function(h){h=h>>>0,Le(h,"offset");const d=this[h],x=this[h+7];(d===void 0||x===void 0)&&Kt(h,this.length-8);const q=d+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,G=this[++h]+this[++h]*2**8+this[++h]*2**16+x*2**24;return BigInt(q)+(BigInt(G)<<BigInt(32))}),b.prototype.readBigUInt64BE=Ae(function(h){h=h>>>0,Le(h,"offset");const d=this[h],x=this[h+7];(d===void 0||x===void 0)&&Kt(h,this.length-8);const q=d*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],G=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+x;return(BigInt(q)<<BigInt(32))+BigInt(G)}),b.prototype.readIntLE=function(h,d,x){h=h>>>0,d=d>>>0,x||v(h,d,this.length);let q=this[h],G=1,Q=0;for(;++Q<d&&(G*=256);)q+=this[h+Q]*G;return G*=128,q>=G&&(q-=Math.pow(2,8*d)),q},b.prototype.readIntBE=function(h,d,x){h=h>>>0,d=d>>>0,x||v(h,d,this.length);let q=d,G=1,Q=this[h+--q];for(;q>0&&(G*=256);)Q+=this[h+--q]*G;return G*=128,Q>=G&&(Q-=Math.pow(2,8*d)),Q},b.prototype.readInt8=function(h,d){return h=h>>>0,d||v(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},b.prototype.readInt16LE=function(h,d){h=h>>>0,d||v(h,2,this.length);const x=this[h]|this[h+1]<<8;return x&32768?x|4294901760:x},b.prototype.readInt16BE=function(h,d){h=h>>>0,d||v(h,2,this.length);const x=this[h+1]|this[h]<<8;return x&32768?x|4294901760:x},b.prototype.readInt32LE=function(h,d){return h=h>>>0,d||v(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},b.prototype.readInt32BE=function(h,d){return h=h>>>0,d||v(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},b.prototype.readBigInt64LE=Ae(function(h){h=h>>>0,Le(h,"offset");const d=this[h],x=this[h+7];(d===void 0||x===void 0)&&Kt(h,this.length-8);const q=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(x<<24);return(BigInt(q)<<BigInt(32))+BigInt(d+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),b.prototype.readBigInt64BE=Ae(function(h){h=h>>>0,Le(h,"offset");const d=this[h],x=this[h+7];(d===void 0||x===void 0)&&Kt(h,this.length-8);const q=(d<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(q)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+x)}),b.prototype.readFloatLE=function(h,d){return h=h>>>0,d||v(h,4,this.length),e.read(this,h,!0,23,4)},b.prototype.readFloatBE=function(h,d){return h=h>>>0,d||v(h,4,this.length),e.read(this,h,!1,23,4)},b.prototype.readDoubleLE=function(h,d){return h=h>>>0,d||v(h,8,this.length),e.read(this,h,!0,52,8)},b.prototype.readDoubleBE=function(h,d){return h=h>>>0,d||v(h,8,this.length),e.read(this,h,!1,52,8)};function M(k,h,d,x,q,G){if(!b.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>q||h<G)throw new RangeError('"value" argument is out of bounds');if(d+x>k.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(h,d,x,q){if(h=+h,d=d>>>0,x=x>>>0,!q){const It=Math.pow(2,8*x)-1;M(this,h,d,x,It,0)}let G=1,Q=0;for(this[d]=h&255;++Q<x&&(G*=256);)this[d+Q]=h/G&255;return d+x},b.prototype.writeUintBE=b.prototype.writeUIntBE=function(h,d,x,q){if(h=+h,d=d>>>0,x=x>>>0,!q){const It=Math.pow(2,8*x)-1;M(this,h,d,x,It,0)}let G=x-1,Q=1;for(this[d+G]=h&255;--G>=0&&(Q*=256);)this[d+G]=h/Q&255;return d+x},b.prototype.writeUint8=b.prototype.writeUInt8=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,1,255,0),this[d]=h&255,d+1},b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,2,65535,0),this[d]=h&255,this[d+1]=h>>>8,d+2},b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,2,65535,0),this[d]=h>>>8,this[d+1]=h&255,d+2},b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,4,4294967295,0),this[d+3]=h>>>24,this[d+2]=h>>>16,this[d+1]=h>>>8,this[d]=h&255,d+4},b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,4,4294967295,0),this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255,d+4};function $(k,h,d,x,q){$t(h,x,q,k,d,7);let G=Number(h&BigInt(4294967295));k[d++]=G,G=G>>8,k[d++]=G,G=G>>8,k[d++]=G,G=G>>8,k[d++]=G;let Q=Number(h>>BigInt(32)&BigInt(4294967295));return k[d++]=Q,Q=Q>>8,k[d++]=Q,Q=Q>>8,k[d++]=Q,Q=Q>>8,k[d++]=Q,d}function et(k,h,d,x,q){$t(h,x,q,k,d,7);let G=Number(h&BigInt(4294967295));k[d+7]=G,G=G>>8,k[d+6]=G,G=G>>8,k[d+5]=G,G=G>>8,k[d+4]=G;let Q=Number(h>>BigInt(32)&BigInt(4294967295));return k[d+3]=Q,Q=Q>>8,k[d+2]=Q,Q=Q>>8,k[d+1]=Q,Q=Q>>8,k[d]=Q,d+8}b.prototype.writeBigUInt64LE=Ae(function(h,d=0){return $(this,h,d,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeBigUInt64BE=Ae(function(h,d=0){return et(this,h,d,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeIntLE=function(h,d,x,q){if(h=+h,d=d>>>0,!q){const kt=Math.pow(2,8*x-1);M(this,h,d,x,kt-1,-kt)}let G=0,Q=1,It=0;for(this[d]=h&255;++G<x&&(Q*=256);)h<0&&It===0&&this[d+G-1]!==0&&(It=1),this[d+G]=(h/Q>>0)-It&255;return d+x},b.prototype.writeIntBE=function(h,d,x,q){if(h=+h,d=d>>>0,!q){const kt=Math.pow(2,8*x-1);M(this,h,d,x,kt-1,-kt)}let G=x-1,Q=1,It=0;for(this[d+G]=h&255;--G>=0&&(Q*=256);)h<0&&It===0&&this[d+G+1]!==0&&(It=1),this[d+G]=(h/Q>>0)-It&255;return d+x},b.prototype.writeInt8=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,1,127,-128),h<0&&(h=255+h+1),this[d]=h&255,d+1},b.prototype.writeInt16LE=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,2,32767,-32768),this[d]=h&255,this[d+1]=h>>>8,d+2},b.prototype.writeInt16BE=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,2,32767,-32768),this[d]=h>>>8,this[d+1]=h&255,d+2},b.prototype.writeInt32LE=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,4,2147483647,-2147483648),this[d]=h&255,this[d+1]=h>>>8,this[d+2]=h>>>16,this[d+3]=h>>>24,d+4},b.prototype.writeInt32BE=function(h,d,x){return h=+h,d=d>>>0,x||M(this,h,d,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255,d+4},b.prototype.writeBigInt64LE=Ae(function(h,d=0){return $(this,h,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),b.prototype.writeBigInt64BE=Ae(function(h,d=0){return et(this,h,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function lt(k,h,d,x,q,G){if(d+x>k.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function pt(k,h,d,x,q){return h=+h,d=d>>>0,q||lt(k,h,d,4),e.write(k,h,d,x,23,4),d+4}b.prototype.writeFloatLE=function(h,d,x){return pt(this,h,d,!0,x)},b.prototype.writeFloatBE=function(h,d,x){return pt(this,h,d,!1,x)};function Pt(k,h,d,x,q){return h=+h,d=d>>>0,q||lt(k,h,d,8),e.write(k,h,d,x,52,8),d+8}b.prototype.writeDoubleLE=function(h,d,x){return Pt(this,h,d,!0,x)},b.prototype.writeDoubleBE=function(h,d,x){return Pt(this,h,d,!1,x)},b.prototype.copy=function(h,d,x,q){if(!b.isBuffer(h))throw new TypeError("argument should be a Buffer");if(x||(x=0),!q&&q!==0&&(q=this.length),d>=h.length&&(d=h.length),d||(d=0),q>0&&q<x&&(q=x),q===x||h.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),h.length-d<q-x&&(q=h.length-d+x);const G=q-x;return this===h&&typeof i.prototype.copyWithin=="function"?this.copyWithin(d,x,q):i.prototype.set.call(h,this.subarray(x,q),d),G},b.prototype.fill=function(h,d,x,q){if(typeof h=="string"){if(typeof d=="string"?(q=d,d=0,x=this.length):typeof x=="string"&&(q=x,x=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!b.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(h.length===1){const Q=h.charCodeAt(0);(q==="utf8"&&Q<128||q==="latin1")&&(h=Q)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(d<0||this.length<d||this.length<x)throw new RangeError("Out of range index");if(x<=d)return this;d=d>>>0,x=x===void 0?this.length:x>>>0,h||(h=0);let G;if(typeof h=="number")for(G=d;G<x;++G)this[G]=h;else{const Q=b.isBuffer(h)?h:b.from(h,q),It=Q.length;if(It===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(G=0;G<x-d;++G)this[G+d]=Q[G%It]}return this};const Rt={};function Ot(k,h,d){Rt[k]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}Ot("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ot("ERR_INVALID_ARG_TYPE",function(k,h){return`The "${k}" argument must be of type number. Received type ${typeof h}`},TypeError),Ot("ERR_OUT_OF_RANGE",function(k,h,d){let x=`The value of "${k}" is out of range.`,q=d;return Number.isInteger(d)&&Math.abs(d)>2**32?q=Ke(String(d)):typeof d=="bigint"&&(q=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(q=Ke(q)),q+="n"),x+=` It must be ${h}. Received ${q}`,x},RangeError);function Ke(k){let h="",d=k.length;const x=k[0]==="-"?1:0;for(;d>=x+4;d-=3)h=`_${k.slice(d-3,d)}${h}`;return`${k.slice(0,d)}${h}`}function Xt(k,h,d){Le(h,"offset"),(k[h]===void 0||k[h+d]===void 0)&&Kt(h,k.length-(d+1))}function $t(k,h,d,x,q,G){if(k>d||k<h){const Q=typeof h=="bigint"?"n":"";let It;throw h===0||h===BigInt(0)?It=`>= 0${Q} and < 2${Q} ** ${(G+1)*8}${Q}`:It=`>= -(2${Q} ** ${(G+1)*8-1}${Q}) and < 2 ** ${(G+1)*8-1}${Q}`,new Rt.ERR_OUT_OF_RANGE("value",It,k)}Xt(x,q,G)}function Le(k,h){if(typeof k!="number")throw new Rt.ERR_INVALID_ARG_TYPE(h,"number",k)}function Kt(k,h,d){throw Math.floor(k)!==k?(Le(k,d),new Rt.ERR_OUT_OF_RANGE("offset","an integer",k)):h<0?new Rt.ERR_BUFFER_OUT_OF_BOUNDS:new Rt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,k)}const Jt=/[^+/0-9A-Za-z-_]/g;function Br(k){if(k=k.split("=")[0],k=k.trim().replace(Jt,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function Vt(k,h){h=h||1/0;let d;const x=k.length;let q=null;const G=[];for(let Q=0;Q<x;++Q){if(d=k.charCodeAt(Q),d>55295&&d<57344){if(!q){if(d>56319){(h-=3)>-1&&G.push(239,191,189);continue}else if(Q+1===x){(h-=3)>-1&&G.push(239,191,189);continue}q=d;continue}if(d<56320){(h-=3)>-1&&G.push(239,191,189),q=d;continue}d=(q-55296<<10|d-56320)+65536}else q&&(h-=3)>-1&&G.push(239,191,189);if(q=null,d<128){if((h-=1)<0)break;G.push(d)}else if(d<2048){if((h-=2)<0)break;G.push(d>>6|192,d&63|128)}else if(d<65536){if((h-=3)<0)break;G.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((h-=4)<0)break;G.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return G}function Qt(k){const h=[];for(let d=0;d<k.length;++d)h.push(k.charCodeAt(d)&255);return h}function ee(k,h){let d,x,q;const G=[];for(let Q=0;Q<k.length&&!((h-=2)<0);++Q)d=k.charCodeAt(Q),x=d>>8,q=d%256,G.push(q),G.push(x);return G}function _t(k){return t.toByteArray(Br(k))}function Ft(k,h,d,x){let q;for(q=0;q<x&&!(q+d>=h.length||q>=k.length);++q)h[q+d]=k[q];return q}function be(k,h){return k instanceof h||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===h.name}function qt(k){return k!==k}const jt=(function(){const k="0123456789abcdef",h=new Array(256);for(let d=0;d<16;++d){const x=d*16;for(let q=0;q<16;++q)h[x+q]=k[d]+k[q]}return h})();function Ae(k){return typeof BigInt>"u"?Nt:k}function Nt(){throw new Error("BigInt not supported")}})(ji);const Be=ji.Buffer,wt=ji.Buffer,Ar=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function en(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Yr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function nr(n,...t){if(!en(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function Ao(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Yr(n.outputLen),Yr(n.blockLen)}function Nr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function _o(n,t){nr(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function tc(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function lr(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function hi(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Fe(n,t){return n<<32-t|n>>>t}const ec=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function rc(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function nc(n){for(let t=0;t<n.length;t++)n[t]=rc(n[t]);return n}const xs=ec?n=>n:nc,Ro=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ic=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function mr(n){if(nr(n),Ro)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=ic[n[e]];return t}const Ze={_0:48,_9:57,A:65,F:70,a:97,f:102};function As(n){if(n>=Ze._0&&n<=Ze._9)return n-Ze._0;if(n>=Ze.A&&n<=Ze.F)return n-(Ze.A-10);if(n>=Ze.a&&n<=Ze.f)return n-(Ze.a-10)}function kn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Ro)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=As(n.charCodeAt(i)),g=As(n.charCodeAt(i+1));if(o===void 0||g===void 0){const y=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+y+'" at index '+i)}r[s]=o*16+g}return r}function sc(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function Tn(n){return typeof n=="string"&&(n=sc(n)),nr(n),n}function We(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];nr(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class Zi{}function Xi(n){const t=r=>n().update(Tn(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Ji(n=32){if(Ar&&typeof Ar.getRandomValues=="function")return Ar.getRandomValues(new Uint8Array(n));if(Ar&&typeof Ar.randomBytes=="function")return Uint8Array.from(Ar.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function oc(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),g=Number(e&i),y=r?4:0,B=r?0:4;n.setUint32(t+y,o,r),n.setUint32(t+B,g,r)}function ac(n,t,e){return n&t^~n&e}function cc(n,t,e){return n&t^n&e^t&e}class Mo extends Zi{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=hi(this.buffer)}update(t){Nr(this),t=Tn(t),nr(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const g=Math.min(s-this.pos,i-o);if(g===s){const y=hi(t);for(;s<=i-o;o+=s)this.process(y,o);continue}r.set(t.subarray(o,o+g),this.pos),this.pos+=g,o+=g,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Nr(this),_o(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,lr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let O=o;O<s;O++)e[O]=0;oc(r,s-8,BigInt(this.length*8),i),this.process(r,0);const g=hi(t),y=this.outputLen;if(y%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const B=y/4,b=this.get();if(B>b.length)throw new Error("_sha2: outputLen bigger than state");for(let O=0;O<B;O++)g.setUint32(4*O,b[O],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:g}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=g,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const ir=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ke=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),un=BigInt(2**32-1),_s=BigInt(32);function uc(n,t=!1){return t?{h:Number(n&un),l:Number(n>>_s&un)}:{h:Number(n>>_s&un)|0,l:Number(n&un)|0}}function To(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:g}=uc(n[i],t);[r[i],s[i]]=[o,g]}return[r,s]}const Rs=(n,t,e)=>n>>>e,Ms=(n,t,e)=>n<<32-e|t>>>e,_r=(n,t,e)=>n>>>e|t<<32-e,Rr=(n,t,e)=>n<<32-e|t>>>e,hn=(n,t,e)=>n<<64-e|t>>>e-32,ln=(n,t,e)=>n>>>e-32|t<<64-e,hc=(n,t,e)=>n<<e|t>>>32-e,lc=(n,t,e)=>t<<e|n>>>32-e,fc=(n,t,e)=>t<<e-32|n>>>64-e,dc=(n,t,e)=>n<<e-32|t>>>64-e;function Xe(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const pc=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),gc=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,yc=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),mc=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,wc=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),bc=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,kc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sr=new Uint32Array(64);class vc extends Mo{constructor(t=32){super(64,t,8,!1),this.A=ir[0]|0,this.B=ir[1]|0,this.C=ir[2]|0,this.D=ir[3]|0,this.E=ir[4]|0,this.F=ir[5]|0,this.G=ir[6]|0,this.H=ir[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:g,H:y}=this;return[t,e,r,s,i,o,g,y]}set(t,e,r,s,i,o,g,y){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=g|0,this.H=y|0}process(t,e){for(let O=0;O<16;O++,e+=4)sr[O]=t.getUint32(e,!1);for(let O=16;O<64;O++){const L=sr[O-15],T=sr[O-2],F=Fe(L,7)^Fe(L,18)^L>>>3,K=Fe(T,17)^Fe(T,19)^T>>>10;sr[O]=K+sr[O-7]+F+sr[O-16]|0}let{A:r,B:s,C:i,D:o,E:g,F:y,G:B,H:b}=this;for(let O=0;O<64;O++){const L=Fe(g,6)^Fe(g,11)^Fe(g,25),T=b+L+ac(g,y,B)+kc[O]+sr[O]|0,K=(Fe(r,2)^Fe(r,13)^Fe(r,22))+cc(r,s,i)|0;b=B,B=y,y=g,g=o+T|0,o=i,i=s,s=r,r=T+K|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,g=g+this.E|0,y=y+this.F|0,B=B+this.G|0,b=b+this.H|0,this.set(r,s,i,o,g,y,B,b)}roundClean(){lr(sr)}destroy(){this.set(0,0,0,0,0,0,0,0),lr(this.buffer)}}const Po=To(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Sc=Po[0],Ec=Po[1],or=new Uint32Array(80),ar=new Uint32Array(80);class Ic extends Mo{constructor(t=64){super(128,t,16,!1),this.Ah=ke[0]|0,this.Al=ke[1]|0,this.Bh=ke[2]|0,this.Bl=ke[3]|0,this.Ch=ke[4]|0,this.Cl=ke[5]|0,this.Dh=ke[6]|0,this.Dl=ke[7]|0,this.Eh=ke[8]|0,this.El=ke[9]|0,this.Fh=ke[10]|0,this.Fl=ke[11]|0,this.Gh=ke[12]|0,this.Gl=ke[13]|0,this.Hh=ke[14]|0,this.Hl=ke[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:g,Dl:y,Eh:B,El:b,Fh:O,Fl:L,Gh:T,Gl:F,Hh:K,Hl:H}=this;return[t,e,r,s,i,o,g,y,B,b,O,L,T,F,K,H]}set(t,e,r,s,i,o,g,y,B,b,O,L,T,F,K,H){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=g|0,this.Dl=y|0,this.Eh=B|0,this.El=b|0,this.Fh=O|0,this.Fl=L|0,this.Gh=T|0,this.Gl=F|0,this.Hh=K|0,this.Hl=H|0}process(t,e){for(let W=0;W<16;W++,e+=4)or[W]=t.getUint32(e),ar[W]=t.getUint32(e+=4);for(let W=16;W<80;W++){const rt=or[W-15]|0,at=ar[W-15]|0,it=_r(rt,at,1)^_r(rt,at,8)^Rs(rt,at,7),st=Rr(rt,at,1)^Rr(rt,at,8)^Ms(rt,at,7),nt=or[W-2]|0,U=ar[W-2]|0,z=_r(nt,U,19)^hn(nt,U,61)^Rs(nt,U,6),V=Rr(nt,U,19)^ln(nt,U,61)^Ms(nt,U,6),A=yc(st,V,ar[W-7],ar[W-16]),m=mc(A,it,z,or[W-7],or[W-16]);or[W]=m|0,ar[W]=A|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:g,Cl:y,Dh:B,Dl:b,Eh:O,El:L,Fh:T,Fl:F,Gh:K,Gl:H,Hh:Y,Hl:j}=this;for(let W=0;W<80;W++){const rt=_r(O,L,14)^_r(O,L,18)^hn(O,L,41),at=Rr(O,L,14)^Rr(O,L,18)^ln(O,L,41),it=O&T^~O&K,st=L&F^~L&H,nt=wc(j,at,st,Ec[W],ar[W]),U=bc(nt,Y,rt,it,Sc[W],or[W]),z=nt|0,V=_r(r,s,28)^hn(r,s,34)^hn(r,s,39),A=Rr(r,s,28)^ln(r,s,34)^ln(r,s,39),m=r&i^r&g^i&g,a=s&o^s&y^o&y;Y=K|0,j=H|0,K=T|0,H=F|0,T=O|0,F=L|0,{h:O,l:L}=Xe(B|0,b|0,U|0,z|0),B=g|0,b=y|0,g=i|0,y=o|0,i=r|0,o=s|0;const f=pc(z,A,a);r=gc(f,U,V,m),s=f|0}({h:r,l:s}=Xe(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Xe(this.Bh|0,this.Bl|0,i|0,o|0),{h:g,l:y}=Xe(this.Ch|0,this.Cl|0,g|0,y|0),{h:B,l:b}=Xe(this.Dh|0,this.Dl|0,B|0,b|0),{h:O,l:L}=Xe(this.Eh|0,this.El|0,O|0,L|0),{h:T,l:F}=Xe(this.Fh|0,this.Fl|0,T|0,F|0),{h:K,l:H}=Xe(this.Gh|0,this.Gl|0,K|0,H|0),{h:Y,l:j}=Xe(this.Hh|0,this.Hl|0,Y|0,j|0),this.set(r,s,i,o,g,y,B,b,O,L,T,F,K,H,Y,j)}roundClean(){lr(or,ar)}destroy(){lr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Lo=Xi(()=>new vc),Bc=Xi(()=>new Ic);const Qi=BigInt(0),Ni=BigInt(1);function wr(n,t=""){if(typeof n!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function Oe(n,t,e=""){const r=en(n),s=n?.length,i=t!==void 0;if(!r||i&&s!==t){const o=e&&`"${e}" `,g=i?` of length ${t}`:"",y=r?`length=${s}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+g+", got "+y)}return n}function fn(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Co(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Qi:BigInt("0x"+n)}function Pn(n){return Co(mr(n))}function Zr(n){return nr(n),Co(mr(Uint8Array.from(n).reverse()))}function ts(n,t){return kn(n.toString(16).padStart(t*2,"0"))}function Uo(n,t){return ts(n,t).reverse()}function ae(n,t,e){let r;if(typeof t=="string")try{r=kn(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(en(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function Ts(n){return Uint8Array.from(n)}const li=n=>typeof n=="bigint"&&Qi<=n;function xc(n,t,e){return li(n)&&li(t)&&li(e)&&t<=n&&n<e}function zi(n,t,e,r){if(!xc(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Oo(n){let t;for(t=0;n>Qi;n>>=Ni,t+=1);return t}const rn=n=>(Ni<<BigInt(n))-Ni;function Ac(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=T=>new Uint8Array(T),s=T=>Uint8Array.of(T);let i=r(n),o=r(n),g=0;const y=()=>{i.fill(1),o.fill(0),g=0},B=(...T)=>e(o,i,...T),b=(T=r(0))=>{o=B(s(0),T),i=B(),T.length!==0&&(o=B(s(1),T),i=B())},O=()=>{if(g++>=1e3)throw new Error("drbg: tried 1000 values");let T=0;const F=[];for(;T<t;){i=B();const K=i.slice();F.push(K),T+=i.length}return We(...F)};return(T,F)=>{y(),b(T);let K;for(;!(K=F(O()));)b();return y(),K}}function nn(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const g=n[s];if(o&&g===void 0)return;const y=typeof g;if(y!==i||g===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${y}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function vn(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}const Me=BigInt(0),we=BigInt(1),dr=BigInt(2),No=BigInt(3),zo=BigInt(4),Ko=BigInt(5),_c=BigInt(7),Fo=BigInt(8),Rc=BigInt(9),qo=BigInt(16);function fe(n,t){const e=n%t;return e>=Me?e:t+e}function oe(n,t,e){let r=n;for(;t-- >Me;)r*=r,r%=e;return r}function Ps(n,t){if(n===Me)throw new Error("invert: expected non-zero number");if(t<=Me)throw new Error("invert: expected positive modulus, got "+t);let e=fe(n,t),r=t,s=Me,i=we;for(;e!==Me;){const g=r/e,y=r%e,B=s-i*g;r=e,e=y,s=i,i=B}if(r!==we)throw new Error("invert: does not exist");return fe(s,t)}function es(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function Do(n,t){const e=(n.ORDER+we)/zo,r=n.pow(t,e);return es(n,r,t),r}function Mc(n,t){const e=(n.ORDER-Ko)/Fo,r=n.mul(t,dr),s=n.pow(r,e),i=n.mul(t,s),o=n.mul(n.mul(i,dr),s),g=n.mul(i,n.sub(o,n.ONE));return es(n,g,t),g}function Tc(n){const t=vr(n),e=Wo(n),r=e(t,t.neg(t.ONE)),s=e(t,r),i=e(t,t.neg(r)),o=(n+_c)/qo;return(g,y)=>{let B=g.pow(y,o),b=g.mul(B,r);const O=g.mul(B,s),L=g.mul(B,i),T=g.eql(g.sqr(b),y),F=g.eql(g.sqr(O),y);B=g.cmov(B,b,T),b=g.cmov(L,O,F);const K=g.eql(g.sqr(b),y),H=g.cmov(B,b,K);return es(g,H,y),H}}function Wo(n){if(n<No)throw new Error("sqrt is not defined for small field");let t=n-we,e=0;for(;t%dr===Me;)t/=dr,e++;let r=dr;const s=vr(n);for(;Ls(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Do;let i=s.pow(r,t);const o=(t+we)/dr;return function(y,B){if(y.is0(B))return B;if(Ls(y,B)!==1)throw new Error("Cannot find square root");let b=e,O=y.mul(y.ONE,i),L=y.pow(B,t),T=y.pow(B,o);for(;!y.eql(L,y.ONE);){if(y.is0(L))return y.ZERO;let F=1,K=y.sqr(L);for(;!y.eql(K,y.ONE);)if(F++,K=y.sqr(K),F===b)throw new Error("Cannot find square root");const H=we<<BigInt(b-F-1),Y=y.pow(O,H);b=F,O=y.sqr(Y),L=y.mul(L,O),T=y.mul(T,Y)}return T}}function Pc(n){return n%zo===No?Do:n%Fo===Ko?Mc:n%qo===Rc?Tc(n):Wo(n)}const Lc=(n,t)=>(fe(n,t)&we)===we,Cc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Uc(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=Cc.reduce((r,s)=>(r[s]="function",r),t);return nn(n,e),n}function Oc(n,t,e){if(e<Me)throw new Error("invalid exponent, negatives unsupported");if(e===Me)return n.ONE;if(e===we)return t;let r=n.ONE,s=t;for(;e>Me;)e&we&&(r=n.mul(r,s)),s=n.sqr(s),e>>=we;return r}function $o(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((o,g,y)=>n.is0(g)?o:(r[y]=o,n.mul(o,g)),n.ONE),i=n.inv(s);return t.reduceRight((o,g,y)=>n.is0(g)?o:(r[y]=n.mul(o,r[y]),n.mul(o,g)),i),r}function Ls(n,t){const e=(n.ORDER-we)/dr,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Vo(n,t){t!==void 0&&Yr(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function vr(n,t,e=!1,r={}){if(n<=Me)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,o=!1,g;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const L=t;L.BITS&&(s=L.BITS),L.sqrt&&(i=L.sqrt),typeof L.isLE=="boolean"&&(e=L.isLE),typeof L.modFromBytes=="boolean"&&(o=L.modFromBytes),g=L.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:y,nByteLength:B}=Vo(n,s);if(B>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let b;const O=Object.freeze({ORDER:n,isLE:e,BITS:y,BYTES:B,MASK:rn(y),ZERO:Me,ONE:we,allowedLengths:g,create:L=>fe(L,n),isValid:L=>{if(typeof L!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof L);return Me<=L&&L<n},is0:L=>L===Me,isValidNot0:L=>!O.is0(L)&&O.isValid(L),isOdd:L=>(L&we)===we,neg:L=>fe(-L,n),eql:(L,T)=>L===T,sqr:L=>fe(L*L,n),add:(L,T)=>fe(L+T,n),sub:(L,T)=>fe(L-T,n),mul:(L,T)=>fe(L*T,n),pow:(L,T)=>Oc(O,L,T),div:(L,T)=>fe(L*Ps(T,n),n),sqrN:L=>L*L,addN:(L,T)=>L+T,subN:(L,T)=>L-T,mulN:(L,T)=>L*T,inv:L=>Ps(L,n),sqrt:i||(L=>(b||(b=Pc(n)),b(O,L))),toBytes:L=>e?Uo(L,B):ts(L,B),fromBytes:(L,T=!0)=>{if(g){if(!g.includes(L.length)||L.length>B)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+L.length);const K=new Uint8Array(B);K.set(L,e?0:K.length-L.length),L=K}if(L.length!==B)throw new Error("Field.fromBytes: expected "+B+" bytes, got "+L.length);let F=e?Zr(L):Pn(L);if(o&&(F=fe(F,n)),!T&&!O.isValid(F))throw new Error("invalid field element: outside of range 0..ORDER");return F},invertBatch:L=>$o(O,L),cmov:(L,T,F)=>F?T:L});return Object.freeze(O)}function Ho(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Go(n){const t=Ho(n);return t+Math.ceil(t/2)}function Nc(n,t,e=!1){const r=n.length,s=Ho(t),i=Go(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=e?Zr(n):Pn(n),g=fe(o,t-we)+we;return e?Uo(g,s):ts(g,s)}const zr=BigInt(0),pr=BigInt(1);function Sn(n,t){const e=t.negate();return n?e:t}function gr(n,t){const e=$o(n.Fp,t.map(r=>r.Z));return t.map((r,s)=>n.fromAffine(r.toAffine(e[s])))}function jo(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function fi(n,t){jo(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=rn(n),o=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Cs(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=e;let g=Number(n&s),y=n>>o;g>r&&(g-=i,y+=pr);const B=t*r,b=B+Math.abs(g)-1,O=g===0,L=g<0,T=t%2!==0;return{nextN:y,offset:b,isZero:O,isNeg:L,isNegF:T,offsetF:B}}function zc(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Kc(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const di=new WeakMap,Yo=new WeakMap;function pi(n){return Yo.get(n)||1}function Us(n){if(n!==zr)throw new Error("invalid wNAF")}class Zo{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let s=t;for(;e>zr;)e&pr&&(r=r.add(s)),s=s.double(),e>>=pr;return r}precomputeWindow(t,e){const{windows:r,windowSize:s}=fi(e,this.bits),i=[];let o=t,g=o;for(let y=0;y<r;y++){g=o,i.push(g);for(let B=1;B<s;B++)g=g.add(o),i.push(g);o=g.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=fi(t,this.bits);for(let g=0;g<o.windows;g++){const{nextN:y,offset:B,isZero:b,isNeg:O,isNegF:L,offsetF:T}=Cs(r,g,o);r=y,b?i=i.add(Sn(L,e[T])):s=s.add(Sn(O,e[B]))}return Us(r),{p:s,f:i}}wNAFUnsafe(t,e,r,s=this.ZERO){const i=fi(t,this.bits);for(let o=0;o<i.windows&&r!==zr;o++){const{nextN:g,offset:y,isZero:B,isNeg:b}=Cs(r,o,i);if(r=g,!B){const O=e[y];s=s.add(b?O.negate():O)}}return Us(r),s}getPrecomputes(t,e,r){let s=di.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof r=="function"&&(s=r(s)),di.set(e,s))),s}cached(t,e,r){const s=pi(t);return this.wNAF(s,this.getPrecomputes(s,t,r),e)}unsafe(t,e,r,s){const i=pi(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,s)}createCache(t,e){jo(e,this.bits),Yo.set(t,e),di.delete(t)}hasCache(t){return pi(t)!==1}}function Fc(n,t,e,r){let s=t,i=n.ZERO,o=n.ZERO;for(;e>zr||r>zr;)e&pr&&(i=i.add(s)),r&pr&&(o=o.add(s)),s=s.double(),e>>=pr,r>>=pr;return{p1:i,p2:o}}function Xo(n,t,e,r){zc(e,n),Kc(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,g=Oo(BigInt(s));let y=1;g>12?y=g-3:g>4?y=g-2:g>0&&(y=2);const B=rn(y),b=new Array(Number(B)+1).fill(o),O=Math.floor((t.BITS-1)/y)*y;let L=o;for(let T=O;T>=0;T-=y){b.fill(o);for(let K=0;K<i;K++){const H=r[K],Y=Number(H>>BigInt(T)&B);b[Y]=b[Y].add(e[K])}let F=o;for(let K=b.length-1,H=o;K>0;K--)H=H.add(b[K]),F=F.add(H);if(L=L.add(F),T!==0)for(let K=0;K<y;K++)L=L.double()}return L}function Os(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Uc(t),t}else return vr(n,{isLE:e})}function Jo(n,t,e={},r){if(r===void 0&&(r=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const y of["p","n","h"]){const B=t[y];if(!(typeof B=="bigint"&&B>zr))throw new Error(`CURVE.${y} must be positive bigint`)}const s=Os(t.p,e.Fp,r),i=Os(t.n,e.Fn,r),g=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const y of g)if(!s.isValid(t[y]))throw new Error(`CURVE.${y} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}const cr=BigInt(0),de=BigInt(1),gi=BigInt(2),qc=BigInt(8);function Dc(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),o=n.add(n.mul(t.a,s),i),g=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(o,g)}function Wc(n,t={}){const e=Jo("edwards",n,t,t.FpFnLE),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o}=i;nn(t,{},{uvRatio:"function"});const g=gi<<BigInt(s.BYTES*8)-de,y=H=>r.create(H),B=t.uvRatio||((H,Y)=>{try{return{isValid:!0,value:r.sqrt(r.div(H,Y))}}catch{return{isValid:!1,value:cr}}});if(!Dc(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function b(H,Y,j=!1){const W=j?de:cr;return zi("coordinate "+H,Y,W,g),Y}function O(H){if(!(H instanceof F))throw new Error("ExtendedPoint expected")}const L=vn((H,Y)=>{const{X:j,Y:W,Z:rt}=H,at=H.is0();Y==null&&(Y=at?qc:r.inv(rt));const it=y(j*Y),st=y(W*Y),nt=r.mul(rt,Y);if(at)return{x:cr,y:de};if(nt!==de)throw new Error("invZ was invalid");return{x:it,y:st}}),T=vn(H=>{const{a:Y,d:j}=i;if(H.is0())throw new Error("bad point: ZERO");const{X:W,Y:rt,Z:at,T:it}=H,st=y(W*W),nt=y(rt*rt),U=y(at*at),z=y(U*U),V=y(st*Y),A=y(U*y(V+nt)),m=y(z+y(j*y(st*nt)));if(A!==m)throw new Error("bad point: equation left != right (1)");const a=y(W*rt),f=y(at*it);if(a!==f)throw new Error("bad point: equation left != right (2)");return!0});class F{constructor(Y,j,W,rt){this.X=b("x",Y),this.Y=b("y",j),this.Z=b("z",W,!0),this.T=b("t",rt),Object.freeze(this)}static CURVE(){return i}static fromAffine(Y){if(Y instanceof F)throw new Error("extended point not allowed");const{x:j,y:W}=Y||{};return b("x",j),b("y",W),new F(j,W,de,y(j*W))}static fromBytes(Y,j=!1){const W=r.BYTES,{a:rt,d:at}=i;Y=Ts(Oe(Y,W,"point")),wr(j,"zip215");const it=Ts(Y),st=Y[W-1];it[W-1]=st&-129;const nt=Zr(it),U=j?g:r.ORDER;zi("point.y",nt,cr,U);const z=y(nt*nt),V=y(z-de),A=y(at*z-rt);let{isValid:m,value:a}=B(V,A);if(!m)throw new Error("bad point: invalid y coordinate");const f=(a&de)===de,w=(st&128)!==0;if(!j&&a===cr&&w)throw new Error("bad point: x=0 and x_0=1");return w!==f&&(a=y(-a)),F.fromAffine({x:a,y:nt})}static fromHex(Y,j=!1){return F.fromBytes(ae("point",Y),j)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(Y=8,j=!0){return K.createCache(this,Y),j||this.multiply(gi),this}assertValidity(){T(this)}equals(Y){O(Y);const{X:j,Y:W,Z:rt}=this,{X:at,Y:it,Z:st}=Y,nt=y(j*st),U=y(at*rt),z=y(W*st),V=y(it*rt);return nt===U&&z===V}is0(){return this.equals(F.ZERO)}negate(){return new F(y(-this.X),this.Y,this.Z,y(-this.T))}double(){const{a:Y}=i,{X:j,Y:W,Z:rt}=this,at=y(j*j),it=y(W*W),st=y(gi*y(rt*rt)),nt=y(Y*at),U=j+W,z=y(y(U*U)-at-it),V=nt+it,A=V-st,m=nt-it,a=y(z*A),f=y(V*m),w=y(z*m),E=y(A*V);return new F(a,f,E,w)}add(Y){O(Y);const{a:j,d:W}=i,{X:rt,Y:at,Z:it,T:st}=this,{X:nt,Y:U,Z:z,T:V}=Y,A=y(rt*nt),m=y(at*U),a=y(st*W*V),f=y(it*z),w=y((rt+at)*(nt+U)-A-m),E=f-a,_=f+a,P=y(m-j*A),N=y(w*E),I=y(_*P),c=y(w*P),u=y(E*_);return new F(N,I,u,c)}subtract(Y){return this.add(Y.negate())}multiply(Y){if(!s.isValidNot0(Y))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:j,f:W}=K.cached(this,Y,rt=>gr(F,rt));return gr(F,[j,W])[0]}multiplyUnsafe(Y,j=F.ZERO){if(!s.isValid(Y))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return Y===cr?F.ZERO:this.is0()||Y===de?this:K.unsafe(this,Y,W=>gr(F,W),j)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return K.unsafe(this,i.n).is0()}toAffine(Y){return L(this,Y)}clearCofactor(){return o===de?this:this.multiplyUnsafe(o)}toBytes(){const{x:Y,y:j}=this.toAffine(),W=r.toBytes(j);return W[W.length-1]|=Y&de?128:0,W}toHex(){return mr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(Y){return gr(F,Y)}static msm(Y,j){return Xo(F,s,Y,j)}_setWindowSize(Y){this.precompute(Y)}toRawBytes(){return this.toBytes()}}F.BASE=new F(i.Gx,i.Gy,de,y(i.Gx*i.Gy)),F.ZERO=new F(cr,de,de,cr),F.Fp=r,F.Fn=s;const K=new Zo(F,s.BITS);return F.BASE.precompute(8),F}function $c(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');nn(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=e,{BASE:s,Fp:i,Fn:o}=n,g=e.randomBytes||Ji,y=e.adjustScalarBytes||(U=>U),B=e.domain||((U,z,V)=>{if(wr(V,"phflag"),z.length||V)throw new Error("Contexts/pre-hash are not supported");return U});function b(U){return o.create(Zr(U))}function O(U){const z=W.secretKey;U=ae("private key",U,z);const V=ae("hashed private key",t(U),2*z),A=y(V.slice(0,z)),m=V.slice(z,2*z),a=b(A);return{head:A,prefix:m,scalar:a}}function L(U){const{head:z,prefix:V,scalar:A}=O(U),m=s.multiply(A),a=m.toBytes();return{head:z,prefix:V,scalar:A,point:m,pointBytes:a}}function T(U){return L(U).pointBytes}function F(U=Uint8Array.of(),...z){const V=We(...z);return b(t(B(V,ae("context",U),!!r)))}function K(U,z,V={}){U=ae("message",U),r&&(U=r(U));const{prefix:A,scalar:m,pointBytes:a}=L(z),f=F(V.context,A,U),w=s.multiply(f).toBytes(),E=F(V.context,w,a,U),_=o.create(f+E*m);if(!o.isValid(_))throw new Error("sign failed: invalid s");const P=We(w,o.toBytes(_));return Oe(P,W.signature,"result")}const H={zip215:!0};function Y(U,z,V,A=H){const{context:m,zip215:a}=A,f=W.signature;U=ae("signature",U,f),z=ae("message",z),V=ae("publicKey",V,W.publicKey),a!==void 0&&wr(a,"zip215"),r&&(z=r(z));const w=f/2,E=U.subarray(0,w),_=Zr(U.subarray(w,f));let P,N,I;try{P=n.fromBytes(V,a),N=n.fromBytes(E,a),I=s.multiplyUnsafe(_)}catch{return!1}if(!a&&P.isSmallOrder())return!1;const c=F(m,N.toBytes(),P.toBytes(),z);return N.add(P.multiplyUnsafe(c)).subtract(I).clearCofactor().is0()}const j=i.BYTES,W={secretKey:j,publicKey:j,signature:2*j,seed:j};function rt(U=g(W.seed)){return Oe(U,W.seed,"seed")}function at(U){const z=nt.randomSecretKey(U);return{secretKey:z,publicKey:T(z)}}function it(U){return en(U)&&U.length===o.BYTES}function st(U,z){try{return!!n.fromBytes(U,z)}catch{return!1}}const nt={getExtendedPublicKey:L,randomSecretKey:rt,isValidSecretKey:it,isValidPublicKey:st,toMontgomery(U){const{y:z}=n.fromBytes(U),V=W.publicKey,A=V===32;if(!A&&V!==57)throw new Error("only defined for 25519 and 448");const m=A?i.div(de+z,de-z):i.div(z-de,z+de);return i.toBytes(m)},toMontgomerySecret(U){const z=W.secretKey;Oe(U,z);const V=t(U.subarray(0,z));return y(V).subarray(0,z)},randomPrivateKey:rt,precompute(U=8,z=n.BASE){return z.precompute(U,!1)}};return Object.freeze({keygen:at,getPublicKey:T,sign:K,verify:Y,utils:nt,Point:n,lengths:W})}function Vc(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=vr(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,hash:n.hash,eddsaOpts:i}}function Hc(n,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function Gc(n){const{CURVE:t,curveOpts:e,hash:r,eddsaOpts:s}=Vc(n),i=Wc(t,e),o=$c(i,r,s);return Hc(n,o)}const jc=BigInt(1),Ns=BigInt(2);BigInt(3);const Yc=BigInt(5),Zc=BigInt(8),rs=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Qo={p:rs,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Zc,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Xc(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=rs,g=n*n%i*n%i,y=oe(g,Ns,i)*g%i,B=oe(y,jc,i)*n%i,b=oe(B,Yc,i)*B%i,O=oe(b,t,i)*b%i,L=oe(O,e,i)*O%i,T=oe(L,r,i)*L%i,F=oe(T,s,i)*T%i,K=oe(F,s,i)*T%i,H=oe(K,t,i)*b%i;return{pow_p_5_8:oe(H,Ns,i)*n%i,b2:g}}function Jc(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const zs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Qc(n,t){const e=rs,r=fe(t*t*t,e),s=fe(r*r*t,e),i=Xc(n*s).pow_p_5_8;let o=fe(n*r*i,e);const g=fe(t*o*o,e),y=o,B=fe(o*zs,e),b=g===n,O=g===fe(-n,e),L=g===fe(-n*zs,e);return b&&(o=y),(O||L)&&(o=B),Lc(o,e)&&(o=fe(-o,e)),{isValid:b||O,value:o}}const tu=vr(Qo.p,{isLE:!0}),eu={...Qo,Fp:tu,hash:Bc,adjustScalarBytes:Jc,uvRatio:Qc},Dr=Gc(eu);var mn={exports:{}},yi={},Ks;function ns(){return Ks||(Ks=1,(function(n){Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},e={};e.byteLength=b,e.toByteArray=L,e.fromByteArray=K;for(var r=[],s=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,y=o.length;g<y;++g)r[g]=o[g],s[o.charCodeAt(g)]=g;s[45]=62,s[95]=63;function B(j){var W=j.length;if(W%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var rt=j.indexOf("=");rt===-1&&(rt=W);var at=rt===W?0:4-rt%4;return[rt,at]}function b(j){var W=B(j),rt=W[0],at=W[1];return(rt+at)*3/4-at}function O(j,W,rt){return(W+rt)*3/4-rt}function L(j){var W,rt=B(j),at=rt[0],it=rt[1],st=new i(O(j,at,it)),nt=0,U=it>0?at-4:at,z;for(z=0;z<U;z+=4)W=s[j.charCodeAt(z)]<<18|s[j.charCodeAt(z+1)]<<12|s[j.charCodeAt(z+2)]<<6|s[j.charCodeAt(z+3)],st[nt++]=W>>16&255,st[nt++]=W>>8&255,st[nt++]=W&255;return it===2&&(W=s[j.charCodeAt(z)]<<2|s[j.charCodeAt(z+1)]>>4,st[nt++]=W&255),it===1&&(W=s[j.charCodeAt(z)]<<10|s[j.charCodeAt(z+1)]<<4|s[j.charCodeAt(z+2)]>>2,st[nt++]=W>>8&255,st[nt++]=W&255),st}function T(j){return r[j>>18&63]+r[j>>12&63]+r[j>>6&63]+r[j&63]}function F(j,W,rt){for(var at,it=[],st=W;st<rt;st+=3)at=(j[st]<<16&16711680)+(j[st+1]<<8&65280)+(j[st+2]&255),it.push(T(at));return it.join("")}function K(j){for(var W,rt=j.length,at=rt%3,it=[],st=16383,nt=0,U=rt-at;nt<U;nt+=st)it.push(F(j,nt,nt+st>U?U:nt+st));return at===1?(W=j[rt-1],it.push(r[W>>2]+r[W<<4&63]+"==")):at===2&&(W=(j[rt-2]<<8)+j[rt-1],it.push(r[W>>10]+r[W>>4&63]+r[W<<2&63]+"=")),it.join("")}var H={};H.read=function(j,W,rt,at,it){var st,nt,U=it*8-at-1,z=(1<<U)-1,V=z>>1,A=-7,m=rt?it-1:0,a=rt?-1:1,f=j[W+m];for(m+=a,st=f&(1<<-A)-1,f>>=-A,A+=U;A>0;st=st*256+j[W+m],m+=a,A-=8);for(nt=st&(1<<-A)-1,st>>=-A,A+=at;A>0;nt=nt*256+j[W+m],m+=a,A-=8);if(st===0)st=1-V;else{if(st===z)return nt?NaN:(f?-1:1)*(1/0);nt=nt+Math.pow(2,at),st=st-V}return(f?-1:1)*nt*Math.pow(2,st-at)},H.write=function(j,W,rt,at,it,st){var nt,U,z,V=st*8-it-1,A=(1<<V)-1,m=A>>1,a=it===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=at?0:st-1,w=at?1:-1,E=W<0||W===0&&1/W<0?1:0;for(W=Math.abs(W),isNaN(W)||W===1/0?(U=isNaN(W)?1:0,nt=A):(nt=Math.floor(Math.log(W)/Math.LN2),W*(z=Math.pow(2,-nt))<1&&(nt--,z*=2),nt+m>=1?W+=a/z:W+=a*Math.pow(2,1-m),W*z>=2&&(nt++,z/=2),nt+m>=A?(U=0,nt=A):nt+m>=1?(U=(W*z-1)*Math.pow(2,it),nt=nt+m):(U=W*Math.pow(2,m-1)*Math.pow(2,it),nt=0));it>=8;j[rt+f]=U&255,f+=w,U/=256,it-=8);for(nt=nt<<it|U,V+=it;V>0;j[rt+f]=nt&255,f+=w,nt/=256,V-=8);j[rt+f-w]|=E*128};(function(j){const W=e,rt=H,at=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;j.Buffer=A,j.SlowBuffer=u,j.INSPECT_MAX_BYTES=50;const it=2147483647;j.kMaxLength=it;const{Uint8Array:st,ArrayBuffer:nt,SharedArrayBuffer:U}=globalThis;A.TYPED_ARRAY_SUPPORT=z(),!A.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function z(){try{const S=new st(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,st.prototype),Object.setPrototypeOf(S,l),S.foo()===42}catch{return!1}}Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.buffer}}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.byteOffset}});function V(S){if(S>it)throw new RangeError('The value "'+S+'" is invalid for option "size"');const l=new st(S);return Object.setPrototypeOf(l,A.prototype),l}function A(S,l,p){if(typeof S=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(S)}return m(S,l,p)}A.poolSize=8192;function m(S,l,p){if(typeof S=="string")return E(S,l);if(nt.isView(S))return P(S);if(S==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);if(Te(S,nt)||S&&Te(S.buffer,nt)||typeof U<"u"&&(Te(S,U)||S&&Te(S.buffer,U)))return N(S,l,p);if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const R=S.valueOf&&S.valueOf();if(R!=null&&R!==S)return A.from(R,l,p);const D=I(S);if(D)return D;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof S[Symbol.toPrimitive]=="function")return A.from(S[Symbol.toPrimitive]("string"),l,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S)}A.from=function(S,l,p){return m(S,l,p)},Object.setPrototypeOf(A.prototype,st.prototype),Object.setPrototypeOf(A,st);function a(S){if(typeof S!="number")throw new TypeError('"size" argument must be of type number');if(S<0)throw new RangeError('The value "'+S+'" is invalid for option "size"')}function f(S,l,p){return a(S),S<=0?V(S):l!==void 0?typeof p=="string"?V(S).fill(l,p):V(S).fill(l):V(S)}A.alloc=function(S,l,p){return f(S,l,p)};function w(S){return a(S),V(S<0?0:c(S)|0)}A.allocUnsafe=function(S){return w(S)},A.allocUnsafeSlow=function(S){return w(S)};function E(S,l){if((typeof l!="string"||l==="")&&(l="utf8"),!A.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const p=v(S,l)|0;let R=V(p);const D=R.write(S,l);return D!==p&&(R=R.slice(0,D)),R}function _(S){const l=S.length<0?0:c(S.length)|0,p=V(l);for(let R=0;R<l;R+=1)p[R]=S[R]&255;return p}function P(S){if(Te(S,st)){const l=new st(S);return N(l.buffer,l.byteOffset,l.byteLength)}return _(S)}function N(S,l,p){if(l<0||S.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(S.byteLength<l+(p||0))throw new RangeError('"length" is outside of buffer bounds');let R;return l===void 0&&p===void 0?R=new st(S):p===void 0?R=new st(S,l):R=new st(S,l,p),Object.setPrototypeOf(R,A.prototype),R}function I(S){if(A.isBuffer(S)){const l=c(S.length)|0,p=V(l);return p.length===0||S.copy(p,0,0,l),p}if(S.length!==void 0)return typeof S.length!="number"||te(S.length)?V(0):_(S);if(S.type==="Buffer"&&Array.isArray(S.data))return _(S.data)}function c(S){if(S>=it)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+it.toString(16)+" bytes");return S|0}function u(S){return+S!=S&&(S=0),A.alloc(+S)}A.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==A.prototype},A.compare=function(l,p){if(Te(l,st)&&(l=A.from(l,l.offset,l.byteLength)),Te(p,st)&&(p=A.from(p,p.offset,p.byteLength)),!A.isBuffer(l)||!A.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===p)return 0;let R=l.length,D=p.length;for(let Z=0,tt=Math.min(R,D);Z<tt;++Z)if(l[Z]!==p[Z]){R=l[Z],D=p[Z];break}return R<D?-1:D<R?1:0},A.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(l,p){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return A.alloc(0);let R;if(p===void 0)for(p=0,R=0;R<l.length;++R)p+=l[R].length;const D=A.allocUnsafe(p);let Z=0;for(R=0;R<l.length;++R){let tt=l[R];if(Te(tt,st))Z+tt.length>D.length?(A.isBuffer(tt)||(tt=A.from(tt)),tt.copy(D,Z)):st.prototype.set.call(D,tt,Z);else if(A.isBuffer(tt))tt.copy(D,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=tt.length}return D};function v(S,l){if(A.isBuffer(S))return S.length;if(nt.isView(S)||Te(S,nt))return S.byteLength;if(typeof S!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof S);const p=S.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&p===0)return 0;let D=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return kt(S).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return mt(S).length;default:if(D)return R?-1:kt(S).length;l=(""+l).toLowerCase(),D=!0}}A.byteLength=v;function M(S,l,p){let R=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,l>>>=0,p<=l))return"";for(S||(S="utf8");;)switch(S){case"hex":return Vt(this,l,p);case"utf8":case"utf-8":return $t(this,l,p);case"ascii":return Jt(this,l,p);case"latin1":case"binary":return Br(this,l,p);case"base64":return Xt(this,l,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qt(this,l,p);default:if(R)throw new TypeError("Unknown encoding: "+S);S=(S+"").toLowerCase(),R=!0}}A.prototype._isBuffer=!0;function $(S,l,p){const R=S[l];S[l]=S[p],S[p]=R}A.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<l;p+=2)$(this,p,p+1);return this},A.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<l;p+=4)$(this,p,p+3),$(this,p+1,p+2);return this},A.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<l;p+=8)$(this,p,p+7),$(this,p+1,p+6),$(this,p+2,p+5),$(this,p+3,p+4);return this},A.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?$t(this,0,l):M.apply(this,arguments)},A.prototype.toLocaleString=A.prototype.toString,A.prototype.equals=function(l){if(!A.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:A.compare(this,l)===0},A.prototype.inspect=function(){let l="";const p=j.INSPECT_MAX_BYTES;return l=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(l+=" ... "),"<Buffer "+l+">"},at&&(A.prototype[at]=A.prototype.inspect),A.prototype.compare=function(l,p,R,D,Z){if(Te(l,st)&&(l=A.from(l,l.offset,l.byteLength)),!A.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(p===void 0&&(p=0),R===void 0&&(R=l?l.length:0),D===void 0&&(D=0),Z===void 0&&(Z=this.length),p<0||R>l.length||D<0||Z>this.length)throw new RangeError("out of range index");if(D>=Z&&p>=R)return 0;if(D>=Z)return-1;if(p>=R)return 1;if(p>>>=0,R>>>=0,D>>>=0,Z>>>=0,this===l)return 0;let tt=Z-D,Bt=R-p;const Et=Math.min(tt,Bt),St=this.slice(D,Z),Zt=l.slice(p,R);for(let bt=0;bt<Et;++bt)if(St[bt]!==Zt[bt]){tt=St[bt],Bt=Zt[bt];break}return tt<Bt?-1:Bt<tt?1:0};function et(S,l,p,R,D){if(S.length===0)return-1;if(typeof p=="string"?(R=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,te(p)&&(p=D?0:S.length-1),p<0&&(p=S.length+p),p>=S.length){if(D)return-1;p=S.length-1}else if(p<0)if(D)p=0;else return-1;if(typeof l=="string"&&(l=A.from(l,R)),A.isBuffer(l))return l.length===0?-1:lt(S,l,p,R,D);if(typeof l=="number")return l=l&255,typeof st.prototype.indexOf=="function"?D?st.prototype.indexOf.call(S,l,p):st.prototype.lastIndexOf.call(S,l,p):lt(S,[l],p,R,D);throw new TypeError("val must be string, number or Buffer")}function lt(S,l,p,R,D){let Z=1,tt=S.length,Bt=l.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(S.length<2||l.length<2)return-1;Z=2,tt/=2,Bt/=2,p/=2}function Et(Zt,bt){return Z===1?Zt[bt]:Zt.readUInt16BE(bt*Z)}let St;if(D){let Zt=-1;for(St=p;St<tt;St++)if(Et(S,St)===Et(l,Zt===-1?0:St-Zt)){if(Zt===-1&&(Zt=St),St-Zt+1===Bt)return Zt*Z}else Zt!==-1&&(St-=St-Zt),Zt=-1}else for(p+Bt>tt&&(p=tt-Bt),St=p;St>=0;St--){let Zt=!0;for(let bt=0;bt<Bt;bt++)if(Et(S,St+bt)!==Et(l,bt)){Zt=!1;break}if(Zt)return St}return-1}A.prototype.includes=function(l,p,R){return this.indexOf(l,p,R)!==-1},A.prototype.indexOf=function(l,p,R){return et(this,l,p,R,!0)},A.prototype.lastIndexOf=function(l,p,R){return et(this,l,p,R,!1)};function pt(S,l,p,R){p=Number(p)||0;const D=S.length-p;R?(R=Number(R),R>D&&(R=D)):R=D;const Z=l.length;R>Z/2&&(R=Z/2);let tt;for(tt=0;tt<R;++tt){const Bt=parseInt(l.substr(tt*2,2),16);if(te(Bt))return tt;S[p+tt]=Bt}return tt}function Pt(S,l,p,R){return Yt(kt(l,S.length-p),S,p,R)}function Rt(S,l,p,R){return Yt(vt(l),S,p,R)}function Ot(S,l,p,R){return Yt(mt(l),S,p,R)}function Ke(S,l,p,R){return Yt(Dt(l,S.length-p),S,p,R)}A.prototype.write=function(l,p,R,D){if(p===void 0)D="utf8",R=this.length,p=0;else if(R===void 0&&typeof p=="string")D=p,R=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(R)?(R=R>>>0,D===void 0&&(D="utf8")):(D=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-p;if((R===void 0||R>Z)&&(R=Z),l.length>0&&(R<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");let tt=!1;for(;;)switch(D){case"hex":return pt(this,l,p,R);case"utf8":case"utf-8":return Pt(this,l,p,R);case"ascii":case"latin1":case"binary":return Rt(this,l,p,R);case"base64":return Ot(this,l,p,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ke(this,l,p,R);default:if(tt)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),tt=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Xt(S,l,p){return l===0&&p===S.length?W.fromByteArray(S):W.fromByteArray(S.slice(l,p))}function $t(S,l,p){p=Math.min(S.length,p);const R=[];let D=l;for(;D<p;){const Z=S[D];let tt=null,Bt=Z>239?4:Z>223?3:Z>191?2:1;if(D+Bt<=p){let Et,St,Zt,bt;switch(Bt){case 1:Z<128&&(tt=Z);break;case 2:Et=S[D+1],(Et&192)===128&&(bt=(Z&31)<<6|Et&63,bt>127&&(tt=bt));break;case 3:Et=S[D+1],St=S[D+2],(Et&192)===128&&(St&192)===128&&(bt=(Z&15)<<12|(Et&63)<<6|St&63,bt>2047&&(bt<55296||bt>57343)&&(tt=bt));break;case 4:Et=S[D+1],St=S[D+2],Zt=S[D+3],(Et&192)===128&&(St&192)===128&&(Zt&192)===128&&(bt=(Z&15)<<18|(Et&63)<<12|(St&63)<<6|Zt&63,bt>65535&&bt<1114112&&(tt=bt))}}tt===null?(tt=65533,Bt=1):tt>65535&&(tt-=65536,R.push(tt>>>10&1023|55296),tt=56320|tt&1023),R.push(tt),D+=Bt}return Kt(R)}const Le=4096;function Kt(S){const l=S.length;if(l<=Le)return String.fromCharCode.apply(String,S);let p="",R=0;for(;R<l;)p+=String.fromCharCode.apply(String,S.slice(R,R+=Le));return p}function Jt(S,l,p){let R="";p=Math.min(S.length,p);for(let D=l;D<p;++D)R+=String.fromCharCode(S[D]&127);return R}function Br(S,l,p){let R="";p=Math.min(S.length,p);for(let D=l;D<p;++D)R+=String.fromCharCode(S[D]);return R}function Vt(S,l,p){const R=S.length;(!l||l<0)&&(l=0),(!p||p<0||p>R)&&(p=R);let D="";for(let Z=l;Z<p;++Z)D+=ie[S[Z]];return D}function Qt(S,l,p){const R=S.slice(l,p);let D="";for(let Z=0;Z<R.length-1;Z+=2)D+=String.fromCharCode(R[Z]+R[Z+1]*256);return D}A.prototype.slice=function(l,p){const R=this.length;l=~~l,p=p===void 0?R:~~p,l<0?(l+=R,l<0&&(l=0)):l>R&&(l=R),p<0?(p+=R,p<0&&(p=0)):p>R&&(p=R),p<l&&(p=l);const D=this.subarray(l,p);return Object.setPrototypeOf(D,A.prototype),D};function ee(S,l,p){if(S%1!==0||S<0)throw new RangeError("offset is not uint");if(S+l>p)throw new RangeError("Trying to access beyond buffer length")}A.prototype.readUintLE=A.prototype.readUIntLE=function(l,p,R){l=l>>>0,p=p>>>0,R||ee(l,p,this.length);let D=this[l],Z=1,tt=0;for(;++tt<p&&(Z*=256);)D+=this[l+tt]*Z;return D},A.prototype.readUintBE=A.prototype.readUIntBE=function(l,p,R){l=l>>>0,p=p>>>0,R||ee(l,p,this.length);let D=this[l+--p],Z=1;for(;p>0&&(Z*=256);)D+=this[l+--p]*Z;return D},A.prototype.readUint8=A.prototype.readUInt8=function(l,p){return l=l>>>0,p||ee(l,1,this.length),this[l]},A.prototype.readUint16LE=A.prototype.readUInt16LE=function(l,p){return l=l>>>0,p||ee(l,2,this.length),this[l]|this[l+1]<<8},A.prototype.readUint16BE=A.prototype.readUInt16BE=function(l,p){return l=l>>>0,p||ee(l,2,this.length),this[l]<<8|this[l+1]},A.prototype.readUint32LE=A.prototype.readUInt32LE=function(l,p){return l=l>>>0,p||ee(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},A.prototype.readUint32BE=A.prototype.readUInt32BE=function(l,p){return l=l>>>0,p||ee(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},A.prototype.readBigUInt64LE=Ue(function(l){l=l>>>0,q(l,"offset");const p=this[l],R=this[l+7];(p===void 0||R===void 0)&&G(l,this.length-8);const D=p+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,Z=this[++l]+this[++l]*2**8+this[++l]*2**16+R*2**24;return BigInt(D)+(BigInt(Z)<<BigInt(32))}),A.prototype.readBigUInt64BE=Ue(function(l){l=l>>>0,q(l,"offset");const p=this[l],R=this[l+7];(p===void 0||R===void 0)&&G(l,this.length-8);const D=p*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],Z=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+R;return(BigInt(D)<<BigInt(32))+BigInt(Z)}),A.prototype.readIntLE=function(l,p,R){l=l>>>0,p=p>>>0,R||ee(l,p,this.length);let D=this[l],Z=1,tt=0;for(;++tt<p&&(Z*=256);)D+=this[l+tt]*Z;return Z*=128,D>=Z&&(D-=Math.pow(2,8*p)),D},A.prototype.readIntBE=function(l,p,R){l=l>>>0,p=p>>>0,R||ee(l,p,this.length);let D=p,Z=1,tt=this[l+--D];for(;D>0&&(Z*=256);)tt+=this[l+--D]*Z;return Z*=128,tt>=Z&&(tt-=Math.pow(2,8*p)),tt},A.prototype.readInt8=function(l,p){return l=l>>>0,p||ee(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},A.prototype.readInt16LE=function(l,p){l=l>>>0,p||ee(l,2,this.length);const R=this[l]|this[l+1]<<8;return R&32768?R|4294901760:R},A.prototype.readInt16BE=function(l,p){l=l>>>0,p||ee(l,2,this.length);const R=this[l+1]|this[l]<<8;return R&32768?R|4294901760:R},A.prototype.readInt32LE=function(l,p){return l=l>>>0,p||ee(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},A.prototype.readInt32BE=function(l,p){return l=l>>>0,p||ee(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},A.prototype.readBigInt64LE=Ue(function(l){l=l>>>0,q(l,"offset");const p=this[l],R=this[l+7];(p===void 0||R===void 0)&&G(l,this.length-8);const D=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(R<<24);return(BigInt(D)<<BigInt(32))+BigInt(p+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),A.prototype.readBigInt64BE=Ue(function(l){l=l>>>0,q(l,"offset");const p=this[l],R=this[l+7];(p===void 0||R===void 0)&&G(l,this.length-8);const D=(p<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(D)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+R)}),A.prototype.readFloatLE=function(l,p){return l=l>>>0,p||ee(l,4,this.length),rt.read(this,l,!0,23,4)},A.prototype.readFloatBE=function(l,p){return l=l>>>0,p||ee(l,4,this.length),rt.read(this,l,!1,23,4)},A.prototype.readDoubleLE=function(l,p){return l=l>>>0,p||ee(l,8,this.length),rt.read(this,l,!0,52,8)},A.prototype.readDoubleBE=function(l,p){return l=l>>>0,p||ee(l,8,this.length),rt.read(this,l,!1,52,8)};function _t(S,l,p,R,D,Z){if(!A.isBuffer(S))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>D||l<Z)throw new RangeError('"value" argument is out of bounds');if(p+R>S.length)throw new RangeError("Index out of range")}A.prototype.writeUintLE=A.prototype.writeUIntLE=function(l,p,R,D){if(l=+l,p=p>>>0,R=R>>>0,!D){const Bt=Math.pow(2,8*R)-1;_t(this,l,p,R,Bt,0)}let Z=1,tt=0;for(this[p]=l&255;++tt<R&&(Z*=256);)this[p+tt]=l/Z&255;return p+R},A.prototype.writeUintBE=A.prototype.writeUIntBE=function(l,p,R,D){if(l=+l,p=p>>>0,R=R>>>0,!D){const Bt=Math.pow(2,8*R)-1;_t(this,l,p,R,Bt,0)}let Z=R-1,tt=1;for(this[p+Z]=l&255;--Z>=0&&(tt*=256);)this[p+Z]=l/tt&255;return p+R},A.prototype.writeUint8=A.prototype.writeUInt8=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,1,255,0),this[p]=l&255,p+1},A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,2,65535,0),this[p]=l&255,this[p+1]=l>>>8,p+2},A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,2,65535,0),this[p]=l>>>8,this[p+1]=l&255,p+2},A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,4,4294967295,0),this[p+3]=l>>>24,this[p+2]=l>>>16,this[p+1]=l>>>8,this[p]=l&255,p+4},A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,4,4294967295,0),this[p]=l>>>24,this[p+1]=l>>>16,this[p+2]=l>>>8,this[p+3]=l&255,p+4};function Ft(S,l,p,R,D){x(l,R,D,S,p,7);let Z=Number(l&BigInt(4294967295));S[p++]=Z,Z=Z>>8,S[p++]=Z,Z=Z>>8,S[p++]=Z,Z=Z>>8,S[p++]=Z;let tt=Number(l>>BigInt(32)&BigInt(4294967295));return S[p++]=tt,tt=tt>>8,S[p++]=tt,tt=tt>>8,S[p++]=tt,tt=tt>>8,S[p++]=tt,p}function be(S,l,p,R,D){x(l,R,D,S,p,7);let Z=Number(l&BigInt(4294967295));S[p+7]=Z,Z=Z>>8,S[p+6]=Z,Z=Z>>8,S[p+5]=Z,Z=Z>>8,S[p+4]=Z;let tt=Number(l>>BigInt(32)&BigInt(4294967295));return S[p+3]=tt,tt=tt>>8,S[p+2]=tt,tt=tt>>8,S[p+1]=tt,tt=tt>>8,S[p]=tt,p+8}A.prototype.writeBigUInt64LE=Ue(function(l,p=0){return Ft(this,l,p,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeBigUInt64BE=Ue(function(l,p=0){return be(this,l,p,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeIntLE=function(l,p,R,D){if(l=+l,p=p>>>0,!D){const Et=Math.pow(2,8*R-1);_t(this,l,p,R,Et-1,-Et)}let Z=0,tt=1,Bt=0;for(this[p]=l&255;++Z<R&&(tt*=256);)l<0&&Bt===0&&this[p+Z-1]!==0&&(Bt=1),this[p+Z]=(l/tt>>0)-Bt&255;return p+R},A.prototype.writeIntBE=function(l,p,R,D){if(l=+l,p=p>>>0,!D){const Et=Math.pow(2,8*R-1);_t(this,l,p,R,Et-1,-Et)}let Z=R-1,tt=1,Bt=0;for(this[p+Z]=l&255;--Z>=0&&(tt*=256);)l<0&&Bt===0&&this[p+Z+1]!==0&&(Bt=1),this[p+Z]=(l/tt>>0)-Bt&255;return p+R},A.prototype.writeInt8=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,1,127,-128),l<0&&(l=255+l+1),this[p]=l&255,p+1},A.prototype.writeInt16LE=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,2,32767,-32768),this[p]=l&255,this[p+1]=l>>>8,p+2},A.prototype.writeInt16BE=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,2,32767,-32768),this[p]=l>>>8,this[p+1]=l&255,p+2},A.prototype.writeInt32LE=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,4,2147483647,-2147483648),this[p]=l&255,this[p+1]=l>>>8,this[p+2]=l>>>16,this[p+3]=l>>>24,p+4},A.prototype.writeInt32BE=function(l,p,R){return l=+l,p=p>>>0,R||_t(this,l,p,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[p]=l>>>24,this[p+1]=l>>>16,this[p+2]=l>>>8,this[p+3]=l&255,p+4},A.prototype.writeBigInt64LE=Ue(function(l,p=0){return Ft(this,l,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),A.prototype.writeBigInt64BE=Ue(function(l,p=0){return be(this,l,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function qt(S,l,p,R,D,Z){if(p+R>S.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function jt(S,l,p,R,D){return l=+l,p=p>>>0,D||qt(S,l,p,4),rt.write(S,l,p,R,23,4),p+4}A.prototype.writeFloatLE=function(l,p,R){return jt(this,l,p,!0,R)},A.prototype.writeFloatBE=function(l,p,R){return jt(this,l,p,!1,R)};function Ae(S,l,p,R,D){return l=+l,p=p>>>0,D||qt(S,l,p,8),rt.write(S,l,p,R,52,8),p+8}A.prototype.writeDoubleLE=function(l,p,R){return Ae(this,l,p,!0,R)},A.prototype.writeDoubleBE=function(l,p,R){return Ae(this,l,p,!1,R)},A.prototype.copy=function(l,p,R,D){if(!A.isBuffer(l))throw new TypeError("argument should be a Buffer");if(R||(R=0),!D&&D!==0&&(D=this.length),p>=l.length&&(p=l.length),p||(p=0),D>0&&D<R&&(D=R),D===R||l.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),l.length-p<D-R&&(D=l.length-p+R);const Z=D-R;return this===l&&typeof st.prototype.copyWithin=="function"?this.copyWithin(p,R,D):st.prototype.set.call(l,this.subarray(R,D),p),Z},A.prototype.fill=function(l,p,R,D){if(typeof l=="string"){if(typeof p=="string"?(D=p,p=0,R=this.length):typeof R=="string"&&(D=R,R=this.length),D!==void 0&&typeof D!="string")throw new TypeError("encoding must be a string");if(typeof D=="string"&&!A.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(l.length===1){const tt=l.charCodeAt(0);(D==="utf8"&&tt<128||D==="latin1")&&(l=tt)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(p<0||this.length<p||this.length<R)throw new RangeError("Out of range index");if(R<=p)return this;p=p>>>0,R=R===void 0?this.length:R>>>0,l||(l=0);let Z;if(typeof l=="number")for(Z=p;Z<R;++Z)this[Z]=l;else{const tt=A.isBuffer(l)?l:A.from(l,D),Bt=tt.length;if(Bt===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(Z=0;Z<R-p;++Z)this[Z+p]=tt[Z%Bt]}return this};const Nt={};function k(S,l,p){Nt[S]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${S}]`,this.stack,delete this.name}get code(){return S}set code(D){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:D,writable:!0})}toString(){return`${this.name} [${S}]: ${this.message}`}}}k("ERR_BUFFER_OUT_OF_BOUNDS",function(S){return S?`${S} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),k("ERR_INVALID_ARG_TYPE",function(S,l){return`The "${S}" argument must be of type number. Received type ${typeof l}`},TypeError),k("ERR_OUT_OF_RANGE",function(S,l,p){let R=`The value of "${S}" is out of range.`,D=p;return Number.isInteger(p)&&Math.abs(p)>2**32?D=h(String(p)):typeof p=="bigint"&&(D=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(D=h(D)),D+="n"),R+=` It must be ${l}. Received ${D}`,R},RangeError);function h(S){let l="",p=S.length;const R=S[0]==="-"?1:0;for(;p>=R+4;p-=3)l=`_${S.slice(p-3,p)}${l}`;return`${S.slice(0,p)}${l}`}function d(S,l,p){q(l,"offset"),(S[l]===void 0||S[l+p]===void 0)&&G(l,S.length-(p+1))}function x(S,l,p,R,D,Z){if(S>p||S<l){const tt=typeof l=="bigint"?"n":"";let Bt;throw l===0||l===BigInt(0)?Bt=`>= 0${tt} and < 2${tt} ** ${(Z+1)*8}${tt}`:Bt=`>= -(2${tt} ** ${(Z+1)*8-1}${tt}) and < 2 ** ${(Z+1)*8-1}${tt}`,new Nt.ERR_OUT_OF_RANGE("value",Bt,S)}d(R,D,Z)}function q(S,l){if(typeof S!="number")throw new Nt.ERR_INVALID_ARG_TYPE(l,"number",S)}function G(S,l,p){throw Math.floor(S)!==S?(q(S,p),new Nt.ERR_OUT_OF_RANGE("offset","an integer",S)):l<0?new Nt.ERR_BUFFER_OUT_OF_BOUNDS:new Nt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,S)}const Q=/[^+/0-9A-Za-z-_]/g;function It(S){if(S=S.split("=")[0],S=S.trim().replace(Q,""),S.length<2)return"";for(;S.length%4!==0;)S=S+"=";return S}function kt(S,l){l=l||1/0;let p;const R=S.length;let D=null;const Z=[];for(let tt=0;tt<R;++tt){if(p=S.charCodeAt(tt),p>55295&&p<57344){if(!D){if(p>56319){(l-=3)>-1&&Z.push(239,191,189);continue}else if(tt+1===R){(l-=3)>-1&&Z.push(239,191,189);continue}D=p;continue}if(p<56320){(l-=3)>-1&&Z.push(239,191,189),D=p;continue}p=(D-55296<<10|p-56320)+65536}else D&&(l-=3)>-1&&Z.push(239,191,189);if(D=null,p<128){if((l-=1)<0)break;Z.push(p)}else if(p<2048){if((l-=2)<0)break;Z.push(p>>6|192,p&63|128)}else if(p<65536){if((l-=3)<0)break;Z.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((l-=4)<0)break;Z.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return Z}function vt(S){const l=[];for(let p=0;p<S.length;++p)l.push(S.charCodeAt(p)&255);return l}function Dt(S,l){let p,R,D;const Z=[];for(let tt=0;tt<S.length&&!((l-=2)<0);++tt)p=S.charCodeAt(tt),R=p>>8,D=p%256,Z.push(D),Z.push(R);return Z}function mt(S){return W.toByteArray(It(S))}function Yt(S,l,p,R){let D;for(D=0;D<R&&!(D+p>=l.length||D>=S.length);++D)l[D+p]=S[D];return D}function Te(S,l){return S instanceof l||S!=null&&S.constructor!=null&&S.constructor.name!=null&&S.constructor.name===l.name}function te(S){return S!==S}const ie=(function(){const S="0123456789abcdef",l=new Array(256);for(let p=0;p<16;++p){const R=p*16;for(let D=0;D<16;++D)l[R+D]=S[p]+S[D]}return l})();function Ue(S){return typeof BigInt>"u"?se:S}function se(){throw new Error("BigInt not supported")}})(t);const Y=t.Buffer;n.Blob=t.Blob,n.BlobOptions=t.BlobOptions,n.Buffer=t.Buffer,n.File=t.File,n.FileOptions=t.FileOptions,n.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,n.SlowBuffer=t.SlowBuffer,n.TranscodeEncoding=t.TranscodeEncoding,n.atob=t.atob,n.btoa=t.btoa,n.constants=t.constants,n.default=Y,n.isAscii=t.isAscii,n.isUtf8=t.isUtf8,n.kMaxLength=t.kMaxLength,n.kStringMaxLength=t.kStringMaxLength,n.resolveObjectURL=t.resolveObjectURL,n.transcode=t.transcode})(yi)),yi}var ru=mn.exports,Fs;function ta(){return Fs||(Fs=1,(function(n){(function(t,e){function r(m,a){if(!m)throw new Error(a||"Assertion failed")}function s(m,a){m.super_=a;var f=function(){};f.prototype=a.prototype,m.prototype=new f,m.prototype.constructor=m}function i(m,a,f){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((a==="le"||a==="be")&&(f=a,a=10),this._init(m||0,a||10,f||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=ns().Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,f){return a.cmp(f)>0?a:f},i.min=function(a,f){return a.cmp(f)<0?a:f},i.prototype._init=function(a,f,w){if(typeof a=="number")return this._initNumber(a,f,w);if(typeof a=="object")return this._initArray(a,f,w);f==="hex"&&(f=16),r(f===(f|0)&&f>=2&&f<=36),a=a.toString().replace(/\s+/g,"");var E=0;a[0]==="-"&&(E++,this.negative=1),E<a.length&&(f===16?this._parseHex(a,E,w):(this._parseBase(a,f,E),w==="le"&&this._initArray(this.toArray(),f,w)))},i.prototype._initNumber=function(a,f,w){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),f,w)},i.prototype._initArray=function(a,f,w){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var _,P,N=0;if(w==="be")for(E=a.length-1,_=0;E>=0;E-=3)P=a[E]|a[E-1]<<8|a[E-2]<<16,this.words[_]|=P<<N&67108863,this.words[_+1]=P>>>26-N&67108863,N+=24,N>=26&&(N-=26,_++);else if(w==="le")for(E=0,_=0;E<a.length;E+=3)P=a[E]|a[E+1]<<8|a[E+2]<<16,this.words[_]|=P<<N&67108863,this.words[_+1]=P>>>26-N&67108863,N+=24,N>=26&&(N-=26,_++);return this._strip()};function g(m,a){var f=m.charCodeAt(a);if(f>=48&&f<=57)return f-48;if(f>=65&&f<=70)return f-55;if(f>=97&&f<=102)return f-87;r(!1,"Invalid character in "+m)}function y(m,a,f){var w=g(m,f);return f-1>=a&&(w|=g(m,f-1)<<4),w}i.prototype._parseHex=function(a,f,w){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var _=0,P=0,N;if(w==="be")for(E=a.length-1;E>=f;E-=2)N=y(a,f,E)<<_,this.words[P]|=N&67108863,_>=18?(_-=18,P+=1,this.words[P]|=N>>>26):_+=8;else{var I=a.length-f;for(E=I%2===0?f+1:f;E<a.length;E+=2)N=y(a,f,E)<<_,this.words[P]|=N&67108863,_>=18?(_-=18,P+=1,this.words[P]|=N>>>26):_+=8}this._strip()};function B(m,a,f,w){for(var E=0,_=0,P=Math.min(m.length,f),N=a;N<P;N++){var I=m.charCodeAt(N)-48;E*=w,I>=49?_=I-49+10:I>=17?_=I-17+10:_=I,r(I>=0&&_<w,"Invalid character"),E+=_}return E}i.prototype._parseBase=function(a,f,w){this.words=[0],this.length=1;for(var E=0,_=1;_<=67108863;_*=f)E++;E--,_=_/f|0;for(var P=a.length-w,N=P%E,I=Math.min(P,P-N)+w,c=0,u=w;u<I;u+=E)c=B(a,u,u+E,f),this.imuln(_),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(N!==0){var v=1;for(c=B(a,u,a.length,f),u=0;u<N;u++)v*=f;this.imuln(v),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red};function b(m,a){m.words=a.words,m.length=a.length,m.negative=a.negative,m.red=a.red}if(i.prototype._move=function(a){b(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=O}catch{i.prototype.inspect=O}else i.prototype.inspect=O;function O(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],F=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,f){a=a||10,f=f|0||1;var w;if(a===16||a==="hex"){w="";for(var E=0,_=0,P=0;P<this.length;P++){var N=this.words[P],I=((N<<E|_)&16777215).toString(16);_=N>>>24-E&16777215,E+=2,E>=26&&(E-=26,P--),_!==0||P!==this.length-1?w=L[6-I.length]+I+w:w=I+w}for(_!==0&&(w=_.toString(16)+w);w.length%f!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(a===(a|0)&&a>=2&&a<=36){var c=T[a],u=F[a];w="";var v=this.clone();for(v.negative=0;!v.isZero();){var M=v.modrn(u).toString(a);v=v.idivn(u),v.isZero()?w=M+w:w=L[c-M.length]+M+w}for(this.isZero()&&(w="0"+w);w.length%f!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,f){return this.toArrayLike(o,a,f)}),i.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)};var K=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)};i.prototype.toArrayLike=function(a,f,w){this._strip();var E=this.byteLength(),_=w||Math.max(1,E);r(E<=_,"byte array longer than desired length"),r(_>0,"Requested array length <= 0");var P=K(a,_),N=f==="le"?"LE":"BE";return this["_toArrayLike"+N](P,E),P},i.prototype._toArrayLikeLE=function(a,f){for(var w=0,E=0,_=0,P=0;_<this.length;_++){var N=this.words[_]<<P|E;a[w++]=N&255,w<a.length&&(a[w++]=N>>8&255),w<a.length&&(a[w++]=N>>16&255),P===6?(w<a.length&&(a[w++]=N>>24&255),E=0,P=0):(E=N>>>24,P+=2)}if(w<a.length)for(a[w++]=E;w<a.length;)a[w++]=0},i.prototype._toArrayLikeBE=function(a,f){for(var w=a.length-1,E=0,_=0,P=0;_<this.length;_++){var N=this.words[_]<<P|E;a[w--]=N&255,w>=0&&(a[w--]=N>>8&255),w>=0&&(a[w--]=N>>16&255),P===6?(w>=0&&(a[w--]=N>>24&255),E=0,P=0):(E=N>>>24,P+=2)}if(w>=0)for(a[w--]=E;w>=0;)a[w--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var f=a,w=0;return f>=4096&&(w+=13,f>>>=13),f>=64&&(w+=7,f>>>=7),f>=8&&(w+=4,f>>>=4),f>=2&&(w+=2,f>>>=2),w+f},i.prototype._zeroBits=function(a){if(a===0)return 26;var f=a,w=0;return(f&8191)===0&&(w+=13,f>>>=13),(f&127)===0&&(w+=7,f>>>=7),(f&15)===0&&(w+=4,f>>>=4),(f&3)===0&&(w+=2,f>>>=2),(f&1)===0&&w++,w},i.prototype.bitLength=function(){var a=this.words[this.length-1],f=this._countBits(a);return(this.length-1)*26+f};function H(m){for(var a=new Array(m.bitLength()),f=0;f<a.length;f++){var w=f/26|0,E=f%26;a[f]=m.words[w]>>>E&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var w=this._zeroBits(this.words[f]);if(a+=w,w!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var f;this.length>a.length?f=a:f=this;for(var w=0;w<f.length;w++)this.words[w]=this.words[w]&a.words[w];return this.length=f.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var f,w;this.length>a.length?(f=this,w=a):(f=a,w=this);for(var E=0;E<w.length;E++)this.words[E]=f.words[E]^w.words[E];if(this!==f)for(;E<f.length;E++)this.words[E]=f.words[E];return this.length=f.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var f=Math.ceil(a/26)|0,w=a%26;this._expand(f),w>0&&f--;for(var E=0;E<f;E++)this.words[E]=~this.words[E]&67108863;return w>0&&(this.words[E]=~this.words[E]&67108863>>26-w),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,f){r(typeof a=="number"&&a>=0);var w=a/26|0,E=a%26;return this._expand(w+1),f?this.words[w]=this.words[w]|1<<E:this.words[w]=this.words[w]&~(1<<E),this._strip()},i.prototype.iadd=function(a){var f;if(this.negative!==0&&a.negative===0)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();var w,E;this.length>a.length?(w=this,E=a):(w=a,E=this);for(var _=0,P=0;P<E.length;P++)f=(w.words[P]|0)+(E.words[P]|0)+_,this.words[P]=f&67108863,_=f>>>26;for(;_!==0&&P<w.length;P++)f=(w.words[P]|0)+_,this.words[P]=f&67108863,_=f>>>26;if(this.length=w.length,_!==0)this.words[this.length]=_,this.length++;else if(w!==this)for(;P<w.length;P++)this.words[P]=w.words[P];return this},i.prototype.add=function(a){var f;return a.negative!==0&&this.negative===0?(a.negative=0,f=this.sub(a),a.negative^=1,f):a.negative===0&&this.negative!==0?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var w=this.cmp(a);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,_;w>0?(E=this,_=a):(E=a,_=this);for(var P=0,N=0;N<_.length;N++)f=(E.words[N]|0)-(_.words[N]|0)+P,P=f>>26,this.words[N]=f&67108863;for(;P!==0&&N<E.length;N++)f=(E.words[N]|0)+P,P=f>>26,this.words[N]=f&67108863;if(P===0&&N<E.length&&E!==this)for(;N<E.length;N++)this.words[N]=E.words[N];return this.length=Math.max(this.length,N),E!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function Y(m,a,f){f.negative=a.negative^m.negative;var w=m.length+a.length|0;f.length=w,w=w-1|0;var E=m.words[0]|0,_=a.words[0]|0,P=E*_,N=P&67108863,I=P/67108864|0;f.words[0]=N;for(var c=1;c<w;c++){for(var u=I>>>26,v=I&67108863,M=Math.min(c,a.length-1),$=Math.max(0,c-m.length+1);$<=M;$++){var et=c-$|0;E=m.words[et]|0,_=a.words[$]|0,P=E*_+v,u+=P/67108864|0,v=P&67108863}f.words[c]=v|0,I=u|0}return I!==0?f.words[c]=I|0:f.length--,f._strip()}var j=function(a,f,w){var E=a.words,_=f.words,P=w.words,N=0,I,c,u,v=E[0]|0,M=v&8191,$=v>>>13,et=E[1]|0,lt=et&8191,pt=et>>>13,Pt=E[2]|0,Rt=Pt&8191,Ot=Pt>>>13,Ke=E[3]|0,Xt=Ke&8191,$t=Ke>>>13,Le=E[4]|0,Kt=Le&8191,Jt=Le>>>13,Br=E[5]|0,Vt=Br&8191,Qt=Br>>>13,ee=E[6]|0,_t=ee&8191,Ft=ee>>>13,be=E[7]|0,qt=be&8191,jt=be>>>13,Ae=E[8]|0,Nt=Ae&8191,k=Ae>>>13,h=E[9]|0,d=h&8191,x=h>>>13,q=_[0]|0,G=q&8191,Q=q>>>13,It=_[1]|0,kt=It&8191,vt=It>>>13,Dt=_[2]|0,mt=Dt&8191,Yt=Dt>>>13,Te=_[3]|0,te=Te&8191,ie=Te>>>13,Ue=_[4]|0,se=Ue&8191,S=Ue>>>13,l=_[5]|0,p=l&8191,R=l>>>13,D=_[6]|0,Z=D&8191,tt=D>>>13,Bt=_[7]|0,Et=Bt&8191,St=Bt>>>13,Zt=_[8]|0,bt=Zt&8191,ue=Zt>>>13,Bs=_[9]|0,he=Bs&8191,le=Bs>>>13;w.negative=a.negative^f.negative,w.length=19,I=Math.imul(M,G),c=Math.imul(M,Q),c=c+Math.imul($,G)|0,u=Math.imul($,Q);var $n=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+($n>>>26)|0,$n&=67108863,I=Math.imul(lt,G),c=Math.imul(lt,Q),c=c+Math.imul(pt,G)|0,u=Math.imul(pt,Q),I=I+Math.imul(M,kt)|0,c=c+Math.imul(M,vt)|0,c=c+Math.imul($,kt)|0,u=u+Math.imul($,vt)|0;var Vn=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(Vn>>>26)|0,Vn&=67108863,I=Math.imul(Rt,G),c=Math.imul(Rt,Q),c=c+Math.imul(Ot,G)|0,u=Math.imul(Ot,Q),I=I+Math.imul(lt,kt)|0,c=c+Math.imul(lt,vt)|0,c=c+Math.imul(pt,kt)|0,u=u+Math.imul(pt,vt)|0,I=I+Math.imul(M,mt)|0,c=c+Math.imul(M,Yt)|0,c=c+Math.imul($,mt)|0,u=u+Math.imul($,Yt)|0;var Hn=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,I=Math.imul(Xt,G),c=Math.imul(Xt,Q),c=c+Math.imul($t,G)|0,u=Math.imul($t,Q),I=I+Math.imul(Rt,kt)|0,c=c+Math.imul(Rt,vt)|0,c=c+Math.imul(Ot,kt)|0,u=u+Math.imul(Ot,vt)|0,I=I+Math.imul(lt,mt)|0,c=c+Math.imul(lt,Yt)|0,c=c+Math.imul(pt,mt)|0,u=u+Math.imul(pt,Yt)|0,I=I+Math.imul(M,te)|0,c=c+Math.imul(M,ie)|0,c=c+Math.imul($,te)|0,u=u+Math.imul($,ie)|0;var Gn=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,I=Math.imul(Kt,G),c=Math.imul(Kt,Q),c=c+Math.imul(Jt,G)|0,u=Math.imul(Jt,Q),I=I+Math.imul(Xt,kt)|0,c=c+Math.imul(Xt,vt)|0,c=c+Math.imul($t,kt)|0,u=u+Math.imul($t,vt)|0,I=I+Math.imul(Rt,mt)|0,c=c+Math.imul(Rt,Yt)|0,c=c+Math.imul(Ot,mt)|0,u=u+Math.imul(Ot,Yt)|0,I=I+Math.imul(lt,te)|0,c=c+Math.imul(lt,ie)|0,c=c+Math.imul(pt,te)|0,u=u+Math.imul(pt,ie)|0,I=I+Math.imul(M,se)|0,c=c+Math.imul(M,S)|0,c=c+Math.imul($,se)|0,u=u+Math.imul($,S)|0;var jn=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(jn>>>26)|0,jn&=67108863,I=Math.imul(Vt,G),c=Math.imul(Vt,Q),c=c+Math.imul(Qt,G)|0,u=Math.imul(Qt,Q),I=I+Math.imul(Kt,kt)|0,c=c+Math.imul(Kt,vt)|0,c=c+Math.imul(Jt,kt)|0,u=u+Math.imul(Jt,vt)|0,I=I+Math.imul(Xt,mt)|0,c=c+Math.imul(Xt,Yt)|0,c=c+Math.imul($t,mt)|0,u=u+Math.imul($t,Yt)|0,I=I+Math.imul(Rt,te)|0,c=c+Math.imul(Rt,ie)|0,c=c+Math.imul(Ot,te)|0,u=u+Math.imul(Ot,ie)|0,I=I+Math.imul(lt,se)|0,c=c+Math.imul(lt,S)|0,c=c+Math.imul(pt,se)|0,u=u+Math.imul(pt,S)|0,I=I+Math.imul(M,p)|0,c=c+Math.imul(M,R)|0,c=c+Math.imul($,p)|0,u=u+Math.imul($,R)|0;var Yn=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(Yn>>>26)|0,Yn&=67108863,I=Math.imul(_t,G),c=Math.imul(_t,Q),c=c+Math.imul(Ft,G)|0,u=Math.imul(Ft,Q),I=I+Math.imul(Vt,kt)|0,c=c+Math.imul(Vt,vt)|0,c=c+Math.imul(Qt,kt)|0,u=u+Math.imul(Qt,vt)|0,I=I+Math.imul(Kt,mt)|0,c=c+Math.imul(Kt,Yt)|0,c=c+Math.imul(Jt,mt)|0,u=u+Math.imul(Jt,Yt)|0,I=I+Math.imul(Xt,te)|0,c=c+Math.imul(Xt,ie)|0,c=c+Math.imul($t,te)|0,u=u+Math.imul($t,ie)|0,I=I+Math.imul(Rt,se)|0,c=c+Math.imul(Rt,S)|0,c=c+Math.imul(Ot,se)|0,u=u+Math.imul(Ot,S)|0,I=I+Math.imul(lt,p)|0,c=c+Math.imul(lt,R)|0,c=c+Math.imul(pt,p)|0,u=u+Math.imul(pt,R)|0,I=I+Math.imul(M,Z)|0,c=c+Math.imul(M,tt)|0,c=c+Math.imul($,Z)|0,u=u+Math.imul($,tt)|0;var Zn=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,I=Math.imul(qt,G),c=Math.imul(qt,Q),c=c+Math.imul(jt,G)|0,u=Math.imul(jt,Q),I=I+Math.imul(_t,kt)|0,c=c+Math.imul(_t,vt)|0,c=c+Math.imul(Ft,kt)|0,u=u+Math.imul(Ft,vt)|0,I=I+Math.imul(Vt,mt)|0,c=c+Math.imul(Vt,Yt)|0,c=c+Math.imul(Qt,mt)|0,u=u+Math.imul(Qt,Yt)|0,I=I+Math.imul(Kt,te)|0,c=c+Math.imul(Kt,ie)|0,c=c+Math.imul(Jt,te)|0,u=u+Math.imul(Jt,ie)|0,I=I+Math.imul(Xt,se)|0,c=c+Math.imul(Xt,S)|0,c=c+Math.imul($t,se)|0,u=u+Math.imul($t,S)|0,I=I+Math.imul(Rt,p)|0,c=c+Math.imul(Rt,R)|0,c=c+Math.imul(Ot,p)|0,u=u+Math.imul(Ot,R)|0,I=I+Math.imul(lt,Z)|0,c=c+Math.imul(lt,tt)|0,c=c+Math.imul(pt,Z)|0,u=u+Math.imul(pt,tt)|0,I=I+Math.imul(M,Et)|0,c=c+Math.imul(M,St)|0,c=c+Math.imul($,Et)|0,u=u+Math.imul($,St)|0;var Xn=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,I=Math.imul(Nt,G),c=Math.imul(Nt,Q),c=c+Math.imul(k,G)|0,u=Math.imul(k,Q),I=I+Math.imul(qt,kt)|0,c=c+Math.imul(qt,vt)|0,c=c+Math.imul(jt,kt)|0,u=u+Math.imul(jt,vt)|0,I=I+Math.imul(_t,mt)|0,c=c+Math.imul(_t,Yt)|0,c=c+Math.imul(Ft,mt)|0,u=u+Math.imul(Ft,Yt)|0,I=I+Math.imul(Vt,te)|0,c=c+Math.imul(Vt,ie)|0,c=c+Math.imul(Qt,te)|0,u=u+Math.imul(Qt,ie)|0,I=I+Math.imul(Kt,se)|0,c=c+Math.imul(Kt,S)|0,c=c+Math.imul(Jt,se)|0,u=u+Math.imul(Jt,S)|0,I=I+Math.imul(Xt,p)|0,c=c+Math.imul(Xt,R)|0,c=c+Math.imul($t,p)|0,u=u+Math.imul($t,R)|0,I=I+Math.imul(Rt,Z)|0,c=c+Math.imul(Rt,tt)|0,c=c+Math.imul(Ot,Z)|0,u=u+Math.imul(Ot,tt)|0,I=I+Math.imul(lt,Et)|0,c=c+Math.imul(lt,St)|0,c=c+Math.imul(pt,Et)|0,u=u+Math.imul(pt,St)|0,I=I+Math.imul(M,bt)|0,c=c+Math.imul(M,ue)|0,c=c+Math.imul($,bt)|0,u=u+Math.imul($,ue)|0;var Jn=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,I=Math.imul(d,G),c=Math.imul(d,Q),c=c+Math.imul(x,G)|0,u=Math.imul(x,Q),I=I+Math.imul(Nt,kt)|0,c=c+Math.imul(Nt,vt)|0,c=c+Math.imul(k,kt)|0,u=u+Math.imul(k,vt)|0,I=I+Math.imul(qt,mt)|0,c=c+Math.imul(qt,Yt)|0,c=c+Math.imul(jt,mt)|0,u=u+Math.imul(jt,Yt)|0,I=I+Math.imul(_t,te)|0,c=c+Math.imul(_t,ie)|0,c=c+Math.imul(Ft,te)|0,u=u+Math.imul(Ft,ie)|0,I=I+Math.imul(Vt,se)|0,c=c+Math.imul(Vt,S)|0,c=c+Math.imul(Qt,se)|0,u=u+Math.imul(Qt,S)|0,I=I+Math.imul(Kt,p)|0,c=c+Math.imul(Kt,R)|0,c=c+Math.imul(Jt,p)|0,u=u+Math.imul(Jt,R)|0,I=I+Math.imul(Xt,Z)|0,c=c+Math.imul(Xt,tt)|0,c=c+Math.imul($t,Z)|0,u=u+Math.imul($t,tt)|0,I=I+Math.imul(Rt,Et)|0,c=c+Math.imul(Rt,St)|0,c=c+Math.imul(Ot,Et)|0,u=u+Math.imul(Ot,St)|0,I=I+Math.imul(lt,bt)|0,c=c+Math.imul(lt,ue)|0,c=c+Math.imul(pt,bt)|0,u=u+Math.imul(pt,ue)|0,I=I+Math.imul(M,he)|0,c=c+Math.imul(M,le)|0,c=c+Math.imul($,he)|0,u=u+Math.imul($,le)|0;var Qn=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,I=Math.imul(d,kt),c=Math.imul(d,vt),c=c+Math.imul(x,kt)|0,u=Math.imul(x,vt),I=I+Math.imul(Nt,mt)|0,c=c+Math.imul(Nt,Yt)|0,c=c+Math.imul(k,mt)|0,u=u+Math.imul(k,Yt)|0,I=I+Math.imul(qt,te)|0,c=c+Math.imul(qt,ie)|0,c=c+Math.imul(jt,te)|0,u=u+Math.imul(jt,ie)|0,I=I+Math.imul(_t,se)|0,c=c+Math.imul(_t,S)|0,c=c+Math.imul(Ft,se)|0,u=u+Math.imul(Ft,S)|0,I=I+Math.imul(Vt,p)|0,c=c+Math.imul(Vt,R)|0,c=c+Math.imul(Qt,p)|0,u=u+Math.imul(Qt,R)|0,I=I+Math.imul(Kt,Z)|0,c=c+Math.imul(Kt,tt)|0,c=c+Math.imul(Jt,Z)|0,u=u+Math.imul(Jt,tt)|0,I=I+Math.imul(Xt,Et)|0,c=c+Math.imul(Xt,St)|0,c=c+Math.imul($t,Et)|0,u=u+Math.imul($t,St)|0,I=I+Math.imul(Rt,bt)|0,c=c+Math.imul(Rt,ue)|0,c=c+Math.imul(Ot,bt)|0,u=u+Math.imul(Ot,ue)|0,I=I+Math.imul(lt,he)|0,c=c+Math.imul(lt,le)|0,c=c+Math.imul(pt,he)|0,u=u+Math.imul(pt,le)|0;var ti=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(ti>>>26)|0,ti&=67108863,I=Math.imul(d,mt),c=Math.imul(d,Yt),c=c+Math.imul(x,mt)|0,u=Math.imul(x,Yt),I=I+Math.imul(Nt,te)|0,c=c+Math.imul(Nt,ie)|0,c=c+Math.imul(k,te)|0,u=u+Math.imul(k,ie)|0,I=I+Math.imul(qt,se)|0,c=c+Math.imul(qt,S)|0,c=c+Math.imul(jt,se)|0,u=u+Math.imul(jt,S)|0,I=I+Math.imul(_t,p)|0,c=c+Math.imul(_t,R)|0,c=c+Math.imul(Ft,p)|0,u=u+Math.imul(Ft,R)|0,I=I+Math.imul(Vt,Z)|0,c=c+Math.imul(Vt,tt)|0,c=c+Math.imul(Qt,Z)|0,u=u+Math.imul(Qt,tt)|0,I=I+Math.imul(Kt,Et)|0,c=c+Math.imul(Kt,St)|0,c=c+Math.imul(Jt,Et)|0,u=u+Math.imul(Jt,St)|0,I=I+Math.imul(Xt,bt)|0,c=c+Math.imul(Xt,ue)|0,c=c+Math.imul($t,bt)|0,u=u+Math.imul($t,ue)|0,I=I+Math.imul(Rt,he)|0,c=c+Math.imul(Rt,le)|0,c=c+Math.imul(Ot,he)|0,u=u+Math.imul(Ot,le)|0;var ei=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(ei>>>26)|0,ei&=67108863,I=Math.imul(d,te),c=Math.imul(d,ie),c=c+Math.imul(x,te)|0,u=Math.imul(x,ie),I=I+Math.imul(Nt,se)|0,c=c+Math.imul(Nt,S)|0,c=c+Math.imul(k,se)|0,u=u+Math.imul(k,S)|0,I=I+Math.imul(qt,p)|0,c=c+Math.imul(qt,R)|0,c=c+Math.imul(jt,p)|0,u=u+Math.imul(jt,R)|0,I=I+Math.imul(_t,Z)|0,c=c+Math.imul(_t,tt)|0,c=c+Math.imul(Ft,Z)|0,u=u+Math.imul(Ft,tt)|0,I=I+Math.imul(Vt,Et)|0,c=c+Math.imul(Vt,St)|0,c=c+Math.imul(Qt,Et)|0,u=u+Math.imul(Qt,St)|0,I=I+Math.imul(Kt,bt)|0,c=c+Math.imul(Kt,ue)|0,c=c+Math.imul(Jt,bt)|0,u=u+Math.imul(Jt,ue)|0,I=I+Math.imul(Xt,he)|0,c=c+Math.imul(Xt,le)|0,c=c+Math.imul($t,he)|0,u=u+Math.imul($t,le)|0;var ri=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(ri>>>26)|0,ri&=67108863,I=Math.imul(d,se),c=Math.imul(d,S),c=c+Math.imul(x,se)|0,u=Math.imul(x,S),I=I+Math.imul(Nt,p)|0,c=c+Math.imul(Nt,R)|0,c=c+Math.imul(k,p)|0,u=u+Math.imul(k,R)|0,I=I+Math.imul(qt,Z)|0,c=c+Math.imul(qt,tt)|0,c=c+Math.imul(jt,Z)|0,u=u+Math.imul(jt,tt)|0,I=I+Math.imul(_t,Et)|0,c=c+Math.imul(_t,St)|0,c=c+Math.imul(Ft,Et)|0,u=u+Math.imul(Ft,St)|0,I=I+Math.imul(Vt,bt)|0,c=c+Math.imul(Vt,ue)|0,c=c+Math.imul(Qt,bt)|0,u=u+Math.imul(Qt,ue)|0,I=I+Math.imul(Kt,he)|0,c=c+Math.imul(Kt,le)|0,c=c+Math.imul(Jt,he)|0,u=u+Math.imul(Jt,le)|0;var ni=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(ni>>>26)|0,ni&=67108863,I=Math.imul(d,p),c=Math.imul(d,R),c=c+Math.imul(x,p)|0,u=Math.imul(x,R),I=I+Math.imul(Nt,Z)|0,c=c+Math.imul(Nt,tt)|0,c=c+Math.imul(k,Z)|0,u=u+Math.imul(k,tt)|0,I=I+Math.imul(qt,Et)|0,c=c+Math.imul(qt,St)|0,c=c+Math.imul(jt,Et)|0,u=u+Math.imul(jt,St)|0,I=I+Math.imul(_t,bt)|0,c=c+Math.imul(_t,ue)|0,c=c+Math.imul(Ft,bt)|0,u=u+Math.imul(Ft,ue)|0,I=I+Math.imul(Vt,he)|0,c=c+Math.imul(Vt,le)|0,c=c+Math.imul(Qt,he)|0,u=u+Math.imul(Qt,le)|0;var ii=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(ii>>>26)|0,ii&=67108863,I=Math.imul(d,Z),c=Math.imul(d,tt),c=c+Math.imul(x,Z)|0,u=Math.imul(x,tt),I=I+Math.imul(Nt,Et)|0,c=c+Math.imul(Nt,St)|0,c=c+Math.imul(k,Et)|0,u=u+Math.imul(k,St)|0,I=I+Math.imul(qt,bt)|0,c=c+Math.imul(qt,ue)|0,c=c+Math.imul(jt,bt)|0,u=u+Math.imul(jt,ue)|0,I=I+Math.imul(_t,he)|0,c=c+Math.imul(_t,le)|0,c=c+Math.imul(Ft,he)|0,u=u+Math.imul(Ft,le)|0;var si=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(si>>>26)|0,si&=67108863,I=Math.imul(d,Et),c=Math.imul(d,St),c=c+Math.imul(x,Et)|0,u=Math.imul(x,St),I=I+Math.imul(Nt,bt)|0,c=c+Math.imul(Nt,ue)|0,c=c+Math.imul(k,bt)|0,u=u+Math.imul(k,ue)|0,I=I+Math.imul(qt,he)|0,c=c+Math.imul(qt,le)|0,c=c+Math.imul(jt,he)|0,u=u+Math.imul(jt,le)|0;var oi=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(oi>>>26)|0,oi&=67108863,I=Math.imul(d,bt),c=Math.imul(d,ue),c=c+Math.imul(x,bt)|0,u=Math.imul(x,ue),I=I+Math.imul(Nt,he)|0,c=c+Math.imul(Nt,le)|0,c=c+Math.imul(k,he)|0,u=u+Math.imul(k,le)|0;var ai=(N+I|0)+((c&8191)<<13)|0;N=(u+(c>>>13)|0)+(ai>>>26)|0,ai&=67108863,I=Math.imul(d,he),c=Math.imul(d,le),c=c+Math.imul(x,he)|0,u=Math.imul(x,le);var ci=(N+I|0)+((c&8191)<<13)|0;return N=(u+(c>>>13)|0)+(ci>>>26)|0,ci&=67108863,P[0]=$n,P[1]=Vn,P[2]=Hn,P[3]=Gn,P[4]=jn,P[5]=Yn,P[6]=Zn,P[7]=Xn,P[8]=Jn,P[9]=Qn,P[10]=ti,P[11]=ei,P[12]=ri,P[13]=ni,P[14]=ii,P[15]=si,P[16]=oi,P[17]=ai,P[18]=ci,N!==0&&(P[19]=N,w.length++),w};Math.imul||(j=Y);function W(m,a,f){f.negative=a.negative^m.negative,f.length=m.length+a.length;for(var w=0,E=0,_=0;_<f.length-1;_++){var P=E;E=0;for(var N=w&67108863,I=Math.min(_,a.length-1),c=Math.max(0,_-m.length+1);c<=I;c++){var u=_-c,v=m.words[u]|0,M=a.words[c]|0,$=v*M,et=$&67108863;P=P+($/67108864|0)|0,et=et+N|0,N=et&67108863,P=P+(et>>>26)|0,E+=P>>>26,P&=67108863}f.words[_]=N,w=P,P=E}return w!==0?f.words[_]=w:f.length--,f._strip()}function rt(m,a,f){return W(m,a,f)}i.prototype.mulTo=function(a,f){var w,E=this.length+a.length;return this.length===10&&a.length===10?w=j(this,a,f):E<63?w=Y(this,a,f):E<1024?w=W(this,a,f):w=rt(this,a,f),w},i.prototype.mul=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},i.prototype.mulf=function(a){var f=new i(null);return f.words=new Array(this.length+a.length),rt(this,a,f)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var f=a<0;f&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var w=0,E=0;E<this.length;E++){var _=(this.words[E]|0)*a,P=(_&67108863)+(w&67108863);w>>=26,w+=_/67108864|0,w+=P>>>26,this.words[E]=P&67108863}return w!==0&&(this.words[E]=w,this.length++),this.length=a===0?1:this.length,f?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var f=H(a);if(f.length===0)return new i(1);for(var w=this,E=0;E<f.length&&f[E]===0;E++,w=w.sqr());if(++E<f.length)for(var _=w.sqr();E<f.length;E++,_=_.sqr())f[E]!==0&&(w=w.mul(_));return w},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var f=a%26,w=(a-f)/26,E=67108863>>>26-f<<26-f,_;if(f!==0){var P=0;for(_=0;_<this.length;_++){var N=this.words[_]&E,I=(this.words[_]|0)-N<<f;this.words[_]=I|P,P=N>>>26-f}P&&(this.words[_]=P,this.length++)}if(w!==0){for(_=this.length-1;_>=0;_--)this.words[_+w]=this.words[_];for(_=0;_<w;_++)this.words[_]=0;this.length+=w}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,f,w){r(typeof a=="number"&&a>=0);var E;f?E=(f-f%26)/26:E=0;var _=a%26,P=Math.min((a-_)/26,this.length),N=67108863^67108863>>>_<<_,I=w;if(E-=P,E=Math.max(0,E),I){for(var c=0;c<P;c++)I.words[c]=this.words[c];I.length=P}if(P!==0)if(this.length>P)for(this.length-=P,c=0;c<this.length;c++)this.words[c]=this.words[c+P];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(u!==0||c>=E);c--){var v=this.words[c]|0;this.words[c]=u<<26-_|v>>>_,u=v&N}return I&&u!==0&&(I.words[I.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,f,w){return r(this.negative===0),this.iushrn(a,f,w)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var f=a%26,w=(a-f)/26,E=1<<f;if(this.length<=w)return!1;var _=this.words[w];return!!(_&E)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var f=a%26,w=(a-f)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(f!==0&&w++,this.length=Math.min(w,this.length),f!==0){var E=67108863^67108863>>>f<<f;this.words[this.length-1]&=E}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,f,w){var E=a.length+w,_;this._expand(E);var P,N=0;for(_=0;_<a.length;_++){P=(this.words[_+w]|0)+N;var I=(a.words[_]|0)*f;P-=I&67108863,N=(P>>26)-(I/67108864|0),this.words[_+w]=P&67108863}for(;_<this.length-w;_++)P=(this.words[_+w]|0)+N,N=P>>26,this.words[_+w]=P&67108863;if(N===0)return this._strip();for(r(N===-1),N=0,_=0;_<this.length;_++)P=-(this.words[_]|0)+N,N=P>>26,this.words[_]=P&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,f){var w=this.length-a.length,E=this.clone(),_=a,P=_.words[_.length-1]|0,N=this._countBits(P);w=26-N,w!==0&&(_=_.ushln(w),E.iushln(w),P=_.words[_.length-1]|0);var I=E.length-_.length,c;if(f!=="mod"){c=new i(null),c.length=I+1,c.words=new Array(c.length);for(var u=0;u<c.length;u++)c.words[u]=0}var v=E.clone()._ishlnsubmul(_,1,I);v.negative===0&&(E=v,c&&(c.words[I]=1));for(var M=I-1;M>=0;M--){var $=(E.words[_.length+M]|0)*67108864+(E.words[_.length+M-1]|0);for($=Math.min($/P|0,67108863),E._ishlnsubmul(_,$,M);E.negative!==0;)$--,E.negative=0,E._ishlnsubmul(_,1,M),E.isZero()||(E.negative^=1);c&&(c.words[M]=$)}return c&&c._strip(),E._strip(),f!=="div"&&w!==0&&E.iushrn(w),{div:c||null,mod:E}},i.prototype.divmod=function(a,f,w){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var E,_,P;return this.negative!==0&&a.negative===0?(P=this.neg().divmod(a,f),f!=="mod"&&(E=P.div.neg()),f!=="div"&&(_=P.mod.neg(),w&&_.negative!==0&&_.iadd(a)),{div:E,mod:_}):this.negative===0&&a.negative!==0?(P=this.divmod(a.neg(),f),f!=="mod"&&(E=P.div.neg()),{div:E,mod:P.mod}):(this.negative&a.negative)!==0?(P=this.neg().divmod(a.neg(),f),f!=="div"&&(_=P.mod.neg(),w&&_.negative!==0&&_.isub(a)),{div:P.div,mod:_}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?f==="div"?{div:this.divn(a.words[0]),mod:null}:f==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,f)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var w=f.div.negative!==0?f.mod.isub(a):f.mod,E=a.ushrn(1),_=a.andln(1),P=w.cmp(E);return P<0||_===1&&P===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},i.prototype.modrn=function(a){var f=a<0;f&&(a=-a),r(a<=67108863);for(var w=(1<<26)%a,E=0,_=this.length-1;_>=0;_--)E=(w*E+(this.words[_]|0))%a;return f?-E:E},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var f=a<0;f&&(a=-a),r(a<=67108863);for(var w=0,E=this.length-1;E>=0;E--){var _=(this.words[E]|0)+w*67108864;this.words[E]=_/a|0,w=_%a}return this._strip(),f?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var f=this,w=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var E=new i(1),_=new i(0),P=new i(0),N=new i(1),I=0;f.isEven()&&w.isEven();)f.iushrn(1),w.iushrn(1),++I;for(var c=w.clone(),u=f.clone();!f.isZero();){for(var v=0,M=1;(f.words[0]&M)===0&&v<26;++v,M<<=1);if(v>0)for(f.iushrn(v);v-- >0;)(E.isOdd()||_.isOdd())&&(E.iadd(c),_.isub(u)),E.iushrn(1),_.iushrn(1);for(var $=0,et=1;(w.words[0]&et)===0&&$<26;++$,et<<=1);if($>0)for(w.iushrn($);$-- >0;)(P.isOdd()||N.isOdd())&&(P.iadd(c),N.isub(u)),P.iushrn(1),N.iushrn(1);f.cmp(w)>=0?(f.isub(w),E.isub(P),_.isub(N)):(w.isub(f),P.isub(E),N.isub(_))}return{a:P,b:N,gcd:w.iushln(I)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var f=this,w=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var E=new i(1),_=new i(0),P=w.clone();f.cmpn(1)>0&&w.cmpn(1)>0;){for(var N=0,I=1;(f.words[0]&I)===0&&N<26;++N,I<<=1);if(N>0)for(f.iushrn(N);N-- >0;)E.isOdd()&&E.iadd(P),E.iushrn(1);for(var c=0,u=1;(w.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0)for(w.iushrn(c);c-- >0;)_.isOdd()&&_.iadd(P),_.iushrn(1);f.cmp(w)>=0?(f.isub(w),E.isub(_)):(w.isub(f),_.isub(E))}var v;return f.cmpn(1)===0?v=E:v=_,v.cmpn(0)<0&&v.iadd(a),v},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),w=a.clone();f.negative=0,w.negative=0;for(var E=0;f.isEven()&&w.isEven();E++)f.iushrn(1),w.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;w.isEven();)w.iushrn(1);var _=f.cmp(w);if(_<0){var P=f;f=w,w=P}else if(_===0||w.cmpn(1)===0)break;f.isub(w)}while(!0);return w.iushln(E)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var f=a%26,w=(a-f)/26,E=1<<f;if(this.length<=w)return this._expand(w+1),this.words[w]|=E,this;for(var _=E,P=w;_!==0&&P<this.length;P++){var N=this.words[P]|0;N+=_,_=N>>>26,N&=67108863,this.words[P]=N}return _!==0&&(this.words[P]=_,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var f=a<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var w;if(this.length>1)w=1;else{f&&(a=-a),r(a<=67108863,"Number is too big");var E=this.words[0]|0;w=E===a?0:E<a?-1:1}return this.negative!==0?-w|0:w},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var f=this.ucmp(a);return this.negative!==0?-f|0:f},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,w=this.length-1;w>=0;w--){var E=this.words[w]|0,_=a.words[w]|0;if(E!==_){E<_?f=-1:E>_&&(f=1);break}}return f},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new V(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var at={k256:null,p224:null,p192:null,p25519:null};function it(m,a){this.name=m,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}it.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},it.prototype.ireduce=function(a){var f=a,w;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),w=f.bitLength();while(w>this.n);var E=w<this.n?-1:f.ucmp(this.p);return E===0?(f.words[0]=0,f.length=1):E>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},it.prototype.split=function(a,f){a.iushrn(this.n,0,f)},it.prototype.imulK=function(a){return a.imul(this.k)};function st(){it.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(st,it),st.prototype.split=function(a,f){for(var w=4194303,E=Math.min(a.length,9),_=0;_<E;_++)f.words[_]=a.words[_];if(f.length=E,a.length<=9){a.words[0]=0,a.length=1;return}var P=a.words[9];for(f.words[f.length++]=P&w,_=10;_<a.length;_++){var N=a.words[_]|0;a.words[_-10]=(N&w)<<4|P>>>22,P=N}P>>>=22,a.words[_-10]=P,P===0&&a.length>10?a.length-=10:a.length-=9},st.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,w=0;w<a.length;w++){var E=a.words[w]|0;f+=E*977,a.words[w]=f&67108863,f=E*64+(f/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function nt(){it.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(nt,it);function U(){it.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(U,it);function z(){it.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(z,it),z.prototype.imulK=function(a){for(var f=0,w=0;w<a.length;w++){var E=(a.words[w]|0)*19+f,_=E&67108863;E>>>=26,a.words[w]=_,f=E}return f!==0&&(a.words[a.length++]=f),a},i._prime=function(a){if(at[a])return at[a];var f;if(a==="k256")f=new st;else if(a==="p224")f=new nt;else if(a==="p192")f=new U;else if(a==="p25519")f=new z;else throw new Error("Unknown prime "+a);return at[a]=f,f};function V(m){if(typeof m=="string"){var a=i._prime(m);this.m=a.p,this.prime=a}else r(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}V.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},V.prototype._verify2=function(a,f){r((a.negative|f.negative)===0,"red works only with positives"),r(a.red&&a.red===f.red,"red works only with red numbers")},V.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(b(a,a.umod(this.m)._forceRed(this)),a)},V.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},V.prototype.add=function(a,f){this._verify2(a,f);var w=a.add(f);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},V.prototype.iadd=function(a,f){this._verify2(a,f);var w=a.iadd(f);return w.cmp(this.m)>=0&&w.isub(this.m),w},V.prototype.sub=function(a,f){this._verify2(a,f);var w=a.sub(f);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},V.prototype.isub=function(a,f){this._verify2(a,f);var w=a.isub(f);return w.cmpn(0)<0&&w.iadd(this.m),w},V.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},V.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},V.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},V.prototype.isqr=function(a){return this.imul(a,a.clone())},V.prototype.sqr=function(a){return this.mul(a,a)},V.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(r(f%2===1),f===3){var w=this.m.add(new i(1)).iushrn(2);return this.pow(a,w)}for(var E=this.m.subn(1),_=0;!E.isZero()&&E.andln(1)===0;)_++,E.iushrn(1);r(!E.isZero());var P=new i(1).toRed(this),N=P.redNeg(),I=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,I).cmp(N)!==0;)c.redIAdd(N);for(var u=this.pow(c,E),v=this.pow(a,E.addn(1).iushrn(1)),M=this.pow(a,E),$=_;M.cmp(P)!==0;){for(var et=M,lt=0;et.cmp(P)!==0;lt++)et=et.redSqr();r(lt<$);var pt=this.pow(u,new i(1).iushln($-lt-1));v=v.redMul(pt),u=pt.redSqr(),M=M.redMul(u),$=lt}return v},V.prototype.invm=function(a){var f=a._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},V.prototype.pow=function(a,f){if(f.isZero())return new i(1).toRed(this);if(f.cmpn(1)===0)return a.clone();var w=4,E=new Array(1<<w);E[0]=new i(1).toRed(this),E[1]=a;for(var _=2;_<E.length;_++)E[_]=this.mul(E[_-1],a);var P=E[0],N=0,I=0,c=f.bitLength()%26;for(c===0&&(c=26),_=f.length-1;_>=0;_--){for(var u=f.words[_],v=c-1;v>=0;v--){var M=u>>v&1;if(P!==E[0]&&(P=this.sqr(P)),M===0&&N===0){I=0;continue}N<<=1,N|=M,I++,!(I!==w&&(_!==0||v!==0))&&(P=this.mul(P,E[N]),I=0,N=0)}c=26}return P},V.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},V.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},i.mont=function(a){return new A(a)};function A(m){V.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(A,V),A.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},A.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},A.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var w=a.imul(f),E=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=w.isub(E).iushrn(this.shift),P=_;return _.cmp(this.m)>=0?P=_.isub(this.m):_.cmpn(0)<0&&(P=_.iadd(this.m)),P._forceRed(this)},A.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new i(0)._forceRed(this);var w=a.mul(f),E=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=w.isub(E).iushrn(this.shift),P=_;return _.cmp(this.m)>=0?P=_.isub(this.m):_.cmpn(0)<0&&(P=_.iadd(this.m)),P._forceRed(this)},A.prototype.invm=function(a){var f=this.imod(a._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(n,ru)})(mn)),mn.exports}var nu=ta();const qs=Gi(nu);var dn={exports:{}};var Ds;function ea(){return Ds||(Ds=1,(function(n,t){var e=ns(),r=e.Buffer;function s(o,g){for(var y in o)g[y]=o[y]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,g,y){return r(o,g,y)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,g,y){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,g,y)},i.alloc=function(o,g,y){if(typeof o!="number")throw new TypeError("Argument must be a number");var B=r(o);return g!==void 0?typeof y=="string"?B.fill(g,y):B.fill(g):B.fill(0),B},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(dn,dn.exports)),dn.exports}var mi,Ws;function iu(){if(Ws)return mi;Ws=1;var n=ea().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),g=o.charCodeAt(0);if(r[g]!==255)throw new TypeError(o+" is ambiguous");r[g]=i}var y=e.length,B=e.charAt(0),b=Math.log(y)/Math.log(256),O=Math.log(256)/Math.log(y);function L(K){if((Array.isArray(K)||K instanceof Uint8Array)&&(K=n.from(K)),!n.isBuffer(K))throw new TypeError("Expected Buffer");if(K.length===0)return"";for(var H=0,Y=0,j=0,W=K.length;j!==W&&K[j]===0;)j++,H++;for(var rt=(W-j)*O+1>>>0,at=new Uint8Array(rt);j!==W;){for(var it=K[j],st=0,nt=rt-1;(it!==0||st<Y)&&nt!==-1;nt--,st++)it+=256*at[nt]>>>0,at[nt]=it%y>>>0,it=it/y>>>0;if(it!==0)throw new Error("Non-zero carry");Y=st,j++}for(var U=rt-Y;U!==rt&&at[U]===0;)U++;for(var z=B.repeat(H);U<rt;++U)z+=e.charAt(at[U]);return z}function T(K){if(typeof K!="string")throw new TypeError("Expected String");if(K.length===0)return n.alloc(0);for(var H=0,Y=0,j=0;K[H]===B;)Y++,H++;for(var W=(K.length-H)*b+1>>>0,rt=new Uint8Array(W);H<K.length;){var at=K.charCodeAt(H);if(at>255)return;var it=r[at];if(it===255)return;for(var st=0,nt=W-1;(it!==0||st<j)&&nt!==-1;nt--,st++)it+=y*rt[nt]>>>0,rt[nt]=it%256>>>0,it=it/256>>>0;if(it!==0)throw new Error("Non-zero carry");j=st,H++}for(var U=W-j;U!==W&&rt[U]===0;)U++;var z=n.allocUnsafe(Y+(W-U));z.fill(0,0,Y);for(var V=Y;U!==W;)z[V++]=rt[U++];return z}function F(K){var H=T(K);if(H)return H;throw new Error("Non-base"+y+" character")}return{encode:L,decodeUnsafe:T,decode:F}}return mi=t,mi}var wi,$s;function su(){if($s)return wi;$s=1;var n=iu(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return wi=n(t),wi}var ou=su();const me=Gi(ou),Vs=Lo;var zt={},bi,Hs;function au(){if(Hs)return bi;Hs=1;var n=ea().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),g=o.charCodeAt(0);if(r[g]!==255)throw new TypeError(o+" is ambiguous");r[g]=i}var y=e.length,B=e.charAt(0),b=Math.log(y)/Math.log(256),O=Math.log(256)/Math.log(y);function L(K){if((Array.isArray(K)||K instanceof Uint8Array)&&(K=n.from(K)),!n.isBuffer(K))throw new TypeError("Expected Buffer");if(K.length===0)return"";for(var H=0,Y=0,j=0,W=K.length;j!==W&&K[j]===0;)j++,H++;for(var rt=(W-j)*O+1>>>0,at=new Uint8Array(rt);j!==W;){for(var it=K[j],st=0,nt=rt-1;(it!==0||st<Y)&&nt!==-1;nt--,st++)it+=256*at[nt]>>>0,at[nt]=it%y>>>0,it=it/y>>>0;if(it!==0)throw new Error("Non-zero carry");Y=st,j++}for(var U=rt-Y;U!==rt&&at[U]===0;)U++;for(var z=B.repeat(H);U<rt;++U)z+=e.charAt(at[U]);return z}function T(K){if(typeof K!="string")throw new TypeError("Expected String");if(K.length===0)return n.alloc(0);for(var H=0,Y=0,j=0;K[H]===B;)Y++,H++;for(var W=(K.length-H)*b+1>>>0,rt=new Uint8Array(W);H<K.length;){var at=K.charCodeAt(H);if(at>255)return;var it=r[at];if(it===255)return;for(var st=0,nt=W-1;(it!==0||st<j)&&nt!==-1;nt--,st++)it+=y*rt[nt]>>>0,rt[nt]=it%256>>>0,it=it/256>>>0;if(it!==0)throw new Error("Non-zero carry");j=st,H++}for(var U=W-j;U!==W&&rt[U]===0;)U++;var z=n.allocUnsafe(Y+(W-U));z.fill(0,0,Y);for(var V=Y;U!==W;)z[V++]=rt[U++];return z}function F(K){var H=T(K);if(H)return H;throw new Error("Non-base"+y+" character")}return{encode:L,decodeUnsafe:T,decode:F}}return bi=t,bi}var ki,Gs;function cu(){if(Gs)return ki;Gs=1;var n=au(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return ki=n(t),ki}function tr(n,t,e){return t<=n&&n<=e}function Ln(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function uu(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var g=i&1023,y=o&1023;s.push(65536+(g<<10)+y),r+=1}else s.push(65533)}r+=1}return s}function hu(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var En=-1;function is(n){this.tokens=[].slice.call(n)}is.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():En},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Kr=-1;function vi(n,t){if(n)throw TypeError("Decoder error");return t||65533}var In="utf-8";function Bn(n,t){if(!(this instanceof Bn))return new Bn(n,t);if(n=n!==void 0?String(n).toLowerCase():In,n!==In)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ln(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Bn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Ln(e),this._streaming||(this._decoder=new lu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new is(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Kr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Kr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),hu(i)}};function xn(n,t){if(!(this instanceof xn))return new xn(n,t);if(n=n!==void 0?String(n).toLowerCase():In,n!==In)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ln(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}xn.prototype={encode:function(t,e){t=t?String(t):"",e=Ln(e),this._streaming||(this._encoder=new fu(this._options)),this._streaming=!!e.stream;for(var r=[],s=new is(uu(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Kr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Kr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function lu(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(g,y){if(y===En&&s!==0)return s=0,vi(t);if(y===En)return Kr;if(s===0){if(tr(y,0,127))return y;if(tr(y,194,223))s=1,e=y-192;else if(tr(y,224,239))y===224&&(i=160),y===237&&(o=159),s=2,e=y-224;else if(tr(y,240,244))y===240&&(i=144),y===244&&(o=143),s=3,e=y-240;else return vi(t);return e=e<<6*s,null}if(!tr(y,i,o))return e=s=r=0,i=128,o=191,g.prepend(y),vi(t);if(i=128,o=191,r+=1,e+=y-128<<6*(s-r),r!==s)return null;var B=e;return e=s=r=0,B}}function fu(n){n.fatal,this.handler=function(t,e){if(e===En)return Kr;if(tr(e,0,127))return e;var r,s;tr(e,128,2047)?(r=1,s=192):tr(e,2048,65535)?(r=2,s=224):tr(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const du=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Bn,TextEncoder:xn},Symbol.toStringTag,{value:"Module"})),pu=Io(du);var js;function gu(){if(js)return zt;js=1;var n=zt&&zt.__createBinding||(Object.create?(function(U,z,V,A){A===void 0&&(A=V),Object.defineProperty(U,A,{enumerable:!0,get:function(){return z[V]}})}):(function(U,z,V,A){A===void 0&&(A=V),U[A]=z[V]})),t=zt&&zt.__setModuleDefault||(Object.create?(function(U,z){Object.defineProperty(U,"default",{enumerable:!0,value:z})}):function(U,z){U.default=z}),e=zt&&zt.__decorate||function(U,z,V,A){var m=arguments.length,a=m<3?z:A===null?A=Object.getOwnPropertyDescriptor(z,V):A,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(U,z,V,A);else for(var w=U.length-1;w>=0;w--)(f=U[w])&&(a=(m<3?f(a):m>3?f(z,V,a):f(z,V))||a);return m>3&&a&&Object.defineProperty(z,V,a),a},r=zt&&zt.__importStar||function(U){if(U&&U.__esModule)return U;var z={};if(U!=null)for(var V in U)V!=="default"&&Object.hasOwnProperty.call(U,V)&&n(z,U,V);return t(z,U),z},s=zt&&zt.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(zt,"__esModule",{value:!0}),zt.deserializeUnchecked=zt.deserialize=zt.serialize=zt.BinaryReader=zt.BinaryWriter=zt.BorshError=zt.baseDecode=zt.baseEncode=void 0;const i=s(ta()),o=s(cu()),g=r(pu),y=typeof TextDecoder!="function"?g.TextDecoder:TextDecoder,B=new y("utf-8",{fatal:!0});function b(U){return typeof U=="string"&&(U=Be.from(U,"utf8")),o.default.encode(Be.from(U))}zt.baseEncode=b;function O(U){return Be.from(o.default.decode(U))}zt.baseDecode=O;const L=1024;class T extends Error{constructor(z){super(z),this.fieldPath=[],this.originalMessage=z}addToFieldPath(z){this.fieldPath.splice(0,0,z),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}zt.BorshError=T;class F{constructor(){this.buf=Be.alloc(L),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Be.concat([this.buf,Be.alloc(L)]))}writeU8(z){this.maybeResize(),this.buf.writeUInt8(z,this.length),this.length+=1}writeU16(z){this.maybeResize(),this.buf.writeUInt16LE(z,this.length),this.length+=2}writeU32(z){this.maybeResize(),this.buf.writeUInt32LE(z,this.length),this.length+=4}writeU64(z){this.maybeResize(),this.writeBuffer(Be.from(new i.default(z).toArray("le",8)))}writeU128(z){this.maybeResize(),this.writeBuffer(Be.from(new i.default(z).toArray("le",16)))}writeU256(z){this.maybeResize(),this.writeBuffer(Be.from(new i.default(z).toArray("le",32)))}writeU512(z){this.maybeResize(),this.writeBuffer(Be.from(new i.default(z).toArray("le",64)))}writeBuffer(z){this.buf=Be.concat([Be.from(this.buf.subarray(0,this.length)),z,Be.alloc(L)]),this.length+=z.length}writeString(z){this.maybeResize();const V=Be.from(z,"utf8");this.writeU32(V.length),this.writeBuffer(V)}writeFixedArray(z){this.writeBuffer(Be.from(z))}writeArray(z,V){this.maybeResize(),this.writeU32(z.length);for(const A of z)this.maybeResize(),V(A)}toArray(){return this.buf.subarray(0,this.length)}}zt.BinaryWriter=F;function K(U,z,V){const A=V.value;V.value=function(...m){try{return A.apply(this,m)}catch(a){if(a instanceof RangeError){const f=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(f)>=0)throw new T("Reached the end of buffer when deserializing")}throw a}}}class H{constructor(z){this.buf=z,this.offset=0}readU8(){const z=this.buf.readUInt8(this.offset);return this.offset+=1,z}readU16(){const z=this.buf.readUInt16LE(this.offset);return this.offset+=2,z}readU32(){const z=this.buf.readUInt32LE(this.offset);return this.offset+=4,z}readU64(){const z=this.readBuffer(8);return new i.default(z,"le")}readU128(){const z=this.readBuffer(16);return new i.default(z,"le")}readU256(){const z=this.readBuffer(32);return new i.default(z,"le")}readU512(){const z=this.readBuffer(64);return new i.default(z,"le")}readBuffer(z){if(this.offset+z>this.buf.length)throw new T(`Expected buffer length ${z} isn't within bounds`);const V=this.buf.slice(this.offset,this.offset+z);return this.offset+=z,V}readString(){const z=this.readU32(),V=this.readBuffer(z);try{return B.decode(V)}catch(A){throw new T(`Error decoding UTF-8 string: ${A}`)}}readFixedArray(z){return new Uint8Array(this.readBuffer(z))}readArray(z){const V=this.readU32(),A=Array();for(let m=0;m<V;++m)A.push(z());return A}}e([K],H.prototype,"readU8",null),e([K],H.prototype,"readU16",null),e([K],H.prototype,"readU32",null),e([K],H.prototype,"readU64",null),e([K],H.prototype,"readU128",null),e([K],H.prototype,"readU256",null),e([K],H.prototype,"readU512",null),e([K],H.prototype,"readString",null),e([K],H.prototype,"readFixedArray",null),e([K],H.prototype,"readArray",null),zt.BinaryReader=H;function Y(U){return U.charAt(0).toUpperCase()+U.slice(1)}function j(U,z,V,A,m){try{if(typeof A=="string")m[`write${Y(A)}`](V);else if(A instanceof Array)if(typeof A[0]=="number"){if(V.length!==A[0])throw new T(`Expecting byte array of length ${A[0]}, but got ${V.length} bytes`);m.writeFixedArray(V)}else if(A.length===2&&typeof A[1]=="number"){if(V.length!==A[1])throw new T(`Expecting byte array of length ${A[1]}, but got ${V.length} bytes`);for(let a=0;a<A[1];a++)j(U,null,V[a],A[0],m)}else m.writeArray(V,a=>{j(U,z,a,A[0],m)});else if(A.kind!==void 0)switch(A.kind){case"option":{V==null?m.writeU8(0):(m.writeU8(1),j(U,z,V,A.type,m));break}case"map":{m.writeU32(V.size),V.forEach((a,f)=>{j(U,z,f,A.key,m),j(U,z,a,A.value,m)});break}default:throw new T(`FieldType ${A} unrecognized`)}else W(U,V,m)}catch(a){throw a instanceof T&&a.addToFieldPath(z),a}}function W(U,z,V){if(typeof z.borshSerialize=="function"){z.borshSerialize(V);return}const A=U.get(z.constructor);if(!A)throw new T(`Class ${z.constructor.name} is missing in schema`);if(A.kind==="struct")A.fields.map(([m,a])=>{j(U,m,z[m],a,V)});else if(A.kind==="enum"){const m=z[A.field];for(let a=0;a<A.values.length;++a){const[f,w]=A.values[a];if(f===m){V.writeU8(a),j(U,f,z[f],w,V);break}}}else throw new T(`Unexpected schema kind: ${A.kind} for ${z.constructor.name}`)}function rt(U,z,V=F){const A=new V;return W(U,z,A),A.toArray()}zt.serialize=rt;function at(U,z,V,A){try{if(typeof V=="string")return A[`read${Y(V)}`]();if(V instanceof Array){if(typeof V[0]=="number")return A.readFixedArray(V[0]);if(typeof V[1]=="number"){const m=[];for(let a=0;a<V[1];a++)m.push(at(U,null,V[0],A));return m}else return A.readArray(()=>at(U,z,V[0],A))}if(V.kind==="option")return A.readU8()?at(U,z,V.type,A):void 0;if(V.kind==="map"){let m=new Map;const a=A.readU32();for(let f=0;f<a;f++){const w=at(U,z,V.key,A),E=at(U,z,V.value,A);m.set(w,E)}return m}return it(U,V,A)}catch(m){throw m instanceof T&&m.addToFieldPath(z),m}}function it(U,z,V){if(typeof z.borshDeserialize=="function")return z.borshDeserialize(V);const A=U.get(z);if(!A)throw new T(`Class ${z.name} is missing in schema`);if(A.kind==="struct"){const m={};for(const[a,f]of U.get(z).fields)m[a]=at(U,a,f,V);return new z(m)}if(A.kind==="enum"){const m=V.readU8();if(m>=A.values.length)throw new T(`Enum index: ${m} is out of range`);const[a,f]=A.values[m],w=at(U,a,f,V);return new z({[a]:w})}throw new T(`Unexpected schema kind: ${A.kind} for ${z.constructor.name}`)}function st(U,z,V,A=H){const m=new A(V),a=it(U,z,m);if(m.offset<V.length)throw new T(`Unexpected ${V.length-m.offset} bytes after deserialized data`);return a}zt.deserialize=st;function nt(U,z,V,A=H){const m=new A(V);return it(U,z,m)}return zt.deserializeUnchecked=nt,zt}var Si=gu(),J={},Ys;function yu(){if(Ys)return J;Ys=1,Object.defineProperty(J,"__esModule",{value:!0}),J.s16=J.s8=J.nu64be=J.u48be=J.u40be=J.u32be=J.u24be=J.u16be=J.nu64=J.u48=J.u40=J.u32=J.u24=J.u16=J.u8=J.offset=J.greedy=J.Constant=J.UTF8=J.CString=J.Blob=J.Boolean=J.BitField=J.BitStructure=J.VariantLayout=J.Union=J.UnionLayoutDiscriminator=J.UnionDiscriminator=J.Structure=J.Sequence=J.DoubleBE=J.Double=J.FloatBE=J.Float=J.NearInt64BE=J.NearInt64=J.NearUInt64BE=J.NearUInt64=J.IntBE=J.Int=J.UIntBE=J.UInt=J.OffsetLayout=J.GreedyCount=J.ExternalLayout=J.bindConstructorLayout=J.nameWithProperty=J.Layout=J.uint8ArrayToBuffer=J.checkUint8Array=void 0,J.constant=J.utf8=J.cstr=J.blob=J.unionLayoutDiscriminator=J.union=J.seq=J.bits=J.struct=J.f64be=J.f64=J.f32be=J.f32=J.ns64be=J.s48be=J.s40be=J.s32be=J.s24be=J.s16be=J.ns64=J.s48=J.s40=J.s32=J.s24=void 0;const n=ns();function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}J.checkUint8Array=t;function e(c){return t(c),n.Buffer.from(c.buffer,c.byteOffset,c.length)}J.uint8ArrayToBuffer=e;let r=class{constructor(u,v){if(!Number.isInteger(u))throw new TypeError("span must be an integer");this.span=u,this.property=v}makeDestinationObject(){return{}}getSpan(u,v){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(u){const v=Object.create(this.constructor.prototype);return Object.assign(v,this),v.property=u,v}fromArray(u){}};J.Layout=r;function s(c,u){return u.property?c+"["+u.property+"]":c}J.nameWithProperty=s;function i(c,u){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(u&&u instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(u,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=u,u.boundConstructor_=c,u.makeDestinationObject=(()=>new c),Object.defineProperty(c.prototype,"encode",{value(v,M){return u.encode(this,v,M)},writable:!0}),Object.defineProperty(c,"decode",{value(v,M){return u.decode(v,M)},writable:!0})}J.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}J.ExternalLayout=o;class g extends o{constructor(u=1,v){if(!Number.isInteger(u)||0>=u)throw new TypeError("elementSpan must be a (positive) integer");super(-1,v),this.elementSpan=u}isCount(){return!0}decode(u,v=0){t(u);const M=u.length-v;return Math.floor(M/this.elementSpan)}encode(u,v,M){return 0}}J.GreedyCount=g;class y extends o{constructor(u,v=0,M){if(!(u instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(v))throw new TypeError("offset must be integer or undefined");super(u.span,M||u.property),this.layout=u,this.offset=v}isCount(){return this.layout instanceof B||this.layout instanceof b}decode(u,v=0){return this.layout.decode(u,v+this.offset)}encode(u,v,M=0){return this.layout.encode(u,v,M+this.offset)}}J.OffsetLayout=y;class B extends r{constructor(u,v){if(super(u,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,v=0){return e(u).readUIntLE(v,this.span)}encode(u,v,M=0){return e(v).writeUIntLE(u,M,this.span),this.span}}J.UInt=B;class b extends r{constructor(u,v){if(super(u,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,v=0){return e(u).readUIntBE(v,this.span)}encode(u,v,M=0){return e(v).writeUIntBE(u,M,this.span),this.span}}J.UIntBE=b;class O extends r{constructor(u,v){if(super(u,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,v=0){return e(u).readIntLE(v,this.span)}encode(u,v,M=0){return e(v).writeIntLE(u,M,this.span),this.span}}J.Int=O;class L extends r{constructor(u,v){if(super(u,v),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,v=0){return e(u).readIntBE(v,this.span)}encode(u,v,M=0){return e(v).writeIntBE(u,M,this.span),this.span}}J.IntBE=L;const T=Math.pow(2,32);function F(c){const u=Math.floor(c/T),v=c-u*T;return{hi32:u,lo32:v}}function K(c,u){return c*T+u}class H extends r{constructor(u){super(8,u)}decode(u,v=0){const M=e(u),$=M.readUInt32LE(v),et=M.readUInt32LE(v+4);return K(et,$)}encode(u,v,M=0){const $=F(u),et=e(v);return et.writeUInt32LE($.lo32,M),et.writeUInt32LE($.hi32,M+4),8}}J.NearUInt64=H;class Y extends r{constructor(u){super(8,u)}decode(u,v=0){const M=e(u),$=M.readUInt32BE(v),et=M.readUInt32BE(v+4);return K($,et)}encode(u,v,M=0){const $=F(u),et=e(v);return et.writeUInt32BE($.hi32,M),et.writeUInt32BE($.lo32,M+4),8}}J.NearUInt64BE=Y;class j extends r{constructor(u){super(8,u)}decode(u,v=0){const M=e(u),$=M.readUInt32LE(v),et=M.readInt32LE(v+4);return K(et,$)}encode(u,v,M=0){const $=F(u),et=e(v);return et.writeUInt32LE($.lo32,M),et.writeInt32LE($.hi32,M+4),8}}J.NearInt64=j;class W extends r{constructor(u){super(8,u)}decode(u,v=0){const M=e(u),$=M.readInt32BE(v),et=M.readUInt32BE(v+4);return K($,et)}encode(u,v,M=0){const $=F(u),et=e(v);return et.writeInt32BE($.hi32,M),et.writeUInt32BE($.lo32,M+4),8}}J.NearInt64BE=W;class rt extends r{constructor(u){super(4,u)}decode(u,v=0){return e(u).readFloatLE(v)}encode(u,v,M=0){return e(v).writeFloatLE(u,M),4}}J.Float=rt;class at extends r{constructor(u){super(4,u)}decode(u,v=0){return e(u).readFloatBE(v)}encode(u,v,M=0){return e(v).writeFloatBE(u,M),4}}J.FloatBE=at;class it extends r{constructor(u){super(8,u)}decode(u,v=0){return e(u).readDoubleLE(v)}encode(u,v,M=0){return e(v).writeDoubleLE(u,M),8}}J.Double=it;class st extends r{constructor(u){super(8,u)}decode(u,v=0){return e(u).readDoubleBE(v)}encode(u,v,M=0){return e(v).writeDoubleBE(u,M),8}}J.DoubleBE=st;class nt extends r{constructor(u,v,M){if(!(u instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(v instanceof o&&v.isCount()||Number.isInteger(v)&&0<=v))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let $=-1;!(v instanceof o)&&0<u.span&&($=v*u.span),super($,M),this.elementLayout=u,this.count=v}getSpan(u,v=0){if(0<=this.span)return this.span;let M=0,$=this.count;if($ instanceof o&&($=$.decode(u,v)),0<this.elementLayout.span)M=$*this.elementLayout.span;else{let et=0;for(;et<$;)M+=this.elementLayout.getSpan(u,v+M),++et}return M}decode(u,v=0){const M=[];let $=0,et=this.count;for(et instanceof o&&(et=et.decode(u,v));$<et;)M.push(this.elementLayout.decode(u,v)),v+=this.elementLayout.getSpan(u,v),$+=1;return M}encode(u,v,M=0){const $=this.elementLayout,et=u.reduce((lt,pt)=>lt+$.encode(pt,v,M+lt),0);return this.count instanceof o&&this.count.encode(u.length,v,M),et}}J.Sequence=nt;class U extends r{constructor(u,v,M){if(!(Array.isArray(u)&&u.reduce((et,lt)=>et&&lt instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof v=="boolean"&&M===void 0&&(M=v,v=void 0);for(const et of u)if(0>et.span&&et.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let $=-1;try{$=u.reduce((et,lt)=>et+lt.getSpan(),0)}catch{}super($,v),this.fields=u,this.decodePrefixes=!!M}getSpan(u,v=0){if(0<=this.span)return this.span;let M=0;try{M=this.fields.reduce(($,et)=>{const lt=et.getSpan(u,v);return v+=lt,$+lt},0)}catch{throw new RangeError("indeterminate span")}return M}decode(u,v=0){t(u);const M=this.makeDestinationObject();for(const $ of this.fields)if($.property!==void 0&&(M[$.property]=$.decode(u,v)),v+=$.getSpan(u,v),this.decodePrefixes&&u.length===v)break;return M}encode(u,v,M=0){const $=M;let et=0,lt=0;for(const pt of this.fields){let Pt=pt.span;if(lt=0<Pt?Pt:0,pt.property!==void 0){const Rt=u[pt.property];Rt!==void 0&&(lt=pt.encode(Rt,v,M),0>Pt&&(Pt=pt.getSpan(v,M)))}et=M,M+=Pt}return et+lt-$}fromArray(u){const v=this.makeDestinationObject();for(const M of this.fields)M.property!==void 0&&0<u.length&&(v[M.property]=u.shift());return v}layoutFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const v of this.fields)if(v.property===u)return v}offsetOf(u){if(typeof u!="string")throw new TypeError("property must be string");let v=0;for(const M of this.fields){if(M.property===u)return v;0>M.span?v=-1:0<=v&&(v+=M.span)}}}J.Structure=U;class z{constructor(u){this.property=u}decode(u,v){throw new Error("UnionDiscriminator is abstract")}encode(u,v,M){throw new Error("UnionDiscriminator is abstract")}}J.UnionDiscriminator=z;class V extends z{constructor(u,v){if(!(u instanceof o&&u.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(v||u.property||"variant"),this.layout=u}decode(u,v){return this.layout.decode(u,v)}encode(u,v,M){return this.layout.encode(u,v,M)}}J.UnionLayoutDiscriminator=V;class A extends r{constructor(u,v,M){let $;if(u instanceof B||u instanceof b)$=new V(new y(u));else if(u instanceof o&&u.isCount())$=new V(u);else if(u instanceof z)$=u;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(v===void 0&&(v=null),!(v===null||v instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(v!==null){if(0>v.span)throw new Error("defaultLayout must have constant span");v.property===void 0&&(v=v.replicate("content"))}let et=-1;v&&(et=v.span,0<=et&&(u instanceof B||u instanceof b)&&(et+=$.layout.span)),super(et,M),this.discriminator=$,this.usesPrefixDiscriminator=u instanceof B||u instanceof b,this.defaultLayout=v,this.registry={};let lt=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(pt){return lt(pt)},this.configGetSourceVariant=function(pt){lt=pt.bind(this)}}getSpan(u,v=0){if(0<=this.span)return this.span;const M=this.getVariant(u,v);if(!M)throw new Error("unable to determine span for unrecognized variant");return M.getSpan(u,v)}defaultGetSourceVariant(u){if(Object.prototype.hasOwnProperty.call(u,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(u,this.defaultLayout.property))return;const v=this.registry[u[this.discriminator.property]];if(v&&(!v.layout||v.property&&Object.prototype.hasOwnProperty.call(u,v.property)))return v}else for(const v in this.registry){const M=this.registry[v];if(M.property&&Object.prototype.hasOwnProperty.call(u,M.property))return M}throw new Error("unable to infer src variant")}decode(u,v=0){let M;const $=this.discriminator,et=$.decode(u,v),lt=this.registry[et];if(lt===void 0){const pt=this.defaultLayout;let Pt=0;this.usesPrefixDiscriminator&&(Pt=$.layout.span),M=this.makeDestinationObject(),M[$.property]=et,M[pt.property]=pt.decode(u,v+Pt)}else M=lt.decode(u,v);return M}encode(u,v,M=0){const $=this.getSourceVariant(u);if($===void 0){const et=this.discriminator,lt=this.defaultLayout;let pt=0;return this.usesPrefixDiscriminator&&(pt=et.layout.span),et.encode(u[et.property],v,M),pt+lt.encode(u[lt.property],v,M+pt)}return $.encode(u,v,M)}addVariant(u,v,M){const $=new m(this,u,v,M);return this.registry[u]=$,$}getVariant(u,v=0){let M;return u instanceof Uint8Array?M=this.discriminator.decode(u,v):M=u,this.registry[M]}}J.Union=A;class m extends r{constructor(u,v,M,$){if(!(u instanceof A))throw new TypeError("union must be a Union");if(!Number.isInteger(v)||0>v)throw new TypeError("variant must be a (non-negative) integer");if(typeof M=="string"&&$===void 0&&($=M,M=null),M){if(!(M instanceof r))throw new TypeError("layout must be a Layout");if(u.defaultLayout!==null&&0<=M.span&&M.span>u.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof $!="string")throw new TypeError("variant must have a String property")}let et=u.span;0>u.span&&(et=M?M.span:0,0<=et&&u.usesPrefixDiscriminator&&(et+=u.discriminator.layout.span)),super(et,$),this.union=u,this.variant=v,this.layout=M||null}getSpan(u,v=0){if(0<=this.span)return this.span;let M=0;this.union.usesPrefixDiscriminator&&(M=this.union.discriminator.layout.span);let $=0;return this.layout&&($=this.layout.getSpan(u,v+M)),M+$}decode(u,v=0){const M=this.makeDestinationObject();if(this!==this.union.getVariant(u,v))throw new Error("variant mismatch");let $=0;return this.union.usesPrefixDiscriminator&&($=this.union.discriminator.layout.span),this.layout?M[this.property]=this.layout.decode(u,v+$):this.property?M[this.property]=!0:this.union.usesPrefixDiscriminator&&(M[this.union.discriminator.property]=this.variant),M}encode(u,v,M=0){let $=0;if(this.union.usesPrefixDiscriminator&&($=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(u,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,v,M);let et=$;if(this.layout&&(this.layout.encode(u[this.property],v,M+$),et+=this.layout.getSpan(v,M+$),0<=this.union.span&&et>this.union.span))throw new Error("encoded variant overruns containing union");return et}fromArray(u){if(this.layout)return this.layout.fromArray(u)}}J.VariantLayout=m;function a(c){return 0>c&&(c+=4294967296),c}class f extends r{constructor(u,v,M){if(!(u instanceof B||u instanceof b))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof v=="string"&&M===void 0&&(M=v,v=!1),4<u.span)throw new RangeError("word cannot exceed 32 bits");super(u.span,M),this.word=u,this.msb=!!v,this.fields=[];let $=0;this._packedSetValue=function(et){return $=a(et),this},this._packedGetValue=function(){return $}}decode(u,v=0){const M=this.makeDestinationObject(),$=this.word.decode(u,v);this._packedSetValue($);for(const et of this.fields)et.property!==void 0&&(M[et.property]=et.decode(u));return M}encode(u,v,M=0){const $=this.word.decode(v,M);this._packedSetValue($);for(const et of this.fields)if(et.property!==void 0){const lt=u[et.property];lt!==void 0&&et.encode(lt)}return this.word.encode(this._packedGetValue(),v,M)}addField(u,v){const M=new w(this,u,v);return this.fields.push(M),M}addBoolean(u){const v=new E(this,u);return this.fields.push(v),v}fieldFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const v of this.fields)if(v.property===u)return v}}J.BitStructure=f;class w{constructor(u,v,M){if(!(u instanceof f))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(v)||0>=v)throw new TypeError("bits must be positive integer");const $=8*u.span,et=u.fields.reduce((lt,pt)=>lt+pt.bits,0);if(v+et>$)throw new Error("bits too long for span remainder ("+($-et)+" of "+$+" remain)");this.container=u,this.bits=v,this.valueMask=(1<<v)-1,v===32&&(this.valueMask=4294967295),this.start=et,this.container.msb&&(this.start=$-et-v),this.wordMask=a(this.valueMask<<this.start),this.property=M}decode(u,v){const M=this.container._packedGetValue();return a(M&this.wordMask)>>>this.start}encode(u){if(typeof u!="number"||!Number.isInteger(u)||u!==a(u&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const v=this.container._packedGetValue(),M=a(u<<this.start);this.container._packedSetValue(a(v&~this.wordMask)|M)}}J.BitField=w;class E extends w{constructor(u,v){super(u,1,v)}decode(u,v){return!!super.decode(u,v)}encode(u){typeof u=="boolean"&&(u=+u),super.encode(u)}}J.Boolean=E;class _ extends r{constructor(u,v){if(!(u instanceof o&&u.isCount()||Number.isInteger(u)&&0<=u))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let M=-1;u instanceof o||(M=u),super(M,v),this.length=u}getSpan(u,v){let M=this.span;return 0>M&&(M=this.length.decode(u,v)),M}decode(u,v=0){let M=this.span;return 0>M&&(M=this.length.decode(u,v)),e(u).slice(v,v+M)}encode(u,v,M){let $=this.length;if(this.length instanceof o&&($=u.length),!(u instanceof Uint8Array&&$===u.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+$+") Uint8Array as src");if(M+$>v.length)throw new RangeError("encoding overruns Uint8Array");const et=e(u);return e(v).write(et.toString("hex"),M,$,"hex"),this.length instanceof o&&this.length.encode($,v,M),$}}J.Blob=_;class P extends r{constructor(u){super(-1,u)}getSpan(u,v=0){t(u);let M=v;for(;M<u.length&&u[M]!==0;)M+=1;return 1+M-v}decode(u,v=0){const M=this.getSpan(u,v);return e(u).slice(v,v+M-1).toString("utf-8")}encode(u,v,M=0){typeof u!="string"&&(u=String(u));const $=n.Buffer.from(u,"utf8"),et=$.length;if(M+et>v.length)throw new RangeError("encoding overruns Buffer");const lt=e(v);return $.copy(lt,M),lt[M+et]=0,et+1}}J.CString=P;class N extends r{constructor(u,v){if(typeof u=="string"&&v===void 0&&(v=u,u=void 0),u===void 0)u=-1;else if(!Number.isInteger(u))throw new TypeError("maxSpan must be an integer");super(-1,v),this.maxSpan=u}getSpan(u,v=0){return t(u),u.length-v}decode(u,v=0){const M=this.getSpan(u,v);if(0<=this.maxSpan&&this.maxSpan<M)throw new RangeError("text length exceeds maxSpan");return e(u).slice(v,v+M).toString("utf-8")}encode(u,v,M=0){typeof u!="string"&&(u=String(u));const $=n.Buffer.from(u,"utf8"),et=$.length;if(0<=this.maxSpan&&this.maxSpan<et)throw new RangeError("text length exceeds maxSpan");if(M+et>v.length)throw new RangeError("encoding overruns Buffer");return $.copy(e(v),M),et}}J.UTF8=N;class I extends r{constructor(u,v){super(0,v),this.value=u}decode(u,v){return this.value}encode(u,v,M){return 0}}return J.Constant=I,J.greedy=((c,u)=>new g(c,u)),J.offset=((c,u,v)=>new y(c,u,v)),J.u8=(c=>new B(1,c)),J.u16=(c=>new B(2,c)),J.u24=(c=>new B(3,c)),J.u32=(c=>new B(4,c)),J.u40=(c=>new B(5,c)),J.u48=(c=>new B(6,c)),J.nu64=(c=>new H(c)),J.u16be=(c=>new b(2,c)),J.u24be=(c=>new b(3,c)),J.u32be=(c=>new b(4,c)),J.u40be=(c=>new b(5,c)),J.u48be=(c=>new b(6,c)),J.nu64be=(c=>new Y(c)),J.s8=(c=>new O(1,c)),J.s16=(c=>new O(2,c)),J.s24=(c=>new O(3,c)),J.s32=(c=>new O(4,c)),J.s40=(c=>new O(5,c)),J.s48=(c=>new O(6,c)),J.ns64=(c=>new j(c)),J.s16be=(c=>new L(2,c)),J.s24be=(c=>new L(3,c)),J.s32be=(c=>new L(4,c)),J.s40be=(c=>new L(5,c)),J.s48be=(c=>new L(6,c)),J.ns64be=(c=>new W(c)),J.f32=(c=>new rt(c)),J.f32be=(c=>new at(c)),J.f64=(c=>new it(c)),J.f64be=(c=>new st(c)),J.struct=((c,u,v)=>new U(c,u,v)),J.bits=((c,u,v)=>new f(c,u,v)),J.seq=((c,u,v)=>new nt(c,u,v)),J.union=((c,u,v)=>new A(c,u,v)),J.unionLayoutDiscriminator=((c,u)=>new V(c,u)),J.blob=((c,u)=>new _(c,u)),J.cstr=(c=>new P(c)),J.utf8=((c,u)=>new N(c,u)),J.constant=((c,u)=>new I(c,u)),J}var C=yu(),mu=8078e3,wu=8078001,bu=8078004,ku=8078005,vu=8078006,Su=8078011;function ra(n){return Array.isArray(n)?"%5B"+n.map(ra).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function Eu([n,t]){return`${n}=${ra(t)}`}function Iu(n){const t=Object.entries(n).map(Eu).join("&");return btoa(t)}function Bu(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${Iu(t)}'`),`${e}\``}}var Lr=class extends Error{cause=this.cause;context;constructor(...[n,t]){let e,r;if(t){const{cause:i,...o}=t;i&&(r={cause:i}),Object.keys(o).length>0&&(e=o)}const s=Bu(n,e);super(s,r),this.context={__code:n,...e},this.name="SolanaError"}};function xu(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function Au(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(xu(t,n));return n.write(t,e,0),e}})}function _u(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function Mr(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function Ru(n,t){if(Mr(n)!==Mr(t))throw new Lr(bu);if(Mr(n)&&Mr(t)&&n.fixedSize!==t.fixedSize)throw new Lr(ku,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!Mr(n)&&!Mr(t)&&n.maxSize!==t.maxSize)throw new Lr(vu,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function Mu(n,t,e=0){if(t.length-e<=0)throw new Lr(mu,{codecDescription:n})}function Tu(n,t,e,r=0){const s=e.length-r;if(s<t)throw new Lr(wu,{bytesLength:s,codecDescription:n,expected:t})}function Pu(n,t,e,r){if(r<t||r>e)throw new Lr(Su,{codecDescription:n,max:e,min:t,value:r})}function na(n){return n?.endian!==1}function Lu(n){return Au({fixedSize:n.size,write(t,e,r){n.range&&Pu(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,na(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function Cu(n){return _u({fixedSize:n.size,read(t,e=0){Mu(n.name,t,e),Tu(n.name,n.size,t,e);const r=new DataView(Uu(t,e,n.size));return[n.get(r,na(n.config)),e+n.size]}})}function Uu(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var ia=(n={})=>Lu({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),Ou=(n={})=>Cu({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Nu=(n={})=>Ru(ia(n),Ou(n));class zu extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:g}=t,y=g.length===0?s:`At path: ${g.join(".")} -- ${s}`;super(i??y),i!=null&&(this.cause=y),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Ku(n){return sn(n)&&typeof n[Symbol.iterator]=="function"}function sn(n){return typeof n=="object"&&n!=null}function An(n){return sn(n)&&!Array.isArray(n)}function Ne(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Fu(n){const{done:t,value:e}=n.next();return t?void 0:e}function qu(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:g,message:y=`Expected a value of type \`${o}\`${g?` with refinement \`${g}\``:""}, but received: \`${Ne(r)}\``}=n;return{value:r,type:o,refinement:g,key:s[s.length-1],path:s,branch:i,...n,message:y}}function*Zs(n,t,e,r){Ku(n)||(n=[n]);for(const s of n){const i=qu(s,t,e,r);i&&(yield i)}}function*ss(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,g={path:r,branch:s,mask:o};i&&(n=t.coercer(n,g));let y="valid";for(const B of t.validator(n,g))B.explanation=e.message,y="not_valid",yield[B,void 0];for(let[B,b,O]of t.entries(n,g)){const L=ss(b,O,{path:B===void 0?r:[...r,B],branch:B===void 0?s:[...s,b],coerce:i,mask:o,message:e.message});for(const T of L)T[0]?(y=T[0].refinement!=null?"not_refined":"not_valid",yield[T[0],void 0]):i&&(b=T[1],B===void 0?n=b:n instanceof Map?n.set(B,b):n instanceof Set?n.add(b):sn(n)&&(b!==void 0||B in n)&&(n[B]=b))}if(y!=="not_valid")for(const B of t.refiner(n,g))B.explanation=e.message,y="not_refined",yield[B,void 0];y==="valid"&&(yield[void 0,n])}let Ye=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=y=>y,entries:g=function*(){}}=t;this.type=e,this.schema=r,this.entries=g,this.coercer=o,s?this.validator=(y,B)=>{const b=s(y,B);return Zs(b,B,this,y)}:this.validator=()=>[],i?this.refiner=(y,B)=>{const b=i(y,B);return Zs(b,B,this,y)}:this.refiner=()=>[]}assert(t,e){return sa(t,this,e)}create(t,e){return ht(t,this,e)}is(t){return oa(t,this)}mask(t,e){return Du(t,this,e)}validate(t,e={}){return on(t,this,e)}};function sa(n,t,e){const r=on(n,t,{message:e});if(r[0])throw r[0]}function ht(n,t,e){const r=on(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Du(n,t,e){const r=on(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function oa(n,t){return!on(n,t)[0]}function on(n,t,e={}){const r=ss(n,t,e),s=Fu(r);return s[0]?[new zu(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Sr(n,t){return new Ye({type:n,schema:null,validator:t})}function Wu(){return Sr("any",()=>!0)}function ft(n){return new Ye({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ne(t)}`}})}function je(){return Sr("boolean",n=>typeof n=="boolean")}function os(n){return Sr("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ne(t)}`)}function re(n){const t=Ne(n),e=typeof n;return new Ye({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Ne(r)}`}})}function $u(){return Sr("never",()=>!1)}function dt(n){return new Ye({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function X(){return Sr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ne(n)}`)}function yt(n){return new Ye({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function aa(n,t){return new Ye({type:"record",schema:null,*entries(e){if(sn(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return An(e)||`Expected an object, but received: ${Ne(e)}`},coercer(e){return An(e)?{...e}:e}})}function ct(){return Sr("string",n=>typeof n=="string"||`Expected a string, but received: ${Ne(n)}`)}function as(n){const t=$u();return new Ye({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ne(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function ot(n){const t=Object.keys(n);return new Ye({type:"type",schema:n,*entries(e){if(sn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return An(e)||`Expected an object, but received: ${Ne(e)}`},coercer(e){return An(e)?{...e}:e}})}function xe(n){const t=n.map(e=>e.type).join(" | ");return new Ye({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,o]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return o}return e},validator(e,r){const s=[];for(const i of n){const[...o]=ss(e,i,r),[g]=o;if(g[0])for(const[y]of o)y&&s.push(y);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ne(e)}`,...s]}})}function Wr(){return Sr("unknown",()=>!0)}function an(n,t,e){return new Ye({...n,coercer:(r,s)=>oa(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var pn,Vu=new Uint8Array(16);function ca(){if(!pn&&(pn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pn(Vu)}const Hu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Cn(n){return typeof n=="string"&&Hu.test(n)}var ye=[];for(var Ei=0;Ei<256;++Ei)ye.push((Ei+256).toString(16).substr(1));function Un(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ye[n[t+0]]+ye[n[t+1]]+ye[n[t+2]]+ye[n[t+3]]+"-"+ye[n[t+4]]+ye[n[t+5]]+"-"+ye[n[t+6]]+ye[n[t+7]]+"-"+ye[n[t+8]]+ye[n[t+9]]+"-"+ye[n[t+10]]+ye[n[t+11]]+ye[n[t+12]]+ye[n[t+13]]+ye[n[t+14]]+ye[n[t+15]]).toLowerCase();if(!Cn(e))throw TypeError("Stringified UUID is invalid");return e}var Xs,Ii,Bi=0,xi=0;function Gu(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||Xs,o=n.clockseq!==void 0?n.clockseq:Ii;if(i==null||o==null){var g=n.random||(n.rng||ca)();i==null&&(i=Xs=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),o==null&&(o=Ii=(g[6]<<8|g[7])&16383)}var y=n.msecs!==void 0?n.msecs:Date.now(),B=n.nsecs!==void 0?n.nsecs:xi+1,b=y-Bi+(B-xi)/1e4;if(b<0&&n.clockseq===void 0&&(o=o+1&16383),(b<0||y>Bi)&&n.nsecs===void 0&&(B=0),B>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Bi=y,xi=B,Ii=o,y+=122192928e5;var O=((y&268435455)*1e4+B)%4294967296;s[r++]=O>>>24&255,s[r++]=O>>>16&255,s[r++]=O>>>8&255,s[r++]=O&255;var L=y/4294967296*1e4&268435455;s[r++]=L>>>8&255,s[r++]=L&255,s[r++]=L>>>24&15|16,s[r++]=L>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var T=0;T<6;++T)s[r+T]=i[T];return t||Un(s)}function ua(n){if(!Cn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function ju(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Yu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Zu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ha(n,t,e){function r(s,i,o,g){if(typeof s=="string"&&(s=ju(s)),typeof i=="string"&&(i=ua(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var y=new Uint8Array(16+s.length);if(y.set(i),y.set(s,i.length),y=e(y),y[6]=y[6]&15|t,y[8]=y[8]&63|128,o){g=g||0;for(var B=0;B<16;++B)o[g+B]=y[B];return o}return Un(y)}try{r.name=n}catch{}return r.DNS=Yu,r.URL=Zu,r}function Xu(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Ju(Qu(th(n),n.length*8))}function Ju(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function la(n){return(n+64>>>9<<4)+14+1}function Qu(n,t){n[t>>5]|=128<<t%32,n[la(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var g=e,y=r,B=s,b=i;e=ve(e,r,s,i,n[o],7,-680876936),i=ve(i,e,r,s,n[o+1],12,-389564586),s=ve(s,i,e,r,n[o+2],17,606105819),r=ve(r,s,i,e,n[o+3],22,-1044525330),e=ve(e,r,s,i,n[o+4],7,-176418897),i=ve(i,e,r,s,n[o+5],12,1200080426),s=ve(s,i,e,r,n[o+6],17,-1473231341),r=ve(r,s,i,e,n[o+7],22,-45705983),e=ve(e,r,s,i,n[o+8],7,1770035416),i=ve(i,e,r,s,n[o+9],12,-1958414417),s=ve(s,i,e,r,n[o+10],17,-42063),r=ve(r,s,i,e,n[o+11],22,-1990404162),e=ve(e,r,s,i,n[o+12],7,1804603682),i=ve(i,e,r,s,n[o+13],12,-40341101),s=ve(s,i,e,r,n[o+14],17,-1502002290),r=ve(r,s,i,e,n[o+15],22,1236535329),e=Se(e,r,s,i,n[o+1],5,-165796510),i=Se(i,e,r,s,n[o+6],9,-1069501632),s=Se(s,i,e,r,n[o+11],14,643717713),r=Se(r,s,i,e,n[o],20,-373897302),e=Se(e,r,s,i,n[o+5],5,-701558691),i=Se(i,e,r,s,n[o+10],9,38016083),s=Se(s,i,e,r,n[o+15],14,-660478335),r=Se(r,s,i,e,n[o+4],20,-405537848),e=Se(e,r,s,i,n[o+9],5,568446438),i=Se(i,e,r,s,n[o+14],9,-1019803690),s=Se(s,i,e,r,n[o+3],14,-187363961),r=Se(r,s,i,e,n[o+8],20,1163531501),e=Se(e,r,s,i,n[o+13],5,-1444681467),i=Se(i,e,r,s,n[o+2],9,-51403784),s=Se(s,i,e,r,n[o+7],14,1735328473),r=Se(r,s,i,e,n[o+12],20,-1926607734),e=Ee(e,r,s,i,n[o+5],4,-378558),i=Ee(i,e,r,s,n[o+8],11,-2022574463),s=Ee(s,i,e,r,n[o+11],16,1839030562),r=Ee(r,s,i,e,n[o+14],23,-35309556),e=Ee(e,r,s,i,n[o+1],4,-1530992060),i=Ee(i,e,r,s,n[o+4],11,1272893353),s=Ee(s,i,e,r,n[o+7],16,-155497632),r=Ee(r,s,i,e,n[o+10],23,-1094730640),e=Ee(e,r,s,i,n[o+13],4,681279174),i=Ee(i,e,r,s,n[o],11,-358537222),s=Ee(s,i,e,r,n[o+3],16,-722521979),r=Ee(r,s,i,e,n[o+6],23,76029189),e=Ee(e,r,s,i,n[o+9],4,-640364487),i=Ee(i,e,r,s,n[o+12],11,-421815835),s=Ee(s,i,e,r,n[o+15],16,530742520),r=Ee(r,s,i,e,n[o+2],23,-995338651),e=Ie(e,r,s,i,n[o],6,-198630844),i=Ie(i,e,r,s,n[o+7],10,1126891415),s=Ie(s,i,e,r,n[o+14],15,-1416354905),r=Ie(r,s,i,e,n[o+5],21,-57434055),e=Ie(e,r,s,i,n[o+12],6,1700485571),i=Ie(i,e,r,s,n[o+3],10,-1894986606),s=Ie(s,i,e,r,n[o+10],15,-1051523),r=Ie(r,s,i,e,n[o+1],21,-2054922799),e=Ie(e,r,s,i,n[o+8],6,1873313359),i=Ie(i,e,r,s,n[o+15],10,-30611744),s=Ie(s,i,e,r,n[o+6],15,-1560198380),r=Ie(r,s,i,e,n[o+13],21,1309151649),e=Ie(e,r,s,i,n[o+4],6,-145523070),i=Ie(i,e,r,s,n[o+11],10,-1120210379),s=Ie(s,i,e,r,n[o+2],15,718787259),r=Ie(r,s,i,e,n[o+9],21,-343485551),e=ur(e,g),r=ur(r,y),s=ur(s,B),i=ur(i,b)}return[e,r,s,i]}function th(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(la(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function ur(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function eh(n,t){return n<<t|n>>>32-t}function On(n,t,e,r,s,i){return ur(eh(ur(ur(t,n),ur(r,i)),s),e)}function ve(n,t,e,r,s,i,o){return On(t&e|~t&r,n,t,s,i,o)}function Se(n,t,e,r,s,i,o){return On(t&r|e&~r,n,t,s,i,o)}function Ee(n,t,e,r,s,i,o){return On(t^e^r,n,t,s,i,o)}function Ie(n,t,e,r,s,i,o){return On(e^(t|~r),n,t,s,i,o)}var rh=ha("v3",48,Xu);function nh(n,t,e){n=n||{};var r=n.random||(n.rng||ca)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Un(r)}function ih(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Ai(n,t){return n<<t|n>>>32-t}function sh(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),g=new Array(o),y=0;y<o;++y){for(var B=new Uint32Array(16),b=0;b<16;++b)B[b]=n[y*64+b*4]<<24|n[y*64+b*4+1]<<16|n[y*64+b*4+2]<<8|n[y*64+b*4+3];g[y]=B}g[o-1][14]=(n.length-1)*8/Math.pow(2,32),g[o-1][14]=Math.floor(g[o-1][14]),g[o-1][15]=(n.length-1)*8&4294967295;for(var O=0;O<o;++O){for(var L=new Uint32Array(80),T=0;T<16;++T)L[T]=g[O][T];for(var F=16;F<80;++F)L[F]=Ai(L[F-3]^L[F-8]^L[F-14]^L[F-16],1);for(var K=e[0],H=e[1],Y=e[2],j=e[3],W=e[4],rt=0;rt<80;++rt){var at=Math.floor(rt/20),it=Ai(K,5)+ih(at,H,Y,j)+W+t[at]+L[rt]>>>0;W=j,j=Y,Y=Ai(H,30)>>>0,H=K,K=it}e[0]=e[0]+K>>>0,e[1]=e[1]+H>>>0,e[2]=e[2]+Y>>>0,e[3]=e[3]+j>>>0,e[4]=e[4]+W>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var oh=ha("v5",80,sh);const ah="00000000-0000-0000-0000-000000000000";function ch(n){if(!Cn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const uh=Object.freeze(Object.defineProperty({__proto__:null,NIL:ah,parse:ua,stringify:Un,v1:Gu,v3:rh,v4:nh,v5:oh,validate:Cn,version:ch},Symbol.toStringTag,{value:"Module"})),fa=Io(uh);var _i,Js;function hh(){if(Js)return _i;Js=1;const n=fa.v4;return _i=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const g={method:e};if(o===2&&(g.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");g.params=r}if(typeof s>"u"){const y=typeof i.generator=="function"?i.generator:function(){return n()};g.id=y(g,i)}else o===2&&s===null?i.notificationIdNull&&(g.id=null):g.id=s;return g},_i}var Ri,Qs;function lh(){if(Qs)return Ri;Qs=1;const n=fa.v4,t=hh(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return Ri=e,e.prototype.request=function(r,s,i,o){const g=this;let y=null;const B=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&B)throw new TypeError("JSON-RPC 1.0 does not support batching");if(B||!B&&r&&typeof r=="object"&&typeof s=="function")o=s,y=r;else{typeof i=="function"&&(o=i,i=void 0);const L=typeof o=="function";try{y=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(T){if(L){o(T);return}throw T}if(!L)return y}let O;try{O=JSON.stringify(y,this.options.replacer)}catch(L){o(L);return}return this.callServer(O,function(L,T){g._parseResponse(L,T,o)}),y},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s){i();return}let o;try{o=JSON.parse(s,this.options.reviver)}catch(g){i(g);return}if(i.length===3)if(Array.isArray(o)){const g=function(B){return typeof B.error<"u"},y=function(B){return!g(B)};i(null,o.filter(g),o.filter(y));return}else{i(null,o.error,o.result);return}i(null,o)},Ri}var fh=lh();const dh=Gi(fh);var ph=class extends Bo{socket;constructor(n,t){super(),this.socket=new window.WebSocket(n,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(n,t,e){const r=e||t;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function gh(n,t){return new ph(n,t)}var yh=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},mh=class extends Bo{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},g,y){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=g||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),y?this.dataPack=y:this.dataPack=new yh,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,r){return!r&&typeof e=="object"&&(r=e,e=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(n,t),g={jsonrpc:"2.0",method:n,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(g),r,y=>{if(y)return i(y);this.queue[o]={promise:[s,i]},e&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket&&this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=wt.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const r=[e.notification];if(e.params.constructor===Object)r.push(e.params);else for(let s=0;s<e.params.length;s++)r.push(e.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",e,r),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",e,r),1))})}};const wh=BigInt(0),Hr=BigInt(1),bh=BigInt(2),kh=BigInt(7),vh=BigInt(256),Sh=BigInt(113),da=[],pa=[],ga=[];for(let n=0,t=Hr,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],da.push(2*(5*r+e)),pa.push((n+1)*(n+2)/2%64);let s=wh;for(let i=0;i<7;i++)t=(t<<Hr^(t>>kh)*Sh)%vh,t&bh&&(s^=Hr<<(Hr<<BigInt(i))-Hr);ga.push(s)}const ya=To(ga,!0),Eh=ya[0],Ih=ya[1],to=(n,t,e)=>e>32?fc(n,t,e):hc(n,t,e),eo=(n,t,e)=>e>32?dc(n,t,e):lc(n,t,e);function Bh(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const g=(o+8)%10,y=(o+2)%10,B=e[y],b=e[y+1],O=to(B,b,1)^e[g],L=eo(B,b,1)^e[g+1];for(let T=0;T<50;T+=10)n[o+T]^=O,n[o+T+1]^=L}let s=n[2],i=n[3];for(let o=0;o<24;o++){const g=pa[o],y=to(s,i,g),B=eo(s,i,g),b=da[o];s=n[b],i=n[b+1],n[b]=y,n[b+1]=B}for(let o=0;o<50;o+=10){for(let g=0;g<10;g++)e[g]=n[o+g];for(let g=0;g<10;g++)n[o+g]^=~e[(g+2)%10]&e[(g+4)%10]}n[0]^=Eh[r],n[1]^=Ih[r]}lr(e)}class cs extends Zi{constructor(t,e,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,Yr(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=tc(this.state)}clone(){return this._cloneInto()}keccak(){xs(this.state32),Bh(this.state32,this.rounds),xs(this.state32),this.posOut=0,this.pos=0}update(t){Nr(this),t=Tn(t),nr(t);const{blockLen:e,state:r}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let g=0;g<o;g++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,(e&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Nr(this,!1),nr(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Yr(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(_o(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,lr(this.state)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new cs(e,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const xh=(n,t,e)=>Xi(()=>new cs(t,n,e)),ro=xh(1,136,256/8);class ma extends Zi{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ao(t);const r=Tn(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),lr(i)}update(t){return Nr(this),this.iHash.update(t),this}digestInto(t){Nr(this),nr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:g}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=g,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const wa=(n,t,e)=>new ma(n,t).update(e).digest();wa.create=(n,t)=>new ma(n,t);const no=(n,t)=>(n+(n>=0?t:-t)/ba)/t;function Ah(n,t,e){const[[r,s],[i,o]]=t,g=no(o*n,e),y=no(-s*n,e);let B=n-g*r-y*i,b=-g*s-y*o;const O=B<rr,L=b<rr;O&&(B=-B),L&&(b=-b);const T=rn(Math.ceil(Oo(e)/2))+Cr;if(B<rr||B>=T||b<rr||b>=T)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:O,k1:B,k2neg:L,k2:b}}function Ki(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function Mi(n,t){const e={};for(let r of Object.keys(t))e[r]=n[r]===void 0?t[r]:n[r];return wr(e.lowS,"lowS"),wr(e.prehash,"prehash"),e.format!==void 0&&Ki(e.format),e}class _h extends Error{constructor(t=""){super(t)}}const Qe={Err:_h,_tlv:{encode:(n,t)=>{const{Err:e}=Qe;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=fn(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?fn(s.length/2|128):"";return fn(n)+i+s+t},decode(n,t){const{Err:e}=Qe;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const y=s&127;if(!y)throw new e("tlv.decode(long): indefinite length not supported");if(y>4)throw new e("tlv.decode(long): byte length is too big");const B=t.subarray(r,r+y);if(B.length!==y)throw new e("tlv.decode: length bytes not complete");if(B[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const b of B)o=o<<8|b;if(r+=y,o<128)throw new e("tlv.decode(long): not minimal encoding")}const g=t.subarray(r,r+o);if(g.length!==o)throw new e("tlv.decode: wrong value length");return{v:g,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=Qe;if(n<rr)throw new t("integer: negative integers are not allowed");let e=fn(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Qe;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Pn(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Qe,s=ae("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:g,l:y}=r.decode(2,i),{v:B,l:b}=r.decode(2,y);if(b.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(g),s:e.decode(B)}},hexFromSig(n){const{_tlv:t,_int:e}=Qe,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},rr=BigInt(0),Cr=BigInt(1),ba=BigInt(2),gn=BigInt(3),Rh=BigInt(4);function Tr(n,t){const{BYTES:e}=n;let r;if(typeof t=="bigint")r=t;else{let s=ae("private key",t);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Mh(n,t={}){const e=Jo("weierstrass",n,t),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o,n:g}=i;nn(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:y}=t;if(y&&(!r.is0(i.a)||typeof y.beta!="bigint"||!Array.isArray(y.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const B=va(r,s);function b(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function O(A,m,a){const{x:f,y:w}=m.toAffine(),E=r.toBytes(f);if(wr(a,"isCompressed"),a){b();const _=!r.isOdd(w);return We(ka(_),E)}else return We(Uint8Array.of(4),E,r.toBytes(w))}function L(A){Oe(A,void 0,"Point");const{publicKey:m,publicKeyUncompressed:a}=B,f=A.length,w=A[0],E=A.subarray(1);if(f===m&&(w===2||w===3)){const _=r.fromBytes(E);if(!r.isValid(_))throw new Error("bad point: is not on curve, wrong x");const P=K(_);let N;try{N=r.sqrt(P)}catch(u){const v=u instanceof Error?": "+u.message:"";throw new Error("bad point: is not on curve, sqrt error"+v)}b();const I=r.isOdd(N);return(w&1)===1!==I&&(N=r.neg(N)),{x:_,y:N}}else if(f===a&&w===4){const _=r.BYTES,P=r.fromBytes(E.subarray(0,_)),N=r.fromBytes(E.subarray(_,_*2));if(!H(P,N))throw new Error("bad point: is not on curve");return{x:P,y:N}}else throw new Error(`bad point: got length ${f}, expected compressed=${m} or uncompressed=${a}`)}const T=t.toBytes||O,F=t.fromBytes||L;function K(A){const m=r.sqr(A),a=r.mul(m,A);return r.add(r.add(a,r.mul(A,i.a)),i.b)}function H(A,m){const a=r.sqr(m),f=K(A);return r.eql(a,f)}if(!H(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const Y=r.mul(r.pow(i.a,gn),Rh),j=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(Y,j)))throw new Error("bad curve params: a or b");function W(A,m,a=!1){if(!r.isValid(m)||a&&r.is0(m))throw new Error(`bad point coordinate ${A}`);return m}function rt(A){if(!(A instanceof U))throw new Error("ProjectivePoint expected")}function at(A){if(!y||!y.basises)throw new Error("no endo");return Ah(A,y.basises,s.ORDER)}const it=vn((A,m)=>{const{X:a,Y:f,Z:w}=A;if(r.eql(w,r.ONE))return{x:a,y:f};const E=A.is0();m==null&&(m=E?r.ONE:r.inv(w));const _=r.mul(a,m),P=r.mul(f,m),N=r.mul(w,m);if(E)return{x:r.ZERO,y:r.ZERO};if(!r.eql(N,r.ONE))throw new Error("invZ was invalid");return{x:_,y:P}}),st=vn(A=>{if(A.is0()){if(t.allowInfinityPoint&&!r.is0(A.Y))return;throw new Error("bad point: ZERO")}const{x:m,y:a}=A.toAffine();if(!r.isValid(m)||!r.isValid(a))throw new Error("bad point: x or y not field elements");if(!H(m,a))throw new Error("bad point: equation left != right");if(!A.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function nt(A,m,a,f,w){return a=new U(r.mul(a.X,A),a.Y,a.Z),m=Sn(f,m),a=Sn(w,a),m.add(a)}class U{constructor(m,a,f){this.X=W("x",m),this.Y=W("y",a,!0),this.Z=W("z",f),Object.freeze(this)}static CURVE(){return i}static fromAffine(m){const{x:a,y:f}=m||{};if(!m||!r.isValid(a)||!r.isValid(f))throw new Error("invalid affine point");if(m instanceof U)throw new Error("projective point not allowed");return r.is0(a)&&r.is0(f)?U.ZERO:new U(a,f,r.ONE)}static fromBytes(m){const a=U.fromAffine(F(Oe(m,void 0,"point")));return a.assertValidity(),a}static fromHex(m){return U.fromBytes(ae("pointHex",m))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,a=!0){return V.createCache(this,m),a||this.multiply(gn),this}assertValidity(){st(this)}hasEvenY(){const{y:m}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(m)}equals(m){rt(m);const{X:a,Y:f,Z:w}=this,{X:E,Y:_,Z:P}=m,N=r.eql(r.mul(a,P),r.mul(E,w)),I=r.eql(r.mul(f,P),r.mul(_,w));return N&&I}negate(){return new U(this.X,r.neg(this.Y),this.Z)}double(){const{a:m,b:a}=i,f=r.mul(a,gn),{X:w,Y:E,Z:_}=this;let P=r.ZERO,N=r.ZERO,I=r.ZERO,c=r.mul(w,w),u=r.mul(E,E),v=r.mul(_,_),M=r.mul(w,E);return M=r.add(M,M),I=r.mul(w,_),I=r.add(I,I),P=r.mul(m,I),N=r.mul(f,v),N=r.add(P,N),P=r.sub(u,N),N=r.add(u,N),N=r.mul(P,N),P=r.mul(M,P),I=r.mul(f,I),v=r.mul(m,v),M=r.sub(c,v),M=r.mul(m,M),M=r.add(M,I),I=r.add(c,c),c=r.add(I,c),c=r.add(c,v),c=r.mul(c,M),N=r.add(N,c),v=r.mul(E,_),v=r.add(v,v),c=r.mul(v,M),P=r.sub(P,c),I=r.mul(v,u),I=r.add(I,I),I=r.add(I,I),new U(P,N,I)}add(m){rt(m);const{X:a,Y:f,Z:w}=this,{X:E,Y:_,Z:P}=m;let N=r.ZERO,I=r.ZERO,c=r.ZERO;const u=i.a,v=r.mul(i.b,gn);let M=r.mul(a,E),$=r.mul(f,_),et=r.mul(w,P),lt=r.add(a,f),pt=r.add(E,_);lt=r.mul(lt,pt),pt=r.add(M,$),lt=r.sub(lt,pt),pt=r.add(a,w);let Pt=r.add(E,P);return pt=r.mul(pt,Pt),Pt=r.add(M,et),pt=r.sub(pt,Pt),Pt=r.add(f,w),N=r.add(_,P),Pt=r.mul(Pt,N),N=r.add($,et),Pt=r.sub(Pt,N),c=r.mul(u,pt),N=r.mul(v,et),c=r.add(N,c),N=r.sub($,c),c=r.add($,c),I=r.mul(N,c),$=r.add(M,M),$=r.add($,M),et=r.mul(u,et),pt=r.mul(v,pt),$=r.add($,et),et=r.sub(M,et),et=r.mul(u,et),pt=r.add(pt,et),M=r.mul($,pt),I=r.add(I,M),M=r.mul(Pt,pt),N=r.mul(lt,N),N=r.sub(N,M),M=r.mul(lt,$),c=r.mul(Pt,c),c=r.add(c,M),new U(N,I,c)}subtract(m){return this.add(m.negate())}is0(){return this.equals(U.ZERO)}multiply(m){const{endo:a}=t;if(!s.isValidNot0(m))throw new Error("invalid scalar: out of range");let f,w;const E=_=>V.cached(this,_,P=>gr(U,P));if(a){const{k1neg:_,k1:P,k2neg:N,k2:I}=at(m),{p:c,f:u}=E(P),{p:v,f:M}=E(I);w=u.add(M),f=nt(a.beta,c,v,_,N)}else{const{p:_,f:P}=E(m);f=_,w=P}return gr(U,[f,w])[0]}multiplyUnsafe(m){const{endo:a}=t,f=this;if(!s.isValid(m))throw new Error("invalid scalar: out of range");if(m===rr||f.is0())return U.ZERO;if(m===Cr)return f;if(V.hasCache(this))return this.multiply(m);if(a){const{k1neg:w,k1:E,k2neg:_,k2:P}=at(m),{p1:N,p2:I}=Fc(U,f,E,P);return nt(a.beta,N,I,w,_)}else return V.unsafe(f,m)}multiplyAndAddUnsafe(m,a,f){const w=this.multiplyUnsafe(a).add(m.multiplyUnsafe(f));return w.is0()?void 0:w}toAffine(m){return it(this,m)}isTorsionFree(){const{isTorsionFree:m}=t;return o===Cr?!0:m?m(U,this):V.unsafe(this,g).is0()}clearCofactor(){const{clearCofactor:m}=t;return o===Cr?this:m?m(U,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(m=!0){return wr(m,"isCompressed"),this.assertValidity(),T(U,this,m)}toHex(m=!0){return mr(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(m=!0){return this.toBytes(m)}_setWindowSize(m){this.precompute(m)}static normalizeZ(m){return gr(U,m)}static msm(m,a){return Xo(U,s,m,a)}static fromPrivateKey(m){return U.BASE.multiply(Tr(s,m))}}U.BASE=new U(i.Gx,i.Gy,r.ONE),U.ZERO=new U(r.ZERO,r.ONE,r.ZERO),U.Fp=r,U.Fn=s;const z=s.BITS,V=new Zo(U,t.endo?Math.ceil(z/2):z);return U.BASE.precompute(8),U}function ka(n){return Uint8Array.of(n?2:3)}function va(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Th(n,t={}){const{Fn:e}=n,r=t.randomBytes||Ji,s=Object.assign(va(n.Fp,e),{seed:Go(e.ORDER)});function i(T){try{return!!Tr(e,T)}catch{return!1}}function o(T,F){const{publicKey:K,publicKeyUncompressed:H}=s;try{const Y=T.length;return F===!0&&Y!==K||F===!1&&Y!==H?!1:!!n.fromBytes(T)}catch{return!1}}function g(T=r(s.seed)){return Nc(Oe(T,s.seed,"seed"),e.ORDER)}function y(T,F=!0){return n.BASE.multiply(Tr(e,T)).toBytes(F)}function B(T){const F=g(T);return{secretKey:F,publicKey:y(F)}}function b(T){if(typeof T=="bigint")return!1;if(T instanceof n)return!0;const{secretKey:F,publicKey:K,publicKeyUncompressed:H}=s;if(e.allowedLengths||F===K)return;const Y=ae("key",T).length;return Y===K||Y===H}function O(T,F,K=!0){if(b(T)===!0)throw new Error("first arg must be private key");if(b(F)===!1)throw new Error("second arg must be public key");const H=Tr(e,T);return n.fromHex(F).multiply(H).toBytes(K)}return Object.freeze({getPublicKey:y,getSharedSecret:O,keygen:B,Point:n,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:g,isValidPrivateKey:i,randomPrivateKey:g,normPrivateKeyToScalar:T=>Tr(e,T),precompute(T=8,F=n.BASE){return F.precompute(T,!1)}},lengths:s})}function Ph(n,t,e={}){Ao(t),nn(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Ji,s=e.hmac||((a,...f)=>wa(t,a,We(...f))),{Fp:i,Fn:o}=n,{ORDER:g,BITS:y}=o,{keygen:B,getPublicKey:b,getSharedSecret:O,utils:L,lengths:T}=Th(n,e),F={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},K="compact";function H(a){const f=g>>Cr;return a>f}function Y(a,f){if(!o.isValidNot0(f))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return f}function j(a,f){Ki(f);const w=T.signature,E=f==="compact"?w:f==="recovered"?w+1:void 0;return Oe(a,E,`${f} signature`)}class W{constructor(f,w,E){this.r=Y("r",f),this.s=Y("s",w),E!=null&&(this.recovery=E),Object.freeze(this)}static fromBytes(f,w=K){j(f,w);let E;if(w==="der"){const{r:I,s:c}=Qe.toSig(Oe(f));return new W(I,c)}w==="recovered"&&(E=f[0],w="compact",f=f.subarray(1));const _=o.BYTES,P=f.subarray(0,_),N=f.subarray(_,_*2);return new W(o.fromBytes(P),o.fromBytes(N),E)}static fromHex(f,w){return this.fromBytes(kn(f),w)}addRecoveryBit(f){return new W(this.r,this.s,f)}recoverPublicKey(f){const w=i.ORDER,{r:E,s:_,recovery:P}=this;if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");if(g*ba<w&&P>1)throw new Error("recovery id is ambiguous for h>1 curve");const I=P===2||P===3?E+g:E;if(!i.isValid(I))throw new Error("recovery id 2 or 3 invalid");const c=i.toBytes(I),u=n.fromBytes(We(ka((P&1)===0),c)),v=o.inv(I),M=at(ae("msgHash",f)),$=o.create(-M*v),et=o.create(_*v),lt=n.BASE.multiplyUnsafe($).add(u.multiplyUnsafe(et));if(lt.is0())throw new Error("point at infinify");return lt.assertValidity(),lt}hasHighS(){return H(this.s)}toBytes(f=K){if(Ki(f),f==="der")return kn(Qe.hexFromSig(this));const w=o.toBytes(this.r),E=o.toBytes(this.s);if(f==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return We(Uint8Array.of(this.recovery),w,E)}return We(w,E)}toHex(f){return mr(this.toBytes(f))}assertValidity(){}static fromCompact(f){return W.fromBytes(ae("sig",f),"compact")}static fromDER(f){return W.fromBytes(ae("sig",f),"der")}normalizeS(){return this.hasHighS()?new W(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return mr(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return mr(this.toBytes("compact"))}}const rt=e.bits2int||function(f){if(f.length>8192)throw new Error("input is too large");const w=Pn(f),E=f.length*8-y;return E>0?w>>BigInt(E):w},at=e.bits2int_modN||function(f){return o.create(rt(f))},it=rn(y);function st(a){return zi("num < 2^"+y,a,rr,it),o.toBytes(a)}function nt(a,f){return Oe(a,void 0,"message"),f?Oe(t(a),void 0,"prehashed message"):a}function U(a,f,w){if(["recovered","canonical"].some($=>$ in w))throw new Error("sign() legacy options not supported");const{lowS:E,prehash:_,extraEntropy:P}=Mi(w,F);a=nt(a,_);const N=at(a),I=Tr(o,f),c=[st(I),st(N)];if(P!=null&&P!==!1){const $=P===!0?r(T.secretKey):P;c.push(ae("extraEntropy",$))}const u=We(...c),v=N;function M($){const et=rt($);if(!o.isValidNot0(et))return;const lt=o.inv(et),pt=n.BASE.multiply(et).toAffine(),Pt=o.create(pt.x);if(Pt===rr)return;const Rt=o.create(lt*o.create(v+Pt*I));if(Rt===rr)return;let Ot=(pt.x===Pt?0:2)|Number(pt.y&Cr),Ke=Rt;return E&&H(Rt)&&(Ke=o.neg(Rt),Ot^=1),new W(Pt,Ke,Ot)}return{seed:u,k2sig:M}}function z(a,f,w={}){a=ae("message",a);const{seed:E,k2sig:_}=U(a,f,w);return Ac(t.outputLen,o.BYTES,s)(E,_)}function V(a){let f;const w=typeof a=="string"||en(a),E=!w&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!w&&!E)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(E)f=new W(a.r,a.s);else if(w){try{f=W.fromBytes(ae("sig",a),"der")}catch(_){if(!(_ instanceof Qe.Err))throw _}if(!f)try{f=W.fromBytes(ae("sig",a),"compact")}catch{return!1}}return f||!1}function A(a,f,w,E={}){const{lowS:_,prehash:P,format:N}=Mi(E,F);if(w=ae("publicKey",w),f=nt(ae("message",f),P),"strict"in E)throw new Error("options.strict was renamed to lowS");const I=N===void 0?V(a):W.fromBytes(ae("sig",a),N);if(I===!1)return!1;try{const c=n.fromBytes(w);if(_&&I.hasHighS())return!1;const{r:u,s:v}=I,M=at(f),$=o.inv(v),et=o.create(M*$),lt=o.create(u*$),pt=n.BASE.multiplyUnsafe(et).add(c.multiplyUnsafe(lt));return pt.is0()?!1:o.create(pt.x)===u}catch{return!1}}function m(a,f,w={}){const{prehash:E}=Mi(w,F);return f=nt(f,E),W.fromBytes(a,"recovered").recoverPublicKey(f).toBytes()}return Object.freeze({keygen:B,getPublicKey:b,getSharedSecret:O,utils:L,lengths:T,Point:n,sign:z,verify:A,recoverPublicKey:m,Signature:W,hash:t})}function Lh(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=vr(t.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function Ch(n){const{CURVE:t,curveOpts:e}=Lh(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:r}}function Uh(n,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,Vo(e.Fn.ORDER,e.Fn.BITS))})}function Oh(n){const{CURVE:t,curveOpts:e,hash:r,ecdsaOpts:s}=Ch(n),i=Mh(t,e),o=Ph(i,r,s);return Uh(n,o)}function Nh(n,t){const e=r=>Oh({...n,hash:r});return{...e(t),create:e}}const us={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},zh={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},io=BigInt(2);function Kh(n){const t=us.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),g=BigInt(44),y=BigInt(88),B=n*n*n%t,b=B*B*n%t,O=oe(b,e,t)*b%t,L=oe(O,e,t)*b%t,T=oe(L,io,t)*B%t,F=oe(T,s,t)*T%t,K=oe(F,i,t)*F%t,H=oe(K,g,t)*K%t,Y=oe(H,y,t)*H%t,j=oe(Y,g,t)*K%t,W=oe(j,e,t)*b%t,rt=oe(W,o,t)*F%t,at=oe(rt,r,t)*B%t,it=oe(at,io,t);if(!Fi.eql(Fi.sqr(it),n))throw new Error("Cannot find square root");return it}const Fi=vr(us.p,{sqrt:Kh}),hs=Nh({...us,Fp:Fi,lowS:!0,endo:zh},Lo),Fh=Dr.utils.randomPrivateKey,so=()=>{const n=Dr.utils.randomPrivateKey(),t=_n(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},_n=Dr.getPublicKey;function oo(n){try{return Dr.ExtendedPoint.fromHex(n),!0}catch{return!1}}const ls=(n,t)=>Dr.sign(n,t.slice(0,32)),qh=Dr.verify,At=n=>wt.isBuffer(n)?n:n instanceof Uint8Array?wt.from(n.buffer,n.byteOffset,n.byteLength):wt.from(n);class fs{constructor(t){Object.assign(this,t)}encode(){return wt.from(Si.serialize(jr,this))}static decode(t){return Si.deserialize(jr,this,t)}static decodeUnchecked(t){return Si.deserializeUnchecked(jr,this,t)}}class Dh extends fs{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const jr=new Map;var Sa;const Ea=32,Ge=32;function Wh(n){return n._bn!==void 0}let ao=1;class ut extends fs{constructor(t){if(super({}),this._bn=void 0,Wh(t))this._bn=t._bn;else{if(typeof t=="string"){const e=me.decode(t);if(e.length!=Ge)throw new Error("Invalid public key input");this._bn=new qs(e)}else this._bn=new qs(t);if(this._bn.byteLength()>Ge)throw new Error("Invalid public key input")}}static unique(){const t=new ut(ao);return ao+=1,new ut(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return me.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(wt);if(t.length===Ge)return t;const e=wt.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=wt.concat([t.toBuffer(),wt.from(e),r.toBuffer()]),i=Vs(s);return new ut(i)}static createProgramAddressSync(t,e){let r=wt.alloc(0);t.forEach(function(i){if(i.length>Ea)throw new TypeError("Max seed length exceeded");r=wt.concat([r,At(i)])}),r=wt.concat([r,e.toBuffer(),wt.from("ProgramDerivedAddress")]);const s=Vs(r);if(oo(s))throw new Error("Invalid seeds, address must fall off the curve");return new ut(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(wt.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ut(t);return oo(e.toBytes())}}Sa=ut;ut.default=new Sa("11111111111111111111111111111111");jr.set(ut,{kind:"struct",fields:[["_bn","u256"]]});class $h{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=At(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=At(Fh()),this._publicKey=At(_n(this._secretKey))}get publicKey(){return new ut(this._publicKey)}get secretKey(){return wt.concat([this._secretKey,this._publicKey],64)}}const Vh=new ut("BPFLoader1111111111111111111111111111111111"),hr=1232,Nn=127,Xr=64;class ds extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ds.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class ps extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ps.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Pr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Pr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Jr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const Mt=(n="publicKey")=>C.blob(32,n),Hh=(n="signature")=>C.blob(64,n),yr=(n="string")=>{const t=C.struct([C.u32("length"),C.u32("lengthPadding"),C.blob(C.offset(C.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,g)=>{const y={chars:wt.from(i,"utf8")};return r(y,o,g)},s.alloc=i=>C.u32().span+C.u32().span+wt.from(i,"utf8").length,s},Gh=(n="authorized")=>C.struct([Mt("staker"),Mt("withdrawer")],n),jh=(n="lockup")=>C.struct([C.ns64("unixTimestamp"),C.ns64("epoch"),Mt("custodian")],n),Yh=(n="voteInit")=>C.struct([Mt("nodePubkey"),Mt("authorizedVoter"),Mt("authorizedWithdrawer"),C.u8("commission")],n),Zh=(n="voteAuthorizeWithSeedArgs")=>C.struct([C.u32("voteAuthorizationType"),Mt("currentAuthorityDerivedKeyOwnerPubkey"),yr("currentAuthorityDerivedKeySeed"),Mt("newAuthorized")],n);function Ia(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Ia({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function _e(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Pe(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function Lt(n,t){if(!n)throw new Error(t||"Assertion failed")}class zn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const g=o.toBase58();let y=r.get(g);return y===void 0&&(y={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(g,y)),y},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const g of o.keys){const y=s(g.pubkey);y.isSigner||=g.isSigner,y.isWritable||=g.isWritable}}return new zn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Lt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,y])=>y.isSigner&&y.isWritable),r=t.filter(([,y])=>y.isSigner&&!y.isWritable),s=t.filter(([,y])=>!y.isSigner&&y.isWritable),i=t.filter(([,y])=>!y.isSigner&&!y.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Lt(e.length>0,"Expected at least one writable signer key");const[y]=e[0];Lt(y===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const g=[...e.map(([y])=>new ut(y)),...r.map(([y])=>new ut(y)),...s.map(([y])=>new ut(y)),...i.map(([y])=>new ut(y))];return[o,g]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const g=new ut(i),y=t.findIndex(B=>B.equals(g));y>=0&&(Lt(y<256,"Max lookup table index exceeded"),r.push(y),s.push(g),this.keyMetaMap.delete(i))}return[r,s]}}const Ba="Reached end of buffer unexpectedly";function $e(n){if(n.length===0)throw new Error(Ba);return n.shift()}function Re(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(Ba);return n.splice(...t)}class ze{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ut(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:me.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Jr(this.staticAccountKeys)}static compile(t){const e=zn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new Jr(s).compileInstructions(t.instructions).map(g=>({programIdIndex:g.programIdIndex,accounts:g.accountKeyIndexes,data:me.encode(g.data)}));return new ze({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Pe(e,t);const r=this.instructions.map(O=>{const{accounts:L,programIdIndex:T}=O,F=Array.from(me.decode(O.data));let K=[];Pe(K,L.length);let H=[];return Pe(H,F.length),{programIdIndex:T,keyIndicesCount:wt.from(K),keyIndices:L,dataLength:wt.from(H),data:F}});let s=[];Pe(s,r.length);let i=wt.alloc(hr);wt.from(s).copy(i);let o=s.length;r.forEach(O=>{const T=C.struct([C.u8("programIdIndex"),C.blob(O.keyIndicesCount.length,"keyIndicesCount"),C.seq(C.u8("keyIndex"),O.keyIndices.length,"keyIndices"),C.blob(O.dataLength.length,"dataLength"),C.seq(C.u8("userdatum"),O.data.length,"data")]).encode(O,i,o);o+=T}),i=i.slice(0,o);const g=C.struct([C.blob(1,"numRequiredSignatures"),C.blob(1,"numReadonlySignedAccounts"),C.blob(1,"numReadonlyUnsignedAccounts"),C.blob(e.length,"keyCount"),C.seq(Mt("key"),t,"keys"),Mt("recentBlockhash")]),y={numRequiredSignatures:wt.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:wt.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:wt.from([this.header.numReadonlyUnsignedAccounts]),keyCount:wt.from(e),keys:this.accountKeys.map(O=>At(O.toBytes())),recentBlockhash:me.decode(this.recentBlockhash)};let B=wt.alloc(2048);const b=g.encode(y,B);return i.copy(B,b),B.slice(0,b+i.length)}static from(t){let e=[...t];const r=$e(e);if(r!==(r&Nn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=$e(e),i=$e(e),o=_e(e);let g=[];for(let L=0;L<o;L++){const T=Re(e,0,Ge);g.push(new ut(wt.from(T)))}const y=Re(e,0,Ge),B=_e(e);let b=[];for(let L=0;L<B;L++){const T=$e(e),F=_e(e),K=Re(e,0,F),H=_e(e),Y=Re(e,0,H),j=me.encode(wt.from(Y));b.push({programIdIndex:T,accounts:K,data:j})}const O={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:me.encode(wt.from(y)),accountKeys:g,instructions:b};return new ze(O)}}class br{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Jr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,g)=>o+g.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=zn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const b of i){const O=e.extractTableLookup(b);if(O!==void 0){const[L,{writable:T,readonly:F}]=O;r.push(L),s.writable.push(...T),s.readonly.push(...F)}}const[o,g]=e.getMessageComponents(),B=new Jr(g,s).compileInstructions(t.instructions);return new br({header:o,staticAccountKeys:g,recentBlockhash:t.recentBlockhash,compiledInstructions:B,addressTableLookups:r})}serialize(){const t=Array();Pe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Pe(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Pe(i,this.addressTableLookups.length);const o=C.struct([C.u8("prefix"),C.struct([C.u8("numRequiredSignatures"),C.u8("numReadonlySignedAccounts"),C.u8("numReadonlyUnsignedAccounts")],"header"),C.blob(t.length,"staticAccountKeysLength"),C.seq(Mt(),this.staticAccountKeys.length,"staticAccountKeys"),Mt("recentBlockhash"),C.blob(r.length,"instructionsLength"),C.blob(e.length,"serializedInstructions"),C.blob(i.length,"addressTableLookupsLength"),C.blob(s.length,"serializedAddressTableLookups")]),g=new Uint8Array(hr),B=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(b=>b.toBytes()),recentBlockhash:me.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},g);return g.slice(0,B)}serializeInstructions(){let t=0;const e=new Uint8Array(hr);for(const r of this.compiledInstructions){const s=Array();Pe(s,r.accountKeyIndexes.length);const i=Array();Pe(i,r.data.length);const o=C.struct([C.u8("programIdIndex"),C.blob(s.length,"encodedAccountKeyIndexesLength"),C.seq(C.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),C.blob(i.length,"encodedDataLength"),C.blob(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(hr);for(const r of this.addressTableLookups){const s=Array();Pe(s,r.writableIndexes.length);const i=Array();Pe(i,r.readonlyIndexes.length);const o=C.struct([Mt("accountKey"),C.blob(s.length,"encodedWritableIndexesLength"),C.seq(C.u8(),r.writableIndexes.length,"writableIndexes"),C.blob(i.length,"encodedReadonlyIndexesLength"),C.seq(C.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=$e(e),s=r&Nn;Lt(r!==s,"Expected versioned message but received legacy message");const i=s;Lt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:$e(e),numReadonlySignedAccounts:$e(e),numReadonlyUnsignedAccounts:$e(e)},g=[],y=_e(e);for(let F=0;F<y;F++)g.push(new ut(Re(e,0,Ge)));const B=me.encode(Re(e,0,Ge)),b=_e(e),O=[];for(let F=0;F<b;F++){const K=$e(e),H=_e(e),Y=Re(e,0,H),j=_e(e),W=new Uint8Array(Re(e,0,j));O.push({programIdIndex:K,accountKeyIndexes:Y,data:W})}const L=_e(e),T=[];for(let F=0;F<L;F++){const K=new ut(Re(e,0,Ge)),H=_e(e),Y=Re(e,0,H),j=_e(e),W=Re(e,0,j);T.push({accountKey:K,writableIndexes:Y,readonlyIndexes:W})}return new br({header:o,staticAccountKeys:g,recentBlockhash:B,compiledInstructions:O,addressTableLookups:T})}}const gs={deserializeMessageVersion(n){const t=n[0],e=t&Nn;return e===t?"legacy":e},deserialize:n=>{const t=gs.deserializeMessageVersion(n);if(t==="legacy")return ze.from(n);if(t===0)return br.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Je=(function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n})({});const Xh=wt.alloc(Xr).fill(0);class Wt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=wt.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ct{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Wt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let K=0;K<e.length;K++)if(e[K].programId===void 0)throw new Error(`Transaction instruction index ${K} has undefined program id`);const s=[],i=[];e.forEach(K=>{K.keys.forEach(Y=>{i.push({...Y})});const H=K.programId.toString();s.includes(H)||s.push(H)}),s.forEach(K=>{i.push({pubkey:new ut(K),isSigner:!1,isWritable:!1})});const o=[];i.forEach(K=>{const H=K.pubkey.toString(),Y=o.findIndex(j=>j.pubkey.toString()===H);Y>-1?(o[Y].isWritable=o[Y].isWritable||K.isWritable,o[Y].isSigner=o[Y].isSigner||K.isSigner):o.push(K)}),o.sort(function(K,H){if(K.isSigner!==H.isSigner)return K.isSigner?-1:1;if(K.isWritable!==H.isWritable)return K.isWritable?-1:1;const Y={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return K.pubkey.toBase58().localeCompare(H.pubkey.toBase58(),"en",Y)});const g=o.findIndex(K=>K.pubkey.equals(r));if(g>-1){const[K]=o.splice(g,1);K.isSigner=!0,K.isWritable=!0,o.unshift(K)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const K of this.signatures){const H=o.findIndex(Y=>Y.pubkey.equals(K.publicKey));if(H>-1)o[H].isSigner||(o[H].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${K.publicKey.toString()}`)}let y=0,B=0,b=0;const O=[],L=[];o.forEach(({pubkey:K,isSigner:H,isWritable:Y})=>{H?(O.push(K.toString()),y+=1,Y||(B+=1)):(L.push(K.toString()),Y||(b+=1))});const T=O.concat(L),F=e.map(K=>{const{data:H,programId:Y}=K;return{programIdIndex:T.indexOf(Y.toString()),accounts:K.keys.map(j=>T.indexOf(j.pubkey.toString())),data:me.encode(H)}});return F.forEach(K=>{Lt(K.programIdIndex>=0),K.accounts.forEach(H=>Lt(H>=0))}),new ze({header:{numRequiredSignatures:y,numReadonlySignedAccounts:B,numReadonlyUnsignedAccounts:b},accountKeys:T,recentBlockhash:t,instructions:F})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=ls(r,s.secretKey);this._addSignature(s.publicKey,At(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Lt(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=wt.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||=[]).push(i):qh(s,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(g=>g.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(g=>g.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Pe(r,e.length);const s=r.length+e.length*64+t.length,i=wt.alloc(s);return Lt(e.length<256),wt.from(r).copy(i,0),e.forEach(({signature:o},g)=>{o!==null&&(Lt(o.length===64,"signature has invalid length"),wt.from(o).copy(i,r.length+g*64))}),t.copy(i,r.length+e.length*64),Lt(i.length<=hr,`Transaction too large: ${i.length} > ${hr}`),i}get keys(){return Lt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Lt(this.instructions.length===1),this.instructions[0].programId}get data(){return Lt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=_e(e);let s=[];for(let i=0;i<r;i++){const o=Re(e,0,Xr);s.push(me.encode(wt.from(o)))}return Ct.populate(ze.from(e),s)}static populate(t,e=[]){const r=new Ct;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==me.encode(Xh)?null:me.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const g=t.accountKeys[o];return{pubkey:g,isSigner:r.signatures.some(y=>y.publicKey.toString()===g.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new Wt({keys:i,programId:t.accountKeys[s.programIdIndex],data:me.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class ys{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:y}=r,B=o-g;Lt(B>0,"Message header is invalid");const b=t.staticAccountKeys.length-o-y;Lt(b>=0,"Message header is invalid");const O=t.getAccountKeys(e),L=O.get(0);if(L===void 0)throw new Error("Failed to decompile message because no account keys were found");const T=[];for(const F of s){const K=[];for(const Y of F.accountKeyIndexes){const j=O.get(Y);if(j===void 0)throw new Error(`Failed to find key for account key index ${Y}`);const W=Y<o;let rt;W?rt=Y<B:Y<O.staticAccountKeys.length?rt=Y-o<b:rt=Y-O.staticAccountKeys.length<O.accountKeysFromLookups.writable.length,K.push({pubkey:j,isSigner:Y<r.numRequiredSignatures,isWritable:rt})}const H=O.get(F.programIdIndex);if(H===void 0)throw new Error(`Failed to find program id for program id index ${F.programIdIndex}`);T.push(new Wt({programId:H,data:At(F.data),keys:K}))}return new ys({payerKey:L,instructions:T,recentBlockhash:i})}compileToLegacyMessage(){return ze.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return br.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class ms{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Lt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array(Xr));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Pe(e,this.signatures.length);const r=C.struct([C.blob(e.length,"encodedSignaturesLength"),C.seq(Hh(),this.signatures.length,"signatures"),C.blob(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=_e(e);for(let o=0;o<s;o++)r.push(new Uint8Array(Re(e,0,Xr)));const i=gs.deserialize(new Uint8Array(e));return new ms(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(o=>o.equals(s.publicKey));Lt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=ls(e,s.secretKey)}}addSignature(t,e){Lt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Lt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const Jh=160,Qh=64,tl=Jh/Qh,xa=1e3/tl,qe=new ut("SysvarC1ock11111111111111111111111111111111"),el=new ut("SysvarEpochSchedu1e111111111111111111111111"),rl=new ut("Sysvar1nstructions1111111111111111111111111"),wn=new ut("SysvarRecentB1ockHashes11111111111111111111"),Fr=new ut("SysvarRent111111111111111111111111111111111"),nl=new ut("SysvarRewards111111111111111111111111111111"),il=new ut("SysvarS1otHashes111111111111111111111111111"),sl=new ut("SysvarS1otHistory11111111111111111111111111"),bn=new ut("SysvarStakeHistory1111111111111111111111111");class Qr extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let g;switch(t){case"send":g=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":g=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:g=`Unknown action '${(y=>y)(t)}'`}super(g),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const ol={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class gt extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function qi(n,t,e,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(t,e,s);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:g}=t.nonceInfo,y=g.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:y,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(i,r&&r.commitment)).value;if(o.err)throw i!=null?new Qr({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function fr(n){return new Promise(t=>setTimeout(t,n))}function Tt(n,t){const e=n.layout.span>=0?n.layout.span:Ia(n,t),r=wt.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}function Ut(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const Aa=C.nu64("lamportsPerSignature"),_a=C.struct([C.u32("version"),C.u32("state"),Mt("authorizedPubkey"),Mt("nonce"),C.struct([Aa],"feeCalculator")]),Di=_a.span;class Kn{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=_a.decode(At(t),0);return new Kn({authorizedPubkey:new ut(e.authorizedPubkey),nonce:new ut(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function qr(n){const t=C.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=Nu();return s.decode=(o,g)=>{const y=e(o,g);return i.decode(y)},s.encode=(o,g,y)=>{const B=i.encode(o);return r(B,g,y)},s}class al{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=C.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Gt))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:s}=Ut(Gt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new ut(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Ut(Gt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:s}=Ut(Gt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new ut(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Ut(Gt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:s,programId:i}=Ut(Gt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ut(e),seed:r,space:s,programId:new ut(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Ut(Gt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new ut(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:s}=Ut(Gt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new ut(e),seed:r,programId:new ut(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:s,space:i,programId:o}=Ut(Gt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new ut(e),seed:r,lamports:s,space:i,programId:new ut(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Ut(Gt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new ut(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Ut(Gt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Ut(Gt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Ut(Gt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new ut(e)}}static checkProgramId(t){if(!t.equals(ge.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Gt=Object.freeze({Create:{index:0,layout:C.struct([C.u32("instruction"),C.ns64("lamports"),C.ns64("space"),Mt("programId")])},Assign:{index:1,layout:C.struct([C.u32("instruction"),Mt("programId")])},Transfer:{index:2,layout:C.struct([C.u32("instruction"),qr("lamports")])},CreateWithSeed:{index:3,layout:C.struct([C.u32("instruction"),Mt("base"),yr("seed"),C.ns64("lamports"),C.ns64("space"),Mt("programId")])},AdvanceNonceAccount:{index:4,layout:C.struct([C.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:C.struct([C.u32("instruction"),Mt("authorized")])},AuthorizeNonceAccount:{index:7,layout:C.struct([C.u32("instruction"),Mt("authorized")])},Allocate:{index:8,layout:C.struct([C.u32("instruction"),C.ns64("space")])},AllocateWithSeed:{index:9,layout:C.struct([C.u32("instruction"),Mt("base"),yr("seed"),C.ns64("space"),Mt("programId")])},AssignWithSeed:{index:10,layout:C.struct([C.u32("instruction"),Mt("base"),yr("seed"),Mt("programId")])},TransferWithSeed:{index:11,layout:C.struct([C.u32("instruction"),qr("lamports"),yr("seed"),Mt("programId")])},UpgradeNonceAccount:{index:12,layout:C.struct([C.u32("instruction")])}});class ge{constructor(){}static createAccount(t){const e=Gt.Create,r=Tt(e,{lamports:t.lamports,space:t.space,programId:At(t.programId.toBuffer())});return new Wt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=Gt.TransferWithSeed;e=Tt(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:At(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Gt.Transfer;e=Tt(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Wt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=Gt.AssignWithSeed;e=Tt(s,{base:At(t.basePubkey.toBuffer()),seed:t.seed,programId:At(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Gt.Assign;e=Tt(s,{programId:At(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Wt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Gt.CreateWithSeed,r=Tt(e,{base:At(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:At(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Wt({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new Ct;"basePubkey"in t&&"seed"in t?e.add(ge.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Di,programId:this.programId})):e.add(ge.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Di,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Gt.InitializeNonceAccount,r=Tt(e,{authorized:At(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:wn,isSigner:!1,isWritable:!1},{pubkey:Fr,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Wt(s)}static nonceAdvance(t){const e=Gt.AdvanceNonceAccount,r=Tt(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:wn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Wt(s)}static nonceWithdraw(t){const e=Gt.WithdrawNonceAccount,r=Tt(e,{lamports:t.lamports});return new Wt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:wn,isSigner:!1,isWritable:!1},{pubkey:Fr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Gt.AuthorizeNonceAccount,r=Tt(e,{authorized:At(t.newAuthorizedPubkey.toBuffer())});return new Wt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=Gt.AllocateWithSeed;e=Tt(s,{base:At(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:At(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Gt.Allocate;e=Tt(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Wt({keys:r,programId:this.programId,data:e})}}ge.programId=new ut("11111111111111111111111111111111");const cl=hr-300;class kr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/kr.chunkSize)+1+1)}static async load(t,e,r,s,i){{const O=await t.getMinimumBalanceForRentExemption(i.length),L=await t.getAccountInfo(r.publicKey,"confirmed");let T=null;if(L!==null){if(L.executable)return console.error("Program load failed, account is already executable"),!1;L.data.length!==i.length&&(T=T||new Ct,T.add(ge.allocate({accountPubkey:r.publicKey,space:i.length}))),L.owner.equals(s)||(T=T||new Ct,T.add(ge.assign({accountPubkey:r.publicKey,programId:s}))),L.lamports<O&&(T=T||new Ct,T.add(ge.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:O-L.lamports})))}else T=new Ct().add(ge.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:O>0?O:1,space:i.length,programId:s}));T!==null&&await qi(t,T,[e,r],{commitment:"confirmed"})}const o=C.struct([C.u32("instruction"),C.u32("offset"),C.u32("bytesLength"),C.u32("bytesLengthPadding"),C.seq(C.u8("byte"),C.offset(C.u32(),-8),"bytes")]),g=kr.chunkSize;let y=0,B=i,b=[];for(;B.length>0;){const O=B.slice(0,g),L=wt.alloc(g+16);o.encode({instruction:0,offset:y,bytes:O,bytesLength:0,bytesLengthPadding:0},L);const T=new Ct().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:L});b.push(qi(t,T,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await fr(1e3/4),y+=g,B=B.slice(g)}await Promise.all(b);{const O=C.struct([C.u32("instruction")]),L=wt.alloc(O.span);O.encode({instruction:1},L);const T=new Ct().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:Fr,isSigner:!1,isWritable:!1}],programId:s,data:L}),F="processed",K=await t.sendTransaction(T,[e,r],{preflightCommitment:F}),{context:H,value:Y}=await t.confirmTransaction({signature:K,lastValidBlockHeight:T.lastValidBlockHeight,blockhash:T.recentBlockhash},F);if(Y.err)throw new Error(`Transaction ${K} failed (${JSON.stringify(Y)})`);for(;;){try{if(await t.getSlot({commitment:F})>H.slot)break}catch{}await new Promise(j=>setTimeout(j,Math.round(xa/2)))}}return!0}}kr.chunkSize=cl;const ul=new ut("BPFLoader2111111111111111111111111111111111");class hl{static getMinNumSignatures(t){return kr.getMinNumSignatures(t)}static load(t,e,r,s,i){return kr.load(t,e,r,i,s)}}function ll(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ti,co;function fl(){if(co)return Ti;co=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,o,g,y,B,b,O;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(O=n.call(r),O==="[object Array]"){for(g="[",o=r.length-1,i=0;i<o;i++)g+=e(r[i],!0)+",";return o>-1&&(g+=e(r[i],!0)),g+"]"}else if(O==="[object Object]"){for(y=t(r).sort(),o=y.length,g="",i=0;i<o;)B=y[i],b=e(r[B],!1),b!==void 0&&(g&&(g+=","),g+=JSON.stringify(B)+":"+b),i++;return"{"+g+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Ti=function(r){var s=e(r,!1);if(s!==void 0)return""+s},Ti}var dl=fl(),uo=ll(dl);const Gr=32;function Pi(n){let t=0;for(;n>1;)n/=2,t++;return t}function pl(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Ra{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Pi(pl(t+Gr+1))-Pi(Gr)-1,r=this.getSlotsInEpoch(e),s=t-(r-Gr);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Gr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Pi(Gr)):this.slotsPerEpoch}}var gl=globalThis.fetch;class yl extends mh{constructor(t,e,r){const s=i=>{const o=gh(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function ml(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const ho=56;class Wi{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=ml(wl,t),r=t.length-ho;Lt(r>=0,"lookup table is invalid"),Lt(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=C.struct([C.seq(Mt(),s,"addresses")]).decode(t.slice(ho));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ut(e.authority[0]):void 0,addresses:i.map(o=>new ut(o))}}}const wl={index:1,layout:C.struct([C.u32("typeIndex"),qr("deactivationSlot"),C.nu64("lastExtendedSlot"),C.u8("lastExtendedStartIndex"),C.u8(),C.seq(Mt(),C.offset(C.u8(),-1),"authority")])},bl=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function kl(n){const t=n.match(bl);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",g=s==null?null:parseInt(s.slice(1),10),y=g==null?"":`:${g+1}`;return`${o}//${r}${y}${i}`}const ne=an(os(ut),ct(),n=>new ut(n)),Ma=as([ct(),re("base64")]),ws=an(os(wt),Ma,n=>wt.from(n[0],"base64")),Ta=30*1e3;function vl(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Ht(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function lo(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Pa(n){return xe([ot({jsonrpc:re("2.0"),id:ct(),result:n}),ot({jsonrpc:re("2.0"),id:ct(),error:ot({code:Wr(),message:ct(),data:yt(Wu())})})])}const Sl=Pa(Wr());function xt(n){return an(Pa(n),Sl,t=>"error"in t?t:{...t,result:ht(t.result,n)})}function ce(n){return xt(ot({context:ot({slot:X()}),value:n}))}function Fn(n){return ot({context:ot({slot:X()}),value:n})}function Li(n,t){return n===0?new br({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ut(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:me.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new ze(t)}const El=ot({foundation:X(),foundationTerm:X(),initial:X(),taper:X(),terminal:X()}),Il=xt(ft(dt(ot({epoch:X(),effectiveSlot:X(),amount:X(),postBalance:X(),commission:yt(dt(X()))})))),Bl=ft(ot({slot:X(),prioritizationFee:X()})),xl=ot({total:X(),validator:X(),foundation:X(),epoch:X()}),Al=ot({epoch:X(),slotIndex:X(),slotsInEpoch:X(),absoluteSlot:X(),blockHeight:yt(X()),transactionCount:yt(X())}),_l=ot({slotsPerEpoch:X(),leaderScheduleSlotOffset:X(),warmup:je(),firstNormalEpoch:X(),firstNormalSlot:X()}),Rl=aa(ct(),ft(X())),Er=dt(xe([ot({}),ct()])),Ml=ot({err:Er}),Tl=re("receivedSignature"),Pl=ot({"solana-core":ct(),"feature-set":yt(X())}),Ll=ot({program:ct(),programId:ne,parsed:Wr()}),Cl=ot({programId:ne,accounts:ft(ne),data:ct()}),fo=ce(ot({err:dt(xe([ot({}),ct()])),logs:dt(ft(ct())),accounts:yt(dt(ft(dt(ot({executable:je(),owner:ct(),lamports:X(),data:ft(ct()),rentEpoch:yt(X())}))))),unitsConsumed:yt(X()),returnData:yt(dt(ot({programId:ct(),data:as([ct(),re("base64")])}))),innerInstructions:yt(dt(ft(ot({index:X(),instructions:ft(xe([Ll,Cl]))}))))})),Ul=ce(ot({byIdentity:aa(ct(),ft(X())),range:ot({firstSlot:X(),lastSlot:X()})}));function Ol(n,t,e,r,s,i){const o=e||gl;let g;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let y;return r&&(y=async(b,O)=>{const L=await new Promise((T,F)=>{try{r(b,O,(K,H)=>T([K,H]))}catch(K){F(K)}});return await o(...L)}),new dh(async(b,O)=>{const L={method:"POST",body:b,agent:g,headers:Object.assign({"Content-Type":"application/json"},t||{},Nf)};try{let T=5,F,K=500;for(;y?F=await y(n,L):F=await o(n,L),!(F.status!==429||s===!0||(T-=1,T===0));)console.error(`Server responded with ${F.status} ${F.statusText}.  Retrying after ${K}ms delay...`),await fr(K),K*=2;const H=await F.text();F.ok?O(null,H):O(new Error(`${F.status} ${F.statusText}: ${H}`))}catch(T){T instanceof Error&&O(T)}},{})}function Nl(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function zl(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const Kl=xt(El),Fl=xt(xl),ql=xt(Bl),Dl=xt(Al),Wl=xt(_l),$l=xt(Rl),Vl=xt(X()),Hl=ce(ot({total:X(),circulating:X(),nonCirculating:X(),nonCirculatingAccounts:ft(ne)})),$i=ot({amount:ct(),uiAmount:dt(X()),decimals:X(),uiAmountString:yt(ct())}),Gl=ce(ft(ot({address:ne,amount:ct(),uiAmount:dt(X()),decimals:X(),uiAmountString:yt(ct())}))),jl=ce(ft(ot({pubkey:ne,account:ot({executable:je(),owner:ne,lamports:X(),data:ws,rentEpoch:X()})}))),Vi=ot({program:ct(),parsed:Wr(),space:X()}),Yl=ce(ft(ot({pubkey:ne,account:ot({executable:je(),owner:ne,lamports:X(),data:Vi,rentEpoch:X()})}))),Zl=ce(ft(ot({lamports:X(),address:ne}))),tn=ot({executable:je(),owner:ne,lamports:X(),data:ws,rentEpoch:X()}),Xl=ot({pubkey:ne,account:tn}),Jl=an(xe([os(wt),Vi]),xe([Ma,Vi]),n=>Array.isArray(n)?ht(n,ws):n),Hi=ot({executable:je(),owner:ne,lamports:X(),data:Jl,rentEpoch:X()}),Ql=ot({pubkey:ne,account:Hi}),tf=ot({state:xe([re("active"),re("inactive"),re("activating"),re("deactivating")]),active:X(),inactive:X()}),ef=xt(ft(ot({signature:ct(),slot:X(),err:Er,memo:dt(ct()),blockTime:yt(dt(X()))}))),rf=xt(ft(ot({signature:ct(),slot:X(),err:Er,memo:dt(ct()),blockTime:yt(dt(X()))}))),nf=ot({subscription:X(),result:Fn(tn)}),sf=ot({pubkey:ne,account:tn}),of=ot({subscription:X(),result:Fn(sf)}),af=ot({parent:X(),slot:X(),root:X()}),cf=ot({subscription:X(),result:af}),uf=xe([ot({type:xe([re("firstShredReceived"),re("completed"),re("optimisticConfirmation"),re("root")]),slot:X(),timestamp:X()}),ot({type:re("createdBank"),parent:X(),slot:X(),timestamp:X()}),ot({type:re("frozen"),slot:X(),timestamp:X(),stats:ot({numTransactionEntries:X(),numSuccessfulTransactions:X(),numFailedTransactions:X(),maxTransactionsPerEntry:X()})}),ot({type:re("dead"),slot:X(),timestamp:X(),err:ct()})]),hf=ot({subscription:X(),result:uf}),lf=ot({subscription:X(),result:Fn(xe([Ml,Tl]))}),ff=ot({subscription:X(),result:X()}),df=ot({pubkey:ct(),gossip:dt(ct()),tpu:dt(ct()),rpc:dt(ct()),version:dt(ct())}),po=ot({votePubkey:ct(),nodePubkey:ct(),activatedStake:X(),epochVoteAccount:je(),epochCredits:ft(as([X(),X(),X()])),commission:X(),lastVote:X(),rootSlot:dt(X())}),pf=xt(ot({current:ft(po),delinquent:ft(po)})),gf=xe([re("processed"),re("confirmed"),re("finalized")]),yf=ot({slot:X(),confirmations:dt(X()),err:Er,confirmationStatus:yt(gf)}),mf=ce(ft(dt(yf))),wf=xt(X()),La=ot({accountKey:ne,writableIndexes:ft(X()),readonlyIndexes:ft(X())}),bs=ot({signatures:ft(ct()),message:ot({accountKeys:ft(ct()),header:ot({numRequiredSignatures:X(),numReadonlySignedAccounts:X(),numReadonlyUnsignedAccounts:X()}),instructions:ft(ot({accounts:ft(X()),data:ct(),programIdIndex:X()})),recentBlockhash:ct(),addressTableLookups:yt(ft(La))})}),Ca=ot({pubkey:ne,signer:je(),writable:je(),source:yt(xe([re("transaction"),re("lookupTable")]))}),Ua=ot({accountKeys:ft(Ca),signatures:ft(ct())}),Oa=ot({parsed:Wr(),program:ct(),programId:ne}),Na=ot({accounts:ft(ne),data:ct(),programId:ne}),bf=xe([Na,Oa]),kf=xe([ot({parsed:Wr(),program:ct(),programId:ct()}),ot({accounts:ft(ct()),data:ct(),programId:ct()})]),za=an(bf,kf,n=>"accounts"in n?ht(n,Na):ht(n,Oa)),Ka=ot({signatures:ft(ct()),message:ot({accountKeys:ft(Ca),instructions:ft(za),recentBlockhash:ct(),addressTableLookups:yt(dt(ft(La)))})}),Rn=ot({accountIndex:X(),mint:ct(),owner:yt(ct()),programId:yt(ct()),uiTokenAmount:$i}),Fa=ot({writable:ft(ne),readonly:ft(ne)}),qn=ot({err:Er,fee:X(),innerInstructions:yt(dt(ft(ot({index:X(),instructions:ft(ot({accounts:ft(X()),data:ct(),programIdIndex:X()}))})))),preBalances:ft(X()),postBalances:ft(X()),logMessages:yt(dt(ft(ct()))),preTokenBalances:yt(dt(ft(Rn))),postTokenBalances:yt(dt(ft(Rn))),loadedAddresses:yt(Fa),computeUnitsConsumed:yt(X()),costUnits:yt(X())}),ks=ot({err:Er,fee:X(),innerInstructions:yt(dt(ft(ot({index:X(),instructions:ft(za)})))),preBalances:ft(X()),postBalances:ft(X()),logMessages:yt(dt(ft(ct()))),preTokenBalances:yt(dt(ft(Rn))),postTokenBalances:yt(dt(ft(Rn))),loadedAddresses:yt(Fa),computeUnitsConsumed:yt(X()),costUnits:yt(X())}),$r=xe([re(0),re("legacy")]),Ir=ot({pubkey:ct(),lamports:X(),postBalance:dt(X()),rewardType:dt(ct()),commission:yt(dt(X()))}),vf=xt(dt(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:X(),transactions:ft(ot({transaction:bs,meta:dt(qn),version:yt($r)})),rewards:yt(ft(Ir)),blockTime:dt(X()),blockHeight:dt(X())}))),Sf=xt(dt(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:X(),rewards:yt(ft(Ir)),blockTime:dt(X()),blockHeight:dt(X())}))),Ef=xt(dt(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:X(),transactions:ft(ot({transaction:Ua,meta:dt(qn),version:yt($r)})),rewards:yt(ft(Ir)),blockTime:dt(X()),blockHeight:dt(X())}))),If=xt(dt(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:X(),transactions:ft(ot({transaction:Ka,meta:dt(ks),version:yt($r)})),rewards:yt(ft(Ir)),blockTime:dt(X()),blockHeight:dt(X())}))),Bf=xt(dt(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:X(),transactions:ft(ot({transaction:Ua,meta:dt(ks),version:yt($r)})),rewards:yt(ft(Ir)),blockTime:dt(X()),blockHeight:dt(X())}))),xf=xt(dt(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:X(),rewards:yt(ft(Ir)),blockTime:dt(X()),blockHeight:dt(X())}))),Af=xt(dt(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:X(),transactions:ft(ot({transaction:bs,meta:dt(qn)})),rewards:yt(ft(Ir)),blockTime:dt(X())}))),go=xt(dt(ot({blockhash:ct(),previousBlockhash:ct(),parentSlot:X(),signatures:ft(ct()),blockTime:dt(X())}))),Ci=xt(dt(ot({slot:X(),meta:dt(qn),blockTime:yt(dt(X())),transaction:bs,version:yt($r)}))),yn=xt(dt(ot({slot:X(),transaction:Ka,meta:dt(ks),blockTime:yt(dt(X())),version:yt($r)}))),_f=ce(ot({blockhash:ct(),lastValidBlockHeight:X()})),Rf=ce(je()),Mf=ot({slot:X(),numTransactions:X(),numSlots:X(),samplePeriodSecs:X()}),Tf=xt(ft(Mf)),Pf=ce(dt(ot({feeCalculator:ot({lamportsPerSignature:X()})}))),Lf=xt(ct()),Cf=xt(ct()),Uf=ot({err:Er,logs:ft(ct()),signature:ct()}),Of=ot({result:Fn(Uf),subscription:X()}),Nf={"solana-client":"js/1.0.0-maintenance"};class zf{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const B={};return async b=>{const{commitment:O,config:L}=Ht(b),T=this._buildArgs([],O,void 0,L),F=uo(T);return B[F]=B[F]??(async()=>{try{const K=await this._rpcRequest("getBlockHeight",T),H=ht(K,xt(X()));if("error"in H)throw new gt(H.error,"failed to get block height information");return H.result}finally{delete B[F]}})(),await B[F]}})();let r,s,i,o,g,y;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,g=e.disableRetryOnRateLimit,y=e.httpAgent),this._rpcEndpoint=vl(t),this._rpcWsEndpoint=r||kl(t),this._rpcClient=Ol(t,s,i,o,g,y),this._rpcRequest=Nl(this._rpcClient),this._rpcBatchRequest=zl(this._rpcClient),this._rpcWebSocket=new yl(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),g=ht(o,ce(X()));if("error"in g)throw new gt(g.error,`failed to get balance for ${t.toBase58()}`);return g.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=ht(e,xt(dt(X())));if("error"in r)throw new gt(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=ht(t,xt(X()));if("error"in e)throw new gt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=ht(t,Vl);if("error"in e)throw new gt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=ht(r,Hl);if("error"in s)throw new gt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=ht(s,ce($i));if("error"in i)throw new gt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=ht(s,ce($i));if("error"in i)throw new gt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Ht(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const g=this._buildArgs(o,s,"base64",i),y=await this._rpcRequest("getTokenAccountsByOwner",g),B=ht(y,jl);if("error"in B)throw new gt(B.error,`failed to get token accounts owned by account ${t.toBase58()}`);return B.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),g=ht(o,Yl);if("error"in g)throw new gt(g.error,`failed to get token accounts owned by account ${t.toBase58()}`);return g.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=ht(s,Zl);if("error"in i)throw new gt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=ht(s,Gl);if("error"in i)throw new gt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),g=ht(o,ce(dt(tn)));if("error"in g)throw new gt(g.error,`failed to get info about account ${t.toBase58()}`);return g.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),g=ht(o,ce(dt(Hi)));if("error"in g)throw new gt(g.error,`failed to get info about account ${t.toBase58()}`);return g.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(B=>B.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),g=await this._rpcRequest("getMultipleAccounts",o),y=ht(g,ce(ft(dt(Hi))));if("error"in y)throw new gt(y.error,`failed to get info for accounts ${i}`);return y.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(B=>B.toBase58()),o=this._buildArgs([i],r,"base64",s),g=await this._rpcRequest("getMultipleAccounts",o),y=ht(g,ce(ft(dt(tn))));if("error"in y)throw new gt(y.error,`failed to get info for accounts ${i}`);return y.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Ht(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),g=await this._rpcRequest("getStakeActivation",o),y=ht(g,xt(tf));if("error"in y)throw new gt(y.error,`failed to get Stake Activation ${t.toBase58()}`);return y.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Ht(e),{encoding:i,...o}=s||{},g=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:lo(o.filters)}:null}),y=await this._rpcRequest("getProgramAccounts",g),B=ft(Xl),b=o.withContext===!0?ht(y,ce(B)):ht(y,xt(B));if("error"in b)throw new gt(b.error,`failed to get accounts owned by program ${t.toBase58()}`);return b.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),g=ht(o,xt(ft(Ql)));if("error"in g)throw new gt(g.error,`failed to get accounts owned by program ${t.toBase58()}`);return g.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=me.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Lt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((y,B)=>{try{r=this.onSignature(e,(O,L)=>{r=void 0;const T={context:L,value:O};y({__type:Je.PROCESSED,response:T})},t);const b=new Promise(O=>{r==null?O():s=this._onSubscriptionStateChange(r,L=>{L==="subscribed"&&O()})});(async()=>{if(await b,i)return;const O=await this.getSignatureStatus(e);if(i||O==null)return;const{context:L,value:T}=O;if(T!=null)if(T?.err)B(T.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(T.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(T.confirmationStatus==="processed"||T.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,y({__type:Je.PROCESSED,response:{context:L,value:T}})}})()}catch(b){B(b)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(O=>{const L=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let T=await L();if(!i){for(;T<=r;)if(await fr(1e3),i||(T=await L(),i))return;O({__type:Je.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:g,confirmationPromise:y}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),B=this.getCancellationPromise(e);let b;try{const O=await Promise.race([B,y,o]);if(O.__type===Je.PROCESSED)b=O.response;else throw new ds(s)}finally{i=!0,g()}return b}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let g=!1;const y=new Promise(T=>{let F=i,K=null;const H=async()=>{try{const{context:Y,value:j}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return K=Y.slot,j?.nonce}catch{return F}};(async()=>{if(F=await H(),!g)for(;;){if(i!==F){T({__type:Je.NONCE_INVALID,slotInWhichNonceDidAdvance:K});return}if(await fr(2e3),g||(F=await H(),g))return}})()}),{abortConfirmation:B,confirmationPromise:b}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),O=this.getCancellationPromise(e);let L;try{const T=await Promise.race([O,b,y]);if(T.__type===Je.PROCESSED)L=T.response;else{let F;for(;;){const K=await this.getSignatureStatus(o);if(K==null)break;if(K.context.slot<(T.slotInWhichNonceDidAdvance??r)){await fr(400);continue}F=K;break}if(F?.value){const K=t||"finalized",{confirmationStatus:H}=F.value;switch(K){case"processed":case"recent":if(H!=="processed"&&H!=="confirmed"&&H!=="finalized")throw new Pr(o);break;case"confirmed":case"single":case"singleGossip":if(H!=="confirmed"&&H!=="finalized")throw new Pr(o);break;case"finalized":case"max":case"root":if(H!=="finalized")throw new Pr(o);break;default:}L={context:F.context,value:{err:F.value.err}}}else throw new Pr(o)}}finally{g=!0,B()}return L}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(y=>{let B=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{B=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>y({__type:Je.TIMED_OUT,timeoutMs:B}),B)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let g;try{const y=await Promise.race([o,s]);if(y.__type===Je.PROCESSED)g=y.response;else throw new ps(e,y.timeoutMs/1e3)}finally{clearTimeout(r),i()}return g}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=ht(t,xt(ft(df)));if("error"in e)throw new gt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=ht(r,pf);if("error"in s)throw new gt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=ht(i,xt(X()));if("error"in o)throw new gt(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=ht(i,xt(ct()));if("error"in o)throw new gt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=ht(s,xt(ft(ne)));if("error"in i)throw new gt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);Lt(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=ht(s,mf);if("error"in i)throw new gt(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=ht(i,xt(X()));if("error"in o)throw new gt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=ht(r,Kl);if("error"in s)throw new gt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Ht(r),o=this._buildArgs([t.map(B=>B.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),g=await this._rpcRequest("getInflationReward",o),y=ht(g,Il);if("error"in y)throw new gt(y.error,"failed to get inflation reward");return y.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=ht(t,Fl);if("error"in e)throw new gt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=ht(i,Dl);if("error"in o)throw new gt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=ht(t,Wl);if("error"in e)throw new gt(e.error,"failed to get epoch schedule");const r=e.result;return new Ra(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=ht(t,$l);if("error"in e)throw new gt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=ht(s,wf);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=ht(e,Tf);if("error"in r)throw new gt(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=ht(s,Pf);if("error"in i)throw new gt(i.error,"failed to get fee calculator");const{context:o,value:g}=i.result;return{context:o,value:g!==null?g.feeCalculator:null}}async getFeeForMessage(t,e){const r=At(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=ht(i,ce(dt(X())));if("error"in o)throw new gt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=ht(s,ql);if("error"in i)throw new gt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=ht(i,_f);if("error"in o)throw new gt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),g=ht(o,Rf);if("error"in g)throw new gt(g.error,"failed to determine if the blockhash `"+t+"`is valid");return g.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=ht(t,xt(Pl));if("error"in e)throw new gt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=ht(t,xt(ct()));if("error"in e)throw new gt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const g=ht(o,Ef);if("error"in g)throw g.error;return g.result}case"none":{const g=ht(o,Sf);if("error"in g)throw g.error;return g.result}default:{const g=ht(o,vf);if("error"in g)throw g.error;const{result:y}=g;return y?{...y,transactions:y.transactions.map(({transaction:B,meta:b,version:O})=>({meta:b,transaction:{...B,message:Li(O,B.message)},version:O}))}:null}}}catch(g){throw new gt(g,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const g=ht(o,Bf);if("error"in g)throw g.error;return g.result}case"none":{const g=ht(o,xf);if("error"in g)throw g.error;return g.result}default:{const g=ht(o,If);if("error"in g)throw g.error;return g.result}}}catch(g){throw new gt(g,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:g,...y}=t;r=g,e=y}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=ht(i,Ul);if("error"in o)throw new gt(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),g=ht(o,Ci);if("error"in g)throw new gt(g.error,"failed to get transaction");const y=g.result;return y&&{...y,transaction:{...y.transaction,message:Li(y.version,y.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),g=ht(o,yn);if("error"in g)throw new gt(g.error,"failed to get transaction");return g.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(y=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([y],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(y=>{const B=ht(y,yn);if("error"in B)throw new gt(B.error,"failed to get transactions");return B.result})}async getTransactions(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(y=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([y],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(y=>{const B=ht(y,Ci);if("error"in B)throw new gt(B.error,"failed to get transactions");const b=B.result;return b&&{...b,transaction:{...b.transaction,message:Li(b.version,b.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=ht(s,Af);if("error"in i)throw new gt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const g={...o,transactions:o.transactions.map(({transaction:y,meta:B})=>{const b=new ze(y.message);return{meta:B,transaction:{...y,message:b}}})};return{...g,transactions:g.transactions.map(({transaction:y,meta:B})=>({meta:B,transaction:Ct.populate(y.message,y.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=ht(i,xt(ft(X())));if("error"in o)throw new gt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ht(s,go);if("error"in i)throw new gt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=ht(s,go);if("error"in i)throw new gt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=ht(s,Ci);if("error"in i)throw new gt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const g=new ze(o.transaction.message),y=o.transaction.signatures;return{...o,transaction:Ct.populate(g,y)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=ht(s,yn);if("error"in i)throw new gt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const g=ht(o,yn);if("error"in g)throw new gt(g.error,"failed to get confirmed transactions");return g.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const y=await this.getConfirmedBlockSignatures(e,"finalized");y.signatures.length>0&&(s.until=y.signatures[y.signatures.length-1].toString())}catch(y){if(y instanceof Error&&y.message.includes("skipped"))continue;throw y}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const y=await this.getConfirmedBlockSignatures(r);y.signatures.length>0&&(s.before=y.signatures[y.signatures.length-1].toString())}catch(y){if(y instanceof Error&&y.message.includes("skipped"))continue;throw y}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(y=>y.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=ht(i,ef);if("error"in o)throw new gt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=ht(i,rf);if("error"in o)throw new gt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Wi({key:t,state:Wi.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Kn.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=ht(r,Lf);if("error"in s)throw new gt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await fr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Ta;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await fr(xa/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=ht(i,ce(X()));if("error"in o)throw new gt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const K=t.serialize(),H=wt.from(K).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const Y=e||{};Y.encoding="base64","commitment"in Y||(Y.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(Y.innerInstructions=e.innerInstructions);const j=[H,Y],W=await this._rpcRequest("simulateTransaction",j),rt=ht(W,fo);if("error"in rt)throw new Error("failed to simulate transaction: "+rt.error.message);return rt.result}let s;if(t instanceof Ct){let F=t;s=new Ct,s.feePayer=F.feePayer,s.instructions=t.instructions,s.nonceInfo=F.nonceInfo,s.signatures=F.signatures}else s=Ct.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let F=this._disableBlockhashCaching;for(;;){const K=await this._blockhashWithExpiryBlockHeight(F);if(s.lastValidBlockHeight=K.lastValidBlockHeight,s.recentBlockhash=K.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const H=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(H)&&!this._blockhashInfo.transactionSignatures.includes(H)){this._blockhashInfo.simulatedSignatures.push(H);break}else F=!0}}const o=s._compile(),g=o.serialize(),B=s._serialize(g).toString("base64"),b={encoding:"base64",commitment:this.commitment};if(r){const F=(Array.isArray(r)?r:o.nonProgramIds()).map(K=>K.toBase58());b.accounts={encoding:"base64",addresses:F}}i&&(b.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(b.innerInstructions=e.innerInstructions);const O=[B,b],L=await this._rpcRequest("simulateTransaction",O),T=ht(L,fo);if("error"in T){let F;if("data"in T.error&&(F=T.error.data.logs,F&&Array.isArray(F))){const K=`
    `,H=K+F.join(K);console.error(T.error.message,H)}throw new Qr({action:"simulate",signature:"",transactionMessage:T.error.message,logs:F})}return T.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const g=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=g.lastValidBlockHeight,t.recentBlockhash=g.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const y=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(y))o=!0;else{this._blockhashInfo.transactionSignatures.push(y);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=At(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],g=await this._rpcRequest("sendTransaction",o),y=ht(g,Cf);if("error"in y){let B;throw"data"in y.error&&(B=y.error.data.logs),new Qr({action:s?"send":"simulate",signature:"",transactionMessage:y.error.message,logs:B})}return y.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const g=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:g,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[g]=s.callbacks,await this._updateSubscriptions()}catch(g){if(console.error(`Received ${g instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:g}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(g){if(g instanceof Error&&console.error(`${o} error:`,g.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=ht(t,nf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=uo([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Lt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=Ht(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=ht(t,of);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:o}=Ht(r),g=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:lo(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},g)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=ht(t,Of);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=ht(t,cf);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=ht(t,hf);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=ht(t,lf);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,g)=>{if(o.type==="status"){e(o.result,g);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),g=this._makeSubscription({callback:(y,B)=>{e(y,B);try{this.removeSignatureListener(g)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return g}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=ht(t,ff);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Ur{constructor(t){this._keypair=void 0,this._keypair=t??so()}static generate(){return new Ur(so())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=_n(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new Ur({publicKey:r,secretKey:t})}static fromSeed(t){const e=_n(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new Ur({publicKey:e,secretKey:r})}get publicKey(){return new ut(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const er=Object.freeze({CreateLookupTable:{index:0,layout:C.struct([C.u32("instruction"),qr("recentSlot"),C.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:C.struct([C.u32("instruction")])},ExtendLookupTable:{index:2,layout:C.struct([C.u32("instruction"),qr(),C.seq(Mt(),C.offset(C.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:C.struct([C.u32("instruction")])},CloseLookupTable:{index:4,layout:C.struct([C.u32("instruction")])}});class Kf{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=C.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(er))if(o.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Ut(er.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Ut(er.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new ut(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(vs.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class vs{constructor(){}static createLookupTable(t){const[e,r]=ut.findProgramAddressSync([t.authority.toBuffer(),ia().encode(t.recentSlot)],this.programId),s=er.CreateLookupTable,i=Tt(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:ge.programId,isSigner:!1,isWritable:!1}];return[new Wt({programId:this.programId,keys:o,data:i}),e]}static freezeLookupTable(t){const e=er.FreezeLookupTable,r=Tt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Wt({programId:this.programId,keys:s,data:r})}static extendLookupTable(t){const e=er.ExtendLookupTable,r=Tt(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:ge.programId,isSigner:!1,isWritable:!1}),new Wt({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(t){const e=er.DeactivateLookupTable,r=Tt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Wt({programId:this.programId,keys:s,data:r})}static closeLookupTable(t){const e=er.CloseLookupTable,r=Tt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Wt({programId:this.programId,keys:s,data:r})}}vs.programId=new ut("AddressLookupTab1e1111111111111111111111111");class Ff{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=C.u8("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Ve))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=Ut(Ve.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Ut(Ve.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Ut(Ve.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Ut(Ve.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Ss.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Ve=Object.freeze({RequestUnits:{index:0,layout:C.struct([C.u8("instruction"),C.u32("units"),C.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:C.struct([C.u8("instruction"),C.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:C.struct([C.u8("instruction"),C.u32("units")])},SetComputeUnitPrice:{index:3,layout:C.struct([C.u8("instruction"),qr("microLamports")])}});class Ss{constructor(){}static requestUnits(t){const e=Ve.RequestUnits,r=Tt(e,t);return new Wt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=Ve.RequestHeapFrame,r=Tt(e,t);return new Wt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=Ve.SetComputeUnitLimit,r=Tt(e,t);return new Wt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=Ve.SetComputeUnitPrice,r=Tt(e,{microLamports:BigInt(t.microLamports)});return new Wt({keys:[],programId:this.programId,data:r})}}Ss.programId=new ut("ComputeBudget111111111111111111111111111111");const yo=64,mo=32,wo=64,bo=C.struct([C.u8("numSignatures"),C.u8("padding"),C.u16("signatureOffset"),C.u16("signatureInstructionIndex"),C.u16("publicKeyOffset"),C.u16("publicKeyInstructionIndex"),C.u16("messageDataOffset"),C.u16("messageDataSize"),C.u16("messageInstructionIndex")]);class Dn{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,instructionIndex:i}=t;Lt(e.length===mo,`Public Key must be ${mo} bytes but received ${e.length} bytes`),Lt(s.length===wo,`Signature must be ${wo} bytes but received ${s.length} bytes`);const o=bo.span,g=o+e.length,y=g+s.length,B=1,b=wt.alloc(y+r.length),O=i??65535;return bo.encode({numSignatures:B,padding:0,signatureOffset:g,signatureInstructionIndex:O,publicKeyOffset:o,publicKeyInstructionIndex:O,messageDataOffset:y,messageDataSize:r.length,messageInstructionIndex:O},b),b.fill(e,o),b.fill(s,g),b.fill(r,y),new Wt({keys:[],programId:Dn.programId,data:b})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;Lt(e.length===yo,`Private key must be ${yo} bytes but received ${e.length} bytes`);try{const i=Ur.fromSecretKey(e),o=i.publicKey.toBytes(),g=ls(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:g,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Dn.programId=new ut("Ed25519SigVerify111111111111111111111111111");const qf=(n,t)=>{const e=hs.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};hs.utils.isValidPrivateKey;const Df=hs.getPublicKey,ko=32,Ui=20,vo=64,Wf=11,Oi=C.struct([C.u8("numSignatures"),C.u16("signatureOffset"),C.u8("signatureInstructionIndex"),C.u16("ethAddressOffset"),C.u8("ethAddressInstructionIndex"),C.u16("messageDataOffset"),C.u16("messageDataSize"),C.u8("messageInstructionIndex"),C.blob(20,"ethAddress"),C.blob(64,"signature"),C.u8("recoveryId")]);class Or{constructor(){}static publicKeyToEthAddress(t){Lt(t.length===vo,`Public key must be ${vo} bytes but received ${t.length} bytes`);try{return wt.from(ro(At(t))).slice(-Ui)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,recoveryId:i,instructionIndex:o}=t;return Or.createInstructionWithEthAddress({ethAddress:Or.publicKeyToEthAddress(e),message:r,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:s,recoveryId:i,instructionIndex:o=0}=t;let g;typeof e=="string"?e.startsWith("0x")?g=wt.from(e.substr(2),"hex"):g=wt.from(e,"hex"):g=e,Lt(g.length===Ui,`Address must be ${Ui} bytes but received ${g.length} bytes`);const y=1+Wf,B=y,b=y+g.length,O=b+s.length+1,L=1,T=wt.alloc(Oi.span+r.length);return Oi.encode({numSignatures:L,signatureOffset:b,signatureInstructionIndex:o,ethAddressOffset:B,ethAddressInstructionIndex:o,messageDataOffset:O,messageDataSize:r.length,messageInstructionIndex:o,signature:At(s),ethAddress:At(g),recoveryId:i},T),T.fill(At(r),Oi.span),new Wt({keys:[],programId:Or.programId,data:T})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;Lt(e.length===ko,`Private key must be ${ko} bytes but received ${e.length} bytes`);try{const i=At(e),o=Df(i,!1).slice(1),g=wt.from(ro(At(r))),[y,B]=qf(g,i);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:y,recoveryId:B,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Or.programId=new ut("KeccakSecp256k11111111111111111111111111111");var qa;const Da=new ut("StakeConfig11111111111111111111111111111111");class Wa{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class cn{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}qa=cn;cn.default=new qa(0,0,ut.default);class $f{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=C.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(pe))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=Ut(pe.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new Wa(new ut(e.staker),new ut(e.withdrawer)),lockup:new cn(r.unixTimestamp,r.epoch,new ut(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Ut(pe.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=Ut(pe.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ut(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=Ut(pe.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new ut(i),newAuthorizedPubkey:new ut(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Ut(pe.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Ut(pe.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Ut(pe.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Ut(pe.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Wn.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const pe=Object.freeze({Initialize:{index:0,layout:C.struct([C.u32("instruction"),Gh(),jh()])},Authorize:{index:1,layout:C.struct([C.u32("instruction"),Mt("newAuthorized"),C.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:C.struct([C.u32("instruction")])},Split:{index:3,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},Withdraw:{index:4,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},Deactivate:{index:5,layout:C.struct([C.u32("instruction")])},Merge:{index:7,layout:C.struct([C.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:C.struct([C.u32("instruction"),Mt("newAuthorized"),C.u32("stakeAuthorizationType"),yr("authoritySeed"),Mt("authorityOwner")])}}),Vf=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Wn{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:s}=t,i=s||cn.default,o=pe.Initialize,g=Tt(o,{authorized:{staker:At(r.staker.toBuffer()),withdrawer:At(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:At(i.custodian.toBuffer())}}),y={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Fr,isSigner:!1,isWritable:!1}],programId:this.programId,data:g};return new Wt(y)}static createAccountWithSeed(t){const e=new Ct;e.add(ge.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(t){const e=new Ct;e.add(ge.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:s}=t,i=pe.Delegate,o=Tt(i);return new Ct().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:bn,isSigner:!1,isWritable:!1},{pubkey:Da,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=t,g=pe.Authorize,y=Tt(g,{newAuthorized:At(s.toBuffer()),stakeAuthorizationType:i.index}),B=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&B.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ct().add({keys:B,programId:this.programId,data:y})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:g,custodianPubkey:y}=t,B=pe.AuthorizeWithSeed,b=Tt(B,{newAuthorized:At(o.toBuffer()),stakeAuthorizationType:g.index,authoritySeed:s,authorityOwner:At(i.toBuffer())}),O=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:qe,isSigner:!1,isWritable:!1}];return y&&O.push({pubkey:y,isSigner:!0,isWritable:!1}),new Ct().add({keys:O,programId:this.programId,data:b})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=t,o=pe.Split,g=Tt(o,{lamports:i});return new Wt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:g})}static split(t,e){const r=new Ct;return r.add(ge.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:g,lamports:y}=t,B=new Ct;return B.add(ge.allocate({accountPubkey:i,basePubkey:o,seed:g,space:this.space,programId:this.programId})),e&&e>0&&B.add(ge.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),B.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:y}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:s}=t,i=pe.Merge,o=Tt(i);return new Ct().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:bn,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:o}=t,g=pe.Withdraw,y=Tt(g,{lamports:i}),B=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:bn,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&B.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ct().add({keys:B,programId:this.programId,data:y})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,s=pe.Deactivate,i=Tt(s);return new Ct().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Wn.programId=new ut("Stake11111111111111111111111111111111111111");Wn.space=200;class $a{constructor(t,e,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=s}}class Hf{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=C.u32("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(He))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Ut(He.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new $a(new ut(e.nodePubkey),new ut(e.authorizedVoter),new ut(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=Ut(He.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new ut(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=Ut(He.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new ut(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new ut(s),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Ut(He.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Vr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const He=Object.freeze({InitializeAccount:{index:0,layout:C.struct([C.u32("instruction"),Yh()])},Authorize:{index:1,layout:C.struct([C.u32("instruction"),Mt("newAuthorized"),C.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:C.struct([C.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:C.struct([C.u32("instruction"),Zh()])}}),Gf=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Vr{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:s}=t,i=He.InitializeAccount,o=Tt(i,{voteInit:{nodePubkey:At(s.nodePubkey.toBuffer()),authorizedVoter:At(s.authorizedVoter.toBuffer()),authorizedWithdrawer:At(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),g={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Fr,isSigner:!1,isWritable:!1},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Wt(g)}static createAccount(t){const e=new Ct;return e.add(ge.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,o=He.Authorize,g=Tt(o,{newAuthorized:At(s.toBuffer()),voteAuthorizationType:i.index}),y=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ct().add({keys:y,programId:this.programId,data:g})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:g}=t,y=He.AuthorizeWithSeed,B=Tt(y,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:At(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:At(i.toBuffer()),voteAuthorizationType:o.index}}),b=[{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:qe,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new Ct().add({keys:b,programId:this.programId,data:B})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=t,o=He.Withdraw,g=Tt(o,{lamports:s}),y=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ct().add({keys:y,programId:this.programId,data:g})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Vr.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:s}=t,i=He.UpdateValidatorIdentity,o=Tt(i),g=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ct().add({keys:g,programId:this.programId,data:o})}}Vr.programId=new ut("Vote111111111111111111111111111111111111111");Vr.space=3762;const Va=new ut("Va1idator1nfo111111111111111111111111111111"),jf=ot({name:ct(),website:yt(ct()),details:yt(ct()),iconUrl:yt(ct()),keybaseUsername:yt(ct())});class Es{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(_e(e)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new ut(Re(e,0,Ge)),g=$e(e)===1;s.push({publicKey:o,isSigner:g})}if(s[0].publicKey.equals(Va)&&s[1].isSigner){const i=yr().decode(wt.from(e)),o=JSON.parse(i);return sa(o,jf),new Es(s[1].publicKey,o)}return null}}const Yf=new ut("Vote111111111111111111111111111111111111111"),Zf=C.struct([Mt("nodePubkey"),Mt("authorizedWithdrawer"),C.u8("commission"),C.nu64(),C.seq(C.struct([C.nu64("slot"),C.u32("confirmationCount")]),C.offset(C.u32(),-8),"votes"),C.u8("rootSlotValid"),C.nu64("rootSlot"),C.nu64(),C.seq(C.struct([C.nu64("epoch"),Mt("authorizedVoter")]),C.offset(C.u32(),-8),"authorizedVoters"),C.struct([C.seq(C.struct([Mt("authorizedPubkey"),C.nu64("epochOfLastAuthorizedSwitch"),C.nu64("targetEpoch")]),32,"buf"),C.nu64("idx"),C.u8("isEmpty")],"priorVoters"),C.nu64(),C.seq(C.struct([C.nu64("epoch"),C.nu64("credits"),C.nu64("prevCredits")]),C.offset(C.u32(),-8),"epochCredits"),C.struct([C.nu64("slot"),C.nu64("timestamp")],"lastTimestamp")]);class Is{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=Zf.decode(At(t),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new Is({nodePubkey:new ut(r.nodePubkey),authorizedWithdrawer:new ut(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(Xf),priorVoters:Jf(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Xf({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new ut(n)}}function So({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new ut(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function Jf({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(So),...n.slice(0,t).map(So)]}const Eo={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Qf(n,t){const e=t===!1?"http":"https";if(!n)return Eo[e].devnet;const r=Eo[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function td(n,t,e,r){let s,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(s=e,i=r):i=e;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},g=await n.sendRawTransaction(t,o),y=i&&i.commitment,b=(await(s?n.confirmTransaction(s,y):n.confirmTransaction(g,y))).value;if(b.err)throw g!=null?new Qr({action:o?.skipPreflight?"send":"simulate",signature:g,transactionMessage:`Status: (${JSON.stringify(b)})`}):new Error(`Raw transaction ${g} failed (${JSON.stringify(b)})`);return g}const ed=1e9,cd=Object.freeze(Object.defineProperty({__proto__:null,Account:$h,AddressLookupTableAccount:Wi,AddressLookupTableInstruction:Kf,AddressLookupTableProgram:vs,Authorized:Wa,BLOCKHASH_CACHE_TIMEOUT_MS:Ta,BPF_LOADER_DEPRECATED_PROGRAM_ID:Vh,BPF_LOADER_PROGRAM_ID:ul,BpfLoader:hl,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:Ve,ComputeBudgetInstruction:Ff,ComputeBudgetProgram:Ss,Connection:zf,Ed25519Program:Dn,Enum:Dh,EpochSchedule:Ra,FeeCalculatorLayout:Aa,Keypair:Ur,LAMPORTS_PER_SOL:ed,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:er,Loader:kr,Lockup:cn,MAX_SEED_LENGTH:Ea,Message:ze,MessageAccountKeys:Jr,MessageV0:br,NONCE_ACCOUNT_LENGTH:Di,NonceAccount:Kn,PACKET_DATA_SIZE:hr,PUBLIC_KEY_LENGTH:Ge,PublicKey:ut,SIGNATURE_LENGTH_IN_BYTES:Xr,SOLANA_SCHEMA:jr,STAKE_CONFIG_ID:Da,STAKE_INSTRUCTION_LAYOUTS:pe,SYSTEM_INSTRUCTION_LAYOUTS:Gt,SYSVAR_CLOCK_PUBKEY:qe,SYSVAR_EPOCH_SCHEDULE_PUBKEY:el,SYSVAR_INSTRUCTIONS_PUBKEY:rl,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:wn,SYSVAR_RENT_PUBKEY:Fr,SYSVAR_REWARDS_PUBKEY:nl,SYSVAR_SLOT_HASHES_PUBKEY:il,SYSVAR_SLOT_HISTORY_PUBKEY:sl,SYSVAR_STAKE_HISTORY_PUBKEY:bn,Secp256k1Program:Or,SendTransactionError:Qr,SolanaJSONRPCError:gt,SolanaJSONRPCErrorCode:ol,StakeAuthorizationLayout:Vf,StakeInstruction:$f,StakeProgram:Wn,Struct:fs,SystemInstruction:al,SystemProgram:ge,Transaction:Ct,TransactionExpiredBlockheightExceededError:ds,TransactionExpiredNonceInvalidError:Pr,TransactionExpiredTimeoutError:ps,TransactionInstruction:Wt,TransactionMessage:ys,TransactionStatus:Je,VALIDATOR_INFO_KEY:Va,VERSION_PREFIX_MASK:Nn,VOTE_PROGRAM_ID:Yf,ValidatorInfo:Es,VersionedMessage:gs,VersionedTransaction:ms,VoteAccount:Is,VoteAuthorizationLayout:Gf,VoteInit:$a,VoteInstruction:Hf,VoteProgram:Vr,clusterApiUrl:Qf,sendAndConfirmRawTransaction:td,sendAndConfirmTransaction:qi},Symbol.toStringTag,{value:"Module"}));export{Be as B,zf as C,Ur as K,ut as P,Ct as T,gs as V,ms as a,ea as b,ta as c,wt as d,Dr as e,fa as f,cd as i,ns as r,nh as v};
